window.__require=function e(t,o,n){function i(a,c){if(!o[a]){if(!t[a]){var s=a.split("/");if(s=s[s.length-1],!t[s]){var l="function"==typeof __require&&__require;if(!c&&l)return l(s,!0);if(r)return r(s,!0);throw new Error("Cannot find module '"+a+"'")}}var u=o[a]={exports:{}};t[a][0].call(u.exports,function(e){return i(t[a][1][e]||e)},u,u.exports,e,t,o,n)}return o[a].exports}for(var r="function"==typeof __require&&__require,a=0;a<n.length;a++)i(n[a]);return i}({AdController:[function(e,t,o){"use strict";cc._RF.push(t,"76947BpJhtKGKJpSwARC3NM","AdController");var n=this&&this.__extends||function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();Object.defineProperty(o,"__esModule",{value:!0});var i=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.hasBind=!1,t.finishCallback={},t.failedCallback={},t.adCount=0,t.msgMap={},t.musicVolume=0,t.effectVolume=0,t}return n(t,e),t.prototype.showAd=function(e,t,o){var n=this;0==this.hasBind&&this.bindCallback();var i=e+this.adCount;if(this.msgMap[i]=e,null==this.finishCallback[i]&&(this.finishCallback[i]=[]),this.finishCallback[i].push(t),null==this.failedCallback[i]&&(this.failedCallback[i]=[]),this.failedCallback[i].push(o),this.musicVolume=cc.audioEngine.getMusicVolume(),this.effectVolume=cc.audioEngine.getEffectsVolume(),CELER_X)celerSDK.showAd(i);else if(cc.director.getScene()&&cc.director.getScene().getChildByName("Canvas")){var r=cc.director.getScene().getChildByName("Canvas");if(r.getChildByName("adNode"))return;var a=new cc.Node("adNode"),c=a.addComponent(cc.VideoPlayer);c.remoteURL="https://vicat.wang/GameRes/catcatcat.mp4",r.width=1464,r.height=2400,r.addChild(a),a.setPosition(0,0),c.node.on("ready-to-play",function(){console.log("ready-to-play"),a.width=1080,a.height=1920,c.play()},this),c.node.on("meta-loaded",function(){console.log("meta-loaded")},this),c.node.on("clicked",function(){if(console.log("clicked"),a.pauseCount++,a.pauseCount>=5){for(var e=document.getElementsByClassName("cocosVideo"),t=0;t<e.length;t++){var o=e.item(t);o&&o.remove()}setTimeout(function(){a.removeFromParent(!0),n.onAddFaild(i)},0)}},this),c.node.on("playing",function(){console.log("playing")},this),a.pauseCount=0,c.node.on("paused",function(){if(console.log("paused"),a.pauseCount++,a.pauseCount>=5){for(var e=document.getElementsByClassName("cocosVideo"),t=0;t<e.length;t++){var o=e.item(t);o&&o.remove()}setTimeout(function(){a.removeFromParent(!0),n.onAddFaild(i)},0)}},this),c.node.on("stopped",function(){console.log("stopped")},this),c.node.on("completed",function(){console.log("completed"),c.stop();for(var e=document.getElementsByClassName("cocosVideo"),t=0;t<e.length;t++){var o=e.item(t);o&&o.remove()}setTimeout(function(){a.removeFromParent(!0),n.onAdFinish(i)},0)},this)}this.adCount++,console.log(" request ad:",i)},t.prototype.bindCallback=function(){this.hasBind=!0,CELER_X&&(celerSDK.onAdPlayFailed(this.onAddFaild.bind(this)),celerSDK.onAdPlayFinished(this.onAdFinish.bind(this)))},t.prototype.onAdFinish=function(e){if(this.finishCallback[e]){for(var t=0,o=this.finishCallback[e];t<o.length;t++){(0,o[t])(this.msgMap[e])}this.finishCallback[e]=null,this.failedCallback[e]=null,this.msgMap[e]=null}},t.prototype.onAddFaild=function(e){if(this.failedCallback[e]){for(var t=0,o=this.failedCallback[e];t<o.length;t++){(0,o[t])(this.msgMap[e])}this.failedCallback[e]=null,this.finishCallback[e]=null,this.msgMap[e]=null}},t}(e("../utils/ToSingleton").SingleTon());o.AdController=i,cc._RF.pop()},{"../utils/ToSingleton":"ToSingleton"}],AdLayer:[function(e,t,o){"use strict";cc._RF.push(t,"46470HQTxxAgrm+9yO+kPft","AdLayer");var n=this&&this.__extends||function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var r,a=e("./controller/AdController"),c=e("./controller/Game"),s=e("./table"),l=e("./utils/Signal"),u=e("./WildAdButton"),h=cc._decorator,p=h.ccclass,d=h.property,f=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t}(l.BaseSignal);o.AdFinishSignal=f,function(e){e[e.Time=0]="Time",e[e.Wild=1]="Wild"}(r||(r={}));var g=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t}(l.BaseSignal);o.HidePauseLayerSignal=g;var _=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.AdAtlas=null,t}return n(t,e),Object.defineProperty(t.prototype,"Panel",{get:function(){return this.node.getChildByName("NormalPanel")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"WatchAd",{get:function(){return this.Panel.getChildByName("btn_adv_yes")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"BackToGame",{get:function(){return this.Panel.getChildByName("btn_adv_no")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Content",{get:function(){return this.Panel.getChildByName("Content").getComponent(cc.RichText)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Title",{get:function(){return this.Panel.getChildByName("font_title_freewild").getComponent(cc.Sprite)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"FailTip",{get:function(){return this.node.getChildByName("FailTip")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"FailLabel",{get:function(){return this.FailTip.getChildByName("Label").getComponent(cc.RichText)},enumerable:!0,configurable:!0}),t.prototype.onLoad=function(){var e=this;this.node.active=!1,this.node.scale=1,u.WildAdButtonClick.inst.addListener(function(){e.Show()},this),this.BackToGame.on(cc.Node.EventType.TOUCH_END,function(){setTimeout(function(){e.node.active=!1},0)},this)},t.prototype.onAdFinish=function(e){var t=this;setTimeout(function(){e==r[r.Wild]&&(c.Game.addWildCount(1),CELER_X&&u.HideWildAdButtonSignal.inst.dispatch())},100),setTimeout(function(){t.Hide()},0)},t.prototype.onAdFailed=function(e){var t=this;this.FailTip.active=!0,this.Panel.active=!1,r[r.Wild],setTimeout(function(){t.Hide()},2e3)},t.prototype.Hide=function(){0!=this.node.active&&(this.node.active=!1)},t.prototype.Show=function(){var e=this;1!=this.node.active&&(this.node.active=!0,this.FailTip.active=!1,this.Panel.active=!0,this.WatchAd.active=!0,this.FailLabel.string=lan.t(s.En_View.GuangGaoJieMian,s.En_ID.GuanKanGuangGaoShiBai),this.Content.string=lan.t(s.En_View.GuangGaoJieMian,s.En_ID.MianFeiYePai),this.WatchAd.targetOff(this),this.WatchAd.once(cc.Node.EventType.TOUCH_END,function(){setTimeout(function(){e.WatchAd.active=!1},0),a.AdController.inst.showAd(r[r.Wild],function(t){console.log(" watch ad success:",t),e.onAdFinish(t)},function(t){console.log(" watch ad fail:",t),e.onAdFailed(t)})},this))},i([d(cc.SpriteAtlas)],t.prototype,"AdAtlas",void 0),t=i([p],t)}(cc.Component);o.default=_,cc._RF.pop()},{"./WildAdButton":"WildAdButton","./controller/AdController":"AdController","./controller/Game":"Game","./table":"table","./utils/Signal":"Signal"}],AudioController:[function(e,t,o){"use strict";cc._RF.push(t,"1d6d0OoirhGUovLXt4pSNNX","AudioController"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../AdLayer"),i=e("../utils/HashMap"),r=e("./EventManager"),a=e("./EventName"),c=e("./Game"),s="sounds/";window.oncanplay&&(window.oncanplay=function(){l.canPlay=!0});var l=function(){function e(){this.audioID={},this.clips=new i.HashMap}return Object.defineProperty(e,"inst",{get:function(){return this.ins?this.ins:this.ins=new e},enumerable:!0,configurable:!0}),e.prototype.init=function(e){console.log(" start load AudioClip ");var t=this;cc.loader.loadResDir(s,cc.AudioClip,function(o,n,i){if(o)console.error(o);else{for(var r=0,a=n;r<a.length;r++){var c=a[r];"string"==typeof c._audio&&cc.loader._cache&&cc.loader._cache[c._audio]&&cc.loader._cache[c._audio].buffer&&(c._audio=cc.loader._cache[c._audio].buffer),t.clips.add(c.name,c)}t.initEvent(),e&&e()}})},e.prototype.initEvent=function(){var e=this;r.gEventMgr.targetOff(this),this.playMusic("bgm"),r.gEventMgr.on(a.GlobalEvent.PLAY_RECYCLE_POKERS,function(){e.playEffect("recyclePoker")},this),r.gEventMgr.on(a.GlobalEvent.DEV_POKERS,function(){e.playEffect("devPoker")},this),n.AdFinishSignal.inst.addListener(function(){e.playEffect("change_horce")},this),r.gEventMgr.on(a.GlobalEvent.PLAY_POKER_PLACE,function(){e.playEffect("pokerPlace")},this),r.gEventMgr.on(a.GlobalEvent.PLAY_RECYCLE,function(){e.playEffect("recycle"+c.Game.getCombo())},this),r.gEventMgr.on(a.GlobalEvent.PLAY_POKER_FLY,function(){e.playEffect("pokerFly")},this),r.gEventMgr.on(a.GlobalEvent.PLAY_OVER_1,function(){e.playEffect("result_flip")},this),r.gEventMgr.on(a.GlobalEvent.PLAY_OVER_2,function(){e.playEffect("result_dev")},this),r.gEventMgr.on(a.GlobalEvent.PLAY_PAUSE,function(){e.playEffect("pause")},this),r.gEventMgr.on(a.GlobalEvent.PLAY_SHAKE,function(){e.playEffect("shake")},this),r.gEventMgr.on(a.GlobalEvent.PLAY_START,function(){e.playEffect("start_count")},this),r.gEventMgr.on(a.GlobalEvent.PLAY_BUST,function(){e.playEffect("bust")},this),r.gEventMgr.on(a.GlobalEvent.PLAY_CHANGE_2_WILD,function(){e.playEffect("change2wild")},this),r.gEventMgr.on(a.GlobalEvent.PLAY_WILD_ANI,function(){e.playEffect("wild_ani")},this)},e.prototype.playEffect=function(t,o){var n=this;if(void 0===o&&(o=!1),e.canPlay){if(!(cc.audioEngine.getEffectsVolume()<=.05)){var i=this.clips.get(t);i?this.audioID[t]=cc.audioEngine.playEffect(i,o):cc.loader.loadRes(s+t,cc.AudioClip,function(e,i){e?console.error(e):("string"==typeof i._audio&&cc.loader._cache&&cc.loader._cache[i._audio]&&cc.loader._cache[i._audio].buffer&&(i._audio=cc.loader._cache[i._audio].buffer),n.clips.add(i.name,i),n.audioID[t]=cc.audioEngine.playEffect(i,o))})}}else this.bindTouch()},e.prototype.playMusic=function(t,o){var n=this;if(void 0===o&&(o=!0),!e.canPlay)return this.bindTouch(),void e.PlayedList.push({loop:!0,volume:1,clipName:t,supTime:Date.now(),skip:!1,isBgm:!0});var i=this.clips.get(t);i?cc.audioEngine.playMusic(i,o):cc.loader.loadRes(s+t,cc.AudioClip,function(e,t){e?console.error(e):("string"==typeof t._audio&&cc.loader._cache&&cc.loader._cache[t._audio]&&cc.loader._cache[t._audio].buffer&&(t._audio=cc.loader._cache[t._audio].buffer),n.clips.add(t.name,t),cc.audioEngine.playMusic(t,o))})},e.prototype.bindTouch=function(){if(!e.hasBindTouch){var t=this,o=function(){var n;for(cc.game.canvas.removeEventListener("touchstart",o),e.canPlay=!0;(n=e.PlayedList.pop())&&t.clips.get(n.clipName)&&!n.skip;)cc.audioEngine.playMusic(t.clips.get(n.clipName),n.loop)};e.hasBindTouch=!0,cc.game.canvas.addEventListener("touchstart",o)}},e.PlayedList=[],e.canPlay=!1,e.hasBindTouch=!1,e}();o.gAudio=l.inst,cc._RF.pop()},{"../AdLayer":"AdLayer","../utils/HashMap":"HashMap","./EventManager":"EventManager","./EventName":"EventName","./Game":"Game"}],BaseMediator:[function(e,t,o){"use strict";cc._RF.push(t,"2ac5fmQAcNDK43CcZXIriMX","BaseMediator");var n=this&&this.__extends||function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,a=r.ccclass,c=(r.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.bind=function(e){this.view=e},Object.defineProperty(t.prototype,"View",{get:function(){return console.assert(null!=this.view," view is null"),this.view},enumerable:!0,configurable:!0}),t.prototype.onRegister=function(){console.error(" should override onRegister ")},t.prototype.onUnregister=function(){console.error(" should override onUnregister ")},t=i([a],t)}(cc.Component));o.default=c,cc._RF.pop()},{}],BaseView:[function(e,t,o){"use strict";cc._RF.push(t,"c4df7HS1whFC6eDVt/QHu1u","BaseView");var n=this&&this.__extends||function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,a=r.ccclass,c=(r.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.onLoad=function(){this.node.scale=0},t.prototype.Show=function(e){this.node.active=!0,this.node.runAction(cc.sequence(cc.callFunc(function(){}),cc.scaleTo(.1,1),cc.callFunc(function(){e&&e()})))},t.prototype.Hide=function(e){var t=this;this.node.runAction(cc.sequence(cc.scaleTo(.1,0),cc.callFunc(function(){t.node.active=!1,e&&e()})))},t.prototype.OnClick=function(){},t.prototype.BindMedaitor=function(e){if(!this.node.getComponent(e)){var t=this.node.addComponent(e);return t.bind&&t.bind(this),t.onRegister&&t.onRegister(),t}console.warn(" this node already has the same component..")},t.prototype.UnbindMedaitor=function(e){var t=this.node.getComponent(e);if(t)return t.onUnregister&&t.onUnregister(),t.bind&&t.bind(null),this.node.removeComponent(e),t;console.warn(" component already removed..")},t=i([a],t)}(cc.Component));o.default=c,cc._RF.pop()},{}],BustRoot:[function(e,t,o){"use strict";cc._RF.push(t,"ebe1c+Z/0NMbI1e+5pl3r9q","BustRoot");var n=this&&this.__extends||function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var r=e("./GameSignals"),a=cc._decorator,c=a.ccclass,s=(a.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.onLoad=function(){var e=this;r.BustCountUpdateSignal.inst.addListenerOne(function(t){for(var o=0;o<e.node.childrenCount;o++){var n=e.node.children[o];n.getChildByName("Cover").active=t-1>=o}},this)},t=i([c],t)}(cc.Component));o.default=s,cc._RF.pop()},{"./GameSignals":"GameSignals"}],EventManager:[function(e,t,o){"use strict";cc._RF.push(t,"15a47pj/bZLz4bw5c1lt4L9","EventManager"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function e(){this.eventTarget=new cc.EventTarget}return Object.defineProperty(e,"inst",{get:function(){return this.ins?this.ins:this.ins=new e},enumerable:!0,configurable:!0}),e.prototype.emit=function(e,t,o,n,i,r){this.eventTarget.emit(e.toString(),t,o,n,i,r)},e.prototype.on=function(e,t,o,n){return this.eventTarget.on(e.toString(),t,o,n)},e.prototype.once=function(e,t,o){this.eventTarget.once(e.toString(),t,o)},e.prototype.dispatchEvent=function(e){this.eventTarget.dispatchEvent(e)},e.prototype.off=function(e,t,o){this.eventTarget.off(e.toString(),t,o)},e.prototype.hasEventListener=function(e){return this.eventTarget.hasEventListener(e.toString())},e.prototype.targetOff=function(e){this.eventTarget.targetOff(e)},e}();o.gEventMgr=n.inst,cc._RF.pop()},{}],EventName:[function(e,t,o){"use strict";cc._RF.push(t,"bf67a7QRNNGpo1qJkcJdq4+","EventName"),Object.defineProperty(o,"__esModule",{value:!0}),function(e){e[e.UPDATE_DRAW_ICON=0]="UPDATE_DRAW_ICON",e[e.UPDATE_SCORE=1]="UPDATE_SCORE",e[e.UPDATE_BACK_BTN_ICON=2]="UPDATE_BACK_BTN_ICON",e[e.UPDATE_RECYCLE_POKER=3]="UPDATE_RECYCLE_POKER",e[e.OPEN_RESULT=4]="OPEN_RESULT",e[e.RESTART=5]="RESTART",e[e.COMPLETE=6]="COMPLETE",e[e.AUTO_COMPLETE_DONE=7]="AUTO_COMPLETE_DONE",e[e.UPDATE_CUR_SELECT_POKER=8]="UPDATE_CUR_SELECT_POKER",e[e.UPDATE_WILD_COUNT=9]="UPDATE_WILD_COUNT",e[e.UPDATE_STREAK_COUNT=10]="UPDATE_STREAK_COUNT",e[e.BUST=11]="BUST",e[e.COMPLETE_21=12]="COMPLETE_21",e[e.OVER_FIVE_CARDS=13]="OVER_FIVE_CARDS",e[e.COMBO=14]="COMBO",e[e.SUPER_COMBO=15]="SUPER_COMBO",e[e.WILD=16]="WILD",e[e.NO_BUST=17]="NO_BUST",e[e.CHECK_COMPLETE=18]="CHECK_COMPLETE",e[e.PLAY_RECYCLE_POKERS=19]="PLAY_RECYCLE_POKERS",e[e.DEV_POKERS=20]="DEV_POKERS",e[e.PLAY_POKER_PLACE=21]="PLAY_POKER_PLACE",e[e.PLAY_POKER_FLY=22]="PLAY_POKER_FLY",e[e.PLAY_OVER_1=23]="PLAY_OVER_1",e[e.PLAY_OVER_2=24]="PLAY_OVER_2",e[e.PLAY_PAUSE=25]="PLAY_PAUSE",e[e.PLAY_START=26]="PLAY_START",e[e.PLAY_SHAKE=27]="PLAY_SHAKE",e[e.PLAY_BUST=28]="PLAY_BUST",e[e.SMALL_BGM=29]="SMALL_BGM",e[e.NORMAL_BGM=30]="NORMAL_BGM",e[e.PLAY_RECYCLE=31]="PLAY_RECYCLE",e[e.PLAY_CHANGE_2_WILD=32]="PLAY_CHANGE_2_WILD",e[e.PLAY_WILD_ANI=33]="PLAY_WILD_ANI",e[e.POP_GUIDE_STEP=34]="POP_GUIDE_STEP",e[e.S_777=35]="S_777",e[e.ON_HIDE=36]="ON_HIDE",e[e.ON_SHOW=37]="ON_SHOW"}(o.GlobalEvent||(o.GlobalEvent={})),cc._RF.pop()},{}],FrameAniBase:[function(e,t,o){"use strict";cc._RF.push(t,"7b096y6T25AM7UDiRQaKzbP","FrameAniBase");var n=this&&this.__extends||function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,a=r.ccclass,c=r.property,s=r.requireComponent,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.Frames=null,t.PrefixName="",t.FrameCount=0,t.Interval=.05,t.Priority=0,t.Loop=!1,t.PlayOnLoad=!1,t.currentIndex=0,t.time=0,t.isPlay=!1,t.listener=[],t.complateEvent=[],t}var o;return n(t,e),o=t,Object.defineProperty(t.prototype,"Sprite",{get:function(){return this.node.getComponent(cc.Sprite)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Animation",{set:function(e){this.Frames=e},enumerable:!0,configurable:!0}),t.prototype.onFocusInEditor=function(){},t.prototype.onLostFocusInEditor=function(){clearInterval(o.intervalID)},t.prototype.onLoad=function(){this.time=this.Interval,this.isPlay=this.PlayOnLoad},t.prototype.play=function(){this.isPlay=!0,this.currentIndex=0,0==this.isPlaying&&this.callEventComplete()},t.prototype.onStartPlay=function(){},t.prototype.playOnLoop=function(){this.Loop=!0,this.play()},t.prototype.playByStep=function(){this.isPlay=!0,this.nextFrame(),this.isPlay=!1},t.prototype.pause=function(){this.isPlay=!1},t.prototype.resume=function(){this.isPlay=!0},t.prototype.stop=function(){this.isPlay=!1,this.currentIndex=0,this.updateCurrentFrame(),this.Loop=!1},t.prototype.updateCurrentFrame=function(){""!=this.PrefixName?this.Sprite.spriteFrame=this.Frames.getSpriteFrame(this.PrefixName+(this.currentIndex+1)):this.Sprite.spriteFrame=this.Frames.getSpriteFrames()[this.currentIndex]},t.prototype.onKeyFrame=function(e){},t.prototype.addKeyEventListener=function(e,t){this.listener.push({callback:e,target:t})},Object.defineProperty(t.prototype,"ListenerCount",{get:function(){return this.listener.length},enumerable:!0,configurable:!0}),t.prototype.clearAllListener=function(){return this.listener.length=0,this},t.prototype.onComplete=function(){},t.prototype.callEventFrame=function(){this.onKeyFrame(this.currentIndex);for(var e=0,t=this.listener;e<t.length;e++){var o=t[e];o.callback.apply(o.target,[this.currentIndex,this.__classname__])}},t.prototype.callEventComplete=function(){this.onComplete();for(var e=0,t=this.complateEvent;e<t.length;e++){var o=t[e];o.f.apply(o.target,[this.__classname__])}},t.prototype.addCompleteEvent=function(e,t){this.complateEvent.push({f:e,target:t})},Object.defineProperty(t.prototype,"TotalFrameCount",{get:function(){return""!=this.PrefixName&&this.FrameCount>0?this.FrameCount:this.Frames&&this.Frames.getSpriteFrames?this.Frames.getSpriteFrames().length:0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"CompleteEventCount",{get:function(){return this.complateEvent.length},enumerable:!0,configurable:!0}),t.prototype.clearCompleteEvent=function(){return this.complateEvent.length=0,this},t.prototype.start=function(){},Object.defineProperty(t.prototype,"isPlaying",{get:function(){if(this.isPlay&&this.Frames&&this.Frames.getSpriteFrames&&this.Frames.getSpriteFrames().length>0){for(var e=0,t=this.getComponents(o);e<t.length;e++){var n=t[e];if(n.Priority>this.Priority&&n.isPlaying)return!1}return!0}return!1},enumerable:!0,configurable:!0}),t.prototype.nextFrame=function(){0!=this.isPlaying?this.Frames&&this.Frames.getSpriteFrames&&this.Frames.getSpriteFrames().length>0&&(0==this.currentIndex&&this.onStartPlay(),this.updateCurrentFrame(),this.callEventFrame(),this.currentIndex=(this.currentIndex+1)%this.TotalFrameCount,0==this.currentIndex&&0==this.Loop&&(this.isPlay=!1,this.callEventComplete())):this.time=this.Interval},t.prototype.update=function(e){this.time>=this.Interval&&(this.time=0,this.nextFrame()),this.time+=e},t.aniName="FrameAniBase",t.intervalID=-1,i([c(cc.SpriteAtlas)],t.prototype,"Frames",void 0),i([c],t.prototype,"PrefixName",void 0),i([c],t.prototype,"FrameCount",void 0),i([c],t.prototype,"Interval",void 0),i([c],t.prototype,"Priority",void 0),i([c],t.prototype,"Loop",void 0),i([c],t.prototype,"PlayOnLoad",void 0),t=o=i([a,s(cc.Sprite)],t)}(cc.Component);o.default=l,cc._RF.pop()},{}],GameFactory:[function(e,t,o){"use strict";cc._RF.push(t,"44968IEriNJurc3wbMrKqft","GameFactory"),Object.defineProperty(o,"__esModule",{value:!0});var n,i=e("../utils/HashMap"),r=function(){function e(e,t,o){this._pool=[],this.poolHandlerComps=[],this.poolHandlerComps=o,this.template=e,this.initPool(t)}return e.prototype.initPool=function(e){for(var t=0;t<e;++t){var o=cc.instantiate(this.template);this.put(o)}},e.prototype.size=function(){return this._pool.length},e.prototype.clear=function(){for(var e=this._pool.length,t=0;t<e;++t)this._pool[t].destroy&&this._pool[t].destroy();this._pool.length=0},e.prototype.put=function(e){if(e&&-1===this._pool.indexOf(e)){if(e.removeFromParent(!1),this.poolHandlerComps)for(var t=0,o=this.poolHandlerComps;t<o.length;t++){var n=o[t],i=e.getComponent(n);i&&i.unuse&&i.unuse.apply(i)}else for(var r=0,a=e.getComponents(cc.Component);r<a.length;r++){(n=a[r])&&n.unuse&&n.unuse.apply(n)}this._pool.push(e)}},e.prototype.get=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var o=this._pool.length-1;o<0&&this.initPool(1),o=this._pool.length-1;var n=this._pool[o];if(this._pool.length=o,this.poolHandlerComps)for(var i=0,r=this.poolHandlerComps;i<r.length;i++){var a=r[i],c=n.getComponent(a);c&&c.reuse&&c.reuse.apply(c,arguments)}else for(var s=0,l=n.getComponents(cc.Component);s<l.length;s++){(a=l[s])&&a.reuse&&a.reuse.apply(a,arguments)}return n},e}();(function(e){e[e.INIT=0]="INIT",e[e.POKER=4]="POKER",e[e.AddScore=8]="AddScore",e[e.SubScore=16]="SubScore",e[e.SpecialFont=32]="SpecialFont",e[e.DONE=60]="DONE"})(n||(n={}));var a=function(){function e(){this.step=n.INIT,this.SpecialPool=new i.HashMap,this.PokerPool=new i.HashMap,this.addScorePool=new i.HashMap,this.subScorePool=new i.HashMap}return Object.defineProperty(e,"inst",{get:function(){return this.ins?this.ins:this.ins=new e},enumerable:!0,configurable:!0}),e.prototype.init=function(e,t,o,n,i){this.doneCallback=e,this.initPoker(52,t),this.initAddScore(10,o),this.initSubScore(10,n),this.initSpecial(10,i)},e.prototype.nextStep=function(e){this.step|=e,this.step>=n.DONE&&this.doneCallback&&this.doneCallback()},e.prototype.initSpecial=function(e,t){var o=this;t?(o.SpecialPool.add("Special",new r(t,e)),o.nextStep(n.SpecialFont)):cc.loader.loadRes("prefabs/SpecialFont",cc.Prefab,function(t,i){t?console.error(t):(o.SpecialPool.add("Special",new r(i,e)),o.nextStep(n.SpecialFont))})},e.prototype.getSpecialFont=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return this.SpecialPool.get("Special").get(e)},e.prototype.putSpecialFont=function(e){this.SpecialPool.get("Special").put(e)},e.prototype.initPoker=function(e,t){var o=this;t?(o.PokerPool.add("Poker",new r(t,e)),o.nextStep(n.POKER)):cc.loader.loadRes("prefabs/poker",cc.Prefab,function(t,i){t?console.error(t):(o.PokerPool.add("Poker",new r(i,e)),o.nextStep(n.POKER))})},e.prototype.getPoker=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return this.PokerPool.get("Poker").get(e)},e.prototype.putPoker=function(e){this.PokerPool.get("Poker").put(e)},e.prototype.initAddScore=function(e,t){var o=this;t?(o.addScorePool.add("AddScore",new r(t,e)),o.nextStep(n.AddScore)):cc.loader.loadRes("prefabs/AddScoreLabel",cc.Prefab,function(t,i){t?console.error(t):(o.addScorePool.add("AddScore",new r(i,e)),o.nextStep(n.AddScore))})},e.prototype.getAddScore=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return this.addScorePool.get("AddScore").get(e)},e.prototype.putAddScore=function(e){this.addScorePool.get("AddScore").put(e)},e.prototype.initSubScore=function(e,t){var o=this;t?(o.subScorePool.add("SubScore",new r(t,e)),o.nextStep(n.SubScore)):cc.loader.loadRes("prefabs/SubScoreLabel",cc.Prefab,function(t,i){t?console.error(t):(o.subScorePool.add("SubScore",new r(i,e)),o.nextStep(n.SubScore))})},e.prototype.getSubScore=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return this.subScorePool.get("SubScore").get(e)},e.prototype.putSubScore=function(e){this.subScorePool.get("SubScore").put(e)},e}();o.gFactory=a.inst,cc._RF.pop()},{"../utils/HashMap":"HashMap"}],GameRule:[function(e,t,o){"use strict";cc._RF.push(t,"9524d+pASxID6ZChluwPyNQ","GameRule"),Object.defineProperty(o,"__esModule",{value:!0}),o.GetGameTime=function(e){return 2==e?150:180},o.GetStreakBonusLimit=function(e){return 3},o.GetBoomLimit=function(e){return 2==e?5:3},o.disOrderArray=function(e){for(var t,o=0;o<e.length;++o){var n=Math.floor(CMath.getRandom(0,e.length));t=[e[n],e[o]],e[o]=t[0],e[n]=t[1]}},cc._RF.pop()},{}],GameScene:[function(e,t,o){"use strict";cc._RF.push(t,"e1b90/rohdEk4SdmmEZANaD","GameScene");var n=this&&this.__extends||function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var r,a=e("./controller/GameFactory"),c=e("./controller/Game"),s=e("./Poker"),l=e("./Pokers"),u=e("./controller/EventManager"),h=e("./controller/EventName"),p=e("./Stop"),d=e("./controller/AudioController"),f=e("./Guide"),g=e("./utils/LogHandler"),_=e("./Special/GameSignals"),y=e("./Special/GameRule"),m=e("./Special/SpecialLogic"),v=e("./Special/SpecialToturial"),S=e("./WildAdButton"),C=e("./TableManager"),E=cc._decorator,P=E.ccclass,b=E.property;(function(e){e[e.READY=0]="READY",e[e.PREFABS=2]="PREFABS",e[e.AUDIO=16]="AUDIO",e[e.CELER=32]="CELER",e[e.GUIDE=64]="GUIDE",e[e.JSON=128]="JSON",e[e.CELER_READY=146]="CELER_READY",e[e.GUIDE_READY=178]="GUIDE_READY",e[e.DONE=242]="DONE"})(r=o.LOAD_STEP||(o.LOAD_STEP={}));var T=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.Poker=null,t.Top=null,t.PlaceBack=null,t.TouchRoot=null,t.ValueRootNode=null,t.PokerClip=null,t.PlaceRoot=null,t.PokerDevl=null,t.RemoveNode=null,t.BackButton=null,t.Bust01=null,t.Bust02=null,t.Bust03=null,t.PauseButton=null,t.BackButtonAtlas=null,t.TimeLabel=null,t.TimeIcon=null,t.TimeIconAtlas=null,t.FontAtlas=null,t.ScoreLabel=null,t.SmallOrg=null,t.SmallWhite=null,t.SubScoreLabel=null,t.AddScoreLabel=null,t.SpecialFont=null,t.TimeAnimation=null,t.Stop=null,t.Guide=null,t.Complete=null,t.SubmitButton=null,t.CheatToggle=null,t.PokerRestLabel=null,t.SelectPokerNode=null,t.SpecialWild=null,t.SpecialBust=null,t.SpecialAtlas=null,t.SpecialScore=null,t.RemoveCardNode=null,t.RemoveBustNode=null,t.WildBtn=null,t.WildCount=null,t.CompleteAtlas=null,t.CompleteSprite=null,t.combo1=null,t.combo2=null,t.AddWildEffect=null,t.AdLayer=null,t.step=r.READY,t.canDispatchPoker=!1,t.dispatchCardCount=38,t.devTime=10,t.backTime=10,t.score=0,t.showScore=0,t.scoreStep=0,t.isStart=!1,t.isNewPlayer=!1,t.guideDone=!1,t.isEnd=!1,t.isCeler=!1,t}return n(t,e),t.prototype.init=function(){this.Stop.hide(),this.Complete.node.active=!1,this.TimeLabel.string=CMath.TimeFormat(c.Game.getGameTime()),this.ScoreLabel.string="0",this.TimeAnimation.node.active=!1,this.TimeIcon.spriteFrame=this.TimeIconAtlas.getSpriteFrame("icon_time"),c.Game.getCycledPokerRoot().clear(),c.Game.getPlacePokerRoot().clear();for(var e=0,t=this.PlaceRoot.children;e<t.length;e++){var o=t[e];o.getComponent(cc.Sprite)&&o.getComponent(cc.Sprite).enabled&&(o.getComponent(cc.Sprite).enabled=!1),c.Game.addPlacePokerRoot(parseInt(o.name),o)}},t.prototype.registerGuide=function(){var e=this;this.Guide.register([{touches:[{node:this.Top},{node:this.PlaceBack},{node:null,nodeFunc:function(){var e=c.Game.getCurSelectPoker();return e?e.node:null}},{node:this.ValueRootNode.children[0]},{node:this.TouchRoot.children[0].children[0],isAction:!0},{node:this.TouchRoot.children[0]}]},{touches:[{node:this.TouchRoot.children[0]}]},{touches:[{node:this.TouchRoot.children[0].children[0]},{node:this.ValueRootNode.children[1]},{node:this.TouchRoot.children[1]},{node:this.TouchRoot.children[1].children[0],isAction:!0}]},{touches:[{node:this.TouchRoot.children[0].children[0],isAction:!0,end:function(){e.TouchRoot.children[0].children[0].group="default"}},{node:this.TouchRoot.children[0],end:function(){e.TouchRoot.children[0].group="default"}},{node:this.ValueRootNode.children[0],end:function(){e.ValueRootNode.children[0].group="default"}}]},{touches:[{node:this.TouchRoot.children[1],end:function(){e.TouchRoot.children[1].group="default"}},{node:this.TouchRoot.children[1].children[0],isAction:!0,end:function(){e.TouchRoot.children[1].children[0].group="default"}},{node:this.ValueRootNode.children[1],end:function(){e.ValueRootNode.children[1].group="default"}}]},{touches:[{node:this.TouchRoot.children[0].children[0],isAction:!0},{node:this.TouchRoot.children[0]},{node:this.ValueRootNode.children[0]}]},{touches:[{node:this.TouchRoot.children[0].children[0],isAction:!0,end:function(){e.TouchRoot.children[0].children[0].group="default"}},{node:this.TouchRoot.children[0],end:function(){e.TouchRoot.children[0].group="default"}},{node:this.ValueRootNode.children[0],end:function(){e.ValueRootNode.children[0].group="default"}},{node:this.Top,end:function(){e.Top.group="default"}},{node:this.PlaceBack,end:function(){e.PlaceBack.group="default"}}]}])},t.prototype.onLoad=function(){var e=this;CELER_X&&g.LogHandler.inst.initLog(celerSDK.log),g.LogHandler.inst.log(" game scene onload"),c.Game.removeNode=this.RemoveNode,c.Game.pokerClip=this.PokerClip,c.Game.removeCardNode=this.RemoveCardNode,c.Game.removeBustedNode=this.RemoveBustNode,c.Game.curSelectNode=this.SelectPokerNode,this.combo1.node.active=!1,this.combo2.node.active=!1,this.CompleteSprite.node.active=!1,this.Bust01.getChildByName("Cover").active=!1,this.Bust02.getChildByName("Cover").active=!1,this.Bust03.getChildByName("Cover").active=!1,this.WildCount.string=c.Game.getWildCount().toString(),CMath.randomSeed=198;var t=this;CELER_X&&celerSDK.onStart(function(){t.celerStart()}.bind(this)),CELER_X&&celerSDK.provideScore(function(){return parseInt(c.Game.getScore().toString())});for(var o=0,n=this.SpecialBust.children;o<n.length;o++){n[o].scaleY=0}for(var i=0,p=this.SpecialWild.children;i<p.length;i++){p[i].scaleY=0}this.CheatToggle.node.active=CHEAT_OPEN,this.CheatToggle.isChecked=!1,this.CheatToggle.node.on("toggle",function(){e.CheatToggle.isChecked?window.noTime=window.CheatOpen=!0:window.noTime=window.CheatOpen=!1},this),this.init(),a.gFactory.init(function(){this.nextStep(r.PREFABS)}.bind(this),this.Poker,this.AddScoreLabel,this.SubScoreLabel,this.SpecialFont),C.TableManager.inst.startLoad("/json",function(){e.nextStep(r.JSON)}),d.gAudio.init(function(){e.nextStep(r.AUDIO)}),this.PauseButton.node.on(cc.Node.EventType.TOUCH_END,function(){c.Game.isComplete()||e.Stop.show(-1)},this),this.SubmitButton.interactable=c.Game.getWildCount()>0,this.WildCount.node.getParent().active=this.SubmitButton.interactable,this.SubmitButton.interactable?this.SubmitButton.node.getChildByName("Background").getComponent(cc.Sprite).spriteFrame=this.WildBtn.getSpriteFrame("btn_wild"):this.SubmitButton.node.getChildByName("Background").getComponent(cc.Sprite).spriteFrame=this.WildBtn.getSpriteFrame("btn_wildnone"),this.SubmitButton.node.on(cc.Node.EventType.TOUCH_END,function(){c.Game.isComplete()||c.Game.getWildCount()<=0||!c.Game.getCurSelectPoker()||(c.Game.getCurSelectPoker().setWild(),c.Game.addWildCount(-1),c.Game.clearStreak(),c.Game.clearStep())},this),u.gEventMgr.on(h.GlobalEvent.UPDATE_STREAK_COUNT,function(){e.combo1.node.active=c.Game.getStreak()>=2&&0==c.Game.getWildCount()},this),u.gEventMgr.on(h.GlobalEvent.UPDATE_WILD_COUNT,function(t){t>0&&(u.gEventMgr.emit(h.GlobalEvent.PLAY_WILD_ANI),e.AddWildEffect.play()),e.WildCount.string=c.Game.getWildCount().toString(),e.SubmitButton.interactable=c.Game.getWildCount()>0,e.WildCount.node.getParent().active=e.SubmitButton.interactable,e.SubmitButton.interactable?1==c.Game.getWildCount()?(e.combo2.node.active=!0,setTimeout(function(){c.Game.getWildCount()>0&&(e.SubmitButton.node.getChildByName("Background").getComponent(cc.Sprite).spriteFrame=e.WildBtn.getSpriteFrame("btn_wild")),e.combo2.node.active=!1},300)):(e.combo2.node.active=!1,e.SubmitButton.node.getChildByName("Background").getComponent(cc.Sprite).spriteFrame=e.WildBtn.getSpriteFrame("btn_wild")):e.SubmitButton.node.getChildByName("Background").getComponent(cc.Sprite).spriteFrame=e.WildBtn.getSpriteFrame("btn_wildnone")},this),this.PokerDevl.on(cc.Node.EventType.CHILD_ADDED,function(e){var t=e.getComponent(s.default);t&&t.setRecycle(!1)},this),u.gEventMgr.on(h.GlobalEvent.COMPLETE,function(){e.Complete.node.active=!0,e.Complete.play()},this),u.gEventMgr.on(h.GlobalEvent.UPDATE_RECYCLE_POKER,function(t){e.Bust01.getChildByName("Cover").active=t>=1,e.Bust02.getChildByName("Cover").active=t>=2,e.Bust03.getChildByName("Cover").active=t>=3},this),this.BackButton.node.getChildByName("Background").getComponent(cc.Sprite).spriteFrame=this.BackButtonAtlas.getSpriteFrame("btn_backgray"),this.BackButton.interactable=!1,this.BackButton.node.on(cc.Node.EventType.TOUCH_START,function(){c.Game.isTimeOver()||e.backTime<.5||c.Game.isComplete()||0==e.PokerClip.childrenCount&&0==e.SelectPokerNode.childrenCount||(e.backTime=0,c.Game.backStep()&&c.Game.addScore(-l.BACK_STEP_SCORE,CMath.ConvertToNodeSpaceAR(e.BackButton.node,c.Game.removeNode)))},c.Game),u.gEventMgr.on(h.GlobalEvent.UPDATE_BACK_BTN_ICON,function(){e.BackButton.interactable=c.Game.canBackStep(),e.BackButton.interactable?e.BackButton.node.getChildByName("Background").getComponent(cc.Sprite).spriteFrame=e.BackButtonAtlas.getSpriteFrame("btn_back"):e.BackButton.node.getChildByName("Background").getComponent(cc.Sprite).spriteFrame=e.BackButtonAtlas.getSpriteFrame("btn_backgray")},this),u.gEventMgr.on(h.GlobalEvent.UPDATE_SCORE,function(t,o){e.scoreStep=Math.ceil(Math.max(t/20,e.scoreStep));var n=CMath.ConvertToNodeSpaceAR(e.ScoreLabel.node,e.RemoveNode);if(t>0){var i=a.gFactory.getAddScore("/"+t.toString());i.setParent(e.RemoveNode),i.setPosition(o),e.isStart?i.group="top":i.group="top-guide",i.runAction(cc.sequence(cc.scaleTo(0,0),cc.scaleTo(.15,1.5),cc.delayTime(.3),cc.scaleTo(.1,1),cc.moveTo(.3,n.x,n.y),cc.callFunc(function(){e.showScore=c.Game.getScore(),a.gFactory.putAddScore(i)})))}else{var r=a.gFactory.getSubScore("/"+Math.abs(t).toString());e.isStart?r.group="top":r.group="top-guide",r.setParent(e.RemoveNode),r.setPosition(o),r.runAction(cc.sequence(cc.scaleTo(0,0),cc.scaleTo(.15,1.5),cc.delayTime(.3),cc.scaleTo(.1,1),cc.moveTo(.3,n.x,n.y),cc.callFunc(function(){e.showScore=c.Game.getScore(),a.gFactory.putSubScore(r)})))}},this),u.gEventMgr.on(h.GlobalEvent.UPDATE_CUR_SELECT_POKER,this.updateCurSelectPoker,this),u.gEventMgr.once(h.GlobalEvent.OPEN_RESULT,this.openResult,this),this.PokerClip.on(cc.Node.EventType.CHILD_REMOVED,this.onPokerClipRemoveChild,this),this.PokerClip.on(cc.Node.EventType.CHILD_ADDED,this.onPokerClipAddChild,this),this.SelectPokerNode.on(cc.Node.EventType.CHILD_ADDED,this.onSelectPokerAddChild,this),this.SelectPokerNode.on(cc.Node.EventType.CHILD_REMOVED,this.onSelectPokerRemoveChild,this),u.gEventMgr.on(h.GlobalEvent.CHECK_COMPLETE,function(t){0==e.PokerClip.childrenCount&&0==e.SelectPokerNode.childrenCount&&(console.log(" openResultTimeDelay:",t),c.Game.clearStep(),c.Game.getRecyclePoker()<=0&&setTimeout(function(){u.gEventMgr.emit(h.GlobalEvent.NO_BUST),c.Game.addScore(l.NO_BUST_EXTRA_SCORE,CMath.ConvertToNodeSpaceAR(e.Bust02,c.Game.removeNode))},t),u.gEventMgr.emit(h.GlobalEvent.OPEN_RESULT,t+1500))},this),u.gEventMgr.on(h.GlobalEvent.BUST,function(t){var o=e.SpecialBust.getChildByName("bust"+t),n=CMath.ConvertToNodeSpaceAR(o,e.RemoveNode),i=e.SpecialAtlas.getSpriteFrame(l.SPECIAL_TYPE_NAME[l.SPECIAL_TYPE.BUSTED]),r=a.gFactory.getSpecialFont(i,cc.v2(n.x,n.y+120),function(){o.stopAllActions(),o.scaleY=0,o.runAction(cc.sequence(cc.fadeIn(0),cc.scaleTo(.1,1,1),cc.fadeOut(.2),cc.scaleTo(0,1,0)))},!0);e.RemoveNode.addChild(r)},this),u.gEventMgr.on(h.GlobalEvent.OVER_FIVE_CARDS,function(t){var o=e.SpecialWild.getChildByName("wild"+t),n=CMath.ConvertToNodeSpaceAR(o,e.RemoveNode),i=e.SpecialAtlas.getSpriteFrame(l.SPECIAL_TYPE_NAME[l.SPECIAL_TYPE.FIVE_CARDS]),r=e.SpecialScore.getChildByName("rect"+t).getChildByName("score"),c=a.gFactory.getSpecialFont(i,cc.v2(n.x,n.y+l.ADD_SCORE_SPECILA_OFFSET_Y),function(){r.stopAllActions(),r.runAction(cc.sequence(cc.moveTo(0,0,-836),cc.moveTo(l.NORMAL_SCORE_MOVE_TIME,0,175)))});e.RemoveNode.addChild(c)},this),u.gEventMgr.on(h.GlobalEvent.COMBO,function(t){var o=e.SpecialWild.getChildByName("wild"+t),n=CMath.ConvertToNodeSpaceAR(o,e.RemoveNode),i=e.SpecialAtlas.getSpriteFrame(l.SPECIAL_TYPE_NAME[l.SPECIAL_TYPE.COMBO]),r=e.SpecialScore.getChildByName("rect"+t).getChildByName("score"),c=a.gFactory.getSpecialFont(i,cc.v2(n.x,n.y+l.ADD_SCORE_SPECILA_OFFSET_Y),function(){r.stopAllActions(),r.runAction(cc.sequence(cc.moveTo(0,0,-836),cc.moveTo(l.NORMAL_SCORE_MOVE_TIME,0,175)))});e.RemoveNode.addChild(c)},this),u.gEventMgr.on(h.GlobalEvent.SUPER_COMBO,function(t){var o=e.SpecialWild.getChildByName("wild"+t),n=CMath.ConvertToNodeSpaceAR(o,e.RemoveNode),i=e.SpecialAtlas.getSpriteFrame(l.SPECIAL_TYPE_NAME[l.SPECIAL_TYPE.SUPER_COMBO]),r=e.SpecialScore.getChildByName("rect"+t).getChildByName("score"),c=a.gFactory.getSpecialFont(i,cc.v2(n.x,n.y+l.ADD_SCORE_SPECILA_OFFSET_Y),function(){r.stopAllActions(),r.runAction(cc.sequence(cc.moveTo(0,0,-836),cc.moveTo(l.NORMAL_SCORE_MOVE_TIME,0,175)))});e.RemoveNode.addChild(c)},this),u.gEventMgr.on(h.GlobalEvent.COMPLETE_21,function(t){var o=e.SpecialWild.getChildByName("wild"+t),n=CMath.ConvertToNodeSpaceAR(o,e.RemoveNode),i=e.SpecialAtlas.getSpriteFrame(l.SPECIAL_TYPE_NAME[l.SPECIAL_TYPE.COMPLETE_21]),r=e.SpecialScore.getChildByName("rect"+t).getChildByName("score"),c=a.gFactory.getSpecialFont(i,cc.v2(n.x,n.y+l.ADD_SCORE_SPECILA_OFFSET_Y),function(){r.stopAllActions(),r.runAction(cc.sequence(cc.moveTo(0,0,-836),cc.moveTo(l.NORMAL_SCORE_MOVE_TIME,0,175)))});e.RemoveNode.addChild(c)},this),u.gEventMgr.on(h.GlobalEvent.NO_BUST,function(){var t=CMath.ConvertToNodeSpaceAR(e.Bust02,e.RemoveNode),o=e.SpecialAtlas.getSpriteFrame(l.SPECIAL_TYPE_NAME[l.SPECIAL_TYPE.NO_BUST]),n=a.gFactory.getSpecialFont(o,cc.v2(t.x,t.y-200));e.RemoveNode.addChild(n)},this),u.gEventMgr.on(h.GlobalEvent.WILD,function(t){var o=e.SpecialWild.getChildByName("wild"+t),n=CMath.ConvertToNodeSpaceAR(o,e.RemoveNode),i=e.SpecialAtlas.getSpriteFrame(l.SPECIAL_TYPE_NAME[l.SPECIAL_TYPE.WILD]),r=a.gFactory.getSpecialFont(i,cc.v2(n.x,n.y+l.ADD_SCORE_SPECILA_OFFSET_Y),function(){o.stopAllActions(),o.scaleY=0,o.runAction(cc.sequence(cc.fadeIn(0),cc.scaleTo(.1,1,1),cc.fadeOut(.2),cc.scaleTo(0,1,0)))});e.RemoveNode.addChild(r)},this),u.gEventMgr.on(h.GlobalEvent.S_777,function(t){var o=e.SpecialWild.getChildByName("wild"+t),n=CMath.ConvertToNodeSpaceAR(o,e.RemoveNode),i=e.SpecialAtlas.getSpriteFrame(l.SPECIAL_TYPE_NAME[l.SPECIAL_TYPE.S_777]),r=a.gFactory.getSpecialFont(i,cc.v2(n.x,n.y+l.ADD_SCORE_SPECILA_OFFSET_Y),function(){o.stopAllActions(),o.scaleY=0,o.runAction(cc.sequence(cc.fadeIn(0),cc.scaleTo(.1,1,1),cc.fadeOut(.2),cc.scaleTo(0,1,0)))});e.RemoveNode.addChild(r)},this),cc.loader.loadRes("prefabs/Result"),cc.loader.loadResDir("sounds")},t.prototype.onPokerClipRemoveChild=function(){this.PokerRestLabel.string=this.PokerClip.childrenCount.toString(),this.PokerClip.childrenCount<=52&&2==c.Game.MatchInfo.difficultyLevel&&this.addPokerToPokerClip(),this.updateChildOffset()},t.prototype.onPokerClipAddChild=function(){this.PokerRestLabel.string=this.PokerClip.childrenCount.toString(),this.updateChildOffset()},t.prototype.updateChildOffset=function(){if(2==c.Game.MatchInfo.difficultyLevel)for(var e=1;e++<=52;){var t=this.PokerClip.children[this.PokerClip.childrenCount-e];t&&(t.position=cc.v2(1*(this.PokerClip.childrenCount-e+1),0))}},t.prototype.onSelectPokerAddChild=function(e){if(this.SelectPokerNode.childrenCount>1){var t=this.SelectPokerNode.children[0],o=cc.v2(0,0);if(this.PokerClip.childrenCount>0){var n=this.PokerClip.children[this.PokerClip.childrenCount-1];o=cc.v2(n.x+2,n.y)}var i=CMath.ConvertToNodeSpaceAR(t,this.PokerClip);t.setParent(this.PokerClip),t.setPosition(i),t.getComponent(s.default).flipCard(.1);var r=cc.moveTo(.1,o);r.setTag(l.ACTION_TAG.SelectPoker),t.stopActionByTag(l.ACTION_TAG.SELECT_POKER),t.runAction(r)}var a=e.getComponent(s.default);a&&a.isWildCard()&&setTimeout(function(){c.Game.clearStep()},0)},t.prototype.onSelectPokerRemoveChild=function(e){this.SelectPokerNode.childrenCount<=0&&this.updateCurSelectPoker()},t.prototype.updateCurSelectPoker=function(){var e=this;if(!(this.PokerClip.childrenCount<=0)){var t=this.PokerClip.children[this.PokerClip.childrenCount-1],o=t.getComponent(s.default),n=CMath.ConvertToNodeSpaceAR(t,this.SelectPokerNode);t.setParent(this.SelectPokerNode),t.setPosition(n),o.isGuide&&c.Game.isGameStarted()?t.group="top-guide":t.group="top",o.flipCard(.1),u.gEventMgr.emit(h.GlobalEvent.DEV_POKERS);var i=cc.sequence(cc.moveTo(.3,0,0),cc.callFunc(function(){o.setDefaultPosition(),o.isGuide||(t.group="default"),c.Game.canBack=!0,0==e.Guide.node.active&&S.WildButtonReadySignal.inst.dispatch()},this));i.setTag(l.ACTION_TAG.SELECT_POKER),t.stopAllActions(),c.Game.canBack=!1,t.runAction(i)}},t.prototype.openResult=function(e){var t=this;if(this.isEnd=!0,c.Game.clearStep(),c.Game.addStep=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},this.Stop.hide(!1),!this.node.getChildByName("Result")){if(!this.isStart)return this.Guide.hide(),void this.nextStep(r.GUIDE);c.Game.getGameTime()>0?c.Game.isBoom()?this.CompleteSprite.spriteFrame=this.CompleteAtlas.getSpriteFrame("bg_font3"):this.CompleteSprite.spriteFrame=this.CompleteAtlas.getSpriteFrame("bg_font1"):c.Game.isBoom()?this.CompleteSprite.spriteFrame=this.CompleteAtlas.getSpriteFrame("bg_font3"):this.CompleteSprite.spriteFrame=this.CompleteAtlas.getSpriteFrame("bg_font2"),this.CompleteSprite.node.scaleX=0,this.CompleteSprite.node.active=!0,console.log(" start load result layer...:",c.Game.isComplete()),c.Game.calTimeBonus(),cc.loader.loadRes("prefabs/Result",cc.Prefab,function(o,n){o?(console.error(" submit score by load result error"),CELER_X&&celerSDK.submitScore(c.Game.getScore())):t.CompleteSprite.node.runAction(cc.sequence(cc.scaleTo(.2,1.2,1),cc.scaleTo(.1,.9,1),cc.scaleTo(.1,1.1,1),cc.scaleTo(.1,1,1),cc.delayTime(.5+e/1e3),cc.callFunc(function(){t.CompleteSprite.node.active=!1;var e=cc.instantiate(n);e.name="Result",t.node.addChild(e)})))})}},t.prototype.celerStart=function(){var e=CELER_X?celerSDK.getMatch():null;c.Game.MatchInfo=e||{matchId:"null",difficultyLevel:1,sharedRandomSeed:.11445540934801102,shouldLaunchTutorial:!0,locale:"en_US"},e&&e.sharedRandomSeed?(CMath.randomSeed=e.sharedRandomSeed,CMath.sharedSeed=e.sharedRandomSeed):(CMath.randomSeed=Math.random(),CMath.sharedSeed=CMath.randomSeed),c.Game.MatchInfo.locale=c.Game.MatchInfo.locale||"en_US",this.defineLan(),CELER_X&&1!=celerSDK.hasMethod("showAd")&&S.HideWildAdButtonSignal.inst.dispatch(),_.DifficultyLevelInitSignal.inst.dispatchOne(c.Game.MatchInfo.difficultyLevel),c.Game.setGameTime(y.GetGameTime(c.Game.MatchInfo.difficultyLevel)),g.LogHandler.inst.log(" CELER_X && celerSDK.onStart invoked "," match:",c.Game.MatchInfo),c.Game.MatchInfo&&c.Game.MatchInfo.shouldLaunchTutorial?(this.isNewPlayer=!0,c.Game.MatchInfo.difficultyLevel=1,S.HideWildAdButtonSignal.inst.dispatch()):(this.isNewPlayer=!1,this.Guide.hide(),this.nextStep(r.GUIDE)),this.nextStep(r.CELER)},t.prototype.defineLan=function(){lan.set(c.Game.MatchInfo.locale);var e={},t=null;t=C.TableManager.inst.getAll_En_Data();var o=c.Game.MatchInfo.locale.split("_")[0].charAt(0).toUpperCase()+c.Game.MatchInfo.locale.split("_")[0].substring(1);if(C.TableManager.inst["getAll_"+o+"_Data"]&&C.TableManager.inst["getAll_"+o+"_Data"]()&&(t=C.TableManager.inst["getAll_"+o+"_Data"]()),t){for(var n in t){var i=t[n];e[i.View]||(e[i.View]={}),e[i.View][i.ID]=i.Text}lan.define(c.Game.MatchInfo.locale,e)}},t.prototype.nextStep=function(e){this.step|=e,console.log("loadStep Step:"+r[e]),this.step>=r.DONE&&!this.isStart?(console.log("  startGame ---------------------- "),this.isStart=!0,this.startGame()):this.step>=r.CELER_READY&&!this.isCeler?(g.LogHandler.inst.log(" invoke  CELER_X && celerSDK.ready"),CELER_X&&celerSDK.ready(),this.isCeler=!0,!CELER_X&&this.celerStart()):this.step>=r.GUIDE_READY&&this.isNewPlayer&&!this.guideDone&&(this.guideDone=!0,this.startGuide())},t.prototype.prepareGame=function(){console.log(" prepare game");for(var e=0,t=c.Game.allPokers;e<t.length;e++){var o=t[e];o.stopAllActions(),o.rotation=0,a.gFactory.putPoker(o)}c.Game.allPokers.length=0,this.showScore=0,this.TimeAnimation.node.active=!1,this.TimeLabel.font=this.SmallWhite,this.TimeIcon.spriteFrame=this.TimeIconAtlas.getSpriteFrame("icon_time");var n=c.Game.getGameTime();this.TimeLabel.string=CMath.TimeFormat(n),c.Game.getCycledPokerRoot().clear(),c.Game.getPlacePokerRoot().clear();for(var i=0,r=this.PlaceRoot.children;i<r.length;i++){var s=r[i];s.getComponent(cc.Sprite)&&s.getComponent(cc.Sprite).enabled&&(s.getComponent(cc.Sprite).enabled=!1),c.Game.addPlacePokerRoot(parseInt(s.name),s)}},t.prototype.startGuide=function(){var e=this;console.log(" start guide");var t=l.GuidePokers.concat();for(c.Game.allPokers.length=0;t.length>0;){var o=t.length-1,n=a.gFactory.getPoker([t.pop(),!0]);n.name=o.toString(),n.x=0,n.y=0,this.PokerDevl.addChild(n),c.Game.allPokers.push(n)}this.Guide.showBlock(),this.startDevPoker(function(){e.registerGuide(),e.Guide.startGuide(function(){e.nextStep(r.GUIDE)})},0)},t.prototype.startDevPoker=function(e,t){var o=this;void 0===t&&(t=.05),console.log(" start dev poker");var n=1,i=this.PokerDevl.childrenCount,r=function(){var a=o.PokerDevl.getChildByName((i-n++).toString());if(!a)return o.canDispatchPoker=!0,o.updateCurSelectPoker(),void e();var c=cc.v2(2*o.PokerClip.childrenCount,0),l=CMath.ConvertToNodeSpaceAR(a,o.PokerClip),p=a.getComponent(s.default);p.setLastPosition(c),a.setParent(o.PokerClip),a.zIndex=o.PokerClip.childrenCount,t>0?(a.setPosition(l),a.group="top",u.gEventMgr.emit(h.GlobalEvent.DEV_POKERS),a.runAction(cc.sequence(cc.moveTo(t,c.x,c.y),cc.callFunc(function(){a.group="default",p.setLastPosition(),r()},o)))):(a.setPosition(c),r())};r()},t.prototype.startGameByLevel2=function(){var e=this;v.ShowSpecialToturialSignal.inst.dispatchOne(function(){e.addPokerToPokerClip(),setTimeout(function(){e.canDispatchPoker=!0,e.updateCurSelectPoker()},200)})},t.prototype.addPokerToPokerClip=function(){for(var e=m.SpecialLogic.inst.getRandomPoker();e.length>0;){var t=e.length-1,o=e.splice(t,1),n=a.gFactory.getPoker(o);n.name=t.toString(),n.x=0,n.y=0,this.PokerClip.addChild(n)}},t.prototype.startGame=function(){var e=this;if(console.log(" startGame"),CELER_X?(celerSDK.onPause(function(){e.isEnd||e.AdLayer.active||(console.log(" game on background"),e.Stop.show(0,!1))}),celerSDK.onResume(function(){e.isEnd||(console.log(" game on forground"),u.gEventMgr.emit(h.GlobalEvent.ON_SHOW))})):(cc.game.on(cc.game.EVENT_HIDE,function(){e.isEnd||e.AdLayer.active||(console.log(" game on background"),e.Stop.show(0,!1))},this),cc.game.on(cc.game.EVENT_SHOW,function(){e.isEnd||(console.log(" game on forground"),u.gEventMgr.emit(h.GlobalEvent.ON_SHOW))},this)),c.Game.initData(),this.prepareGame(),2==c.Game.MatchInfo.difficultyLevel)this.startGameByLevel2();else{var t=l.Pokers.concat([]).reverse();for(console.log(t),console.log(t.length);t.length>0;){var o=t.length-1,n=t.length,i=CMath.getRandom(0,1),r=Math.floor(i*n),s=t.splice(r,1),p=a.gFactory.getPoker(s);p.name=o.toString(),p.x=0,p.y=0,this.PokerDevl.addChild(p)}this.startDevPoker(function(){})}},t.prototype.recyclePoker=function(){},t.prototype.devPoker=function(){},t.prototype.update=function(e){if(this.devTime+=e,this.backTime+=e,c.Game.isGameStarted()&&0==this.Stop.node.active&&0==this.AdLayer.active&&!this.isEnd){c.Game.addGameTime(-e);var t=c.Game.getGameTime();this.TimeLabel.string=CMath.TimeFormat(t),t<=60&&(this.TimeLabel.font=this.SmallOrg,this.TimeAnimation.node.active||(u.gEventMgr.emit(h.GlobalEvent.PLAY_SHAKE),this.TimeAnimation.node.active=!0,this.TimeAnimation.play(),this.TimeIcon.spriteFrame=this.TimeIconAtlas.getSpriteFrame("icon_timeorg")))}this.score<this.showScore?(this.score+=this.scoreStep,this.score=Math.min(this.score,this.showScore),this.ScoreLabel.string=this.score.toString()):this.score>this.showScore&&(this.score-=this.scoreStep,this.score=Math.max(this.score,this.showScore),this.ScoreLabel.string=this.score.toString())},i([b(cc.Prefab)],t.prototype,"Poker",void 0),i([b(cc.Node)],t.prototype,"Top",void 0),i([b(cc.Node)],t.prototype,"PlaceBack",void 0),i([b(cc.Node)],t.prototype,"TouchRoot",void 0),i([b(cc.Node)],t.prototype,"ValueRootNode",void 0),i([b(cc.Node)],t.prototype,"PokerClip",void 0),i([b(cc.Node)],t.prototype,"PlaceRoot",void 0),i([b(cc.Node)],t.prototype,"PokerDevl",void 0),i([b(cc.Node)],t.prototype,"RemoveNode",void 0),i([b(cc.Button)],t.prototype,"BackButton",void 0),i([b(cc.Node)],t.prototype,"Bust01",void 0),i([b(cc.Node)],t.prototype,"Bust02",void 0),i([b(cc.Node)],t.prototype,"Bust03",void 0),i([b(cc.Button)],t.prototype,"PauseButton",void 0),i([b(cc.SpriteAtlas)],t.prototype,"BackButtonAtlas",void 0),i([b(cc.Label)],t.prototype,"TimeLabel",void 0),i([b(cc.Sprite)],t.prototype,"TimeIcon",void 0),i([b(cc.SpriteAtlas)],t.prototype,"TimeIconAtlas",void 0),i([b(cc.SpriteAtlas)],t.prototype,"FontAtlas",void 0),i([b(cc.Label)],t.prototype,"ScoreLabel",void 0),i([b(cc.Font)],t.prototype,"SmallOrg",void 0),i([b(cc.Font)],t.prototype,"SmallWhite",void 0),i([b(cc.Prefab)],t.prototype,"SubScoreLabel",void 0),i([b(cc.Prefab)],t.prototype,"AddScoreLabel",void 0),i([b(cc.Prefab)],t.prototype,"SpecialFont",void 0),i([b(cc.Animation)],t.prototype,"TimeAnimation",void 0),i([b(p.default)],t.prototype,"Stop",void 0),i([b(f.default)],t.prototype,"Guide",void 0),i([b(cc.Animation)],t.prototype,"Complete",void 0),i([b(cc.Button)],t.prototype,"SubmitButton",void 0),i([b(cc.Toggle)],t.prototype,"CheatToggle",void 0),i([b(cc.Label)],t.prototype,"PokerRestLabel",void 0),i([b(cc.Node)],t.prototype,"SelectPokerNode",void 0),i([b(cc.Node)],t.prototype,"SpecialWild",void 0),i([b(cc.Node)],t.prototype,"SpecialBust",void 0),i([b(cc.SpriteAtlas)],t.prototype,"SpecialAtlas",void 0),i([b(cc.Node)],t.prototype,"SpecialScore",void 0),i([b(cc.Node)],t.prototype,"RemoveCardNode",void 0),i([b(cc.Node)],t.prototype,"RemoveBustNode",void 0),i([b(cc.SpriteAtlas)],t.prototype,"WildBtn",void 0),i([b(cc.Label)],t.prototype,"WildCount",void 0),i([b(cc.SpriteAtlas)],t.prototype,"CompleteAtlas",void 0),i([b(cc.Sprite)],t.prototype,"CompleteSprite",void 0),i([b(cc.Sprite)],t.prototype,"combo1",void 0),i([b(cc.Sprite)],t.prototype,"combo2",void 0),i([b(cc.Animation)],t.prototype,"AddWildEffect",void 0),i([b(cc.Node)],t.prototype,"AdLayer",void 0),t=i([P],t)}(cc.Component);o.default=T,cc._RF.pop()},{"./Guide":"Guide","./Poker":"Poker","./Pokers":"Pokers","./Special/GameRule":"GameRule","./Special/GameSignals":"GameSignals","./Special/SpecialLogic":"SpecialLogic","./Special/SpecialToturial":"SpecialToturial","./Stop":"Stop","./TableManager":"TableManager","./WildAdButton":"WildAdButton","./controller/AudioController":"AudioController","./controller/EventManager":"EventManager","./controller/EventName":"EventName","./controller/Game":"Game","./controller/GameFactory":"GameFactory","./utils/LogHandler":"LogHandler"}],GameSignals:[function(e,t,o){"use strict";cc._RF.push(t,"b9308vWHZxNirpv3tQWMew0","GameSignals");var n=this&&this.__extends||function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();Object.defineProperty(o,"__esModule",{value:!0});var i=e("../utils/Signal"),r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t}(i.BaseSignal);o.DifficultyLevelInitSignal=r;var a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t}(i.BaseSignal);o.GameTimeInitSignal=a;var c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t}(i.BaseSignal);o.BustCountUpdateSignal=c;var s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t}(i.BaseSignal);o.PokerFlyDoneSignal=s,cc._RF.pop()},{"../utils/Signal":"Signal"}],Game:[function(e,t,o){"use strict";cc._RF.push(t,"40425qmjHtE2rUaEpFgHzOS","Game"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../utils/HashMap"),i=e("../Poker"),r=e("../Pokers"),a=e("./EventManager"),c=e("./EventName"),s=e("../Special/GameSignals"),l=e("../Special/GameRule"),u=function(){function e(){this.placePokerRoot=new n.HashMap,this.cyclePokerRoot=new n.HashMap,this.posOffsetCal=new n.HashMap,this.stepInfoArray=[],this.score=0,this.timeBonus=0,this.freeDrawTimes=3,this.flipCounts=0,this.pokerClip=null,this.curSelectNode=null,this.wildCount=1,this.gameStart=!1,this.gameTime=180,this.removePokerCount=0,this.recycleCount=0,this.pokerFlipRoot=null,this.combo=-1,this.totalStreak=0,this.streakCount=0,this.clearStack=0,this.cardUsed=0,this.busted=0,this.recyclePoker=0,this.guideEnd=!0,this.allPokers=[],this.removeCardDeleteCount=0,this.bustCardDeleteCount=0,this.pauseCount=0,this.canBack=!0}return e.prototype.GameMgr=function(){},Object.defineProperty(e,"inst",{get:function(){return this._inst?this._inst:this._inst=new e},enumerable:!0,configurable:!0}),e.prototype.initData=function(){this.gameTime=l.GetGameTime(this.MatchInfo.difficultyLevel),this.gameStart=!1,this.wildCount=1,this.removePokerCount=0,this.recycleCount=0,this.combo=-1,this.totalStreak=0,this.streakCount=0,this.clearStack=0,this.cardUsed=0,this.busted=0,this.recyclePoker=0,this.stepInfoArray.length=0,this.timeBonus=0,this.flipCounts=0,this.score=0,this.freeDrawTimes=3},e.prototype.setGameTime=function(e){this.gameTime=e,s.GameTimeInitSignal.inst.dispatchOne(this.gameTime)},e.prototype.addRecyclePoker=function(e){this.recyclePoker+=e,this.recyclePoker=Math.max(0,this.recyclePoker),s.BustCountUpdateSignal.inst.dispatchOne(this.recyclePoker),console.log(" recycle bust :",this.recyclePoker),this.recyclePoker>=l.GetBoomLimit(this.MatchInfo.difficultyLevel)&&!window.CheatOpen&&(console.log(" bust to over !!!"),a.gEventMgr.emit(c.GlobalEvent.OPEN_RESULT,1e3)),a.gEventMgr.emit(c.GlobalEvent.UPDATE_RECYCLE_POKER,this.recyclePoker)},e.prototype.getRecyclePoker=function(){return this.recyclePoker},e.prototype.getCurSelectPoker=function(){return this.curSelectNode.children[0]?this.curSelectNode.children[0].getComponent(i.default):null},e.prototype.addPosOffset=function(e,t){var o=this.posOffsetCal.get(e);if(o){Math.max(0,o+t);this.posOffsetCal.add(e,o+t)}else this.posOffsetCal.add(e,t);for(var n=0;n<8;n++);},e.prototype.getPosOffset=function(e){var t=this.posOffsetCal.get(e);return null==t?0:t},e.prototype.addWildCount=function(e){this.wildCount+=e,this.wildCount=Math.max(0,this.wildCount),a.gEventMgr.emit(c.GlobalEvent.UPDATE_WILD_COUNT,e)},e.prototype.getWildCount=function(){return this.wildCount},e.prototype.getCombo=function(){return this.combo},e.prototype.resetCombo=function(){this.combo=-1},e.prototype.addCombo=function(e){this.combo+=e,this.combo=Math.max(0,this.combo%13),console.log(" combo:",this.combo)},e.prototype.addCardUsed=function(e){this.cardUsed+=e},e.prototype.getCardUsed=function(){return this.cardUsed},e.prototype.addBusted=function(e){this.busted+=e},e.prototype.getBusted=function(){return this.busted},e.prototype.addClearStack=function(e){this.clearStack+=e},e.prototype.getClearStack=function(){return this.clearStack},e.prototype.addStreak=function(e){this.streakCount+=e,this.totalStreak+=e,this.streakCount>=l.GetStreakBonusLimit(this.MatchInfo.difficultyLevel)&&o.Game.addWildCount(1),this.streakCount=Math.min(this.streakCount,l.GetStreakBonusLimit(this.MatchInfo.difficultyLevel)),a.gEventMgr.emit(c.GlobalEvent.UPDATE_STREAK_COUNT),console.log(" add streak !!!!!!!!!!!!!!!!!! ,",this.streakCount)},e.prototype.getTotalStreak=function(){return Math.max(0,this.totalStreak-1)},e.prototype.getStreak=function(){return this.streakCount},e.prototype.clearStreak=function(){this.streakCount=0,a.gEventMgr.emit(c.GlobalEvent.UPDATE_STREAK_COUNT),console.log(" clearStreak streak !!!!!!!!!!!!!!!!!! ,",this.streakCount)},e.prototype.getGameTime=function(){return this.gameTime},e.prototype.addRecycleCount=function(e){this.recycleCount+=e,console.log(" ---------------------recycle count :",this.recycleCount),(this.recycleCount>78||this.recycleCount<0)&&(console.error(" recycle count error! ",this.recycleCount),this.recycleCount=CMath.Clamp(this.recycleCount,78,0))},e.prototype.addGameTime=function(e){window.noTime||o.Game.isComplete()||(this.gameTime+=e,this.gameTime=Math.max(this.gameTime,0),this.gameTime<=0&&(this.gameStart=!1,a.gEventMgr.emit(c.GlobalEvent.OPEN_RESULT,0)))},e.prototype.calTimeBonus=function(){this.removePokerCount=this.removeCardNode.childrenCount+this.removeCardDeleteCount,this.gameTime>=300||this.gameTime<=0||this.removePokerCount<=0||this.timeBonus>0||(this.timeBonus=(this.removePokerCount/r.TOTAL_POKER_COUNT*2.4+.3)*this.gameTime,this.timeBonus=Math.floor(this.timeBonus),console.log("this.flipCounts: ",this.flipCounts,", this.gameTime:",this.gameTime,",this.timbonus:",this.timeBonus),o.Game.addScore(this.timeBonus))},e.prototype.getTimeBonus=function(){return this.timeBonus},e.prototype.isTimeOver=function(){return this.gameTime<=0},e.prototype.start=function(){this.gameStart=!0,a.gEventMgr.emit(c.GlobalEvent.PLAY_START)},e.prototype.isComplete=function(){return this.flipCounts>=r.TOTAL_POKER_COUNT},e.prototype.isBoom=function(){return this.recyclePoker>=l.GetBoomLimit(this.MatchInfo.difficultyLevel)&&!window.CheatOpen},e.prototype.checkIsRecycleComplete=function(){var e=78==this.recycleCount;return e&&(console.log(" isComplete isComplete "),a.gEventMgr.emit(c.GlobalEvent.AUTO_COMPLETE_DONE)),e},e.prototype.restart=function(){this.gameTime=300,this.score=0,this.flipCounts=0,this.stepInfoArray=[],this.timeBonus=0,this.cyclePokerRoot.clear(),this.placePokerRoot.clear(),this.gameStart=!1,this.removePokerCount=0},e.prototype.setPause=function(e){this.gameStart=!e},e.prototype.isGameStarted=function(){return this.gameStart},e.prototype.addScore=function(e,t){void 0===t&&(t=cc.v2(-200,700)),0!=e&&(e=Math.floor(e),this.score+=e,this.score=Math.max(this.score,0),console.log("----------- game addScore-------- score:",this.score,e),a.gEventMgr.emit(c.GlobalEvent.UPDATE_SCORE,e,t))},e.prototype.getScore=function(){return this.score},e.prototype.addFreeDrawTimes=function(e){this.freeDrawTimes+=e,this.freeDrawTimes=Math.max(this.freeDrawTimes,0),a.gEventMgr.emit(c.GlobalEvent.UPDATE_DRAW_ICON)},e.prototype.getFreeDrawTimes=function(){return this.freeDrawTimes},e.prototype.addFlipCounts=function(e){this.isGameStarted()&&(this.flipCounts+=e,this.flipCounts=Math.max(this.flipCounts,0),this.isComplete()&&console.log("-------------emit Complete!!!----------------------flipCounts:",this.flipCounts))},e.prototype.getFlipCounts=function(){return this.flipCounts},e.prototype.addStep=function(e,t,o,n,i,r,s){this.stepInfoArray.length=0,this.stepInfoArray.push({node:e,lastParent:t,lastPos:o,func:n,datas:i,scoresPos:r,zIndex:s}),a.gEventMgr.emit(c.GlobalEvent.UPDATE_BACK_BTN_ICON)},e.prototype.getTopStep=function(){return this.stepInfoArray.length<=0?null:this.stepInfoArray[this.stepInfoArray.length-1]},e.prototype.getPlacePokerRoot=function(){return this.placePokerRoot},e.prototype.getCycledPokerRoot=function(){return this.cyclePokerRoot},e.prototype.addPlacePokerRoot=function(e,t){this.isComplete()||(this.placePokerRoot.add(e,t),this.placePokerRoot.length>8&&console.error(" place Poker Root over size!!!!!:",this.placePokerRoot.length))},e.prototype.addCycledPokerRoot=function(e,t){this.cyclePokerRoot.add(e,t),this.cyclePokerRoot.length>4&&console.error(" cycled Poker root over size!!!!!:",this.cyclePokerRoot.length)},e.prototype.clearStep=function(){this.stepInfoArray.length=0,a.gEventMgr.emit(c.GlobalEvent.UPDATE_BACK_BTN_ICON)},Object.defineProperty(e.prototype,"PauseCount",{get:function(){return this.pauseCount},set:function(e){this.pauseCount=e,this.pauseCount>2&&o.Game.addScore(-1e3)},enumerable:!0,configurable:!0}),e.prototype.backStep=function(){if(this.stepInfoArray.length<=0)return console.warn(" no cache step!"),!1;if(this.canBack)if(this.curSelectNode.childrenCount<0)console.warn(" back : curselectnode is null");else{for(var e=!1,t=0,n=this.stepInfoArray[this.stepInfoArray.length-1].node;t<n.length;t++){var s=n[t];if(s.getActionByTag(r.ACTION_TAG.POS)||s.getActionByTag(r.ACTION_TAG.SELECT_POKER)||s.getActionByTag(r.ACTION_TAG.BACK_STEP)||s.getActionByTag(r.ACTION_TAG.SelectPoker)||s.getActionByTag(r.ACTION_TAG.FLIP_CARD_REPOS_ON_ADD)||s.getActionByTag(r.ACTION_TAG.FLIP_CARD_REPOS_ON_REMOVE)){e=!0;break}}if(!e){o.Game.clearStreak(),o.Game.resetCombo();var l=this.stepInfoArray.pop();a.gEventMgr.emit(c.GlobalEvent.UPDATE_BACK_BTN_ICON);for(var u=0,h=function(){u++;var e=l.node.pop(),t=l.lastParent.pop(),n=(l.lastPos.pop(),l.func?l.func.pop():null),s=l.datas&&l.datas.length>0?l.datas.pop():null,h=s?s.score:0;s&&(o.Game.addBusted(s.busted),o.Game.addCardUsed(s.cardused),o.Game.addClearStack(s.stack),o.Game.totalStreak+=s.streak);var d=l.scoresPos&&l.scoresPos.length>0?l.scoresPos.pop():null;d?o.Game.addScore(h,d):o.Game.addScore(h);var f=CMath.ConvertToNodeSpaceAR(e,t);e.setPosition(f),n&&n.callback&&n.target&&n.callback.apply(n.target,n.args),e.group="top";var g=e.getComponent(i.default);if(g){var _=void 0;"PokerClip"==t.name?_=g.getLastPosition():(_="PokerFlipRoot"==t.name?g.getFlipPos():g.getDefaultPosition(),t.getComponent(i.default)?t.getComponent(i.default).isCycled()?(_.x=0,_.y=0):n&&n.callback&&n.callback==t.getComponent(i.default).flipCard?_.y=r.OFFSET_Y/3:_.y=r.OFFSET_Y:"place_aback"==t.name&&(_.x=0,_.y=0)),g.setDefaultPosition(cc.v2(_.x,_.y)),g.setPosState(i.POS_STATE.NORMAL,!1),e.setParent(t);var y=cc.sequence(cc.delayTime(u/500),cc.callFunc(function(){a.gEventMgr.emit(c.GlobalEvent.DEV_POKERS),g.node.stopActionByTag(r.ACTION_TAG.SHAKE)},p),cc.moveTo(.1,_.x,_.y),cc.callFunc(function(){e.group="default",g.setDefaultPosition(),t.getComponent(i.default)&&g.checkPos()},p));y.setTag(r.ACTION_TAG.BACK_STEP),g.node.stopAllActions(),0!=g.node.rotation&&g.node.runAction(cc.rotateTo(.1,0)),g.node.runAction(y)}},p=this;l.node.length>0;)h();return u>0}console.warn(" click back step ! but has running action!!")}},e.prototype.canBackStep=function(){return this.stepInfoArray.length>0},e}();o.Game=u.inst,cc._RF.pop()},{"../Poker":"Poker","../Pokers":"Pokers","../Special/GameRule":"GameRule","../Special/GameSignals":"GameSignals","../utils/HashMap":"HashMap","./EventManager":"EventManager","./EventName":"EventName"}],GlobalSingleTouchMediator:[function(e,t,o){"use strict";cc._RF.push(t,"956af5T+DtMCLRMSozsNuYj","GlobalSingleTouchMediator");var n=this&&this.__extends||function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../SingleTouchMediator"),a=cc._decorator,c=a.ccclass,s=(a.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.onRegister=function(){e.prototype.onRegister.call(this),this.node._touchListener.swallowTouches=!1},t.prototype.onTouchStart=function(e){},t.prototype.onTouchMove=function(e){},t.prototype.onTouchEnd=function(e){},t.prototype.onTouchCancel=function(e){},t=i([c],t)}(r.default));o.default=s,cc._RF.pop()},{"../SingleTouchMediator":"SingleTouchMediator"}],GlobalSingleTouchView:[function(e,t,o){"use strict";cc._RF.push(t,"097acjQvzdGvYSlbpM0AqyY","GlobalSingleTouchView");var n=this&&this.__extends||function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../BaseView"),a=e("./GlobalSingleTouchMediator"),c=cc._decorator,s=c.ccclass,l=(c.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.onLoad=function(){this.BindMedaitor(a.default)},t.prototype.start=function(){},t=i([s],t)}(r.default));o.default=l,cc._RF.pop()},{"../BaseView":"BaseView","./GlobalSingleTouchMediator":"GlobalSingleTouchMediator"}],Guide:[function(e,t,o){"use strict";cc._RF.push(t,"b35055BqMpN/5j/PIM39A+p","Guide");var n=this&&this.__extends||function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var r=e("./controller/EventManager"),a=e("./controller/EventName"),c=e("./Poker"),s=e("./controller/Game"),l=e("./table"),u=cc._decorator,h=u.ccclass,p=u.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.GuideAtlas=null,t.GuideHand=null,t.GuideEnd=null,t.emptyPanel=null,t.Corn=null,t.ButtonAtlas=null,t.Next=null,t.OK=null,t.Forward=null,t.GuideView=null,t.Skip=null,t.Block=null,t.GuideBlock=null,t.callback=null,t.guideSteps=[],t.isGuide=!1,t.index=1,t.guideDefaultY=0,t}return n(t,e),Object.defineProperty(t.prototype,"GuideContent",{get:function(){return this.Corn.node.getChildByName("GuideContent").getComponent(cc.RichText)},enumerable:!0,configurable:!0}),t.prototype.onLoad=function(){var e=this;this.Corn.node.position=cc.v2(252,-48),this.guideDefaultY=this.Corn.node.y,this.GuideHand.node.active=!1,this.Next.node.on(cc.Node.EventType.TOUCH_END,this.nextPage,this),this.Forward.node.on(cc.Node.EventType.TOUCH_END,this.forwardPage,this),this.Skip.node.on(cc.Node.EventType.TOUCH_END,function(){e.hide()},this),this.OK.node.on(cc.Node.EventType.TOUCH_END,function(){e.nextGuide(),e.OK.node.active=!1},this),r.gEventMgr.on(a.GlobalEvent.POP_GUIDE_STEP,function(){e.guideSteps.length<=0||!e.node.active||(e.popStep(),e.nextGuide())},this),this.Block.on(cc.Node.EventType.TOUCH_START,this.onBlockTouch,this),this.Block.on(cc.Node.EventType.TOUCH_CANCEL,this.onBlockTouchCancel,this),this.Block.on(cc.Node.EventType.TOUCH_END,this.onBlockTouchEnd,this),this.Block.on(cc.Node.EventType.TOUCH_MOVE,this.onBlockTouchMove,this)},t.prototype.onBlockTouch=function(e){if(!(this.guideSteps.length<=0||this.OK.node.active))for(var t=0,o=this.guideSteps[0].touches;t<o.length;t++){var n=o[t],i=null;if(null==n.node){if(!n.nodeFunc)continue;n.node=n.nodeFunc()}if(n.node&&n.node.getComponent(c.default)&&n.node.getComponent(c.default).getNext()&&(i=n.node.getComponent(c.default).getNext().node),CMath.GetBoxToWorld(n.node,i).contains(e.getLocation())){var r=new cc.Event.EventCustom(e.getType(),!1);r.setUserData(n.callback),n.node.dispatchEvent(r),n.touchStarted=!0}}},t.prototype.onBlockTouchCancel=function(e){if(!(this.guideSteps.length<=0||this.OK.node.active))for(var t=0,o=this.guideSteps[0].touches;t<o.length;t++){var n=o[t],i=null;if(n.node&&n.node.getComponent(c.default)&&n.node.getComponent(c.default).getNext()&&(i=n.node.getComponent(c.default).getNext().node),CMath.GetBoxToWorld(n.node,i).contains(e.getLocation())&&n.touchStarted){var r=new cc.Event.EventCustom(e.getType(),!1);r.setUserData(n.callback),n.node.dispatchEvent(r),n.touchStarted=!1}}},t.prototype.onBlockTouchEnd=function(e){if(!(this.guideSteps.length<=0||this.OK.node.active))for(var t=0,o=this.guideSteps[0].touches;t<o.length;t++){var n=o[t],i=null;if(n.node&&n.node.getComponent(c.default)&&n.node.getComponent(c.default).getNext()&&(i=n.node.getComponent(c.default).getNext().node),CMath.GetBoxToWorld(n.node,i).contains(e.getLocation())&&n.touchStarted){var r=new cc.Event.EventCustom(e.getType(),!1);r.setUserData(n.callback),n.node.dispatchEvent(r),n.touchStarted=!1}}},t.prototype.popStep=function(){if(!(this.guideSteps.length<=0))for(var e=0,t=this.guideSteps.shift().touches;e<t.length;e++){var o=t[e];o.end&&o.end&&o.end()}},t.prototype.clearStep=function(){if(!(this.guideSteps.length<=0))for(var e=0,t=this.guideSteps;e<t.length;e++)for(var o=0,n=t[e].touches;o<n.length;o++){var i=n[o];i.end&&i.end&&i.end()}},t.prototype.showEnd=function(){var e=this;console.log(" show end "),this.Corn.node.active=!0,this.Corn.node.position=cc.v2(0,100),this.Corn.spriteFrame=this.GuideEnd,this.GuideContent.string=lan.t(l.En_View.XinShouZhiYin,l.En_ID.XinShouZhiYin8),this.OK.node.active=!0,this.OK.node.targetOff(this),this.OK.node.on(cc.Node.EventType.TOUCH_END,function(){e.hide()},this),this.GuideHand.node.active=!1,s.Game.getCurSelectPoker()&&(s.Game.getCurSelectPoker().node.group="default")},t.prototype.onBlockTouchMove=function(e){if(!(this.guideSteps.length<=0||this.OK.node.active))for(var t=0,o=this.guideSteps[0].touches;t<o.length;t++){var n=o[t];!n.isButton&&n.touchStarted&&n.node&&(e.bubbles=!1,n.node.dispatchEvent(e))}},t.prototype.register=function(e){this.guideSteps=e},t.prototype.startGuide=function(e){s.Game.guideEnd=!1,this.OK.node.active=!1,this.isGuide=!0,this.node.active=!0,this.Next.node.active=!1,this.Forward.node.active=!1,this.GuideView.node.active=!1,this.GuideBlock.active=!1,this.Skip.node.active=!0,this.callback=e,this.nextGuide()},t.prototype.nextGuide=function(){if(this.guideSteps.length<=0)this.showEnd();else{6==this.index?(this.Corn.spriteFrame=this.GuideAtlas.getSpriteFrame("new"+this.index),this.Corn.node.position=cc.v2(227,-295)):this.Corn.spriteFrame=this.emptyPanel,7==this.index&&(this.Corn.node.position=cc.v2(227,30)),this.GuideContent.string=lan.t(l.En_View.XinShouZhiYin,l.En_ID.XinShouZhiYin1+this.index-1),this.index++;for(var e=this.guideSteps[0],t=[],o=0,n=e.touches;o<n.length;o++){!(c=n[o]).node&&c.nodeFunc&&(c.node=c.nodeFunc()),c.isAction&&c.node&&t.push(c.node)}if(t.length>0){var i=void 0;i=e.touches.length>1?CMath.ConvertToNodeSpaceAR(t[1],this.GuideHand.node.parent):CMath.ConvertToNodeSpaceAR(t[0],this.GuideHand.node.parent),this.GuideHand.node.position=i}for(var r=0,a=e.touches;r<a.length;r++){var c;if((c=a[r]).node.group="guide",c.start&&c.start(),c.isAction){i=CMath.ConvertToNodeSpaceAR(c.node,this.GuideHand.node.parent);this.GuideHand.node.active=!0,this.GuideHand.node.position=i,this.GuideHand.node.opacity=255}}}},t.prototype.hide=function(){console.log(" hide "),this.node.active&&(this.clearStep(),this.node.active=!1,this.callback&&this.callback(),this.callback=null,s.Game.guideEnd=!0)},t.prototype.showBlock=function(){this.Block.active=!0,this.Corn.node.active=!0,this.GuideContent.node.active=!0,this.OK.node.active=!1,this.Skip.node.active=!1,this.node.active=!0},t.prototype.show=function(e){this.OK.node.active=!1,this.Corn.node.active=!1,this.GuideContent.node.active=!1,this.GuideHand.node.active=!1,this.isGuide=!1,this.Next.node.active=!0,this.GuideView.node.active=!0,this.Skip.node.active=!1,this.Next.node.active=!0,this.Forward.node.active=!0,this.GuideBlock.active=!0,this.node.active=!0,this.callback=e,this.GuideView.scrollToPage(0,0),this.Forward.node.active=!1,this.Next.node.getChildByName("Background").getComponent(cc.Sprite).spriteFrame=this.ButtonAtlas.getSpriteFrame("btn_new")},t.prototype.nextPage=function(){if(this.GuideView.getCurrentPageIndex()>=this.GuideView.content.childrenCount-1)this.hide();else{var e=(this.GuideView.getCurrentPageIndex()+1)%this.GuideView.content.childrenCount;this.GuideView.setCurrentPageIndex(e),e>=this.GuideView.content.childrenCount-1&&(this.Next.node.getChildByName("Background").getComponent(cc.Sprite).spriteFrame=this.ButtonAtlas.getSpriteFrame("new_close")),this.Forward.node.active=0!=e}},t.prototype.forwardPage=function(){if(this.GuideView.getCurrentPageIndex()<=0);else{var e=(this.GuideView.getCurrentPageIndex()-1)%this.GuideView.content.childrenCount;this.GuideView.setCurrentPageIndex(e),this.Forward.node.active=0!=e,this.Next.node.getChildByName("Background").getComponent(cc.Sprite).spriteFrame=this.ButtonAtlas.getSpriteFrame("btn_new")}},i([p(cc.SpriteAtlas)],t.prototype,"GuideAtlas",void 0),i([p(cc.Animation)],t.prototype,"GuideHand",void 0),i([p(cc.SpriteFrame)],t.prototype,"GuideEnd",void 0),i([p(cc.SpriteFrame)],t.prototype,"emptyPanel",void 0),i([p(cc.Sprite)],t.prototype,"Corn",void 0),i([p(cc.SpriteAtlas)],t.prototype,"ButtonAtlas",void 0),i([p(cc.Button)],t.prototype,"Next",void 0),i([p(cc.Button)],t.prototype,"OK",void 0),i([p(cc.Button)],t.prototype,"Forward",void 0),i([p(cc.PageView)],t.prototype,"GuideView",void 0),i([p(cc.Button)],t.prototype,"Skip",void 0),i([p(cc.Node)],t.prototype,"Block",void 0),i([p(cc.Node)],t.prototype,"GuideBlock",void 0),t=i([h],t)}(cc.Component);o.default=d,cc._RF.pop()},{"./Poker":"Poker","./controller/EventManager":"EventManager","./controller/EventName":"EventName","./controller/Game":"Game","./table":"table"}],HashMap:[function(e,t,o){"use strict";cc._RF.push(t,"07791aKdvNDo7wFtZ+VAQS2","HashMap"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function e(){this._list=new Array,this.clear()}return e.prototype.getIndexByKey=function(e){for(var t=this._list.length,o=0;o<t;o++){if(this._list[o].key==e)return o}return-1},e.prototype.keyOf=function(e){for(var t=this._list.length,o=0;o<t;o++){var n=this._list[o];if(n.value==e)return n.key}return null},Object.defineProperty(e.prototype,"keys",{get:function(){for(var e=new Array,t=0,o=this._list;t<o.length;t++){var n=o[t];n&&e.push(n.key)}return e},enumerable:!0,configurable:!0}),e.prototype.add=function(e,t){var o={key:e,value:t},n=this.getIndexByKey(e);-1!=n?this._list[n]=o:this._list.push(o)},Object.defineProperty(e.prototype,"values",{get:function(){return this._list},enumerable:!0,configurable:!0}),e.prototype.remove=function(e){var t=this.getIndexByKey(e);if(-1!=t){var o=this._list[t];return this._list.splice(t,1),o}return null},e.prototype.has=function(e){return-1!=this.getIndexByKey(e)},e.prototype.get=function(e){var t=this.getIndexByKey(e);return-1!=t?this._list[t].value:null},Object.defineProperty(e.prototype,"length",{get:function(){return this._list.length},enumerable:!0,configurable:!0}),e.prototype.sort=function(e){this._list.sort(e)},e.prototype.forEachKeyValue=function(e){for(var t=this._list.length,o=0;o<t;o++){e(this._list[o])}},e.prototype.forEach=function(e){for(var t=this._list.length,o=0;o<t;o++){var n=this._list[o];e(n.key,n.value)}},e.prototype.clear=function(){this._list=[]},e}();o.HashMap=n,cc._RF.pop()},{}],HelpLabelPage:[function(e,t,o){"use strict";cc._RF.push(t,"603244KdulJB7rBxoTahg3D","HelpLabelPage");var n=this&&this.__extends||function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var r=e("./Pokers"),a=e("./table"),c=cc._decorator,s=c.ccclass,l=(c.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),Object.defineProperty(t.prototype,"label",{get:function(){return this.getComponent(cc.Label)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rich",{get:function(){return this.getComponent(cc.RichText)},enumerable:!0,configurable:!0}),t.prototype.onLoad=function(){this.label?this.label.string=lan.t(a.En_View.BangZhuJieMian,a.En_ID.BangZhuJieMian1+parseInt(this.node.name)):this.rich.string=lan.t(a.En_View.BangZhuJieMian,a.En_ID.BangZhuJieMian1+parseInt(this.node.name),[r.NORMAL_21_SCORE.toString(),r.STREAK_SCORE.toString(),r.OVER_5_SCORE.toString(),r.OVER_5_SCORE.toString(),r.WILD_21_SCORE.toString(),r.NO_BUST_EXTRA_SCORE.toString()])},t=i([s],t)}(cc.Component));o.default=l,cc._RF.pop()},{"./Pokers":"Pokers","./table":"table"}],HelpPage:[function(e,t,o){"use strict";cc._RF.push(t,"0d56dWq4TpMl4mebqC4o48U","HelpPage");var n=this&&this.__extends||function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../controller/Game"),a=cc._decorator,c=a.ccclass,s=(a.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.onLoad=function(){r.Game.MatchInfo&&2==r.Game.MatchInfo.difficultyLevel&&this.node.removeFromParent(!0)},t=i([c],t)}(cc.Component));o.default=s,cc._RF.pop()},{"../controller/Game":"Game"}],HideIfLevel2:[function(e,t,o){"use strict";cc._RF.push(t,"86480bkdRNE675WYsotRYyH","HideIfLevel2");var n=this&&this.__extends||function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var r=e("./GameSignals"),a=cc._decorator,c=a.ccclass,s=(a.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.onLoad=function(){var e=this;r.DifficultyLevelInitSignal.inst.addListenerOne(function(t){e.node.active=2!=t,e.node.runAction(cc.fadeIn(0))},this),this.node.opacity=0},t=i([c],t)}(cc.Component));o.default=s,cc._RF.pop()},{"./GameSignals":"GameSignals"}],LogHandler:[function(e,t,o){"use strict";cc._RF.push(t,"7a1c8vCzXtEY7C11BbsyNqa","LogHandler"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function e(){if(this.logMsg=null,this.frameTimes=0,this.now=0,this.Frame=20,this.totalFrames=0,this.startTime=0,window.addEventListener)for(var t=0,o=e.LISTENNING_EVENTS;t<o.length;t++){var n=o[t],i="trigger"+n.charAt(0).toLocaleUpperCase()+n.substring(1);this[i]&&"function"==typeof this[i]&&window.addEventListener(n,this[i].bind(this))}}return Object.defineProperty(e,"inst",{get:function(){return this.ins?this.ins:this.ins=new e},enumerable:!0,configurable:!0}),e.prototype.dumpFrameInfo=function(){var e=(Date.now()-this.startTime)/1e3,t=e/this.totalFrames;this.addLog(" total frames:",this.totalFrames," ,total cost time:",e+"s"," , per frame cost time ave:"+t+"s"),this.sendLog()},e.prototype.initLog=function(t){var o=this;cc.director.once(cc.Director.EVENT_AFTER_SCENE_LAUNCH,function(){o.frameTimes=0,o.now=Date.now(),o.startTime=Date.now()},this),cc.director.on(cc.Director.EVENT_AFTER_DRAW,function(){o.frameTimes++,o.totalFrames++,o.frameTimes>=o.Frame&&(o.frameTimes=0,o.now=Date.now())},this),this.logFunc=t,console.error=function(){for(var t,o=[],n=0;n<arguments.length;n++)o[n]=arguments[n];(t=e.inst).log.apply(t,["[ERROR]"].concat(o))},console.warn=function(){for(var t,o=[],n=0;n<arguments.length;n++)o[n]=arguments[n];(t=e.inst).log.apply(t,["[WARN]"].concat(o))},console.log=function(){for(var t,o=[],n=0;n<arguments.length;n++)o[n]=arguments[n];(t=e.inst).log.apply(t,["[INFO]"].concat(o))}},e.prototype.log=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.addLog.apply(this,e),this.sendLog()},e.prototype.formatLogArguments=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var o="",n=0;n<arguments.length;n++){var i=typeof arguments[n];"string"==i||"number"==i?o+=" "+arguments[n]:"object"==i?o+=" "+JSON.stringify(arguments[n]):"boolean"==i&&arguments[n].toString&&(o+=arguments[n].toString())}return o},e.prototype.addLog=function(){for(var t=[],o=0;o<arguments.length;o++)t[o]=arguments[o];null==this.logMsg&&(this.logMsg={});var n=this.formatLogArguments.apply(this,t),i=this.getFullTime(new Date);this.logMsg[i]=e.VERSION+n},e.prototype.getFullTime=function(e){var t="";t+=e.getFullYear();var o=e.getMonth()+1;t+="-"+(o>=10?o:"0"+o);var n=e.getDate();t+="-"+(n>=10?n:"0"+n);var i=e.getHours();t+="  "+(i>=10?i:"0"+i);var r=e.getMinutes();t+=":"+(r>=10?r:"0"+r);var a=e.getSeconds();return t+=":"+(a>=10?a:"0"+a)},e.prototype.sendLog=function(){this.logFunc&&null!=this.logMsg&&(this.logFunc(JSON.stringify(this.logMsg)),this.logMsg=null)},e.prototype.triggerClose=function(e){this.addLog("triggerClose"),this.sendLog()},e.prototype.triggerLoad=function(e){this.addLog("triggerLoad"),this.sendLog()},e.prototype.triggerUnload=function(e){this.addLog("triggerUnload"),this.sendLog()},e.prototype.triggerOnunload=function(e){this.addLog("triggerUnload"),this.sendLog()},e.prototype.triggerError=function(e){this.addLog("triggerError"),this.addLog(e.message),this.sendLog()},e.prototype.triggerFocus=function(e){this.addLog("triggerFocus"),this.sendLog()},e.prototype.triggerBlur=function(e){this.addLog("triggerBlur"),this.sendLog()},e.prototype.triggerAbort=function(e){this.addLog("triggerAbort"),this.sendLog()},e.prototype.triggerSuspend=function(e){this.addLog("triggerSuspend"),this.sendLog()},e.prototype.beforeunload=function(e){this.addLog("beforeunload"),this.sendLog()},e.VERSION=window.GAME_VERSION||"21-Cash version 63 : ",e.LISTENNING_EVENTS=["error"],e}();o.LogHandler=n,cc._RF.pop()},{}],PokerRemoveNode:[function(e,t,o){"use strict";cc._RF.push(t,"f278aKi3XZFX4MFOEMRZMOs","PokerRemoveNode");var n=this&&this.__extends||function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../controller/Game"),a=e("../controller/GameFactory"),c=cc._decorator,s=c.ccclass,l=(c.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.oldChildCount=0,t}return n(t,e),t.prototype.onLoad=function(){},t.prototype.onPokerFlyDone=function(){if(2==r.Game.MatchInfo.difficultyLevel){if(this.oldChildCount>0){"RemoveCardNode"==this.node.name?r.Game.removeCardDeleteCount+=this.oldChildCount:"RemoveCardNodeBust"==this.node.name&&(r.Game.bustCardDeleteCount+=this.oldChildCount);for(var e=[],t=0;t<this.oldChildCount;t++){var o=this.node.children[t];e.push(o)}for(;e.length>0;){o=e.pop();a.gFactory.putPoker(o)}}this.oldChildCount=this.node.childrenCount}},t=i([s],t)}(cc.Component));o.default=l,cc._RF.pop()},{"../controller/Game":"Game","../controller/GameFactory":"GameFactory"}],PokerRoot:[function(e,t,o){"use strict";cc._RF.push(t,"11cba6M6B9Awbm3ikseAzvv","PokerRoot");var n=this&&this.__extends||function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var r=e("./controller/Game"),a=e("./Poker"),c=e("./Pokers"),s=e("./controller/EventManager"),l=e("./controller/EventName"),u=e("./Special/GameSignals"),h=cc._decorator,p=h.ccclass,d=h.property,f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.SingleValueNode=null,t.MutilpValueNode=null,t.totalValue0Label=null,t.totalValue0Label_MUTIP=null,t.totalValue1Label=null,t.TouchNode=null,t.totalValue0=0,t.totalValue1=0,t.canTouch=!1,t.touchLimitTime=.3,t.touchTime=1,t.flyCount=0,t.totalFlyCount=0,t}return n(t,e),t.prototype.onLoad=function(){this.node.on(cc.Node.EventType.CHILD_ADDED,this.onAddChild,this),this.node.on(cc.Node.EventType.CHILD_REMOVED,this.onChildRemove,this),this.TouchNode.on(cc.Node.EventType.TOUCH_START,this.onTouchStart,this),this.TouchNode.on(cc.Node.EventType.TOUCH_CANCEL,function(e){e.bubbles=!1},this),this.TouchNode.on(cc.Node.EventType.TOUCH_MOVE,function(e){e.bubbles=!1},this),this.TouchNode.on(cc.Node.EventType.TOUCH_END,function(e){e.bubbles=!1},this),this.SingleValueNode.active=!0,this.MutilpValueNode.active=!1},t.prototype.start=function(){this.canTouch=!0},t.prototype.onTouchStart=function(e){var t=this;if(e.bubbles=!1,r.Game.isGameStarted()||r.Game.start(),this.touchTime<this.touchLimitTime)console.log(" touch time limit!!!!!!!!!!!");else{var o=r.Game.getCurSelectPoker();if(o&&!o.isCycled())if(o.node.getNumberOfRunningActions()>0)console.log(" cur poker has runing action");else if(this.canTouch){if(!r.Game.isBoom()&&!r.Game.isComplete()){this.touchTime=0,o.setRecycle(!0),this.canTouch=!1;var n=CMath.ConvertToNodeSpaceAR(o.node,this.node),i=o.node.getParent(),a=o.node.getPosition(),u=this.node.childrenCount,h=c.OFFSET_Y*u-o.node.height/2;o.setDefaultPosition(cc.v2(0,h)),o.node.setParent(this.node),console.log(" onTouchStart set parent "),o.node.setPosition(n),s.gEventMgr.emit(l.GlobalEvent.DEV_POKERS),o.node.group=o.isGuide?"top-guide":"top",o.node.stopActionByTag(c.ACTION_TAG.SELECT_POKER),o.node.stopActionByTag(c.ACTION_TAG.SHAKE);var p=cc.sequence(cc.moveTo(.1,0,h),cc.callFunc(function(){o.node.group=o.isGuide?"guide":"default",t.canTouch=!0,r.Game.canBack=!0},this));p.setTag(c.ACTION_TAG.POS),r.Game.canBack=!1,o.node.runAction(p);var d=this.checkAddScore(o.isWildCard()),f=0,g=0,_=0,y=0;d[1]?_+=this.node.childrenCount:(y+=this.node.childrenCount,d[0]>0&&(f+=1,r.Game.addClearStack(1),g+=1)),r.Game.addStep([o.node],[i],[a],[],[{score:-d[0],stack:-f,streak:-g,cardused:-y,busted:-_}],[CMath.ConvertToNodeSpaceAR(this.node,r.Game.removeNode)])}}else console.log(" can't touch!! ");else o?console.log(" curSelectPoker is recycle!! "):console.log(" curSelectPoker is null!! ")}},t.prototype.onChildRemove=function(e){r.Game.isGameStarted()&&r.Game.addPlacePokerRoot(parseInt(this.node.name),this.node);var t=e.getComponent(a.default);t&&t.setRecycle(!1),console.log(" on child remove update value!!!: ",this.node.childrenCount),this.updateTotalValue(!1)},t.prototype.updateTotalValue=function(e){this.totalValue0=0,this.totalValue1=0;for(var t=0,o=0,n=this.node.children;o<n.length;o++){var i=n[o].getComponent(a.default);if(t++,i.isWildCard()){var r=c.TARGET_POINT-this.totalValue0;this.setTotalValue(r,!0,!1,t,t==this.node.children.length&&e)}else this.setTotalValue(i.getValue(),!1,!1,t,t==this.node.children.length&&e)}this.updateValueLabel()},t.prototype.onAddChild=function(e){var t=e.getComponent(a.default);e.zIndex=Math.floor(Math.abs(t.getDefaultPosition().y)),console.log(" zIndez child value:",t.getValue(!0),this.node.name),t&&(t.setRecycle(!0),console.log(" on child add update value!!!:",this.node.childrenCount),this.updateTotalValue(!0))},t.prototype.setTotalValue=function(e,t,o,n,i){var r=0,a=this.totalValue0,u=this.totalValue1;if(1==e){for(var h=[a,u],p=[],d=0,f=[1,11];d<f.length;d++)for(var g=f[d],_=0,y=h;_<y.length;_++){var m=y[_]+g;p.indexOf(m)<0&&p.push(m)}p.sort(function(e,t){return e-t}),p.indexOf(c.TARGET_POINT)>=0?a=u=c.TARGET_POINT:(a=p[0],u=p[1])}else a+=e,u+=e;return a=Math.max(0,a),u=Math.max(0,u),a>c.TARGET_POINT?this.boom(o):i&&(a==c.TARGET_POINT||u==c.TARGET_POINT?(r+=this.complete(t,o),console.log(" add Score:",r)):n>=5?r+=this.overFive(o):o||(s.gEventMgr.emit(l.GlobalEvent.POP_GUIDE_STEP),this.scheduleOnce(function(){s.gEventMgr.emit(l.GlobalEvent.CHECK_COMPLETE,0)},.1))),o||(this.totalValue0=a,this.totalValue1=u),console.log(" set total value score:",r),r},t.prototype.checkAddScore=function(e){var t=0,o=this.totalValue0,n=this.totalValue1,i=!1;return o>c.TARGET_POINT?i=!0:o==c.TARGET_POINT||n==c.TARGET_POINT?(t+=this.complete(e,!0),this.node.childrenCount>=5&&(t+=c.OVER_5_SCORE),console.log(" add Score:",t)):this.node.childrenCount>=5?t+=this.overFive(!0):r.Game.clearStreak(),[t,i]},t.prototype.updateValueLabel=function(){0==this.totalValue1||this.totalValue0==this.totalValue1||this.totalValue1>21?(this.MutilpValueNode.active=!1,this.SingleValueNode.active=!0):(this.MutilpValueNode.active=!0,this.SingleValueNode.active=!1),this.totalValue0Label.string=this.totalValue0.toString(),this.totalValue0Label_MUTIP.string=this.totalValue0.toString(),this.totalValue1Label.string=this.totalValue1.toString()},t.prototype.boom=function(e){e||(console.log(" \u8d85\u8fc721\u70b9\u7206\u6389"),this.flyALLChildren(0),this.totalValue0=0,this.totalValue1=0,this.updateValueLabel(),r.Game.clearStreak(),r.Game.addRecyclePoker(1),s.gEventMgr.emit(l.GlobalEvent.PLAY_BUST),s.gEventMgr.emit(l.GlobalEvent.BUST,parseInt(this.node.name)),this.scheduleOnce(function(){s.gEventMgr.emit(l.GlobalEvent.CHECK_COMPLETE,c.SPECIAL_TIME_OFFSET)},.1))},t.prototype.complete=function(e,t){var o=this,n=e?c.WILD_21_SCORE:c.NORMAL_21_SCORE;r.Game.getStreak()>=2&&(n+=(Math.min(3,r.Game.getStreak())-1)*c.STREAK_SCORE);var i=0;if(!t){console.log(" \u5b8c\u6210 21\u70b9");var u=!1;if(this.node.childrenCount>=5)setTimeout(function(){r.Game.addScore(c.OVER_5_SCORE,CMath.ConvertToNodeSpaceAR(o.node,r.Game.removeNode).add(cc.v2(0,-300))),s.gEventMgr.emit(l.GlobalEvent.OVER_FIVE_CARDS,parseInt(o.node.name))},c.SPECIAL_TIME_OFFSET),i=c.SPECIAL_TIME_OFFSET;else if(3==this.node.childrenCount&&2==r.Game.MatchInfo.difficultyLevel){u=!0;for(var h=0,p=this.node.children;h<p.length;h++){if(7!=p[h].getComponent(a.default).getValue()){u=!1;break}}}if(this.flyALLChildren(e?c.WILD_21_SCORE:u?1200:c.NORMAL_21_SCORE),e?s.gEventMgr.emit(l.GlobalEvent.WILD,parseInt(this.node.name)):u?s.gEventMgr.emit(l.GlobalEvent.S_777,parseInt(this.node.name)):s.gEventMgr.emit(l.GlobalEvent.COMPLETE_21,parseInt(this.node.name)),this.totalValue0=0,this.totalValue1=0,this.updateValueLabel(),r.Game.addStreak(1),r.Game.getStreak()>=2){var d=Math.min(r.Game.getStreak(),3);setTimeout(function(){r.Game.addScore((d-1)*c.STREAK_SCORE,CMath.ConvertToNodeSpaceAR(o.node,r.Game.removeNode)),d>=3?s.gEventMgr.emit(l.GlobalEvent.SUPER_COMBO,parseInt(o.node.name)):s.gEventMgr.emit(l.GlobalEvent.COMBO,parseInt(o.node.name))},i+c.SPECIAL_TIME_OFFSET)}this.scheduleOnce(function(){s.gEventMgr.emit(l.GlobalEvent.CHECK_COMPLETE,i+c.SPECIAL_TIME_OFFSET-100)},.1)}return n},t.prototype.overFive=function(e){var t=this,o=c.OVER_5_SCORE;if(r.Game.getStreak()>=2&&(o+=(r.Game.getStreak()-1)*c.STREAK_SCORE),!e){console.log(" \u8d85\u8fc75\u5f20 ");var n=0;if(this.flyALLChildren(c.OVER_5_SCORE),s.gEventMgr.emit(l.GlobalEvent.OVER_FIVE_CARDS,parseInt(this.node.name)),this.totalValue0=0,this.totalValue1=0,this.updateValueLabel(),r.Game.addStreak(1),r.Game.getStreak()>=2){var i=Math.min(r.Game.getStreak(),3);setTimeout(function(){r.Game.addScore((i-1)*c.STREAK_SCORE,CMath.ConvertToNodeSpaceAR(t.node,r.Game.removeNode)),i>=3?s.gEventMgr.emit(l.GlobalEvent.SUPER_COMBO,parseInt(t.node.name)):s.gEventMgr.emit(l.GlobalEvent.COMBO,parseInt(t.node.name))},c.SPECIAL_TIME_OFFSET),n+=c.SPECIAL_TIME_OFFSET}this.scheduleOnce(function(){s.gEventMgr.emit(l.GlobalEvent.CHECK_COMPLETE,n)},.1)}return o},t.prototype.completeFly=function(){this.flyCount++,this.flyCount>=this.totalFlyCount&&(this.canTouch=!0,s.gEventMgr.emit(l.GlobalEvent.POP_GUIDE_STEP),u.PokerFlyDoneSignal.inst.dispatch())},t.prototype.flyALLChildren=function(e){var t=this,o=this.node.children.reverse(),n=o.length;this.totalFlyCount=n,this.flyCount=0,this.canTouch=!1;for(var i=0,c=o;i<c.length;i++){var s=c[i];s.getComponent(a.default).autoCompleteDone(.05*n,parseInt(this.node.name)>1?-1:1,n,0==e,function(){t.completeFly()}),--n==o.length-1&&e>0&&r.Game.addScore(e,CMath.ConvertToNodeSpaceAR(s,r.Game.removeNode))}},t.prototype.setNewRoot=function(e){},t.prototype.update=function(e){this.touchTime+=e},i([d(cc.Node)],t.prototype,"SingleValueNode",void 0),i([d(cc.Node)],t.prototype,"MutilpValueNode",void 0),i([d(cc.Label)],t.prototype,"totalValue0Label",void 0),i([d(cc.Label)],t.prototype,"totalValue0Label_MUTIP",void 0),i([d(cc.Label)],t.prototype,"totalValue1Label",void 0),i([d(cc.Node)],t.prototype,"TouchNode",void 0),t=i([p],t)}(cc.Component);o.default=f,cc._RF.pop()},{"./Poker":"Poker","./Pokers":"Pokers","./Special/GameSignals":"GameSignals","./controller/EventManager":"EventManager","./controller/EventName":"EventName","./controller/Game":"Game"}],Pokers:[function(e,t,o){"use strict";cc._RF.push(t,"d504dBfU4JI0K2nPtJ3w844","Pokers"),Object.defineProperty(o,"__esModule",{value:!0}),o.SpadeStartIndex=0,o.HeartStartIndex=1,o.ClubStartIndex=2,o.DiamondStartIndex=3,o.PokerTypes={spade_:3,club_:10,diamond_:5,heart_:12},o.PokerSprite={"spade_,1":"bg_solitarie_01A","spade_,2":"bg_solitarie_012","spade_,3":"bg_solitarie_013","spade_,4":"bg_solitarie_014","spade_,5":"bg_solitarie_015","spade_,6":"bg_solitarie_016","spade_,7":"bg_solitarie_017","spade_,8":"bg_solitarie_018","spade_,9":"bg_solitarie_019","spade_,10":"bg_solitarie_0110","spade_,11":"bg_solitarie_01J","spade_,12":"bg_solitarie_01Q","spade_,13":"bg_solitarie_01K","club_,1":"bg_solitarie_03A","club_,2":"bg_solitarie_032","club_,3":"bg_solitarie_033","club_,4":"bg_solitarie_034","club_,5":"bg_solitarie_035","club_,6":"bg_solitarie_036","club_,7":"bg_solitarie_037","club_,8":"bg_solitarie_038","club_,9":"bg_solitarie_039","club_,10":"bg_solitarie_0310","club_,11":"bg_solitarie_03J","club_,12":"bg_solitarie_03Q","club_,13":"bg_solitarie_03K","heart_,1":"bg_solitarie_02A","heart_,2":"bg_solitarie_022","heart_,3":"bg_solitarie_023","heart_,4":"bg_solitarie_024","heart_,5":"bg_solitarie_025","heart_,6":"bg_solitarie_026","heart_,7":"bg_solitarie_027","heart_,8":"bg_solitarie_028","heart_,9":"bg_solitarie_029","heart_,10":"bg_solitarie_0210","heart_,11":"bg_solitarie_02J","heart_,12":"bg_solitarie_02Q","heart_,13":"bg_solitarie_02K","diamond_,1":"bg_solitarie_04A","diamond_,2":"bg_solitarie_042","diamond_,3":"bg_solitarie_043","diamond_,4":"bg_solitarie_044","diamond_,5":"bg_solitarie_045","diamond_,6":"bg_solitarie_046","diamond_,7":"bg_solitarie_047","diamond_,8":"bg_solitarie_048","diamond_,9":"bg_solitarie_049","diamond_,10":"bg_solitarie_0410","diamond_,11":"bg_solitarie_04J","diamond_,12":"bg_solitarie_04Q","diamond_,13":"bg_solitarie_04K"},o.GuidePokers=["spade_,7","heart_,6","diamond_,10","club_,8","spade_,1","club_,4","spade_,11","heart_,2","spade_,3","heart_,3","club_,3","diamond_,3","spade_,4","heart_,4","club_,4","diamond_,4","spade_,5","heart_,5","club_,5","diamond_,5","spade_,6","heart_,6","club_,6","diamond_,6","spade_,7","heart_,7","club_,7","diamond_,7","spade_,8","heart_,8","club_,8","diamond_,8","diamond_,9","spade_,9","heart_,9","club_,9","diamond_,10","spade_,10","club_,10","heart_,10","spade_,11","heart_,11","club_,11","diamond_,11","spade_,12","heart_,12","club_,12","diamond_,12","spade_,13","heart_,13","club_,13","diamond_,13"],o.Pokers=["spade_,1","heart_,1","club_,1","diamond_,1","spade_,2","heart_,2","club_,2","diamond_,2","spade_,3","heart_,3","club_,3","diamond_,3","spade_,4","heart_,4","club_,4","diamond_,4","spade_,5","heart_,5","club_,5","diamond_,5","spade_,6","heart_,6","club_,6","diamond_,6","spade_,7","heart_,7","club_,7","diamond_,7","spade_,8","heart_,8","club_,8","diamond_,8","diamond_,9","spade_,9","heart_,9","club_,9","diamond_,10","spade_,10","club_,10","heart_,10","spade_,11","heart_,11","club_,11","diamond_,11","spade_,12","heart_,12","club_,12","diamond_,12","spade_,13","heart_,13","club_,13","diamond_,13"],o.PokerIndex=[6,5,4,3,2,1,0,12,11,10,9,8,7,17,16,15,14,13,21,20,19,18,24,23,22,26,25,27,28,29,50,49,46,43,40,37,34,31,30,33,36,39,42,45,48,51],function(e){e[e.FLIP_CARD_REPOS_ON_ADD=0]="FLIP_CARD_REPOS_ON_ADD",e[e.FLIP_CARD_REPOS_ON_REMOVE=1]="FLIP_CARD_REPOS_ON_REMOVE",e[e.BACK_STEP=2]="BACK_STEP",e[e.DEV_POKER=3]="DEV_POKER",e[e.RE_DEV_POKER=4]="RE_DEV_POKER",e[e.SHAKE=5]="SHAKE",e[e.RECYCLE=6]="RECYCLE",e[e.POS_SCALE=7]="POS_SCALE",e[e.POS_NORMAL=8]="POS_NORMAL",e[e.SELECT_POKER=9]="SELECT_POKER",e[e.POS=10]="POS",e[e.SelectPoker=11]="SelectPoker"}(o.ACTION_TAG||(o.ACTION_TAG={})),function(e){e[e.FIVE_CARDS=0]="FIVE_CARDS",e[e.COMPLETE_21=1]="COMPLETE_21",e[e.BUSTED=2]="BUSTED",e[e.COMBO=3]="COMBO",e[e.NO_BUST=4]="NO_BUST",e[e.SUPER_COMBO=5]="SUPER_COMBO",e[e.WILD=6]="WILD",e[e.S_777=7]="S_777"}(o.SPECIAL_TYPE||(o.SPECIAL_TYPE={})),o.SPECIAL_TYPE_NAME=["bg_font5C","bg_font21","bg_fontbu","bg_fontco","bg_fontno","bg_fontsco","bg_fontwild","bg_font777"],o.COLOR_GRAY=cc.color(238,218,166),o.OFFSET_Y=-70,o.OFFSET_X=0,o.OFFSET_SCALE=15,o.FLIP_SCORE=50,o.BACK_STEP_SCORE=0,o.TARGET_POINT=21,o.NORMAL_21_SCORE=400,o.WILD_21_SCORE=200,o.STREAK_SCORE=300,o.OVER_5_SCORE=600,o.NO_BUST_EXTRA_SCORE=150,o.ADD_SCORE_SPECILA_OFFSET_Y=680,o.NORMAL_SCORE_MOVE_TIME=.3,o.SPECIAL_TIME_OFFSET=500,o.TOTAL_POKER_COUNT=o.Pokers.length,cc._RF.pop()},{}],Poker:[function(e,t,o){"use strict";cc._RF.push(t,"19c3a5acP5K/YiwGw559yBs","Poker");var n=this&&this.__extends||function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var r,a,c,s,l=e("./controller/Game"),u=e("./Pokers"),h=e("./controller/EventManager"),p=e("./controller/EventName"),d=cc._decorator,f=d.ccclass,g=d.property;(function(e){e[e.Front=0]="Front",e[e.Back=1]="Back"})(r=o.CardState||(o.CardState={})),function(e){e[e.Red=0]="Red",e[e.Black=1]="Black"}(a=o.PokerColor||(o.PokerColor={})),function(e){e[e.Club=0]="Club",e[e.Spade=1]="Spade",e[e.Heart=2]="Heart",e[e.Diamond=3]="Diamond"}(c=o.PokerType||(o.PokerType={})),function(e){e[e.NORMAL=0]="NORMAL",e[e.SCALE=1]="SCALE"}(s=o.POS_STATE||(o.POS_STATE={}));var _=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.frontCard=null,t.backCard=null,t.pokerAtlas=null,t.RecycleAnimation=null,t.WildAnimation=null,t.flips=[],t.value=0,t.posState=s.NORMAL,t.hasMove=!1,t.canMove=!1,t.key=-1,t.next=null,t.forward=null,t.defualtChildCount=0,t.isCheck=!1,t.cycled=!1,t.isguided=!1,t.placeLimit=cc.size(0,0),t.isReadyAutoComplete=!1,t.recycleActionInfo={startTime:0,duration:0},t.complete=!1,t}var o;return n(t,e),o=t,t.prototype.reuse=function(){this.node._onSetParent=this.onSetParent.bind(this),this.posState=s.NORMAL,this.hasMove=!1,this.isReadyAutoComplete=!1;var e=arguments[0][0][0];this.isguided=arguments[0][0][1],this.value=parseInt(e.split(",")[1]);var t=e.split(",")[0];switch(this.pokerColer="spade_"==t||"club_"==t?a.Black:a.Red,t){case"spade_":this.pokerType=c.Spade;break;case"club_":this.pokerType=c.Club;break;case"heart_":this.pokerType=c.Heart;break;case"diamond_":this.pokerType=c.Diamond}this.frontCard.spriteFrame=this.pokerAtlas.getSpriteFrame(u.PokerSprite[e]),this.node.rotation=0,this.setCardState(r.Back),this.initEvent()},t.prototype.getPokerColor=function(){return this.pokerColer},t.prototype.getPokerType=function(){return this.pokerType},t.prototype.unuse=function(){this.node.targetOff(this),h.gEventMgr.targetOff(this),this.cycled=!1,this.node.group="default",this.setCardState(r.Back),this.node.stopAllActions(),this.frontCard.node.stopAllActions(),this.backCard.node.stopAllActions(),this.frontCard.node.scaleX=0,this.backCard.node.scaleX=1,this.unscheduleAllCallbacks()},t.prototype.getNext=function(){return this.next},t.prototype.getForward=function(){return this.forward},t.prototype.setNext=function(e){this.next=e,this.node.getChildByName("Label").getComponent(cc.Label).string="next:"+(this.next?this.next.getValue():"null")+", key:"+this.key},t.prototype.setForward=function(e){this.forward=e},t.prototype.setRecycle=function(e){this.cycled!=e&&(this.cycled=e,this.cycled?(this.RecycleAnimation.node.opacity=0,this.RecycleAnimation.node.active=!1,this.RecycleAnimation.stop(),l.Game.addRecycleCount(1)):l.Game.addRecycleCount(-1))},t.prototype.getValue=function(e){return void 0===e&&(e=!1),e||this.value<10?this.value:10},t.prototype.getCardState=function(){return this.carState},t.prototype.onLoad=function(){this.RecycleAnimation.node.opacity=0,this.RecycleAnimation.node.active=!1,this.placeLimit.width=this.node.width/2,this.placeLimit.height=.75*this.node.height,this.node.getChildByName("Label").active=!1,this.defualtChildCount=this.node.childrenCount,this.setCardState(r.Back)},t.prototype.initEvent=function(){var e=this;this.node.on(cc.Node.EventType.CHILD_ADDED,this.onAddChild,this),this.node.on(cc.Node.EventType.CHILD_REMOVED,this.onChildRemove,this),this.node.on(cc.Node.EventType.TOUCH_START,this.onTouchStart,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this.onMove,this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this.onMoveEnd,this),this.node.on(cc.Node.EventType.TOUCH_END,this.onMoveEnd,this),this.node.on("check-done",this.onCheckDone,this),this.node.on("pos-scale",function(t){console.log("pos-scale:",t,e.key,e.isCycled(),s[e.posState],r[e.carState],e.value),t!=e.key||e.isCycled()||e.posState==s.SCALE||e.carState==r.Back||e.setPosState(s.SCALE)},this),this.node.on("pos-normal",function(t){console.log("pos-normal:",t,e.key,e.isCycled(),s[e.posState],r[e.carState],e.value),t!=e.key||e.isCycled()||e.posState==s.NORMAL||e.carState==r.Back||e.setPosState(s.NORMAL)},this),h.gEventMgr.once(p.GlobalEvent.COMPLETE,this.autoComplete,this),h.gEventMgr.once(p.GlobalEvent.AUTO_COMPLETE_DONE,function(){},this)},t.prototype.setComplete=function(e){this.complete=e},t.prototype.autoCompleteDone=function(e,t,o,n,i){var r=this;if(void 0===n&&(n=!1),!this.complete){var a=l.Game.allPokers.indexOf(this.node);a>=0&&l.Game.allPokers.splice(a,1),this.setComplete(!0);this.RecycleAnimation.node.opacity=0,this.RecycleAnimation.node.active=!1,this.RecycleAnimation.stop(),this.hasMove&&l.Game.addPosOffset(this.key,u.OFFSET_SCALE),this.scheduleOnce(function(){var e=l.Game.getTopStep();e?e.node.indexOf(r.node)<0?(e.node.push(r.node),e.lastParent.push(r.node.getParent()),e.lastPos.push(r.getDefaultPosition())):n&&(e.func?e.func.push({callback:l.Game.addRecyclePoker,args:[-1],target:l.Game}):e.func=[{callback:l.Game.addRecyclePoker,args:[-1],target:l.Game}]):console.log("  none top step")},0),this.scheduleOnce(function(){var e=CMath.ConvertToNodeSpaceAR(r.node,l.Game.removeCardNode);n?r.node.setParent(l.Game.removeBustedNode):r.node.setParent(l.Game.removeCardNode),r.node.setPosition(e),r.node.zIndex=o,i&&i()},.15),this.scheduleOnce(function(){var o=CMath.getRandom(0,4)*t,i=CMath.getRandom(0,16);r.canMove=!1,r.node.runAction(cc.sequence(cc.delayTime(e),cc.callFunc(function(){r.frontCard.node.opacity=255,r.node.group=r.isguided?"top-guide":"top",l.Game.addCombo(1),h.gEventMgr.emit(p.GlobalEvent.PLAY_POKER_FLY),!n&&h.gEventMgr.emit(p.GlobalEvent.PLAY_RECYCLE)},r),cc.sequence(cc.repeat(cc.spawn(cc.moveBy(.01,3*t+o,15+i).easing(cc.easeQuinticActionOut()),cc.rotateBy(.01,20*t).easing(cc.easeQuadraticActionIn())),30),cc.repeat(cc.spawn(cc.moveBy(.01,2*t+o,-20).easing(cc.easeQuinticActionIn()),cc.rotateBy(.01,20*t).easing(cc.easeQuadraticActionIn())),180),cc.callFunc(function(){console.log("done!")},r))))},.16)}},t.prototype.autoComplete=function(){!this.next&&"PokerFlipRoot"!=this.node.getParent().name||this.isCycled()?(this.isReadyAutoComplete=!0,console.log(" isAutoComplete:",this.isReadyAutoComplete)):this.isReadyAutoComplete=!1},t.prototype.onCheckDone=function(e){this.key==e&&this.isCheck&&this.setRecycle(!0)},t.prototype.setDefaultPosition=function(e){e?this.defaultPos?(this.defaultPos.x=e.x,this.defaultPos.y=e.y):this.defaultPos=e.clone():this.defaultPos=this.node.position.clone()},t.prototype.setLastPosition=function(e){this.lastPos=e||this.node.position.clone()},t.prototype.setFlipPos=function(e){this.flipPos=e||this.node.position.clone()},t.prototype.getFlipPos=function(){return this.flipPos?this.flipPos.clone():this.node.position.clone()},t.prototype.getDefaultPosition=function(){return this.defaultPos?this.defaultPos.clone():this.node.position.clone()},t.prototype.getLastPosition=function(){return this.lastPos?this.lastPos.clone():this.node.position.clone()},t.prototype.setKey=function(e){this.key=e,e&&"NaN"==e.toString()?this.node.getChildByName("Label").getComponent(cc.Label).string+="value:"+this.value.toString():this.node.getChildByName("Label").getComponent(cc.Label).string="next:"+(this.next?this.next.getValue():"null")+", key:"+this.key,this.next&&this.next.getKey()!=this.key&&this.next.setKey(e)},t.prototype.getKey=function(){return this.key},t.prototype.onTouchStart=function(e){e.bubbles=this.isCycled(),["0","1","2","3"].indexOf(this.node.parent.name)>=0||l.Game.isTimeOver()||l.Game.isComplete()||this.isCycled()||(l.Game.isGameStarted()||l.Game.start(),h.gEventMgr.emit(p.GlobalEvent.PLAY_POKER_PLACE))},t.prototype.checkAutoRecycle=function(){return!1},t.prototype.onMove=function(e){},t.prototype.setCanMove=function(e){this.canMove=e},t.prototype.onMoveEnd=function(e){if(e.bubbles=!1,!(["0","1","2","3"].indexOf(this.node.parent.name)>=0||l.Game.isTimeOver()||l.Game.isComplete()||this.isCycled())){var t=this.node.getActionByTag(u.ACTION_TAG.SHAKE);t&&!t.isDone()||this.shake()}},t.prototype.checkCanPlace=function(){var e=this,t=-1;return l.Game.getPlacePokerRoot().forEach(function(n,i){var r=i.getComponent(o);if((e.node.name!=i.name||!r)&&(!r||r.getKey()!=e.getKey())&&(r&&o.checkBeNext(r,e)||!r)){var a=CMath.ConvertToNodeSpaceAR(i,e.node.parent);Math.abs(a.x-e.node.position.x)<=e.placeLimit.width&&Math.abs(a.y-e.node.position.y)<=e.placeLimit.height&&(t=n)}}),t},t.prototype.checkCanRecycled=function(){return-1},t.prototype.updateRootNode=function(e){if(!this.cycled&&null!=this.key&&null!=e)if(this.node.childrenCount<=this.defualtChildCount)l.Game.addPlacePokerRoot(e,this.node),this.check(1);else{if(!this.next)return;this.next.updateRootNode.call(this.next,e)}},t.prototype.isWildCard=function(){return 11==this.value&&this.pokerColer==a.Black},t.prototype.setWild=function(){h.gEventMgr.emit(p.GlobalEvent.PLAY_CHANGE_2_WILD),this.value=11,this.pokerColer=a.Black,this.RecycleAnimation.node.opacity=255,this.RecycleAnimation.node.active=!0,this.RecycleAnimation.play(),this.WildAnimation.play(),this.frontCard.spriteFrame=this.pokerAtlas.getSpriteFrame(CMath.getRandom()>.5?u.PokerSprite["spade_,11"]:u.PokerSprite["club_,11"])},t.prototype.checkPos=function(){if(!this.isguided&&"default"!=this.node.group||this.isguided&&"guide"!=this.node.group)console.log(" checkPos");else if(!this.isCycled()){var e=l.Game.getPlacePokerRoot().get(this.key);if(e){var t=e.getComponent(o);if(t){var n=CMath.ConvertToNodeSpaceAR(e,l.Game.removeNode),i=l.Game.getPosOffset(this.key);n.y-this.node.height+i<=l.Game.pokerClip.y?(console.log("pos-scale-------------"),t.emitNodeEventToForward("pos-scale")):t.emitNodeEventToForward("pos-normal")}}}},t.prototype.setPosState=function(e,t){if(void 0===t&&(t=!0),this.posState!=e)if(this.posState=e,this.posState==s.NORMAL){if(this.hasMove){t&&this.node.runAction(cc.moveBy(.01,0,-u.OFFSET_SCALE));var o=this.getDefaultPosition();this.setDefaultPosition(cc.v2(o.x,o.y-u.OFFSET_SCALE)),l.Game.addPosOffset(this.key,u.OFFSET_SCALE),this.hasMove=!1}this.next&&this.next.setPosState.call(this.next,s.NORMAL)}else if(t&&this.forward&&this.forward.carState!=r.Back){this.hasMove=!0,this.node.runAction(cc.moveBy(.01,0,u.OFFSET_SCALE));o=this.getDefaultPosition();this.setDefaultPosition(cc.v2(o.x,o.y+u.OFFSET_SCALE)),l.Game.addPosOffset(this.key,-u.OFFSET_SCALE)}},t.prototype.isCycled=function(){return this.cycled},t.prototype.check=function(e){this.carState!=r.Back&&(this.value==e?(this.isCheck=!0,13==e?(this.emitNodeEventToNext("check-done"),l.Game.clearStep()):this.forward&&this.forward.check.call(this.forward,e+1)):this.isCheck=!1)},Object.defineProperty(t.prototype,"isGuide",{get:function(){return this.isguided},enumerable:!0,configurable:!0}),t.prototype.shake=function(){if(!this.isCycled()&&!(this.node.getNumberOfRunningActions()>0||["0","1","2","3","RemoveCardNode","RemoveCardNodeBust","PokerDevl","PokerClip"].indexOf(this.node.parent.name)>=0)){console.log(" shake:",this.node.parent.name),this.node.group=this.isguided?"guide":"default";var e=this.getDefaultPosition(),t=cc.sequence(cc.repeat(cc.sequence(cc.moveTo(.02,e.x-10,e.y),cc.moveTo(.04,e.x+20,e.y),cc.moveTo(.02,e.x-10,e.y)),3),cc.moveTo(.01,e.x,e.y));t.setTag(u.ACTION_TAG.SHAKE),this.node.stopActionByTag(u.ACTION_TAG.SHAKE),this.node.setPosition(e.x,e.y),this.node.runAction(t),h.gEventMgr.emit(p.GlobalEvent.PLAY_SHAKE)}},t.prototype.emitNodeEventToNext=function(e){this.node.emit(e,this.key),this.next&&this.next.emitNodeEventToNext.call(this.next,e)},t.prototype.emitNodeEventToForward=function(e){this.node.emit(e,this.key),this.forward&&this.forward.emitNodeEventToForward.call(this.forward,e)},t.prototype.onAddChild=function(e){var t=e.getComponent(o);t?(this.setNext(t),this.cycled||(t.setRecycle(!1),o.checkBeNext(this,this.next)?this.setNormal():this.setAllGray(),t.setNormal(),this.updateRootNode(this.key))):console.error(" \u6ca1\u6709 Poker\u7c7b")},t.checkBeNext=function(e,t){return!(!t||!e)&&(!!window.CheatOpen||e.getValue()-t.getValue()==1&&e.getPokerColor()==t.getPokerColor())},t.checkRecycled=function(e,t){return!1},t.prototype.onChildRemove=function(e){this.setNext(null),l.Game.isGameStarted()&&!l.Game.isComplete()&&(this.cycled||this.node.childrenCount<=this.defualtChildCount&&(l.Game.addPlacePokerRoot(this.key,this.node),this.setNormal(),this.checkPos(),this.carState==r.Back?(this.flipCard(.1),l.Game.addFlipCounts(1),l.Game.addScore(u.FLIP_SCORE,CMath.ConvertToNodeSpaceAR(this.node,l.Game.removeNode))):this.forward&&this.forward.updateState.call(this.forward)))},t.prototype.updateState=function(){this.next?(o.checkBeNext(this,this.next)&&this.next.isNormal()?this.setNormal():(this.frontCard.node.color=u.COLOR_GRAY.clone(),this.canMove=!1),this.forward&&this.forward.updateState.call(this.forward)):this.setNormal()},t.prototype.setAllGray=function(){this.node.parent&&(this.frontCard.node.color=u.COLOR_GRAY.clone(),this.canMove=!1,this.forward&&this.forward.setAllGray.call(this.forward))},t.prototype.setNormal=function(){this.frontCard.node.color=cc.Color.WHITE,this.canMove=this.carState==r.Front},t.prototype.isGray=function(){return this.frontCard.node.color==u.COLOR_GRAY&&0==this.canMove},t.prototype.setCardState=function(e,t){void 0===t&&(t=!0),this.carState=e,this.frontCard.node.scaleX=this.carState==r.Front?1:0,this.backCard.node.scaleX=this.carState==r.Back?1:0,this.canMove=this.carState==r.Front&&t,this.isWildCard()&&this.canMove?(this.RecycleAnimation.play(),this.RecycleAnimation.node.active=!0):(this.RecycleAnimation.node.opacity=0,this.RecycleAnimation.node.active=!1,this.RecycleAnimation.stop()),this.canMove&&this.next&&!o.checkBeNext(this,this.next)&&(this.canMove=!1),this.canMove?(this.frontCard.node.color=cc.Color.WHITE,this.setDefaultPosition()):this.forward&&(this.frontCard.node.color=u.COLOR_GRAY)},t.prototype.isNormal=function(){return this.carState==r.Front&&this.canMove},t.prototype.isFront=function(){return this.carState==r.Front},t.prototype.flipCard=function(e,t,o){var n=this;if(void 0===e&&(e=1),void 0===t&&(t=!0),this.frontCard.node.getNumberOfRunningActions()>0||this.backCard.node.getNumberOfRunningActions()>0)return console.warn("\u7ffb\u9762\u672a\u5b8c\u6210"),void this.flips.push(e);this.carState==r.Back?(this.frontCard.node.runAction(cc.sequence(cc.delayTime(e),cc.scaleTo(e,1,1),cc.callFunc(function(){n.setCardState(r.Front,t),o&&o(),n.flips.length>0&&(n.frontCard.node.stopAllActions(),n.flipCard.call(n,n.flips.pop()))},this))),this.backCard.node.runAction(cc.scaleTo(e,0,1))):(this.backCard.node.runAction(cc.sequence(cc.delayTime(e),cc.scaleTo(e,1,1),cc.callFunc(function(){n.setCardState(r.Back,!1),o&&o(),n.flips.length>0&&(n.backCard.node.stopAllActions(),n.flipCard.call(n,n.flips.pop()))},this))),this.frontCard.node.runAction(cc.scaleTo(e,0,1)))},t.prototype.start=function(){},t.prototype.update=function(e){this.isCycled()||this.isReadyAutoComplete&&(this.isReadyAutoComplete=!this.checkAutoRecycle())},t.prototype.onSetParent=function(e){e&&("RemoveCardNode"==e.name||"RemoveCardNodeBust"==e.name?this.setComplete(!0):(this.setComplete(!1),this.RecycleAnimation.node.opacity<=0&&this.isWildCard()&&!this.complete&&!this.isCycled()&&this.carState==r.Front&&(this.RecycleAnimation.node.opacity=255,this.RecycleAnimation.node.active=!0,this.RecycleAnimation.play())))},t.DebugRecycIndex=0,i([g(cc.Sprite)],t.prototype,"frontCard",void 0),i([g(cc.Sprite)],t.prototype,"backCard",void 0),i([g(cc.SpriteAtlas)],t.prototype,"pokerAtlas",void 0),i([g(cc.Animation)],t.prototype,"RecycleAnimation",void 0),i([g(cc.Animation)],t.prototype,"WildAnimation",void 0),t=o=i([f],t)}(cc.Component);o.default=_,cc._RF.pop()},{"./Pokers":"Pokers","./controller/EventManager":"EventManager","./controller/EventName":"EventName","./controller/Game":"Game"}],RecycleRoot:[function(e,t,o){"use strict";cc._RF.push(t,"bc8dfsy/SxCYZDWNhC7pOvt","RecycleRoot");var n=this&&this.__extends||function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var r=e("./controller/Game"),a=e("./Poker"),c=cc._decorator,s=c.ccclass,l=(c.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.onLoad=function(){this.node.on(cc.Node.EventType.CHILD_ADDED,this.onAddChild,this),this.node.on(cc.Node.EventType.CHILD_REMOVED,this.onChildRemove,this)},t.prototype.onAddChild=function(e){var t=e.getComponent(a.default);t&&t.setNext(null),r.Game.addCycledPokerRoot(parseInt(this.node.name),e)},t.prototype.onChildRemove=function(e){r.Game.addCycledPokerRoot(parseInt(this.node.name),this.node)},t.prototype.start=function(){},t.prototype.update=function(e){},t=i([s],t)}(cc.Component));o.default=l,cc._RF.pop()},{"./Poker":"Poker","./controller/Game":"Game"}],Result:[function(e,t,o){"use strict";cc._RF.push(t,"3d3e694EHtE55kWvZJIadml","Result");var n=this&&this.__extends||function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var r=e("./controller/Game"),a=e("./controller/EventManager"),c=e("./controller/EventName"),s=e("./table"),l=cc._decorator,u=l.ccclass,h=l.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.Score=null,t.TimeBonus=null,t.FinalScore=null,t.ConfirmButton=null,t.Title=null,t.TitleAtlas=null,t.Result=null,t.Light=null,t.Stars=null,t.Stacks=null,t.ClearStackLabel=null,t.CardsUsedLabel=null,t.BustedLabel=null,t.ComboLabel=null,t.Bling=null,t.score=0,t.timeBonus=0,t.finalScore=0,t.scoreStep=0,t.timeBonusStep=0,t.finalScoreStep=0,t.showScore=0,t.scoreComplete=!1,t.timeBonusComplete=!1,t.finalScoreComplete=!1,t.sumbit=!1,t.hasSubmit=!1,t}return n(t,e),Object.defineProperty(t.prototype,"Content",{get:function(){return this.node.getChildByName("Content").getComponent(cc.RichText)},enumerable:!0,configurable:!0}),t.prototype.onLoad=function(){var e=this;this.Content.string=lan.t(s.En_View.JieSuanJieMian,s.En_ID.JieSuanZiTi),console.log(" result layer onload"),r.Game.setPause(!0);var t=0;r.Game.getPlacePokerRoot().forEach(function(e,o){t+=o.childrenCount}),this.BustedLabel.string=(r.Game.removeBustedNode.childrenCount+r.Game.bustCardDeleteCount).toString(),this.CardsUsedLabel.string=(t+r.Game.removeCardNode.childrenCount+r.Game.removeCardDeleteCount).toString(),this.ComboLabel.string=r.Game.getTotalStreak().toString();var o=r.Game.getClearStack();this.ClearStackLabel.string=o.toString();var n=this.Stacks.children;if(o>0){console.log("totalStack: ",o);for(var i=function(e){var t=n[e];t&&(t.active=!0,t.runAction(cc.sequence(cc.scaleTo(0,0,0),cc.delayTime(e/10),cc.scaleTo(.1,.9,.1),cc.scaleTo(.1,.9,.8),cc.callFunc(function(){t.anchorY=0,t.y-=t.height/2,t.children[0].y+=t.height/2},l),cc.scaleTo(.1,1.3,1.3),cc.scaleTo(.1,1.05,1.05),cc.callFunc(function(){t.anchorY=.5,t.y+=t.height/2,t.children[0].y-=t.height/2},l),cc.scaleTo(.1,.86,.86),cc.scaleTo(.1,1,1),cc.callFunc(function(){t.getComponent(cc.Animation).play()},l))))},l=this,u=0;u<o;u++)i(u)}a.gEventMgr.emit(c.GlobalEvent.SMALL_BGM);for(var h=function(e){var t=cc.repeatForever(cc.sequence(cc.fadeIn(CMath.getRandom(.5,1.5)).easing(cc.easeQuadraticActionInOut()),cc.fadeOut(CMath.getRandom(.4,.8)).easing(cc.easeQuadraticActionInOut())));e.opacity=0,setTimeout(function(){e.runAction(t)},1e3*CMath.getRandom(0,.5))},p=0,d=this.Stars.children;p<d.length;p++){h(d[p])}this.Light.active=!0,this.Light.runAction(cc.repeatForever(cc.rotateBy(5,360))),this.Score.string="0",this.TimeBonus.string="0",this.FinalScore.string="0",r.Game.getTimeBonus()>0?r.Game.isBoom()?this.Title.spriteFrame=this.TitleAtlas.getSpriteFrame("out_of_move"):this.Title.spriteFrame=this.TitleAtlas.getSpriteFrame("bg_complete"):r.Game.isBoom()?this.Title.spriteFrame=this.TitleAtlas.getSpriteFrame("out_of_move"):this.Title.spriteFrame=this.TitleAtlas.getSpriteFrame("bg_font03"),this.Result.setEventListener(this.eventListener.bind(this)),this.showScore=Math.max(0,r.Game.getScore()-r.Game.getTimeBonus()),console.log(" result:",r.Game.getScore(),", timeBonus:",r.Game.getTimeBonus(),",showScore:",this.showScore),this.scoreStep=Math.ceil(this.showScore/30),this.timeBonusStep=Math.ceil(r.Game.getTimeBonus()/30),this.finalScoreStep=Math.ceil(r.Game.getScore()/30),a.gEventMgr.emit(c.GlobalEvent.PLAY_OVER_1),a.gEventMgr.emit(c.GlobalEvent.PLAY_OVER_2),this.ConfirmButton.node.on(cc.Node.EventType.TOUCH_END,function(){e.hasSubmit||(e.hasSubmit=!0,console.log(" submit score by click, matchid:",r.Game.MatchInfo.matchId,", seed:",r.Game.MatchInfo.sharedRandomSeed),CELER_X&&celerSDK.submitScore(r.Game.getScore()))},this),a.gEventMgr.on(c.GlobalEvent.RESTART,function(){e.node.removeFromParent()},this)},t.prototype.eventListener=function(e,t){switch(t.stringValue){case"light":this.Light.active=!0,this.Light.runAction(cc.repeatForever(cc.rotateBy(5,360)));break;case"music1":a.gEventMgr.emit(c.GlobalEvent.PLAY_OVER_1);break;case"music2":a.gEventMgr.emit(c.GlobalEvent.PLAY_OVER_2);break;case"bling":this.Bling.node.active=!0,this.Bling.play()}},t.prototype.start=function(){},t.prototype.check=function(){var e=this;this.sumbit||this.scoreComplete&&this.timeBonusComplete&&this.finalScoreComplete&&(this.sumbit=!0,console.log("submit"),this.scheduleOnce(function(){e.hasSubmit||(e.hasSubmit=!0,console.log(" submit score by scheduleOnce, matchid:",r.Game.MatchInfo.matchId,", seed:",r.Game.MatchInfo.sharedRandomSeed),CELER_X&&celerSDK.submitScore(r.Game.getScore()))},2))},t.prototype.update=function(e){this.score<this.showScore?(this.score+=this.scoreStep,this.score=Math.min(this.score,this.showScore),this.Score.string=this.score.toString()):(this.scoreComplete=!0,this.check()),this.timeBonus<r.Game.getTimeBonus()?(this.timeBonus+=this.timeBonusStep,this.timeBonus=Math.min(this.timeBonus,r.Game.getTimeBonus()),this.TimeBonus.string=this.timeBonus.toString()):(this.timeBonusComplete=!0,this.check()),this.finalScore<r.Game.getScore()?(this.finalScore+=this.finalScoreStep,this.finalScore=Math.min(this.finalScore,r.Game.getScore()),this.FinalScore.string=this.finalScore.toString()):(this.finalScoreComplete=!0,this.check())},i([h(cc.Label)],t.prototype,"Score",void 0),i([h(cc.Label)],t.prototype,"TimeBonus",void 0),i([h(cc.Label)],t.prototype,"FinalScore",void 0),i([h(cc.Button)],t.prototype,"ConfirmButton",void 0),i([h(cc.Sprite)],t.prototype,"Title",void 0),i([h(cc.SpriteAtlas)],t.prototype,"TitleAtlas",void 0),i([h(sp.Skeleton)],t.prototype,"Result",void 0),i([h(cc.Node)],t.prototype,"Light",void 0),i([h(cc.Node)],t.prototype,"Stars",void 0),i([h(cc.Node)],t.prototype,"Stacks",void 0),i([h(cc.Label)],t.prototype,"ClearStackLabel",void 0),i([h(cc.Label)],t.prototype,"CardsUsedLabel",void 0),i([h(cc.Label)],t.prototype,"BustedLabel",void 0),i([h(cc.Label)],t.prototype,"ComboLabel",void 0),i([h(cc.Animation)],t.prototype,"Bling",void 0),t=i([u],t)}(cc.Component);o.default=p,cc._RF.pop()},{"./controller/EventManager":"EventManager","./controller/EventName":"EventName","./controller/Game":"Game","./table":"table"}],ScoreLabel:[function(e,t,o){"use strict";cc._RF.push(t,"63782W3hqJOj5tpO+PG+bef","ScoreLabel");var n=this&&this.__extends||function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,a=r.ccclass,c=r.property,s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.Score=null,t}return n(t,e),t.prototype.reuse=function(){this.node.scale=0,this.Score.string=arguments[0][0]},t.prototype.unuse=function(){},t.prototype.onLoad=function(){},t.prototype.start=function(){},i([c(cc.Label)],t.prototype,"Score",void 0),t=i([a],t)}(cc.Component);o.default=s,cc._RF.pop()},{}],ShowIfLevel2:[function(e,t,o){"use strict";cc._RF.push(t,"cb393IP7eRJXpnC6Nu0uQrL","ShowIfLevel2");var n=this&&this.__extends||function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var r=e("./GameSignals"),a=cc._decorator,c=a.ccclass,s=(a.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.onLoad=function(){var e=this;r.DifficultyLevelInitSignal.inst.addListenerOne(function(t){e.node.active=2==t,e.node.runAction(cc.fadeIn(0))},this),this.node.opacity=0},t=i([c],t)}(cc.Component));o.default=s,cc._RF.pop()},{"./GameSignals":"GameSignals"}],Signal:[function(e,t,o){"use strict";cc._RF.push(t,"1b9938BBHZPbansDCGut6AP","Signal");var n=this&&this.__extends||function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();Object.defineProperty(o,"__esModule",{value:!0});var i=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.listenerMap=[],t.onceListenerMap=[],t}return n(t,e),t.prototype.doDispatch=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.excuteListener.apply(this,e),this.excuteOnce.apply(this,e)},t.prototype.excuteListener=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(this.listenerMap&&this.listenerMap.length>0)for(var o=0,n=this.listenerMap;o<n.length;o++){var i=n[o];i.callback.apply(i.target,e)}},t.prototype.excuteOnce=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(this.onceListenerMap&&this.onceListenerMap.length>0){for(var o=0,n=this.onceListenerMap;o<n.length;o++){var i=n[o];i.callback.apply(i.target,e)}this.onceListenerMap.length=0}},t.prototype.listen=function(e,t){this.listenerMap.push({callback:e,target:t})},t.prototype.listenOnce=function(e,t){this.onceListenerMap.push({callback:e,target:t})},t.prototype.removeListener=function(e,t){if(this.listenerMap&&this.listenerMap.length>0)for(var o=0;o<this.listenerMap.length;++o){var n=this.listenerMap[o];n.callback==e&&n.target==t&&(this.listenerMap.splice(o,1),--o)}},t.prototype.removeTarget=function(e){if(this.listenerMap&&this.listenerMap.length>0)for(var t=0;t<this.listenerMap.length;++t){this.listenerMap[t].target==e&&(this.listenerMap.splice(t,1),--t)}},t.prototype.dispatch=function(){this.doDispatch(null)},t.prototype.dispatchOne=function(e){this.doDispatch(e)},t.prototype.dispatchTwo=function(e,t){this.doDispatch(e,t)},t.prototype.dispatchThree=function(e,t,o){this.doDispatch(e,t,o)},t.prototype.dispatchFour=function(e,t,o,n){this.doDispatch(e,t,o,n)},t.prototype.dispatchFive=function(e,t,o,n,i){this.doDispatch(e,t,o,n,i)},t.prototype.addListener=function(e,t){this.listen(e,t)},t.prototype.addOnce=function(e,t){this.listenOnce(e,t)},t.prototype.addListenerOne=function(e,t){this.listen(e,t)},t.prototype.addListenerTwo=function(e,t){this.listen(e,t)},t.prototype.addListenerThree=function(e,t){this.listen(e,t)},t.prototype.addListenerFour=function(e,t){this.listen(e,t)},t.prototype.addListenerFive=function(e,t){this.listen(e,t)},t.prototype.addOnceOne=function(e,t){this.listenOnce(e,t)},t.prototype.addOnceTwo=function(e,t){this.listenOnce(e,t)},t.prototype.addOnceThree=function(e,t){this.listenOnce(e,t)},t.prototype.addOnceFour=function(e,t){this.listenOnce(e,t)},t.prototype.addOnceFive=function(e,t){this.listenOnce(e,t)},t}(e("./ToSingleton").SingleTon());o.BaseSignal=i,cc._RF.pop()},{"./ToSingleton":"ToSingleton"}],SingleTouchMediator:[function(e,t,o){"use strict";cc._RF.push(t,"fea50TTHXxIUpb0Lmy9Dwzq","SingleTouchMediator");var n=this&&this.__extends||function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,a=r.ccclass,c=(r.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.touchid=null,t}return n(t,e),t.prototype.bind=function(e){this.view=e},Object.defineProperty(t.prototype,"View",{get:function(){return console.assert(null!=this.view," view is null"),this.view},enumerable:!0,configurable:!0}),t.prototype.onRegister=function(){this.node.targetOff(this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this.touchCancel,this),this.node.on(cc.Node.EventType.TOUCH_END,this.touchEnd,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this.touchMove,this),this.node.on(cc.Node.EventType.TOUCH_START,this.touchStart,this)},t.prototype.onUnregister=function(){this.node.targetOff(this)},t.prototype.touchStart=function(e){if(null!==this.touchid&&this.touchid!==e.getID())return console.log(this.node.name," touch start  touchid is different: ",this.touchid,e.getID()),void e.stopPropagation();this.touchid=e.getID(),this.onTouchStart(e)},t.prototype.touchMove=function(e){null===this.touchid||this.touchid===e.getID()?(this.touchid=e.getID(),this.onTouchMove(e)):e.stopPropagation()},t.prototype.touchEnd=function(e){if(null!==this.touchid&&this.touchid!==e.getID())return console.log(this.node.name," touch end  touchid is different: ",this.touchid,e.getID()),void e.stopPropagation();null!=this.touchid?(this.touchid=null,this.onTouchEnd(e),this.OnClick()):e.stopPropagation()},t.prototype.touchCancel=function(e){if(null!==this.touchid&&this.touchid!==e.getID())return console.log(this.node.name," touch cancel  touchid is different: ",this.touchid,e.getID()),void e.stopPropagation();null!=this.touchid?(this.touchid=null,this.onTouchCancel(e)):e.stopPropagation()},t.prototype.OnClick=function(){},t.prototype.onTouchStart=function(e){},t.prototype.onTouchMove=function(e){},t.prototype.onTouchEnd=function(e){},t.prototype.onTouchCancel=function(e){},t=i([a],t)}(cc.Component));o.default=c,cc._RF.pop()},{}],SingleTouchView:[function(e,t,o){"use strict";cc._RF.push(t,"65a3da/othC9J1bHX3PiWCw","SingleTouchView");var n=this&&this.__extends||function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var r=e("./BaseView"),a=cc._decorator,c=a.ccclass,s=(a.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.touchid=null,t}return n(t,e),t.prototype.onLoad=function(){this.node.on(cc.Node.EventType.TOUCH_CANCEL,this.touchCancel,this),this.node.on(cc.Node.EventType.TOUCH_END,this.touchEnd,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this.touchMove,this),this.node.on(cc.Node.EventType.TOUCH_START,this.touchStart,this)},t.prototype.start=function(){},t.prototype.touchStart=function(e){null===this.touchid||this.touchid===e.getID()?(this.touchid=e.getID(),this.onTouchStart(e)):console.log(this.node.name," touch start  touchid is different! ")},t.prototype.touchMove=function(e){null!==this.touchid&&this.touchid!==e.getID()||(this.touchid=e.getID(),this.onTouchMove(e))},t.prototype.touchEnd=function(e){null===this.touchid||this.touchid===e.getID()?(this.touchid=null,this.onTouchEnd(e)):console.log(this.node.name," touch end  touchid is different! ")},t.prototype.touchCancel=function(e){null===this.touchid||this.touchid===e.getID()?(this.touchid=null,this.onTouchCancel(e)):console.log(this.node.name," touch cancel  touchid is different! ")},t.prototype.onTouchStart=function(e){},t.prototype.onTouchMove=function(e){},t.prototype.onTouchEnd=function(e){},t.prototype.onTouchCancel=function(e){},t=i([c],t)}(r.default));o.default=s,cc._RF.pop()},{"./BaseView":"BaseView"}],SpecialFont:[function(e,t,o){"use strict";cc._RF.push(t,"d50beoyZGlL6rI9Yfv8RRoD","SpecialFont");var n=this&&this.__extends||function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var r=e("./controller/GameFactory"),a=cc._decorator,c=a.ccclass,s=a.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.Font=null,t.callback=null,t}return n(t,e),t.prototype.reuse=function(){var e=this;this.node.position=arguments[0][1],this.Font.spriteFrame=arguments[0][0],this.callback=arguments[0][2],this.node.scale=0,this.node.opacity=0,this.callback&&this.callback(),arguments[0][3]?(this.node.getComponent(cc.Animation).on(cc.Animation.EventType.FINISHED,function(){r.gFactory.putSpecialFont(e.node)},this),this.node.opacity=255,this.node.scale=1,this.node.getComponent(cc.Animation).play()):this.node.runAction(cc.sequence(cc.fadeIn(0),cc.scaleTo(.2,1.2),cc.scaleTo(.1,.9),cc.scaleTo(.1,1.1),cc.scaleTo(.1,1),cc.delayTime(.2),cc.fadeOut(.1),cc.callFunc(function(){r.gFactory.putSpecialFont(e.node)})))},t.prototype.unuse=function(){},t.prototype.onLoad=function(){},i([s(cc.Sprite)],t.prototype,"Font",void 0),t=i([c],t)}(cc.Component);o.default=l,cc._RF.pop()},{"./controller/GameFactory":"GameFactory"}],SpecialLogic:[function(e,t,o){"use strict";cc._RF.push(t,"e6aabyBVX9MnbE28qWxePAo","SpecialLogic");var n=this&&this.__extends||function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();Object.defineProperty(o,"__esModule",{value:!0});var i=e("../Pokers"),r=e("../utils/ToSingleton"),a=e("./GameRule"),c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.tenCount=0,t}return n(t,e),t.prototype.getRandomPoker=function(){var e=[],t=[],o=i.Pokers.concat(),n=i.Pokers.concat(),r=o.concat(n);for(a.disOrderArray(r);e.length<104&&r.length>0;){var c=r[r.length-1],s=this.getPokerPoint(c);if(this.tenCount>4&&s>=10)for(var l=10;l--&&s>=10;)a.disOrderArray(r),c=r[r.length-1],s=this.getPokerPoint(c);s<10?this.tenCount=0:this.tenCount++,e.push(r.pop()),t.push(s)}return console.log(" points: ",t),e},t.prototype.getPokerPoint=function(e){return parseInt(e.split(",")[1])},t}(r.SingleTon());o.SpecialLogic=c,cc._RF.pop()},{"../Pokers":"Pokers","../utils/ToSingleton":"ToSingleton","./GameRule":"GameRule"}],SpecialResult:[function(e,t,o){"use strict";cc._RF.push(t,"de371tqlkBC0KpNu1XjdQDu","SpecialResult");var n=this&&this.__extends||function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../controller/Game"),a=cc._decorator,c=a.ccclass,s=(a.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),Object.defineProperty(t.prototype,"ClearStackLabel",{get:function(){return this.node.getChildByName("CleardCountLabel").getComponent(cc.Label)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"StackStar",{get:function(){return this.node.getChildByName("21cash-resultcard")},enumerable:!0,configurable:!0}),t.prototype.onLoad=function(){var e=this;console.log(" SpecialResult layer onload"),this.node.active=2==r.Game.MatchInfo.difficultyLevel;var t=r.Game.getClearStack();this.ClearStackLabel.string=t.toString(),t>0&&(this.StackStar.active=!0,this.StackStar.runAction(cc.sequence(cc.scaleTo(0,0,0),cc.delayTime(0),cc.scaleTo(.1,.9,.1),cc.scaleTo(.1,.9,.8),cc.callFunc(function(){e.StackStar.anchorY=0,e.StackStar.y-=e.StackStar.height/2,e.StackStar.children[0].y+=e.StackStar.height/2},this),cc.scaleTo(.1,1.3,1.3),cc.scaleTo(.1,1.05,1.05),cc.callFunc(function(){e.StackStar.anchorY=.5,e.StackStar.y+=e.StackStar.height/2,e.StackStar.children[0].y-=e.StackStar.height/2},this),cc.scaleTo(.1,.86,.86),cc.scaleTo(.1,1,1),cc.callFunc(function(){e.StackStar.getComponent(cc.Animation).play()},this))))},t=i([c],t)}(cc.Component));o.default=s,cc._RF.pop()},{"../controller/Game":"Game"}],SpecialToturial:[function(e,t,o){"use strict";cc._RF.push(t,"f53ffF7+bdOc6zyZf8KspNh","SpecialToturial");var n=this&&this.__extends||function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../utils/Signal"),a=cc._decorator,c=a.ccclass,s=(a.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t}(r.BaseSignal));o.ShowSpecialToturialSignal=s;var l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.callback=null,t}return n(t,e),Object.defineProperty(t.prototype,"Confirm",{get:function(){return this.node.getChildByName("btn_confirm")},enumerable:!0,configurable:!0}),t.prototype.onLoad=function(){this.node.active=!1,s.inst.addListenerOne(this.show,this)},t.prototype.show=function(e){var t=this;this.callback=e,this.Confirm.active=!1,this.Confirm.scale=0,this.node.active=!0,this.node.scale=1,setTimeout(function(){t.Confirm.active=!0,t.Confirm.getComponent(cc.Button).transition=cc.Button.Transition.NONE,t.Confirm.runAction(cc.sequence(cc.scaleTo(.1,1.1),cc.scaleTo(.1,1),cc.callFunc(function(){t.Confirm.getComponent(cc.Button).transition=cc.Button.Transition.SCALE,t.Confirm.once(cc.Node.EventType.TOUCH_END,function(){console.log(" confirm"),t.callback&&t.callback(),setTimeout(function(){t.node.active=!1,t.callback=null},0)},t)},t)))},1e3)},t=i([c],t)}(cc.Component);o.default=l,cc._RF.pop()},{"../utils/Signal":"Signal"}],Stop:[function(e,t,o){"use strict";cc._RF.push(t,"8765cbDuHdBm6FKOUQ5ug79","Stop");var n=this&&this.__extends||function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var r=e("./controller/Game"),a=e("./controller/EventManager"),c=e("./controller/EventName"),s=e("./Guide"),l=e("./AdLayer"),u=e("./table"),h=cc._decorator,p=h.ccclass,d=h.property,f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.EndButton=null,t.ResumeButton=null,t.Help=null,t.Content=null,t.Atlas=null,t.Title=null,t.Guide=null,t.effect=!0,t}return n(t,e),Object.defineProperty(t.prototype,"VolumeSlider",{get:function(){return this.node.getChildByName("VolumeSlider").getComponent(cc.Slider)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Mask",{get:function(){return this.VolumeSlider.node.getChildByName("Mask")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"WarningTitle",{get:function(){return this.node.getChildByName("bg_pause_font").getComponent(cc.Sprite)},enumerable:!0,configurable:!0}),t.prototype.onLoad=function(){var e=this;this.EndButton.node.on(cc.Node.EventType.TOUCH_END,this.endNow,this),this.ResumeButton.node.on(cc.Node.EventType.TOUCH_END,this.Resume,this),this.Help.node.on(cc.Node.EventType.TOUCH_END,this.ShowHelp,this),this.VolumeSlider.node.on("slide",this.onSlider,this),l.HidePauseLayerSignal.inst.addListener(function(){e.hide(!1)},this)},t.prototype.onSlider=function(){cc.audioEngine.setEffectsVolume(this.VolumeSlider.progress),cc.audioEngine.setMusicVolume(this.VolumeSlider.progress),this.updateMask()},t.prototype.endNow=function(){console.log("end now."),a.gEventMgr.emit(c.GlobalEvent.OPEN_RESULT,0)},t.prototype.hide=function(e){void 0===e&&(e=!0),0!=this.node.active&&(this.node.active=!1,e&&r.Game.PauseCount++,this.effect&&a.gEventMgr.emit(c.GlobalEvent.NORMAL_BGM))},t.prototype.updateMask=function(){this.Mask.width=440*this.VolumeSlider.progress},t.prototype.show=function(e,t){void 0===t&&(t=!0),this.node.active||(this.node.active=!0,this.effect=t,t&&(a.gEventMgr.emit(c.GlobalEvent.PLAY_PAUSE),a.gEventMgr.emit(c.GlobalEvent.SMALL_BGM)),this.VolumeSlider.progress=cc.audioEngine.getEffectsVolume(),this.updateContent(),this.updateMask(),e>0?(this.EndButton.node.active=!1,this.ResumeButton.node.x=0):(this.EndButton.node.active=!0,this.ResumeButton.node.x=-215))},t.prototype.updateContent=function(){var e=2-r.Game.PauseCount;this.Content.string=e>0?lan.t(u.En_View.ZanTingJieMian,u.En_ID.MianFeiZanTing,[e.toString(),"1000"]):lan.t(u.En_View.ZanTingJieMian,u.En_ID.KouFenZanTing,["1000"])},t.prototype.ShowHelp=function(){this.Guide.show(function(){})},t.prototype.Resume=function(){this.hide()},t.prototype.start=function(){},i([d(cc.Button)],t.prototype,"EndButton",void 0),i([d(cc.Button)],t.prototype,"ResumeButton",void 0),i([d(cc.Button)],t.prototype,"Help",void 0),i([d(cc.RichText)],t.prototype,"Content",void 0),i([d(cc.SpriteAtlas)],t.prototype,"Atlas",void 0),i([d(cc.Sprite)],t.prototype,"Title",void 0),i([d(s.default)],t.prototype,"Guide",void 0),t=i([p],t)}(cc.Component);o.default=f,cc._RF.pop()},{"./AdLayer":"AdLayer","./Guide":"Guide","./controller/EventManager":"EventManager","./controller/EventName":"EventName","./controller/Game":"Game","./table":"table"}],TableManager:[function(e,t,o){"use strict";cc._RF.push(t,"7d017TYQ5hHgr/N6u4RF61n","TableManager"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function e(){this.load=e.JSON_URL&&""!=e.JSON_URL?cc.loader.load.bind(cc.loader):cc.loader.loadRes.bind(cc.loader),this.fileFormat=e.JSON_URL&&""!=e.JSON_URL?".json?time="+Date.now():"",this.total=0,this.complete=0,this.En={},this.Es={},this.Fil={},this.Id={},this.In={},this.Pt={},this.Tl={}}return Object.defineProperty(e,"inst",{get:function(){return this.ins?this.ins:this.ins=new e},enumerable:!0,configurable:!0}),e.prototype.startLoad=function(t,o,n){this.completeCallback=o,this.progressCallback=n;var i=this;console.log("Base URL:",e.JSON_URL),this.load(e.JSON_URL+t.trim().split("/").join("")+"/file_list"+this.fileFormat,function(e,o){if(e)console.error(e.errorMessage);else{var n="Array"==o.constructor.name?o:o.json;this.total=n.length;for(var r=0,a=n;r<a.length;r++){var c=a[r];i.loadJson(t.trim().split("/").join("")+"/"+c.replace(".json",""))}}}.bind(this))},e.prototype.loadJson=function(t){console.log("start load:"+t);var o=this,n=t.split("/")[1];n=n.charAt(0).toUpperCase()+n.slice(1,n.length),this.load(e.JSON_URL+t+this.fileFormat,function(e,t){if(e)console.error(e.errorMessage);else{for(var i=0,r="Array"==t.constructor.name?t:t.json;i<r.length;i++){var a=r[i];o[n][a.ID]=a}o.completeLoad()}}.bind(this))},e.prototype.completeLoad=function(){this.complete++,this.progressCallback&&this.progressCallback(this.complete/this.total),this.complete>=this.total&&this.completeCallback&&this.completeCallback()},e.prototype.getEn=function(e){return this.En[e]?this.En[e]:(console.error("En \u4e0d\u5b58key\uff1a"+e),null)},e.prototype.getAll_En_Data=function(){return this.En},e.prototype.getEs=function(e){return this.Es[e]?this.Es[e]:(console.error("Es \u4e0d\u5b58key\uff1a"+e),null)},e.prototype.getAll_Es_Data=function(){return this.Es},e.prototype.getFil=function(e){return this.Fil[e]?this.Fil[e]:(console.error("Fil \u4e0d\u5b58key\uff1a"+e),null)},e.prototype.getAll_Fil_Data=function(){return this.Fil},e.prototype.getId=function(e){return this.Id[e]?this.Id[e]:(console.error("Id \u4e0d\u5b58key\uff1a"+e),null)},e.prototype.getAll_Id_Data=function(){return this.Id},e.prototype.getIn=function(e){return this.In[e]?this.In[e]:(console.error("In \u4e0d\u5b58key\uff1a"+e),null)},e.prototype.getAll_In_Data=function(){return this.In},e.prototype.getPt=function(e){return this.Pt[e]?this.Pt[e]:(console.error("Pt \u4e0d\u5b58key\uff1a"+e),null)},e.prototype.getAll_Pt_Data=function(){return this.Pt},e.prototype.getTl=function(e){return this.Tl[e]?this.Tl[e]:(console.error("Tl \u4e0d\u5b58key\uff1a"+e),null)},e.prototype.getAll_Tl_Data=function(){return this.Tl},e.JSON_URL="",e}();o.TableManager=n,cc._RF.pop()},{}],TimeLabel:[function(e,t,o){"use strict";cc._RF.push(t,"17b817VwfJAX4xsnDs7YW7C","TimeLabel");var n=this&&this.__extends||function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var r=e("./GameSignals"),a=cc._decorator,c=a.ccclass,s=(a.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.onLoad=function(){var e=this;this.node.active=!1,r.DifficultyLevelInitSignal.inst.addListener(function(){e.node.active=!0},this)},t=i([c],t)}(cc.Component));o.default=s,cc._RF.pop()},{"./GameSignals":"GameSignals"}],ToSingleton:[function(e,t,o){"use strict";cc._RF.push(t,"e6ce2jc5hpIXaHrpw1LcAnh","ToSingleton"),Object.defineProperty(o,"__esModule",{value:!0}),o.SingleTon=function(){return function(){function e(){}return Object.defineProperty(e,"inst",{get:function(){return this.ins?this.ins:this.ins=new this},enumerable:!0,configurable:!0}),e}()},cc._RF.pop()},{}],WildAdAnimation:[function(e,t,o){"use strict";cc._RF.push(t,"c34ccdAijNNFoOUq5nMWFfT","WildAdAnimation");var n=this&&this.__extends||function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../utils/FrameAniBase"),a=e("../utils/Signal"),c=cc._decorator,s=c.ccclass,l=(c.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t}(a.BaseSignal));o.WildAdAnimationIsPlaySignal=l;var u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.isStart=!1,t}return n(t,e),t.prototype.onStartPlay=function(){var e=this;l.inst.dispatchOne(!0),0==this.isStart&&(this.isStart=!0,setTimeout(function(){e.isStart=!1,e.stop(),e.node.opacity=0,l.inst.dispatchOne(!1),setTimeout(function(){e.node.opacity=255,e.Loop=!0,e.play()},8e3)},2e3))},t.prototype.onComplete=function(){},t=i([s],t)}(r.default);o.default=u,cc._RF.pop()},{"../utils/FrameAniBase":"FrameAniBase","../utils/Signal":"Signal"}],WildAdButton:[function(e,t,o){"use strict";cc._RF.push(t,"f7d29FIK79GWYi6U+RyOf1Y","WildAdButton");var n=this&&this.__extends||function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var r=e("./Animation/WildAdAnimation"),a=e("./utils/Signal"),c=cc._decorator,s=c.ccclass,l=(c.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t}(a.BaseSignal));o.HideWildAdButtonSignal=l;var u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t}(a.BaseSignal);o.WildAdButtonClick=u;var h=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t}(a.BaseSignal);o.WildButtonReadySignal=h;var p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.defaultScale=1,t}return n(t,e),t.prototype.onLoad=function(){var e=this;this.node.active=cc.sys.isMobile&&cc.sys.isBrowser&&cc.sys.os==cc.sys.OS_ANDROID,this.node.scale=0,h.inst.addOnce(function(){console.log(" Wild button :",e.node.active),e.node.active&&(e.node.getComponent(cc.Button).transition=cc.Button.Transition.NONE,e.node.runAction(cc.sequence(cc.scaleTo(.1,e.defaultScale),cc.callFunc(function(){e.initial()}))))},this),l.inst.addListener(function(){e.node.active=!1},this)},t.prototype.initial=function(){var e=this;this.node.getComponent(cc.Button).transition=cc.Button.Transition.SCALE,this.node.on(cc.Node.EventType.TOUCH_END,function(){u.inst.dispatch()},this),r.WildAdAnimationIsPlaySignal.inst.addListenerOne(function(t){t?e.node.runAction(cc.repeatForever(cc.sequence(cc.scaleTo(.05*3,1.2),cc.scaleTo(.05*3,1)))):(e.node.stopAllActions(),e.node.scale=e.defaultScale)},this)},t=i([s],t)}(cc.Component);o.default=p,cc._RF.pop()},{"./Animation/WildAdAnimation":"WildAdAnimation","./utils/Signal":"Signal"}],table:[function(e,t,o){"use strict";cc._RF.push(t,"26cf5mDoFZL9Jtv9PF0Mf0d","table"),Object.defineProperty(o,"__esModule",{value:!0}),function(e){e[e.MianFeiZanTing=1]="MianFeiZanTing",e[e.KouFenZanTing=2]="KouFenZanTing",e[e.XinShouZhiYin1=3]="XinShouZhiYin1",e[e.XinShouZhiYin2=4]="XinShouZhiYin2",e[e.XinShouZhiYin3=5]="XinShouZhiYin3",e[e.XinShouZhiYin4=6]="XinShouZhiYin4",e[e.XinShouZhiYin5=7]="XinShouZhiYin5",e[e.XinShouZhiYin6=8]="XinShouZhiYin6",e[e.XinShouZhiYin7=9]="XinShouZhiYin7",e[e.XinShouZhiYin8=10]="XinShouZhiYin8",e[e.BangZhuJieMian1=11]="BangZhuJieMian1",e[e.BangZhuJieMian2=12]="BangZhuJieMian2",e[e.BangZhuJieMian3=13]="BangZhuJieMian3",e[e.BangZhuJieMian4=14]="BangZhuJieMian4",e[e.BangZhuJieMian5=15]="BangZhuJieMian5",e[e.BangZhuJieMian6=16]="BangZhuJieMian6",e[e.MianFeiYePai=17]="MianFeiYePai",e[e.GuanKanGuangGaoShiBai=18]="GuanKanGuangGaoShiBai",e[e.JieSuanZiTi=19]="JieSuanZiTi"}(o.En_ID||(o.En_ID={})),function(e){e[e.ZanTingJieMian=1]="ZanTingJieMian",e[e.BangZhuJieMian=2]="BangZhuJieMian",e[e.XinShouZhiYin=3]="XinShouZhiYin",e[e.GuangGaoJieMian=4]="GuangGaoJieMian",e[e.JieSuanJieMian=5]="JieSuanJieMian"}(o.En_View||(o.En_View={})),function(e){e[e.MianFeiZanTing=1]="MianFeiZanTing",e[e.KouFenZanTing=2]="KouFenZanTing",e[e.XinShouZhiYin1=3]="XinShouZhiYin1",e[e.XinShouZhiYin2=4]="XinShouZhiYin2",e[e.XinShouZhiYin3=5]="XinShouZhiYin3",e[e.XinShouZhiYin4=6]="XinShouZhiYin4",e[e.XinShouZhiYin5=7]="XinShouZhiYin5",e[e.XinShouZhiYin6=8]="XinShouZhiYin6",e[e.XinShouZhiYin7=9]="XinShouZhiYin7",e[e.XinShouZhiYin8=10]="XinShouZhiYin8",e[e.BangZhuJieMian1=11]="BangZhuJieMian1",e[e.BangZhuJieMian2=12]="BangZhuJieMian2",e[e.BangZhuJieMian3=13]="BangZhuJieMian3",e[e.BangZhuJieMian4=14]="BangZhuJieMian4",e[e.BangZhuJieMian5=15]="BangZhuJieMian5",e[e.BangZhuJieMian6=16]="BangZhuJieMian6",e[e.MianFeiYePai=17]="MianFeiYePai",e[e.GuanKanGuangGaoShiBai=18]="GuanKanGuangGaoShiBai",e[e.JieSuanZiTi=19]="JieSuanZiTi"}(o.Es_ID||(o.Es_ID={})),function(e){e[e.ZanTingJieMian=1]="ZanTingJieMian",e[e.BangZhuJieMian=2]="BangZhuJieMian",e[e.XinShouZhiYin=3]="XinShouZhiYin",e[e.GuangGaoJieMian=4]="GuangGaoJieMian",e[e.JieSuanJieMian=5]="JieSuanJieMian"}(o.Es_View||(o.Es_View={})),function(e){e[e.MianFeiZanTing=1]="MianFeiZanTing",e[e.KouFenZanTing=2]="KouFenZanTing",e[e.XinShouZhiYin1=3]="XinShouZhiYin1",e[e.XinShouZhiYin2=4]="XinShouZhiYin2",e[e.XinShouZhiYin3=5]="XinShouZhiYin3",e[e.XinShouZhiYin4=6]="XinShouZhiYin4",e[e.XinShouZhiYin5=7]="XinShouZhiYin5",e[e.XinShouZhiYin6=8]="XinShouZhiYin6",e[e.XinShouZhiYin7=9]="XinShouZhiYin7",e[e.XinShouZhiYin8=10]="XinShouZhiYin8",e[e.BangZhuJieMian1=11]="BangZhuJieMian1",e[e.BangZhuJieMian2=12]="BangZhuJieMian2",e[e.BangZhuJieMian3=13]="BangZhuJieMian3",e[e.BangZhuJieMian4=14]="BangZhuJieMian4",e[e.BangZhuJieMian5=15]="BangZhuJieMian5",e[e.BangZhuJieMian6=16]="BangZhuJieMian6",e[e.MianFeiYePai=17]="MianFeiYePai",e[e.GuanKanGuangGaoShiBai=18]="GuanKanGuangGaoShiBai",e[e.JieSuanZiTi=19]="JieSuanZiTi"}(o.Fil_ID||(o.Fil_ID={})),function(e){e[e.ZanTingJieMian=1]="ZanTingJieMian",e[e.BangZhuJieMian=2]="BangZhuJieMian",e[e.XinShouZhiYin=3]="XinShouZhiYin",e[e.GuangGaoJieMian=4]="GuangGaoJieMian",e[e.JieSuanJieMian=5]="JieSuanJieMian"}(o.Fil_View||(o.Fil_View={})),function(e){e[e.MianFeiZanTing=1]="MianFeiZanTing",e[e.KouFenZanTing=2]="KouFenZanTing",e[e.XinShouZhiYin1=3]="XinShouZhiYin1",e[e.XinShouZhiYin2=4]="XinShouZhiYin2",e[e.XinShouZhiYin3=5]="XinShouZhiYin3",e[e.XinShouZhiYin4=6]="XinShouZhiYin4",e[e.XinShouZhiYin5=7]="XinShouZhiYin5",e[e.XinShouZhiYin6=8]="XinShouZhiYin6",e[e.XinShouZhiYin7=9]="XinShouZhiYin7",e[e.XinShouZhiYin8=10]="XinShouZhiYin8",e[e.BangZhuJieMian1=11]="BangZhuJieMian1",e[e.BangZhuJieMian2=12]="BangZhuJieMian2",e[e.BangZhuJieMian3=13]="BangZhuJieMian3",e[e.BangZhuJieMian4=14]="BangZhuJieMian4",e[e.BangZhuJieMian5=15]="BangZhuJieMian5",e[e.BangZhuJieMian6=16]="BangZhuJieMian6",e[e.MianFeiYePai=17]="MianFeiYePai",e[e.GuanKanGuangGaoShiBai=18]="GuanKanGuangGaoShiBai",e[e.JieSuanZiTi=19]="JieSuanZiTi"}(o.Id_ID||(o.Id_ID={})),function(e){e[e.ZanTingJieMian=1]="ZanTingJieMian",e[e.BangZhuJieMian=2]="BangZhuJieMian",e[e.XinShouZhiYin=3]="XinShouZhiYin",e[e.GuangGaoJieMian=4]="GuangGaoJieMian",e[e.JieSuanJieMian=5]="JieSuanJieMian"}(o.Id_View||(o.Id_View={})),function(e){e[e.MianFeiZanTing=1]="MianFeiZanTing",e[e.KouFenZanTing=2]="KouFenZanTing",e[e.XinShouZhiYin1=3]="XinShouZhiYin1",e[e.XinShouZhiYin2=4]="XinShouZhiYin2",e[e.XinShouZhiYin3=5]="XinShouZhiYin3",e[e.XinShouZhiYin4=6]="XinShouZhiYin4",e[e.XinShouZhiYin5=7]="XinShouZhiYin5",e[e.XinShouZhiYin6=8]="XinShouZhiYin6",e[e.XinShouZhiYin7=9]="XinShouZhiYin7",e[e.XinShouZhiYin8=10]="XinShouZhiYin8",e[e.BangZhuJieMian1=11]="BangZhuJieMian1",e[e.BangZhuJieMian2=12]="BangZhuJieMian2",e[e.BangZhuJieMian3=13]="BangZhuJieMian3",e[e.BangZhuJieMian4=14]="BangZhuJieMian4",e[e.BangZhuJieMian5=15]="BangZhuJieMian5",e[e.BangZhuJieMian6=16]="BangZhuJieMian6",e[e.MianFeiYePai=17]="MianFeiYePai",e[e.GuanKanGuangGaoShiBai=18]="GuanKanGuangGaoShiBai",e[e.JieSuanZiTi=19]="JieSuanZiTi"}(o.In_ID||(o.In_ID={})),function(e){e[e.ZanTingJieMian=1]="ZanTingJieMian",e[e.BangZhuJieMian=2]="BangZhuJieMian",e[e.XinShouZhiYin=3]="XinShouZhiYin",e[e.GuangGaoJieMian=4]="GuangGaoJieMian",e[e.JieSuanJieMian=5]="JieSuanJieMian"}(o.In_View||(o.In_View={})),function(e){e[e.MianFeiZanTing=1]="MianFeiZanTing",e[e.KouFenZanTing=2]="KouFenZanTing",e[e.XinShouZhiYin1=3]="XinShouZhiYin1",e[e.XinShouZhiYin2=4]="XinShouZhiYin2",e[e.XinShouZhiYin3=5]="XinShouZhiYin3",e[e.XinShouZhiYin4=6]="XinShouZhiYin4",e[e.XinShouZhiYin5=7]="XinShouZhiYin5",e[e.XinShouZhiYin6=8]="XinShouZhiYin6",e[e.XinShouZhiYin7=9]="XinShouZhiYin7",e[e.XinShouZhiYin8=10]="XinShouZhiYin8",e[e.BangZhuJieMian1=11]="BangZhuJieMian1",e[e.BangZhuJieMian2=12]="BangZhuJieMian2",e[e.BangZhuJieMian3=13]="BangZhuJieMian3",e[e.BangZhuJieMian4=14]="BangZhuJieMian4",e[e.BangZhuJieMian5=15]="BangZhuJieMian5",e[e.BangZhuJieMian6=16]="BangZhuJieMian6",e[e.MianFeiYePai=17]="MianFeiYePai",e[e.GuanKanGuangGaoShiBai=18]="GuanKanGuangGaoShiBai",e[e.JieSuanZiTi=19]="JieSuanZiTi"}(o.Pt_ID||(o.Pt_ID={})),function(e){e[e.ZanTingJieMian=1]="ZanTingJieMian",e[e.BangZhuJieMian=2]="BangZhuJieMian",e[e.XinShouZhiYin=3]="XinShouZhiYin",e[e.GuangGaoJieMian=4]="GuangGaoJieMian",e[e.JieSuanJieMian=5]="JieSuanJieMian"}(o.Pt_View||(o.Pt_View={})),function(e){e[e.MianFeiZanTing=1]="MianFeiZanTing",e[e.KouFenZanTing=2]="KouFenZanTing",e[e.XinShouZhiYin1=3]="XinShouZhiYin1",e[e.XinShouZhiYin2=4]="XinShouZhiYin2",e[e.XinShouZhiYin3=5]="XinShouZhiYin3",e[e.XinShouZhiYin4=6]="XinShouZhiYin4",e[e.XinShouZhiYin5=7]="XinShouZhiYin5",e[e.XinShouZhiYin6=8]="XinShouZhiYin6",e[e.XinShouZhiYin7=9]="XinShouZhiYin7",e[e.XinShouZhiYin8=10]="XinShouZhiYin8",e[e.BangZhuJieMian1=11]="BangZhuJieMian1",e[e.BangZhuJieMian2=12]="BangZhuJieMian2",e[e.BangZhuJieMian3=13]="BangZhuJieMian3",e[e.BangZhuJieMian4=14]="BangZhuJieMian4",e[e.BangZhuJieMian5=15]="BangZhuJieMian5",e[e.BangZhuJieMian6=16]="BangZhuJieMian6",e[e.MianFeiYePai=17]="MianFeiYePai",e[e.GuanKanGuangGaoShiBai=18]="GuanKanGuangGaoShiBai",e[e.JieSuanZiTi=19]="JieSuanZiTi"}(o.Tl_ID||(o.Tl_ID={})),function(e){e[e.ZanTingJieMian=1]="ZanTingJieMian",e[e.BangZhuJieMian=2]="BangZhuJieMian",e[e.XinShouZhiYin=3]="XinShouZhiYin",e[e.GuangGaoJieMian=4]="GuangGaoJieMian",e[e.JieSuanJieMian=5]="JieSuanJieMian"}(o.Tl_View||(o.Tl_View={})),cc._RF.pop()},{}]},{},["AdLayer","WildAdAnimation","GameScene","Guide","HelpLabelPage","Poker","PokerRoot","Pokers","RecycleRoot","Result","ScoreLabel","SpecialFont","BustRoot","GameRule","GameSignals","HelpPage","HideIfLevel2","PokerRemoveNode","ShowIfLevel2","SpecialLogic","SpecialResult","SpecialToturial","TimeLabel","Stop","TableManager","BaseMediator","BaseView","GlobalSingleTouchMediator","GlobalSingleTouchView","SingleTouchMediator","SingleTouchView","WildAdButton","AdController","AudioController","EventManager","EventName","Game","GameFactory","table","FrameAniBase","HashMap","LogHandler","Signal","ToSingleton"]);