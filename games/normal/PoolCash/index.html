<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />

    <title>Cocos Creator | celer-game-3d</title>

    <!--http://www.html5rocks.com/en/mobile/mobifying/-->
    <meta
      name="viewport"
      content="width=device-width,user-scalable=no,initial-scale=1,minimum-scale=1,maximum-scale=1,minimal-ui=true"
    />

    <!--https://developer.apple.com/library/safari/documentation/AppleApplications/Reference/SafariHTMLRef/Articles/MetaTags.html-->
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta
      name="apple-mobile-web-app-status-bar-style"
      content="black-translucent"
    />
    <meta name="format-detection" content="telephone=no" />

    <!-- force webkit on 360 -->
    <meta name="renderer" content="webkit" />
    <meta name="force-rendering" content="webkit" />
    <!-- force edge on IE -->
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="msapplication-tap-highlight" content="no" />

    <!-- force full screen on some browser -->
    <meta name="full-screen" content="yes" />
    <meta name="x5-fullscreen" content="true" />
    <meta name="360-fullscreen" content="true" />

    <!-- force screen orientation on some browser -->
    <meta name="screen-orientation" content="auto" />
    <meta name="x5-orientation" content="auto" />

    <!--fix fireball/issues/3568 -->
    <!--<meta name="browsermode" content="application">-->
    <meta name="x5-page-mode" content="app" />

    <!--<link rel="apple-touch-icon" href=".png" />-->
    <!--<link rel="apple-touch-icon-precomposed" href=".png" />-->

    <link rel="stylesheet" type="text/css" href="style.e95c2.css" />
  </head>
  <body>
    <canvas
      id="GameCanvas"
      oncontextmenu="event.preventDefault()"
      tabindex="0"
    ></canvas>
    
    <script>
      var bridge = {
  default: this,
  call: function (b, a, c) {
    var e = "";
    "function" == typeof a && ((c = a), (a = {}));
    a = {
      data: void 0 === a ? null : a,
    };
    if ("function" == typeof c) {
      var g = "dscb" + window.dscb++;
      window[g] = c;
      a._dscbstub = g;
    }
    a = JSON.stringify(a);
    if (window._dsbridge) e = _dsbridge.call(b, a);
    else if (window._dswk || -1 != navigator.userAgent.indexOf("_dsbridge"))
      e = prompt("_dsbridge=" + b, a);
    return JSON.parse(e || "{}").data;
  },
  register: function (b, a, c) {
    c = c ? window._dsaf : window._dsf;
    window._dsInit ||
      ((window._dsInit = !0),
      setTimeout(function () {
        bridge.call("_dsb.dsinit");
      }, 0));
    "object" == typeof a ? (c._obs[b] = a) : (c[b] = a);
  },
  registerAsyn: function (b, a) {
    this.register(b, a, !0);
  },
  hasNativeMethod: function (b, a) {
    return this.call("_dsb.hasNativeMethod", {
      name: b,
      type: a || "all",
    });
  },
  disableJavascriptDialogBlock: function (b) {
    this.call("_dsb.disableJavascriptDialogBlock", {
      disable: !1 !== b,
    });
  },
};
!(function () {
  if (!window._dsf) {
    var b = {
        _dsf: {
          _obs: {},
        },
        _dsaf: {
          _obs: {},
        },
        dscb: 0,
        celerx: bridge,
        close: function () {
          bridge.call("_dsb.closePage");
        },
        _handleMessageFromNative: function (a) {
          var e = JSON.parse(a.data),
            b = {
              id: a.callbackId,
              complete: !0,
            },
            c = this._dsf[a.method],
            d = this._dsaf[a.method],
            h = function (a, c) {
              b.data = a.apply(c, e);
              bridge.call("_dsb.returnValue", b);
            },
            k = function (a, c) {
              e.push(function (a, c) {
                b.data = a;
                b.complete = !1 !== c;
                bridge.call("_dsb.returnValue", b);
              });
              a.apply(c, e);
            };
          if (c) h(c, this._dsf);
          else if (d) k(d, this._dsaf);
          else if (((c = a.method.split(".")), !(2 > c.length))) {
            a = c.pop();
            var c = c.join("."),
              d = this._dsf._obs,
              d = d[c] || {},
              f = d[a];
            f && "function" == typeof f
              ? h(f, d)
              : ((d = this._dsaf._obs),
                (d = d[c] || {}),
                (f = d[a]) && "function" == typeof f && k(f, d));
          }
        },
      },
      a;
    for (a in b) window[a] = b[a];
    bridge.register("_hasJavascriptMethod", function (a, b) {
      b = a.split(".");
      if (2 > b.length) return !(!_dsf[b] && !_dsaf[b]);
      a = b.pop();
      b = b.join(".");
      return (b = _dsf._obs[b] || _dsaf._obs[b]) && !!b[a];
    });
  }
})();

var base64_chars =
  "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";
function binary_to_base64(arr) {
  var input = new Uint8Array(arr);
  var ret = new Array();
  var i = 0;
  var j = 0;
  var char_array_3 = new Array(3);
  var char_array_4 = new Array(4);
  var in_len = input.length;
  var pos = 0;

  while (in_len--) {
    char_array_3[i++] = input[pos++];
    if (i == 3) {
      char_array_4[0] = (char_array_3[0] & 0xfc) >> 2;
      char_array_4[1] =
        ((char_array_3[0] & 0x03) << 4) + ((char_array_3[1] & 0xf0) >> 4);
      char_array_4[2] =
        ((char_array_3[1] & 0x0f) << 2) + ((char_array_3[2] & 0xc0) >> 6);
      char_array_4[3] = char_array_3[2] & 0x3f;

      for (i = 0; i < 4; i++) ret += base64_chars.charAt(char_array_4[i]);
      i = 0;
    }
  }

  if (i) {
    for (j = i; j < 3; j++) char_array_3[j] = 0;

    char_array_4[0] = (char_array_3[0] & 0xfc) >> 2;
    char_array_4[1] =
      ((char_array_3[0] & 0x03) << 4) + ((char_array_3[1] & 0xf0) >> 4);
    char_array_4[2] =
      ((char_array_3[1] & 0x0f) << 2) + ((char_array_3[2] & 0xc0) >> 6);
    char_array_4[3] = char_array_3[2] & 0x3f;

    for (j = 0; j < i + 1; j++) ret += base64_chars.charAt(char_array_4[j]);

    while (i++ < 3) ret += "=";
  }

  return ret;
}

var hD = "0123456789ABCDEF";
function dec2hex(d) {
  var h = hD.substr(d & 15, 1);
  while (d > 15) {
    d >>= 4;
    h = hD.substr(d & 15, 1) + h;
  }
  return h;
}

var keyStr =
  "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";
function base64_decode(input) {
  var output = new Array();
  var chr1, chr2, chr3;
  var enc1, enc2, enc3, enc4;
  var i = 0;

  var orig_input = input;
  input = input.replace(/[^A-Za-z0-9\+\/\=]/g, "");
  if (orig_input != input)
    alert("Warning! Characters outside Base64 range in input string ignored.");
  if (input.length % 4) {
    alert("Error: Input length is not a multiple of 4 bytes.");
    return "";
  }

  var j = 0;
  while (i < input.length) {
    enc1 = keyStr.indexOf(input.charAt(i++));
    enc2 = keyStr.indexOf(input.charAt(i++));
    enc3 = keyStr.indexOf(input.charAt(i++));
    enc4 = keyStr.indexOf(input.charAt(i++));

    chr1 = (enc1 << 2) | (enc2 >> 4);
    chr2 = ((enc2 & 15) << 4) | (enc3 >> 2);
    chr3 = ((enc3 & 3) << 6) | enc4;

    output[j++] = chr1;
    if (enc3 != 64) output[j++] = chr2;
    if (enc4 != 64) output[j++] = chr3;
  }
  return output;
}

var provideScore = {
  callback: function () {
    return "";
  },
};

var provideCurrentFrameData = {
  callback: function () {
    return "";
  },
};

var onResume = {
  callback: function () {
    return "";
  },
};

var onPause = {
  callback: function () {
    return "";
  },
};

bridge.register("provideScore", function () {
  return provideScore.callback();
});

bridge.register("provideCurrentFrameData", function () {
  return provideCurrentFrameData.callback();
});

bridge.register("onPause", function () {
  return onResume.callback();
});

bridge.register("onResume", function () {
  return onPause.callback();
});window["celerSDK"] = {
  onStateReceived: function (callback) {
    return bridge.register("onStateReceived", function (base64) {
      var output = base64_decode(base64);
      return callback(new Uint8Array(output));
    });
  },
  onCourtModeStarted: function (callback) {
    return bridge.register("onCourtModeStarted", callback);
  },
  getMatch: function () {
    var result = bridge.call("getMatch", "123");
    try {
      result = JSON.parse(result);
    } catch (error) {}
    return result;
  },
  showCourtModeDialog: function () {
    return bridge.call("showCourtModeDialog");
  },
  start: function () {
    return bridge.call("start");
  },
  sendState: function (arr) {
    return bridge.call("sendState", binary_to_base64(arr));
  },
  draw: function (arr) {
    return bridge.call("draw", binary_to_base64(arr));
  },
  win: function (arr) {
    return bridge.call("win", binary_to_base64(arr));
  },
  lose: function (arr) {
    return bridge.call("lose", binary_to_base64(arr));
  },
  surrender: function (arr) {
    return bridge.call("surrender", binary_to_base64(arr));
  },
  applyAction: function (arr, callback) {
    return bridge.call("applyAction", binary_to_base64(arr), callback);
  },
  getOnChainState: function (callback) {
    return bridge.call("getOnChainState", "123", function (base64) {
      var output = base64_decode(base64);
      return callback(new Uint8Array(output));
    });
  },
  getOnChainActionDeadline: function (callback) {
    return bridge.call("getOnChainActionDeadline", "123", callback);
  },
  getCurrentBlockNumber: function () {
    return bridge.call("getCurrentBlockNumber", "123");
  },
  finalizeOnChainGame: function (callback) {
    return bridge.call("finalizeOnChainGame", "123", callback);
  },

  submitScore: function (score) {
    return bridge.call("submitScore", score);
  },

  ready: function () {
    if (window.cc) {
      var takeImage = false;
      var canvas = document.getElementsByTagName("canvas")[0];
      cc.director.on(cc.Director.EVENT_AFTER_DRAW, function () {
        if (takeImage) {
          takeImage = false;
          celerSDK.didTakeSnapshot(canvas.toDataURL("image/jpeg", 0.1));
        }
      });
      celerSDK.provideCurrentFrameData(function () {
        takeImage = true;
      });
    }
    return bridge.call("ready");
  },

  onStart: function (callback) {
    return bridge.register("onStart", callback);
  },
  provideScore: function (callback) {
    return (provideScore = { callback: callback });
  },
  provideCurrentFrameData: function (callback) {
    return (provideCurrentFrameData = { callback: callback });
  },

  didTakeSnapshot: function (e) {
    if (
      window["webkit"] &&
      window["webkit"].messageHandlers &&
      window["webkit"].messageHandlers["celerSDK"] &&
      window["webkit"].messageHandlers["celerSDK"].postMessage
    ) {
      window["webkit"].messageHandlers["celerSDK"].postMessage({
        method: "didTakeSnapshot",
        args: e,
      });
    } else {
      return bridge.call("didTakeSnapshot", e);
    }
  },

  log: function (e) {
    if (
      window["webkit"] &&
      window["webkit"].messageHandlers &&
      window["webkit"].messageHandlers["celerSDK"] &&
      window.webkit.messageHandlers["celerSDK"].postMessage
    ) {
      window.webkit.messageHandlers["celerSDK"].postMessage({
        method: "log",
        args: e,
      });
    } else {
      return bridge.call("log", e);
    }
  },

  getGameScore: function () {
    if (!provideScore || !provideScore.callback) {
      return 0;
    }
    return provideScore.callback();
  },

  switchSnapShotFlag: function () {
    if (!provideCurrentFrameData || !provideCurrentFrameData.callback) {
      return 0;
    }
    return provideCurrentFrameData.callback();
  },

  onAdPlayFinished: function (callback) {
    AdPlayFinished = { callback: callback };
  },

  onAdPlayFailed: function (callback) {
    AdPlayFailed = { callback: callback };
  },

  hasMethod(methodName) {
    return bridge.hasNativeMethod(methodName);
  },

  showAd: function (sequenceId) {
    return bridge.call("showAd", sequenceId);
  },

  triggerOnAdPlayFinishedInGame: function (sequenceId) {
    if (!AdPlayFinished || !AdPlayFinished.callback) {
      return 0;
    }

    return AdPlayFinished.callback(sequenceId);
  },

  triggerOnAdPlayFailedInGame: function (sequenceId) {
    if (!AdPlayFailed || !AdPlayFailed.callback) {
      return 0;
    }

    return AdPlayFailed.callback(sequenceId);
  },

  onResume: function (callback) {
    return (onResume = { callback: callback });
  },

  onPause: function (callback) {
    return (onPause = { callback: callback });
  },

  triggerOnResumeInGame: function () {
    if (!onResume || !onResume.callback) {
      return 0;
    }
    return onResume.callback();
  },

  triggerOnPauseInGame: function () {
    if (!onPause || !onPause.callback) {
      return 0;
    }
    return onPause.callback();
  },
};

window.MENU_SCENE = false;
window.CELER_X = true; 
window.SPINE_VERSION = 3.8;window.GAME_VERSION = 'Pool Cash version 35: '
    </script>
    
<!-- Polyfills bundle. -->
<script src="src/polyfills.bundle.5adbf.js" charset="utf-8"></script>

<!-- SystemJS support. -->
<script src="src/system.bundle.fcca2.js" charset="utf-8"></script>

<!--


<script
  src="src/import-map.b83c6.json"
  type="systemjs-importmap"
  charset="utf-8"
></script>

-->
<script
  type="systemjs-importmap"
  charset="utf-8"
>{"imports":{"cc":"./cocos-js/cc.f754c.js"}}</script>
<script>
  System.import("./index.f6517.js")
    .then(() => {
      console.log(" load index success!");
    })
    .catch(function (err) {
      console.error(err);
    });
</script>

  </body>
</html>
