window.__require=function e(t,n,o){function i(r,s){if(!n[r]){if(!t[r]){var l=r.split("/");if(l=l[l.length-1],!t[l]){var c="function"==typeof __require&&__require;if(!s&&c)return c(l,!0);if(a)return a(l,!0);throw new Error("Cannot find module '"+r+"'")}}var u=n[r]={exports:{}};t[r][0].call(u.exports,function(e){return i(t[r][1][e]||e)},u,u.exports,e,t,n,o)}return n[r].exports}for(var a="function"==typeof __require&&__require,r=0;r<o.length;r++)i(o[r]);return i}({AdController:[function(e,t,n){"use strict";cc._RF.push(t,"ad388yC7j1Bo56uJjG0mU0G","AdController"),Object.defineProperty(n,"__esModule",{value:!0});var o=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.hasBind=!1,t.finishCallback={},t.failedCallback={},t.adCount=0,t.msgMap={},t.volume=0,t}return __extends(t,e),t.prototype.showAd=function(e,t,n){var o=this;0==this.hasBind&&this.bindCallback();var i=e+this.adCount;if(this.msgMap[i]=e,null==this.finishCallback[i]&&(this.finishCallback[i]=[]),this.finishCallback[i].push(t),null==this.failedCallback[i]&&(this.failedCallback[i]=[]),this.failedCallback[i].push(n),CELER_X)celerSDK.showAd(i);else if(cc.director.getScene()&&cc.director.getScene().getChildByName("Canvas")){var a=cc.director.getScene().getChildByName("Canvas");if(a.getChildByName("adNode"))return;var r=new cc.Node("adNode"),s=r.addComponent(cc.VideoPlayer);s.remoteURL="https://vicat.wang/GameRes/catcatcat.mp4",a.width=1464,a.height=2400,a.addChild(r),r.setPosition(0,0),this.volume=cc.audioEngine.getMusicVolume(),cc.audioEngine.setMusicVolume(0),s.node.on("ready-to-play",function(){console.log("ready-to-play"),r.width=1080,r.height=1920,s.play()},this),s.node.on("meta-loaded",function(){console.log("meta-loaded")},this),s.node.on("clicked",function(){if(console.log("clicked"),r.pauseCount++,r.pauseCount>=5){for(var e=document.getElementsByClassName("cocosVideo"),t=0;t<e.length;t++){var n=e.item(t);n&&n.remove()}setTimeout(function(){r.removeFromParent(!0),r.destroy(),o.onAddFaild(i)},0)}},this),s.node.on("playing",function(){console.log("playing")},this),r.pauseCount=0,s.node.on("paused",function(){if(console.log("paused"),r.pauseCount++,r.pauseCount>=5){for(var e=document.getElementsByClassName("cocosVideo"),t=0;t<e.length;t++){var n=e.item(t);n&&n.remove()}setTimeout(function(){r.removeFromParent(!0),r.destroy(),o.onAddFaild(i)},0)}},this),s.node.on("stopped",function(){console.log("stopped")},this),s.node.on("completed",function(){console.log("completed"),s.stop();for(var e=document.getElementsByClassName("cocosVideo"),t=0;t<e.length;t++){var n=e.item(t);n&&n.remove()}setTimeout(function(){r.removeFromParent(!0),r.destroy(),o.onAdFinish(i)},0)},this)}this.adCount++,console.log(" request ad:",i)},t.prototype.bindCallback=function(){this.hasBind=!0,CELER_X&&(celerSDK.onAdPlayFailed(this.onAddFaild.bind(this)),celerSDK.onAdPlayFinished(this.onAdFinish.bind(this)))},t.prototype.onAdFinish=function(e){if(this.finishCallback[e]){for(var t=0,n=this.finishCallback[e];t<n.length;t++){(0,n[t])(this.msgMap[e])}this.finishCallback[e]=null,this.failedCallback[e]=null,this.msgMap[e]=null}CELER_X||cc.audioEngine.setMusicVolume(this.volume)},t.prototype.onAddFaild=function(e){if(this.failedCallback[e]){for(var t=0,n=this.failedCallback[e];t<n.length;t++){(0,n[t])(this.msgMap[e])}this.failedCallback[e]=null,this.finishCallback[e]=null,this.msgMap[e]=null}CELER_X||cc.audioEngine.setMusicVolume(this.volume)},t}(e("../utils/ToSingleton").SingleTon());n.AdController=o,cc._RF.pop()},{"../utils/ToSingleton":"ToSingleton"}],AdLayer:[function(e,t,n){"use strict";cc._RF.push(t,"67391QyhbBGnpPQUpvrThZw","AdLayer"),Object.defineProperty(n,"__esModule",{value:!0});var o,i=e("../Controller/AdController"),a=e("../Controller/GameStateController"),r=e("../GamePlay/View/Game/BallPosView"),s=e("../table"),l=e("../Utils/Signal"),c=e("./FlyCnicornAd"),u=e("./WildAdButton"),d=cc._decorator,h=d.ccclass,p=d.property,f=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(l.BaseSignal);n.AdFinishSignal=f,function(e){e[e.Cnicorn=0]="Cnicorn",e[e.Sun=1]="Sun"}(o=n.AdType||(n.AdType={}));var g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.AdAtlas=null,t}return __extends(t,e),Object.defineProperty(t.prototype,"Panel",{get:function(){return this.node.getChildByName("NormalPanel")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"WatchAd",{get:function(){return this.Panel.getChildByName("btn_get")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"BackToGame",{get:function(){return this.Panel.getChildByName("btn_back")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Content",{get:function(){return this.Panel.getChildByName("Content").getComponent(cc.RichText)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"FailTip",{get:function(){return this.node.getChildByName("FailTip")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"FailTipLabel",{get:function(){return this.FailTip.getChildByName("Label").getComponent(cc.RichText)},enumerable:!0,configurable:!0}),t.prototype.onLoad=function(){var e=this;this.node.active=!1,this.node.scale=1,u.WildAdButtonClick.inst.addListener(function(){e.Show(o.Sun)},this),c.FlyCnicornClickSignal.inst.addListener(function(){e.Show(o.Cnicorn)},this),this.BackToGame.on(cc.Node.EventType.TOUCH_END,function(){setTimeout(function(){e.node.active=!1,a.GameStateController.inst.resume(),c.default.ShowTimeRest=10},0)},this)},t.prototype.onAdFinish=function(e){var t=this;f.inst.dispatchOne(e),e==o[o.Sun]?u.HideWildAdButtonSignal.inst.dispatch():c.RemoveFlyCnicornSignal.inst.dispatch(),setTimeout(function(){t.node.active=!1,a.GameStateController.inst.resume()},0)},t.prototype.onAdFailed=function(e){var t=this;this.FailTip.active=!0,this.Panel.active=!1,e==o[o.Cnicorn]&&c.CnicornWatchFailSignal.inst.dispatch(),setTimeout(function(){t.node.active=!1,a.GameStateController.inst.resume()},2e3)},t.prototype.Show=function(e){var t=this;1!=this.node.active&&(r.BallInterruptSignal.inst.dispatch(),a.GameStateController.inst.pause(!0),this.node.active=!0,this.FailTip.active=!1,this.Panel.active=!0,this.WatchAd.active=!0,this.FailTipLabel.string=lan.t(s.En_View.GuangGaoJieMian,s.En_ID.KanGuangGaoShiBai),e==o.Sun?(this.Content.string=lan.t(s.En_View.GuangGaoJieMian,s.En_ID.MianFeiJinRuXiaYiGuan),this.WatchAd.getComponent(cc.Sprite).spriteFrame=this.AdAtlas.getSpriteFrame("btn_finish")):(this.Content.string=lan.t(s.En_View.GuangGaoJieMian,s.En_ID.ZengJiaShiJian,["10"]),this.WatchAd.getComponent(cc.Sprite).spriteFrame=this.AdAtlas.getSpriteFrame("btn_time")),this.WatchAd.targetOff(this),this.WatchAd.once(cc.Node.EventType.TOUCH_END,function(){setTimeout(function(){t.WatchAd.active=!1},0),i.AdController.inst.showAd(o[e],function(e){console.log(" watch ad success:",e),t.onAdFinish(e)},function(e){console.log(" watch ad fail:",e),t.onAdFailed(e)})},this))},__decorate([p(cc.SpriteAtlas)],t.prototype,"AdAtlas",void 0),t=__decorate([h],t)}(cc.Component);n.default=g,cc._RF.pop()},{"../Controller/AdController":"AdController","../Controller/GameStateController":"GameStateController","../GamePlay/View/Game/BallPosView":"BallPosView","../Utils/Signal":"Signal","../table":"table","./FlyCnicornAd":"FlyCnicornAd","./WildAdButton":"WildAdButton"}],Add10s:[function(e,t,n){"use strict";cc._RF.push(t,"f56a38C61RNn7GsisDRxPFT","Add10s"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("./AdLayer"),i=cc._decorator,a=i.ccclass,r=(i.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onLoad=function(){var e=this;this.node.scale=0,o.AdFinishSignal.inst.addListenerOne(function(t){t==o.AdType[o.AdType.Cnicorn]&&e.node.runAction(cc.sequence(cc.scaleTo(.1,1),cc.delayTime(.8),cc.fadeOut(.2)))},this)},t=__decorate([a],t)}(cc.Component));n.default=r,cc._RF.pop()},{"./AdLayer":"AdLayer"}],App:[function(e,t,n){"use strict";cc._RF.push(t,"eaeeaWDD5pJfqkUameEwNsk","App"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../Controller/ResourceController"),i=e("../Initialization/Facade/InitialFacade"),a=e("../Model/PlayModelProxy"),r=e("../Utils/HashMap"),s=cc._decorator,l=s.ccclass,c=s.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.UI=null,t.Animation=null,t.Add=null,t.Sub=null,t.ShowScore=null,t.TimeRed=null,t.TimeWhite=null,t.Result=null,t}return __extends(t,e),t.prototype.onLoad=function(){console.log(" app onload "),this.UI&&o.ResourceController.inst.setAtlas(this.UI),this.Animation&&o.ResourceController.inst.setAnimationAtlas(this.Animation),this.Result&&o.ResourceController.inst.setFont(o.Font.ResultScore,this.Result),this.Add&&o.ResourceController.inst.setFont(o.Font.AddScore,this.Add),this.Sub&&o.ResourceController.inst.setFont(o.Font.SubScore,this.Sub),this.ShowScore&&o.ResourceController.inst.setFont(o.Font.ShowScore,this.ShowScore),this.TimeRed&&o.ResourceController.inst.setFont(o.Font.TimeRed,this.TimeRed),this.TimeWhite&&o.ResourceController.inst.setFont(o.Font.TimeWhite,this.TimeWhite)},t.prototype.start=function(){i.InitialFacade.inst.start()},t.prototype.update=function(e){a.PlayModelProxy.inst.addGameTime(-e)},t.TuneMatchMap=new r.HashMap,t.TuneRootMap=new r.HashMap,__decorate([c(cc.SpriteAtlas)],t.prototype,"UI",void 0),__decorate([c(cc.SpriteAtlas)],t.prototype,"Animation",void 0),__decorate([c(cc.Font)],t.prototype,"Add",void 0),__decorate([c(cc.Font)],t.prototype,"Sub",void 0),__decorate([c(cc.Font)],t.prototype,"ShowScore",void 0),__decorate([c(cc.Font)],t.prototype,"TimeRed",void 0),__decorate([c(cc.Font)],t.prototype,"TimeWhite",void 0),__decorate([c(cc.Font)],t.prototype,"Result",void 0),t=__decorate([l],t)}(cc.Component);n.default=u,cc._RF.pop()},{"../Controller/ResourceController":"ResourceController","../Initialization/Facade/InitialFacade":"InitialFacade","../Model/PlayModelProxy":"PlayModelProxy","../Utils/HashMap":"HashMap"}],AudioManager:[function(e,t,n){"use strict";cc._RF.push(t,"88c70Ktw0pBKKUTDtyQ2NkZ","AudioManager"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../Utils/HashMap"),i=e("../Command/CommonSignal"),a=e("../Controller/GameStateController"),r=e("../Utils/ToSingleton"),s=e("../GamePlay/Model/GamePlayModel"),l=e("../GamePlay/View/Game/BallPosView"),c=e("../Ad/AdLayer");window.oncanplay&&(window.oncanplay=function(){d.canPlay=!0});var u="sounds/",d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.audioID={},t.clips=new o.HashMap,t.effectVolumeScale=1,t.musicVolumeScale=.8,t}return __extends(t,e),t.prototype.init=function(e){var t=this;console.log(" start load AudioClip ");var n=this;cc.loader.loadRes(u+"bgm",cc.AudioClip,function(t,o){t?console.error(t):("string"==typeof o._audio&&cc.loader._cache&&cc.loader._cache[o._audio]&&cc.loader._cache[o._audio].buffer&&(o._audio=cc.loader._cache[o._audio].buffer),n.clips.add(o.name,o),e&&e(),n.playMusic("bgm",!0))}),cc.loader.loadResDir(u,function(e,n,o){if(e)console.error(e);else for(var i=0,a=n;i<a.length;i++){var r=a[i];"string"==typeof r._audio&&cc.loader._cache&&cc.loader._cache[r._audio]&&cc.loader._cache[r._audio].buffer&&(r._audio=cc.loader._cache[r._audio].buffer),t.clips.has(r.name)||t.clips.add(r.name,r)}}),this.bindSignal()},t.prototype.setEffectVolume=function(e){this.effectVolumeScale=1,cc.audioEngine.setEffectsVolume(e*this.effectVolumeScale)},t.prototype.setMusicVolume=function(e){this.musicVolumeScale=1,cc.audioEngine.setMusicVolume(e*this.musicVolumeScale)},Object.defineProperty(t.prototype,"EffectVolume",{get:function(){return cc.audioEngine.getEffectsVolume()/this.effectVolumeScale},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"MusicVolume",{get:function(){return cc.audioEngine.getMusicVolume()/this.musicVolumeScale},enumerable:!0,configurable:!0}),t.prototype.bindSignal=function(){var e=this;this.setEffectVolume(1),this.setMusicVolume(1),i.UpdateTimeNumber.inst.addListenerOne(function(e){},this),i.ScoreCountingSignal.inst.addListener(function(){e.audioID.scoreCount||e.playEffect("scoreCount",!1,function(){e.audioID.scoreCount=null})},this),i.ShowSubmitSignal.inst.addListener(function(){e.audioID.scoreCount&&cc.audioEngine.stopEffect(e.audioID.scoreCount),e.playEffect("showSubmit")},this),i.OpenResultLayerSignal.inst.addListenerOne(function(t){t==a.RoundEndType.TimeUp?e.playEffect("timeup"):(a.RoundEndType.Complete,e.playEffect("complete"))},this),i.PlayerScoreChanged.inst.addListenerThree(function(e,t,n){},this),i.GamePauseSignal.inst.addListener(function(){e.playEffect("pause")},this),s.LevelPassSignal.inst.addListener(function(){e.playEffect("passLevel")},this),c.AdFinishSignal.inst.addListenerOne(function(t){t==c.AdType[c.AdType.Cnicorn]&&e.playEffect("passLevel")},this),i.ButtonClickSignal.inst.addListener(function(){e.playEffect("click")},this),i.CountDownSignal.inst.addListener(function(){e.playEffect("countDown")},this),s.BallSortDoneSignal.inst.addListener(function(){e.playEffect("match")},this),i.GameOverSignal.inst.addListenerOne(function(t){switch(t){case a.RoundEndType.Complete:e.playEffect("complete");break;case a.RoundEndType.TimeUp:e.playEffect("timeup");break;case a.RoundEndType.Over:e.playEffect("over")}},this),l.MovedDoneSignal.inst.addListenerOne(function(t){t?e.playEffect("success"):e.playEffect("fail")},this)},t.prototype.playEffect=function(e,n,o){var i=this;if(void 0===n&&(n=!1),t.canPlay){if(!(cc.audioEngine.getEffectsVolume()<=.05)){var a=this.clips.get(e);a?(this.audioID[e]=cc.audioEngine.playEffect(a,n),cc.audioEngine.setFinishCallback(this.audioID[e],function(){o&&o()})):cc.loader.loadRes(u+e,cc.AudioClip,function(t,a){t?console.error(t):("string"==typeof a._audio&&cc.loader._cache&&cc.loader._cache[a._audio]&&cc.loader._cache[a._audio].buffer&&(a._audio=cc.loader._cache[a._audio].buffer),i.clips.add(a.name,a),i.audioID[e]=cc.audioEngine.playEffect(a,n),cc.audioEngine.setFinishCallback(i.audioID[e],function(){o&&o()}))})}}else this.bindTouch()},t.prototype.playMusic=function(e,n){var o=this;if(void 0===n&&(n=!0),!t.canPlay)return this.bindTouch(),void t.PlayedList.push({loop:!0,volume:1,clipName:e,supTime:Date.now(),skip:!1,isBgm:!0});var i=this.clips.get(e);i?this.audioID[e]=cc.audioEngine.playMusic(i,n):cc.loader.loadRes(u+e,cc.AudioClip,function(t,i){t?console.error(t):("string"==typeof i._audio&&cc.loader._cache&&cc.loader._cache[i._audio]&&cc.loader._cache[i._audio].buffer&&(i._audio=cc.loader._cache[i._audio].buffer),o.clips.add(i.name,i),o.audioID[e]=cc.audioEngine.playMusic(i,n))})},t.prototype.bindTouch=function(){if(!t.hasBindTouch){var e=this,n=function(){var o;for(cc.game.canvas.removeEventListener("touchstart",n),t.canPlay=!0;(o=t.PlayedList.pop())&&e.clips.get(o.clipName)&&!o.skip;)cc.audioEngine.playMusic(e.clips.get(o.clipName),o.loop)};t.hasBindTouch=!0,cc.game.canvas.addEventListener("touchstart",n)}},t.PlayedList=[],t.canPlay=cc.sys.WIN32==cc.sys.platform,t.hasBindTouch=!1,t}(r.SingleTon());n.gAudio=d.inst,cc._RF.pop()},{"../Ad/AdLayer":"AdLayer","../Command/CommonSignal":"CommonSignal","../Controller/GameStateController":"GameStateController","../GamePlay/Model/GamePlayModel":"GamePlayModel","../GamePlay/View/Game/BallPosView":"BallPosView","../Utils/HashMap":"HashMap","../Utils/ToSingleton":"ToSingleton"}],BallBackground:[function(e,t,n){"use strict";cc._RF.push(t,"db529xRMPpHX4Mq+zJx9bMw","BallBackground"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../../View/SingleTouchView"),i=cc._decorator,a=i.ccclass,r=(i.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t=__decorate([a],t)}(o.default));n.default=r,cc._RF.pop()},{"../../../View/SingleTouchView":"SingleTouchView"}],BallColorView:[function(e,t,n){"use strict";var o,i;cc._RF.push(t,"5874bKMSmJLeLrGz7A18/tt","BallColorView"),Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../../Controller/ResourceController"),r=e("../../../Factory/GameFactory"),s=e("../../../Global/Theme"),l=e("../../../Model/PlayModelProxy"),c=e("../../../Utils/HashMap"),u=e("../../Model/Ball/BallModel"),d=e("../../Model/GamePlayModel"),h=e("./PrefabBaseView"),p=cc._decorator,f=p.ccclass,g=(p.property,(o={})[s.Theme.Blue]="ball_",o[s.Theme.Green]="candy_",o[s.Theme.Red]="box_",o),m=((i={})[u.BallColor.Blue]="blue",i[u.BallColor.Brown]="brown",i[u.BallColor.Dark]="dark",i[u.BallColor.DarkBlue]="darkblue",i[u.BallColor.DarkGreen]="darkgreen",i[u.BallColor.Green]="green",i[u.BallColor.Orange]="orange",i[u.BallColor.Pink]="pink",i[u.BallColor.Purple]="purple",i[u.BallColor.Red]="red",i[u.BallColor.Yellow]="yellow",i),y=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}var n;return __extends(t,e),n=t,Object.defineProperty(t.prototype,"Sprite",{get:function(){return this.node.getChildByName("Ball").getComponent(cc.Sprite)},enumerable:!0,configurable:!0}),t.prototype.onLoad=function(){var e=this;u.BallColorChangedSignal.inst.addListenerTwo(this.onColorChanged,this),d.NextLevelSignal.inst.addListener(function(){r.gFactory.putObj("Ball",e.node)},this)},t.prototype.onColorChanged=function(e,t){this.model&&this.model.ID==e&&(this.Sprite.spriteFrame=a.ResourceController.inst.getAltas(g[l.PlayModelProxy.inst.Theme]+m[t]))},t.prototype.onReuse=function(){n.BallNodeMap.has(this.model.ID)||n.BallNodeMap.add(this.model.ID,this.node)},t.prototype.onUnuse=function(){},t.BallNodeMap=new c.HashMap,t=n=__decorate([f],t)}(h.default);n.default=y,cc._RF.pop()},{"../../../Controller/ResourceController":"ResourceController","../../../Factory/GameFactory":"GameFactory","../../../Global/Theme":"Theme","../../../Model/PlayModelProxy":"PlayModelProxy","../../../Utils/HashMap":"HashMap","../../Model/Ball/BallModel":"BallModel","../../Model/GamePlayModel":"GamePlayModel","./PrefabBaseView":"PrefabBaseView"}],BallMatchView:[function(e,t,n){"use strict";cc._RF.push(t,"8ff30UrOkZG67YQA1cH7EVf","BallMatchView"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../../Controller/GameStateController"),i=e("../../../Model/PlayModelProxy"),a=e("../../../Utils/Signal"),r=e("../../../View/SingleTouchView"),s=e("./BallTouchView"),l=cc._decorator,c=l.ccclass,u=(l.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(a.BaseSignal));n.MatchViewTouchStartSignal=u;var d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(a.BaseSignal);n.MatchViewTouchMoveSignal=d;var h=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(a.BaseSignal);n.MatchViewTouchEndedSignal=h;var p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.hasStart=!1,t.topBall=null,t}return __extends(t,e),t.prototype.onTouchStart=function(e){if(this.hasStart=!1,!o.GameStateController.inst.isGameOver()&&0!=o.GameStateController.inst.isRoundStart()&&!o.GameStateController.inst.isPause()){if(i.PlayModelProxy.inst.currentSelectedModel)return s.BallTouchEndSignal.inst.dispatchTwo(i.PlayModelProxy.inst.currentSelectedModel.ID,parseInt(this.node.parent.name)),void(i.PlayModelProxy.inst.currentSelectedModel=null);this.hasStart=!0,this.topBall=i.PlayModelProxy.inst.Model.getToBall(parseInt(this.node.parent.name)),u.inst.dispatchTwo(this.topBall,e)}},t.prototype.onTouchEnd=function(e){0!=this.hasStart&&h.inst.dispatchTwo(this.topBall,e)},t.prototype.onTouchCancel=function(e){this.onTouchEnd(e)},t.prototype.onTouchMove=function(e){0!=this.hasStart&&d.inst.dispatchTwo(this.topBall,e)},t=__decorate([c],t)}(r.default);n.default=p,cc._RF.pop()},{"../../../Controller/GameStateController":"GameStateController","../../../Model/PlayModelProxy":"PlayModelProxy","../../../Utils/Signal":"Signal","../../../View/SingleTouchView":"SingleTouchView","./BallTouchView":"BallTouchView"}],BallModel:[function(e,t,n){"use strict";cc._RF.push(t,"d195buOuXBByppQkJvxK1A+","BallModel"),Object.defineProperty(n,"__esModule",{value:!0});var o,i=e("../../../Model/PlayModelProxy"),a=e("../../../Utils/HashMap"),r=e("../../../Utils/Signal");(function(e){e[e.Blue=0]="Blue",e[e.DarkBlue=1]="DarkBlue",e[e.Brown=2]="Brown",e[e.Dark=3]="Dark",e[e.DarkGreen=4]="DarkGreen",e[e.Green=5]="Green",e[e.Orange=6]="Orange",e[e.Pink=7]="Pink",e[e.Purple=8]="Purple",e[e.Red=9]="Red",e[e.Yellow=10]="Yellow"})(o=n.BallColor||(n.BallColor={}));var s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(r.BaseSignal);n.BallColorChangedSignal=s;var l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(r.BaseSignal);n.BallCreatedSignal=l;var c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(r.BaseSignal);n.BallTuneIndexChangedSignal=c;var u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(r.BaseSignal);n.BallSortIndexChangedSignal=u;var d=function(){function e(t,n,i){this.color=null,this.tuneIndex=-1,this.sortIndex=-1,this.id="",this.tuneIndex=n,this.sortIndex=i,e.objCount++,this.id=e.objCount+"- Ball - "+o[t],e.ballMap.add(this.id,this),l.inst.dispatchOne(this),this.Color=t}return e.getBallModelByID=function(e){return console.assert(this.ballMap.has(e),"ball not exist:"+e),this.ballMap.get(e)},Object.defineProperty(e.prototype,"ID",{get:function(){return this.id},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Color",{get:function(){return this.color},set:function(e){this.color=e,s.inst.dispatchTwo(this.id,this.color)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"TuneIndex",{get:function(){return this.tuneIndex},set:function(e){this.tuneIndex=e,c.inst.dispatchTwo(this,this.tuneIndex)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"SortIndex",{get:function(){return this.sortIndex},set:function(e){this.sortIndex=e,u.inst.dispatchTwo(this.id,this.sortIndex)},enumerable:!0,configurable:!0}),e.prototype.isTop=function(){return i.PlayModelProxy.inst.isTop(this.tuneIndex,this)},e.ballMap=new a.HashMap,e.objCount=0,e}();n.BallModel=d,cc._RF.pop()},{"../../../Model/PlayModelProxy":"PlayModelProxy","../../../Utils/HashMap":"HashMap","../../../Utils/Signal":"Signal"}],BallPosView:[function(e,t,n){"use strict";cc._RF.push(t,"9b458ySI85JHYNOAU4V/FIz","BallPosView"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../../App/App"),i=e("../../../Command/CommonSignal"),a=e("../../../Global/GameRule"),r=e("../../../Model/PlayModelProxy"),s=e("../../../Utils/Cocos"),l=e("../../../Utils/Signal"),c=e("../../../View/Transform/PositionView"),u=e("../../Model/GamePlayModel"),d=e("../Interaction/BallTouchView"),h=cc._decorator,p=h.ccclass,f=(h.property,1),g=3e3/f,m=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(l.BaseSignal);n.OnReturnSignal=m;var y=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(l.BaseSignal);n.MovedDoneSignal=y;var S=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(l.BaseSignal);n.BallInterruptSignal=S;var _=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.model=null,t.hasMovedDetal=cc.v2(0,0),t.startMovePos=cc.v2(0,0),t.isReady=!1,t._onReturning=!1,t.maxMoveTime=.15*f,t}return __extends(t,e),Object.defineProperty(t.prototype,"onReturning",{get:function(){return this._onReturning},set:function(e){this._onReturning=e,m.inst.dispatchOne(this._onReturning)},enumerable:!0,configurable:!0}),t.prototype.onLoad=function(){e.prototype.onLoad.call(this),d.BallTouchStartSignal.inst.addListenerOne(this.onTouchStart,this),d.BallTouchMovedSignal.inst.addListenerThree(this.onTouchMoved,this),u.BallReturnSignal.inst.addListenerFive(this.onReturn,this),S.inst.addListener(this.onInterRupt,this)},t.prototype.onInterRupt=function(){"move"==this.node.group&&(this.node.group="default",this.onPositionChanged(a.GetBallPos(this.model.SortIndex,r.PlayModelProxy.inst.Theme),0,function(){}))},t.prototype.unuse=function(){this.model=null,this.onReturning=!1,this.isReady=!1,this.hasMovedDetal=cc.v2(0,0),this.startMovePos=cc.v2(0,0)},t.prototype.reuse=function(e){this.model=e},t.prototype.onTouchStart=function(e){if(this.model&&e==this.model.ID&&!this.isReady&&!this.onReturning){var t=a.GetBallReadyPos(r.PlayModelProxy.inst.Theme),n=s.Distance(this.node.position,t);this.onPositionChanged(t,Math.min(this.maxMoveTime,n/g),this.onReady.bind(this)),this.hasMovedDetal=cc.v2(0,0)}},t.prototype.onTouchMoved=function(e,t,n){if(this.model&&e==this.model.ID&&(this.hasMovedDetal.addSelf(t),0!=this.isReady&&!this.onReturning)){var o=n.getStartLocation().sub(n.getCurrentTarget().convertToWorldSpaceAR(this.startMovePos));this.onPositionChanged(this.startMovePos.add(this.hasMovedDetal).add(o).add(cc.v2(0,100)),0,function(){})}},t.prototype.onReturn=function(e,t,n,i,l){var c=this;if(void 0===t&&(t=!1),this.model&&e==this.model.ID){var u=a.GetBallReadyPos(r.PlayModelProxy.inst.Theme),d=a.GetBallPos(this.model.SortIndex,r.PlayModelProxy.inst.Theme),h=s.Distance(this.node.position,u);if(s.Distance(this.node.position,d)<=10)this.node.group="default",this.onPositionChanged(d,Math.min(s.Distance(this.node.position,d)/g,this.maxMoveTime),function(){y.inst.dispatchOne(l),c.onReturning=!1});else if(t){var p=s.ConvertToNodeSpaceAR(this.node,o.default.TuneRootMap.get(n)),f=u.y-p.y;this.onPositionChanged(cc.v2(this.node.x,f+this.node.y),Math.min(this.maxMoveTime,s.Distance(this.node.position,cc.v2(this.node.x,f+this.node.y))/g),function(){c.node.group="move",c.onPositionChanged(u,Math.min(h/g,c.maxMoveTime),function(){c.node.group="default",c.onPositionChanged(d,Math.min(c.maxMoveTime,s.Distance(c.node.position,d)/g),function(){y.inst.dispatchOne(l),c.onReturning=!1})})})}else if(0==this.isReady){p=a.GetBallPos(i,r.PlayModelProxy.inst.Theme);var m=s.ConvertToNodeSpaceAR(this.node,o.default.TuneRootMap.get(n)).y-p.y;f=this.TargetPos.y-p.y;this.onPositionChanged(cc.v2(this.node.x,f+this.node.y-m),Math.min(this.maxMoveTime,s.Distance(this.node.position,cc.v2(this.node.x,f+this.node.y))/g),function(){c.node.group="move",c.onPositionChanged(u,Math.min(h/g,c.maxMoveTime),function(){c.node.group="default",c.onPositionChanged(d,Math.min(c.maxMoveTime,s.Distance(c.node.position,d)/g),function(){y.inst.dispatchOne(l),c.onReturning=!1})})})}else{var S=Math.min(h/g,this.maxMoveTime);h<50&&(S=.1),this.onPositionChanged(u,S,function(){c.node.group="default",c.onPositionChanged(d,Math.min(c.maxMoveTime,s.Distance(c.node.position,d)/g),function(){y.inst.dispatchOne(l),c.onReturning=!1})})}this.isReady=!1,this.onReturning=!0}},t.prototype.onReady=function(){this.isReady=!0,this.node.group="move",this.startMovePos=this.node.position.clone(),i.ButtonClickSignal.inst.dispatch()},t=__decorate([p],t)}(c.default);n.default=_,cc._RF.pop()},{"../../../App/App":"App","../../../Command/CommonSignal":"CommonSignal","../../../Global/GameRule":"GameRule","../../../Model/PlayModelProxy":"PlayModelProxy","../../../Utils/Cocos":"Cocos","../../../Utils/Signal":"Signal","../../../View/Transform/PositionView":"PositionView","../../Model/GamePlayModel":"GamePlayModel","../Interaction/BallTouchView":"BallTouchView"}],BallTouchView:[function(e,t,n){"use strict";cc._RF.push(t,"8400cbCTphLJYt9cc1YJDM7","BallTouchView"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../../Controller/GameStateController"),i=e("../../../Model/PlayModelProxy"),a=e("../../../Utils/Cocos"),r=e("../../../Utils/Signal"),s=e("./BallMatchView"),l=cc._decorator,c=l.ccclass,u=(l.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(r.BaseSignal));n.BallTouchStartSignal=u;var d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(r.BaseSignal);n.BallTouchEndSignal=d;var h=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(r.BaseSignal);n.BallTouchMovedSignal=h;var p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.hasMoved=!1,t.hasStart=!1,t.model=null,t}return __extends(t,e),t.prototype.onLoad=function(){var e=this;s.MatchViewTouchEndedSignal.inst.addListenerTwo(function(t,n){e.model&&e.model.ID==t&&e.onTouchEnd(n)},this),s.MatchViewTouchMoveSignal.inst.addListenerTwo(function(t,n){e.model&&e.model.ID==t&&e.onTouchMove(n)},this),s.MatchViewTouchStartSignal.inst.addListenerTwo(function(t,n){e.model&&e.model.ID==t&&e.onTouchStart(n)},this)},t.prototype.unuse=function(){this.model=null,this.hasMoved=!1,this.hasStart=!1},t.prototype.reuse=function(e){this.model=e},t.prototype.onTouchCancel=function(e){this.onTouchEnd(e)},t.prototype.onTouchEnd=function(e){if(!o.GameStateController.inst.isGameOver()&&0!=o.GameStateController.inst.isRoundStart()&&0!=this.model.isTop()&&0!=this.hasStart){if(this.hasStart=!1,i.PlayModelProxy.inst.currentSelectedModel&&this.model.ID==i.PlayModelProxy.inst.currentSelectedModel.ID)return d.inst.dispatchTwo(i.PlayModelProxy.inst.currentSelectedModel.ID,this.model.TuneIndex),void(i.PlayModelProxy.inst.currentSelectedModel=null);this.hasMoved?(console.log("has move"),d.inst.dispatchOne(this.model.ID)):i.PlayModelProxy.inst.currentSelectedModel=this.model}},t.prototype.onTouchMove=function(e){o.GameStateController.inst.isGameOver()||0==o.GameStateController.inst.isRoundStart()||0!=this.model.isTop()&&0!=this.hasStart&&(a.Distance(e.getStartLocation(),e.getLocation())<=100||(this.hasMoved=!0,h.inst.dispatchThree(this.model.ID,e.getDelta(),e)))},t.prototype.onTouchStart=function(e){if(!o.GameStateController.inst.isGameOver()&&0!=o.GameStateController.inst.isRoundStart())return i.PlayModelProxy.inst.currentSelectedModel&&this.model.ID!=i.PlayModelProxy.inst.currentSelectedModel.ID?(d.inst.dispatchTwo(i.PlayModelProxy.inst.currentSelectedModel.ID,this.model.TuneIndex),void(i.PlayModelProxy.inst.currentSelectedModel=null)):void(0!=this.model.isTop()?(this.hasMoved=!1,this.hasStart=!0,u.inst.dispatchOne(this.model.ID)):console.log("is not top:",this.model.ID,this.model.TuneIndex,this.model.SortIndex))},t=__decorate([c],t)}(cc.Component);n.default=p,cc._RF.pop()},{"../../../Controller/GameStateController":"GameStateController","../../../Model/PlayModelProxy":"PlayModelProxy","../../../Utils/Cocos":"Cocos","../../../Utils/Signal":"Signal","./BallMatchView":"BallMatchView"}],BaseMediator:[function(e,t,n){"use strict";cc._RF.push(t,"a76c1ySm3tAQId4zbAsdr/d","BaseMediator"),Object.defineProperty(n,"__esModule",{value:!0});var o=cc._decorator,i=o.ccclass,a=(o.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.bind=function(e){this.view=e},Object.defineProperty(t.prototype,"View",{get:function(){return console.assert(null!=this.view," view is null"),this.view},enumerable:!0,configurable:!0}),t.prototype.onRegister=function(){console.error(" should override onRegister ")},t.prototype.onUnregister=function(){console.error(" should override onUnregister ")},t=__decorate([i],t)}(cc.Component));n.default=a,cc._RF.pop()},{}],BaseView:[function(e,t,n){"use strict";cc._RF.push(t,"6daedF7tVNJ3qN565kuohVZ","BaseView"),Object.defineProperty(n,"__esModule",{value:!0});var o=cc._decorator,i=o.ccclass,a=(o.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onLoad=function(){this.node.scale=0},t.prototype.Show=function(e){this.node.active=!0,this.node.runAction(cc.sequence(cc.callFunc(function(){}),cc.scaleTo(.1,1),cc.callFunc(function(){e&&e()})))},t.prototype.Hide=function(e){var t=this;this.node.runAction(cc.sequence(cc.scaleTo(.1,0),cc.callFunc(function(){t.node.active=!1,e&&e()})))},t.prototype.OnClick=function(){},t.prototype.BindMedaitor=function(e){if(!this.node.getComponent(e)){var t=this.node.addComponent(e);return t.bind&&t.bind(this),t.onRegister&&t.onRegister(),t}console.warn(" this node already has the same component..")},t.prototype.UnbindMedaitor=function(e){var t=this.node.getComponent(e);if(t)return t.onUnregister&&t.onUnregister(),t.bind&&t.bind(null),this.node.removeComponent(e),t;console.warn(" component already removed..")},t=__decorate([i],t)}(cc.Component));n.default=a,cc._RF.pop()},{}],BlackView:[function(e,t,n){"use strict";cc._RF.push(t,"f7137KIFk5HzYzsbeidU/gx","BlackView"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../../Command/CommonSignal"),i=e("../../../Controller/GameStateController"),a=cc._decorator,r=a.ccclass,s=(a.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onLoad=function(){var e=this;o.GameOverSignal.inst.addListenerOne(function(t){t!=i.RoundEndType.Complete&&(e.node.active=!0)},this),this.node.active=!1},t.prototype.start=function(){},t=__decorate([r],t)}(cc.Component));n.default=s,cc._RF.pop()},{"../../../Command/CommonSignal":"CommonSignal","../../../Controller/GameStateController":"GameStateController"}],CelerSDK:[function(e,t,n){"use strict";cc._RF.push(t,"34a72Ol/DRKJb0NyonTxi8g","CelerSDK"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../ToSingleton"),i=e("../LogHandler"),a=e("../Random"),r=e("../../Command/CommonSignal"),s=e("../../Model/PlayModelProxy"),l=e("../../Controller/GameStateController"),c=e("../../Manager/AudioManager"),u=e("../../GamePlay/View/UI/SoundButtonView"),d=e("../../Ad/WildAdButton"),h=e("../../Ad/FlyCnicornAd"),p=e("../../TableManager"),f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.alreadySubmit=!1,t.isNewPlayer=!0,t.celerStartCallback=null,t}return __extends(t,e),Object.defineProperty(t.prototype,"MatchID",{get:function(){return this.match.matchId},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"MatchRandomSeed",{get:function(){return this.match.sharedRandomSeed},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"DifficultyLevel",{get:function(){return this.match.difficultyLevel},enumerable:!0,configurable:!0}),t.prototype.init=function(e){this.alreadySubmit=!1,CELER_X&&celerSDK.onStart(this.onCelerStart.bind(this)),CELER_X&&celerSDK.provideScore(function(){return s.PlayModelProxy.inst.getTotalScore()}),this.celerStartCallback=e,i.LogHandler.inst.ready(),CELER_X?i.LogHandler.inst.initLog(celerSDK.log):console.log("v 1.4")},t.prototype.celerXReady=function(){console.log(" invoke celerx.ready() "),CELER_X?celerSDK.ready():this.onCelerStart()},t.prototype.isNew=function(){return this.isNewPlayer},t.prototype.isOnCelerPlatform=function(){return CELER_X},t.prototype.defineLan=function(){this.match.locale=this.match.locale||"en_US",lan.set(this.match.locale);var e={},t=null;t=p.TableManager.inst.getAll_En_Data();var n=this.match.locale.split("_")[0].charAt(0).toUpperCase()+this.match.locale.split("_")[0].substring(1);if(p.TableManager.inst["getAll_"+n+"_Data"]&&p.TableManager.inst["getAll_"+n+"_Data"]()&&(t=p.TableManager.inst["getAll_"+n+"_Data"]()),t){for(var o in t){var i=t[o];e[i.View]||(e[i.View]={}),e[i.View][i.ID]=i.Text}lan.define(this.match.locale,e)}},t.prototype.onCelerStart=function(){console.log(" celerx onStart call"),this.match=CELER_X?celerSDK.getMatch():{matchId:"error : can not get id",shouldLaunchTutorial:!1,forceMute:!1,sharedRandomSeed:.0511143549190336,difficultyLevel:0,locale:"en_US"},console.log("match id:",this.match.matchId,", seed:",this.match.sharedRandomSeed),a.Random.setRandomSeed(this.match.sharedRandomSeed),this.match.forceMute&&(c.gAudio.setEffectVolume(0),c.gAudio.setMusicVolume(0),u.SoundStateChangedSignal.inst.dispatch()),this.match&&this.match.shouldLaunchTutorial?this.isNewPlayer=!0:this.isNewPlayer=!1,this.defineLan(),CELER_X?((this.isNewPlayer||1!=celerSDK.hasMethod("showAd"))&&(d.HideWildAdButtonSignal.inst.dispatch(),h.RemoveFlyCnicornSignal.inst.dispatch()),celerSDK.onPause(function(){console.log(" on pause "),l.GameStateController.inst.isGameOver()||l.GameStateController.inst.isPause()||r.ShowPauseLayerSignal.inst.dispatch()}),celerSDK.onResume(function(){console.log(" on resume ")})):(cc.game.on(cc.game.EVENT_HIDE,function(){console.log(" on pause "),l.GameStateController.inst.isGameOver()||r.ShowPauseLayerSignal.inst.dispatch()}),cc.game.on(cc.game.EVENT_SHOW,function(){console.log(" on resume ")})),this.celerStartCallback&&(this.celerStartCallback(),this.celerStartCallback=null)},t.prototype.submitScore=function(e){this.alreadySubmit||(this.alreadySubmit=!0,console.log(" submit score:",e,", match id:",this.match.matchId),CELER_X?celerSDK.submitScore(e):window.location.reload())},Object.defineProperty(t.prototype,"isAndroidWeb",{get:function(){return cc.sys.isMobile&&cc.sys.isBrowser&&cc.sys.os==cc.sys.OS_ANDROID},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isIOSWeb",{get:function(){return cc.sys.isMobile&&cc.sys.isBrowser&&cc.sys.os==cc.sys.OS_IOS},enumerable:!0,configurable:!0}),t}(o.SingleTon());n.CelerSDK=f,cc._RF.pop()},{"../../Ad/FlyCnicornAd":"FlyCnicornAd","../../Ad/WildAdButton":"WildAdButton","../../Command/CommonSignal":"CommonSignal","../../Controller/GameStateController":"GameStateController","../../GamePlay/View/UI/SoundButtonView":"SoundButtonView","../../Manager/AudioManager":"AudioManager","../../Model/PlayModelProxy":"PlayModelProxy","../../TableManager":"TableManager","../LogHandler":"LogHandler","../Random":"Random","../ToSingleton":"ToSingleton"}],Cocos:[function(e,t,n){"use strict";cc._RF.push(t,"d9795RGCWVCp5Zf4JNywPPb","Cocos"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("./Random");function i(e){return e&&e.getParent&&e.getParent()?e.getParent().convertToWorldSpaceAR(e.position):cc.v2(0,0)}n.GetWorldPosition=i,n.ConvertToNodeSpaceAR=function(e,t){if(!t)return cc.v2(0,0);var n=i(e);return t.convertToNodeSpaceAR(n)},n.Distance=function(e,t){return Math.sqrt((e.x-t.x)*(e.x-t.x)+(e.y-t.y)*(e.y-t.y))},n.AreaOf2CrossRect=function(e,t){var n=e.x,o=e.y,i=e.x+e.width,a=e.y+e.height,r=t.x,s=t.y,l=t.x+t.width,c=t.y+t.height;return Math.max(0,Math.min(i,l)-Math.max(n,r))*Math.max(0,Math.min(a,c)-Math.max(o,s))},n.disOrderArray=function(e){for(var t,n=0;n<e.length;++n){var i=o.Random.randomFloorToInt(0,e.length);t=[e[i],e[n]],e[n]=t[0],e[i]=t[1]}},n.Clamp=function(e,t,n){return Math.max(Math.min(e,t),n)},cc._RF.pop()},{"./Random":"Random"}],CommonSignal:[function(e,t,n){"use strict";cc._RF.push(t,"f95914FtRVEIaVFtfSVd+lO","CommonSignal"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../Utils/Signal"),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(o.BaseSignal);n.ShowPauseLayerSignal=i;var a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(o.BaseSignal);n.HidePauseLayerSignal=a;var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(o.BaseSignal);n.GameThemeInit=r;var s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(o.BaseSignal);n.ShowHelpLayerSignal=s;var l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(o.BaseSignal);n.HideHelpLayerSignal=l;var c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(o.BaseSignal);n.OpenResultLayerSignal=c;var u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(o.BaseSignal);n.ShowSubmitSignal=u;var d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(o.BaseSignal);n.ScoreCountingSignal=d;var h=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(o.BaseSignal);n.ButtonClickSignal=h;var p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(o.BaseSignal);n.TimeAnimationStateChanged=p;var f=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(o.BaseSignal);n.UpdateTimeNumber=f;var g=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(o.BaseSignal);n.GameReadySignal=g;var m=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(o.BaseSignal);n.ShowTutorialSignal=m;var y=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(o.BaseSignal);n.GameStartSignal=y;var S=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(o.BaseSignal);n.GameOverSignal=S;var _=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(o.BaseSignal);n.GamePauseSignal=_;var v=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(o.BaseSignal);n.PlayerScoreChanged=v;var C=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(o.BaseSignal);n.NoviceScoreChanged=C;var T=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(o.BaseSignal);n.CountDownSignal=T,cc._RF.pop()},{"../Utils/Signal":"Signal"}],CompleteView:[function(e,t,n){"use strict";cc._RF.push(t,"ba3d1yfxbBDUoRT1kaH73rI","CompleteView"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../../Command/CommonSignal"),i=e("../../../Controller/GameStateController"),a=e("../../../Controller/ResourceController"),r=e("../../../Utils/Signal"),s=e("../Animation/FireWorkAnimation"),l=cc._decorator,c=l.ccclass,u=(l.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(r.BaseSignal));n.PlayFireworkSignal=u;var d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),Object.defineProperty(t.prototype,"Font",{get:function(){return this.node.getChildByName("Font").getComponent(cc.Sprite)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Con",{get:function(){return this.node.getChildByName("Con")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"FireWork",{get:function(){return this.node.getChildByName("FireWork").getComponent(s.default)},enumerable:!0,configurable:!0}),t.prototype.onLoad=function(){o.GameOverSignal.inst.addListenerOne(this.onGameOver,this),u.inst.addListener(this.playFireWork,this),this.Font.node.active=!1,this.Con.active=!1,this.node.scale=1},t.prototype.start=function(){this.FireWork.node.active=!1},t.prototype.playFireWork=function(){this.Font.node.active=!1,this.FireWork.node.active=!0,this.FireWork.play()},t.prototype.onGameOver=function(e){switch(this.Font.node.active=e!=i.RoundEndType.Complete,e){case i.RoundEndType.Complete:this.FireWork.node.active=!0,this.Con.active=!0;break;case i.RoundEndType.Over:this.Font.spriteFrame=a.ResourceController.inst.getAnimationAtlas("font__game_over");break;case i.RoundEndType.TimeUp:this.Font.spriteFrame=a.ResourceController.inst.getAnimationAtlas("font_time")}this.Font.node.active?(this.Font.node.scaleX=0,this.Font.node.runAction(cc.scaleTo(.1,1,1))):(this.FireWork.play(),this.Con.scale=0,this.Con.runAction(cc.sequence(cc.scaleTo(.1,1.2),cc.delayTime(.15),cc.scaleTo(.1,1)))),setTimeout(function(){o.OpenResultLayerSignal.inst.dispatchOne(e)},2e3)},t=__decorate([c],t)}(cc.Component);n.default=d,cc._RF.pop()},{"../../../Command/CommonSignal":"CommonSignal","../../../Controller/GameStateController":"GameStateController","../../../Controller/ResourceController":"ResourceController","../../../Utils/Signal":"Signal","../Animation/FireWorkAnimation":"FireWorkAnimation"}],EaseBaseView:[function(e,t,n){"use strict";cc._RF.push(t,"fc226Q7q/NHwZUZiG7X+tIZ","EaseBaseView"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../BaseView"),i=cc._decorator,a=i.ccclass,r=(i.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.targetVal=new cc.Vec3(0,0,0),t.startTime=0,t.lastTime=0,t.completeCallback=null,t}return __extends(t,e),Object.defineProperty(t.prototype,"StartTime",{get:function(){return this.startTime},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"LastTime",{get:function(){return this.lastTime},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Target",{get:function(){return this.targetVal},enumerable:!0,configurable:!0}),t.prototype.onLoad=function(){},t.prototype.start=function(){},t.prototype.startUpdate=function(e,t,n,o){void 0===o&&(o=0),this.targetVal=e,this.startTime=Date.now()+1e3*o,this.lastTime=1e3*t,this.completeCallback=n},t.prototype.complete=function(){if(this.startTime=this.lastTime=0,this.completeCallback){var e=this.completeCallback;this.completeCallback=null,e()}},t.prototype.update=function(e){0!=this.startTime&&0!=this.canUpdate()&&(this.isComplete()?(this.onComplete(),this.complete()):this.canStart()&&this.onStep())},t.prototype.canStart=function(){return Date.now()>=this.startTime&&0!=this.startTime},t.prototype.isComplete=function(){return Date.now()>=this.startTime+this.lastTime},t.prototype.canUpdate=function(){return console.error("you should override this method."),!0},t.prototype.onStep=function(){},t.prototype.onComplete=function(){},t.prototype.ease=function(e,t){return this.lastTime<=0?t:(t-e)*(Date.now()-this.startTime)/this.lastTime+e},t=__decorate([a],t)}(o.default));n.default=r,cc._RF.pop()},{"../BaseView":"BaseView"}],FireWorkAnimation:[function(e,t,n){"use strict";cc._RF.push(t,"fdcc6mLSFRPvZPIgAxSjpVB","FireWorkAnimation"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../../Utils/FrameAniBase"),i=cc._decorator,a=i.ccclass,r=(i.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onComplete=function(){this.node.runAction(cc.fadeOut(.1))},t.prototype.play=function(){this.node.active=!0,this.node.opacity=255,e.prototype.play.call(this)},t=__decorate([a],t)}(o.default));n.default=r,cc._RF.pop()},{"../../../Utils/FrameAniBase":"FrameAniBase"}],FlyAdCnicornAniamtion:[function(e,t,n){"use strict";cc._RF.push(t,"df82bE3jcpP0bURZ5D33BYC","FlyAdCnicornAniamtion"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../Utils/FrameAniBase"),i=cc._decorator,a=i.ccclass,r=(i.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t=__decorate([a],t)}(o.default));n.default=r,cc._RF.pop()},{"../Utils/FrameAniBase":"FrameAniBase"}],FlyCnicornAd:[function(e,t,n){"use strict";cc._RF.push(t,"36cb0yApqROmqNTDmiukrBP","FlyCnicornAd"),Object.defineProperty(n,"__esModule",{value:!0});var o,i=e("../Utils/Celer/CelerSDK"),a=e("../Utils/Signal"),r=cc._decorator,s=r.ccclass;r.property;(function(e){e[e.Left=0]="Left",e[e.Right=1]="Right"})(o=n.FlyOrigin||(n.FlyOrigin={}));var l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(a.BaseSignal);n.CnicornWatchFailSignal=l;var c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(a.BaseSignal);n.RemoveFlyCnicornSignal=c;var u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(a.BaseSignal);n.FlyCnicornAdDispearSignal=u;var d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(a.BaseSignal);n.FlyCnicornClickSignal=d;var h=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(a.BaseSignal);n.ShowFlyCnicornSignal=h;var p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}var n;return __extends(t,e),n=t,Object.defineProperty(t.prototype,"Fly",{get:function(){return this.node.getChildByName("Fly")},enumerable:!0,configurable:!0}),t.prototype.reuse=function(e,t){console.log("ShowFlyCnicorn:",o[e]),this.node.opacity=255,this.Fly.opacity=255;var i=0;this.Fly.y=t,e=o.Right,this.Fly.scaleX=-1,this.Fly.x=940,i=-940,this.Fly.once(cc.Node.EventType.TOUCH_END,this.onAddTouch,this),this.Fly.runAction(cc.sequence(cc.moveTo(10,i,this.Fly.y),cc.spawn(cc.fadeOut(2),cc.moveBy(2,376*this.Fly.scaleX,0)),cc.callFunc(function(){u.inst.dispatch(),n.ShowTimeRest=10})))},t.prototype.unuse=function(){},t.prototype.onLoad=function(){var e=this;c.inst.addOnce(function(){console.log("--RemoveFlyCnicorn--"),h.inst.removeTarget(e),l.inst.removeTarget(e),e.node.removeFromParent(!0),e.node.destroy()},this),l.inst.addListener(function(){n.ShowTimeRest=10},this),n.ShowTimeRest=10,h.inst.addListenerTwo(function(t,n){console.log(" Show Cnicorn"),e.Fly.getNumberOfRunningActions()>0||e.reuse(o.Right,650.14)},this),0==i.CelerSDK.inst.isAndroidWeb&&c.inst.dispatch()},t.prototype.onAddTouch=function(e){this.Fly.stopAllActions(),this.Fly.runAction(cc.fadeOut(.2)),d.inst.dispatch()},t.prototype.update=function(e){},t.ShowTimeRest=0,t=n=__decorate([s],t)}(cc.Component);n.default=p,cc._RF.pop()},{"../Utils/Celer/CelerSDK":"CelerSDK","../Utils/Signal":"Signal"}],FrameAniBase:[function(e,t,n){"use strict";cc._RF.push(t,"6298cJI+OZK9J9ZyfrpqPP2","FrameAniBase"),Object.defineProperty(n,"__esModule",{value:!0});var o=cc._decorator,i=o.ccclass,a=o.property,r=o.requireComponent,s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.Frames=null,t.PrefixName="",t.FrameCount=0,t.Interval=.05,t.Priority=0,t.Loop=!1,t.PlayOnLoad=!1,t.currentIndex=0,t.time=0,t.isPlay=!1,t.listener=[],t.complateEvent=[],t}var n;return __extends(t,e),n=t,Object.defineProperty(t.prototype,"Sprite",{get:function(){return this.node.getComponent(cc.Sprite)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Animation",{set:function(e){this.Frames=e},enumerable:!0,configurable:!0}),t.prototype.onFocusInEditor=function(){},t.prototype.onLostFocusInEditor=function(){clearInterval(n.intervalID)},t.prototype.onLoad=function(){this.time=this.Interval,this.isPlay=this.PlayOnLoad},t.prototype.play=function(){this.isPlay=!0,this.currentIndex=0,this.node.opacity=255,this.updateCurrentFrame(),0==this.isPlaying&&this.callEventComplete()},t.prototype.onStartPlay=function(){},t.prototype.playOnLoop=function(){this.Loop=!0,this.play()},t.prototype.playByStep=function(){this.isPlay=!0,this.nextFrame(),this.isPlay=!1},t.prototype.pause=function(){this.isPlay=!1},t.prototype.resume=function(){this.isPlay=!0},t.prototype.stop=function(){this.isPlay=!1,this.currentIndex=0,this.updateCurrentFrame(),this.Loop=!1},t.prototype.updateCurrentFrame=function(){""!=this.PrefixName?this.Sprite.spriteFrame=this.Frames.getSpriteFrame(this.PrefixName+(this.currentIndex+1)):this.Sprite.spriteFrame=this.Frames.getSpriteFrames()[this.currentIndex]},t.prototype.onKeyFrame=function(e){},t.prototype.addKeyEventListener=function(e,t){this.listener.push({callback:e,target:t})},Object.defineProperty(t.prototype,"ListenerCount",{get:function(){return this.listener.length},enumerable:!0,configurable:!0}),t.prototype.clearAllListener=function(){return this.listener.length=0,this},t.prototype.onComplete=function(){this.node.runAction(cc.fadeOut(.2))},t.prototype.callEventFrame=function(){this.onKeyFrame(this.currentIndex);for(var e=0,t=this.listener;e<t.length;e++){var n=t[e];n.callback.apply(n.target,[this.currentIndex,this.__classname__])}},t.prototype.callEventComplete=function(){this.isPlay=!1;for(var e=0,t=this.complateEvent;e<t.length;e++){var n=t[e];n.f.apply(n.target,[this.__classname__])}this.onComplete()},t.prototype.addCompleteEvent=function(e,t){this.complateEvent.push({f:e,target:t})},Object.defineProperty(t.prototype,"TotalFrameCount",{get:function(){return""!=this.PrefixName&&this.FrameCount>0?this.Loop?this.FrameCount:this.FrameCount+1:this.Frames&&this.Frames.getSpriteFrames?this.Frames.getSpriteFrames().length+1:0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"CompleteEventCount",{get:function(){return this.complateEvent.length},enumerable:!0,configurable:!0}),t.prototype.clearCompleteEvent=function(){return this.complateEvent.length=0,this},t.prototype.start=function(){},Object.defineProperty(t.prototype,"isPlaying",{get:function(){if(this.isPlay&&this.Frames&&this.Frames.getSpriteFrames&&this.Frames.getSpriteFrames().length>0){for(var e=0,t=this.getComponents(n);e<t.length;e++){var o=t[e];if(o.Priority>this.Priority&&o.isPlaying)return!1}return!0}return!1},enumerable:!0,configurable:!0}),t.prototype.nextFrame=function(){0!=this.isPlaying?this.Frames&&this.Frames.getSpriteFrames&&this.Frames.getSpriteFrames().length>0&&(0==this.currentIndex&&this.onStartPlay(),this.updateCurrentFrame(),this.callEventFrame(),this.currentIndex=(this.currentIndex+1)%this.TotalFrameCount,0==this.currentIndex&&0==this.Loop&&(this.isPlay=!1,this.callEventComplete())):this.time=this.Interval},t.prototype.update=function(e){this.time>=this.Interval&&(this.time=0,this.nextFrame()),this.time+=e},t.aniName="FrameAniBase",t.intervalID=-1,__decorate([a(cc.SpriteAtlas)],t.prototype,"Frames",void 0),__decorate([a],t.prototype,"PrefixName",void 0),__decorate([a],t.prototype,"FrameCount",void 0),__decorate([a],t.prototype,"Interval",void 0),__decorate([a],t.prototype,"Priority",void 0),__decorate([a],t.prototype,"Loop",void 0),__decorate([a],t.prototype,"PlayOnLoad",void 0),t=n=__decorate([i,r(cc.Sprite)],t)}(cc.Component);n.default=s,cc._RF.pop()},{}],FrontView:[function(e,t,n){"use strict";cc._RF.push(t,"a7fe8WWCZVPgYx/jpZQ6l8q","FrontView"),Object.defineProperty(n,"__esModule",{value:!0});var o=cc._decorator,i=o.ccclass,a=(o.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onLoad=function(){},t.prototype.start=function(){},t.prototype.update=function(e){this.node.parent.scaleX>=0?this.node.scaleX=1:this.node.scaleX=0,this.node.parent.scaleY<0?this.node.scaleY=1:this.node.scaleY=0},t=__decorate([i],t)}(cc.Component));n.default=a,cc._RF.pop()},{}],GameFactory:[function(e,t,n){"use strict";cc._RF.push(t,"93d23kfnY1A76OtZSkIyJ5r","GameFactory"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../Utils/HashMap"),i=function(){function e(e,t,n){this._pool=[],this.totalSize=0,this.initTime=[],this.completeHandler=n,this.template=e,this.totalSize=t,this.hashKey="ObjPool:"+this.template.name+" - "+this.totalSize,this.initPool(t)}return e.prototype.initPool=function(e,t){var n=this;if(void 0===t&&(t=!1),t)for(var o=0;o<e;++o){this.initTime.push(Date.now());var i=cc.instantiate(this.template);this.put(i)}else for(o=0;o<e;++o)this.initTime.push(Date.now()),setTimeout(function(){var e=cc.instantiate(n.template);n.put(e)},o)},e.prototype.size=function(){return this._pool.length},e.prototype.clear=function(){for(var e=this._pool.length,t=0;t<e;++t)this._pool[t].destroy&&this._pool[t].destroy();this._pool.length=0},e.prototype.put=function(e){if(e&&-1===this._pool.indexOf(e)){e.removeFromParent(!1);for(var t=0,n=e.getComponents(cc.Component);t<n.length;t++){var o=n[t];o&&o.unuse&&o.unuse.apply(o)}this._pool.push(e),this.completeHandler&&this.totalSize<=this._pool.length&&(this.completeHandler(),this.completeHandler=null)}},e.prototype.get=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=this._pool.length-1;n<0&&(console.warn(" last < 0 "),this.initPool(1,!0)),n=this._pool.length-1;var o=this._pool[n];this._pool.length=n;for(var i=0,a=o.getComponents(cc.Component);i<a.length;i++){var r=a[i];r&&r.reuse&&r.reuse.apply(r,arguments)}return o},e}(),a=function(){function e(){this.count=0,this.totalCount=0,this.objPool=new o.HashMap,this.startTime=0}return Object.defineProperty(e,"inst",{get:function(){return this.ins?this.ins:this.ins=new e},enumerable:!0,configurable:!0}),e.prototype.init=function(e){var t=this;this.doneCallback=e,this.startTime=Date.now(),cc.loader.loadResDir("prefabs/",cc.Prefab,function(e,n,o){if(e)console.error(" Game Factory init failed:",e);else{t.totalCount=n.length;for(var a=function(e){var o=n[e],a=o.name.split("."),r=a[0],s=a[1]?parseInt(a[1]):30;console.log(" init pool:",r,", count:",s),setTimeout(function(){var e=new i(o,s,t.addCount.bind(t));t.objPool.add(r,e)},10*e)},r=0;r<n.length;r++)a(r)}})},e.prototype.addCount=function(){this.count++,this.count>=this.totalCount&&(console.log(" factory cost time:",(Date.now()-this.startTime).toFixed(2)+"ms"),this.doneCallback&&(this.doneCallback(),this.doneCallback=null))},e.prototype.getObj=function(e){for(var t,n=[],o=1;o<arguments.length;o++)n[o-1]=arguments[o];return this.objPool.has(e)?(t=this.objPool.get(e)).get.apply(t,n):(console.error(" objPool dosen't exists this obj:",e),null)},e.prototype.putObj=function(e,t){if(this.objPool.has(e))return this.objPool.get(e).put(t);console.error(" objPool dosen't exists this obj:",e)},e}();n.gFactory=a.inst,cc._RF.pop()},{"../Utils/HashMap":"HashMap"}],GamePlayModel:[function(e,t,n){"use strict";var o,i;cc._RF.push(t,"3a3dbMmjXZDlbutv0S4vxKQ","GamePlayModel"),Object.defineProperty(n,"__esModule",{value:!0});var a,r,s,l=e("../../Global/Theme"),c=e("../../Global/GameRule"),u=e("../../Command/CommonSignal"),d=e("../../Global/Level"),h=e("../../Utils/Random"),p=e("../../Utils/Cocos"),f=e("../../Utils/Signal"),g=e("./Ball/BallModel"),m=e("../../Utils/HashMap"),y=e("../View/Interaction/BallTouchView"),S=e("../../App/App"),_=e("../View/Game/BallColorView"),v=e("../View/UI/RevertButtonView"),C=e("../View/Game/BallPosView"),T=e("../View/UI/MoveCountLabelView"),M=e("../../Controller/GameStateController"),b=e("../View/UI/SubmitLayerView"),P=e("../../Model/PlayModelProxy"),F=e("../View/UI/CompleteView"),R=e("../../Utils/Celer/CelerSDK"),w=e("../../Ad/AdLayer");(function(e){e[e.Combo=0]="Combo",e[e.CardBonus=1]="CardBonus",e[e.TimeBonus=2]="TimeBonus",e[e.Normal=3]="Normal"})(a=n.ScoreType||(n.ScoreType={})),function(e){e[e.Level_1=1]="Level_1",e[e.Level_2=2]="Level_2",e[e.Level_3=3]="Level_3",e[e.Level_Android_1=4]="Level_Android_1",e[e.Level_Android_2=5]="Level_Android_2",e[e.Level_Android_3=6]="Level_Android_3"}(r=n.GameLevel||(n.GameLevel={})),function(e){e[e.Tune_3=0]="Tune_3",e[e.Tune_4=1]="Tune_4",e[e.Tune_5=2]="Tune_5",e[e.Tune_6=3]="Tune_6",e[e.Tune_7=4]="Tune_7",e[e.Tune_8=5]="Tune_8",e[e.Tune_11=6]="Tune_11",e[e.Tune_10=7]="Tune_10",e[e.Tune_12=8]="Tune_12"}(s=n.GameType||(n.GameType={})),n.GameLevelType=((o={})[r.Level_1]=[s.Tune_3,s.Tune_4],o[r.Level_2]=[s.Tune_6,s.Tune_7,s.Tune_8],o[r.Level_3]=[s.Tune_10,s.Tune_11,s.Tune_12],o[r.Level_Android_1]=[s.Tune_3],o[r.Level_Android_2]=[s.Tune_3,s.Tune_4],o[r.Level_Android_3]=[s.Tune_3,s.Tune_4,s.Tune_5,s.Tune_6],o);var B=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(f.BaseSignal);n.GameTypeInitSignal=B,n.TuneIndexPool=((i={})[s.Tune_10]=[2,3,5,6,7,8,9,10,11,12],i[s.Tune_11]=[2,3,4,5,6,7,8,9,10,11,12],i[s.Tune_12]=[1,2,3,4,5,6,7,8,9,10,11,12],i[s.Tune_3]=[6,7,8],i[s.Tune_4]=[6,7,10,11],i[s.Tune_5]=[5,6,7,9,10],i[s.Tune_6]=[6,7,8,10,11,12],i[s.Tune_7]=[2,6,7,8,10,11,12],i[s.Tune_8]=[5,6,7,8,9,10,11,12],i);var L=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(f.BaseSignal);n.TuneIndexInitSignal=L;var A=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(f.BaseSignal);n.BallReturnSignal=A;var G=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(f.BaseSignal);n.RevertButtonStateChangedSignal=G;var O=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(f.BaseSignal);n.BallSortDoneSignal=O;var x=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(f.BaseSignal);n.NextLevelSignal=x;var V=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(f.BaseSignal);n.LevelPassSignal=V;var E=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(f.BaseSignal);n.GameTimeInitSignal=E;var I=function(){function e(){this.level=0,this.passLevel=0,this.playerScore=0,this.noviceScore=0,this.gameTime=0,this.pauseCount=0,this.pauseScore=0,this.streak=0,this.totalStreak=0,this.maxSteak=0,this.moveCount=0,this.scoreMap={},this.playerScoreMap={},this.tuneTotalCount=0,this.currentSortCount=0,this.ballModels=[],this.tunes=new m.HashMap,this.reverts=[],this.init()}return e.prototype.init=function(){var e=this;y.BallTouchEndSignal.inst.addListenerTwo(this.onBallTouchEnd,this),v.RevertSignal.inst.addListener(this.revertAction,this),C.OnReturnSignal.inst.addListenerOne(this.onReturning,this),b.EndNowSignal.inst.addListener(this.onEndNow,this),w.AdFinishSignal.inst.addListenerOne(function(t){t==w.AdType[w.AdType.Sun]&&e.passLevelFromAd()},this)},e.prototype.passLevelFromAd=function(){var e=this;console.log("passLevelFromAd");var t=[];this.reverts.length=0,G.inst.dispatchOne(this.reverts.length>0),this.tunes.forEach(function(n,o){o.length=0;for(var i=0,a=e.ballModels;i<a.length;i++){var r=a[i];if(t.indexOf(r.Color)<0){t[n]=r.Color;break}}}),this.tunes.forEach(function(n,o){for(var i=0,a=e.ballModels;i<a.length;i++){var r=a[i];if(t[n]==r.Color&&o.indexOf(r)<0){r.SortIndex=o.length+1,r.TuneIndex=n,o.push(r);var s=_.default.BallNodeMap.get(r.ID);if(s){s.group="default";var l=c.GetBallPos(r.SortIndex,P.PlayModelProxy.inst.Theme);s.setPosition(l)}}}M.GameStateController.inst.pause(!0),setTimeout(function(t){M.GameStateController.inst.resume(),e.checkGetScore(t)},400,n)})},Object.defineProperty(e.prototype,"Time",{get:function(){return this.gameTime},set:function(e){this.gameTime=e,this.gameTime=Math.max(0,this.gameTime)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Theme",{get:function(){return this.theme},set:function(e){console.log("set game theme:",l.Theme[e]),this.theme=e,u.GameThemeInit.inst.dispatchOne(this.theme)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Level",{get:function(){return this.level},set:function(e){console.log("set game Level:",e),this.level=e,x.inst.dispatchOne(this.Level)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"TotalScore",{get:function(){return Math.max(this.Timebonus+this.ScoreSpread+this.playerScore-this.moveCount,0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Timebonus",{get:function(){return this.playerScore<=0?0:Math.floor((this.currentSortCount/this.tuneTotalCount*6.6+.4)*this.gameTime)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ScoreSpread",{get:function(){return 0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"PlayerScore",{get:function(){return this.playerScore},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"MoveCount",{get:function(){return this.moveCount},set:function(e){this.moveCount=e,T.MoveCountChangedSignal.inst.dispatchOne(this.moveCount)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"PauseScore",{get:function(){return this.pauseScore},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"NoviceScore",{get:function(){return this.noviceScore},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"TotalCombo",{get:function(){return this.totalStreak},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"PauseCount",{get:function(){return this.pauseCount},enumerable:!0,configurable:!0}),e.prototype.onEndNow=function(){this.checkCompleteScore(),M.GameStateController.inst.roundEnd(M.RoundEndType.Over)},e.prototype.onReturning=function(e){G.inst.dispatchOne(this.reverts.length>0&&0==e)},e.prototype.addRevert=function(e){CELER_X&&(this.reverts.length=0),this.reverts.push(e),G.inst.dispatchOne(!0)},e.prototype.revertAction=function(){if(this.reverts.length>0){P.PlayModelProxy.inst.currentSelectedModel&&(y.BallTouchEndSignal.inst.dispatchTwo(P.PlayModelProxy.inst.currentSelectedModel.ID,P.PlayModelProxy.inst.currentSelectedModel.TuneIndex),P.PlayModelProxy.inst.currentSelectedModel=null);var e=this.reverts.pop(),t=g.BallModel.getBallModelByID(e.ballID),n=t.TuneIndex,o=t.SortIndex;this.setToTargetTune(e.tuneIndex,t,!0),0!=e.score&&(this.scoreMap[this.Level][t.Color]=!1,this.currentSortCount--,this.currentSortCount=Math.max(0,this.currentSortCount),this.addPlayerScore(e.score,a.Normal)),A.inst.dispatchFive(e.ballID,!0,n,o,!0),this.MoveCount--}else G.inst.dispatchOne(this.reverts.length>0)},e.prototype.setToTargetTune=function(e,t,n){void 0===n&&(n=!1);var o=!0;if(this.tunes.has(e)){for(var i=this.tunes.get(e),a=0,r=-1,s=0,l=i;s<l.length;s++){var c=l[s];c&&(a++,c.SortIndex>=r&&(r=c.SortIndex))}if(a>=4||t.TuneIndex==e)o=!1,n&&console.error(" revert error");else{if(d=this.tunes.get(t.TuneIndex))(h=d.indexOf(t))>=0&&d.splice(h,1);var u=t.TuneIndex;t.SortIndex=Math.max(1,r+1),t.TuneIndex=e,i.push(t),0==n&&this.addRevert({ballID:t.ID,tuneIndex:u,score:-this.checkGetScore(e)})}}else{var d,h;if(d=this.tunes.get(t.TuneIndex))(h=d.indexOf(t))>=0&&d.splice(h,1);u=t.TuneIndex;this.tunes.add(e,[t]),t.SortIndex=1,t.TuneIndex=e,0==n&&this.addRevert({ballID:t.ID,tuneIndex:u,score:-this.checkGetScore(e)})}o&&(n||this.MoveCount++),console.log("target tune:",e,t.ID)},e.prototype.getToBall=function(e){if(0==this.tunes.has(e))return null;for(var t=0,n=null,o=0,i=this.tunes.get(e);o<i.length;o++){var a=i[o];a&&a.SortIndex>=t&&(t=a.SortIndex,n=a.ID)}return n},e.prototype.checkGetScore=function(e){var t=this;if(0==this.tunes.has(e))return 0;for(var n,o=0,i=0,r=this.tunes.get(e);i<r.length;i++){var s=r[i];if(s)if(o++,null==n)n=s.Color;else if(n!=s.Color)return 0}return o<4||1==this.scoreMap[this.Level][n]?0:(this.scoreMap[this.Level][n]=!0,setTimeout(function(){t.addPlayerScore(c.SortScore,a.Normal,1,S.default.TuneRootMap.get(e)),O.inst.dispatchOne(e)},100),this.currentSortCount++,this.currentSortCount>=this.tuneTotalCount&&(this.reverts.length=0,G.inst.dispatchOne(!1),this.passLevel++,V.inst.dispatchOne(this.passLevel),this.Level>=3&&R.CelerSDK.inst.isIOSWeb?M.GameStateController.inst.roundEnd(M.RoundEndType.Complete):(M.GameStateController.inst.pause(!0),setTimeout(function(){M.GameStateController.inst.resume(),t.nextLevel()},1e3),F.PlayFireworkSignal.inst.dispatch())),CELER_X&&(this.reverts.length=0,G.inst.dispatchOne(this.reverts.length>0)),c.SortScore)},e.prototype.checkCompleteScore=function(){var e=this;console.log("checkCompleteScore"),this.tunes.forEach(function(t,n){for(var o=c.SortScoreStep,i=1,r=null,s=0,l=n;s<l.length;s++){var u=l[s];if(u)if(null==r)r=u.Color;else{if(r!=u.Color)break;o+=++i*c.SortScoreStep}}console.log("key:",t,", sortCount:",i,",color:",g.BallColor[r],e.scoreMap[e.Level][r]),i>=2&&!e.scoreMap[e.Level][r]&&(e.addPlayerScore(o,a.Normal,1,S.default.TuneRootMap.get(t)),O.inst.dispatchOne(t))})},e.prototype.onBallTouchEnd=function(e,t){var n=g.BallModel.getBallModelByID(e),o=n.TuneIndex,i=n.SortIndex;if("number"==typeof t)this.setToTargetTune(t,n);else{var a=-1,r=0,s=_.default.BallNodeMap.get(e);s&&(S.default.TuneMatchMap.forEach(function(e,t){if(t.active&&t.parent.active){var n=p.ConvertToNodeSpaceAR(t,s.parent),o=cc.rect(n.x-t.width/2,n.y,t.width,t.height),i=p.AreaOf2CrossRect(s.getBoundingBox(),o);i>=r&&(r=i,a=e)}}),console.log("target index:",a,", match area:",r),a!=n.TuneIndex&&r>=5152.8&&this.setToTargetTune(a,n))}A.inst.dispatchFive(e,!1,o,i,o!=n.TuneIndex)},e.prototype.initGametheme=function(){var e=d.Level.getThemeRandomPool(this.Level);this.Theme=e[Math.floor(h.Random.getRandom()*e.length)],this.gameTime=c.GetTotalTime(),E.inst.dispatchOne(this.gameTime)},e.prototype.nextLevel=function(){this.Level++,this.scoreMap[this.Level]={},console.log("init game data:",this.Level),this.reverts.length=0,G.inst.dispatchOne(this.reverts.length>0);var e=[];if(R.CelerSDK.inst.isAndroidWeb)for(var t=100;t--;)e=1==this.level?e.concat(n.GameLevelType[r.Level_Android_1]):2==this.level?e.concat(n.GameLevelType[r.Level_Android_2]):e.concat(n.GameLevelType[r.Level_Android_3]);else for(t=100;t--;)e=e.concat(n.GameLevelType[this.level]);p.disOrderArray(e);var o=e[h.Random.randomFloorToInt(0,e.length)];console.log("GameType:",s[o]),B.inst.dispatchOne(o);var i=n.TuneIndexPool[o].concat();(console.log("TuneIndex:",n.TuneIndexPool[o]),L.inst.dispatchTwo(i.concat(),o),i.splice(h.Random.randomFloorToInt(0,i.length),1),h.Random.getRandom()>=.5&&i.length>=5)&&((R.CelerSDK.inst.isAndroidWeb&&this.level>1||2==this.level&&R.CelerSDK.inst.isIOSWeb)&&i.splice(h.Random.randomFloorToInt(0,i.length),1));var a=i.length;console.log("ColorCount:",a);for(var l=[],c=[g.BallColor.Blue,g.BallColor.DarkBlue,g.BallColor.Brown,g.BallColor.Dark,g.BallColor.DarkGreen,g.BallColor.Green,g.BallColor.Orange,g.BallColor.Pink,g.BallColor.Purple,g.BallColor.Red,g.BallColor.Yellow];l.length<a;)l.push(c.splice(h.Random.randomFloorToInt(0,c.length),1)[0]);for(var u=[],d=0,f=l;d<f.length;d++){var m=f[d];u.push(g.BallColor[m])}console.log("BallColors:",u),this.tuneTotalCount+=i.length;var y={},S={},_={},v=4*i.length;console.log("BallTotalCount:",v),this.tunes.clear(),this.ballModels.length=0;var C={};p.disOrderArray(i);for(var T=-1;this.ballModels.length<v;){T++;var M=i[T%=i.length];null==S[M]?S[M]=1:(S[M]++,S[M]>=4&&i.splice(T,1));for(var b=l.concat(),P=(m=null,0),F=b;P<F.length;P++){var w=F[P];if(!C[M]||C[M].indexOf(w)<0){w=w;break}}if(null==m){var A;if(null!=_[M])(A=b.indexOf(_[M]))>=0&&b.length>1&&b.splice(A,1);m=b[h.Random.randomFloorToInt(0,b.length)]}if(null==y[m])y[m]=1;else if(y[m]++,y[m]>=4)(A=l.indexOf(m))>=0&&l.splice(A,1);_[M]=m,C[M]?C[M].indexOf(m)<0&&C[M].push(m):C[M]=[m];var O=new g.BallModel(m,M,S[M]);this.addModelToTune(M,S[M]-1,O),this.ballModels.push(O)}return this.Level},e.prototype.addModelToTune=function(e,t,n){0==this.tunes.has(e)?(0!=t&&console.error("sortIndex error:",t,", tune:",e,",id:",n.ID),this.tunes.add(e,[n])):(t>this.tunes.get(e).length&&console.error("sortIndex too large error:",t,", tune:",e,",id:",n.ID),this.tunes.get(e)[t]=n)},e.prototype.isTop=function(e,t){if(0==this.tunes.has(e))return!1;for(var n=0,o=0,i=0,a=this.tunes.get(e);i<a.length;i++){var r=a[i];r&&(n++,r.ID==t.ID&&(o=n))}return o==n},e.prototype.addPlayerScore=function(e,t,n,o){if(void 0===n&&(n=1),void 0===o&&(o=null),0!=e){null==this.playerScoreMap[t]&&(this.playerScoreMap[t]=0),this.playerScoreMap[t]+=e;var i=this.playerScore;return this.playerScore+=e,e>0||this.resetCombo(),this.playerScore=Math.max(this.playerScore,0),u.PlayerScoreChanged.inst.dispatchFour(this.playerScore,e,n,o),this.playerScore-i}},e.prototype.addNoviceScore=function(e,t){void 0===t&&(t=1),this.noviceScore+=e,this.noviceScore=Math.max(this.noviceScore,0),u.NoviceScoreChanged.inst.dispatchThree(this.noviceScore,e,t)},e.prototype.getScoreByType=function(e){return"number"!=typeof this.playerScoreMap[e]?0:this.playerScoreMap[e]},e.prototype.addPauseCount=function(){this.pauseCount++,console.log("pause count:",this.pauseCount),this.pauseCount>c.FreePauseLimit&&this.addPlayerScore(-c.PauseScoreCost,a.Normal)},e.prototype.resetCombo=function(){this.streak=0},e.prototype.addStreak=function(){this.streak++,this.totalStreak++,this.maxSteak=Math.max(this.maxSteak,this.streak)},e.prototype.dump=function(){},e}();n.GamePlayModel=I,cc._RF.pop()},{"../../Ad/AdLayer":"AdLayer","../../App/App":"App","../../Command/CommonSignal":"CommonSignal","../../Controller/GameStateController":"GameStateController","../../Global/GameRule":"GameRule","../../Global/Level":"Level","../../Global/Theme":"Theme","../../Model/PlayModelProxy":"PlayModelProxy","../../Utils/Celer/CelerSDK":"CelerSDK","../../Utils/Cocos":"Cocos","../../Utils/HashMap":"HashMap","../../Utils/Random":"Random","../../Utils/Signal":"Signal","../View/Game/BallColorView":"BallColorView","../View/Game/BallPosView":"BallPosView","../View/Interaction/BallTouchView":"BallTouchView","../View/UI/CompleteView":"CompleteView","../View/UI/MoveCountLabelView":"MoveCountLabelView","../View/UI/RevertButtonView":"RevertButtonView","../View/UI/SubmitLayerView":"SubmitLayerView","./Ball/BallModel":"BallModel"}],GamePlaySignal:[function(e,t,n){"use strict";cc._RF.push(t,"6a923XZO3BHe6UfcoANFeWX","GamePlaySignal"),Object.defineProperty(n,"__esModule",{value:!0});var o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(e("../../Utils/Signal").BaseSignal);n.SubmitButtonClickSignal=o,cc._RF.pop()},{"../../Utils/Signal":"Signal"}],GameRule:[function(e,t,n){"use strict";var o,i;cc._RF.push(t,"58c53me7vtEdKVK7W6RnNQo","GameRule"),Object.defineProperty(n,"__esModule",{value:!0});var a=e("../Utils/Celer/CelerSDK"),r=e("./Theme");n.GetTotalTime=function(){return a.CelerSDK.inst.isAndroidWeb?60:150},n.DrawDebug=!1,n.FreePauseLimit=3,n.PauseScoreCost=100,n.SortScore=100,n.SortScoreStep=10,n.ReadyOffset=45,n.BallOffsetY=((o={})[r.Theme.Blue]=87.24,o[r.Theme.Red]=87.086,o[r.Theme.Green]=80,o),n.BallStartOffsetY=((i={})[r.Theme.Blue]=0,i[r.Theme.Red]=10,i[r.Theme.Green]=0,i),n.GetBallPos=function(e,t){return cc.v2(0,(e-1)*n.BallOffsetY[t]+n.BallStartOffsetY[t])},n.GetBallReadyPos=function(e){return cc.v2(0,3*n.BallOffsetY[e]+n.BallStartOffsetY[e]+n.ReadyOffset)},cc._RF.pop()},{"../Utils/Celer/CelerSDK":"CelerSDK","./Theme":"Theme"}],GameStateController:[function(e,t,n){"use strict";cc._RF.push(t,"b768b1DCFpC4aef+tHUAH/Y","GameStateController"),Object.defineProperty(n,"__esModule",{value:!0});var o,i=e("../Utils/ToSingleton"),a=e("../Command/CommonSignal"),r=e("../Model/PlayModelProxy");(function(e){e[e.Complete=0]="Complete",e[e.Over=1]="Over",e[e.TimeUp=2]="TimeUp"})(o=n.RoundEndType||(n.RoundEndType={}));var s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.pauseCount=0,t.roundstart=!1,t.isReady=!1,t.isOver=!1,t.currentRound=0,t.onResumeCallbacks=[],t}return __extends(t,e),t.prototype.start=function(){this.pauseCount=0},t.prototype.canStart=function(){return this.isReady},t.prototype.roundStart=function(){this.isOver||(console.log(" round start:",++this.currentRound),this.roundstart=!0)},t.prototype.roundEnd=function(e){console.log("round end :",o[e]),this.roundstart=!1,this.isOver=!0,a.GameOverSignal.inst.dispatchOne(e)},t.prototype.isRoundStart=function(){return this.roundstart},t.prototype.pause=function(e){void 0===e&&(e=!1),0==this.isPause()&&(this.onResumeCallbacks.length=0,a.GamePauseSignal.inst.dispatch(),e||this.onResumeCallbacks.push(function(){r.PlayModelProxy.inst.addPauseCount()})),this.pauseCount++},t.prototype.testEndComplete=function(){this.roundEnd(o.Complete)},t.prototype.testEndTimeUp=function(){r.PlayModelProxy.inst.addGameTime(-1e12)},t.prototype.clearResumeCallback=function(){this.onResumeCallbacks.length=0},t.prototype.resume=function(){if(this.pauseCount--,console.assert(this.pauseCount>=0," pause count smaller than 0!!!"),this.pauseCount=Math.max(this.pauseCount,0),this.pauseCount<=0){for(var e=0,t=this.onResumeCallbacks;e<t.length;e++){(0,t[e])()}this.onResumeCallbacks.length=0}},t.prototype.isPause=function(){return this.pauseCount>0},t.prototype.addResumeCallback=function(e){this.onResumeCallbacks||(this.onResumeCallbacks=[]),this.onResumeCallbacks.push(e)},t.prototype.isGameOver=function(){return this.isOver},t}(i.SingleTon());n.GameStateController=s,!CELER_X&&(window.GameState=s.inst),cc._RF.pop()},{"../Command/CommonSignal":"CommonSignal","../Model/PlayModelProxy":"PlayModelProxy","../Utils/ToSingleton":"ToSingleton"}],GlobalSingleTouchMediator:[function(e,t,n){"use strict";cc._RF.push(t,"50484YTu+lAFp2acGVLgU7t","GlobalSingleTouchMediator"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../Controller/GameStateController"),i=e("../SingleTouchMediator"),a=cc._decorator,r=a.ccclass,s=(a.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onRegister=function(){e.prototype.onRegister.call(this),this.node._touchListener.swallowTouches=!1},t.prototype.onTouchStart=function(e){o.GameStateController.inst.canStart()&&0==o.GameStateController.inst.isRoundStart()&&o.GameStateController.inst.roundStart()},t.prototype.onTouchMove=function(e){},t.prototype.onTouchEnd=function(e){},t.prototype.onTouchCancel=function(e){},t=__decorate([r],t)}(i.default));n.default=s,cc._RF.pop()},{"../../Controller/GameStateController":"GameStateController","../SingleTouchMediator":"SingleTouchMediator"}],GlobalSingleTouchView:[function(e,t,n){"use strict";cc._RF.push(t,"4cc97bBcEZPu7Haxk0HdV9+","GlobalSingleTouchView"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../BaseView"),i=e("./GlobalSingleTouchMediator"),a=cc._decorator,r=a.ccclass,s=(a.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onLoad=function(){this.BindMedaitor(i.default)},t.prototype.start=function(){},t=__decorate([r],t)}(o.default));n.default=s,cc._RF.pop()},{"../BaseView":"BaseView","./GlobalSingleTouchMediator":"GlobalSingleTouchMediator"}],HashMap:[function(e,t,n){"use strict";cc._RF.push(t,"4b0e7DzcRNJnZXTYCWgDaDU","HashMap"),Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(){this._list=new Array,this.clear()}return e.prototype.getIndexByKey=function(e){for(var t=this._list.length,n=0;n<t;n++){if(this._list[n].key==e)return n}return-1},e.prototype.keyOf=function(e){for(var t=this._list.length,n=0;n<t;n++){var o=this._list[n];if(o.value.hashKey&&e.hashKey&&o.value.hashKey===e.hashKey||o.value==e)return o.key}return null},Object.defineProperty(e.prototype,"keys",{get:function(){for(var e=new Array,t=0,n=this._list;t<n.length;t++){var o=n[t];o&&e.push(o.key)}return e},enumerable:!0,configurable:!0}),e.prototype.add=function(e,t){var n={key:e,value:t},o=this.getIndexByKey(e);-1!=o?this._list[o]=n:this._list.push(n)},Object.defineProperty(e.prototype,"values",{get:function(){return this._list},enumerable:!0,configurable:!0}),e.prototype.remove=function(e){var t=this.getIndexByKey(e);if(-1!=t){var n=this._list[t];return this._list.splice(t,1),n}return null},e.prototype.has=function(e){return-1!=this.getIndexByKey(e)},e.prototype.get=function(e){var t=this.getIndexByKey(e);return-1!=t?this._list[t].value:null},Object.defineProperty(e.prototype,"length",{get:function(){return this._list.length},enumerable:!0,configurable:!0}),e.prototype.sort=function(e){this._list.sort(e)},e.prototype.forEachKeyValue=function(e){for(var t=this._list.length,n=0;n<t;n++){e(this._list[n])}},e.prototype.forEach=function(e){for(var t=this._list.length,n=0;n<t;n++){var o=this._list[n];e(o.key,o.value)}},e.prototype.clear=function(){this._list=[]},e}();n.HashMap=o,cc._RF.pop()},{}],HelpButtonView:[function(e,t,n){"use strict";cc._RF.push(t,"55938+NxDZMXZHVR36gYzbo","HelpButtonView"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../../Command/CommonSignal"),i=e("../../../Controller/GameStateController"),a=e("../../../View/SingleTouchView"),r=cc._decorator,s=r.ccclass,l=(r.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onTouchEnd=function(){i.GameStateController.inst.isGameOver()||(o.ShowHelpLayerSignal.inst.dispatch(),o.ButtonClickSignal.inst.dispatch())},t=__decorate([s],t)}(a.default));n.default=l,cc._RF.pop()},{"../../../Command/CommonSignal":"CommonSignal","../../../Controller/GameStateController":"GameStateController","../../../View/SingleTouchView":"SingleTouchView"}],HelpLayerMediator:[function(e,t,n){"use strict";cc._RF.push(t,"ab216iOmFFBBo7YhihjIFYL","HelpLayerMediator"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("./BaseMediator"),i=e("../Command/CommonSignal"),a=e("../Controller/GameStateController"),r=cc._decorator,s=r.ccclass,l=(r.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.closeCallback=null,t}return __extends(t,e),t.prototype.onRegister=function(){i.ShowHelpLayerSignal.inst.addListenerOne(this.showHelp,this),i.ShowTutorialSignal.inst.addListenerOne(this.showGuide,this),i.HideHelpLayerSignal.inst.addListenerOne(this.hideGuide,this)},t.prototype.showHelp=function(e){this.View.isShowed()||(a.GameStateController.inst.pause(),this.closeCallback=e,this.View.Show())},t.prototype.showGuide=function(e){this.View.isShowed()||(a.GameStateController.inst.pause(!0),this.closeCallback=e,this.View.Show())},t.prototype.hideGuide=function(){0!=this.View.isShowed()&&(a.GameStateController.inst.resume(),this.View.Hide(this.closeCallback),this.closeCallback=null)},t=__decorate([s],t)}(o.default));n.default=l,cc._RF.pop()},{"../Command/CommonSignal":"CommonSignal","../Controller/GameStateController":"GameStateController","./BaseMediator":"BaseMediator"}],HelpLayerView:[function(e,t,n){"use strict";cc._RF.push(t,"7de5dV5nLxKg6SXhg1Pqw8Z","HelpLayerView"),Object.defineProperty(n,"__esModule",{value:!0});var o,i=e("./BaseView"),a=e("./HelpLayerMediator"),r=e("../Command/CommonSignal"),s=e("../GamePlay/View/Game/BallPosView"),l=e("../GamePlay/View/new/Page1"),c=cc._decorator,u=c.ccclass,d=c.property;(function(e){e[e.Show=0]="Show",e[e.Hide=1]="Hide"})(o||(o={}));var h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state=o.Hide,t.Next=null,t.Close=null,t.GuidePage=null,t.TotalPage=null,t.Page=null,t}return __extends(t,e),t.prototype.onLoad=function(){this.BindMedaitor(a.default),this.state=o.Hide,this.node.scale=1,this.node.active=!1,this.GuidePage.node.on("page-turning",this.onPageChanged,this),this.Close.on(cc.Node.EventType.TOUCH_END,this.close,this),this.Next.on(cc.Node.EventType.TOUCH_END,this.next,this)},t.prototype.start=function(){},t.prototype.close=function(){r.ButtonClickSignal.inst.dispatch(),r.HideHelpLayerSignal.inst.dispatch()},t.prototype.next=function(){r.ButtonClickSignal.inst.dispatch(),this.GuidePage.scrollToPage((this.GuidePage.getCurrentPageIndex()+1)%this.GuidePage.content.childrenCount,0),this.onPageChanged()},t.prototype.onPageChanged=function(){this.TotalPage&&(this.TotalPage.string=this.GuidePage.content.childrenCount.toString()),this.Page&&(this.Page.string=(this.GuidePage.getCurrentPageIndex()+1).toString()),this.GuidePage.content.children[this.GuidePage.getCurrentPageIndex()].children[0].getComponent(l.default)&&this.GuidePage.content.children[this.GuidePage.getCurrentPageIndex()].children[0].getComponent(l.default).play(),this.GuidePage.getCurrentPageIndex()>=this.GuidePage.content.childrenCount-1?(this.Next.active=!1,this.Close.active=!0):(this.Next.active=!0,this.Close.active=!1)},t.prototype.isShowed=function(){return this.state==o.Show},t.prototype.Show=function(e){this.isShowed()||(s.BallInterruptSignal.inst.dispatch(),this.state=o.Show,this.node.active=!0,this.node.stopAllActions(),this.node.scale=0,this.node.runAction(cc.sequence(cc.callFunc(function(){}),cc.scaleTo(.1,1),cc.callFunc(function(){e&&e()}))),this.Next.active=!0,this.Close.active=!1,this.GuidePage.scrollToPage(0,0),this.onPageChanged())},t.prototype.Hide=function(e){var t=this;0!=this.isShowed()&&(this.state=o.Hide,this.node.stopAllActions(),this.node.runAction(cc.sequence(cc.scaleTo(.1,0),cc.callFunc(function(){t.node.scale=1,e&&e(),t.node.active=!1}))))},__decorate([d(cc.Node)],t.prototype,"Next",void 0),__decorate([d(cc.Node)],t.prototype,"Close",void 0),__decorate([d(cc.PageView)],t.prototype,"GuidePage",void 0),__decorate([d(cc.Label)],t.prototype,"TotalPage",void 0),__decorate([d(cc.Label)],t.prototype,"Page",void 0),t=__decorate([u],t)}(i.default);n.default=h,cc._RF.pop()},{"../Command/CommonSignal":"CommonSignal","../GamePlay/View/Game/BallPosView":"BallPosView","../GamePlay/View/new/Page1":"Page1","./BaseView":"BaseView","./HelpLayerMediator":"HelpLayerMediator"}],HelpViewLabel:[function(e,t,n){"use strict";cc._RF.push(t,"f10b72Ent9Pk5wYwkHRt3HW","HelpViewLabel"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../../Command/CommonSignal"),i=e("../../../table"),a=cc._decorator,r=a.ccclass,s=(a.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onLoad=function(){o.ShowHelpLayerSignal.inst.addListener(this.renderText,this),o.ShowTutorialSignal.inst.addListener(this.renderText,this)},t.prototype.renderText=function(){this.getComponent(cc.RichText).string=lan.t(i.En_View.BangZhuJieMian,i.En_ID.BangZhuYeMian1+parseInt(this.node.name))},t=__decorate([r],t)}(cc.Component));n.default=s,cc._RF.pop()},{"../../../Command/CommonSignal":"CommonSignal","../../../table":"table"}],HideIfOnAndroid:[function(e,t,n){"use strict";cc._RF.push(t,"217e2en7plAuJ1AhIvmtmRP","HideIfOnAndroid"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../Utils/Celer/CelerSDK"),i=cc._decorator,a=i.ccclass,r=(i.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onLoad=function(){this.node.active=o.CelerSDK.inst.isIOSWeb},t=__decorate([a],t)}(cc.Component));n.default=r,cc._RF.pop()},{"../Utils/Celer/CelerSDK":"CelerSDK"}],InitialFacade:[function(e,t,n){"use strict";cc._RF.push(t,"cbbbcO7od5PrqaPNOs8dFh3","InitialFacade"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../Command/InititalCommand"),i=e("../Command/StartGameCommand"),a=e("../Command/LoadAudioCommand"),r=e("../Command/LoadPrefabCommand"),s=e("../../Utils/Celer/CelerSDK"),l=e("../../Manager/StepManager"),c=e("../Command/LoadJsonCommand"),u=function(){function e(e){this.stepMgr=new l.StepManager,this.facade=puremvc.Facade.getInstance(e)}return Object.defineProperty(e,"inst",{get:function(){return this.instance?this.instance:this.instance=new e(e.MULTITON_KEY)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Facade",{get:function(){return console.assert(null!==this.facade," facade is null"),this.facade},enumerable:!0,configurable:!0}),e.prototype.register=function(){var t=this;this.facade.registerCommand(e.INITIALIZATION,o.InitialCommand),this.facade.registerCommand(e.START_UP,i.StartGameCommand),s.CelerSDK.inst.init(function(){t.facade.sendNotification(e.START_UP,t)}),this.stepMgr.register(function(){s.CelerSDK.inst.celerXReady()},e.TOTAL_STEPS)},e.prototype.unregister=function(){this.facade.removeCommand(e.INITIALIZATION),this.facade.removeCommand(e.START_UP)},e.prototype.start=function(){this.register(),this.facade.sendNotification(e.INITIALIZATION,this)},e.prototype.step=function(e){console.log(" initialization step:",e),this.stepMgr.nextStep(e)},e.MULTITON_KEY="INITIAL_FCADE",e.INITIALIZATION="initialization",e.START_UP="startup",e.TOTAL_STEPS=[a.LoadAudioCommand.STEP,r.LoadPrefabCommand.STEP,c.LoadJsonCommand.STEP],e}();n.InitialFacade=u,cc._RF.pop()},{"../../Manager/StepManager":"StepManager","../../Utils/Celer/CelerSDK":"CelerSDK","../Command/InititalCommand":"InititalCommand","../Command/LoadAudioCommand":"LoadAudioCommand","../Command/LoadJsonCommand":"LoadJsonCommand","../Command/LoadPrefabCommand":"LoadPrefabCommand","../Command/StartGameCommand":"StartGameCommand"}],InititalCommand:[function(e,t,n){"use strict";cc._RF.push(t,"a28caT/H41F74cWxJYqN9pz","InititalCommand"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("./LoadPrefabCommand"),i=e("./LoadAudioCommand"),a=e("./LoadJsonCommand"),r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.initializeMacroCommand=function(){this.addSubCommand(o.LoadPrefabCommand),this.addSubCommand(i.LoadAudioCommand),this.addSubCommand(a.LoadJsonCommand)},t}(puremvc.MacroCommand);n.InitialCommand=r,cc._RF.pop()},{"./LoadAudioCommand":"LoadAudioCommand","./LoadJsonCommand":"LoadJsonCommand","./LoadPrefabCommand":"LoadPrefabCommand"}],LevelPassView:[function(e,t,n){"use strict";cc._RF.push(t,"4f08dnzsJZHM6uUEqhuW5zP","LevelPassView"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../Model/GamePlayModel"),i=e("../Animation/PassLevelAnimation"),a=cc._decorator,r=a.ccclass,s=(a.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onLoad=function(){var e=this;this.node.active=!1,o.LevelPassSignal.inst.addListenerOne(function(t){e.node.name==t.toString()&&(e.node.active=!0,e.node.opacity=170,e.node.scale=3,e.node.runAction(cc.sequence(cc.spawn(cc.scaleTo(.1,1),cc.fadeTo(.1,255)),cc.callFunc(function(){i.PlayPassLevelAnimationSignal.inst.dispatchOne(t)}))))},this)},t=__decorate([r],t)}(cc.Component));n.default=s,cc._RF.pop()},{"../../Model/GamePlayModel":"GamePlayModel","../Animation/PassLevelAnimation":"PassLevelAnimation"}],Level:[function(e,t,n){"use strict";cc._RF.push(t,"3db54FVK6dM2Ik/+eMmSgop","Level"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../Utils/Cocos"),i=e("./Theme"),a=function(){function e(){}return e.getThemeRandomPool=function(e){for(;this.pool.length<120;)this.pool.push(i.Theme.Blue),this.pool.push(i.Theme.Green),this.pool.push(i.Theme.Red);return o.disOrderArray(this.pool),this.pool},e.pool=[],e}();n.Level=a,cc._RF.pop()},{"../Utils/Cocos":"Cocos","./Theme":"Theme"}],LoadAudioCommand:[function(e,t,n){"use strict";cc._RF.push(t,"d4f3eGYUlBES5d8aEvuPQna","LoadAudioCommand"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../Manager/AudioManager"),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.execute=function(e){if(e){var n=e.getBody();n&&n.step&&o.gAudio.init(function(){n.step(t.STEP)})}},t.STEP="LoadAudio",t}(puremvc.SimpleCommand);n.LoadAudioCommand=i,cc._RF.pop()},{"../../Manager/AudioManager":"AudioManager"}],LoadJsonCommand:[function(e,t,n){"use strict";cc._RF.push(t,"2d7edW7kLpHip+HDGCJWEY1","LoadJsonCommand"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../TableManager"),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.execute=function(e){if(e){var n=e.getBody();n&&n.step&&o.TableManager.inst.startLoad("/json",function(){n.step(t.STEP)})}},t.STEP="LoadJson",t}(puremvc.SimpleCommand);n.LoadJsonCommand=i,cc._RF.pop()},{"../../TableManager":"TableManager"}],LoadPrefabCommand:[function(e,t,n){"use strict";cc._RF.push(t,"8b33fPnvCZEJ7bc/zCVv9My","LoadPrefabCommand"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../Factory/GameFactory"),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.execute=function(e){o.gFactory.init(function(){if(e){var n=e.getBody();n&&n.step&&n.step(t.STEP)}})},t.STEP="LoadPrefab",t}(puremvc.SimpleCommand);n.LoadPrefabCommand=i,cc._RF.pop()},{"../../Factory/GameFactory":"GameFactory"}],LoadingPageMediator:[function(e,t,n){"use strict";cc._RF.push(t,"359acCsI6FNpLUAuWOw+Fv4","LoadingPageMediator"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../View/BaseMediator"),i=e("../../Utils/Celer/CelerSDK"),a=e("../../Command/CommonSignal"),r=e("../../Controller/GameStateController"),s=e("../../Ad/WildAdButton"),l=cc._decorator,c=l.ccclass,u=(l.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.time=3e3,t.startTime=0,t}return __extends(t,e),t.prototype.onRegister=function(){this.startTime=Date.now(),a.GameReadySignal.inst.addListener(this.onGameReady,this)},t.prototype.onGameReady=function(){var e=this,t=Date.now()-this.startTime;console.log(" -- game init done, hide loading page: ",t),t<=this.time?setTimeout(function(){e.View.Hide(function(){e.startGame()})},this.time-t):this.View.Hide(function(){e.startGame()})},t.prototype.startGame=function(){i.CelerSDK.inst.isNew()?a.ShowTutorialSignal.inst.dispatchOne(function(){a.GameStartSignal.inst.dispatch(),s.WildButtonReadySignal.inst.dispatch(),r.GameStateController.inst.isReady=!0}):(a.GameStartSignal.inst.dispatch(),s.WildButtonReadySignal.inst.dispatch(),r.GameStateController.inst.isReady=!0)},t.prototype.onDestroy=function(){},t=__decorate([c],t)}(o.default));n.default=u,cc._RF.pop()},{"../../Ad/WildAdButton":"WildAdButton","../../Command/CommonSignal":"CommonSignal","../../Controller/GameStateController":"GameStateController","../../Utils/Celer/CelerSDK":"CelerSDK","../../View/BaseMediator":"BaseMediator"}],LoadingView:[function(e,t,n){"use strict";cc._RF.push(t,"dfec6LZreJCaa8QdaMxRAO/","LoadingView"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../View/BaseView"),i=e("./LoadingPageMediator"),a=cc._decorator,r=a.ccclass,s=(a.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onLoad=function(){this.node.scale=1,this.node.opacity=255,this.BindMedaitor(i.default)},t.prototype.start=function(){},t.prototype.Hide=function(e){var t=this;this.node.runAction(cc.sequence(cc.fadeOut(.5),cc.callFunc(function(){t.node.active=!1,e()})))},t=__decorate([r],t)}(o.default));n.default=s,cc._RF.pop()},{"../../View/BaseView":"BaseView","./LoadingPageMediator":"LoadingPageMediator"}],LogHandler:[function(e,t,n){"use strict";cc._RF.push(t,"a4747QIvUBIo6Ktpx/xQwuB","LogHandler"),Object.defineProperty(n,"__esModule",{value:!0});var o=function(e){function t(){var n=e.call(this)||this;if(n.logFunc=console.log,n.logMsg=null,n.frameTimes=0,n.now=0,n.Frame=20,n.totalFrames=0,n.startTime=0,window.addEventListener)for(var o=0,i=t.LISTENNING_EVENTS;o<i.length;o++){var a=i[o],r="trigger"+a.charAt(0).toLocaleUpperCase()+a.substring(1);n[r]&&"function"==typeof n[r]&&window.addEventListener(a,n[r].bind(n))}return n}return __extends(t,e),t.prototype.dumpFrameInfo=function(){var e=(Date.now()-this.startTime)/1e3,t=e/this.totalFrames;this.log(" total frames:",this.totalFrames," ,total cost time:",e+"s"," , per frame cost time ave:"+t+"s")},t.prototype.log=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.addLog.apply(this,e),this.sendLog()},t.prototype.ready=function(){console.log(t.VERSION)},t.prototype.initLog=function(e){var n=this;cc.director.once(cc.Director.EVENT_AFTER_SCENE_LAUNCH,function(){n.frameTimes=0,n.now=Date.now(),n.startTime=Date.now()},this),cc.director.on(cc.Director.EVENT_AFTER_DRAW,function(){n.frameTimes++,n.totalFrames++,n.frameTimes>=n.Frame&&(n.frameTimes=0,n.now=Date.now())},this),this.logFunc=e,window.consoleError=console.error,window.consoleWarn=console.warn,window.consoleLog=console.log,window.consoleAssert=console.assert,console.error=function(){for(var e,n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];(e=t.inst).log.apply(e,["[ERROR]"].concat(n))},console.warn=function(){for(var e,n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];(e=t.inst).log.apply(e,["[WARN]"].concat(n))},console.log=function(){for(var e,n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];(e=t.inst).log.apply(e,["[INFO]"].concat(n))},console.assert=function(e){for(var n,o=[],i=1;i<arguments.length;i++)o[i-1]=arguments[i];e||(n=t.inst).log.apply(n,["[ASSERT ERROR]"].concat(o))}},t.prototype.formatLogArguments=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n="",o=0;o<arguments.length;o++){var i=typeof arguments[o];"string"==i||"number"==i?n+=" "+arguments[o]:"object"==i?n+=" "+JSON.stringify(arguments[o]):"boolean"==i&&arguments[o].toString&&(n+=arguments[o].toString())}return n},t.prototype.addLog=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];null==this.logMsg&&(this.logMsg={});var o=this.formatLogArguments.apply(this,e),i=this.getFullTime(new Date);this.logMsg[i]=t.VERSION+o},t.prototype.getFullTime=function(e){var t="";t+=e.getFullYear();var n=e.getMonth()+1;t+="-"+(n>=10?n:"0"+n);var o=e.getDate();t+="-"+(o>=10?o:"0"+o);var i=e.getHours();t+="  "+(i>=10?i:"0"+i);var a=e.getMinutes();t+=":"+(a>=10?a:"0"+a);var r=e.getSeconds();return t+=":"+(r>=10?r:"0"+r)},t.prototype.sendLog=function(){this.logFunc&&null!=this.logMsg&&(this.logFunc(JSON.stringify(this.logMsg)),this.logMsg=null)},t.prototype.triggerClose=function(e){this.addLog("triggerClose"),this.sendLog()},t.prototype.triggerLoad=function(e){this.addLog("triggerLoad"),this.sendLog()},t.prototype.triggerUnload=function(e){this.addLog("triggerUnload"),this.sendLog()},t.prototype.triggerOnunload=function(e){this.addLog("triggerUnload"),this.sendLog()},t.prototype.triggerError=function(e){this.addLog("triggerError"),this.addLog(e.message),this.sendLog()},t.prototype.triggerFocus=function(e){this.addLog("triggerFocus"),this.sendLog()},t.prototype.triggerBlur=function(e){this.addLog("triggerBlur"),this.sendLog()},t.prototype.triggerAbort=function(e){this.addLog("triggerAbort"),this.sendLog()},t.prototype.triggerSuspend=function(e){this.addLog("triggerSuspend"),this.sendLog()},t.prototype.beforeunload=function(e){this.addLog("beforeunload"),this.sendLog()},t.VERSION=window.GAME_VERSION||" --- ",t.LISTENNING_EVENTS=["error"],t}(e("./ToSingleton").SingleTon());n.LogHandler=o,cc._RF.pop()},{"./ToSingleton":"ToSingleton"}],MenuButtonView:[function(e,t,n){"use strict";cc._RF.push(t,"28073o37LNPKaWTUfECMch5","MenuButtonView"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../../Command/CommonSignal"),i=e("../../../Controller/GameStateController"),a=e("../../../Utils/Signal"),r=e("../../../View/SingleTouchView"),s=cc._decorator,l=s.ccclass,c=(s.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(a.BaseSignal));n.MenuButtonClickSignal=c;var u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onTouchEnd=function(){i.GameStateController.inst.isGameOver()||(c.inst.dispatch(),o.ButtonClickSignal.inst.dispatch())},t.prototype.start=function(){},t=__decorate([l],t)}(r.default);n.default=u,cc._RF.pop()},{"../../../Command/CommonSignal":"CommonSignal","../../../Controller/GameStateController":"GameStateController","../../../Utils/Signal":"Signal","../../../View/SingleTouchView":"SingleTouchView"}],MenuLayerView:[function(e,t,n){"use strict";cc._RF.push(t,"85bd9XHwOpA8pPYE/vCkvEe","MenuLayerView"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../../Command/CommonSignal"),i=e("../../../Controller/GameStateController"),a=e("../../../Global/GameRule"),r=e("../../../Model/PlayModelProxy"),s=e("../../../table"),l=e("../../../View/BaseView"),c=e("../Game/BallPosView"),u=e("./MenuButtonView"),d=e("./SubmitLayerView"),h=cc._decorator,p=h.ccclass,f=(h.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),Object.defineProperty(t.prototype,"Resume",{get:function(){return this.node.getChildByName("ResumeButton")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"EndNow",{get:function(){return this.node.getChildByName("EndNow")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Content",{get:function(){return this.node.getChildByName("Content").getComponent(cc.RichText)},enumerable:!0,configurable:!0}),t.prototype.onLoad=function(){var t=this;u.MenuButtonClickSignal.inst.addListener(this.onShow,this),o.ShowPauseLayerSignal.inst.addListener(function(){t.onShow()},this),this.Resume.on(cc.Node.EventType.TOUCH_END,function(){i.GameStateController.inst.resume(),t.Hide()},this),this.EndNow.on(cc.Node.EventType.TOUCH_END,function(){t.Hide(),d.EndNowSignal.inst.dispatch()},this),e.prototype.onLoad.call(this),this.node.active=!1},t.prototype.onShow=function(){this.node.active||(c.BallInterruptSignal.inst.dispatch(),r.PlayModelProxy.inst.FreePauseCount<=0?this.Content.string=lan.t(s.En_View.ZanTingJieMian,s.En_ID.ZanTingKouFen,["-"+a.PauseScoreCost.toString()]):this.Content.string=lan.t(s.En_View.ZanTingJieMian,s.En_ID.MianFeiZanTing,[r.PlayModelProxy.inst.FreePauseCount.toString(),"-"+a.PauseScoreCost.toString()]),this.Show(),i.GameStateController.inst.pause())},t.prototype.start=function(){},t=__decorate([p],t)}(l.default));n.default=f,cc._RF.pop()},{"../../../Command/CommonSignal":"CommonSignal","../../../Controller/GameStateController":"GameStateController","../../../Global/GameRule":"GameRule","../../../Model/PlayModelProxy":"PlayModelProxy","../../../View/BaseView":"BaseView","../../../table":"table","../Game/BallPosView":"BallPosView","./MenuButtonView":"MenuButtonView","./SubmitLayerView":"SubmitLayerView"}],MoveCountLabelView:[function(e,t,n){"use strict";cc._RF.push(t,"523c3oc4AhAw43gNtGFJ99Y","MoveCountLabelView"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../../Utils/Signal"),i=e("../../../View/NumberChangedView"),a=cc._decorator,r=a.ccclass,s=(a.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(o.BaseSignal));n.MoveCountChangedSignal=s;var l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onLoad=function(){e.prototype.onLoad.call(this),s.inst.addListenerOne(this.onNumberChanged,this)},t=__decorate([r],t)}(i.default);n.default=l,cc._RF.pop()},{"../../../Utils/Signal":"Signal","../../../View/NumberChangedView":"NumberChangedView"}],NumberChangedView:[function(e,t,n){"use strict";cc._RF.push(t,"5f2acutWoZLka/VldveJWjk","NumberChangedView"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("./BaseView"),i=cc._decorator,a=i.ccclass,r=(i.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.num=0,t.showNum=0,t.step=0,t.label=null,t.action=!0,t.STEP=120,t.callback=null,t}return __extends(t,e),Object.defineProperty(t.prototype,"Label",{get:function(){return this.label?this.label:this.label=this.node.getComponent(cc.Label)},enumerable:!0,configurable:!0}),t.prototype.onLoad=function(){},t.prototype.start=function(){},t.prototype.onStep=function(e){},t.prototype.onNumberChanged=function(e,t){if(this.num=e,this.callback=t,this.num!=this.showNum){var n=this.num-this.showNum;this.step=n>0?Math.ceil(n/this.STEP):Math.floor(n/this.STEP),this.action&&this.node.runAction(cc.sequence(cc.scaleTo(.1,1.4),cc.delayTime(.2),cc.scaleTo(.1,1)))}else this.step=0},t.prototype.update=function(e){this.num!=this.showNum&&(this.showNum+=this.step,this.onStep(this.step),(this.showNum>this.num&&this.step>0||this.showNum<this.num&&this.step<0)&&(this.showNum=this.num,this.step=0)),Math.abs(this.num-this.showNum)<=Math.abs(this.step)&&this.callback&&"function"==typeof this.callback&&(this.callback(),this.callback=null),this.Label.string=this.showNum>=0?this.showNum.toString():"/"+Math.abs(this.showNum).toString()},t=__decorate([a],t)}(o.default));n.default=r,cc._RF.pop()},{"./BaseView":"BaseView"}],Page1:[function(e,t,n){"use strict";cc._RF.push(t,"63454kcZ+BB/6x4kmCwk6U4","Page1"),Object.defineProperty(n,"__esModule",{value:!0});var o=cc._decorator,i=o.ccclass,a=o.property,r=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.ball=null,t.ballStart=null,t.ballReady=null,t.ballReady2=null,t.ballTarget=null,t.hand=null,t.handStart=null,t.handEnd=null,t}return __extends(t,e),t.prototype.onLoad=function(){},t.prototype.start=function(){},t.prototype.play=function(){var e=this;this.ball.stopAllActions(),this.hand.stopAllActions(),this.hand.opacity=255,this.ball.opacity=255,this.ball.setPosition(this.ballStart.position),this.hand.setPosition(this.handStart.position),this.ball.runAction(cc.repeatForever(cc.sequence(cc.delayTime(.05),cc.callFunc(function(){e.hand.runAction(cc.sequence(cc.fadeIn(0),cc.moveTo(0,e.handStart.position),cc.rotateBy(.1,-10),cc.rotateBy(.2,20),cc.rotateBy(.1,-10),cc.fadeOut(.1)))}),cc.delayTime(.4),cc.moveTo(.1,this.ballReady.position),cc.callFunc(function(){e.hand.runAction(cc.sequence(cc.fadeIn(0),cc.moveTo(0,e.handEnd.position),cc.rotateBy(.1,-10),cc.rotateBy(.2,20),cc.rotateBy(.1,-10),cc.fadeOut(.1)))}),cc.delayTime(.6),cc.moveTo(.4,this.ballReady2.position),cc.delayTime(.1),cc.moveTo(.1,this.ballTarget.position),cc.delayTime(.4),cc.fadeOut(.1),cc.moveTo(.2,this.ballStart.position),cc.fadeIn(.1))))},__decorate([a(cc.Node)],t.prototype,"ball",void 0),__decorate([a(cc.Node)],t.prototype,"ballStart",void 0),__decorate([a(cc.Node)],t.prototype,"ballReady",void 0),__decorate([a(cc.Node)],t.prototype,"ballReady2",void 0),__decorate([a(cc.Node)],t.prototype,"ballTarget",void 0),__decorate([a(cc.Node)],t.prototype,"hand",void 0),__decorate([a(cc.Node)],t.prototype,"handStart",void 0),__decorate([a(cc.Node)],t.prototype,"handEnd",void 0),t=__decorate([i],t)}(cc.Component);n.default=r,cc._RF.pop()},{}],PassLevelAnimation:[function(e,t,n){"use strict";cc._RF.push(t,"73e6fZoo9xHhoUpvvGo2Xxz","PassLevelAnimation"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../../Utils/FrameAniBase"),i=e("../../../Utils/Signal"),a=cc._decorator,r=a.ccclass,s=(a.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(i.BaseSignal));n.PlayPassLevelAnimationSignal=s;var l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onComplete=function(){this.node.runAction(cc.fadeOut(.2))},t.prototype.onLoad=function(){var t=this;e.prototype.onLoad.call(this),this.node.active=!1,s.inst.addListenerOne(function(e){e.toString()==t.node.name&&(t.node.active=!0,t.play())},this)},t=__decorate([r],t)}(o.default);n.default=l,cc._RF.pop()},{"../../../Utils/FrameAniBase":"FrameAniBase","../../../Utils/Signal":"Signal"}],PlayModelProxy:[function(e,t,n){"use strict";cc._RF.push(t,"50835VU6k9M3pgXsJbG5zxG","PlayModelProxy"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../Utils/ToSingleton"),i=e("../Controller/GameStateController"),a=e("../GamePlay/Model/GamePlayModel"),r=e("../Command/CommonSignal"),s=e("../Global/GameRule"),l=e("../Ad/FlyCnicornAd"),c=e("../Ad/AdLayer"),u=function(e){function t(){var t=e.call(this)||this;return t.isGameOver=!1,t.playerModel=null,t.currentSelectedModel=null,t.bindSignal(),t}return __extends(t,e),Object.defineProperty(t.prototype,"Model",{get:function(){return this.playerModel?this.playerModel:this.playerModel=new a.GamePlayModel},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"TimeLeft",{get:function(){return this.Model.Time},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"PlayerScore",{get:function(){return this.Model.PlayerScore},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"MoveCount",{get:function(){return this.Model.MoveCount},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"NoviceScore",{get:function(){return this.Model.NoviceScore},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"PointSpread",{get:function(){return this.Model.ScoreSpread},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"TimeBonus",{get:function(){return this.Model.Timebonus},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Theme",{get:function(){return this.Model.Theme},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Level",{get:function(){return this.Model.Level},set:function(e){this.Model.Level=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"PauseScore",{get:function(){return this.Model.PauseScore},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"FreePauseCount",{get:function(){return Math.max(0,s.FreePauseLimit-this.Model.PauseCount)},enumerable:!0,configurable:!0}),t.prototype.bindSignal=function(){},t.prototype.initGametheme=function(){var e=this;c.AdFinishSignal.inst.addListenerOne(function(t){t==c.AdType[c.AdType.Cnicorn]&&(e.Model.Time+=10)},this),this.Model.initGametheme()},t.prototype.getTotalScore=function(){return this.Model.TotalScore},t.prototype.addPauseCount=function(){this.Model.addPauseCount()},t.prototype.isTop=function(e,t){return this.Model.isTop(e,t)},t.prototype.addGameTime=function(e){i.GameStateController.inst.isPause()||0==i.GameStateController.inst.isRoundStart()||this.isGameOver||(this.Model.Time+=e,l.default.ShowTimeRest>0&&(l.default.ShowTimeRest+=e,l.default.ShowTimeRest<=0&&l.ShowFlyCnicornSignal.inst.dispatch()),r.UpdateTimeNumber.inst.dispatchOne(this.Model.Time),r.TimeAnimationStateChanged.inst.dispatchOne(this.Model.Time<=30),this.Model.Time<=0&&(this.Model.checkCompleteScore(),i.GameStateController.inst.roundEnd(i.RoundEndType.TimeUp)))},t.prototype.getScoreByType=function(e){return this.Model.getScoreByType(e)},t.prototype.dump=function(){this.Model.dump()},t.prototype.init=function(){return this.Model.nextLevel()},t.prototype.testPaslLevel=function(){console.clear(),this.Model.passLevelFromAd()},t}(o.SingleTon());n.PlayModelProxy=u,!CELER_X&&(window.Game=u.inst),cc._RF.pop()},{"../Ad/AdLayer":"AdLayer","../Ad/FlyCnicornAd":"FlyCnicornAd","../Command/CommonSignal":"CommonSignal","../Controller/GameStateController":"GameStateController","../GamePlay/Model/GamePlayModel":"GamePlayModel","../Global/GameRule":"GameRule","../Utils/ToSingleton":"ToSingleton"}],PositionView:[function(e,t,n){"use strict";cc._RF.push(t,"416f296ZMZPEaWAE2E6IRlj","PositionView"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("./EaseBaseView"),i=cc._decorator,a=i.ccclass,r=(i.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.startPos=cc.Vec2.ZERO,t}return __extends(t,e),Object.defineProperty(t.prototype,"TargetPos",{get:function(){return cc.v2(this.Target.x,this.Target.y)},enumerable:!0,configurable:!0}),t.prototype.canUpdate=function(){return!0},t.prototype.onLoad=function(){0},t.prototype.start=function(){},t.prototype.onPositionChanged=function(e,t,n,o){void 0===o&&(o=0),this.startPos=this.node.position.clone(),this.startUpdate(new cc.Vec3(e.x,e.y,0),t,n,o)},t.prototype.onStep=function(){this.node.x=this.ease(this.startPos.x,this.Target.x),this.node.y=this.ease(this.startPos.y,this.Target.y)},t.prototype.onComplete=function(){this.node.setPosition(cc.v2(this.Target.x,this.Target.y))},t=__decorate([a],t)}(o.default));n.default=r,cc._RF.pop()},{"./EaseBaseView":"EaseBaseView"}],PrefabBaseView:[function(e,t,n){"use strict";cc._RF.push(t,"f24ed/ng45Kt5VKvqibEbvg","PrefabBaseView"),Object.defineProperty(n,"__esModule",{value:!0});var o=cc._decorator,i=o.ccclass,a=(o.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.model=null,t}return __extends(t,e),t.prototype.onLoad=function(){},t.prototype.reuse=function(e){this.model=e,this.onReuse()},t.prototype.unuse=function(){this.node.group="default",this.model,this.model=null,this.onUnuse()},t.prototype.onReuse=function(){console.warn(" should override onReuse.")},t.prototype.onUnuse=function(){console.warn(" should override onUnuse.")},t=__decorate([i],t)}(cc.Component));n.default=a,cc._RF.pop()},{}],Random:[function(e,t,n){"use strict";cc._RF.push(t,"114f9Vox8JGQbohBr4HFlkf","Random"),Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(){}return e.seededRandom=function(e,t,n){return t+1e6*((1711*e+88888)%302654/302654+(1722*e+55555)%302665/302665+(1755*e+23333)%302766/302766)%1e6/1e6*(n-t)},e.getRandom=function(e,t){void 0===e&&(e=0),void 0===t&&(t=1);var n=this.randomSeed,o=this.seededRandom(n,e,t),i=Math.floor(this.seededRandom(n,1,302766));return this.randomSeed+=i,o},e.setRandomSeed=function(e){console.log(" set random seed:",e),this.randomSeed=e,this.sharedSeed=e},e.randomRoundToInt=function(e,t){return void 0===e&&(e=0),void 0===t&&(t=1),Math.round(this.getRandom(e,t))},e.randomFloorToInt=function(e,t){return void 0===e&&(e=0),void 0===t&&(t=1),Math.floor(this.getRandom(e,t))},e.randomCeilToInt=function(e,t){return void 0===e&&(e=0),void 0===t&&(t=1),Math.ceil(this.getRandom(e,t))},e.clamp=function(e,t,n){return Math.max(t,Math.min(e,n))},e.randomSeed=Math.random(),e.sharedSeed=Math.random(),e}();n.Random=o,cc._RF.pop()},{}],ResourceController:[function(e,t,n){"use strict";cc._RF.push(t,"d264b/eizRMLqzXH1k4Oll+","ResourceController"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../Utils/ToSingleton"),i=e("../Utils/HashMap");n.Title={Complete:"font_complete",TimeUp:"font_time's up",Over:"font_over"},n.PauseFont={HasFree:"bg_pause_font1",NoneFree:"bg_pause_font2"},n.Font={TotalScore:"totalScore",ResultScore:"resultScore",TimeWhite:"TimeWhite",TimeRed:"TimeRed",AddScore:"addScore",SubScore:"subScore",ShowScore:"showScore"};var a=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.fontMap=new i.HashMap,t.UIAtlas=null,t.Animation=null,t}return __extends(t,e),t.prototype.setFont=function(e,t){this.fontMap.add(e,t)},t.prototype.setAtlas=function(e){console.assert(null!=e,"game atlas is null!"),this.UIAtlas=e},t.prototype.getTitleSprite=function(e){return this.UIAtlas.getSpriteFrame(e)},t.prototype.getAltas=function(e){return this.UIAtlas.getSpriteFrame(e)},t.prototype.setAnimationAtlas=function(e){console.assert(null!=e,"animation atlas is null!"),this.Animation=e},t.prototype.getAnimationAtlas=function(e){return this.Animation.getSpriteFrame(e)},t.prototype.getAddScoreFont=function(){return this.fontMap.get(n.Font.AddScore)},t.prototype.getSubScoreFont=function(){return this.fontMap.get(n.Font.SubScore)},t.prototype.getSoundDisabled=function(){return this.UIAtlas.getSpriteFrame("btn_nosound")},t.prototype.getSoundEnable=function(){return this.UIAtlas.getSpriteFrame("btn_sound")},t.prototype.getPauseFont=function(e){return this.UIAtlas.getSpriteFrame(e)},t.prototype.getTimeRedFont=function(){return this.fontMap.get(n.Font.TimeRed)},t.prototype.getTimeWhiteFont=function(){return this.fontMap.get(n.Font.TimeWhite)},t}(o.SingleTon());n.ResourceController=a,cc._RF.pop()},{"../Utils/HashMap":"HashMap","../Utils/ToSingleton":"ToSingleton"}],ResultLayerView:[function(e,t,n){"use strict";cc._RF.push(t,"ba2b7WYGTNEqazUlmB5rAul","ResultLayerView"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../../View/BaseView"),i=e("../../../View/NumberChangedView"),a=e("../../../Command/CommonSignal"),r=e("../../../Controller/GameStateController"),s=e("../../../Controller/ResourceController"),l=e("../../../Model/PlayModelProxy"),c=e("../../../Utils/Celer/CelerSDK"),u=e("../../Model/GamePlayModel"),d=e("../Game/BallPosView"),h=e("../../../table"),p=cc._decorator,f=p.ccclass,g=(p.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.CountTotal=4,t.count=0,t}return __extends(t,e),Object.defineProperty(t.prototype,"Root",{get:function(){return this.node.getChildByName("Root")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Title",{get:function(){return this.Root.getChildByName("Title").getComponent(cc.Sprite)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"TotalScore",{get:function(){return this.Root.getChildByName("TotalScore").getComponent(i.default)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"TimeBonus",{get:function(){return this.Root.getChildByName("TimeBonus").getComponent(i.default)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Score",{get:function(){return this.Root.getChildByName("ScoreLabel").getComponent(i.default)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"MoveCount",{get:function(){return this.Root.getChildByName("MoveCountLabel").getComponent(i.default)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Submit",{get:function(){return this.Root.getChildByName("Submit")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Content",{get:function(){return this.Root.getChildByName("Content").getComponent(cc.RichText)},enumerable:!0,configurable:!0}),t.prototype.onLoad=function(){this.node.active=!1,this.node.scale=1,a.OpenResultLayerSignal.inst.addListenerOne(this.onGameOver,this)},t.prototype.onGameOver=function(e){console.log("Open result:",r.RoundEndType[e],Date.now()),this.Submit.scale=0,this.Content.string=lan.t(h.En_View.JieSuanJieMian,h.En_ID.DeFen),d.BallInterruptSignal.inst.dispatch(),e==r.RoundEndType.TimeUp?this.Title.spriteFrame=s.ResourceController.inst.getTitleSprite(s.Title.TimeUp):e==r.RoundEndType.Complete?this.Title.spriteFrame=s.ResourceController.inst.getTitleSprite(s.Title.Complete):this.Title.spriteFrame=s.ResourceController.inst.getTitleSprite(s.Title.Over),this.Root.scale=0,this.node.active=!0,this.Root.runAction(cc.sequence(cc.scaleTo(.1,.9,1.3),cc.scaleTo(.1,1.2,.9),cc.scaleTo(.1,1,1),cc.callFunc(this.showInfo.bind(this))))},Object.defineProperty(t.prototype,"Count",{get:function(){return this.count},set:function(e){var t=this;this.count!=e&&(this.count=e,console.log("count:",this.Count),this.Count>=this.CountTotal&&(a.ShowSubmitSignal.inst.dispatch(),this.Submit.runAction(cc.sequence(cc.scaleTo(.1,1.2),cc.scaleTo(.1,1),cc.callFunc(function(){t.Submit.once(cc.Node.EventType.TOUCH_END,function(){c.CelerSDK.inst.submitScore(l.PlayModelProxy.inst.getTotalScore())},t),CELER_X&&setTimeout(function(){c.CelerSDK.inst.submitScore(l.PlayModelProxy.inst.getTotalScore())},5e3)})))))},enumerable:!0,configurable:!0}),t.prototype.showInfo=function(){var e=this;this.Count=0,this.TotalScore.STEP=150,this.TimeBonus.STEP=150,this.Score.STEP=150,this.MoveCount.STEP=2;var t=function(){a.ScoreCountingSignal.inst.dispatch()};this.TimeBonus.onStep=t,this.TotalScore.onStep=t,this.Score.onStep=t,this.MoveCount.onStep=t,this.TimeBonus.onNumberChanged(l.PlayModelProxy.inst.TimeBonus,function(){e.Count++,console.log("TimeBonus Done")}),this.TotalScore.onNumberChanged(l.PlayModelProxy.inst.getTotalScore(),function(){e.Count++,console.log("TotalScore Done")}),this.Score.onNumberChanged(l.PlayModelProxy.inst.getScoreByType(u.ScoreType.Normal),function(){e.Count++,console.log("Score Done")}),this.MoveCount.onNumberChanged(-l.PlayModelProxy.inst.MoveCount,function(){e.Count++,console.log("MoveCount Done")})},t=__decorate([f],t)}(o.default));n.default=g,cc._RF.pop()},{"../../../Command/CommonSignal":"CommonSignal","../../../Controller/GameStateController":"GameStateController","../../../Controller/ResourceController":"ResourceController","../../../Model/PlayModelProxy":"PlayModelProxy","../../../Utils/Celer/CelerSDK":"CelerSDK","../../../View/BaseView":"BaseView","../../../View/NumberChangedView":"NumberChangedView","../../../table":"table","../../Model/GamePlayModel":"GamePlayModel","../Game/BallPosView":"BallPosView"}],RevertButtonView:[function(e,t,n){"use strict";cc._RF.push(t,"3e84eq+F3NMM5PkgzsJHXMl","RevertButtonView"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../../Controller/GameStateController"),i=e("../../../Utils/Signal"),a=e("../../../View/SingleTouchView"),r=e("../../Model/GamePlayModel"),s=cc._decorator,l=s.ccclass,c=(s.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(i.BaseSignal));n.RevertSignal=c;var u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),Object.defineProperty(t.prototype,"Button",{get:function(){return this.getComponent(cc.Button)},enumerable:!0,configurable:!0}),t.prototype.onLoad=function(){e.prototype.onLoad.call(this),this.Button.interactable=!1,r.RevertButtonStateChangedSignal.inst.addListenerOne(this.onButtonStateChanged,this)},t.prototype.onTouchEnd=function(){o.GameStateController.inst.isGameOver()||0==o.GameStateController.inst.isRoundStart()||0!=this.Button.interactable&&(console.log("revert"),c.inst.dispatch())},t.prototype.onButtonStateChanged=function(e){this.Button.interactable=e},t=__decorate([l],t)}(a.default);n.default=u,cc._RF.pop()},{"../../../Controller/GameStateController":"GameStateController","../../../Utils/Signal":"Signal","../../../View/SingleTouchView":"SingleTouchView","../../Model/GamePlayModel":"GamePlayModel"}],RotationView:[function(e,t,n){"use strict";cc._RF.push(t,"f3329CeqRdN6ZoUyx7znT4N","RotationView"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("./EaseBaseView"),i=cc._decorator,a=i.ccclass,r=(i.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.startRotation=0,t}return __extends(t,e),t.prototype.onLoad=function(){0},t.prototype.canUpdate=function(){return!0},t.prototype.start=function(){},t.prototype.onRotationChanged=function(e,t,n,o){void 0===o&&(o=0),this.startRotation=this.node.rotation,this.startUpdate(new cc.Vec3(e,e,e),t,n,o)},t.prototype.onStep=function(){this.node.rotation=this.ease(this.startRotation,this.Target.x)},t.prototype.onComplete=function(){this.node.setRotation(this.Target.x)},t=__decorate([a],t)}(o.default));n.default=r,cc._RF.pop()},{"./EaseBaseView":"EaseBaseView"}],ScaleView:[function(e,t,n){"use strict";cc._RF.push(t,"b6981r0u55OyqSF4preRXtY","ScaleView"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("./EaseBaseView"),i=cc._decorator,a=i.ccclass,r=(i.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.startScale=cc.Vec2.ZERO,t}return __extends(t,e),t.prototype.onLoad=function(){0},t.prototype.canUpdate=function(){return!0},t.prototype.start=function(){},t.prototype.onScaleChanged=function(e,t,n,o){void 0===o&&(o=0),this.startScale=cc.v2(this.node.scaleX,this.node.scaleY),this.startUpdate(new cc.Vec3(e.x,e.y,0),t,n,o)},t.prototype.onStep=function(){this.node.scaleX=this.ease(this.startScale.x,this.Target.x),this.node.scaleY=this.ease(this.startScale.y,this.Target.y)},t.prototype.onComplete=function(){this.node.scaleX=this.Target.x,this.node.scaleY=this.Target.y},t=__decorate([a],t)}(o.default));n.default=r,cc._RF.pop()},{"./EaseBaseView":"EaseBaseView"}],ScoreLabelView:[function(e,t,n){"use strict";cc._RF.push(t,"5857dLL+ulDqKijkly4V/xN","ScoreLabelView"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../../Command/CommonSignal"),i=e("../../../Controller/ResourceController"),a=e("../../../Factory/GameFactory"),r=e("../../../Utils/Cocos"),s=e("../../../View/NumberChangedView"),l=cc._decorator,c=l.ccclass,u=l.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.ScoreFloatRoot=null,t}return __extends(t,e),t.prototype.onLoad=function(){o.PlayerScoreChanged.inst.addListenerFour(this.onScoreChanged,this)},t.prototype.onScoreChanged=function(e,t,n,o){var s=this;if(null!=this.ScoreFloatRoot){var l=a.gFactory.getObj("AddScore"),c=l.getComponent(cc.Label);c.font=t>=0?i.ResourceController.inst.getAddScoreFont():i.ResourceController.inst.getSubScoreFont(),c.string="/"+Math.abs(t),this.ScoreFloatRoot.addChild(l);var u=cc.v2(0,0);o&&(u=r.ConvertToNodeSpaceAR(o,this.ScoreFloatRoot));var d=r.ConvertToNodeSpaceAR(this.node,this.ScoreFloatRoot);l.setPosition(u);var h=r.Distance(u,d)/2e3;l.runAction(cc.sequence(cc.scaleTo(0,0),cc.scaleTo(.2,1.2),cc.scaleTo(.1,1),cc.moveTo(h,d),cc.callFunc(function(){a.gFactory.putObj("AddScore",l)}))),setTimeout(function(){s.onNumberChanged(e)},300+1e3*h)}else this.onNumberChanged(e)},__decorate([u(cc.Node)],t.prototype,"ScoreFloatRoot",void 0),t=__decorate([c],t)}(s.default);n.default=d,cc._RF.pop()},{"../../../Command/CommonSignal":"CommonSignal","../../../Controller/ResourceController":"ResourceController","../../../Factory/GameFactory":"GameFactory","../../../Utils/Cocos":"Cocos","../../../View/NumberChangedView":"NumberChangedView"}],Signal:[function(e,t,n){"use strict";cc._RF.push(t,"5e03fyVNOZPs7lLvT6ttunM","Signal"),Object.defineProperty(n,"__esModule",{value:!0});var o=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.listenerMap=[],t.onceListenerMap=[],t}return __extends(t,e),t.prototype.doDispatch=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.excuteListener.apply(this,e),this.excuteOnce.apply(this,e)},t.prototype.excuteListener=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(this.listenerMap&&this.listenerMap.length>0)for(var n=0,o=this.listenerMap;n<o.length;n++){var i=o[n];i.callback.apply(i.target,e)}},t.prototype.excuteOnce=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(this.onceListenerMap&&this.onceListenerMap.length>0){for(var n=0,o=this.onceListenerMap;n<o.length;n++){var i=o[n];i.callback.apply(i.target,e)}this.onceListenerMap.length=0}},t.prototype.listen=function(e,t){this.listenerMap.push({callback:e,target:t})},t.prototype.listenOnce=function(e,t){this.onceListenerMap.push({callback:e,target:t})},t.prototype.removeListener=function(e,t){if(this.listenerMap&&this.listenerMap.length>0)for(var n=0;n<this.listenerMap.length;++n){var o=this.listenerMap[n];o.callback==e&&o.target==t&&(this.listenerMap.splice(n,1),--n)}},t.prototype.removeTarget=function(e){if(this.listenerMap&&this.listenerMap.length>0)for(var t=0;t<this.listenerMap.length;++t){this.listenerMap[t].target==e&&(this.listenerMap.splice(t,1),--t)}},t.prototype.dispatch=function(){this.doDispatch(null)},t.prototype.dispatchOne=function(e){this.doDispatch(e)},t.prototype.dispatchTwo=function(e,t){this.doDispatch(e,t)},t.prototype.dispatchThree=function(e,t,n){this.doDispatch(e,t,n)},t.prototype.dispatchFour=function(e,t,n,o){this.doDispatch(e,t,n,o)},t.prototype.dispatchFive=function(e,t,n,o,i){this.doDispatch(e,t,n,o,i)},t.prototype.addListener=function(e,t){this.listen(e,t)},t.prototype.addOnce=function(e,t){this.listenOnce(e,t)},t.prototype.addListenerOne=function(e,t){this.listen(e,t)},t.prototype.addListenerTwo=function(e,t){this.listen(e,t)},t.prototype.addListenerThree=function(e,t){this.listen(e,t)},t.prototype.addListenerFour=function(e,t){this.listen(e,t)},t.prototype.addListenerFive=function(e,t){this.listen(e,t)},t.prototype.addOnceOne=function(e,t){this.listenOnce(e,t)},t.prototype.addOnceTwo=function(e,t){this.listenOnce(e,t)},t.prototype.addOnceThree=function(e,t){this.listenOnce(e,t)},t.prototype.addOnceFour=function(e,t){this.listenOnce(e,t)},t.prototype.addOnceFive=function(e,t){this.listenOnce(e,t)},t}(e("./ToSingleton").SingleTon());n.BaseSignal=o,cc._RF.pop()},{"./ToSingleton":"ToSingleton"}],SingleTouchMediator:[function(e,t,n){"use strict";cc._RF.push(t,"e1695pPIshGg5cBwRP4Oun7","SingleTouchMediator"),Object.defineProperty(n,"__esModule",{value:!0});var o=cc._decorator,i=o.ccclass,a=(o.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._touchid=null,t}return __extends(t,e),t.prototype.bind=function(e){this.view=e},Object.defineProperty(t.prototype,"View",{get:function(){return console.assert(null!=this.view," view is null"),this.view},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"touchid",{get:function(){return this._touchid},set:function(e){this._touchid=e,window.OpenTouchIDlog&&console.log(this.node.name," touchid :",this._touchid)},enumerable:!0,configurable:!0}),t.prototype.onRegister=function(){this.node.targetOff(this),this.node._onSetParent=this._onSetParent.bind(this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this.touchCancel,this),this.node.on(cc.Node.EventType.TOUCH_END,this.touchEnd,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this.touchMove,this),this.node.on(cc.Node.EventType.TOUCH_START,this.touchStart,this)},t.prototype.onUnregister=function(){this.node.targetOff(this)},t.prototype.touchStart=function(e){if(null!==this.touchid&&this.touchid!==e.getID())return console.log(this.node.name," touch start  touchid is different: ",this.touchid,e.getID()),void e.stopPropagation();this.touchid=e.getID(),this.onTouchStart(e)},t.prototype.touchMove=function(e){null===this.touchid||this.touchid===e.getID()?(this.touchid=e.getID(),this.onTouchMove(e)):e.stopPropagation()},t.prototype.touchEnd=function(e){if(null!==this.touchid&&this.touchid!==e.getID())return console.log(this.node.name," touch end  touchid is different: ",this.touchid,e.getID()),void e.stopPropagation();null!=this.touchid?(this.touchid=null,this.onTouchEnd(e),this.OnClick()):e.stopPropagation()},t.prototype.touchCancel=function(e){if(null!==this.touchid&&this.touchid!==e.getID())return console.log(this.node.name," touch cancel  touchid is different: ",this.touchid,e.getID()),void e.stopPropagation();null!=this.touchid?(this.touchid=null,this.onTouchCancel(e)):e.stopPropagation()},t.prototype.OnClick=function(){},t.prototype.onTouchStart=function(e){},t.prototype.onTouchMove=function(e){},t.prototype.onTouchEnd=function(e){},t.prototype.onTouchCancel=function(e){},t.prototype.onSetParent=function(e){},t.prototype._onSetParent=function(e){null==e&&(this.touchid=null),this.onSetParent(e)},t=__decorate([i],t)}(cc.Component));n.default=a,cc._RF.pop()},{}],SingleTouchView:[function(e,t,n){"use strict";cc._RF.push(t,"85688DQVyhPRqaAh/y2/Qug","SingleTouchView"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("./BaseView"),i=cc._decorator,a=i.ccclass,r=(i.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._touchid=null,t}return __extends(t,e),Object.defineProperty(t.prototype,"touchid",{get:function(){return this._touchid},set:function(e){this._touchid=e,window.OpenTouchIDlog&&console.log(this.node.name," touchid :",this._touchid)},enumerable:!0,configurable:!0}),t.prototype.onLoad=function(){this.node._onSetParent=this._onSetParent.bind(this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this.touchCancel,this),this.node.on(cc.Node.EventType.TOUCH_END,this.touchEnd,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this.touchMove,this),this.node.on(cc.Node.EventType.TOUCH_START,this.touchStart,this)},t.prototype.start=function(){},t.prototype.touchStart=function(e){null===this.touchid||this.touchid===e.getID()?(this.touchid=e.getID(),this.onTouchStart(e)):console.log(this.node.name," touch start  touchid is different! ")},t.prototype.touchMove=function(e){null!==this.touchid&&this.touchid!==e.getID()||(this.touchid=e.getID(),this.onTouchMove(e))},t.prototype.touchEnd=function(e){null===this.touchid||this.touchid===e.getID()?(this.touchid=null,this.onTouchEnd(e)):console.log(this.node.name," touch end  touchid is different! ")},t.prototype.touchCancel=function(e){null===this.touchid||this.touchid===e.getID()?(this.touchid=null,this.onTouchCancel(e)):console.log(this.node.name," touch cancel  touchid is different! ")},t.prototype.onTouchStart=function(e){},t.prototype.onTouchMove=function(e){},t.prototype.onTouchEnd=function(e){},t.prototype.onTouchCancel=function(e){},t.prototype.onSetParent=function(e){},t.prototype._onSetParent=function(e){null==e&&(this.touchid=null),this.onSetParent(e)},t=__decorate([a],t)}(o.default));n.default=r,cc._RF.pop()},{"./BaseView":"BaseView"}],SkewView:[function(e,t,n){"use strict";cc._RF.push(t,"dec79oJ2D1Ju7yCFAAR3rSI","SkewView"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("./EaseBaseView"),i=cc._decorator,a=i.ccclass,r=(i.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.startSkew=cc.Vec2.ZERO,t}return __extends(t,e),t.prototype.onLoad=function(){0},t.prototype.start=function(){},t.prototype.canUpdate=function(){return!0},t.prototype.onSkewChanged=function(e,t,n,o){void 0===o&&(o=0),this.startSkew=cc.v2(this.node.skewX,this.node.skewY),this.startUpdate(new cc.Vec3(e.x,e.y,0),t,n,o)},t.prototype.onStep=function(){this.node.skewX=this.ease(this.startSkew.x,this.Target.x),this.node.skewY=this.ease(this.startSkew.y,this.Target.y)},t.prototype.onComplete=function(){this.node.skewX=this.Target.x,this.node.skewY=this.Target.y},t=__decorate([a],t)}(o.default));n.default=r,cc._RF.pop()},{"./EaseBaseView":"EaseBaseView"}],SliderView:[function(e,t,n){"use strict";cc._RF.push(t,"2c746YFJCxKFJ34ypIaA1v3","SliderView"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../Utils/Random"),i=cc._decorator,a=i.ccclass,r=i.property,s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.Progress=null,t.Slider=null,t.totalLength=0,t}return __extends(t,e),Object.defineProperty(t.prototype,"Percent",{get:function(){return this.Slider.progress},set:function(e){this.Slider.progress=o.Random.clamp(e,0,1),this.Progress.width=this.node.width*this.Slider.progress},enumerable:!0,configurable:!0}),t.prototype.onLoad=function(){this.Slider.node.on("slide",this.onSlided,this),this.totalLength=this.Progress.width},t.prototype.onSlided=function(){this.Progress.width=this.totalLength*this.Slider.progress,this.onProgress&&this.onProgress(this.Slider.progress)},t.prototype.start=function(){},t.prototype.onProgress=function(e){},__decorate([r(cc.Node)],t.prototype,"Progress",void 0),__decorate([r(cc.Slider)],t.prototype,"Slider",void 0),t=__decorate([a],t)}(cc.Component);n.default=s,cc._RF.pop()},{"../Utils/Random":"Random"}],SoundButtonView:[function(e,t,n){"use strict";cc._RF.push(t,"6d699bXGkJBYb+wyjeQyALI","SoundButtonView"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../../Controller/ResourceController"),i=e("../../../Manager/AudioManager"),a=e("../../../Utils/Signal"),r=e("../../../View/SingleTouchView"),s=cc._decorator,l=s.ccclass,c=(s.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(a.BaseSignal));n.SoundStateChangedSignal=c;var u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),Object.defineProperty(t.prototype,"Sprite",{get:function(){return this.getComponent(cc.Sprite)},enumerable:!0,configurable:!0}),t.prototype.onLoad=function(){e.prototype.onLoad.call(this),this.updateState(),c.inst.addListener(this.updateState,this)},t.prototype.onTouchEnd=function(){i.gAudio.MusicVolume>0?(i.gAudio.setEffectVolume(0),i.gAudio.setMusicVolume(0)):(i.gAudio.setEffectVolume(1),i.gAudio.setMusicVolume(1)),c.inst.dispatch()},t.prototype.updateState=function(){var e=i.gAudio.MusicVolume;this.Sprite.spriteFrame=e>0?o.ResourceController.inst.getSoundEnable():o.ResourceController.inst.getSoundDisabled()},t=__decorate([l],t)}(r.default);n.default=u,cc._RF.pop()},{"../../../Controller/ResourceController":"ResourceController","../../../Manager/AudioManager":"AudioManager","../../../Utils/Signal":"Signal","../../../View/SingleTouchView":"SingleTouchView"}],StartGameCommand:[function(e,t,n){"use strict";cc._RF.push(t,"1db594KvoJIVbc+cwfogrGn","StartGameCommand"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../Command/CommonSignal"),i=e("../../Model/PlayModelProxy"),a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.execute=function(e){console.log("--------- excute StartGameCommand ---------"),i.PlayModelProxy.inst.initGametheme(),this.normalInit(),o.GameReadySignal.inst.dispatch()},t.prototype.testInit=function(){i.PlayModelProxy.inst.init()},t.prototype.normalInit=function(){i.PlayModelProxy.inst.init()},t}(puremvc.SimpleCommand);n.StartGameCommand=a,cc._RF.pop()},{"../../Command/CommonSignal":"CommonSignal","../../Model/PlayModelProxy":"PlayModelProxy"}],StepManager:[function(e,t,n){"use strict";cc._RF.push(t,"83709TvPtJOVayPDGaPh6Ov","StepManager"),Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(){this.totalStep=[],this.curStep=[],this.loadTime={}}return e.prototype.register=function(e,t){this.completeCallback=e,this.totalStep=t;for(var n=0,o=t;n<o.length;n++){var i=o[n];this.loadTime[i]=Date.now()}},e.prototype.nextStep=function(e){if(this.totalStep.indexOf(e)<0)console.error(" \u6ca1\u6709\u8fd9\u4e00\u6b65\uff1a",e);else if(this.curStep.indexOf(e)>=0)console.warn(" \u6b65\u9aa4\u5df2\u5b8c\u6210\uff1a",e);else{this.curStep.push(e),this.curStep.sort(function(e,t){return e>t?-1:1}),this.totalStep.sort(function(e,t){return e>t?-1:1});var t=this.curStep.join("-"),n=this.totalStep.join("-"),o=Date.now()-this.loadTime[e];console.log(" cur step:",t,", total step:",n,", cost time:",o," ms"),t==n&&(console.log(" step done"),this.totalStep.length=0,this.completeCallback(),this.completeCallback=null)}},e}();n.StepManager=o,cc._RF.pop()},{}],SubmitButtonView:[function(e,t,n){"use strict";cc._RF.push(t,"7d5e6ERlcdIapmrVvugM7L/","SubmitButtonView"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../../Controller/GameStateController"),i=e("../../../View/SingleTouchView"),a=e("../../Command/GamePlaySignal"),r=cc._decorator,s=r.ccclass,l=(r.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onTouchEnd=function(){o.GameStateController.inst.isGameOver()||0==o.GameStateController.inst.isRoundStart()||a.SubmitButtonClickSignal.inst.dispatchOne("Submit"==this.node.name)},t=__decorate([s],t)}(i.default));n.default=l,cc._RF.pop()},{"../../../Controller/GameStateController":"GameStateController","../../../View/SingleTouchView":"SingleTouchView","../../Command/GamePlaySignal":"GamePlaySignal"}],SubmitLayerView:[function(e,t,n){"use strict";cc._RF.push(t,"f65c05YNytD2Zq3Ran+pohk","SubmitLayerView"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../../Command/CommonSignal"),i=e("../../../Controller/GameStateController"),a=e("../../../Global/GameRule"),r=e("../../../Model/PlayModelProxy"),s=e("../../../table"),l=e("../../../Utils/Signal"),c=e("../../../View/BaseView"),u=e("../../Command/GamePlaySignal"),d=e("../Game/BallPosView"),h=cc._decorator,p=h.ccclass,f=(h.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(l.BaseSignal));n.EndNowSignal=f;var g=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),Object.defineProperty(t.prototype,"Resume",{get:function(){return this.node.getChildByName("ResumeButton")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"EndNow",{get:function(){return this.node.getChildByName("EndNow")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Content",{get:function(){return this.node.getChildByName("Content").getComponent(cc.RichText)},enumerable:!0,configurable:!0}),t.prototype.onLoad=function(){var e=this;setTimeout(function(){e.node.active=!1,e.node.scale=1},0),u.SubmitButtonClickSignal.inst.addListenerOne(this.onShow,this),this.EndNow.on(cc.Node.EventType.TOUCH_END,this.endNow,this),this.Resume.on(cc.Node.EventType.TOUCH_END,this.OnResume,this)},t.prototype.endNow=function(){var e=this;f.inst.dispatch(),o.ButtonClickSignal.inst.dispatch(),setTimeout(function(){e.Hide()},0)},t.prototype.OnResume=function(){var e=this;i.GameStateController.inst.resume(),o.ButtonClickSignal.inst.dispatch(),setTimeout(function(){e.Hide()},0)},t.prototype.onShow=function(){this.node.active||(d.BallInterruptSignal.inst.dispatch(),r.PlayModelProxy.inst.FreePauseCount<=0?this.Content.string=lan.t(s.En_View.TiJiaoJieMian,s.En_ID.TiJiaoFenShuKouFenZanTing,["-"+a.PauseScoreCost.toString()]):this.Content.string=lan.t(s.En_View.TiJiaoJieMian,s.En_ID.TiJiaoFenShuMianFeiZanTing,[r.PlayModelProxy.inst.FreePauseCount.toString(),"-"+a.PauseScoreCost.toString()]),this.Show(),i.GameStateController.inst.pause())},t=__decorate([p],t)}(c.default);n.default=g,cc._RF.pop()},{"../../../Command/CommonSignal":"CommonSignal","../../../Controller/GameStateController":"GameStateController","../../../Global/GameRule":"GameRule","../../../Model/PlayModelProxy":"PlayModelProxy","../../../Utils/Signal":"Signal","../../../View/BaseView":"BaseView","../../../table":"table","../../Command/GamePlaySignal":"GamePlaySignal","../Game/BallPosView":"BallPosView"}],TableManager:[function(e,t,n){"use strict";cc._RF.push(t,"fd472FiY/pL4qJel1Gk5o7T","TableManager"),Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(){this.load=e.JSON_URL&&""!=e.JSON_URL?cc.loader.load.bind(cc.loader):cc.loader.loadRes.bind(cc.loader),this.fileFormat=e.JSON_URL&&""!=e.JSON_URL?".json?time="+Date.now():"",this.total=0,this.complete=0,this.En={},this.Es={},this.Fil={},this.Id={},this.In={},this.Pt={},this.Tl={}}return Object.defineProperty(e,"inst",{get:function(){return this.ins?this.ins:this.ins=new e},enumerable:!0,configurable:!0}),e.prototype.startLoad=function(t,n,o){this.completeCallback=n,this.progressCallback=o;var i=this;console.log("Base URL:",e.JSON_URL),this.load(e.JSON_URL+t.trim().split("/").join("")+"/file_list"+this.fileFormat,function(e,n){if(e)console.error(e.errorMessage);else{var o="Array"==n.constructor.name?n:n.json;this.total=o.length;for(var a=0,r=o;a<r.length;a++){var s=r[a];i.loadJson(t.trim().split("/").join("")+"/"+s.replace(".json",""))}}}.bind(this))},e.prototype.loadJson=function(t){console.log("start load:"+t);var n=this,o=t.split("/")[1];o=o.charAt(0).toUpperCase()+o.slice(1,o.length),this.load(e.JSON_URL+t+this.fileFormat,function(e,t){if(e)console.error(e.errorMessage);else{for(var i=0,a="Array"==t.constructor.name?t:t.json;i<a.length;i++){var r=a[i];n[o][r.ID]=r}n.completeLoad()}}.bind(this))},e.prototype.completeLoad=function(){this.complete++,this.progressCallback&&this.progressCallback(this.complete/this.total),this.complete>=this.total&&this.completeCallback&&this.completeCallback()},e.prototype.getEn=function(e){return this.En[e]?this.En[e]:(console.error("En \u4e0d\u5b58key\uff1a"+e),null)},e.prototype.getAll_En_Data=function(){return this.En},e.prototype.getEs=function(e){return this.Es[e]?this.Es[e]:(console.error("Es \u4e0d\u5b58key\uff1a"+e),null)},e.prototype.getAll_Es_Data=function(){return this.Es},e.prototype.getFil=function(e){return this.Fil[e]?this.Fil[e]:(console.error("Fil \u4e0d\u5b58key\uff1a"+e),null)},e.prototype.getAll_Fil_Data=function(){return this.Fil},e.prototype.getId=function(e){return this.Id[e]?this.Id[e]:(console.error("Id \u4e0d\u5b58key\uff1a"+e),null)},e.prototype.getAll_Id_Data=function(){return this.Id},e.prototype.getIn=function(e){return this.In[e]?this.In[e]:(console.error("In \u4e0d\u5b58key\uff1a"+e),null)},e.prototype.getAll_In_Data=function(){return this.In},e.prototype.getPt=function(e){return this.Pt[e]?this.Pt[e]:(console.error("Pt \u4e0d\u5b58key\uff1a"+e),null)},e.prototype.getAll_Pt_Data=function(){return this.Pt},e.prototype.getTl=function(e){return this.Tl[e]?this.Tl[e]:(console.error("Tl \u4e0d\u5b58key\uff1a"+e),null)},e.prototype.getAll_Tl_Data=function(){return this.Tl},e.JSON_URL="",e}();n.TableManager=o,cc._RF.pop()},{}],TestApp:[function(e,t,n){"use strict";cc._RF.push(t,"b219e3JEelF8qF2ISXZvtH0","TestApp"),Object.defineProperty(n,"__esModule",{value:!0});e("../../Command/CommonSignal"),e("../../Factory/GameFactory");var o=cc._decorator,i=o.ccclass,a=(o.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}var n;return __extends(t,e),n=t,t.prototype.start=function(){this.node.removeComponent(n)},t=n=__decorate([i],t)}(cc.Component));n.default=a,cc._RF.pop()},{"../../Command/CommonSignal":"CommonSignal","../../Factory/GameFactory":"GameFactory"}],TestSingleTouchView:[function(e,t,n){"use strict";cc._RF.push(t,"2761dS0K89JwJjOcqk97q1o","TestSingleTouchView"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../Factory/GameFactory"),i=e("../SingleTouchView"),a=cc._decorator,r=a.ccclass,s=(a.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onSetParent=function(e){console.error("parent:",e)},t.prototype.onTouchStart=function(){o.gFactory.putObj("TestNode",this.node)},t.prototype.onTouchEnd=function(){console.error("ontouchend")},t=__decorate([r],t)}(i.default));n.default=s,cc._RF.pop()},{"../../Factory/GameFactory":"GameFactory","../SingleTouchView":"SingleTouchView"}],Test:[function(e,t,n){"use strict";cc._RF.push(t,"df1af1sWs9HWZ8cYz9x0Gs9","Test"),Object.defineProperty(n,"__esModule",{value:!0});var o=cc._decorator,i=o.ccclass,a=(o.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onLoad=function(){this.node.active=!1},t.prototype.start=function(){},t=__decorate([i],t)}(cc.Component));n.default=a,cc._RF.pop()},{}],ThemeView:[function(e,t,n){"use strict";cc._RF.push(t,"2b2d1k5+RZFrKLwiNmu7pk+","ThemeView"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../View/BaseView"),i=e("../../Global/Theme"),a=e("../../Command/CommonSignal"),r=cc._decorator,s=r.ccclass,l=(r.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onLoad=function(){a.GameThemeInit.inst.addListenerOne(this.onThemeInit,this)},t.prototype.start=function(){},t.prototype.onThemeInit=function(e){this.node.active=this.node.name==i.Theme[e]},t=__decorate([s],t)}(o.default));n.default=l,cc._RF.pop()},{"../../Command/CommonSignal":"CommonSignal","../../Global/Theme":"Theme","../../View/BaseView":"BaseView"}],Theme:[function(e,t,n){"use strict";cc._RF.push(t,"5fef4dbBENAfYW6Tw8oUA62","Theme"),Object.defineProperty(n,"__esModule",{value:!0}),function(e){e[e.Blue=0]="Blue",e[e.Green=1]="Green",e[e.Red=2]="Red"}(n.Theme||(n.Theme={})),cc._RF.pop()},{}],TimeEffectAnimation:[function(e,t,n){"use strict";cc._RF.push(t,"603e6ws6zRH9IcpX4uo/ZlK","TimeEffectAnimation"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../Utils/FrameAniBase"),i=e("../Command/CommonSignal"),a=cc._decorator,r=a.ccclass,s=(a.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onLoad=function(){e.prototype.onLoad.call(this),this.node.opacity=0,i.TimeAnimationStateChanged.inst.addListenerOne(this.onPlayStateChanged,this)},t.prototype.onPlayStateChanged=function(e){e?0==this.isPlaying&&this.play():this.stop()},t.prototype.start=function(){},t.prototype.play=function(){this.node.opacity=255,e.prototype.play.call(this)},t.prototype.stop=function(){this.node.opacity=0,e.prototype.stop.call(this)},t=__decorate([r],t)}(o.default));n.default=s,cc._RF.pop()},{"../Command/CommonSignal":"CommonSignal","../Utils/FrameAniBase":"FrameAniBase"}],TimeLabelView:[function(e,t,n){"use strict";cc._RF.push(t,"8e78fIPKARBx69B005nUUwo","TimeLabelView"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../../Command/CommonSignal"),i=e("../../../Controller/ResourceController"),a=e("../../../Utils/Time"),r=e("../../../View/BaseView"),s=e("../../Model/GamePlayModel"),l=cc._decorator,c=l.ccclass,u=(l.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.sec=0,t}return __extends(t,e),Object.defineProperty(t.prototype,"Label",{get:function(){return this.getComponent(cc.Label)},enumerable:!0,configurable:!0}),t.prototype.onLoad=function(){var e=this;o.UpdateTimeNumber.inst.addListenerOne(this.onTimeChanged,this),this.node.active=!1,s.GameTimeInitSignal.inst.addListenerOne(function(t){e.onTimeChanged(t),e.node.active=!0},this)},t.prototype.onTimeChanged=function(e){var t=a.Time.timeFormat(e);"MinuteLabel"==this.node.name?this.Label.string=t.split("/")[0]:"SecondLabel"==this.node.name?this.Label.string=t.split("/")[1]:this.Label.string=t,this.Label.font=e>30?i.ResourceController.inst.getTimeWhiteFont():i.ResourceController.inst.getTimeRedFont();var n=Math.floor(e);n!=this.sec&&("MinuteLabel"==this.node.name||"MinuteLabel"!=this.node.name&&"SecondLabel"!=this.node.name)&&(this.sec=n,this.sec<=5&&o.CountDownSignal.inst.dispatch())},t.prototype.start=function(){},t=__decorate([c],t)}(r.default));n.default=u,cc._RF.pop()},{"../../../Command/CommonSignal":"CommonSignal","../../../Controller/ResourceController":"ResourceController","../../../Utils/Time":"Time","../../../View/BaseView":"BaseView","../../Model/GamePlayModel":"GamePlayModel"}],Time:[function(e,t,n){"use strict";cc._RF.push(t,"87a24xcV95AoII6L5W1ABoI","Time"),Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(){}return e.timeFormat=function(e){var t=Math.floor(e/60),n=Math.floor(e%60),o=n.toString();return n<10&&(o="0"+n),t+"/"+o},e}();n.Time=o,cc._RF.pop()},{}],ToSingleton:[function(e,t,n){"use strict";cc._RF.push(t,"b07299nlSpOIIxOkIMBhUY9","ToSingleton"),Object.defineProperty(n,"__esModule",{value:!0}),n.SingleTon=function(){return function(){function e(){}return Object.defineProperty(e,"inst",{get:function(){return this.ins?this.ins:this.ins=new this},enumerable:!0,configurable:!0}),e}()},cc._RF.pop()},{}],TuneActiveView:[function(e,t,n){"use strict";var o;cc._RF.push(t,"13541XxnktKMKSWnWD/5e3D","TuneActiveView"),Object.defineProperty(n,"__esModule",{value:!0});var i=e("../../Model/GamePlayModel"),a=cc._decorator,r=a.ccclass,s=(a.property,(o={})[i.GameType.Tune_12]={1:cc.v2(-325,590),2:cc.v2(-105,590),3:cc.v2(115,590),4:cc.v2(335,590),5:cc.v2(-325,140),6:cc.v2(-105,140),7:cc.v2(115,140),8:cc.v2(335,140),9:cc.v2(-325,-310),10:cc.v2(-105,-310),11:cc.v2(115,-310),12:cc.v2(335,-310)},o[i.GameType.Tune_11]={1:cc.v2(0,0),2:cc.v2(-220,590),3:cc.v2(0,590),4:cc.v2(220,590),5:cc.v2(-325,140),6:cc.v2(-105,140),7:cc.v2(115,140),8:cc.v2(335,140),9:cc.v2(-325,-310),10:cc.v2(-105,-310),11:cc.v2(115,-310),12:cc.v2(335,-310)},o[i.GameType.Tune_10]={1:cc.v2(0,0),2:cc.v2(-105,590),3:cc.v2(115,590),4:cc.v2(0,0),5:cc.v2(-325,140),6:cc.v2(-105,140),7:cc.v2(115,140),8:cc.v2(335,140),9:cc.v2(-325,-310),10:cc.v2(-105,-310),11:cc.v2(115,-310),12:cc.v2(335,-310)},o[i.GameType.Tune_8]={1:cc.v2(0,0),2:cc.v2(0,0),3:cc.v2(0,0),4:cc.v2(0,0),5:cc.v2(-325,351.83),6:cc.v2(-105,351.83),7:cc.v2(115,351.83),8:cc.v2(335,351.83),9:cc.v2(-325,351.83-310-140),10:cc.v2(-105,351.83-310-140),11:cc.v2(115,351.83-310-140),12:cc.v2(335,351.83-310-140)},o[i.GameType.Tune_7]={1:cc.v2(0,0),2:cc.v2(0,590),3:cc.v2(0,0),4:cc.v2(0,0),5:cc.v2(0,0),6:cc.v2(-220,140),7:cc.v2(0,140),8:cc.v2(220,140),9:cc.v2(0,0),10:cc.v2(-220,-310),11:cc.v2(0,-310),12:cc.v2(220,-310)},o[i.GameType.Tune_6]={1:cc.v2(0,0),2:cc.v2(0,0),3:cc.v2(0,0),4:cc.v2(0,0),5:cc.v2(0,0),6:cc.v2(-220,351.83),7:cc.v2(0,351.83),8:cc.v2(220,351.83),9:cc.v2(0,0),10:cc.v2(-220,351.83-310-140),11:cc.v2(0,351.83-310-140),12:cc.v2(220,351.83-310-140)},o[i.GameType.Tune_5]={1:cc.v2(0,0),2:cc.v2(0,0),3:cc.v2(0,0),4:cc.v2(0,0),5:cc.v2(-220,295.007),6:cc.v2(0,295.007),7:cc.v2(220.474,295.007),8:cc.v2(0,0),9:cc.v2(-105,-154.993),10:cc.v2(115,-154.993),11:cc.v2(0,0),12:cc.v2(0,0)},o[i.GameType.Tune_4]={1:cc.v2(0,0),2:cc.v2(0,0),3:cc.v2(0,0),4:cc.v2(0,0),5:cc.v2(0,0),6:cc.v2(-105,351.83),7:cc.v2(115,351.83),8:cc.v2(0,0),9:cc.v2(0,0),10:cc.v2(-105,351.83-310-140),11:cc.v2(115,351.83-310-140),12:cc.v2(0,0)},o[i.GameType.Tune_3]={1:cc.v2(0,0),2:cc.v2(0,0),3:cc.v2(0,0),4:cc.v2(0,0),5:cc.v2(0,0),6:cc.v2(-220,140),7:cc.v2(0,140),8:cc.v2(220,140),9:cc.v2(0,0),10:cc.v2(0,0),11:cc.v2(0,0),12:cc.v2(0,0)},o),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onLoad=function(){var e=this;i.TuneIndexInitSignal.inst.addListenerTwo(function(t,n){e.node.active=t.indexOf(parseInt(e.node.name))>=0,e.node.setPosition(s[n][e.node.name])},this)},t=__decorate([r],t)}(cc.Component);n.default=l,cc._RF.pop()},{"../../Model/GamePlayModel":"GamePlayModel"}],TuneRootView:[function(e,t,n){"use strict";cc._RF.push(t,"1bc85IJkrBEkrVmp39ubeik","TuneRootView"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../../App/App"),i=e("../../../Factory/GameFactory"),a=e("../../../Global/GameRule"),r=e("../../../Model/PlayModelProxy"),s=e("../../../Utils/Cocos"),l=e("../../Model/Ball/BallModel"),c=e("./BallColorView"),u=cc._decorator,d=u.ccclass,h=(u.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),Object.defineProperty(t.prototype,"BallRoot",{get:function(){return this.node.getChildByName("BallRoot")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Match",{get:function(){return this.node.getChildByName("Match")},enumerable:!0,configurable:!0}),t.prototype.onLoad=function(){l.BallCreatedSignal.inst.addListenerOne(this.onBallCreated,this),l.BallTuneIndexChangedSignal.inst.addListenerTwo(this.onBallTuneChanged,this),o.default.TuneMatchMap.add(parseInt(this.node.name),this.Match),o.default.TuneRootMap.add(parseInt(this.node.name),this.BallRoot)},t.prototype.onBallCreated=function(e){if(0!=this.node.active&&e.TuneIndex.toString()==this.node.name){var t=i.gFactory.getObj("Ball",e);t.name=e.ID,t.zIndex=e.SortIndex,this.BallRoot.addChild(t),t.setPosition(a.GetBallPos(e.SortIndex,r.PlayModelProxy.inst.Theme))}},t.prototype.onBallTuneChanged=function(e,t){if(this.node.name==t.toString()){var n=c.default.BallNodeMap.get(e.ID);n&&(n.setPosition(s.ConvertToNodeSpaceAR(n,this.BallRoot)),n.setParent(this.BallRoot),n.zIndex=e.SortIndex)}},t=__decorate([d],t)}(cc.Component));n.default=h,cc._RF.pop()},{"../../../App/App":"App","../../../Factory/GameFactory":"GameFactory","../../../Global/GameRule":"GameRule","../../../Model/PlayModelProxy":"PlayModelProxy","../../../Utils/Cocos":"Cocos","../../Model/Ball/BallModel":"BallModel","./BallColorView":"BallColorView"}],TuneScoreAnimation:[function(e,t,n){"use strict";cc._RF.push(t,"eda48taKwNPeaSXS/Y8Uh7X","TuneScoreAnimation"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../../Utils/FrameAniBase"),i=e("../../Model/GamePlayModel"),a=cc._decorator,r=a.ccclass,s=(a.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onLoad=function(){var t=this;e.prototype.onLoad.call(this),this.Interval=.07,this.node.opacity=0,i.BallSortDoneSignal.inst.addListenerOne(function(e){t.node.parent.name==e.toString()&&(t.node.opacity=255,t.play())},this)},t.prototype.onComplete=function(){this.node.runAction(cc.fadeOut(.1))},t=__decorate([r],t)}(o.default));n.default=s,cc._RF.pop()},{"../../../Utils/FrameAniBase":"FrameAniBase","../../Model/GamePlayModel":"GamePlayModel"}],UpdateController:[function(e,t,n){"use strict";cc._RF.push(t,"b3cadc9oLxMlaTWSqS0DgLW","UpdateController"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../Utils/ToSingleton"),i=cc._decorator,a=i.ccclass,r=(i.property,function(e){function t(){var t=e.call(this)||this;return t.assetsManager=null,t.STORAGE_PATH=(window.jsb&&jsb.fileUtils?jsb.fileUtils.getWritablePath():"/")+"hot-update",t.MANIFEST_PAth="",t.isUpdating=!1,t.manifest=null,t.completeCallback=[],t.startCallback=[],t.errorCallback=[],t.progressCallback=[],t.init(),t}return __extends(t,e),t.prototype.init=function(){window.jsb&&(this.assetsManager=new jsb.AssetsManager(this.MANIFEST_PAth,this.STORAGE_PATH,this.versionCompareHandle),this.assetsManager.setVerifyCallback(this.verifyCallback.bind(this)),cc.sys.os===cc.sys.OS_ANDROID&&this.assetsManager.setMaxConcurrentTask(2))},t.prototype.setManifest=function(e){this.manifest=e},t.prototype.getVersion=function(){return null==this.assetsManager?"":null==this.assetsManager.getLocalManifest()?"":this.assetsManager.getLocalManifest().getVersion()},t.prototype.addCompleteCallback=function(e,t){this.completeCallback.push({target:t,callback:e})},t.prototype.addErrorCallback=function(e,t){this.errorCallback.push({target:e,callback:t})},t.prototype.addStartCallback=function(e,t){this.startCallback.push({target:e,callback:t})},t.prototype.addProgressCallback=function(e,t){this.progressCallback.push({target:e,callback:t})},t.prototype.triggeError=function(e,t){void 0===t&&(t=!1),this.onError(e,t)},t.prototype.onError=function(e,t){void 0===t&&(t=!1),console.log(" this.errorCallback:",this.errorCallback.length,"error:",e);for(var n=0,o=this.errorCallback;n<o.length;n++){var i=o[n];i.callback.apply(i.target,[e,t])}},t.prototype.onComplete=function(e,t){void 0===t&&(t=!1),console.log(" on update complete:",this.getVersion()),console.log("storagePath:",this.getStoragePath()),console.log("search path:",this.getSearchPaths());for(var n=function(n){setTimeout(function(){n.callback.apply(n.target,[e,t])},0)},o=0,i=this.completeCallback;o<i.length;o++){n(i[o])}},t.prototype.getStoragePath=function(){return this.assetsManager?this.assetsManager.getStoragePath():""},t.prototype.getSearchPaths=function(){return window.jsb?jsb.fileUtils.getSearchPaths():""},t.prototype.onStart=function(e,t){void 0===t&&(t=!1),console.log(" this.startCallback:",this.startCallback.length);for(var n=0,o=this.startCallback;n<o.length;n++){var i=o[n];i.callback.apply(i.target,[e,t])}},t.prototype.onProgress=function(e,t){for(var n=0,o=this.progressCallback;n<o.length;n++){var i=o[n];i.callback.apply(i.target,[e,t])}},t.prototype.loadCustomManifest=function(e){if(null!=this.assetsManager&&this.assetsManager.getState()==jsb.AssetsManager.State.UNINITED){var t=new jsb.Manifest(e,this.STORAGE_PATH);this.assetsManager.loadLocalManifest(t,this.STORAGE_PATH)}},t.prototype.checkForUpdate=function(){this.onComplete("no need to update.")},t.prototype.checkUpdateCallback=function(e){switch(console.log("checkUpdateCallback Code: "+e.getEventCode()),e.getEventCode()){case jsb.EventAssetsManager.ERROR_NO_LOCAL_MANIFEST:this.onError("No local manifest file found, hot update skipped.");break;case jsb.EventAssetsManager.ERROR_DOWNLOAD_MANIFEST:case jsb.EventAssetsManager.ERROR_PARSE_MANIFEST:this.onError("Fail to download manifest file, hot update skipped.");break;case jsb.EventAssetsManager.ALREADY_UP_TO_DATE:var t=this.assetsManager.getRemoteManifest()?this.assetsManager.getRemoteManifest().getVersion():" null",n=this.assetsManager.getLocalManifest()?this.assetsManager.getLocalManifest().getVersion():"null";this.onComplete("Already up to date with the latest remote version :"+t+", local version :"+n);break;case jsb.EventAssetsManager.NEW_VERSION_FOUND:this.isUpdating=!1;var o=this.assetsManager.getLocalManifest()?this.assetsManager.getLocalManifest().getVersion():"null",i=this.assetsManager.getRemoteManifest()?this.assetsManager.getRemoteManifest().getVersion():"null";if(console.log("New version found, old:",o,", new: ",i),"null"==o||"null"==i);else{console.log("storage path:",this.assetsManager.getStoragePath());var a=o.split(".")[0];i.split(".")[0]>a?this.onStart("new version found, go to store to download new app.",!0):(this.onStart("new version found, update process start.",!1),this.updateVersion())}break;default:return}},t.prototype.getUpdateDescription=function(){return""},t.prototype.updateVersion=function(){if(null!=this.assetsManager&&!this.isUpdating)if([jsb.AssetsManager.State.UPDATING,jsb.AssetsManager.State.UNZIPPING,jsb.AssetsManager.State.UP_TO_DATE].indexOf(this.assetsManager.getState())>=0)this.onComplete("no need to update: "+this.assetsManager.getState(),!1);else{if(this.assetsManager.getState()===jsb.AssetsManager.State.UNINITED){var e=this.manifest.nativeUrl;cc.loader.md5Pipe&&(e=cc.loader.md5Pipe.transformURL(e)),this.assetsManager.loadLocalManifest(e)}this.assetsManager.setEventCallback(this.updateCallback.bind(this)),console.log(" start update ...:",this.assetsManager.getState()),this.assetsManager.update(),this.isUpdating=!0}},t.prototype.versionToInt=function(e){return parseInt(e.toString().split(".").join(""))},t.prototype.versionToString=function(e){return Math.floor(e/100)+"."+Math.floor(e/10)%10+"."+Math.floor(e)%10},t.prototype.updateCallback=function(e){var t=this,n=!1,o=!1,i=null;switch(console.log("update event code:",e.getEventCode()),e.getEventCode()){case jsb.EventAssetsManager.ERROR_NO_LOCAL_MANIFEST:this.onError("No local manifest file found, hot update skipped."),o=!0;break;case jsb.EventAssetsManager.UPDATE_PROGRESSION:var a=e.getPercent();NaN!=a&&"number"==typeof a||(a=0),this.onProgress(e.getMessage()?"Updated file:"+e.getMessage():"Updating:"+(100*a).toFixed(0)+"%",a);break;case jsb.EventAssetsManager.ERROR_DOWNLOAD_MANIFEST:case jsb.EventAssetsManager.ERROR_PARSE_MANIFEST:this.onError("Fail to download manifest file, hot update skipped."),o=!0;break;case jsb.EventAssetsManager.ALREADY_UP_TO_DATE:i=function(){var e=t.assetsManager.getRemoteManifest()?t.assetsManager.getRemoteManifest().getVersion():" null";t.onComplete("Already up to date with the latest remote version :"+e)},o=!0;break;case jsb.EventAssetsManager.UPDATE_FINISHED:i=function(){var n=t.assetsManager.getRemoteManifest()?t.assetsManager.getRemoteManifest().getVersion():" null";t.onComplete("Update finished. new : "+n+e.getMessage(),!0)},n=!0;break;case jsb.EventAssetsManager.UPDATE_FAILED:this.onError("Update failed. "+e.getMessage(),!0);break;case jsb.EventAssetsManager.ERROR_UPDATING:this.onError("Asset update error: "+e.getAssetId()+", "+e.getMessage());break;case jsb.EventAssetsManager.ERROR_DECOMPRESS:this.onError(e.getMessage())}if(o&&(this.assetsManager.setEventCallback(null),this.isUpdating=!1),n){this.assetsManager.setEventCallback(null);var r=jsb.fileUtils.getSearchPaths();console.log("old searchPaths:",r);var s=this.assetsManager.getLocalManifest().getSearchPaths();console.log("new path:",JSON.stringify(s));for(var l=0,c=s;l<c.length;l++){var u=c[l];r.indexOf(u)<0&&Array.prototype.unshift.apply(r,u)}cc.sys.localStorage.setItem("select-game",JSON.stringify(r)),jsb.fileUtils.setSearchPaths(r),console.log("new searchPaths:",JSON.stringify(r)),console.log(" paths storage:",cc.sys.localStorage.getItem("select-game"))}i&&i()},t.prototype.restart=function(){cc.audioEngine.stopAll(),cc.game.restart()},t.prototype.retry=function(){null!=this.assetsManager&&0==this.isUpdating&&this.assetsManager.downloadFailedAssets()},t.prototype.versionCompareHandle=function(e,t){cc.log("JS Custom Version Compare: version A is "+e+", version B is "+t);for(var n=e.split("."),o=t.split("."),i=0;i<n.length;++i){var a=parseInt(n[i]),r=parseInt(o[i]||"0");if(a!==r)return a-r}return o.length>n.length?-1:0},t.prototype.verifyCallback=function(e,t){var n=t.compressed,o=t.md5,i=t.path;t.size;return n?("Verification passed : "+i,!0):("Verification passed : "+i+" ("+o+")",!0)},t.prototype.destory=function(){this.assetsManager&&this.assetsManager.setEventCallback(null),this.startCallback=[],this.completeCallback=[],this.errorCallback=[],this.progressCallback=[]},t=__decorate([a],t)}(o.SingleTon()));n.default=r,cc._RF.pop()},{"../Utils/ToSingleton":"ToSingleton"}],WildAdAnimation:[function(e,t,n){"use strict";cc._RF.push(t,"a477475bJVCr55eJoQUua8c","WildAdAnimation"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../utils/FrameAniBase"),i=e("../Utils/Signal"),a=cc._decorator,r=a.ccclass,s=(a.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(i.BaseSignal));n.WildAdAnimationIsPlaySignal=s;var l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.isStart=!1,t}return __extends(t,e),t.prototype.onStartPlay=function(){var e=this;s.inst.dispatchOne(!0),0==this.isStart&&(this.isStart=!0,setTimeout(function(){e.isStart=!1,e.stop(),e.node.opacity=0,setTimeout(function(){e.node.opacity=255,e.Loop=!0,e.play()},8e3)},2e3))},t.prototype.onComplete=function(){s.inst.dispatchOne(!1)},t=__decorate([r],t)}(o.default);n.default=l,cc._RF.pop()},{"../Utils/Signal":"Signal","../utils/FrameAniBase":"FrameAniBase"}],WildAdButton:[function(e,t,n){"use strict";cc._RF.push(t,"465d6JCvm9NEa4D+PNSyYjD","WildAdButton"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../Utils/Signal"),i=cc._decorator,a=i.ccclass,r=(i.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(o.BaseSignal));n.HideWildAdButtonSignal=r;var s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(o.BaseSignal);n.WildAdButtonClick=s;var l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(o.BaseSignal);n.WildButtonReadySignal=l;var c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onLoad=function(){var e=this;this.node.active=cc.sys.isMobile&&cc.sys.isBrowser&&cc.sys.os==cc.sys.OS_ANDROID,this.node.parent.active=this.node.active,this.node.scale=0,l.inst.addOnce(function(){console.log(" Wild button :",e.node.active),e.node.active&&e.node.runAction(cc.sequence(cc.scaleTo(.1,1),cc.callFunc(function(){e.node.on(cc.Node.EventType.TOUCH_END,function(){s.inst.dispatch()},e)})))},this),r.inst.addListener(function(){e.node.active=!1},this)},t=__decorate([a],t)}(cc.Component);n.default=c,cc._RF.pop()},{"../Utils/Signal":"Signal"}],table:[function(e,t,n){"use strict";cc._RF.push(t,"3128c+W1yBHhojwtdbR5q6G","table"),Object.defineProperty(n,"__esModule",{value:!0}),function(e){e[e.BangZhuYeMian1=1]="BangZhuYeMian1",e[e.BangZhuYeMian2=2]="BangZhuYeMian2",e[e.ZanTingMiaoShu=3]="ZanTingMiaoShu",e[e.MianFeiZanTing=4]="MianFeiZanTing",e[e.ZanTingKouFen=5]="ZanTingKouFen",e[e.DeFen=6]="DeFen",e[e.BuShuXiaoHao=7]="BuShuXiaoHao",e[e.ShiJianJiaCheng=8]="ShiJianJiaCheng",e[e.ZuiZhongZongFen=9]="ZuiZhongZongFen",e[e.KanGuangGaoShiBai=10]="KanGuangGaoShiBai",e[e.ZengJiaShiJian=11]="ZengJiaShiJian",e[e.MianFeiJinRuXiaYiGuan=12]="MianFeiJinRuXiaYiGuan",e[e.TiJiaoFenShuMianFeiZanTing=13]="TiJiaoFenShuMianFeiZanTing",e[e.TiJiaoFenShuKouFenZanTing=14]="TiJiaoFenShuKouFenZanTing"}(n.En_ID||(n.En_ID={})),function(e){e[e.ZanTingJieMian=1]="ZanTingJieMian",e[e.BangZhuJieMian=2]="BangZhuJieMian",e[e.GuangGaoJieMian=3]="GuangGaoJieMian",e[e.JieSuanJieMian=4]="JieSuanJieMian",e[e.TiJiaoJieMian=5]="TiJiaoJieMian"}(n.En_View||(n.En_View={})),function(e){e[e.BangZhuYeMian1=1]="BangZhuYeMian1",e[e.BangZhuYeMian2=2]="BangZhuYeMian2",e[e.ZanTingMiaoShu=3]="ZanTingMiaoShu",e[e.MianFeiZanTing=4]="MianFeiZanTing",e[e.ZanTingKouFen=5]="ZanTingKouFen",e[e.DeFen=6]="DeFen",e[e.BuShuXiaoHao=7]="BuShuXiaoHao",e[e.ShiJianJiaCheng=8]="ShiJianJiaCheng",e[e.ZuiZhongZongFen=9]="ZuiZhongZongFen",e[e.KanGuangGaoShiBai=10]="KanGuangGaoShiBai",e[e.ZengJiaShiJian=11]="ZengJiaShiJian",e[e.MianFeiJinRuXiaYiGuan=12]="MianFeiJinRuXiaYiGuan",e[e.TiJiaoFenShuMianFeiZanTing=13]="TiJiaoFenShuMianFeiZanTing",e[e.TiJiaoFenShuKouFenZanTing=14]="TiJiaoFenShuKouFenZanTing"}(n.Es_ID||(n.Es_ID={})),function(e){e[e.ZanTingJieMian=1]="ZanTingJieMian",e[e.BangZhuJieMian=2]="BangZhuJieMian",e[e.GuangGaoJieMian=3]="GuangGaoJieMian",e[e.JieSuanJieMian=4]="JieSuanJieMian",e[e.TiJiaoJieMian=5]="TiJiaoJieMian"}(n.Es_View||(n.Es_View={})),function(e){e[e.BangZhuYeMian1=1]="BangZhuYeMian1",e[e.BangZhuYeMian2=2]="BangZhuYeMian2",e[e.ZanTingMiaoShu=3]="ZanTingMiaoShu",e[e.MianFeiZanTing=4]="MianFeiZanTing",e[e.ZanTingKouFen=5]="ZanTingKouFen",e[e.DeFen=6]="DeFen",e[e.BuShuXiaoHao=7]="BuShuXiaoHao",e[e.ShiJianJiaCheng=8]="ShiJianJiaCheng",e[e.ZuiZhongZongFen=9]="ZuiZhongZongFen",e[e.KanGuangGaoShiBai=10]="KanGuangGaoShiBai",e[e.ZengJiaShiJian=11]="ZengJiaShiJian",e[e.MianFeiJinRuXiaYiGuan=12]="MianFeiJinRuXiaYiGuan",e[e.TiJiaoFenShuMianFeiZanTing=13]="TiJiaoFenShuMianFeiZanTing",e[e.TiJiaoFenShuKouFenZanTing=14]="TiJiaoFenShuKouFenZanTing"}(n.Fil_ID||(n.Fil_ID={})),function(e){e[e.ZanTingJieMian=1]="ZanTingJieMian",e[e.BangZhuJieMian=2]="BangZhuJieMian",e[e.GuangGaoJieMian=3]="GuangGaoJieMian",e[e.JieSuanJieMian=4]="JieSuanJieMian",e[e.TiJiaoJieMian=5]="TiJiaoJieMian"}(n.Fil_View||(n.Fil_View={})),function(e){e[e.BangZhuYeMian1=1]="BangZhuYeMian1",e[e.BangZhuYeMian2=2]="BangZhuYeMian2",e[e.ZanTingMiaoShu=3]="ZanTingMiaoShu",e[e.MianFeiZanTing=4]="MianFeiZanTing",e[e.ZanTingKouFen=5]="ZanTingKouFen",e[e.DeFen=6]="DeFen",e[e.BuShuXiaoHao=7]="BuShuXiaoHao",e[e.ShiJianJiaCheng=8]="ShiJianJiaCheng",e[e.ZuiZhongZongFen=9]="ZuiZhongZongFen",e[e.KanGuangGaoShiBai=10]="KanGuangGaoShiBai",e[e.ZengJiaShiJian=11]="ZengJiaShiJian",e[e.MianFeiJinRuXiaYiGuan=12]="MianFeiJinRuXiaYiGuan",e[e.TiJiaoFenShuMianFeiZanTing=13]="TiJiaoFenShuMianFeiZanTing",e[e.TiJiaoFenShuKouFenZanTing=14]="TiJiaoFenShuKouFenZanTing"}(n.Id_ID||(n.Id_ID={})),function(e){e[e.ZanTingJieMian=1]="ZanTingJieMian",e[e.BangZhuJieMian=2]="BangZhuJieMian",e[e.GuangGaoJieMian=3]="GuangGaoJieMian",e[e.JieSuanJieMian=4]="JieSuanJieMian",e[e.TiJiaoJieMian=5]="TiJiaoJieMian"}(n.Id_View||(n.Id_View={})),function(e){e[e.BangZhuYeMian1=1]="BangZhuYeMian1",e[e.BangZhuYeMian2=2]="BangZhuYeMian2",e[e.ZanTingMiaoShu=3]="ZanTingMiaoShu",e[e.MianFeiZanTing=4]="MianFeiZanTing",e[e.ZanTingKouFen=5]="ZanTingKouFen",e[e.DeFen=6]="DeFen",e[e.BuShuXiaoHao=7]="BuShuXiaoHao",e[e.ShiJianJiaCheng=8]="ShiJianJiaCheng",e[e.ZuiZhongZongFen=9]="ZuiZhongZongFen",e[e.KanGuangGaoShiBai=10]="KanGuangGaoShiBai",e[e.ZengJiaShiJian=11]="ZengJiaShiJian",e[e.MianFeiJinRuXiaYiGuan=12]="MianFeiJinRuXiaYiGuan",e[e.TiJiaoFenShuMianFeiZanTing=13]="TiJiaoFenShuMianFeiZanTing",e[e.TiJiaoFenShuKouFenZanTing=14]="TiJiaoFenShuKouFenZanTing"}(n.In_ID||(n.In_ID={})),function(e){e[e.ZanTingJieMian=1]="ZanTingJieMian",e[e.BangZhuJieMian=2]="BangZhuJieMian",e[e.GuangGaoJieMian=3]="GuangGaoJieMian",e[e.JieSuanJieMian=4]="JieSuanJieMian",e[e.TiJiaoJieMian=5]="TiJiaoJieMian"}(n.In_View||(n.In_View={})),function(e){e[e.BangZhuYeMian1=1]="BangZhuYeMian1",e[e.BangZhuYeMian2=2]="BangZhuYeMian2",e[e.ZanTingMiaoShu=3]="ZanTingMiaoShu",e[e.MianFeiZanTing=4]="MianFeiZanTing",e[e.ZanTingKouFen=5]="ZanTingKouFen",e[e.DeFen=6]="DeFen",e[e.BuShuXiaoHao=7]="BuShuXiaoHao",e[e.ShiJianJiaCheng=8]="ShiJianJiaCheng",e[e.ZuiZhongZongFen=9]="ZuiZhongZongFen",e[e.KanGuangGaoShiBai=10]="KanGuangGaoShiBai",e[e.ZengJiaShiJian=11]="ZengJiaShiJian",e[e.MianFeiJinRuXiaYiGuan=12]="MianFeiJinRuXiaYiGuan",e[e.TiJiaoFenShuMianFeiZanTing=13]="TiJiaoFenShuMianFeiZanTing",e[e.TiJiaoFenShuKouFenZanTing=14]="TiJiaoFenShuKouFenZanTing"}(n.Pt_ID||(n.Pt_ID={})),function(e){e[e.ZanTingJieMian=1]="ZanTingJieMian",e[e.BangZhuJieMian=2]="BangZhuJieMian",e[e.GuangGaoJieMian=3]="GuangGaoJieMian",e[e.JieSuanJieMian=4]="JieSuanJieMian",e[e.TiJiaoJieMian=5]="TiJiaoJieMian"}(n.Pt_View||(n.Pt_View={})),function(e){e[e.BangZhuYeMian1=1]="BangZhuYeMian1",e[e.BangZhuYeMian2=2]="BangZhuYeMian2",e[e.ZanTingMiaoShu=3]="ZanTingMiaoShu",e[e.MianFeiZanTing=4]="MianFeiZanTing",e[e.ZanTingKouFen=5]="ZanTingKouFen",e[e.DeFen=6]="DeFen",e[e.BuShuXiaoHao=7]="BuShuXiaoHao",e[e.ShiJianJiaCheng=8]="ShiJianJiaCheng",e[e.ZuiZhongZongFen=9]="ZuiZhongZongFen",e[e.KanGuangGaoShiBai=10]="KanGuangGaoShiBai",e[e.ZengJiaShiJian=11]="ZengJiaShiJian",e[e.MianFeiJinRuXiaYiGuan=12]="MianFeiJinRuXiaYiGuan",e[e.TiJiaoFenShuMianFeiZanTing=13]="TiJiaoFenShuMianFeiZanTing",e[e.TiJiaoFenShuKouFenZanTing=14]="TiJiaoFenShuKouFenZanTing"}(n.Tl_ID||(n.Tl_ID={})),function(e){e[e.ZanTingJieMian=1]="ZanTingJieMian",e[e.BangZhuJieMian=2]="BangZhuJieMian",e[e.GuangGaoJieMian=3]="GuangGaoJieMian",e[e.JieSuanJieMian=4]="JieSuanJieMian",e[e.TiJiaoJieMian=5]="TiJiaoJieMian"}(n.Tl_View||(n.Tl_View={})),cc._RF.pop()},{}]},{},["AdLayer","Add10s","FlyCnicornAd","WildAdButton","FlyAdCnicornAniamtion","WildAdAnimation","App","CommonSignal","AdController","GameStateController","ResourceController","GameFactory","GamePlaySignal","BallModel","GamePlayModel","FireWorkAnimation","PassLevelAnimation","TuneScoreAnimation","BallColorView","BallPosView","PrefabBaseView","TuneActiveView","TuneRootView","BallBackground","BallMatchView","BallTouchView","BlackView","CompleteView","HelpButtonView","HelpViewLabel","LevelPassView","MenuButtonView","MenuLayerView","MoveCountLabelView","ResultLayerView","RevertButtonView","ScoreLabelView","SoundButtonView","SubmitButtonView","SubmitLayerView","TimeLabelView","Page1","GameRule","Level","Theme","InititalCommand","LoadAudioCommand","LoadJsonCommand","LoadPrefabCommand","StartGameCommand","InitialFacade","LoadingPageMediator","LoadingView","ThemeView","AudioManager","StepManager","PlayModelProxy","TableManager","UpdateController","CelerSDK","Cocos","FrameAniBase","HashMap","LogHandler","Random","Signal","Time","ToSingleton","BaseMediator","BaseView","GlobalSingleTouchMediator","GlobalSingleTouchView","HelpLayerMediator","HelpLayerView","HideIfOnAndroid","NumberChangedView","SingleTouchMediator","SingleTouchView","SliderView","Test","FrontView","TestApp","TestSingleTouchView","TimeEffectAnimation","EaseBaseView","PositionView","RotationView","ScaleView","SkewView","table"]);