window.__require=function e(t,o,n){function i(r,s){if(!o[r]){if(!t[r]){var c=r.split("/");if(c=c[c.length-1],!t[c]){var l="function"==typeof __require&&__require;if(!s&&l)return l(c,!0);if(a)return a(c,!0);throw new Error("Cannot find module '"+r+"'")}}var u=o[r]={exports:{}};t[r][0].call(u.exports,function(e){return i(t[r][1][e]||e)},u,u.exports,e,t,o,n)}return o[r].exports}for(var a="function"==typeof __require&&__require,r=0;r<n.length;r++)i(n[r]);return i}({AdController:[function(e,t,o){"use strict";cc._RF.push(t,"dbb04KnQ3hLBaByYwTfX2Cv","AdController"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.hasBind=!1,t.finishCallback={},t.failedCallback={},t.adCount=0,t.msgMap={},t.volume=0,t}return __extends(t,e),t.prototype.showAd=function(e,t,o){var n=this;0==this.hasBind&&this.bindCallback();var i=e+this.adCount;if(this.msgMap[i]=e,null==this.finishCallback[i]&&(this.finishCallback[i]=[]),this.finishCallback[i].push(t),null==this.failedCallback[i]&&(this.failedCallback[i]=[]),this.failedCallback[i].push(o),CELER_X)celerSDK.showAd(i);else if(cc.director.getScene()&&cc.director.getScene().getChildByName("Canvas")){var a=cc.director.getScene().getChildByName("Canvas");if(a.getChildByName("adNode"))return;var r=new cc.Node("adNode"),s=r.addComponent(cc.VideoPlayer);s.remoteURL="https://vicat.wang/GameRes/catcatcat.mp4",a.width=1464,a.height=2400,a.addChild(r),r.setPosition(0,0),this.volume=cc.audioEngine.getMusicVolume(),cc.audioEngine.setMusicVolume(0),s.node.on("ready-to-play",function(){console.log("ready-to-play"),r.width=1080,r.height=1920,s.play()},this),s.node.on("meta-loaded",function(){console.log("meta-loaded")},this),s.node.on("clicked",function(){if(console.log("clicked"),r.pauseCount++,r.pauseCount>=5){for(var e=document.getElementsByClassName("cocosVideo"),t=0;t<e.length;t++){var o=e.item(t);o&&o.remove()}setTimeout(function(){r.removeFromParent(!0),r.destroy(),n.onAddFaild(i)},0)}},this),s.node.on("playing",function(){console.log("playing")},this),r.pauseCount=0,s.node.on("paused",function(){if(console.log("paused"),r.pauseCount++,r.pauseCount>=5){for(var e=document.getElementsByClassName("cocosVideo"),t=0;t<e.length;t++){var o=e.item(t);o&&o.remove()}setTimeout(function(){r.removeFromParent(!0),r.destroy(),n.onAddFaild(i)},0)}},this),s.node.on("stopped",function(){console.log("stopped")},this),s.node.on("completed",function(){console.log("completed"),s.stop();for(var e=document.getElementsByClassName("cocosVideo"),t=0;t<e.length;t++){var o=e.item(t);o&&o.remove()}setTimeout(function(){r.removeFromParent(!0),r.destroy(),n.onAdFinish(i)},0)},this)}this.adCount++,console.log(" request ad:",i)},t.prototype.bindCallback=function(){this.hasBind=!0,CELER_X&&(celerSDK.onAdPlayFailed(this.onAddFaild.bind(this)),celerSDK.onAdPlayFinished(this.onAdFinish.bind(this)))},t.prototype.onAdFinish=function(e){if(this.finishCallback[e]){for(var t=0,o=this.finishCallback[e];t<o.length;t++){(0,o[t])(this.msgMap[e])}this.finishCallback[e]=null,this.failedCallback[e]=null,this.msgMap[e]=null}CELER_X||cc.audioEngine.setMusicVolume(this.volume)},t.prototype.onAddFaild=function(e){if(this.failedCallback[e]){for(var t=0,o=this.failedCallback[e];t<o.length;t++){(0,o[t])(this.msgMap[e])}this.failedCallback[e]=null,this.finishCallback[e]=null,this.msgMap[e]=null}CELER_X||cc.audioEngine.setMusicVolume(this.volume)},t}(e("../utils/ToSingleton").SingleTon());o.AdController=n,cc._RF.pop()},{"../utils/ToSingleton":"ToSingleton"}],AdLayer:[function(e,t,o){"use strict";cc._RF.push(t,"67391QyhbBGnpPQUpvrThZw","AdLayer"),Object.defineProperty(o,"__esModule",{value:!0});var n,i=e("../Controller/AdController"),a=e("../Controller/GameStateController"),r=e("../Utils/Signal"),s=e("./FlyCnicornAd"),c=e("./WildAdButton"),l=cc._decorator,u=l.ccclass,p=l.property,d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(r.BaseSignal);o.AdFinishSignal=d,function(e){e[e.Cnicorn=0]="Cnicorn",e[e.Sun=1]="Sun"}(n=o.AdType||(o.AdType={}));var h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.AdAtlas=null,t}return __extends(t,e),Object.defineProperty(t.prototype,"Panel",{get:function(){return this.node.getChildByName("NormalPanel")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"WatchAd",{get:function(){return this.Panel.getChildByName("btn_get")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"BackToGame",{get:function(){return this.Panel.getChildByName("btn_back")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Content",{get:function(){return this.Panel.getChildByName("font_freeprop1").getComponent(cc.Sprite)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"SubContent",{get:function(){return this.Panel.getChildByName("font_freeprop2").getComponent(cc.Sprite)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"MoveBonus",{get:function(){return this.Panel.getChildByName("Moves")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Title",{get:function(){return this.Panel.getChildByName("bg_title_freeprop").getComponent(cc.Sprite)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"FailTip",{get:function(){return this.node.getChildByName("FailTip")},enumerable:!0,configurable:!0}),t.prototype.onLoad=function(){var e=this;this.node.active=!1,this.node.scale=1,c.WildAdButtonClick.inst.addListener(function(){e.Show(n.Sun)},this),s.FlyCnicornClickSignal.inst.addListener(function(){e.Show(n.Cnicorn)},this),this.BackToGame.on(cc.Node.EventType.TOUCH_END,function(){setTimeout(function(){e.node.active=!1,a.GameStateController.inst.resume(),s.default.ShowTimeRest=10},0)},this)},t.prototype.onAdFinish=function(e){var t=this;d.inst.dispatch(e),e==n[n.Sun]?CELER_X&&c.HideWildAdButtonSignal.inst.dispatch():CELER_X&&s.RemoveFlyCnicornSignal.inst.dispatch(),setTimeout(function(){t.node.active=!1,a.GameStateController.inst.resume()},0)},t.prototype.onAdFailed=function(e){var t=this;this.FailTip.active=!0,this.Panel.active=!1,e==n[n.Cnicorn]&&s.CnicornWatchFailSignal.inst.dispatch(),setTimeout(function(){t.node.active=!1,a.GameStateController.inst.resume()},2e3)},t.prototype.Show=function(e){var t=this;1!=this.node.active&&(a.GameStateController.inst.pause(!0),this.node.active=!0,this.FailTip.active=!1,this.Panel.active=!0,this.WatchAd.active=!0,e==n.Sun?(this.Title.spriteFrame=this.AdAtlas.getSpriteFrame("font_free"),this.Content.spriteFrame=this.AdAtlas.getSpriteFrame("font_get prop1"),this.SubContent.spriteFrame=this.AdAtlas.getSpriteFrame("font_get prop2"),this.WatchAd.getComponent(cc.Sprite).spriteFrame=this.AdAtlas.getSpriteFrame("btn_getprop"),this.MoveBonus.active=!1):(this.Title.spriteFrame=this.AdAtlas.getSpriteFrame("font_add"),this.Content.spriteFrame=this.AdAtlas.getSpriteFrame("font_addmoves1"),this.SubContent.spriteFrame=this.AdAtlas.getSpriteFrame("font_addmoves2"),this.MoveBonus.active=!0,this.MoveBonus.getComponent(cc.Label).string="3",this.WatchAd.getComponent(cc.Sprite).spriteFrame=this.AdAtlas.getSpriteFrame("btn_addmoves")),this.WatchAd.targetOff(this),this.WatchAd.once(cc.Node.EventType.TOUCH_END,function(){setTimeout(function(){t.WatchAd.active=!1},0),i.AdController.inst.showAd(n[e],function(e){console.log(" watch ad success:",e),t.onAdFinish(e)},function(e){console.log(" watch ad fail:",e),t.onAdFailed(e)})},this))},__decorate([p(cc.SpriteAtlas)],t.prototype,"AdAtlas",void 0),t=__decorate([u],t)}(cc.Component);o.default=h,cc._RF.pop()},{"../Controller/AdController":"AdController","../Controller/GameStateController":"GameStateController","../Utils/Signal":"Signal","./FlyCnicornAd":"FlyCnicornAd","./WildAdButton":"WildAdButton"}],AdaptationWigetView:[function(e,t,o){"use strict";cc._RF.push(t,"4e5d6A0aNBHr7pctNWh6pyy","AdaptationWigetView"),Object.defineProperty(o,"__esModule",{value:!0});var n,i=cc._decorator,a=i.ccclass,r=i.property;(function(e){e[e.Top=0]="Top",e[e.TopLeft=1]="TopLeft",e[e.TopRight=2]="TopRight",e[e.Bottom=3]="Bottom",e[e.BotLeft=4]="BotLeft",e[e.BotRight=5]="BotRight",e[e.Left=6]="Left",e[e.Right=7]="Right",e[e.Center=8]="Center"})(n=o.AlignType||(o.AlignType={}));var s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.alignType=n.Center,t.offset=cc.v3(0,0,0),t}return __extends(t,e),t.prototype.onLoad=function(){cc.sys.isMobile?window.addEventListener("resize",this.onResize.bind(this)):cc.view.on("canvas-resize",this.onResize,this),this.onResize()},t.prototype.onResize=function(){switch(this.alignType){case n.Top:this.alignTop();break;case n.TopLeft:this.alignTopLeft();break;case n.TopRight:this.alignTopRight();break;case n.Bottom:this.alignBottom();break;case n.BotLeft:this.alignBotLeft();break;case n.BotRight:this.alignBotRight();break;case n.Left:this.alignLeft();break;case n.Right:this.alignRight();break;case n.Center:this.alignCenter()}},t.prototype.alignTop=function(){var e=cc.view.getCanvasSize();this.node.setPosition(this.LocalZero.add(cc.v2(e.width/this.UseRatio/2,e.height/this.UseRatio)).add(cc.v2(0,-this.node.height*(1-this.node.anchorY))))},t.prototype.alignTopLeft=function(){var e=cc.view.getCanvasSize();this.node.setPosition(this.LocalZero.add(cc.v2(0,e.height/this.UseRatio)).add(cc.v2(this.node.width*this.node.anchorX,-this.node.height*(1-this.node.anchorY))))},t.prototype.alignTopRight=function(){var e=cc.view.getCanvasSize();this.node.setPosition(this.LocalZero.add(cc.v2(e.width/this.UseRatio,e.height/this.UseRatio)).add(cc.v2(-this.node.width*(1-this.node.anchorX),-this.node.height*(1-this.node.anchorY))))},t.prototype.alignBottom=function(){var e=cc.view.getCanvasSize();this.node.setPosition(this.LocalZero.add(cc.v2(e.width/this.UseRatio/2,0)).add(cc.v2(0,this.node.height*this.node.anchorY)))},t.prototype.alignBotLeft=function(){this.node.setPosition(this.LocalZero.add(cc.v2(this.node.width*this.node.width,this.node.height*this.node.height)))},t.prototype.alignBotRight=function(){var e=cc.view.getCanvasSize();this.node.anchorX=1,this.node.anchorY=0,this.node.setPosition(this.LocalZero.add(cc.v2(e.width/this.UseRatio,0)).add(cc.v2(-this.node.width*(1-this.node.anchorX),this.node.height*this.node.anchorY)))},t.prototype.alignLeft=function(){},t.prototype.alignRight=function(){},t.prototype.alignCenter=function(){},Object.defineProperty(t.prototype,"UseRatio",{get:function(){var e=cc.view.getCanvasSize(),t=cc.view.getDesignResolutionSize(),o=e.width/t.width,n=e.height/t.height;return Math.min(o,n)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"LocalZero",{get:function(){var e=cc.view.getCanvasSize(),t=cc.view.getDesignResolutionSize(),o=e.width/t.width,n=e.height/t.height,i=Math.min(o,n),a=cc.v2(0,0);return a=o<n?cc.v2(0,-(e.height/i-t.height)/2):o>n?cc.v2(-(e.width/i-t.width)/2,0):cc.v2(0,0),this.node.parent.convertToNodeSpaceAR(a)},enumerable:!0,configurable:!0}),__decorate([r({type:cc.Enum(n)})],t.prototype,"alignType",void 0),__decorate([r],t.prototype,"offset",void 0),t=__decorate([a],t)}(cc.Component);o.default=s,cc._RF.pop()},{}],AddAnimation:[function(e,t,o){"use strict";cc._RF.push(t,"b3d976wEFpCQpT03NFZY3mc","AddAnimation"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../../Utils/FrameAniBase"),i=cc._decorator,a=i.ccclass,r=(i.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t=__decorate([a],t)}(n.default));o.default=r,cc._RF.pop()},{"../../../Utils/FrameAniBase":"FrameAniBase"}],Annealing:[function(e,t,o){"use strict";cc._RF.push(t,"c26f77+I9xO1a5iP/sBTn/P","Annealing"),Object.defineProperty(o,"__esModule",{value:!0});var n,i=e("../Utils/Cocos"),a=e("../Utils/Random");(function(e){e[e.Min=0]="Min",e[e.Max=1]="Max"})(n=o.AnnealType||(o.AnnealType={}));var r=function(){function e(e,t,o,n,i,a,r,s){void 0===a&&(a=1e-4),void 0===r&&(r=30),void 0===s&&(s=100),this.totalOutLoop=200,this.totalInnerLoop=500,this.minTemperate=1e-4,this.maxStableCount=30,this.stableCount=0,this.xRange={min:0,max:0},this.x0=0,this.x1=0,this.y0=0,this.y1=0,this.t=0,this.startD=100,this.type=e,this.totalInnerLoop=o,this.totalOutLoop=t,this.model=n,this.xRange.min=i.min,this.xRange.max=i.max,this.minTemperate=a,this.maxStableCount=r,this.startD=s}return Object.defineProperty(e.prototype,"Temperate",{get:function(){return 100*Math.pow(.95,this.t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"BaseStep",{get:function(){return this.Temperate/100*this.startD},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Step",{get:function(){return(1-this.t/this.totalOutLoop)*Math.abs(this.xRange.max-this.xRange.min)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"AcceptRate",{get:function(){return Math.pow(Math.E,-Math.abs(this.f(this.x1)-this.f(this.x0))/this.Temperate)},enumerable:!0,configurable:!0}),e.prototype.f=function(e){return this.model.getAnnealingValue(e)},Object.defineProperty(e.prototype,"isEndLoop",{get:function(){return this.t>=this.totalOutLoop||this.Temperate<=this.minTemperate||this.stableCount>=this.maxStableCount},enumerable:!0,configurable:!0}),e.prototype.loop=function(){for(this.t=0,this.stableCount=0,this.x0=a.Random.getRandom(this.xRange.min,this.xRange.max);;){for(var e=0;e++<=this.totalInnerLoop;){this.y0=this.f(this.x0);var t=a.Random.getRandom()>.5?1:-1,o=a.Random.getRandom()*this.Step+this.BaseStep;if(o%=t>0?Math.max(Math.floor(this.xRange.max-this.x0),1):Math.max(Math.floor(this.x0-this.xRange.min),1),o*=t,this.x1=this.x0+o,this.y1=this.f(this.x1),i.Approx(this.y0,this.y1))this.stableCount++;else if(this.stableCount=0,this.type==n.Max)if(this.y1>this.y0)this.x0=this.x1;else a.Random.getRandom()<=this.AcceptRate&&(this.x0=this.x1);else if(this.y1<this.y0)this.x0=this.x1;else a.Random.getRandom()<=this.AcceptRate&&(this.x0=this.x1);if(this.stableCount>=this.maxStableCount)break}if(this.t++,this.isEndLoop)break}return this.x0},e}();o.Annealing=r,cc._RF.pop()},{"../Utils/Cocos":"Cocos","../Utils/Random":"Random"}],App:[function(e,t,o){"use strict";cc._RF.push(t,"eaeeaWDD5pJfqkUameEwNsk","App"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../Controller/ResourceController"),i=e("../Initialization/Facade/InitialFacade"),a=e("../Model/PlayModelProxy"),r=e("../Utils/Signal"),s=cc._decorator,c=s.ccclass,l=s.property,u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(r.BaseSignal);o.StartBindAtlasSignal=u;var p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.UI=null,t.PauseUI=null,t.ResultUI=null,t.UIAnimation=null,t.GamePlayAnimation=null,t.Add=null,t.Sub=null,t.ShowScore=null,t.TimeRed=null,t.TimeWhite=null,t.Result=null,t}return __extends(t,e),t.prototype.onLoad=function(){console.log(" app onload "),this.UI&&n.ResourceController.inst.setAtlas(this.UI),this.PauseUI&&n.ResourceController.inst.setPauseAtlas(this.PauseUI),this.ResultUI&&n.ResourceController.inst.setResultAtlas(this.ResultUI),this.Result&&n.ResourceController.inst.setFont(n.Font.ResultScore,this.Result),this.Add&&n.ResourceController.inst.setFont(n.Font.AddScore,this.Add),this.Sub&&n.ResourceController.inst.setFont(n.Font.SubScore,this.Sub),this.ShowScore&&n.ResourceController.inst.setFont(n.Font.ShowScore,this.ShowScore),this.TimeRed&&n.ResourceController.inst.setFont(n.Font.TimeRed,this.TimeRed),this.TimeWhite&&n.ResourceController.inst.setFont(n.Font.TimeWhite,this.TimeWhite),this.UIAnimation&&n.ResourceController.inst.pushAnimationAtlas(n.AnimationType.UI,this.UIAnimation),this.GamePlayAnimation&&n.ResourceController.inst.pushAnimationAtlas(n.AnimationType.GamePlay,this.GamePlayAnimation),cc.game.setFrameRate(60),cc.debug.setDisplayStats(!CELER_X)},t.prototype.start=function(){i.InitialFacade.inst.start()},t.prototype.update=function(e){a.PlayModelProxy.inst.addGameTime(-e)},__decorate([l(cc.SpriteAtlas)],t.prototype,"UI",void 0),__decorate([l(cc.SpriteAtlas)],t.prototype,"PauseUI",void 0),__decorate([l(cc.SpriteAtlas)],t.prototype,"ResultUI",void 0),__decorate([l(cc.SpriteAtlas)],t.prototype,"UIAnimation",void 0),__decorate([l(cc.SpriteAtlas)],t.prototype,"GamePlayAnimation",void 0),__decorate([l(cc.Font)],t.prototype,"Add",void 0),__decorate([l(cc.Font)],t.prototype,"Sub",void 0),__decorate([l(cc.Font)],t.prototype,"ShowScore",void 0),__decorate([l(cc.Font)],t.prototype,"TimeRed",void 0),__decorate([l(cc.Font)],t.prototype,"TimeWhite",void 0),__decorate([l(cc.Font)],t.prototype,"Result",void 0),t=__decorate([c],t)}(cc.Component);o.default=p,cc._RF.pop()},{"../Controller/ResourceController":"ResourceController","../Initialization/Facade/InitialFacade":"InitialFacade","../Model/PlayModelProxy":"PlayModelProxy","../Utils/Signal":"Signal"}],AudioManager:[function(e,t,o){"use strict";cc._RF.push(t,"88c70Ktw0pBKKUTDtyQ2NkZ","AudioManager"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../Utils/HashMap"),i=e("../Command/CommonSignal"),a=e("../Controller/GameStateController"),r=e("../Utils/ToSingleton"),s=e("../Model/PlayModelProxy"),c=e("../GamePlay/View/Animation/OKAnimation"),l=e("../GamePlay/View/Game/SliceView"),u=e("../GamePlay/Model/GameLogic"),p=e("../GamePlay/View/Animation/BoomAnimation"),d=e("../GamePlay/View/Animation/StarAnimation");window.oncanplay&&(window.oncanplay=function(){f.canPlay=!0});var h="sounds/",f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.audioID={},t.effectCount=0,t.clips=new n.HashMap,t.effectVolumeScale=1,t.musicVolumeScale=.8,t}return __extends(t,e),Object.defineProperty(t.prototype,"EffectCount",{get:function(){return this.effectCount},set:function(e){this.effectCount=e,this.effectCount=Math.max(0,this.effectCount)},enumerable:!0,configurable:!0}),t.prototype.init=function(e,t){var o=this;console.log(" start load AudioClip ");var n=this;cc.loader.loadRes(h+"bgm",cc.AudioClip,function(e,o){t&&t(e/o)},function(t,o){t?console.error(t):("string"==typeof o._audio&&cc.loader._cache&&cc.loader._cache[o._audio]&&cc.loader._cache[o._audio].buffer&&(o._audio=cc.loader._cache[o._audio].buffer),n.clips.add(o.name,o),e&&e(),n.playMusic("bgm",!0))}),cc.loader.loadResDir(h,function(e,t,n){if(e)console.error(e);else for(var i=0,a=t;i<a.length;i++){var r=a[i];"string"==typeof r._audio&&cc.loader._cache&&cc.loader._cache[r._audio]&&cc.loader._cache[r._audio].buffer&&(r._audio=cc.loader._cache[r._audio].buffer),o.clips.has(r.name)||o.clips.add(r.name,r)}}),this.bindSignal()},t.prototype.setEffectVolume=function(e){this.effectVolumeScale=1,cc.audioEngine.setEffectsVolume(e*this.effectVolumeScale)},t.prototype.setMusicVolume=function(e){this.musicVolumeScale=1,cc.audioEngine.setMusicVolume(e*this.musicVolumeScale)},Object.defineProperty(t.prototype,"EffectVolume",{get:function(){return cc.audioEngine.getEffectsVolume()/this.effectVolumeScale},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"MusicVolume",{get:function(){return cc.audioEngine.getMusicVolume()/this.musicVolumeScale},enumerable:!0,configurable:!0}),t.prototype.bindSignal=function(){var e=this;this.setEffectVolume(1),this.setMusicVolume(1),i.UpdateTimeNumber.inst.addListener(function(t){if(t>=30){if(cc.audioEngine.getState(e.audioID.bgm)==cc.audioEngine.AudioState.PLAYING)return;e.playMusic("bgm",!0)}else{if(cc.audioEngine.getState(e.audioID.bgm_30)==cc.audioEngine.AudioState.PLAYING)return;e.playMusic("bgm_30",!0)}},this),s.StartCountSignal.inst.addListener(function(){e.playEffect("start_count")},this),i.ScoreCountingSignal.inst.addListener(function(){e.audioID.scoreCount||e.playEffect("scoreCount",!1,function(){e.audioID.scoreCount=null})},this),i.ShowSubmitSignal.inst.addListener(function(){e.audioID.scoreCount&&cc.audioEngine.stopEffect(e.audioID.scoreCount),e.playEffect("showSubmit")},this),i.OpenResultLayerSignal.inst.addListener(function(t){t==a.RoundEndType.TimeUp?e.playEffect("result"):(a.RoundEndType.Complete,e.playEffect("result"))},this),i.PlayerScoreChanged.inst.addListener(function(e,t,o){},this),s.NextLevelSignal.inst.addListener(function(t){0!=t&&e.playEffect("pass_level")},this),i.ButtonClickSignal.inst.addListener(function(){e.playEffect("click")},this),i.CountDownSignal.inst.addListener(function(){e.playEffect("countDown")},this),i.GameOverSignal.inst.addListener(function(e){},this),c.PlaceOkSignal.inst.addListener(function(){e.playEffect("placeok")},this),l.PlaceFailSignal.inst.addListener(function(){e.playEffect("placefail")},this),u.PlayModeChangedSignal.inst.addListener(function(t){t==u.PlayMode.Clean&&e.playEffect("monstershow")},this),p.PlayBoomSignal.inst.addListener(function(){e.playEffect("boom")},this),d.PlayStarSignal.inst.addListener(function(){e.playEffect("star")},this),u.SliceBlockSignal.inst.addListener(function(){e.playEffect("block")},this),u.ComboUpdateSignal.inst.addListener(function(t){t<2||e.playEffect("combo")},this),u.CallMonsterSignal.inst.addListener(function(){e.playEffect("eat")},this),u.PieCompleteSignal.inst.addListener(function(){e.playEffect("get")},this)},t.prototype.playEffect=function(e,o,n){var i=this;if(void 0===o&&(o=!1),t.canPlay){if(!(this.effectCount>=15||null!=this.audioID[e]||cc.audioEngine.getEffectsVolume()<=.05)){var a=this.clips.get(e);a?(this.audioID[e]=cc.audioEngine.playEffect(a,o),this.EffectCount++,cc.audioEngine.setFinishCallback(this.audioID[e],function(){i.audioID[e]=null,i.EffectCount--,n&&n()}),setTimeout(function(){i.audioID[e]=null},100)):cc.loader.loadRes(h+e,cc.AudioClip,function(t,a){t?console.error(t):("string"==typeof a._audio&&cc.loader._cache&&cc.loader._cache[a._audio]&&cc.loader._cache[a._audio].buffer&&(a._audio=cc.loader._cache[a._audio].buffer),i.clips.add(a.name,a),i.audioID[e]=cc.audioEngine.playEffect(a,o),i.EffectCount++,cc.audioEngine.setFinishCallback(i.audioID[e],function(){n&&n(),i.audioID[e]=null,i.EffectCount--}),setTimeout(function(){i.audioID[e]=null},100))})}}else this.bindTouch()},t.prototype.playMusic=function(e,o){var n=this;if(void 0===o&&(o=!0),!t.canPlay)return this.bindTouch(),void t.PlayedList.push({loop:!0,volume:1,clipName:e,supTime:Date.now(),skip:!1,isBgm:!0});var i=this.clips.get(e);i?this.audioID[e]=cc.audioEngine.playMusic(i,o):cc.loader.loadRes(h+e,cc.AudioClip,function(t,i){t?console.error(t):("string"==typeof i._audio&&cc.loader._cache&&cc.loader._cache[i._audio]&&cc.loader._cache[i._audio].buffer&&(i._audio=cc.loader._cache[i._audio].buffer),n.clips.add(i.name,i),n.audioID[e]=cc.audioEngine.playMusic(i,o))})},t.prototype.bindTouch=function(){if(!t.hasBindTouch){var e=this,o=function(){var n;for(cc.game.canvas.removeEventListener("touchstart",o),t.canPlay=!0;(n=t.PlayedList.pop())&&e.clips.get(n.clipName)&&!n.skip;)cc.audioEngine.playMusic(e.clips.get(n.clipName),n.loop)};t.hasBindTouch=!0,cc.game.canvas.addEventListener("touchstart",o)}},t.PlayedList=[],t.canPlay=!1,t.hasBindTouch=!1,t}(r.SingleTon());o.gAudio=f.inst,cc._RF.pop()},{"../Command/CommonSignal":"CommonSignal","../Controller/GameStateController":"GameStateController","../GamePlay/Model/GameLogic":"GameLogic","../GamePlay/View/Animation/BoomAnimation":"BoomAnimation","../GamePlay/View/Animation/OKAnimation":"OKAnimation","../GamePlay/View/Animation/StarAnimation":"StarAnimation","../GamePlay/View/Game/SliceView":"SliceView","../Model/PlayModelProxy":"PlayModelProxy","../Utils/HashMap":"HashMap","../Utils/ToSingleton":"ToSingleton"}],BaseMediator:[function(e,t,o){"use strict";cc._RF.push(t,"a76c1ySm3tAQId4zbAsdr/d","BaseMediator"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,i=n.ccclass,a=(n.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.bind=function(e){this.view=e},Object.defineProperty(t.prototype,"View",{get:function(){return console.assert(null!=this.view," view is null"),this.view},enumerable:!0,configurable:!0}),t.prototype.onRegister=function(){console.error(" should override onRegister ")},t.prototype.onUnregister=function(){console.error(" should override onUnregister ")},t=__decorate([i],t)}(cc.Component));o.default=a,cc._RF.pop()},{}],BaseView:[function(e,t,o){"use strict";cc._RF.push(t,"6daedF7tVNJ3qN565kuohVZ","BaseView"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,i=n.ccclass,a=(n.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onLoad=function(){this.node.scale=0},t.prototype.Show=function(e){this.node.active=!0,this.node.runAction(cc.sequence(cc.callFunc(function(){}),cc.scaleTo(.1,1),cc.callFunc(function(){e&&e()})))},t.prototype.Hide=function(e){var t=this;this.node.runAction(cc.sequence(cc.scaleTo(.1,0),cc.callFunc(function(){t.node.active=!1,e&&e()})))},t.prototype.OnClick=function(){},t.prototype.BindMedaitor=function(e){if(!this.node.getComponent(e)){var t=this.node.addComponent(e);return t.bind&&t.bind(this),t.onRegister&&t.onRegister(),t}console.warn(" this node already has the same component..")},t.prototype.UnbindMedaitor=function(e){var t=this.node.getComponent(e);if(t)return t.onUnregister&&t.onUnregister(),t.bind&&t.bind(null),this.node.removeComponent(e),t;console.warn(" component already removed..")},t=__decorate([i],t)}(cc.Component));o.default=a,cc._RF.pop()},{}],BlackView:[function(e,t,o){"use strict";cc._RF.push(t,"f7137KIFk5HzYzsbeidU/gx","BlackView"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../../Command/CommonSignal"),i=e("../../../Controller/GameStateController"),a=cc._decorator,r=a.ccclass,s=(a.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onLoad=function(){var e=this;n.GameOverSignal.inst.addListener(function(t){t!=i.RoundEndType.Complete&&(e.node.active=!0)},this),this.node.active=!1},t.prototype.start=function(){},t=__decorate([r],t)}(cc.Component));o.default=s,cc._RF.pop()},{"../../../Command/CommonSignal":"CommonSignal","../../../Controller/GameStateController":"GameStateController"}],BonusProgressView:[function(e,t,o){"use strict";cc._RF.push(t,"aecdbxP0iZAkrFXWqa7SId7","BonusProgressView"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../Model/GamePlayModel"),i=cc._decorator,a=i.ccclass,r=i.property,s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.Add=null,t}return __extends(t,e),t.prototype.onLoad=function(){var e=this;this.node.width=680,this.Add.active=!1,n.ScoreCountDownUpdateSignal.inst.addListener(function(t){e.node.width=680*t,e.Add.x=e.node.width-20,e.Add.active=e.node.width>0&&e.node.width<680},this)},__decorate([r(cc.Node)],t.prototype,"Add",void 0),t=__decorate([a],t)}(cc.Component);o.default=s,cc._RF.pop()},{"../../Model/GamePlayModel":"GamePlayModel"}],BoomAnimation:[function(e,t,o){"use strict";cc._RF.push(t,"53acfh/4jhBR5hYCMRY9S8K","BoomAnimation"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../../Utils/FrameAniBase"),i=e("../../../Utils/Signal"),a=e("../../Model/GameLogic"),r=e("../Game/PieRoot"),s=cc._decorator,c=s.ccclass,l=(s.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(i.BaseSignal));o.PlayBoomSignal=l;var u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onLoad=function(){var t=this;e.prototype.onLoad.call(this),this.node.active=!1,a.CleartSlotSignal.inst.addListener(function(e,o,n){e.toString()==t.node.parent.name&&o.indexOf(a.ClearType.Boom)>=0&&(t.play(),l.inst.dispatch(),o.indexOf(a.ClearType.Complete)>=0&&r.PieFlySignal.inst.dispatch(t.node.parent.name,n))},this)},t=__decorate([c],t)}(n.default);o.default=u,cc._RF.pop()},{"../../../Utils/FrameAniBase":"FrameAniBase","../../../Utils/Signal":"Signal","../../Model/GameLogic":"GameLogic","../Game/PieRoot":"PieRoot"}],BreakAnimation:[function(e,t,o){"use strict";cc._RF.push(t,"0b94f3OEERBQJp1naKXMDMO","BreakAnimation"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../../Utils/FrameAniBase"),i=cc._decorator,a=i.ccclass,r=(i.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.play=function(){this.node.opacity=255,e.prototype.play.call(this)},t.prototype.onComplete=function(){},t=__decorate([a],t)}(n.default));o.default=r,cc._RF.pop()},{"../../../Utils/FrameAniBase":"FrameAniBase"}],CelerSDK:[function(e,t,o){"use strict";cc._RF.push(t,"34a72Ol/DRKJb0NyonTxi8g","CelerSDK"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../ToSingleton"),i=e("../LogHandler"),a=e("../Random"),r=e("../../Command/CommonSignal"),s=e("../../Model/PlayModelProxy"),c=e("../../Controller/GameStateController"),l=e("../../Ad/WildAdButton"),u=e("../../Ad/FlyCnicornAd"),p=e("../../Global/GameRule"),d=e("../../TableManager"),h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.alreadySubmit=!1,t.isNewPlayer=!0,t.celerStartCallback=null,t}return __extends(t,e),Object.defineProperty(t.prototype,"MatchID",{get:function(){return this.match.matchId},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"MatchRandomSeed",{get:function(){return this.match.sharedRandomSeed},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"DifficultyLevel",{get:function(){return this.match.difficultyLevel},enumerable:!0,configurable:!0}),t.prototype.init=function(e){this.alreadySubmit=!1,CELER_X&&celerSDK.onStart(this.onCelerStart.bind(this)),CELER_X&&celerSDK.provideScore(function(){return s.PlayModelProxy.inst.getTotalScore()}),this.celerStartCallback=e,i.LogHandler.inst.ready(),CELER_X&&i.LogHandler.inst.initLog(celerSDK.log)},t.prototype.celerXReady=function(){console.log(" invoke celerx.ready() "),CELER_X?celerSDK.ready():this.onCelerStart()},t.prototype.isNew=function(){return this.isNewPlayer},t.prototype.isOnCelerPlatform=function(){return CELER_X},t.prototype.onCelerStart=function(){console.log(" celerx onStart call"),this.match=CELER_X?celerSDK.getMatch():{matchId:"error : can not get id",shouldLaunchTutorial:!1,sharedRandomSeed:Math.random(),difficultyLevel:1,locale:"en_US"},console.log("match id:",this.match.matchId,", seed:",this.match.sharedRandomSeed),0==this.match.difficultyLevel&&(this.match.difficultyLevel=1),a.Random.setRandomSeed(this.match.sharedRandomSeed),s.PlayModelProxy.inst.setTotalTime(p.GetTotalTime()),this.match&&this.match.shouldLaunchTutorial?this.isNewPlayer=!0:this.isNewPlayer=!1,l.HideWildAdButtonSignal.inst.dispatch(),u.RemoveFlyCnicornSignal.inst.dispatch(),this.celerStartCallback&&(this.celerStartCallback(),this.celerStartCallback=null)},t.prototype.defineLan=function(){this.match.locale=this.match.locale||"en_US",lan.set(this.match.locale);var e={},t={},o=null;o=d.TableManager.inst.getAll_En_Data();var n=this.match.locale.split("_")[0].charAt(0).toUpperCase()+this.match.locale.split("_")[0].substring(1);if(d.TableManager.inst["getAll_"+n+"_Data"]&&d.TableManager.inst["getAll_"+n+"_Data"]()&&(o=d.TableManager.inst["getAll_"+n+"_Data"]()),o){for(var i in o){var a=o[i];e[a.View]||(e[a.View]={}),e[a.View][a.ID]=a.Text,t[a.View]||(t[a.View]={}),t[a.View][a.ID]={FontSize:a.FontSize,MaxWidth:a.MaxWidth,HorizontalAlign:a.Horizontal,VerticalAlign:a.Vertical,LineHeight:a.LineHeight,x:a.X,y:a.Y}}lan.define(this.match.locale,e),lan.defineStyle(this.match.locale,t)}CELER_X?((1!=celerSDK.hasMethod("showAd")||this.isNewPlayer)&&(l.HideWildAdButtonSignal.inst.dispatch(),u.RemoveFlyCnicornSignal.inst.dispatch()),celerSDK.onPause(function(){console.log(" on pause "),c.GameStateController.inst.isGameOver()||c.GameStateController.inst.isPause()||r.ShowPauseLayerSignal.inst.dispatch()}),celerSDK.onResume(function(){console.log(" on resume ")})):(cc.game.on(cc.game.EVENT_HIDE,function(){console.log(" on pause "),c.GameStateController.inst.isGameOver()||c.GameStateController.inst.isPause()||r.ShowPauseLayerSignal.inst.dispatch()}),cc.game.on(cc.game.EVENT_SHOW,function(){console.log(" on resume ")}))},t.prototype.submitScore=function(e){this.alreadySubmit||(this.alreadySubmit=!0,console.log(" submit score:",e,", match id:",this.match),CELER_X?celerSDK.submitScore(e):window.location.reload())},Object.defineProperty(t.prototype,"isAndroidWeb",{get:function(){return cc.sys.isMobile&&cc.sys.isBrowser&&cc.sys.os==cc.sys.OS_ANDROID},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isIOSWeb",{get:function(){return cc.sys.isMobile&&cc.sys.isBrowser&&cc.sys.os==cc.sys.OS_IOS},enumerable:!0,configurable:!0}),t}(n.SingleTon());o.CelerSDK=h,cc._RF.pop()},{"../../Ad/FlyCnicornAd":"FlyCnicornAd","../../Ad/WildAdButton":"WildAdButton","../../Command/CommonSignal":"CommonSignal","../../Controller/GameStateController":"GameStateController","../../Global/GameRule":"GameRule","../../Model/PlayModelProxy":"PlayModelProxy","../../TableManager":"TableManager","../LogHandler":"LogHandler","../Random":"Random","../ToSingleton":"ToSingleton"}],CleanButtonView:[function(e,t,o){"use strict";cc._RF.push(t,"9fad6kG3z1CgL+NOoWdbmL2","CleanButtonView"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../../Controller/GameStateController"),i=e("../../Model/GameLogic"),a=cc._decorator,r=a.ccclass,s=(a.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onLoad=function(){this.node.on(cc.Node.EventType.TOUCH_END,function(){n.GameStateController.inst.canInteractive()&&i.GameLogic.inst.Mode==i.PlayMode.Normal&&(i.GameLogic.inst.Mode=i.PlayMode.Clean)},this)},t=__decorate([r],t)}(cc.Component));o.default=s,cc._RF.pop()},{"../../../Controller/GameStateController":"GameStateController","../../Model/GameLogic":"GameLogic"}],CleanCostLabel:[function(e,t,o){"use strict";cc._RF.push(t,"18c06ffALlJy4cypmqLyONw","CleanCostLabel"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../Model/GameLogic"),i=cc._decorator,a=i.ccclass,r=(i.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),Object.defineProperty(t.prototype,"Label",{get:function(){return this.getComponent(cc.Label)},enumerable:!0,configurable:!0}),t.prototype.onLoad=function(){var e=this;this.Label.string="Free",n.CallMonsterSignal.inst.addListener(function(t,o,n,i){e.Label.string=t<=0?"Free":"-"+t},this)},t=__decorate([a],t)}(cc.Component));o.default=r,cc._RF.pop()},{"../../Model/GameLogic":"GameLogic"}],ClearSliceLayer:[function(e,t,o){"use strict";cc._RF.push(t,"9ec1ac1z65AarcGPYjBUFfF","ClearSliceLayer"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../../Controller/GameStateController"),i=e("../../../Utils/Signal"),a=e("../../../View/BaseView"),r=e("../../Model/GameLogic"),s=cc._decorator,c=s.ccclass,l=(s.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(i.BaseSignal));o.ClearSliceLayerHideSignal=l;var u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),Object.defineProperty(t.prototype,"UseButton",{get:function(){return this.node.getChildByName("use")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"EndButton",{get:function(){return this.node.getChildByName("btn_end")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Content",{get:function(){return this.node.getChildByName("Content").getComponent(cc.RichText)},enumerable:!0,configurable:!0}),t.prototype.onLoad=function(){var t=this;e.prototype.onLoad.call(this),this.node.active=!1,r.SliceBlockSignal.inst.addListener(function(){n.GameStateController.inst.pause(!0),t.Show()},this),this.EndButton.on(cc.Node.EventType.TOUCH_END,function(){l.inst.dispatch(),t.Hide(function(){n.GameStateController.inst.roundEnd(n.RoundEndType.OutOfMove)})},this),this.UseButton.on(cc.Node.EventType.TOUCH_END,function(){t.Hide(function(){l.inst.dispatch(),r.GameLogic.inst.Mode=r.PlayMode.Clean,n.GameStateController.inst.resume()})},this)},t=__decorate([c],t)}(a.default);o.default=u,cc._RF.pop()},{"../../../Controller/GameStateController":"GameStateController","../../../Utils/Signal":"Signal","../../../View/BaseView":"BaseView","../../Model/GameLogic":"GameLogic"}],Cocos:[function(e,t,o){"use strict";cc._RF.push(t,"d9795RGCWVCp5Zf4JNywPPb","Cocos"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("./Random");function i(e){return e&&e.getParent&&e.getParent()?e.getParent().convertToWorldSpaceAR(e.position):cc.v2(0,0)}o.GetWorldPosition=i,o.ConvertToNodeSpaceAR=function(e,t){if(!t)return cc.v2(0,0);var o=i(e);return t.convertToNodeSpaceAR(o)},o.Distance=function(e,t){return Math.sqrt((e.x-t.x)*(e.x-t.x)+(e.y-t.y)*(e.y-t.y))},o.AreaOf2CrossRect=function(e,t){var o=e.x,n=e.y,i=e.x+e.width,a=e.y+e.height,r=t.x,s=t.y,c=t.x+t.width,l=t.y+t.height;return Math.max(0,Math.min(i,c)-Math.max(o,r))*Math.max(0,Math.min(a,l)-Math.max(n,s))},o.disOrderArray=function(e){for(var t,o=0;o<e.length;++o){var i=n.Random.randomFloorToInt(0,e.length);t=[e[i],e[o]],e[o]=t[0],e[i]=t[1]}},o.Clamp=function(e,t,o){return Math.max(Math.min(e,t),o)},o.IndexToi=function(e,t){return Math.floor(e/t)},o.IndexToj=function(e,t){return e%t},o.GetPixels=function(e,t,o,n){void 0===o&&(o=10),void 0===n&&(n=10);var i=cc.renderer.device.gl,a=new Uint8Array(o*n*4);return i.readPixels(e,t,o,n,i.RGBA,i.UNSIGNED_BYTE,a),a},o.RotatePoint=function(e,t,o,n){void 0===o&&(o=cc.v2(0,0)),void 0===n&&(n=!0);var i=n?-1:1,a=t/180*Math.PI,r=cc.v2(e.x,e.y);e.x=(r.x-o.x)*Math.cos(i*a)-(r.y-o.y)*Math.sin(i*a)+o.x,e.y=(r.x-o.x)*Math.sin(i*a)+(r.y-o.y)*Math.cos(i*a)+o.y};var a={mul:null};function r(e,t){return e._parent?(e._parent._updateWorldMatrix(),c(e,e._parent._worldMatrix,t)):s(e,t)}function s(e,t){e._updateLocalMatrix();var o=e._contentSize.width,n=e._contentSize.height,i=cc.rect(-e._anchorPoint.x*o,-e._anchorPoint.y*n,o,n),a=i.transformMat4(i,e._matrix);if(!t)return a;var s=r(t);return s.intersects(i)?a=l(a,s.intersection(s,i)):i}function c(e,t,o){e._updateLocalMatrix();var n=e._contentSize.width,i=e._contentSize.height,s=cc.rect(-e._anchorPoint.x*n,-e._anchorPoint.y*i,n,i);if(t=a.mul(e._worldMatrix,t,e._matrix),s.transformMat4(s,t),!o)return s;var c=r(o);return c.intersects(s)?s=l(s,c.intersection(c,s)):s}function l(e,t){var o=e.x,n=e.y,i=(e.width,e.height),a=(t.x,t.y,t.width,t.height);return e.x=o,e.y=n+a,e.height=Math.abs(i-a),e}a.mul=function(e,t,o){var n=t.m00,i=t.m01,a=t.m02,r=t.m03,s=t.m04,c=t.m05,l=t.m06,u=t.m07,p=t.m08,d=t.m09,h=t.m10,f=t.m11,m=t.m12,y=t.m13,g=t.m14,S=t.m15,C=o.m00,_=o.m01,v=o.m02,b=o.m03;return e.m00=C*n+_*s+v*p+b*m,e.m01=C*i+_*c+v*d+b*y,e.m02=C*a+_*l+v*h+b*g,e.m03=C*r+_*u+v*f+b*S,C=o.m04,_=o.m05,v=o.m06,b=o.m07,e.m04=C*n+_*s+v*p+b*m,e.m05=C*i+_*c+v*d+b*y,e.m06=C*a+_*l+v*h+b*g,e.m07=C*r+_*u+v*f+b*S,C=o.m08,_=o.m09,v=o.m10,b=o.m11,e.m08=C*n+_*s+v*p+b*m,e.m09=C*i+_*c+v*d+b*y,e.m10=C*a+_*l+v*h+b*g,e.m11=C*r+_*u+v*f+b*S,C=o.m12,_=o.m13,v=o.m14,b=o.m15,e.m12=C*n+_*s+v*p+b*m,e.m13=C*i+_*c+v*d+b*y,e.m14=C*a+_*l+v*h+b*g,e.m15=C*r+_*u+v*f+b*S,e},o.GetBoxToWorld=r,o.getBoundingBox=s,o.RectSub=l,o.Approx=function(e,t,o){return void 0===o&&(o=1e-6),Math.abs(e-t)<=o},cc._RF.pop()},{"./Random":"Random"}],ComboFont:[function(e,t,o){"use strict";cc._RF.push(t,"89ca9EaA65OXbmmCYkVFSGE","ComboFont"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../Model/GameLogic"),i=cc._decorator,a=i.ccclass,r=(i.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onLoad=function(){var e=this;this.node.active=!1,n.ComboUpdateSignal.inst.addListener(function(t){e.node.stopAllActions(),t>=2?(e.node.scale=0,e.node.active=!0,e.node.opacity=255,e.node.runAction(cc.sequence(cc.scaleTo(.1,1.2),cc.scaleTo(.1,1),cc.delayTime(.1),cc.fadeOut(.1)))):e.node.active=!1},this)},t=__decorate([a],t)}(cc.Component));o.default=r,cc._RF.pop()},{"../../Model/GameLogic":"GameLogic"}],ComboLabel:[function(e,t,o){"use strict";cc._RF.push(t,"5f5d5B30WpJnq2jk3XY7Fd1","ComboLabel"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../../Global/GameRule"),i=e("../../../Model/PlayModelProxy"),a=e("../../Model/GameLogic"),r=e("../../Model/GamePlayModel"),s=cc._decorator,c=s.ccclass,l=(s.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),Object.defineProperty(t.prototype,"Label",{get:function(){return this.getComponent(cc.Label)},enumerable:!0,configurable:!0}),t.prototype.onLoad=function(){var e=this;this.Label.string="",a.ComboUpdateSignal.inst.addListener(function(t){if(t>=2){e.node.scale=0,e.node.active=!0,e.node.opacity=255,e.node.runAction(cc.sequence(cc.scaleTo(.1,1.2),cc.scaleTo(.1,1),cc.delayTime(.1),cc.fadeOut(.1)));var o=n.GetScoreByType(r.ScoreType.Combo)*(t-1);i.PlayModelProxy.inst.Model.addPlayerScore(o,r.ScoreType.Combo,1,null)}else e.node.active=!1},this)},t=__decorate([c],t)}(cc.Component));o.default=l,cc._RF.pop()},{"../../../Global/GameRule":"GameRule","../../../Model/PlayModelProxy":"PlayModelProxy","../../Model/GameLogic":"GameLogic","../../Model/GamePlayModel":"GamePlayModel"}],CommonSignal:[function(e,t,o){"use strict";cc._RF.push(t,"f95914FtRVEIaVFtfSVd+lO","CommonSignal"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../Utils/Signal"),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(n.BaseSignal);o.ShowPauseLayerSignal=i;var a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(n.BaseSignal);o.HidePauseLayerSignal=a;var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(n.BaseSignal);o.GameThemeInit=r;var s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(n.BaseSignal);o.ShowHelpLayerSignal=s;var c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(n.BaseSignal);o.HideHelpLayerSignal=c;var l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(n.BaseSignal);o.OpenResultLayerSignal=l;var u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(n.BaseSignal);o.ShowSubmitSignal=u;var p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(n.BaseSignal);o.ScoreCountingSignal=p;var d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(n.BaseSignal);o.ButtonClickSignal=d;var h=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(n.BaseSignal);o.TimeAnimationStateChanged=h;var f=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(n.BaseSignal);o.UpdateTimeNumber=f;var m=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(n.BaseSignal);o.GameReadySignal=m;var y=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(n.BaseSignal);o.GameStartSignal=y;var g=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(n.BaseSignal);o.GameOverSignal=g;var S=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(n.BaseSignal);o.GamePauseSignal=S;var C=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(n.BaseSignal);o.PlayerScoreChanged=C;var _=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(n.BaseSignal);o.NoviceScoreChanged=_;var v=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(n.BaseSignal);o.CountDownSignal=v,cc._RF.pop()},{"../Utils/Signal":"Signal"}],CompleteView:[function(e,t,o){"use strict";cc._RF.push(t,"ba3d1yfxbBDUoRT1kaH73rI","CompleteView"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../../Command/CommonSignal"),i=e("../../../Controller/GameStateController"),a=e("../../../Controller/ResourceController"),r=e("../Animation/FireWorkAnimation"),s=cc._decorator,c=s.ccclass,l=(s.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),Object.defineProperty(t.prototype,"Font",{get:function(){return this.node.getChildByName("Font").getComponent(cc.Sprite)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Con",{get:function(){return this.node.getChildByName("Con")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"FireWork",{get:function(){return this.node.getChildByName("FireWork")?this.node.getChildByName("FireWork").getComponent(r.default):null},enumerable:!0,configurable:!0}),t.prototype.onLoad=function(){n.GameOverSignal.inst.addListener(this.onGameOver,this),this.Font.node.active=!1,this.Con&&(this.Con.active=!1)},t.prototype.start=function(){this.FireWork&&(this.FireWork.node.active=!1),this.node.scale=1,this.node.active=!1},t.prototype.onGameOver=function(e){this.node.active=!0,this.Font.node.active=!0;var t=1500;switch(e){case i.RoundEndType.Complete:this.FireWork.node.active=!0,this.Con&&(this.Con.active=!0),this.Font.spriteFrame=a.ResourceController.inst.getAnimationAtlas(a.AnimationType.UI,a.Title.CompleteAni),t=3e3;break;case i.RoundEndType.Over:this.Font.spriteFrame=a.ResourceController.inst.getAnimationAtlas(a.AnimationType.UI,a.Title.Over);break;case i.RoundEndType.TimeUp:this.Font.spriteFrame=a.ResourceController.inst.getAnimationAtlas(a.AnimationType.UI,a.Title.TimeUp);break;case i.RoundEndType.OutOfMove:this.Font.spriteFrame=a.ResourceController.inst.getAnimationAtlas(a.AnimationType.UI,a.Title.OutOfMove)}this.FireWork&&this.FireWork.node.active&&this.FireWork.play(),this.Font.node.active&&(this.Font.node.scaleX=0,this.Font.node.runAction(cc.scaleTo(.1,1.2))),this.Con&&this.Con.active&&(this.Con.scale=0,this.Con.runAction(cc.sequence(cc.scaleTo(.1,1.2),cc.scaleTo(.05,1),cc.delayTime(.15),cc.scaleTo(.1,1)))),setTimeout(function(){n.OpenResultLayerSignal.inst.dispatch(e)},t)},t=__decorate([c],t)}(cc.Component));o.default=l,cc._RF.pop()},{"../../../Command/CommonSignal":"CommonSignal","../../../Controller/GameStateController":"GameStateController","../../../Controller/ResourceController":"ResourceController","../Animation/FireWorkAnimation":"FireWorkAnimation"}],EaseBaseView:[function(e,t,o){"use strict";cc._RF.push(t,"fc226Q7q/NHwZUZiG7X+tIZ","EaseBaseView"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../BaseView"),i=cc._decorator,a=i.ccclass,r=(i.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.targetVal=new cc.Vec3(0,0,0),t.startTime=0,t.lastTime=0,t.completeCallback=null,t.callOnStart=!1,t}return __extends(t,e),Object.defineProperty(t.prototype,"CompleteCallback",{get:function(){return this.completeCallback},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"StartTime",{get:function(){return this.startTime},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"LastTime",{get:function(){return this.lastTime},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Target",{get:function(){return this.targetVal},enumerable:!0,configurable:!0}),t.prototype.onLoad=function(){},t.prototype.start=function(){},t.prototype.onStart=function(){},t.prototype.end=function(){null!=this.completeCallback&&(this.onComplete(),this.complete())},t.prototype.startUpdate=function(e,t,o,n){void 0===n&&(n=0),this.callOnStart=!1,this.targetVal=e,this.startTime=Date.now()+1e3*n,this.lastTime=1e3*t,this.completeCallback=o},t.prototype.complete=function(){if(this.startTime=this.lastTime=0,this.completeCallback){var e=this.completeCallback;this.completeCallback=null,e()}},t.prototype.clear=function(){this.startTime=this.lastTime=0},t.prototype.update=function(e){0!=this.startTime&&0!=this.canUpdate()&&(this.isComplete()?(this.onComplete(),this.complete()):this.canStart()&&(0==this.callOnStart&&(this.callOnStart=!0,this.onStart()),this.onStep()))},t.prototype.canStart=function(){return Date.now()>=this.startTime&&0!=this.startTime},t.prototype.isComplete=function(){return Date.now()>=this.startTime+this.lastTime},t.prototype.canUpdate=function(){return console.error("you should override this method."),!0},t.prototype.onStep=function(){},t.prototype.onComplete=function(){},t.prototype.ease=function(e,t){return this.lastTime<=0?t:(t-e)*(Date.now()-this.startTime)/this.lastTime+e},t=__decorate([a],t)}(n.default));o.default=r,cc._RF.pop()},{"../BaseView":"BaseView"}],EatAnimation:[function(e,t,o){"use strict";cc._RF.push(t,"aea3bMYaW5LSpLlStvgaLTV","EatAnimation"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../../Utils/FrameAniBase"),i=e("../../Model/GameLogic"),a=cc._decorator,r=a.ccclass,s=(a.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onLoad=function(){var t=this;e.prototype.onLoad.call(this),this.node.active=!1,i.CallMonsterSignal.inst.addListener(function(e,o,n){n.toString()==t.node.parent.name&&t.play()},this)},t=__decorate([r],t)}(n.default));o.default=s,cc._RF.pop()},{"../../../Utils/FrameAniBase":"FrameAniBase","../../Model/GameLogic":"GameLogic"}],EffectBase:[function(e,t,o){"use strict";cc._RF.push(t,"626d8q5DuVB5ZWzroHl1X4j","EffectBase"),Object.defineProperty(o,"__esModule",{value:!0});var n,i=e("../../../Factory/GameFactory"),a=e("../../../Model/PlayModelProxy"),r=e("../../../Utils/FrameAniBase"),s=e("../../../Utils/Signal"),c=cc._decorator,l=c.ccclass;c.property;(function(e){e[e.None=0]="None"})(n=o.AniType||(o.AniType={}));var u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(s.BaseSignal);o.OnNodeMovedSignal=u;var p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.id="",t.type=n.None,t.fromIndex=0,t.toIndex=0,t}return __extends(t,e),Object.defineProperty(t.prototype,"ID",{get:function(){return this.id},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Type",{get:function(){return this.type},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"FromIndex",{get:function(){return this.fromIndex},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ToIndex",{get:function(){return this.toIndex},enumerable:!0,configurable:!0}),t.prototype.unuse=function(){this.id="",this.type=n.None,this.node.scale=1,this.node.rotation=0,this.node.width=0,this.node.height=0,this.fromIndex=0,this.toIndex=0,this.node.setAnchorPoint(.5,.5),this.stop(),this.node.getComponent(cc.Sprite).spriteFrame=null,this.node.getComponent(cc.Sprite).type=cc.Sprite.Type.SIMPLE,this.node.getComponent(cc.Sprite).sizeMode=cc.Sprite.SizeMode.RAW},t.prototype.reuse=function(e,t,o,n){void 0===o&&(o=0),void 0===n&&(n=0),this.id=e,this.type=t,this.node.getComponent(cc.Sprite).spriteFrame=null,this.fromIndex=o,this.toIndex=n},t.prototype.onComplete=function(){var e=this;this.node.runAction(cc.sequence(cc.fadeOut(.2),cc.callFunc(function(){e.node.getComponent(cc.Sprite).spriteFrame=null,i.gFactory.putObj("Effect",e.node)})))},t.prototype.onStartPlay=function(){this.node.opacity=255},t.prototype.onLoad=function(){var t=this;e.prototype.onLoad.call(this),u.inst.addListener(this.onNodeMoved,this),a.NextLevelSignal.inst.addListener(function(){t.node.parent&&(t.node.getComponent(cc.Sprite).spriteFrame=null,i.gFactory.putObj("Effect",t.node))},this)},t.prototype.onNodeMoved=function(e,t){this.ID&&this.ID==e&&this.node.setPosition(t)},t=__decorate([l],t)}(r.default);o.default=p,cc._RF.pop()},{"../../../Factory/GameFactory":"GameFactory","../../../Model/PlayModelProxy":"PlayModelProxy","../../../Utils/FrameAniBase":"FrameAniBase","../../../Utils/Signal":"Signal"}],FireWorkAnimation:[function(e,t,o){"use strict";cc._RF.push(t,"fdcc6mLSFRPvZPIgAxSjpVB","FireWorkAnimation"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../../Utils/FrameAniBase"),i=cc._decorator,a=i.ccclass,r=(i.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onComplete=function(){this.node.runAction(cc.fadeOut(.1))},t.prototype.play=function(){this.node.active=!0,this.node.opacity=255,e.prototype.play.call(this)},t=__decorate([a],t)}(n.default));o.default=r,cc._RF.pop()},{"../../../Utils/FrameAniBase":"FrameAniBase"}],FlyAdCnicornAniamtion:[function(e,t,o){"use strict";cc._RF.push(t,"df82bE3jcpP0bURZ5D33BYC","FlyAdCnicornAniamtion"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../Utils/FrameAniBase"),i=cc._decorator,a=i.ccclass,r=(i.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t=__decorate([a],t)}(n.default));o.default=r,cc._RF.pop()},{"../Utils/FrameAniBase":"FrameAniBase"}],FlyCnicornAd:[function(e,t,o){"use strict";cc._RF.push(t,"36cb0yApqROmqNTDmiukrBP","FlyCnicornAd"),Object.defineProperty(o,"__esModule",{value:!0});var n,i=e("../Utils/Celer/CelerSDK"),a=e("../Utils/Signal"),r=cc._decorator,s=r.ccclass;r.property;(function(e){e[e.Left=0]="Left",e[e.Right=1]="Right"})(n=o.FlyOrigin||(o.FlyOrigin={}));var c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(a.BaseSignal);o.CnicornWatchFailSignal=c;var l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(a.BaseSignal);o.RemoveFlyCnicornSignal=l;var u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(a.BaseSignal);o.FlyCnicornAdDispearSignal=u;var p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(a.BaseSignal);o.FlyCnicornClickSignal=p;var d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(a.BaseSignal);o.ShowFlyCnicornSignal=d;var h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.initY=0,t}var o;return __extends(t,e),o=t,Object.defineProperty(t.prototype,"Fly",{get:function(){return this.node.getChildByName("Fly")},enumerable:!0,configurable:!0}),t.prototype.reuse=function(e,t){console.log("ShowFlyCnicorn:",n[e]),this.node.opacity=255,this.Fly.opacity=255;var i=0;this.Fly.y=t,e=n.Right,this.Fly.scaleX=-1,this.Fly.x=940,i=-940,this.Fly.once(cc.Node.EventType.TOUCH_END,this.onAddTouch,this),this.Fly.runAction(cc.sequence(cc.moveTo(10,i,this.Fly.y),cc.spawn(cc.fadeOut(2),cc.moveBy(2,376*this.Fly.scaleX,0)),cc.callFunc(function(){u.inst.dispatch(),o.ShowTimeRest=10})))},t.prototype.unuse=function(){},t.prototype.onLoad=function(){var e=this;this.initY=this.Fly.y,l.inst.addOnce(function(){d.inst.removeTarget(e),c.inst.removeTarget(e),e.node.removeFromParent(!0),e.node.destroy()},this),c.inst.addListener(function(){o.ShowTimeRest=10},this),o.ShowTimeRest=10,d.inst.addListener(function(t,o){console.log(" Show Cnicorn"),e.Fly.getNumberOfRunningActions()>0||e.reuse(n.Right,e.initY)},this),0==i.CelerSDK.inst.isAndroidWeb&&l.inst.dispatch()},t.prototype.onAddTouch=function(e){this.Fly.stopAllActions(),this.Fly.runAction(cc.fadeOut(.2)),p.inst.dispatch()},t.prototype.update=function(e){},t.ShowTimeRest=0,t=o=__decorate([s],t)}(cc.Component);o.default=h,cc._RF.pop()},{"../Utils/Celer/CelerSDK":"CelerSDK","../Utils/Signal":"Signal"}],FrameAniBase:[function(e,t,o){"use strict";cc._RF.push(t,"6298cJI+OZK9J9ZyfrpqPP2","FrameAniBase"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,i=n.ccclass,a=n.property,r=n.requireComponent,s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.Frames=null,t.PrefixName="",t.FrameCount=0,t.Interval=.05,t.Priority=0,t.Loop=!1,t.PlayOnLoad=!1,t.currentIndex=0,t.time=0,t.isPlay=!1,t.listener=[],t.complateEvent=[],t}var o;return __extends(t,e),o=t,Object.defineProperty(t.prototype,"Sprite",{get:function(){return this.node.getComponent(cc.Sprite)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Animation",{set:function(e){this.Frames=e},enumerable:!0,configurable:!0}),t.prototype.onFocusInEditor=function(){},t.prototype.onLostFocusInEditor=function(){clearInterval(o.intervalID)},t.prototype.onLoad=function(){this.time=this.Interval,this.isPlay=this.PlayOnLoad},t.prototype.play=function(){this.isPlay=!0,this.currentIndex=0,this.node.opacity=255,this.node.active=!0,this.updateCurrentFrame(),0==this.isPlaying&&this.callEventComplete()},t.prototype.onStartPlay=function(){},t.prototype.playOnLoop=function(){this.Loop=!0,this.play()},t.prototype.playByStep=function(){this.isPlay=!0,this.nextFrame(),this.isPlay=!1},t.prototype.pause=function(){this.isPlay=!1},t.prototype.resume=function(){this.isPlay=!0},t.prototype.stop=function(){this.isPlay=!1,this.currentIndex=0,this.updateCurrentFrame(),this.Loop=!1},t.prototype.stopOnIndex=function(e){this.isPlay=!1,this.currentIndex=e,this.updateCurrentFrame(),this.Loop=!1},t.prototype.updateCurrentFrame=function(){""!=this.PrefixName?this.Sprite.spriteFrame=this.Frames.getSpriteFrame(this.PrefixName+(this.currentIndex+1)):this.Sprite.spriteFrame=this.Frames.getSpriteFrames()[this.currentIndex]},t.prototype.onKeyFrame=function(e){},t.prototype.addKeyEventListener=function(e,t){this.listener.push({callback:e,target:t})},Object.defineProperty(t.prototype,"ListenerCount",{get:function(){return this.listener.length},enumerable:!0,configurable:!0}),t.prototype.clearAllListener=function(){return this.listener.length=0,this},t.prototype.onComplete=function(){this.node.runAction(cc.fadeOut(.2))},t.prototype.callEventFrame=function(){this.onKeyFrame(this.currentIndex);for(var e=0,t=this.listener;e<t.length;e++){var o=t[e];o.callback.apply(o.target,[this.currentIndex,this.__classname__])}},t.prototype.callEventComplete=function(){this.isPlay=!1;for(var e=0,t=this.complateEvent;e<t.length;e++){var o=t[e];o.f.apply(o.target,[this.__classname__])}this.onComplete()},t.prototype.addCompleteEvent=function(e,t){this.complateEvent.push({f:e,target:t})},Object.defineProperty(t.prototype,"TotalFrameCount",{get:function(){return""!=this.PrefixName&&this.FrameCount>0?this.Loop?this.FrameCount:this.FrameCount+1:this.Frames&&this.Frames.getSpriteFrames?this.Frames.getSpriteFrames().length+1:0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"CompleteEventCount",{get:function(){return this.complateEvent.length},enumerable:!0,configurable:!0}),t.prototype.clearCompleteEvent=function(){return this.complateEvent.length=0,this},t.prototype.start=function(){},Object.defineProperty(t.prototype,"isPlaying",{get:function(){if(this.isPlay&&this.Frames&&this.Frames.getSpriteFrames&&this.Frames.getSpriteFrames().length>0){for(var e=0,t=this.getComponents(o);e<t.length;e++){var n=t[e];if(n.Priority>this.Priority&&n.isPlaying)return!1}return!0}return!1},enumerable:!0,configurable:!0}),t.prototype.nextFrame=function(){0!=this.isPlaying?this.Frames&&this.Frames.getSpriteFrames&&this.Frames.getSpriteFrames().length>0&&(0==this.currentIndex&&this.onStartPlay(),this.updateCurrentFrame(),this.callEventFrame(),this.currentIndex=(this.currentIndex+1)%this.TotalFrameCount,0==this.currentIndex&&0==this.Loop&&(this.isPlay=!1,this.callEventComplete())):this.time=this.Interval},t.prototype.update=function(e){this.time>=this.Interval&&(this.time=0,this.nextFrame()),this.time+=e},t.aniName="FrameAniBase",t.intervalID=-1,__decorate([a(cc.SpriteAtlas)],t.prototype,"Frames",void 0),__decorate([a],t.prototype,"PrefixName",void 0),__decorate([a],t.prototype,"FrameCount",void 0),__decorate([a],t.prototype,"Interval",void 0),__decorate([a],t.prototype,"Priority",void 0),__decorate([a],t.prototype,"Loop",void 0),__decorate([a],t.prototype,"PlayOnLoad",void 0),t=o=__decorate([i,r(cc.Sprite)],t)}(cc.Component);o.default=s,cc._RF.pop()},{}],Frame:[function(e,t,o){"use strict";cc._RF.push(t,"da8b9uJhKlEiaZM7a0aoUUg","Frame"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,i=n.ccclass,a=(n.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onLoad=function(){this.node.active=!1},t=__decorate([i],t)}(cc.Component));o.default=a,cc._RF.pop()},{}],FrontView:[function(e,t,o){"use strict";cc._RF.push(t,"a7fe8WWCZVPgYx/jpZQ6l8q","FrontView"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,i=n.ccclass,a=(n.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onLoad=function(){},t.prototype.start=function(){},t.prototype.update=function(e){this.node.parent.scaleX>=0?this.node.scaleX=1:this.node.scaleX=0,this.node.parent.scaleY<0?this.node.scaleY=1:this.node.scaleY=0},t=__decorate([i],t)}(cc.Component));o.default=a,cc._RF.pop()},{}],GameFactory:[function(e,t,o){"use strict";cc._RF.push(t,"93d23kfnY1A76OtZSkIyJ5r","GameFactory"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../Utils/HashMap"),i=function(){function e(e,t,o){this._pool=[],this.totalSize=0,this.initTime=[],this.completeHandler=o,this.template=e,this.totalSize=t,this.hashKey="ObjPool:"+this.template.name+" - "+this.totalSize,this.initPool(t)}return e.prototype.initPool=function(e,t){var o=this;if(void 0===t&&(t=!1),t)for(var n=0;n<e;++n){this.initTime.push(Date.now());var i=cc.instantiate(this.template);this.put(i)}else for(n=0;n<e;++n)this.initTime.push(Date.now()),setTimeout(function(){var e=cc.instantiate(o.template);o.put(e)},n)},e.prototype.size=function(){return this._pool.length},e.prototype.clear=function(){for(var e=this._pool.length,t=0;t<e;++t)this._pool[t].destroy&&this._pool[t].destroy();this._pool.length=0},e.prototype.put=function(e){if(e&&-1===this._pool.indexOf(e)){e.removeFromParent(!1);for(var t=0,o=e.getComponents(cc.Component);t<o.length;t++){var n=o[t];n&&n.unuse&&n.unuse.apply(n)}this._pool.push(e),this.completeHandler&&this.totalSize<=this._pool.length&&(this.completeHandler(),this.completeHandler=null)}},e.prototype.get=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var o=this._pool.length-1;o<0&&this.initPool(1,!0),o=this._pool.length-1;var n=this._pool[o];this._pool.length=o;for(var i=0,a=n.getComponents(cc.Component);i<a.length;i++){var r=a[i];r&&r.reuse&&r.reuse.apply(r,arguments)}return n},e}(),a=function(){function e(){this.count=0,this.totalCount=0,this.objPool=new n.HashMap,this.startTime=0}return Object.defineProperty(e,"inst",{get:function(){return this.ins?this.ins:this.ins=new e},enumerable:!0,configurable:!0}),e.prototype.init=function(e,t){var o=this;this.doneCallback=e,this.progressCallback=t,this.startTime=Date.now(),cc.loader.loadResDir("prefabs/",cc.Prefab,function(e,t,n){if(e)console.error(" Game Factory init failed:",e);else{o.totalCount=t.length;for(var a=function(e){var n=t[e],a=n.name.split("."),r=a[0],s=a[1]?parseInt(a[1]):30;console.log(" init pool:",r,", count:",s),setTimeout(function(){var e=new i(n,s,o.addCount.bind(o));o.objPool.add(r,e)},5*e)},r=0;r<t.length;r++)a(r)}})},e.prototype.addObject=function(e,t,o){var n=this;return new Promise(function(a,r){cc.loader.loadRes(t,function(t,s){if(t)r(t);else{var c=new i(s,o,function(){a(e)});n.objPool.add(e,c)}})})},e.prototype.addCount=function(){this.count++,this.progressCallback&&this.progressCallback(this.count/this.totalCount),this.count>=this.totalCount&&(console.log(" factory cost time:",(Date.now()-this.startTime).toFixed(2)+"ms"),this.doneCallback&&(this.doneCallback(),this.doneCallback=null))},e.prototype.getObj=function(e){for(var t,o=[],n=1;n<arguments.length;n++)o[n-1]=arguments[n];return this.objPool.has(e)?(t=this.objPool.get(e)).get.apply(t,o):(console.error(" objPool dosen't exists this obj:",e),null)},e.prototype.putObj=function(e,t){if(this.objPool.has(e))return this.objPool.get(e).put(t);console.error(" objPool dosen't exists this obj:",e)},e}();o.gFactory=a.inst,cc._RF.pop()},{"../Utils/HashMap":"HashMap"}],GameLogic:[function(e,t,o){"use strict";cc._RF.push(t,"dcc3dWQyb9Je6+vGzSbnbD2","GameLogic"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../Ad/AdLayer"),i=e("../../Global/GameRule"),a=e("../../Utils/Cocos"),r=e("../../Utils/Random"),s=e("../../Utils/Signal"),c=e("../../utils/ToSingleton"),l=e("../../View/Test"),u=e("../View/Game/NextPie"),p=e("./GamePlayModel"),d=e("./SliceModel"),h=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(s.BaseSignal);o.CurrentSliceGenerateSignal=h;var f=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(s.BaseSignal);o.CleartSlotSignal=f;var m=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(s.BaseSignal);o.RestartCountSignal=m;var y=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(s.BaseSignal);o.ComboUpdateSignal=y;var g=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(s.BaseSignal);o.SliceBlockSignal=g;var S=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(s.BaseSignal);o.PlayModeChangedSignal=S;var C=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(s.BaseSignal);o.CallMonsterSignal=C;var _=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(s.BaseSignal);o.CompleteCountChangedSignal=_;var v=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(s.BaseSignal);o.PieCompleteSignal=v;var b=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(s.BaseSignal);o.SliceClearSignal=b;var P,T,M,R=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(s.BaseSignal);o.SliceBoomSignal=R,function(e){e[e.Normal=0]="Normal",e[e.Clean=1]="Clean"}(P=o.PlayMode||(o.PlayMode={})),function(e){e[e.Complete=0]="Complete",e[e.Boom=1]="Boom",e[e.Star=2]="Star",e[e.Monster=3]="Monster"}(T=o.ClearType||(o.ClearType={})),function(e){e[e.Complete=0]="Complete",e[e.Star=1]="Star",e[e.Place=2]="Place",e[e.Fail=3]="Fail"}(M=o.PlaceType||(o.PlaceType={}));var x=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.gamePlay=null,t.restartCount=0,t.combo=0,t.totalCombo=0,t.mode=null,t.pieArray=[],t.SliceIconType=null,t.nextSlice=null,t.currentSlice=null,t.monsterCallCount=0,t.completeCount=0,t.specialType=[d.SliceType.Boom,d.SliceType.Star],t}return __extends(t,e),Object.defineProperty(t.prototype,"CompleteCount",{get:function(){return this.completeCount},set:function(e){this.completeCount=e,_.inst.dispatch(this.completeCount)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"MonsterCallCount",{get:function(){return this.monsterCallCount},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Mode",{get:function(){return this.mode},set:function(e){this.mode=e,S.inst.dispatch(this.mode)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Combo",{get:function(){return this.combo},set:function(e){this.combo=e,this.combo>=2&&this.totalCombo++,y.inst.dispatch(this.combo)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"TotalCombo",{get:function(){return this.totalCombo},enumerable:!0,configurable:!0}),t.prototype.bindGamePlay=function(e){this.gamePlay=e,CELER_X||l.TestReStartSignal.inst.addListener(this.restart,this),n.AdFinishSignal.inst.addListener(this.onAdFinish,this)},t.prototype.initData=function(){console.log("init game logic."),a.disOrderArray(i.SliceTypeArray),this.SliceIconType=i.SliceTypeArray[0],console.log("SliceType:",i.SliceIconType[this.SliceIconType]),this.monsterCallCount=0,this.specialType=[d.SliceType.Boom,d.SliceType.Star],this.Mode=P.Normal;for(var e=0;e<6;e++){this.pieArray[e]=[];for(var t=0;t<d.SliceRange.length;t++)this.pieArray[e][t]=null}this.nextPieSlice()},t.prototype.checkIsComplete=function(){},t.prototype.onAdFinish=function(e){console.log(" ad finish:",e),n.AdType[n.AdType.Sun]},t.prototype.restart=function(e){void 0===e&&(e=!1),console.log("restart:",e),this.restartCount++,m.inst.dispatch(this.restartCount)},t.prototype.checkCanSlot=function(e){if(this.currentSlice.Type==d.SliceType.Star)return!0;for(var t=this.pieArray[e],o=!0,n=0,i=this.currentSlice.SliceIndex;n<i.length;n++){if(null!=t[i[n]]){o=!1;break}}return o},t.prototype.placeSlice=function(e){var t=this.checkCanSlot(e),o=!0,n=[];if(t){var i=this.pieArray[e];if(this.currentSlice.Type==d.SliceType.Star){for(var a=0;a<i.length;a++)null==i[a]?i[a]=this.currentSlice:i[a].Type==d.SliceType.Boom&&n.indexOf(T.Boom)<0&&n.push(T.Boom);n.indexOf(T.Star)<0&&n.push(T.Star)}else for(var r=0,s=this.currentSlice.SliceIndex;r<s.length;r++){i[a=s[r]]=this.currentSlice}if(this.currentSlice.Type!=d.SliceType.Star){for(var c=0,l=i;c<l.length;c++){var u=l[c];if(null==u){o=!1;break}u.Type==d.SliceType.Boom&&n.indexOf(T.Boom)<0&&n.push(T.Boom)}o&&n.push(T.Complete)}o?(this.CompleteCount++,this.Combo++,v.inst.dispatch(e,this.clearSlot(e,n),n)):this.Combo=0,this.nextPieSlice()}return t?o?n.indexOf(T.Star)>=0?M.Star:M.Complete:M.Place:M.Fail},t.prototype.clearSlot=function(e,t){for(var o=[],n=this.pieArray[e].length,i=[],a=0;a<n;a++){var r=this.pieArray[e][a];if(r&&i.indexOf(r.ID)<0){if(t.indexOf(T.Monster)<0)if(b.inst.dispatch(r),r.Type==d.SliceType.Boom)o=[(e-1+d.SliceRange.length)%d.SliceRange.length,(e+1)%d.SliceRange.length];this.addSpecialType(r),i.indexOf(r.ID)<0&&i.push(r.ID)}this.pieArray[e][a]=null}if(o.length>0)for(var s=0,c=o;s<c.length;s++){a=c[s];this.clearSlot(a,[T.Boom])}return 1==t.length&&t[0]==T.Boom&&R.inst.dispatch(e,i),f.inst.dispatch(e,t,i),i},t.prototype.generateType=function(e){var t=this.specialType.indexOf(e.initType(this.specialType));t>=0&&this.specialType.splice(t,1)},t.prototype.addSpecialType=function(e){e.Type!=d.SliceType.Normal&&this.specialType.indexOf(e.Type)<0&&this.specialType.push(e.Type)},t.prototype.nextPieSlice=function(){null==this.nextSlice?(this.nextSlice=new d.SliceModel(r.Random.randomFloorToInt(0,6),i.GetSliceCount()),this.currentSlice=new d.SliceModel(r.Random.randomFloorToInt(0,6),i.GetSliceCount())):(this.currentSlice=this.nextSlice,this.nextSlice=new d.SliceModel(r.Random.randomFloorToInt(0,6),i.GetSliceCount())),this.currentSlice.isSelected=!0,this.generateType(this.currentSlice),h.inst.dispatch(this.currentSlice),u.NextSliceGenerateSignal.inst.dispatch(this.nextSlice),this.checkIsBlock()&&g.inst.dispatch()},t.prototype.checkIsBlock=function(){for(var e=!0,t=0;t<this.pieArray.length;t++)if(this.checkCanSlot(t)){e=!1;break}return e},t.prototype.callMonster=function(e){var t=this.clearSlot(e,[T.Monster]);this.Mode=P.Normal,this.monsterCallCount++,this.gamePlay.addPlayerScore(-i.GetMonsterCost(this.monsterCallCount-1),p.ScoreType.MonsterCost,1,null),C.inst.dispatch(i.GetMonsterCost(this.monsterCallCount),t,e)},t}(c.SingleTon());o.GameLogic=x,cc._RF.pop()},{"../../Ad/AdLayer":"AdLayer","../../Global/GameRule":"GameRule","../../Utils/Cocos":"Cocos","../../Utils/Random":"Random","../../Utils/Signal":"Signal","../../View/Test":"Test","../../utils/ToSingleton":"ToSingleton","../View/Game/NextPie":"NextPie","./GamePlayModel":"GamePlayModel","./SliceModel":"SliceModel"}],GamePlayModel:[function(e,t,o){"use strict";cc._RF.push(t,"3a3dbMmjXZDlbutv0S4vxKQ","GamePlayModel"),Object.defineProperty(o,"__esModule",{value:!0});var n,i=e("../../Global/Theme"),a=e("../../Global/GameRule"),r=e("../../Command/CommonSignal"),s=e("../../Global/Level"),c=e("../../Utils/Random"),l=e("../../Utils/Signal"),u=e("../View/UI/RevertButtonView"),p=e("../../Controller/GameStateController"),d=e("../View/UI/SubmitLayerView"),h=e("../../Model/PlayModelProxy"),f=e("./GameLogic"),m=e("../../Utils/Cocos");(function(e){e[e.Step=0]="Step",e[e.Place=1]="Place",e[e.Complete=2]="Complete",e[e.Star=3]="Star",e[e.Boom=4]="Boom",e[e.Combo=5]="Combo",e[e.TimeBonus=6]="TimeBonus",e[e.PauseCost=7]="PauseCost",e[e.MonsterCost=8]="MonsterCost"})(n=o.ScoreType||(o.ScoreType={}));var y=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(l.BaseSignal);o.ScoreCountDownUpdateSignal=y;var g=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(l.BaseSignal);o.GameTypeInitSignal=g;var S=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(l.BaseSignal);o.RevertButtonStateChangedSignal=S;var C=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(l.BaseSignal);o.UpdateTypeLabelSignal=C;var _=function(){function e(){this.level=0,this.playerScore=0,this.noviceScore=0,this.gameTime=a.GetTotalTime(),this.pauseCount=0,this.pauseScore=0,this.streak=0,this.totalStreak=0,this.maxSteak=0,this.scaleCountDown=a.ScoreBonusCountdown(),this.playerScoreMap={},this.reverts=[],this.init()}return e.prototype.init=function(){f.GameLogic.inst.bindGamePlay(this),u.RevertSignal.inst.addListener(this.revertAction,this),d.EndNowSignal.inst.addListener(this.onEndNow,this),r.GameOverSignal.inst.addListener(function(e){},this),this.resetScaleCountDown()},Object.defineProperty(e.prototype,"Time",{get:function(){return this.gameTime},set:function(e){this.gameTime=e,this.gameTime=Math.max(0,this.gameTime)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"BonusProgress",{get:function(){return this.scaleCountDown/a.ScoreBonusCountdown()},enumerable:!0,configurable:!0}),e.prototype.addScaleCountDown=function(e){this.scaleCountDown>0&&(this.scaleCountDown+=e,this.scaleCountDown=m.Clamp(this.scaleCountDown,a.ScoreBonusCountdown(),0),y.inst.dispatch(this.BonusProgress))},e.prototype.resetScaleCountDown=function(){this.scaleCountDown=a.ScoreBonusCountdown(),y.inst.dispatch(this.scaleCountDown/a.ScoreBonusCountdown())},Object.defineProperty(e.prototype,"Theme",{get:function(){return this.theme},set:function(e){console.log("set game theme:",i.Theme[e]),this.theme=e,r.GameThemeInit.inst.dispatch(this.theme)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Level",{get:function(){return this.level},set:function(e){console.log("set game Level:",e),this.level=e;var t=this.level*a.GetTypeCount();h.NextLevelSignal.inst.dispatch(this.level),a.ScoreModel.NextLevel(),C.inst.dispatch(t)},enumerable:!0,configurable:!0}),e.prototype.nextLevel=function(){this.Level+1>=a.GetTotalLevel()?p.GameStateController.inst.roundEnd(p.RoundEndType.Complete):this.Level++},Object.defineProperty(e.prototype,"TotalScore",{get:function(){return Math.max(this.Timebonus+this.ScoreSpread+this.playerScore,0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Timebonus",{get:function(){return 0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ScoreSpread",{get:function(){return 0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"PlayerScore",{get:function(){return this.playerScore},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"PauseScore",{get:function(){return this.pauseScore},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"NoviceScore",{get:function(){return this.noviceScore},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"TotalCombo",{get:function(){return this.totalStreak},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"PauseCount",{get:function(){return this.pauseCount},enumerable:!0,configurable:!0}),e.prototype.onEndNow=function(){this.checkCompleteScore(),p.GameStateController.inst.roundEnd(p.RoundEndType.Over)},e.prototype.addRevert=function(e){CELER_X&&(this.reverts.length=0),this.reverts.push(e),S.inst.dispatch(!0)},e.prototype.revertAction=function(){},e.prototype.checkCompleteScore=function(){},e.prototype.initGametheme=function(){var e=s.Level.getThemeRandomPool(this.Level);this.Theme=e[Math.floor(c.Random.getRandom()*e.length)]},e.prototype.initGameData=function(){console.log("init game data."),f.GameLogic.inst.initData()},e.prototype.addPlayerScore=function(e,t,o,n){if(void 0===o&&(o=1),void 0===n&&(n=null),0!=e){null==this.playerScoreMap[t]&&(this.playerScoreMap[t]=0),this.playerScoreMap[t]+=e;var i=this.playerScore;return this.playerScore+=e,e>0||this.resetCombo(),this.playerScore=Math.max(this.playerScore,0),r.PlayerScoreChanged.inst.dispatch(this.playerScore,e,o,n),this.playerScore-i}},e.prototype.addNoviceScore=function(e,t){void 0===t&&(t=1),this.noviceScore+=e,this.noviceScore=Math.max(this.noviceScore,0),r.NoviceScoreChanged.inst.dispatch(this.noviceScore,e,t)},e.prototype.getScoreByType=function(e){return"number"!=typeof this.playerScoreMap[e]?0:this.playerScoreMap[e]},e.prototype.addPauseCount=function(){this.pauseCount++,console.log("pause count:",this.pauseCount),this.pauseCount>a.FreePauseLimit&&this.addPlayerScore(-a.GetScoreByType(n.PauseCost),n.PauseCost)},e.prototype.resetCombo=function(){this.streak=0},e.prototype.addStreak=function(){this.streak++,this.totalStreak++,this.maxSteak=Math.max(this.maxSteak,this.streak)},e.prototype.dump=function(){},e}();o.GamePlayModel=_,cc._RF.pop()},{"../../Command/CommonSignal":"CommonSignal","../../Controller/GameStateController":"GameStateController","../../Global/GameRule":"GameRule","../../Global/Level":"Level","../../Global/Theme":"Theme","../../Model/PlayModelProxy":"PlayModelProxy","../../Utils/Cocos":"Cocos","../../Utils/Random":"Random","../../Utils/Signal":"Signal","../View/UI/RevertButtonView":"RevertButtonView","../View/UI/SubmitLayerView":"SubmitLayerView","./GameLogic":"GameLogic"}],GamePlaySignal:[function(e,t,o){"use strict";cc._RF.push(t,"6a923XZO3BHe6UfcoANFeWX","GamePlaySignal"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(e("../../Utils/Signal").BaseSignal);o.SubmitButtonClickSignal=n,cc._RF.pop()},{"../../Utils/Signal":"Signal"}],GameRecorder:[function(e,t,o){"use strict";cc._RF.push(t,"46f2dagdDRJBLTWeuQLW3r/","GameRecorder"),Object.defineProperty(o,"__esModule",{value:!0});var n="http://192.168.100.69:2021/",i=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.RATE=6,t.frameCount=0,t}return __extends(t,e),t.prototype.init=function(){var e=this;CELER_X||cc.sys.isMobile||this.sendRequest(n,"Login").then(function(t){console.log("response:",t),e.register()}).catch(function(e){console.warn("err:",e)})},t.prototype.register=function(){cc.director.on(cc.Director.EVENT_AFTER_DRAW,this.onGameDrawed,this)},t.prototype.onGameDrawed=function(){if(this.frameCount++,!(this.frameCount<this.RATE)){this.frameCount=0;var e=document.getElementsByTagName("canvas")[0];this.sendRequest(n+"capture",e.toDataURL("image/jpeg",.1))}},t.prototype.sendRequest=function(e,t){return new Promise(function(o,n){var i=cc.loader.getXMLHttpRequest();i.onreadystatechange=function(){i.readyState==XMLHttpRequest.DONE&&(i.status>=200&&i.status<300?o(i.responseText):n(i.status))},i.timeout=5e3,i.open("POST",e),i.send(t)})},t}(e("../utils/ToSingleton").SingleTon());o.GameRecorder=i,cc._RF.pop()},{"../utils/ToSingleton":"ToSingleton"}],GameRule:[function(e,t,o){"use strict";var n,i;cc._RF.push(t,"58c53me7vtEdKVK7W6RnNQo","GameRule"),Object.defineProperty(o,"__esModule",{value:!0});var a,r=e("../GamePlay/Model/GamePlayModel"),s=e("../Utils/Random");function c(){return 90}o.DrawDebug=!1,o.FreePauseLimit=3,o.GetTotalTime=c,function(e){e[e.Boluo=0]="Boluo",e[e.Chengzi=1]="Chengzi",e[e.Hamigua=2]="Hamigua",e[e.Mihoutao=3]="Mihoutao",e[e.Qingning=4]="Qingning",e[e.Xigua=5]="Xigua"}(a=o.SliceIconType||(o.SliceIconType={})),o.SliceTypeArray=[a.Boluo,a.Chengzi,a.Hamigua,a.Mihoutao,a.Qingning,a.Xigua],o.SliceIcon=((n={})[a.Boluo]="slice_boluo",n[a.Chengzi]="slice_chengzi",n[a.Hamigua]="slice_hamigua",n[a.Mihoutao]="slice_mihoutao",n[a.Qingning]="slice_qingning",n[a.Xigua]="slice_xigua",n),o.PieIcon=((i={})[a.Boluo]="icon_boluos",i[a.Chengzi]="icon_chengzis",i[a.Hamigua]="icon_hamiguas",i[a.Mihoutao]="icon_mihoutaos",i[a.Qingning]="icon_qingnings",i[a.Xigua]="icon_xiguas",i),o.GetScoreByType=function(e){switch(e){case r.ScoreType.PauseCost:return 100;case r.ScoreType.Boom:return 200;case r.ScoreType.Combo:return 100;case r.ScoreType.Complete:return 200;case r.ScoreType.Place:case r.ScoreType.Step:return 10;case r.ScoreType.Star:return 200}return 0},o.GetScoreScale=function(e){return e>.85?2:e>.4?1.5:e>0?1.2:1};var l=function(){function e(){}return e.GetScore=function(e,t){return void 0===t&&(t=!1),null==this.lastType?(t&&(this.lastType=e),50):this.lastType==e?50:(t&&(this.lastType=e),60)},e.NextLevel=function(){this.lastType=null},e.lastType=null,e}();function u(){return 50/30}function p(){return 80}o.ScoreModel=l,o.GetTotalLevel=function(){return 2},o.GetTypeCount=function(){return 3},o.GetCollectCount=function(){return 5},o.GetFaultCount=function(){return 5},o.ScoreBonusCountdown=function(){return 3},o.DoublePercent=function(){return.85},o.OneDa5Percent=function(){return.6},o.OneDa2Percent=function(){return 0},o.MapSpeedUpScale=u,o.StartSpeed=p,o.GetTotalMapHeight=function(){return 15870},o.GetSliceCount=function(){var e=s.Random.getRandom();return e>=.3?1:e>=.1?2:3},o.GetMonsterCost=function(e){return e<1?0:Math.max(0,50+10*(e-1))},cc._RF.pop()},{"../GamePlay/Model/GamePlayModel":"GamePlayModel","../Utils/Random":"Random"}],GameStateController:[function(e,t,o){"use strict";cc._RF.push(t,"b768b1DCFpC4aef+tHUAH/Y","GameStateController"),Object.defineProperty(o,"__esModule",{value:!0});var n,i=e("../Utils/ToSingleton"),a=e("../Command/CommonSignal"),r=e("../Model/PlayModelProxy");(function(e){e[e.Complete=0]="Complete",e[e.Over=1]="Over",e[e.TimeUp=2]="TimeUp",e[e.OutOfMove=3]="OutOfMove"})(n=o.RoundEndType||(o.RoundEndType={}));var s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.pauseCount=0,t.interactivePauseCount=0,t.roundstart=!1,t.isReady=!1,t.isOver=!1,t.currentRound=0,t.onResumeCallbacks=[],t}return __extends(t,e),t.prototype.start=function(){this.pauseCount=0,this.interactivePauseCount=0},t.prototype.canStart=function(){return this.isReady},t.prototype.roundStart=function(){this.isOver||(console.log(" round start:",++this.currentRound),this.roundstart=!0)},t.prototype.roundEnd=function(e){console.log("round end :",n[e]),this.roundstart=!1,this.isOver=!0,a.GameOverSignal.inst.dispatch(e)},t.prototype.isRoundStart=function(){return this.roundstart},t.prototype.pause=function(e){void 0===e&&(e=!1),0==this.isPause()&&(this.onResumeCallbacks.length=0,a.GamePauseSignal.inst.dispatch(),e||this.onResumeCallbacks.push(function(){r.PlayModelProxy.inst.addPauseCount()})),this.pauseCount++},t.prototype.testEndComplete=function(){this.roundEnd(n.Complete)},t.prototype.testEndTimeUp=function(){r.PlayModelProxy.inst.addGameTime(-1e12)},t.prototype.clearResumeCallback=function(){this.onResumeCallbacks.length=0},t.prototype.resume=function(){if(this.pauseCount--,console.assert(this.pauseCount>=0," pause count smaller than 0!!!"),this.pauseCount=Math.max(this.pauseCount,0),this.pauseCount<=0){for(var e=0,t=this.onResumeCallbacks;e<t.length;e++){(0,t[e])()}this.onResumeCallbacks.length=0}},t.prototype.isPause=function(){return this.pauseCount>0},t.prototype.addResumeCallback=function(e){this.onResumeCallbacks||(this.onResumeCallbacks=[]),this.onResumeCallbacks.push(e)},t.prototype.isGameOver=function(){return this.isOver},t.prototype.pauseInteractive=function(){this.interactivePauseCount++},t.prototype.resumeInteractive=function(){this.interactivePauseCount--,console.assert(this.interactivePauseCount>=0," pause count smaller than 0!!!"),this.interactivePauseCount=Math.max(this.interactivePauseCount,0)},t.prototype.isInteractivePause=function(){return this.interactivePauseCount>0},t.prototype.canInteractive=function(){return!(t.inst.isPause()||t.inst.isGameOver()||!t.inst.isRoundStart()||t.inst.isInteractivePause())},t}(i.SingleTon());o.GameStateController=s,!CELER_X&&(window.GameState=s.inst),cc._RF.pop()},{"../Command/CommonSignal":"CommonSignal","../Model/PlayModelProxy":"PlayModelProxy","../Utils/ToSingleton":"ToSingleton"}],GeometryPolygon:[function(e,t,o){"use strict";cc._RF.push(t,"be6e5c558tCA4kc1f7sk46v","GeometryPolygon"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../Utils/Cocos");function i(e){if(e.length<=2)return 0;for(var t=0,o=0;o<e.length;++o){var n=(o+1)%e.length;t+=e[o].x*e[n].y,t-=e[o].y*e[n].x}return.5*Math.abs(t)}function a(e,t){for(var o=[],n=0,i=0,a=t;i<a.length;i++){var r=a[i];if(r.x==e.x&&r.y==e.y){o=o.concat(t.slice(n+1,t.length-1));break}o.push(r),n++}return cc.Intersection.pointInPolygon(e,o)}function r(e,t,o,n){var i=(t.y-e.y)*(n.x-o.x)-(e.x-t.x)*(o.y-n.y);if(0===i)return null;var a=((t.x-e.x)*(n.x-o.x)*(o.y-e.y)+(t.y-e.y)*(n.x-o.x)*e.x-(n.y-o.y)*(t.x-e.x)*o.x)/i,r=-((t.y-e.y)*(n.y-o.y)*(o.x-e.x)+(t.x-e.x)*(n.y-o.y)*e.y-(n.x-o.x)*(t.y-e.y)*o.y)/i;return(a-e.x)*(a-t.x)<=0&&(r-e.y)*(r-t.y)<=0&&(a-o.x)*(a-n.x)<=0&&(r-o.y)*(r-n.y)<=0?cc.v2(a,r):null}o.polygonArea=i,o.concaveJudgement=a,o.segementIntersection=r,o.intersectPolygon=function(e,t){for(var o=new s([],"",null,null),n=0,i=e.ExpendPoints;n<i.length;n++){var a=i[n];cc.Intersection.pointInPolygon(a,t.Points)&&o.addPoint(a)}for(var c=0,l=t.ExpendPoints;c<l.length;c++)a=l[c],cc.Intersection.pointInPolygon(a,e.Points)&&o.addPoint(a);for(var u=0;u<e.ExpendPoints.length;++u)for(var p=e.ExpendPoints[u],d=e.ExpendPoints[(u+1)%e.ExpendPoints.length],h=0;h<t.ExpendPoints.length;++h){var f=r(p,d,t.ExpendPoints[h],t.ExpendPoints[(h+1)%t.ExpendPoints.length]);f&&o.addPoint(f)}return o.update(),o.orderByPointAngle(),o.Points.length>0?o:null};var s=function(){function e(e,t,o,n,i){void 0===t&&(t=""),void 0===i&&(i=!0),this.isUpdate=!1,this.originPoints=[],this.originPointsBackup=[],this.originBoundingBox=cc.rect(0,0,0,0),this.currentPoints=[],this.currentBoundingBox=cc.rect(0,0,0,0),this.expendOriginPoints=[],this.expendCurrentPoints=[],this.expendBoundingBox=cc.rect(0,0,0,0),this.area=0,this.center=cc.v2(0,0),this.originCenter=cc.v2(0,0),this.position=cc.v2(0,0),this.rotation=0,this.id="",this.expendSize=null,this.inertia=0,this.border={top:cc.v2(0,cc.macro.MIN_ZINDEX),bot:cc.v2(0,cc.macro.MAX_ZINDEX),left:cc.v2(cc.macro.MAX_ZINDEX,0),right:cc.v2(cc.macro.MIN_ZINDEX,0)},this.expendBorder={top:cc.v2(0,cc.macro.MIN_ZINDEX),bot:cc.v2(0,cc.macro.MAX_ZINDEX),left:cc.v2(cc.macro.MAX_ZINDEX,0),right:cc.v2(cc.macro.MIN_ZINDEX,0)},this.originBorder={top:cc.v2(0,cc.macro.MIN_ZINDEX),bot:cc.v2(0,cc.macro.MAX_ZINDEX),left:cc.v2(cc.macro.MAX_ZINDEX,0),right:cc.v2(cc.macro.MIN_ZINDEX,0)},this.hasClearConcave=!1,this.type=o,this.subType=n,this.id=t;for(var a=0,r=e;a<r.length;a++){var s=r[a];this.originPoints.push(cc.v2(s.x,s.y)),this.originPointsBackup.push(cc.v2(s.x,s.y))}i?this.clearConcavePoints():this.update(),this.inertia=this.getInertia()}return Object.defineProperty(e.prototype,"SubType",{get:function(){return this.subType},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Type",{get:function(){return this.type},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Inertia",{get:function(){return this.inertia},enumerable:!0,configurable:!0}),e.prototype.getInertia=function(){for(var e,t,o,n=0,i=0,a=this.Points,r=0;r<a.length;r++)e=a[r].sub(this.position,e),t=a[(r+1)%a.length].sub(this.position,t),n+=(o=Math.abs(e.cross(t)))*(e.dot(e)+e.dot(t)+t.dot(t)),i+=o;return 1/6*(n/i)},e.prototype.addPoint=function(e,t){void 0===t&&(t=!1),this.hasClearConcave=!1,this.originPoints.push(e),t&&this.update()},e.prototype.updateOriginCenter=function(){this.originCenter=cc.v2(0,0);for(var e=this.OriginPoints,t=0;t<e.length;t++)this.originCenter.x+=e[t].x,this.originCenter.y+=e[t].y;this.originCenter.x/=e.length,this.originCenter.y/=e.length},e.prototype.clearConcavePoints=function(){if(!this.hasClearConcave){for(;;){for(var e=0,t=0;t<this.originPoints.length;t++){a(this.originPoints[t],this.originPoints)&&(e++,this.originPoints.splice(t,1),t--)}if(0==e)break}this.hasClearConcave=!0,this.update()}},e.prototype.update=function(){this.updateOriginBorder(),this.updateOriginCenter(),this.updatePoints(),this.area=i(this.originPoints)},e.prototype.rotateByAroundPoint=function(e,t){this.rotation=0;for(var o=[],i=0,a=this.currentPoints;i<a.length;i++){var r=a[i],s=cc.v2(r.x,r.y);n.RotatePoint(s,e,t),o.push(s)}null!=this.expendSize&&this.expend()},e.prototype.moveBy=function(e,t){this.position.x+=e,this.position.y+=t,this.updatePoints(),null!=this.expendSize&&this.expend()},e.prototype.moveTo=function(e,t){this.position.x=e,this.position.y=t,this.updatePoints(),null!=this.expendSize&&this.expend()},e.prototype.rotateTo=function(e){this.rotation=e,this.updatePoints(),null!=this.expendSize&&this.expend()},e.prototype.rotateBy=function(e){this.rotation+=e,this.updatePoints(),null!=this.expendSize&&this.expend()},e.prototype.expend=function(e){null!=e?this.expendSize=e:e=this.expendSize||0,this.clearConcavePoints(),this.expendCurrentPoints.length=0;for(var t=0;t<this.Points.length;t++){var o=this.Points[t],n=cc.v2(0,0);if(o.x==this.center.x)n.x=o.x,o.y>this.center.y?n.y=o.y+e:n.y=o.y-e;else if(o.y==this.center.y)n.y=o.y,o.x>this.center.x?n.x=o.x+e:n.x=o.x-e;else{var i=(o.y-this.center.y)/(o.x-this.center.x),a=Math.atan(i);o.x>this.center.x?n.x=o.x+Math.abs(Math.cos(a))*e:n.x=o.x-Math.abs(Math.cos(a))*e,o.y>this.center.y?n.y=o.y+Math.abs(Math.sin(a))*e:n.y=o.y-Math.abs(Math.sin(a))*e}this.expendCurrentPoints.push(n)}this.updateExpendBorder(),this.expendOriginPoints.length=0;for(var r=0;r<this.OriginPoints.length;r++){o=this.OriginPoints[r],n=cc.v2(0,0);if(o.x==this.originCenter.x)n.x=o.x,o.y>this.originCenter.y?n.y=o.y+e:n.y=o.y-e;else if(o.y==this.originCenter.y)n.y=o.y,o.x>this.originCenter.x?n.x=o.x+e:n.x=o.x-e;else{i=(o.y-this.originCenter.y)/(o.x-this.originCenter.x),a=Math.atan(i);o.x<this.originCenter.x?n.x=o.x-Math.abs(Math.cos(a))*e:n.x=o.x+Math.abs(Math.cos(a))*e,o.y<this.originCenter.y?n.y=o.y-Math.abs(Math.sin(a))*e:n.y=o.y+Math.abs(Math.sin(a))*e}this.expendOriginPoints.push(n)}},e.prototype.resetTransform=function(){this.position.x=0,this.position.y=0,this.rotation=0,this.updatePoints(),null!=this.expendSize&&this.expend()},e.prototype.updateOriginBorder=function(){this.originBorder={top:cc.v2(0,cc.macro.MIN_ZINDEX),bot:cc.v2(0,cc.macro.MAX_ZINDEX),left:cc.v2(cc.macro.MAX_ZINDEX,0),right:cc.v2(cc.macro.MIN_ZINDEX,0)};for(var e=0,t=this.OriginPoints;e<t.length;e++){var o=t[e];this.originBorder.top.y<o.y&&(this.originBorder.top=cc.v2(o.x,o.y)),this.originBorder.bot.y>o.y&&(this.originBorder.bot=cc.v2(o.x,o.y)),this.originBorder.left.x>o.x&&(this.originBorder.left=cc.v2(o.x,o.y)),this.originBorder.right.x<o.x&&(this.originBorder.right=cc.v2(o.x,o.y))}this.originBoundingBox.x=this.originBorder.left.x,this.originBoundingBox.y=this.originBorder.bot.y,this.originBoundingBox.width=Math.abs(this.originBorder.right.x-this.originBorder.left.x),this.originBoundingBox.height=Math.abs(this.originBorder.top.y-this.originBorder.bot.y)},Object.defineProperty(e.prototype,"OriginConcavePoints",{get:function(){return this.originPointsBackup},enumerable:!0,configurable:!0}),e.prototype.updateBorder=function(){this.border={top:cc.v2(0,cc.macro.MIN_ZINDEX),bot:cc.v2(0,cc.macro.MAX_ZINDEX),left:cc.v2(cc.macro.MAX_ZINDEX,0),right:cc.v2(cc.macro.MIN_ZINDEX,0)};for(var e=0,t=this.Points;e<t.length;e++){var o=t[e];this.border.top.y<o.y&&(this.border.top=cc.v2(o.x,o.y)),this.border.bot.y>o.y&&(this.border.bot=cc.v2(o.x,o.y)),this.border.left.x>o.x&&(this.border.left=cc.v2(o.x,o.y)),this.border.right.x<o.x&&(this.border.right=cc.v2(o.x,o.y))}this.currentBoundingBox.x=this.border.left.x,this.currentBoundingBox.y=this.border.bot.y,this.currentBoundingBox.width=Math.abs(this.border.right.x-this.border.left.x),this.currentBoundingBox.height=Math.abs(this.border.top.y-this.border.bot.y)},e.prototype.updateExpendBorder=function(){this.expendBorder={top:cc.v2(0,cc.macro.MIN_ZINDEX),bot:cc.v2(0,cc.macro.MAX_ZINDEX),left:cc.v2(cc.macro.MAX_ZINDEX,0),right:cc.v2(cc.macro.MIN_ZINDEX,0)};for(var e=0,t=this.expendCurrentPoints;e<t.length;e++){var o=t[e];this.expendBorder.top.y<o.y&&(this.expendBorder.top=cc.v2(o.x,o.y)),this.expendBorder.bot.y>o.y&&(this.expendBorder.bot=cc.v2(o.x,o.y)),this.expendBorder.left.x>o.x&&(this.expendBorder.left=cc.v2(o.x,o.y)),this.expendBorder.right.x<o.x&&(this.expendBorder.right=cc.v2(o.x,o.y))}this.expendBoundingBox.x=this.expendBorder.left.x,this.expendBoundingBox.y=this.expendBorder.bot.y,this.expendBoundingBox.width=Math.abs(this.expendBorder.right.x-this.expendBorder.left.x),this.expendBoundingBox.height=Math.abs(this.expendBorder.top.y-this.expendBorder.bot.y)},Object.defineProperty(e.prototype,"ExpendBorder",{get:function(){return this.expendBorder},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ExpendBox",{get:function(){return this.expendBoundingBox},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ExpendBoxPoints",{get:function(){var e=this.expendBoundingBox;return[cc.v2(e.x,e.y),cc.v2(e.x+e.width,e.y),cc.v2(e.x+e.width,e.y+e.height),cc.v2(e.x,e.y+e.height)]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Border",{get:function(){return this.border},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"OriginBorder",{get:function(){return this.originBorder},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ID",{get:function(){return this.id},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Points",{get:function(){return this.currentPoints},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"OriginPoints",{get:function(){return this.originPoints},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ExpendPoints",{get:function(){return this.expendCurrentPoints.length<=0&&this.expend(),this.expendCurrentPoints},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ExpendOrginPoints",{get:function(){return this.expendOriginPoints.length<=0&&this.expend(),this.expendOriginPoints},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Area",{get:function(){return this.area},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Center",{get:function(){return this.center},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"OriginCenter",{get:function(){return this.originCenter},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Rotation",{get:function(){return this.rotation},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Position",{get:function(){return this.position},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"BoundingBox",{get:function(){return this.currentBoundingBox},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"OriginBoundingBox",{get:function(){return this.originBoundingBox},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"BoundingPoints",{get:function(){var e=this.currentBoundingBox;return[cc.v2(e.x,e.y),cc.v2(e.x+e.width,e.y),cc.v2(e.x+e.width,e.y+e.height),cc.v2(e.x,e.y+e.height)]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"OriginBoundingPoints",{get:function(){var e=this.originBoundingBox;return[cc.v2(e.x,e.y),cc.v2(e.x+e.width,e.y),cc.v2(e.x+e.width,e.y+e.height),cc.v2(e.x,e.y+e.height)]},enumerable:!0,configurable:!0}),e.prototype.updatePoints=function(){this.currentPoints.length=0;for(var e=0,t=this.originPoints;e<t.length;e++){var o=t[e],i=cc.v2(o.x,o.y);n.RotatePoint(i,this.rotation),i.addSelf(this.position),this.currentPoints.push(i)}this.center=cc.v2(0,0);for(var a=this.currentPoints,r=0;r<a.length;r++)this.center.x+=a[r].x,this.center.y+=a[r].y;this.center.x/=a.length,this.center.y/=a.length,this.updateBorder()},e.prototype.orderByPointAngle=function(){},e.prototype.getAnnealingValue=function(e){this.rotateTo(e);for(var t=cc.v2(1e4,1e4),o=0,n=this.Points;o<n.length;o++){var i=n[o];i.y<t.y&&(t.x=i.x,t.y=i.y)}return this.center.y-t.y},Object.defineProperty(e.prototype,"GravityH",{get:function(){return this.center.y-this.expendBorder.bot.y},enumerable:!0,configurable:!0}),e}();o.GeometryPolygon=s,cc._RF.pop()},{"../../Utils/Cocos":"Cocos"}],GetAnimation:[function(e,t,o){"use strict";cc._RF.push(t,"87472rkNRFLV6p3FLVzoveI","GetAnimation"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../../Utils/FrameAniBase"),i=e("../../Model/GameLogic"),a=e("../Game/PieRoot"),r=cc._decorator,s=r.ccclass,c=(r.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.slices=[],t.type=[],t}return __extends(t,e),t.prototype.onLoad=function(){var t=this;e.prototype.onLoad.call(this),this.node.active=!1,i.PieCompleteSignal.inst.addListener(function(e,o,n){if(e.toString()==t.node.parent.name){if(t.type=n,t.isPlaying&&(t.stop(),t.onComplete()),t.play(),t.slices=o,t.type.indexOf(i.ClearType.Star)>=0||t.type.indexOf(i.ClearType.Boom)>=0)return;a.PieFlySignal.inst.dispatch(t.node.parent.name,t.slices)}},this)},t.prototype.onComplete=function(){e.prototype.onComplete.call(this),this.type.indexOf(i.ClearType.Star)>=0||this.type.indexOf(i.ClearType.Boom)},t=__decorate([s],t)}(n.default));o.default=c,cc._RF.pop()},{"../../../Utils/FrameAniBase":"FrameAniBase","../../Model/GameLogic":"GameLogic","../Game/PieRoot":"PieRoot"}],GlobalSingleTouchMediator:[function(e,t,o){"use strict";cc._RF.push(t,"50484YTu+lAFp2acGVLgU7t","GlobalSingleTouchMediator"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../Controller/GameStateController"),i=e("../../Utils/Signal"),a=e("../SingleTouchMediator"),r=cc._decorator,s=r.ccclass,c=(r.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(i.BaseSignal));o.ShowTipSignal=c;var l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.time=0,t}return __extends(t,e),t.prototype.onRegister=function(){e.prototype.onRegister.call(this),this.node._touchListener.swallowTouches=!1},t.prototype.onTouchStart=function(e){n.GameStateController.inst.canStart()&&0==n.GameStateController.inst.isRoundStart()&&n.GameStateController.inst.roundStart(),this.time=0},t.prototype.onTouchMove=function(e){this.time=0},t.prototype.onTouchEnd=function(e){this.time=0},t.prototype.onTouchCancel=function(e){this.time=0},t.prototype.update=function(e){this.time+=e,this.time>=3&&(this.time=0,c.inst.dispatch())},t=__decorate([s],t)}(a.default);o.default=l,cc._RF.pop()},{"../../Controller/GameStateController":"GameStateController","../../Utils/Signal":"Signal","../SingleTouchMediator":"SingleTouchMediator"}],GlobalSingleTouchView:[function(e,t,o){"use strict";cc._RF.push(t,"4cc97bBcEZPu7Haxk0HdV9+","GlobalSingleTouchView"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../BaseView"),i=e("./GlobalSingleTouchMediator"),a=cc._decorator,r=a.ccclass,s=(a.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onLoad=function(){this.BindMedaitor(i.default)},t.prototype.start=function(){},t=__decorate([r],t)}(n.default));o.default=s,cc._RF.pop()},{"../BaseView":"BaseView","./GlobalSingleTouchMediator":"GlobalSingleTouchMediator"}],GridUtil:[function(e,t,o){"use strict";cc._RF.push(t,"8ed47lZW5tLWYuOMXgo3GBi","GridUtil"),Object.defineProperty(o,"__esModule",{value:!0}),o.GridRange={i:{max:11,min:0},j:{max:8,min:0}};var n=function(){function e(){}return e.copyGrid=function(e){return{i:e.i,j:e.j}},e.GetHorizontalWayByOrigin=function(e){for(var t=[],n={i:e.i,j:e.j};--n.j>=o.GridRange.j.min;)t.push(this.copyGrid(n));for(var i={i:e.i,j:e.j};++i.j<=o.GridRange.j.max;)t.push(this.copyGrid(i));return t},e.GetVerticalWayByOrigin=function(e){for(var t=[],n={i:e.i,j:e.j};++n.i<=o.GridRange.i.max;)t.push(this.copyGrid(n));for(var i={i:e.i,j:e.j};--i.i>=o.GridRange.i.min;)t.push(this.copyGrid(i));return t},e.GetDiagonalWayByOrigin=function(e){for(var t=[],n={i:e.i,j:e.j};++n.i<=o.GridRange.i.max&&--n.j>=o.GridRange.j.min;)t.push(this.copyGrid(n));for(var i={i:e.i,j:e.j};++i.i<=o.GridRange.i.max&&++i.j<=o.GridRange.j.max;)t.push(this.copyGrid(i));for(var a={i:e.i,j:e.j};--a.i>=o.GridRange.i.min&&--a.j>=o.GridRange.j.min;)t.push(this.copyGrid(a));for(var r={i:e.i,j:e.j};--r.i>=o.GridRange.i.min&&++r.j<=o.GridRange.j.max;)t.push(this.copyGrid(r));return t},e.GetSquaredWayByOrigin=function(e){for(var t=[],n={i:e.i,j:e.j};++n.i<=o.GridRange.i.max&&--n.j>=o.GridRange.j.min;){t.push(this.copyGrid(n));break}for(var i={i:e.i,j:e.j};++i.i<=o.GridRange.i.max&&++i.j<=o.GridRange.j.max;){t.push(this.copyGrid(i));break}for(var a={i:e.i,j:e.j};--a.i>=o.GridRange.i.min&&--a.j>=o.GridRange.j.min;){t.push(this.copyGrid(a));break}for(var r={i:e.i,j:e.j};--r.i>=o.GridRange.i.min&&++r.j<=o.GridRange.j.max;){t.push(this.copyGrid(r));break}for(var s={i:e.i,j:e.j};++s.j<=o.GridRange.j.max;){t.push(this.copyGrid(s));break}for(var c={i:e.i,j:e.j};--c.j>=o.GridRange.j.min;){t.push(this.copyGrid(c));break}for(var l={i:e.i,j:e.j};--l.i>=o.GridRange.i.min;){t.push(this.copyGrid(l));break}for(var u={i:e.i,j:e.j};++u.i<=o.GridRange.i.max;){t.push(this.copyGrid(u));break}return t},e}();o.GridUtil=n,cc._RF.pop()},{}],HashMap:[function(e,t,o){"use strict";cc._RF.push(t,"4b0e7DzcRNJnZXTYCWgDaDU","HashMap"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function e(){this._list=new Array,this.clear()}return e.prototype.getIndexByKey=function(e){for(var t=this._list.length,o=0;o<t;o++){if(this._list[o].key==e)return o}return-1},e.prototype.keyOf=function(e){for(var t=this._list.length,o=0;o<t;o++){var n=this._list[o];if(n.value.hashKey&&e.hashKey&&n.value.hashKey===e.hashKey||n.value==e)return n.key}return null},Object.defineProperty(e.prototype,"keys",{get:function(){for(var e=new Array,t=0,o=this._list;t<o.length;t++){var n=o[t];n&&e.push(n.key)}return e},enumerable:!0,configurable:!0}),e.prototype.add=function(e,t){var o={key:e,value:t},n=this.getIndexByKey(e);-1!=n?this._list[n]=o:this._list.push(o)},Object.defineProperty(e.prototype,"values",{get:function(){return this._list},enumerable:!0,configurable:!0}),e.prototype.remove=function(e){var t=this.getIndexByKey(e);if(-1!=t){var o=this._list[t];return this._list.splice(t,1),o}return null},e.prototype.has=function(e){return-1!=this.getIndexByKey(e)},e.prototype.get=function(e){var t=this.getIndexByKey(e);return-1!=t?this._list[t].value:null},Object.defineProperty(e.prototype,"length",{get:function(){return this._list.length},enumerable:!0,configurable:!0}),e.prototype.sort=function(e){this._list.sort(e)},e.prototype.forEachKeyValue=function(e){for(var t=this._list.length,o=0;o<t;o++){e(this._list[o])}},e.prototype.forEach=function(e){for(var t=this._list.length,o=0;o<t;o++){var n=this._list[o];e(n.key,n.value)}},e.prototype.clear=function(){this._list=[]},e}();o.HashMap=n,cc._RF.pop()},{}],HelpButtonView:[function(e,t,o){"use strict";cc._RF.push(t,"55938+NxDZMXZHVR36gYzbo","HelpButtonView"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../../Command/CommonSignal"),i=e("../../../Controller/GameStateController"),a=e("../../../View/SingleTouchView"),r=cc._decorator,s=r.ccclass,c=(r.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onTouchEnd=function(){i.GameStateController.inst.isGameOver()||(n.ShowHelpLayerSignal.inst.dispatch(),n.ButtonClickSignal.inst.dispatch())},t=__decorate([s],t)}(a.default));o.default=c,cc._RF.pop()},{"../../../Command/CommonSignal":"CommonSignal","../../../Controller/GameStateController":"GameStateController","../../../View/SingleTouchView":"SingleTouchView"}],HelpLabelView:[function(e,t,o){"use strict";cc._RF.push(t,"35611eOFW5NW4kAL24WQXOx","HelpLabelView"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../../Command/CommonSignal"),i=e("../../../Global/GameRule"),a=e("../../../table"),r=e("../../../Tutorial/TutorialView"),s=cc._decorator,c=s.ccclass,l=(s.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),Object.defineProperty(t.prototype,"Label",{get:function(){return this.getComponent(cc.RichText)},enumerable:!0,configurable:!0}),t.prototype.onLoad=function(){n.ShowHelpLayerSignal.inst.addListener(this.renderText,this),r.ShowTutorialSignal.inst.addListener(this.renderText,this)},t.prototype.renderText=function(){var e=parseInt(this.node.name),t=[];switch(e){case 0:t=[i.GetTypeCount(),i.GetTypeCount()];break;case 1:t=[i.GetFaultCount(),i.GetFaultCount(),i.GetTotalLevel()]}this.Label.string=lan.t(a.En_View.BangZhuJieMian,a.En_ID.BangZhuYeMian1+e,t)},t=__decorate([c],t)}(cc.Component));o.default=l,cc._RF.pop()},{"../../../Command/CommonSignal":"CommonSignal","../../../Global/GameRule":"GameRule","../../../Tutorial/TutorialView":"TutorialView","../../../table":"table"}],HelpLayerMediator:[function(e,t,o){"use strict";cc._RF.push(t,"ab216iOmFFBBo7YhihjIFYL","HelpLayerMediator"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("./BaseMediator"),i=e("../Command/CommonSignal"),a=e("../Controller/GameStateController"),r=e("../Tutorial/TutorialView"),s=cc._decorator,c=s.ccclass,l=(s.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.closeCallback=null,t}return __extends(t,e),t.prototype.onRegister=function(){i.ShowHelpLayerSignal.inst.addListener(this.showHelp,this),r.ShowTutorialSignal.inst.addListener(this.showGuide,this),i.HideHelpLayerSignal.inst.addListener(this.hideGuide,this)},t.prototype.showHelp=function(e){this.View.isShowed()||(a.GameStateController.inst.pause(),this.closeCallback=e,this.View.Show())},t.prototype.showGuide=function(e){this.View.isShowed()||(a.GameStateController.inst.pause(!0),this.closeCallback=e,this.View.Show())},t.prototype.hideGuide=function(){0!=this.View.isShowed()&&(a.GameStateController.inst.resume(),this.View.Hide(this.closeCallback),this.closeCallback=null)},t=__decorate([c],t)}(n.default));o.default=l,cc._RF.pop()},{"../Command/CommonSignal":"CommonSignal","../Controller/GameStateController":"GameStateController","../Tutorial/TutorialView":"TutorialView","./BaseMediator":"BaseMediator"}],HelpLayerView:[function(e,t,o){"use strict";cc._RF.push(t,"7de5dV5nLxKg6SXhg1Pqw8Z","HelpLayerView"),Object.defineProperty(o,"__esModule",{value:!0});var n,i=e("./BaseView"),a=e("./HelpLayerMediator"),r=e("../Command/CommonSignal"),s=e("../GamePlay/View/new/Page"),c=e("../Model/PlayModelProxy"),l=e("../Global/Theme"),u=cc._decorator,p=u.ccclass,d=u.property;(function(e){e[e.Show=0]="Show",e[e.Hide=1]="Hide"})(n||(n={}));var h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state=n.Hide,t.Next=null,t.Close=null,t.GuidePage=null,t.TotalPage=null,t.Page=null,t}return __extends(t,e),Object.defineProperty(t.prototype,"Background",{get:function(){return this.node.getChildByName("Background")},enumerable:!0,configurable:!0}),t.prototype.onLoad=function(){this.BindMedaitor(a.default),this.state=n.Hide,this.node.scale=1,this.node.active=!1,this.GuidePage.node.on("page-turning",this.onPageChanged,this),this.Close.on(cc.Node.EventType.TOUCH_END,this.close,this),this.Next.on(cc.Node.EventType.TOUCH_END,this.next,this)},t.prototype.start=function(){},t.prototype.close=function(){r.ButtonClickSignal.inst.dispatch(),r.HideHelpLayerSignal.inst.dispatch()},t.prototype.next=function(){r.ButtonClickSignal.inst.dispatch(),this.GuidePage.scrollToPage((this.GuidePage.getCurrentPageIndex()+1)%this.GuidePage.content.childrenCount,0),this.onPageChanged()},t.prototype.onPageChanged=function(){this.TotalPage&&(this.TotalPage.string=this.GuidePage.content.childrenCount.toString()),this.Page&&(this.Page.string=(this.GuidePage.getCurrentPageIndex()+1).toString()),this.GuidePage.content.children[this.GuidePage.getCurrentPageIndex()].getComponent(s.default)&&this.GuidePage.content.children[this.GuidePage.getCurrentPageIndex()].getComponent(s.default).play(),this.GuidePage.getCurrentPageIndex()>=this.GuidePage.content.childrenCount-1?(this.Next.active=!1,this.Close.active=!0):(this.Next.active=!0,this.Close.active=!1)},t.prototype.isShowed=function(){return this.state==n.Show},t.prototype.Show=function(e){if(!this.isShowed()){this.state=n.Show,this.node.active=!0,this.node.stopAllActions();for(var t=0,o=0,i=this.Background.children;o<i.length;o++){var a=i[o];a.active=a.name==l.Theme[c.PlayModelProxy.inst.Theme],a.active&&t++}t<=0&&(this.Background.children[0].active=!0),this.node.scale=0,this.node.runAction(cc.sequence(cc.callFunc(function(){}),cc.scaleTo(.1,1),cc.callFunc(function(){e&&e()}))),this.Next.active=!0,this.Close.active=!1,this.GuidePage.scrollToPage(0,0),this.onPageChanged()}},t.prototype.Hide=function(e){var t=this;0!=this.isShowed()&&(this.state=n.Hide,this.node.stopAllActions(),this.node.runAction(cc.sequence(cc.scaleTo(.1,0),cc.callFunc(function(){t.node.scale=1,e&&e(),t.node.active=!1}))))},__decorate([d(cc.Node)],t.prototype,"Next",void 0),__decorate([d(cc.Node)],t.prototype,"Close",void 0),__decorate([d(cc.PageView)],t.prototype,"GuidePage",void 0),__decorate([d(cc.Label)],t.prototype,"TotalPage",void 0),__decorate([d(cc.Label)],t.prototype,"Page",void 0),t=__decorate([p],t)}(i.default);o.default=h,cc._RF.pop()},{"../Command/CommonSignal":"CommonSignal","../GamePlay/View/new/Page":"Page","../Global/Theme":"Theme","../Model/PlayModelProxy":"PlayModelProxy","./BaseView":"BaseView","./HelpLayerMediator":"HelpLayerMediator"}],HelpTextView:[function(e,t,o){"use strict";cc._RF.push(t,"74edf/haApO/o+HQzJTRd7r","HelpTextView"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../Command/CommonSignal"),i=e("../table"),a=cc._decorator,r=a.ccclass,s=(a.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),Object.defineProperty(t.prototype,"richText",{get:function(){return this.getComponent(cc.RichText)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"text",{get:function(){return this.getComponent(cc.Label)},enumerable:!0,configurable:!0}),t.prototype.onLoad=function(){n.ShowHelpLayerSignal.inst.addListener(this.renderText,this)},t.prototype.renderText=function(){this.text?this.text.string=lan.t(i.En_View.BangZhuJieMian,i.En_ID.BangZhuYeMian1+parseInt(this.node.name)):this.richText&&(this.richText.string=lan.t(i.En_View.BangZhuJieMian,i.En_ID.BangZhuYeMian1+parseInt(this.node.name)))},t=__decorate([r],t)}(cc.Component));o.default=s,cc._RF.pop()},{"../Command/CommonSignal":"CommonSignal","../table":"table"}],InitialFacade:[function(e,t,o){"use strict";cc._RF.push(t,"cbbbcO7od5PrqaPNOs8dFh3","InitialFacade"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../Command/InititalCommand"),i=e("../Command/StartGameCommand"),a=e("../Command/LoadAudioCommand"),r=e("../Command/LoadPrefabCommand"),s=e("../../Utils/Celer/CelerSDK"),c=e("../../Manager/StepManager"),l=e("../Command/LoadJsonCommand"),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(e("../../Utils/Signal").BaseSignal);o.UpdateInitLoadingSignal=u;var p=function(){function e(e){this.stepMgr=new c.StepManager,this.facade=puremvc.Facade.getInstance(e)}return Object.defineProperty(e,"inst",{get:function(){return this.instance?this.instance:this.instance=new e(e.MULTITON_KEY)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Facade",{get:function(){return console.assert(null!==this.facade," facade is null"),this.facade},enumerable:!0,configurable:!0}),e.prototype.startStep=function(e){this.stepMgr.start(e)},e.prototype.register=function(){var t=this;this.facade.registerCommand(e.INITIALIZATION,n.InitialCommand),this.facade.registerCommand(e.START_UP,i.StartGameCommand),this.stepMgr.register(function(){t.facade.sendNotification(e.START_UP,t)},e.TOTAL_STEPS),s.CelerSDK.inst.init(function(){t.facade.sendNotification(e.INITIALIZATION,t)})},e.prototype.unregister=function(){this.facade.removeCommand(e.INITIALIZATION),this.facade.removeCommand(e.START_UP)},e.prototype.start=function(){this.register(),s.CelerSDK.inst.celerXReady()},e.prototype.step=function(e){console.log(" initialization step:",e),this.stepMgr.nextStep(e)},e.MULTITON_KEY="INITIAL_FCADE",e.INITIALIZATION="initialization",e.START_UP="startup",e.TOTAL_STEPS=[a.LoadAudioCommand.STEP,r.LoadPrefabCommand.STEP,l.LoadJsonCommand.STEP],e}();o.InitialFacade=p,cc._RF.pop()},{"../../Manager/StepManager":"StepManager","../../Utils/Celer/CelerSDK":"CelerSDK","../../Utils/Signal":"Signal","../Command/InititalCommand":"InititalCommand","../Command/LoadAudioCommand":"LoadAudioCommand","../Command/LoadJsonCommand":"LoadJsonCommand","../Command/LoadPrefabCommand":"LoadPrefabCommand","../Command/StartGameCommand":"StartGameCommand"}],InititalCommand:[function(e,t,o){"use strict";cc._RF.push(t,"a28caT/H41F74cWxJYqN9pz","InititalCommand"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("./LoadPrefabCommand"),i=e("./LoadAudioCommand"),a=e("./LoadJsonCommand"),r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.initializeMacroCommand=function(){this.addSubCommand(n.LoadPrefabCommand),this.addSubCommand(i.LoadAudioCommand),this.addSubCommand(a.LoadJsonCommand)},t}(puremvc.MacroCommand);o.InitialCommand=r,cc._RF.pop()},{"./LoadAudioCommand":"LoadAudioCommand","./LoadJsonCommand":"LoadJsonCommand","./LoadPrefabCommand":"LoadPrefabCommand"}],Level:[function(e,t,o){"use strict";cc._RF.push(t,"3db54FVK6dM2Ik/+eMmSgop","Level"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../Utils/Cocos"),i=e("./Theme"),a=function(){function e(){}return e.getThemeRandomPool=function(e){for(;this.pool.length<120;)this.pool.push(i.Theme.One);return n.disOrderArray(this.pool),this.pool},e.pool=[],e}();o.Level=a,cc._RF.pop()},{"../Utils/Cocos":"Cocos","./Theme":"Theme"}],LoadAudioCommand:[function(e,t,o){"use strict";cc._RF.push(t,"d4f3eGYUlBES5d8aEvuPQna","LoadAudioCommand"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../Facade/InitialFacade"),i=e("../../Manager/AudioManager"),a=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.percent=0,t}return __extends(t,e),t.prototype.execute=function(e){var o=this;if(e){var a=e.getBody();a&&a.step&&i.gAudio.init(function(){a.step(t.STEP)},function(e){n.UpdateInitLoadingSignal.inst.dispatch(1/n.InitialFacade.TOTAL_STEPS.length*(e-o.percent)),o.percent=e})}},t.STEP="LoadAudio",t}(puremvc.SimpleCommand);o.LoadAudioCommand=a,cc._RF.pop()},{"../../Manager/AudioManager":"AudioManager","../Facade/InitialFacade":"InitialFacade"}],LoadJsonCommand:[function(e,t,o){"use strict";cc._RF.push(t,"a8ceflQ6kFFcbxjBXqDT3ec","LoadJsonCommand"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../TableManager"),i=e("../../Utils/Celer/CelerSDK"),a=e("../Facade/InitialFacade"),r=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.percent=0,t.count=0,t.Total=1,t}return __extends(t,e),t.prototype.execute=function(e){var t=this;this.count=0,this.notification=e,n.TableManager.inst.startLoad("/json",function(){i.CelerSDK.inst.defineLan(),t.addCount()},function(e){a.UpdateInitLoadingSignal.inst.dispatch(1/t.Total/a.InitialFacade.TOTAL_STEPS.length*(e-t.percent)),t.percent=e})},t.prototype.addCount=function(){var e=this.notification.getBody();this.count++,this.notification&&this.count>=this.Total&&e&&e.step&&e.step(t.STEP)},t.STEP="LoadJson",t}(puremvc.SimpleCommand);o.LoadJsonCommand=r,cc._RF.pop()},{"../../TableManager":"TableManager","../../Utils/Celer/CelerSDK":"CelerSDK","../Facade/InitialFacade":"InitialFacade"}],LoadPrefabCommand:[function(e,t,o){"use strict";cc._RF.push(t,"8b33fPnvCZEJ7bc/zCVv9My","LoadPrefabCommand"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../Facade/InitialFacade"),i=e("../../Factory/GameFactory"),a=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.percent=0,t}return __extends(t,e),t.prototype.execute=function(e){var o=this;i.gFactory.init(function(){if(e){var o=e.getBody();o&&o.step&&o.step(t.STEP)}},function(e){n.UpdateInitLoadingSignal.inst.dispatch(1/n.InitialFacade.TOTAL_STEPS.length*(e-o.percent)),o.percent=e})},t.STEP="LoadPrefab",t}(puremvc.SimpleCommand);o.LoadPrefabCommand=a,cc._RF.pop()},{"../../Factory/GameFactory":"GameFactory","../Facade/InitialFacade":"InitialFacade"}],LoadingAnimation:[function(e,t,o){"use strict";cc._RF.push(t,"ffb02xEHrJEypPRGQsTZHhY","LoadingAnimation"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../Utils/FrameAniBase"),i=cc._decorator,a=i.ccclass,r=(i.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t=__decorate([a],t)}(n.default));o.default=r,cc._RF.pop()},{"../../Utils/FrameAniBase":"FrameAniBase"}],LoadingPageMediator:[function(e,t,o){"use strict";cc._RF.push(t,"359acCsI6FNpLUAuWOw+Fv4","LoadingPageMediator"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../View/BaseMediator"),i=e("../../Utils/Celer/CelerSDK"),a=e("../../Command/CommonSignal"),r=e("../../Model/PlayModelProxy"),s=e("../../Tutorial/TutorialView"),c=cc._decorator,l=c.ccclass,u=(c.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.time=1500,t.startTime=0,t}return __extends(t,e),t.prototype.onRegister=function(){this.startTime=Date.now(),a.GameReadySignal.inst.addOnce(this.onGameReady,this)},t.prototype.onGameReady=function(){var e=this,t=Date.now()-this.startTime;console.log(" -- game init done, hide loading page: ",t),t<=this.time?setTimeout(function(){e.View.Hide(function(){e.startGame()})},this.time-t):this.View.Hide(function(){e.startGame()})},t.prototype.startGame=function(){i.CelerSDK.inst.isNew()?s.ShowTutorialSignal.inst.dispatch(function(){r.PlayModelProxy.inst.gameReadyShow()}):r.PlayModelProxy.inst.gameReadyShow()},t.prototype.onDestroy=function(){},t=__decorate([l],t)}(n.default));o.default=u,cc._RF.pop()},{"../../Command/CommonSignal":"CommonSignal","../../Model/PlayModelProxy":"PlayModelProxy","../../Tutorial/TutorialView":"TutorialView","../../Utils/Celer/CelerSDK":"CelerSDK","../../View/BaseMediator":"BaseMediator"}],LoadingView:[function(e,t,o){"use strict";cc._RF.push(t,"dfec6LZreJCaa8QdaMxRAO/","LoadingView"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../View/BaseView"),i=e("../Facade/InitialFacade"),a=e("./LoadingPageMediator"),r=cc._decorator,s=r.ccclass,c=(r.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.percent=0,t}return __extends(t,e),Object.defineProperty(t.prototype,"ProgressLabel",{get:function(){return this.node.getChildByName("ProgressLabel").getComponent(cc.Label)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Loading",{get:function(){return this.node.getChildByName("ae_loading1")},enumerable:!0,configurable:!0}),t.prototype.onLoad=function(){var e=this;this.node.scale=1,this.node.opacity=255,this.BindMedaitor(a.default),i.UpdateInitLoadingSignal.inst.addListener(function(t){e.percent+=t,e.percent=Math.min(1,e.percent),e.ProgressLabel.string=(100*e.percent).toFixed(0)+"%"},this)},t.prototype.start=function(){},t.prototype.Hide=function(e){var t=this;this.Loading&&(this.Loading.active=!1),this.node.runAction(cc.sequence(cc.fadeOut(.5),cc.callFunc(function(){t.node.active=!1,e()})))},t=__decorate([s],t)}(n.default));o.default=c,cc._RF.pop()},{"../../View/BaseView":"BaseView","../Facade/InitialFacade":"InitialFacade","./LoadingPageMediator":"LoadingPageMediator"}],LogHandler:[function(e,t,o){"use strict";cc._RF.push(t,"a4747QIvUBIo6Ktpx/xQwuB","LogHandler"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(e){function t(){var o=e.call(this)||this;if(o.logFunc=console.log,o.logMsg=null,o.frameTimes=0,o.now=0,o.Frame=20,o.totalFrames=0,o.startTime=0,window.addEventListener)for(var n=0,i=t.LISTENNING_EVENTS;n<i.length;n++){var a=i[n],r="trigger"+a.charAt(0).toLocaleUpperCase()+a.substring(1);o[r]&&"function"==typeof o[r]&&window.addEventListener(a,o[r].bind(o))}return o}return __extends(t,e),t.prototype.dumpFrameInfo=function(){var e=(Date.now()-this.startTime)/1e3,t=e/this.totalFrames;this.log(" total frames:",this.totalFrames," ,total cost time:",e+"s"," , per frame cost time ave:"+t+"s")},t.prototype.log=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.addLog.apply(this,e),this.sendLog()},t.prototype.ready=function(){console.log(t.VERSION)},t.prototype.initLog=function(e){var o=this;cc.director.once(cc.Director.EVENT_AFTER_SCENE_LAUNCH,function(){o.frameTimes=0,o.now=Date.now(),o.startTime=Date.now()},this),cc.director.on(cc.Director.EVENT_AFTER_DRAW,function(){o.frameTimes++,o.totalFrames++,o.frameTimes>=o.Frame&&(o.frameTimes=0,o.now=Date.now())},this),this.logFunc=e,window.consoleError=console.error,window.consoleWarn=console.warn,window.consoleLog=console.log,window.consoleAssert=console.assert,console.error=function(){for(var e,o=[],n=0;n<arguments.length;n++)o[n]=arguments[n];(e=t.inst).log.apply(e,["[ERROR]"].concat(o))},console.warn=function(){for(var e,o=[],n=0;n<arguments.length;n++)o[n]=arguments[n];(e=t.inst).log.apply(e,["[WARN]"].concat(o))},console.log=function(){for(var e,o=[],n=0;n<arguments.length;n++)o[n]=arguments[n];(e=t.inst).log.apply(e,["[INFO]"].concat(o))},console.assert=function(e){for(var o,n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];e||(o=t.inst).log.apply(o,["[ASSERT ERROR]"].concat(n))}},t.prototype.formatLogArguments=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var o="",n=0;n<arguments.length;n++){var i=typeof arguments[n];"string"==i||"number"==i?o+=" "+arguments[n]:"object"==i?o+=" "+JSON.stringify(arguments[n]):"boolean"==i&&arguments[n].toString&&(o+=arguments[n].toString())}return o},t.prototype.addLog=function(){for(var e=[],o=0;o<arguments.length;o++)e[o]=arguments[o];null==this.logMsg&&(this.logMsg={});var n=this.formatLogArguments.apply(this,e),i=this.getFullTime(new Date);this.logMsg[i]=t.VERSION+n},t.prototype.getFullTime=function(e){var t="";t+=e.getFullYear();var o=e.getMonth()+1;t+="-"+(o>=10?o:"0"+o);var n=e.getDate();t+="-"+(n>=10?n:"0"+n);var i=e.getHours();t+="  "+(i>=10?i:"0"+i);var a=e.getMinutes();t+=":"+(a>=10?a:"0"+a);var r=e.getSeconds();return t+=":"+(r>=10?r:"0"+r)},t.prototype.sendLog=function(){this.logFunc&&null!=this.logMsg&&(this.logFunc(JSON.stringify(this.logMsg)),this.logMsg=null)},t.prototype.triggerClose=function(e){this.addLog("triggerClose"),this.sendLog()},t.prototype.triggerLoad=function(e){this.addLog("triggerLoad"),this.sendLog()},t.prototype.triggerUnload=function(e){this.addLog("triggerUnload"),this.sendLog()},t.prototype.triggerOnunload=function(e){this.addLog("triggerUnload"),this.sendLog()},t.prototype.triggerError=function(e){this.addLog("triggerError"),this.addLog(e.message),this.sendLog()},t.prototype.triggerFocus=function(e){this.addLog("triggerFocus"),this.sendLog()},t.prototype.triggerBlur=function(e){this.addLog("triggerBlur"),this.sendLog()},t.prototype.triggerAbort=function(e){this.addLog("triggerAbort"),this.sendLog()},t.prototype.triggerSuspend=function(e){this.addLog("triggerSuspend"),this.sendLog()},t.prototype.beforeunload=function(e){this.addLog("beforeunload"),this.sendLog()},t.VERSION=window.GAME_VERSION||" --- ",t.LISTENNING_EVENTS=["error"],t}(e("./ToSingleton").SingleTon());o.LogHandler=n,cc._RF.pop()},{"./ToSingleton":"ToSingleton"}],MenuButtonView:[function(e,t,o){"use strict";cc._RF.push(t,"28073o37LNPKaWTUfECMch5","MenuButtonView"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../../Command/CommonSignal"),i=e("../../../Controller/GameStateController"),a=e("../../../Utils/Signal"),r=e("../../../View/SingleTouchView"),s=cc._decorator,c=s.ccclass,l=(s.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(a.BaseSignal));o.MenuButtonClickSignal=l;var u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onTouchEnd=function(){i.GameStateController.inst.isGameOver()||(l.inst.dispatch(),n.ButtonClickSignal.inst.dispatch())},t.prototype.start=function(){},t=__decorate([c],t)}(r.default);o.default=u,cc._RF.pop()},{"../../../Command/CommonSignal":"CommonSignal","../../../Controller/GameStateController":"GameStateController","../../../Utils/Signal":"Signal","../../../View/SingleTouchView":"SingleTouchView"}],MenuLayerView:[function(e,t,o){"use strict";cc._RF.push(t,"85bd9XHwOpA8pPYE/vCkvEe","MenuLayerView"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../../Command/CommonSignal"),i=e("../../../Controller/GameStateController"),a=e("../../../Global/GameRule"),r=e("../../../Global/Theme"),s=e("../../../Model/PlayModelProxy"),c=e("../../../table"),l=e("../../../View/BaseView"),u=e("../../Model/GamePlayModel"),p=e("./MenuButtonView"),d=e("./SubmitLayerView"),h=cc._decorator,f=h.ccclass,m=(h.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),Object.defineProperty(t.prototype,"Resume",{get:function(){return this.node.getChildByName("ResumeButton")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"EndNow",{get:function(){return this.node.getChildByName("EndNow")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Background",{get:function(){return this.node.getChildByName("Background")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Content",{get:function(){return this.node.getChildByName("Content").getComponent(cc.RichText)},enumerable:!0,configurable:!0}),t.prototype.onLoad=function(){var t=this;p.MenuButtonClickSignal.inst.addListener(this.onShow,this),n.ShowPauseLayerSignal.inst.addListener(function(){t.onShow()},this),this.Resume.on(cc.Node.EventType.TOUCH_END,function(){i.GameStateController.inst.resume(),n.ButtonClickSignal.inst.dispatch(),t.Hide()},this),this.EndNow.on(cc.Node.EventType.TOUCH_END,function(){t.Hide(),n.ButtonClickSignal.inst.dispatch(),d.EndNowSignal.inst.dispatch()},this),e.prototype.onLoad.call(this),this.node.active=!1},t.prototype.onShow=function(){if(!this.node.active){for(var e=0,t=0,o=this.Background.children;t<o.length;t++){var n=o[t];n.active=n.name==r.Theme[s.PlayModelProxy.inst.Theme],n.active&&e++}e<=0&&(this.Background.children[0].active=!0),s.PlayModelProxy.inst.FreePauseCount<=0?this.Content.string=lan.t(c.En_View.ZanTingJieMian,c.En_ID.ZanTingKouFen,[""+a.GetScoreByType(u.ScoreType.PauseCost)]):this.Content.string=lan.t(c.En_View.ZanTingJieMian,c.En_ID.MianFeiZanTing,[s.PlayModelProxy.inst.FreePauseCount.toString(),""+a.GetScoreByType(u.ScoreType.PauseCost)]),this.Show(),i.GameStateController.inst.pause()}},t.prototype.start=function(){},t=__decorate([f],t)}(l.default));o.default=m,cc._RF.pop()},{"../../../Command/CommonSignal":"CommonSignal","../../../Controller/GameStateController":"GameStateController","../../../Global/GameRule":"GameRule","../../../Global/Theme":"Theme","../../../Model/PlayModelProxy":"PlayModelProxy","../../../View/BaseView":"BaseView","../../../table":"table","../../Model/GamePlayModel":"GamePlayModel","./MenuButtonView":"MenuButtonView","./SubmitLayerView":"SubmitLayerView"}],MonsterIdleAnimation:[function(e,t,o){"use strict";cc._RF.push(t,"08b12KB69hEyoIUV34LX1GY","MonsterIdleAnimation"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../../Utils/FrameAniBase"),i=e("../../Model/GameLogic"),a=e("../Game/MonsterReady"),r=cc._decorator,s=r.ccclass,c=(r.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onLoad=function(){var t=this;e.prototype.onLoad.call(this),this.node.active=!1,this.Interval=.07,a.MonsterShowSignal.inst.addListener(function(){i.GameLogic.inst.Mode==i.PlayMode.Clean&&t.playOnLoop()},this),i.CallMonsterSignal.inst.addListener(function(){t.stop(),t.node.active=!1},this)},t=__decorate([s],t)}(n.default));o.default=c,cc._RF.pop()},{"../../../Utils/FrameAniBase":"FrameAniBase","../../Model/GameLogic":"GameLogic","../Game/MonsterReady":"MonsterReady"}],MonsterReady:[function(e,t,o){"use strict";cc._RF.push(t,"34cb771E8pFHIg6bPOEYQbs","MonsterReady"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../../Utils/Signal"),i=e("../../Model/GameLogic"),a=cc._decorator,r=a.ccclass,s=(a.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(n.BaseSignal));o.MonsterShowSignal=s;var c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.startPosition=cc.v2(420.477,564.185),t.startScale=.3,t.topPosition=cc.v2(262.899,666.42),t}return __extends(t,e),t.prototype.onLoad=function(){var e=this;this.node.scale=this.startScale,this.node.setPosition(this.startPosition),i.PlayModeChangedSignal.inst.addListener(function(t){t==i.PlayMode.Clean?(e.node.active=!0,e.node.runAction(cc.sequence(cc.moveTo(.15,e.topPosition),cc.spawn(cc.moveTo(.2,0,0),cc.scaleTo(.2,1,1)),cc.callFunc(function(){e.node.scale=e.startScale,e.node.setPosition(e.startPosition),s.inst.dispatch()})))):(e.node.stopAllActions(),e.node.active=!1,e.node.scale=e.startScale,e.node.setPosition(e.startPosition))},this)},t=__decorate([r],t)}(cc.Component);o.default=c,cc._RF.pop()},{"../../../Utils/Signal":"Signal","../../Model/GameLogic":"GameLogic"}],MonsterTipHand:[function(e,t,o){"use strict";cc._RF.push(t,"69a5fkWpBxEb58dytFNgxlv","MonsterTipHand"),Object.defineProperty(o,"__esModule",{value:!0});e("../../Model/GameLogic"),e("./ClearSliceLayer");var n=cc._decorator,i=n.ccclass,a=(n.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.startPostition=cc.v2(430.579,435.175),t.endPosition=cc.v2(430.579,500.524),t}return __extends(t,e),t.prototype.onLoad=function(){this.node.active=!1},t=__decorate([i],t)}(cc.Component));o.default=a,cc._RF.pop()},{"../../Model/GameLogic":"GameLogic","./ClearSliceLayer":"ClearSliceLayer"}],NextPie:[function(e,t,o){"use strict";cc._RF.push(t,"b6708AlEvRJXJrEDiiV2T4x","NextPie"),Object.defineProperty(o,"__esModule",{value:!0});e("../../../Global/GameRule");var n=e("../../../Utils/Signal"),i=(e("../../Model/SliceModel"),cc._decorator),a=i.ccclass,r=(i.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(n.BaseSignal));o.NextSliceGenerateSignal=r;var s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onLoad=function(){for(var e=0,t=this.node.children;e<t.length;e++){t[e].active=!1}r.inst.addListener(this.onNextPie,this)},t.prototype.onNextPie=function(e){for(var t=0,o=this.node.children;t<o.length;t++){var n=o[t];n.active=e.SliceIndex.indexOf(parseInt(n.name))>=0}},t=__decorate([a],t)}(cc.Component);o.default=s,cc._RF.pop()},{"../../../Global/GameRule":"GameRule","../../../Utils/Signal":"Signal","../../Model/SliceModel":"SliceModel"}],NumberChangedView:[function(e,t,o){"use strict";cc._RF.push(t,"5f2acutWoZLka/VldveJWjk","NumberChangedView"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("./BaseView"),i=cc._decorator,a=i.ccclass,r=(i.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.num=0,t.showNum=0,t.step=0,t.label=null,t.fixCount=0,t.isSingle=!0,t.isUpperCase=!1,t.isSmartFix=!1,t.action=!0,t.STEP=60,t.scale=1,t.maxNumber=0,t.preFix="",t.sign="/",t.callback=null,t}return __extends(t,e),Object.defineProperty(t.prototype,"Label",{get:function(){return this.label?this.label:this.label=this.node.getComponent(cc.Label)},enumerable:!0,configurable:!0}),t.prototype.setNumber=function(e){this.showNum=e,this.num=e,1==this.scale?this.Label.string=this.preFix+cc.ScienceNumber(e,this.maxNumber,this.fixCount,this.isUpperCase,this.isSingle,this.isSmartFix).toString():this.Label.string=this.preFix+cc.ScienceNumber(e/this.scale,this.maxNumber,this.fixCount,this.isUpperCase,this.isSingle,this.isSmartFix)},t.prototype.onLoad=function(){},t.prototype.start=function(){},t.prototype.onStep=function(e){},t.prototype.onNumberChanged=function(e,t){if(this.num=e,this.callback=t,this.num!=this.showNum){var o=this.num-this.showNum;this.step=o>0?Math.ceil(o/this.STEP):Math.floor(o/this.STEP),this.action&&this.node.runAction(cc.sequence(cc.scaleTo(.1,1.4),cc.delayTime(.05),cc.scaleTo(.1,1)))}else this.step=0},t.prototype.update=function(e){this.num!=this.showNum&&(this.showNum+=this.step,this.onStep(this.step),(this.showNum>this.num&&this.step>0||this.showNum<this.num&&this.step<0)&&(this.showNum=this.num,this.step=0)),Math.abs(this.num-this.showNum)<=Math.abs(this.step)&&this.callback&&"function"==typeof this.callback&&(this.callback(),this.callback=null),1==this.scale?this.Label.string=this.showNum>=0?this.preFix+cc.ScienceNumber(this.showNum,this.maxNumber,this.fixCount,this.isUpperCase,this.isSingle,this.isSmartFix):this.preFix+this.sign+cc.ScienceNumber(Math.abs(this.showNum),this.maxNumber,this.fixCount,this.isUpperCase,this.isSingle,this.isSmartFix):this.Label.string=this.showNum>=0?this.preFix+cc.ScienceNumber(this.showNum/this.scale,this.maxNumber,this.fixCount,this.isUpperCase,this.isSingle,this.isSmartFix):this.preFix+this.sign+cc.ScienceNumber(Math.abs(this.showNum/this.scale),this.maxNumber,this.fixCount,this.isUpperCase,this.isSingle,this.isSmartFix)},t=__decorate([a],t)}(n.default));o.default=r,cc._RF.pop()},{"./BaseView":"BaseView"}],OKAnimation:[function(e,t,o){"use strict";cc._RF.push(t,"edfc2oVkbJLwLdrthGyBJOz","OKAnimation"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../../Utils/FrameAniBase"),i=e("../../../Utils/Signal"),a=cc._decorator,r=a.ccclass,s=(a.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(i.BaseSignal));o.PlaceOkSignal=s;var c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onLoad=function(){var t=this;e.prototype.onLoad.call(this),this.node.active=!1,this.Interval=.05,s.inst.addListener(function(e){t.node.parent.name==e&&t.play()},this)},t=__decorate([r],t)}(n.default);o.default=c,cc._RF.pop()},{"../../../Utils/FrameAniBase":"FrameAniBase","../../../Utils/Signal":"Signal"}],Page:[function(e,t,o){"use strict";cc._RF.push(t,"5ab38aDYzFDBobaWEcqAEr3","Page"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("./BreakAnimation"),i=cc._decorator,a=i.ccclass,r=i.property,s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.DiamondRoot=null,t.BreakAnimation=null,t.ScoreRoot=null,t.Blue=null,t.Green=null,t.blueFrom=null,t.greenFrom=null,t}return __extends(t,e),t.prototype.onLoad=function(){this.blueFrom=this.Blue.position.clone(),this.greenFrom=this.Green.position.clone()},t.prototype.play=function(){this.showDiamond(),this.swapDiamond()},t.prototype.showDiamond=function(){this.Blue.setPosition(this.blueFrom),this.Green.setPosition(this.greenFrom),this.DiamondRoot.active=!0;for(var e=0,t=this.DiamondRoot.children;e<t.length;e++){t[e].stopAllActions()}for(var o=0,n=this.ScoreRoot.children;o<n.length;o++){n[o].stopAllActions()}this.BreakAnimation.active=!1,this.ScoreRoot.active=!1},t.prototype.swapDiamond=function(){var e=this;this.Blue.runAction(cc.sequence(cc.delayTime(.5),cc.moveTo(.1,this.greenFrom),cc.delayTime(.2),cc.callFunc(function(){e.playBreak()}))),this.Green.runAction(cc.sequence(cc.delayTime(.5),cc.moveTo(.1,this.blueFrom),cc.callFunc(function(){})))},t.prototype.playBreak=function(){var e=this;this.DiamondRoot.active=!1,this.BreakAnimation.active=!0;for(var t=!1,o=function(o){o.getComponent(n.default).play(),o.getComponent(n.default).onComplete=t?function(){}:function(){o.runAction(cc.sequence(cc.fadeOut(.2),cc.delayTime(1),cc.callFunc(function(){e.play()})))},t=!0},i=0,a=this.BreakAnimation.children;i<a.length;i++){o(c=a[i])}this.ScoreRoot.active=!0;for(var r=0,s=this.ScoreRoot.children;r<s.length;r++){var c;(c=s[r]).opacity=255,c.stopAllActions(),c.scale=0,c.runAction(cc.sequence(cc.scaleTo(0,0),cc.scaleTo(.2,1),cc.scaleTo(.1,.5),cc.fadeOut(.1),cc.callFunc(function(){})))}},__decorate([r(cc.Node)],t.prototype,"DiamondRoot",void 0),__decorate([r(cc.Node)],t.prototype,"BreakAnimation",void 0),__decorate([r(cc.Node)],t.prototype,"ScoreRoot",void 0),__decorate([r(cc.Node)],t.prototype,"Blue",void 0),__decorate([r(cc.Node)],t.prototype,"Green",void 0),t=__decorate([a],t)}(cc.Component);o.default=s,cc._RF.pop()},{"./BreakAnimation":"BreakAnimation"}],PauseCostAnimation:[function(e,t,o){"use strict";cc._RF.push(t,"aeb0dNv81RCiZOQBUkb+RCq","PauseCostAnimation"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../Command/CommonSignal"),i=cc._decorator,a=i.ccclass,r=(i.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onLoad=function(){this.node.active=!1,n.PlayerScoreChanged.inst.addListenerFour(this.onScoreChanged,this)},t.prototype.onScoreChanged=function(e,t){var o=this;t>=0||(this.node.active=!0,this.node.opacity=255,this.node.scale=0,this.node.runAction(cc.sequence(cc.scaleTo(.1,1.2),cc.scaleTo(.05,1),cc.fadeOut(.1),cc.callFunc(function(){o.node.active=!1}))))},t=__decorate([a],t)}(cc.Component));o.default=r,cc._RF.pop()},{"../Command/CommonSignal":"CommonSignal"}],PieArray:[function(e,t,o){"use strict";cc._RF.push(t,"e1e3f5jQTVOuqicH5rVnD3z","PieArray"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,i=n.ccclass,a=(n.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}var o;return __extends(t,e),o=t,t.prototype.onLoad=function(){o.node=this.node},t.node=null,t=o=__decorate([i],t)}(cc.Component));o.default=a,cc._RF.pop()},{}],PieCountLabel:[function(e,t,o){"use strict";cc._RF.push(t,"739edxCL/1HlqnF5fOiYe0O","PieCountLabel"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../Model/GameLogic"),i=e("../Game/PieRoot"),a=cc._decorator,r=a.ccclass,s=(a.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),Object.defineProperty(t.prototype,"Label",{get:function(){return this.getComponent(cc.Label)},enumerable:!0,configurable:!0}),t.prototype.onLoad=function(){var e=this;this.Label.string="X0",i.UpdateCompleteCountSignal.inst.addListener(function(){e.Label.string="X"+n.GameLogic.inst.CompleteCount},this)},t=__decorate([r],t)}(cc.Component));o.default=s,cc._RF.pop()},{"../../Model/GameLogic":"GameLogic","../Game/PieRoot":"PieRoot"}],PieRoot:[function(e,t,o){"use strict";cc._RF.push(t,"84d0f0ZwSdEdar9w6kHQEME","PieRoot"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../../Controller/ResourceController"),i=e("../../../Factory/GameFactory"),a=e("../../../Global/GameRule"),r=e("../../../Utils/Cocos"),s=e("../../../Utils/Signal"),c=e("../../Model/GameLogic"),l=e("./PieArray"),u=cc._decorator,p=u.ccclass,d=(u.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(s.BaseSignal));o.UpdateCompleteCountSignal=d;var h=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(s.BaseSignal);o.PieFlySignal=h;var f=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}var o;return __extends(t,e),o=t,t.prototype.onLoad=function(){o.node=this.node,h.inst.addListener(this.onPieCompleteFly,this)},t.prototype.onPieCompleteFly=function(e){var t=this;if(l.default.node.getChildByName(e.toString())){var o=i.gFactory.getObj("Pie");o.getComponent(cc.Sprite).spriteFrame=n.ResourceController.inst.getAltas(a.PieIcon[c.GameLogic.inst.SliceIconType]),o.scale=3.3,this.node.parent.addChild(o),o.setPosition(r.ConvertToNodeSpaceAR(l.default.node.getChildByName(e.toString()),this.node.parent));o.runAction(cc.sequence(cc.spawn(cc.moveTo(.15,r.ConvertToNodeSpaceAR(this.node,this.node.parent)),cc.sequence(cc.delayTime(.15/3*2),cc.scaleTo(.15/3,1))),cc.callFunc(function(){o.setParent(t.node),o.setPosition(0,0),d.inst.dispatch()})))}},t.prototype.update=function(){this.node.scale=Math.min(1,1080/this.node.width)},t.node=null,t=o=__decorate([p],t)}(cc.Component);o.default=f,cc._RF.pop()},{"../../../Controller/ResourceController":"ResourceController","../../../Factory/GameFactory":"GameFactory","../../../Global/GameRule":"GameRule","../../../Utils/Cocos":"Cocos","../../../Utils/Signal":"Signal","../../Model/GameLogic":"GameLogic","./PieArray":"PieArray"}],PieShow:[function(e,t,o){"use strict";cc._RF.push(t,"175eel2VnRC1qz6QD5RLKAL","PieShow"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../../Factory/GameFactory"),i=e("../../Model/GameLogic"),a=cc._decorator,r=a.ccclass,s=(a.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),Object.defineProperty(t.prototype,"Pie",{get:function(){return this.node.getChildByName("Pie")},enumerable:!0,configurable:!0}),t.prototype.onLoad=function(){i.CurrentSliceGenerateSignal.inst.addListener(this.onSliceAdd,this)},t.prototype.onSliceAdd=function(e){var t=n.gFactory.getObj("Slice",e);t.name=e.ID,this.Pie.addChild(t),t.setPosition(0,0)},t=__decorate([r],t)}(cc.Component));o.default=s,cc._RF.pop()},{"../../../Factory/GameFactory":"GameFactory","../../Model/GameLogic":"GameLogic"}],PlayModelProxy:[function(e,t,o){"use strict";cc._RF.push(t,"50835VU6k9M3pgXsJbG5zxG","PlayModelProxy"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../Utils/ToSingleton"),i=e("../Controller/GameStateController"),a=e("../GamePlay/Model/GamePlayModel"),r=e("../Command/CommonSignal"),s=e("../Global/GameRule"),c=e("../Utils/Signal"),l=e("../Ad/FlyCnicornAd"),u=e("../Ad/WildAdButton"),p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(c.BaseSignal);o.NextLevelSignal=p;var d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(c.BaseSignal);o.StartInitMapSignal=d;var h=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(c.BaseSignal);o.StartCountSignal=h;var f=function(e){function t(){var t=e.call(this)||this;return t.isGameOver=!1,t.playerModel=null,t.hasStartCount=!1,t.bindSignal(),t}return __extends(t,e),Object.defineProperty(t.prototype,"Model",{get:function(){return this.playerModel?this.playerModel:this.playerModel=new a.GamePlayModel},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"TimeLeft",{get:function(){return this.Model.Time},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"PlayerScore",{get:function(){return this.Model.PlayerScore},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"NoviceScore",{get:function(){return this.Model.NoviceScore},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"PointSpread",{get:function(){return this.Model.ScoreSpread},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"TimeBonus",{get:function(){return this.Model.Timebonus},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Theme",{get:function(){return this.Model.Theme},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Level",{get:function(){return this.Model.Level},set:function(e){this.Model.Level=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"PauseScore",{get:function(){return this.Model.PauseScore},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"FreePauseCount",{get:function(){return Math.max(0,s.FreePauseLimit-this.Model.PauseCount)},enumerable:!0,configurable:!0}),t.prototype.bindSignal=function(){},t.prototype.initGametheme=function(){d.inst.dispatch(),this.Model.initGametheme()},t.prototype.getTotalScore=function(){return this.Model.TotalScore},t.prototype.addPauseCount=function(){this.Model.addPauseCount()},t.prototype.setTotalTime=function(e){this.Model.Time=e,r.UpdateTimeNumber.inst.dispatch(this.Model.Time,0)},t.prototype.addGameTime=function(e){i.GameStateController.inst.isPause()||0==i.GameStateController.inst.isRoundStart()||this.isGameOver||(0==this.hasStartCount&&(this.hasStartCount=!0,h.inst.dispatch()),this.Model.Time+=e,this.Model.addScaleCountDown(e),l.default.ShowTimeRest>0&&(l.default.ShowTimeRest+=e,l.default.ShowTimeRest<=0&&l.ShowFlyCnicornSignal.inst.dispatch()),r.UpdateTimeNumber.inst.dispatch(this.Model.Time,Math.abs(e)),r.TimeAnimationStateChanged.inst.dispatch(this.Model.Time<=30),this.Model.Time<=0&&(this.Model.checkCompleteScore(),i.GameStateController.inst.roundEnd(i.RoundEndType.TimeUp)))},t.prototype.getScoreByType=function(e){return this.Model.getScoreByType(e)},t.prototype.dump=function(){this.Model.dump()},t.prototype.init=function(){this.Model.initGameData()},t.prototype.gameReadyToStart=function(){r.GameStartSignal.inst.dispatch(),console.log("gameReadyToStart"),u.WildButtonReadySignal.inst.dispatch()},t.prototype.gameReadyShow=function(){this.gameReadyToStart()},t.prototype.testNextLevel=function(){this.Level>=s.GetTotalLevel()?this.Level=0:this.Level++},t.prototype.testScale=function(e){},t.prototype.testGameComplete=function(){setTimeout(function(){i.GameStateController.inst.roundEnd(i.RoundEndType.Complete)},200)},t.prototype.testGameOver=function(){i.GameStateController.inst.roundEnd(i.RoundEndType.Over)},t.prototype.testTimeUp=function(){i.GameStateController.inst.roundEnd(i.RoundEndType.TimeUp)},t.prototype.testOutOfMove=function(){i.GameStateController.inst.roundEnd(i.RoundEndType.OutOfMove)},t}(n.SingleTon());o.PlayModelProxy=f,!CELER_X&&(window.Game=f.inst),cc._RF.pop()},{"../Ad/FlyCnicornAd":"FlyCnicornAd","../Ad/WildAdButton":"WildAdButton","../Command/CommonSignal":"CommonSignal","../Controller/GameStateController":"GameStateController","../GamePlay/Model/GamePlayModel":"GamePlayModel","../Global/GameRule":"GameRule","../Utils/Signal":"Signal","../Utils/ToSingleton":"ToSingleton"}],PositionView:[function(e,t,o){"use strict";cc._RF.push(t,"416f296ZMZPEaWAE2E6IRlj","PositionView"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("./EaseBaseView"),i=cc._decorator,a=i.ccclass,r=(i.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.startPos=cc.Vec2.ZERO,t}return __extends(t,e),Object.defineProperty(t.prototype,"TargetPos",{get:function(){return cc.v2(this.Target.x,this.Target.y)},enumerable:!0,configurable:!0}),t.prototype.canUpdate=function(){return!0},t.prototype.onLoad=function(){0},t.prototype.start=function(){},t.prototype.onPositionChanged=function(e,t,o,n){void 0===n&&(n=0),this.startPos=this.node.position.clone(),this.startUpdate(new cc.Vec3(e.x,e.y,0),t,o,n)},t.prototype.onStep=function(){this.node.x=this.ease(this.startPos.x,this.Target.x),this.node.y=this.ease(this.startPos.y,this.Target.y)},t.prototype.onComplete=function(){this.node.setPosition(cc.v2(this.Target.x,this.Target.y))},t=__decorate([a],t)}(n.default));o.default=r,cc._RF.pop()},{"./EaseBaseView":"EaseBaseView"}],PrefabBaseView:[function(e,t,o){"use strict";cc._RF.push(t,"f24ed/ng45Kt5VKvqibEbvg","PrefabBaseView"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,i=n.ccclass,a=(n.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.model=null,t}return __extends(t,e),t.prototype.onLoad=function(){},t.prototype.reuse=function(e){this.model=e,this.onReuse()},t.prototype.unuse=function(){this.model,this.model=null,this.onUnuse()},t.prototype.onReuse=function(){console.warn(" should override onReuse.")},t.prototype.onUnuse=function(){console.warn(" should override onUnuse.")},t=__decorate([i],t)}(cc.Component));o.default=a,cc._RF.pop()},{}],Random:[function(e,t,o){"use strict";cc._RF.push(t,"114f9Vox8JGQbohBr4HFlkf","Random"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(e("./Signal").BaseSignal);o.RandomSeedInitSignal=n;var i=function(){function e(){}return e.seededRandom=function(e,t,o){return t+1e6*((1711*e+88888)%302654/302654+(1722*e+55555)%302665/302665+(1755*e+23333)%302766/302766)%1e6/1e6*(o-t)},e.getRandom=function(e,t){void 0===e&&(e=0),void 0===t&&(t=1);var o=this.randomSeed,n=this.seededRandom(o,e,t),i=Math.floor(this.seededRandom(o,1,302766));return this.randomSeed+=i,n},e.setRandomSeed=function(e){console.log(" set random seed:",e),this.randomSeed=e,this.sharedSeed=e,n.inst.dispatch(e)},e.randomRoundToInt=function(e,t){return void 0===e&&(e=0),void 0===t&&(t=1),Math.round(this.getRandom(e,t))},e.randomFloorToInt=function(e,t){return void 0===e&&(e=0),void 0===t&&(t=1),Math.floor(this.getRandom(e,t))},e.randomCeilToInt=function(e,t){return void 0===e&&(e=0),void 0===t&&(t=1),Math.ceil(this.getRandom(e,t))},e.clamp=function(e,t,o){return Math.max(t,Math.min(e,o))},e.randomSeed=Math.random(),e.sharedSeed=Math.random(),e}();o.Random=i,cc._RF.pop()},{"./Signal":"Signal"}],ResourceController:[function(e,t,o){"use strict";cc._RF.push(t,"d264b/eizRMLqzXH1k4Oll+","ResourceController"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../Utils/ToSingleton"),i=e("../Utils/HashMap");o.Title={Complete:"font_complete",CompleteAni:"font_complete",TimeUp:"font_timeup",Over:"font_over",OutOfMove:"font_over"},o.PauseFont={HasFree:"bg_fontfree",NoneFree:"bg_fontnofree"},o.Font={TotalScore:"totalScore",ResultScore:"resultScore",TimeWhite:"TimeWhite",TimeRed:"TimeRed",AddScore:"addScore",SubScore:"subScore",ShowScore:"showScore"},function(e){e[e.UI=0]="UI",e[e.GamePlay=1]="GamePlay"}(o.AnimationType||(o.AnimationType={}));var a=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.fontMap=new i.HashMap,t.UIAtlas=null,t.ResultAtlas=null,t.PauseAtlas=null,t.Animations=new i.HashMap,t}return __extends(t,e),t.prototype.setFont=function(e,t){this.fontMap.add(e,t)},t.prototype.setAtlas=function(e){console.assert(null!=e,"game atlas is null!"),this.UIAtlas=e},t.prototype.setResultAtlas=function(e){console.assert(null!=e,"game atlas is null!"),this.ResultAtlas=e},t.prototype.setPauseAtlas=function(e){console.assert(null!=e,"game atlas is null!"),this.PauseAtlas=e},t.prototype.getTitleSprite=function(e){return this.UIAtlas.getSpriteFrame(e)},t.prototype.getResultSprite=function(e){return this.ResultAtlas.getSpriteFrame(e)},t.prototype.getAltas=function(e){return this.UIAtlas.getSpriteFrame(e)},t.prototype.getPauseAtlas=function(e){return this.PauseAtlas.getSpriteFrame(e)},t.prototype.pushAnimationAtlas=function(e,t){console.assert(null!=t,"animation atlas is null!"),this.Animations.add(e,t)},t.prototype.getAnimationAtlas=function(e,t){return this.Animations.get(e).getSpriteFrame(t)},t.prototype.getAddScoreFont=function(){return this.fontMap.get(o.Font.AddScore)},t.prototype.getSubScoreFont=function(){return this.fontMap.get(o.Font.SubScore)},t.prototype.getSoundDisabled=function(){return this.PauseAtlas.getSpriteFrame("btn_nosound")},t.prototype.getSoundEnable=function(){return this.PauseAtlas.getSpriteFrame("btn_sound")},t.prototype.getPauseFont=function(e){return this.PauseAtlas.getSpriteFrame(e)},t.prototype.getTimeRedFont=function(){return this.fontMap.get(o.Font.TimeRed)},t.prototype.getTimeWhiteFont=function(){return this.fontMap.get(o.Font.TimeWhite)},t}(n.SingleTon());o.ResourceController=a,cc._RF.pop()},{"../Utils/HashMap":"HashMap","../Utils/ToSingleton":"ToSingleton"}],ResultAnimation:[function(e,t,o){"use strict";cc._RF.push(t,"3ae5283yuFOVr64ADyd/C0J","ResultAnimation"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../Utils/FrameAniBase"),i=cc._decorator,a=i.ccclass,r=(i.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onComplete=function(){this.stopOnIndex(this.FrameCount-1)},t=__decorate([a],t)}(n.default));o.default=r,cc._RF.pop()},{"../Utils/FrameAniBase":"FrameAniBase"}],ResultLayerView:[function(e,t,o){"use strict";cc._RF.push(t,"ba2b7WYGTNEqazUlmB5rAul","ResultLayerView"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../../View/BaseView"),i=e("../../../View/NumberChangedView"),a=e("../../../Command/CommonSignal"),r=e("../../../Controller/GameStateController"),s=e("../../../Controller/ResourceController"),c=e("../../../Model/PlayModelProxy"),l=e("../../../Utils/Celer/CelerSDK"),u=e("../../../Animation/ResultAnimation"),p=e("../../../Utils/Signal"),d=e("../../Model/GamePlayModel"),h=e("../../Model/GameLogic"),f=e("../../../Global/GameRule"),m=cc._decorator,y=m.ccclass,g=(m.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(p.BaseSignal));o.PlayResultAnimationSignal=g;var S=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.CountTotal=4,t.count=0,t}return __extends(t,e),Object.defineProperty(t.prototype,"Root",{get:function(){return this.node.getChildByName("Root")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Title",{get:function(){return this.Root.getChildByName("Title").getComponent(cc.Sprite)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"PieIcon",{get:function(){return this.Root.getChildByName("icon_qingnings").getComponent(cc.Sprite)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ComboSprite",{get:function(){return this.Root.getChildByName("font_combo")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"TotalScore",{get:function(){return this.Root.getChildByName("TotalScore").getComponent(i.default)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Score",{get:function(){return this.Root.getChildByName("ScoreLabel").getComponent(i.default)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"PieCount",{get:function(){return this.Root.getChildByName("PieCount").getComponent(cc.Label)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Monster",{get:function(){return this.Root.getChildByName("Monster").getComponent(i.default)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Combo",{get:function(){return this.Root.getChildByName("Combo").getComponent(i.default)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Submit",{get:function(){return this.Root.getChildByName("Submit")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Content",{get:function(){return this.Root.getChildByName("Content").getComponent(cc.RichText)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Ani",{get:function(){return this.Root.getChildByName("Ani").getComponent(u.default)},enumerable:!0,configurable:!0}),t.prototype.onLoad=function(){this.node.active=!1,this.node.scale=1,a.OpenResultLayerSignal.inst.addListener(this.onGameOver,this)},t.prototype.onGameOver=function(e){console.log("Open result:",r.RoundEndType[e]),this.Submit.scale=0,this.PieIcon.spriteFrame=s.ResourceController.inst.getAltas(f.PieIcon[h.GameLogic.inst.SliceIconType]),e==r.RoundEndType.TimeUp?this.Title.spriteFrame=s.ResourceController.inst.getResultSprite(s.Title.TimeUp):e==r.RoundEndType.Complete?this.Title.spriteFrame=s.ResourceController.inst.getResultSprite(s.Title.Complete):e==r.RoundEndType.OutOfMove?this.Title.spriteFrame=s.ResourceController.inst.getResultSprite(s.Title.OutOfMove):this.Title.spriteFrame=s.ResourceController.inst.getResultSprite(s.Title.Over),this.PieCount.string="X"+h.GameLogic.inst.CompleteCount,this.Title.node.scale=0,this.Root.scale=0,this.node.active=!0,this.Root.runAction(cc.sequence(cc.scaleTo(.1,.9,1.3),cc.scaleTo(.1,1.2,.9),cc.scaleTo(.1,1,1),cc.callFunc(this.showInfo.bind(this))))},Object.defineProperty(t.prototype,"Count",{get:function(){return this.count},set:function(e){var t=this;this.count!=e&&(this.count=e,console.log("count:",this.Count),this.Count>=this.CountTotal&&(a.ShowSubmitSignal.inst.dispatch(),this.Submit.runAction(cc.sequence(cc.scaleTo(.1,1.2),cc.scaleTo(.1,1),cc.callFunc(function(){t.Submit.once(cc.Node.EventType.TOUCH_END,function(){l.CelerSDK.inst.submitScore(c.PlayModelProxy.inst.getTotalScore())},t),CELER_X&&setTimeout(function(){l.CelerSDK.inst.submitScore(c.PlayModelProxy.inst.getTotalScore())},5e3)})))))},enumerable:!0,configurable:!0}),t.prototype.showInfo=function(){var e=this;this.Count=0,this.TotalScore.STEP=150,this.Combo.STEP=150,this.Monster.STEP=150,this.Score.STEP=150,this.Ani.play();var t=function(){a.ScoreCountingSignal.inst.dispatch()};this.Monster.onStep=t,this.Combo.onStep=t,this.TotalScore.onStep=t,this.Score.onStep=t,this.Title.node.runAction(cc.sequence(cc.scaleTo(.1,1.5),cc.scaleTo(.1,1),cc.scaleTo(.1,1.2),cc.scaleTo(.1,1))),this.Combo.onNumberChanged(c.PlayModelProxy.inst.getScoreByType(d.ScoreType.Combo),function(){e.Count++,console.log("Combo Done")}),this.Monster.sign="-",this.Monster.onNumberChanged(-Math.abs(c.PlayModelProxy.inst.getScoreByType(d.ScoreType.MonsterCost)),function(){e.Count++,console.log("Monster Done")}),this.TotalScore.onNumberChanged(c.PlayModelProxy.inst.getTotalScore(),function(){e.Count++,console.log("TotalScore Done")}),this.Score.onNumberChanged(c.PlayModelProxy.inst.getTotalScore()-c.PlayModelProxy.inst.getScoreByType(d.ScoreType.Combo)-c.PlayModelProxy.inst.getScoreByType(d.ScoreType.MonsterCost),function(){e.Count++,console.log("Score Done")})},t=__decorate([y],t)}(n.default);o.default=S,cc._RF.pop()},{"../../../Animation/ResultAnimation":"ResultAnimation","../../../Command/CommonSignal":"CommonSignal","../../../Controller/GameStateController":"GameStateController","../../../Controller/ResourceController":"ResourceController","../../../Global/GameRule":"GameRule","../../../Model/PlayModelProxy":"PlayModelProxy","../../../Utils/Celer/CelerSDK":"CelerSDK","../../../Utils/Signal":"Signal","../../../View/BaseView":"BaseView","../../../View/NumberChangedView":"NumberChangedView","../../Model/GameLogic":"GameLogic","../../Model/GamePlayModel":"GamePlayModel"}],RevertButtonView:[function(e,t,o){"use strict";cc._RF.push(t,"3e84eq+F3NMM5PkgzsJHXMl","RevertButtonView"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../../Controller/GameStateController"),i=e("../../../Utils/Signal"),a=e("../../../View/SingleTouchView"),r=e("../../Model/GamePlayModel"),s=cc._decorator,c=s.ccclass,l=(s.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(i.BaseSignal));o.RevertSignal=l;var u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),Object.defineProperty(t.prototype,"Button",{get:function(){return this.getComponent(cc.Button)},enumerable:!0,configurable:!0}),t.prototype.onLoad=function(){e.prototype.onLoad.call(this),this.Button.interactable=!1,r.RevertButtonStateChangedSignal.inst.addListener(this.onButtonStateChanged,this)},t.prototype.onTouchEnd=function(){n.GameStateController.inst.isGameOver()||0==n.GameStateController.inst.isRoundStart()||0!=this.Button.interactable&&(console.log("revert"),l.inst.dispatch())},t.prototype.onButtonStateChanged=function(e){this.Button.interactable=e},t=__decorate([c],t)}(a.default);o.default=u,cc._RF.pop()},{"../../../Controller/GameStateController":"GameStateController","../../../Utils/Signal":"Signal","../../../View/SingleTouchView":"SingleTouchView","../../Model/GamePlayModel":"GamePlayModel"}],RotationView:[function(e,t,o){"use strict";cc._RF.push(t,"f3329CeqRdN6ZoUyx7znT4N","RotationView"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("./EaseBaseView"),i=cc._decorator,a=i.ccclass,r=(i.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.startRotation=0,t}return __extends(t,e),t.prototype.onLoad=function(){0},t.prototype.canUpdate=function(){return!0},t.prototype.start=function(){},t.prototype.onRotationChanged=function(e,t,o,n){void 0===n&&(n=0),this.startRotation=this.node.rotation,this.startUpdate(new cc.Vec3(e,e,e),t,o,n)},t.prototype.onStep=function(){this.node.rotation=this.ease(this.startRotation,this.Target.x)},t.prototype.onComplete=function(){this.node.setRotation(this.Target.x)},t=__decorate([a],t)}(n.default));o.default=r,cc._RF.pop()},{"./EaseBaseView":"EaseBaseView"}],ScaleView:[function(e,t,o){"use strict";cc._RF.push(t,"b6981r0u55OyqSF4preRXtY","ScaleView"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("./EaseBaseView"),i=cc._decorator,a=i.ccclass,r=(i.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.startScale=cc.Vec2.ZERO,t}return __extends(t,e),t.prototype.onLoad=function(){0},t.prototype.canUpdate=function(){return!0},t.prototype.start=function(){},t.prototype.onScaleChanged=function(e,t,o,n){void 0===n&&(n=0),this.startScale=cc.v2(this.node.scaleX,this.node.scaleY),this.startUpdate(new cc.Vec3(e.x,e.y,0),t,o,n)},t.prototype.onStep=function(){this.node.scaleX=this.ease(this.startScale.x,this.Target.x),this.node.scaleY=this.ease(this.startScale.y,this.Target.y)},t.prototype.onComplete=function(){this.node.scaleX=this.Target.x,this.node.scaleY=this.Target.y},t=__decorate([a],t)}(n.default));o.default=r,cc._RF.pop()},{"./EaseBaseView":"EaseBaseView"}],ScoreFloat:[function(e,t,o){"use strict";cc._RF.push(t,"9a0bdeGuRVNJo7rEuZpmiZ9","ScoreFloat"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,i=n.ccclass,a=n.property,r=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.label=null,t.text="hello",t}return __extends(t,e),t.prototype.start=function(){},__decorate([a(cc.Label)],t.prototype,"label",void 0),__decorate([a],t.prototype,"text",void 0),t=__decorate([i],t)}(cc.Component);o.default=r,cc._RF.pop()},{}],ScoreLabelView:[function(e,t,o){"use strict";cc._RF.push(t,"5857dLL+ulDqKijkly4V/xN","ScoreLabelView"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../../Command/CommonSignal"),i=e("../../../Factory/GameFactory"),a=e("../../../Model/PlayModelProxy"),r=e("../../../Utils/Cocos"),s=e("../../../Utils/Signal"),c=e("../../../View/NumberChangedView"),l=cc._decorator,u=l.ccclass,p=l.property,d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(s.BaseSignal);o.PLayerScoreInitSignal=d;var h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.ScoreFloatRoot=null,t}return __extends(t,e),t.prototype.onLoad=function(){var e=this;n.PlayerScoreChanged.inst.addListener(this.onScoreChanged,this),d.inst.addListener(function(t){e.setNumber(t)},this)},t.prototype.onScoreChanged=function(e,t,o,n){var s=this;if(null==this.ScoreFloatRoot||t<0)this.onNumberChanged(a.PlayModelProxy.inst.PlayerScore);else{var c=i.gFactory.getObj("AddScore");c.getComponent(cc.Label).string="+"+Math.abs(t),this.ScoreFloatRoot.addChild(c);var l=cc.v2(0,0);n&&(l=r.ConvertToNodeSpaceAR(n,this.ScoreFloatRoot));var u=r.ConvertToNodeSpaceAR(this.node,this.ScoreFloatRoot);c.setPosition(l);var p=r.Distance(l,u)/2500;c.scale=0,c.runAction(cc.sequence(cc.scaleTo(0,0),cc.scaleTo(.1,1),cc.repeat(cc.sequence(cc.rotateBy(.02,10),cc.rotateBy(.04,-20),cc.rotateBy(.02,10)),5),cc.moveTo(p,u),cc.callFunc(function(){i.gFactory.putObj("AddScore",c)}))),setTimeout(function(){s.onNumberChanged(a.PlayModelProxy.inst.PlayerScore)},200+1e3*p)}},__decorate([p(cc.Node)],t.prototype,"ScoreFloatRoot",void 0),t=__decorate([u],t)}(c.default);o.default=h,cc._RF.pop()},{"../../../Command/CommonSignal":"CommonSignal","../../../Factory/GameFactory":"GameFactory","../../../Model/PlayModelProxy":"PlayModelProxy","../../../Utils/Cocos":"Cocos","../../../Utils/Signal":"Signal","../../../View/NumberChangedView":"NumberChangedView"}],Signal:[function(e,t,o){"use strict";cc._RF.push(t,"5e03fyVNOZPs7lLvT6ttunM","Signal"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.listenerMap=[],t.onceListenerMap=[],t}return __extends(t,e),t.prototype.doDispatch=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.excuteListener.apply(this,e),this.excuteOnce.apply(this,e)},t.prototype.excuteListener=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(this.listenerMap&&this.listenerMap.length>0)for(var o=0,n=this.listenerMap;o<n.length;o++){var i=n[o];i.callback.apply(i.target,e)}},t.prototype.excuteOnce=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(this.onceListenerMap&&this.onceListenerMap.length>0){for(var o=0,n=this.onceListenerMap;o<n.length;o++){var i=n[o];i.callback.apply(i.target,e)}this.onceListenerMap.length=0}},t.prototype.listen=function(e,t){this.listenerMap.push({callback:e,target:t})},t.prototype.listenOnce=function(e,t){this.onceListenerMap.push({callback:e,target:t})},t.prototype.removeListener=function(e,t){if(this.listenerMap&&this.listenerMap.length>0)for(var o=0;o<this.listenerMap.length;++o){var n=this.listenerMap[o];n.callback==e&&n.target==t&&(this.listenerMap.splice(o,1),--o)}},t.prototype.removeTarget=function(e){if(this.listenerMap&&this.listenerMap.length>0)for(var t=0;t<this.listenerMap.length;++t){this.listenerMap[t].target==e&&(this.listenerMap.splice(t,1),--t)}},t.prototype.dispatch=function(e,t,o,n,i){this.doDispatch(e,t,o,n,i)},t.prototype.addListener=function(e,t){this.listen(e,t)},t.prototype.addOnce=function(e,t){this.listenOnce(e,t)},t}(e("./ToSingleTon").SingleTon());o.BaseSignal=n,cc._RF.pop()},{"./ToSingleTon":"ToSingleton"}],SingleTouchMediator:[function(e,t,o){"use strict";cc._RF.push(t,"e1695pPIshGg5cBwRP4Oun7","SingleTouchMediator"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,i=n.ccclass,a=(n.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._touchid=null,t}return __extends(t,e),t.prototype.bind=function(e){this.view=e},Object.defineProperty(t.prototype,"View",{get:function(){return console.assert(null!=this.view," view is null"),this.view},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"touchid",{get:function(){return this._touchid},set:function(e){this._touchid=e,window.OpenTouchIDlog&&console.log(this.node.name," touchid :",this._touchid)},enumerable:!0,configurable:!0}),t.prototype.onRegister=function(){this.node.targetOff(this),this.node._onSetParent=this._onSetParent.bind(this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this.touchCancel,this),this.node.on(cc.Node.EventType.TOUCH_END,this.touchEnd,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this.touchMove,this),this.node.on(cc.Node.EventType.TOUCH_START,this.touchStart,this)},t.prototype.onUnregister=function(){this.node.targetOff(this)},t.prototype.touchStart=function(e){if(null!==this.touchid&&this.touchid!==e.getID())return console.log(this.node.name," touch start  touchid is different: ",this.touchid,e.getID()),void e.stopPropagation();this.touchid=e.getID(),this.onTouchStart(e)},t.prototype.touchMove=function(e){null===this.touchid||this.touchid===e.getID()?(this.touchid=e.getID(),this.onTouchMove(e)):e.stopPropagation()},t.prototype.touchEnd=function(e){if(null!==this.touchid&&this.touchid!==e.getID())return console.log(this.node.name," touch end  touchid is different: ",this.touchid,e.getID()),void e.stopPropagation();null!=this.touchid?(this.touchid=null,this.onTouchEnd(e),this.OnClick()):e.stopPropagation()},t.prototype.touchCancel=function(e){if(null!==this.touchid&&this.touchid!==e.getID())return console.log(this.node.name," touch cancel  touchid is different: ",this.touchid,e.getID()),void e.stopPropagation();null!=this.touchid?(this.touchid=null,this.onTouchCancel(e)):e.stopPropagation()},t.prototype.OnClick=function(){},t.prototype.onTouchStart=function(e){},t.prototype.onTouchMove=function(e){},t.prototype.onTouchEnd=function(e){},t.prototype.onTouchCancel=function(e){},t.prototype.onSetParent=function(e){},t.prototype._onSetParent=function(e){null==e&&(this.touchid=null),this.onSetParent(e)},t=__decorate([i],t)}(cc.Component));o.default=a,cc._RF.pop()},{}],SingleTouchView:[function(e,t,o){"use strict";cc._RF.push(t,"85688DQVyhPRqaAh/y2/Qug","SingleTouchView"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("./BaseView"),i=cc._decorator,a=i.ccclass,r=(i.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._touchid=null,t}return __extends(t,e),Object.defineProperty(t.prototype,"touchid",{get:function(){return this._touchid},set:function(e){this._touchid=e,window.OpenTouchIDlog&&console.log(this.node.name," touchid :",this._touchid)},enumerable:!0,configurable:!0}),t.prototype.onLoad=function(){this.node._onSetParent=this._onSetParent.bind(this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this.touchCancel,this),this.node.on(cc.Node.EventType.TOUCH_END,this.touchEnd,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this.touchMove,this),this.node.on(cc.Node.EventType.TOUCH_START,this.touchStart,this)},t.prototype.start=function(){},t.prototype.touchStart=function(e){null===this.touchid||this.touchid===e.getID()?(this.touchid=e.getID(),this.onTouchStart(e)):console.log(this.node.name," touch start  touchid is different! ")},t.prototype.touchMove=function(e){null!==this.touchid&&this.touchid!==e.getID()||(this.touchid=e.getID(),this.onTouchMove(e))},t.prototype.touchEnd=function(e){null===this.touchid||this.touchid===e.getID()?(this.touchid=null,this.onTouchEnd(e)):console.log(this.node.name," touch end  touchid is different! ")},t.prototype.touchCancel=function(e){null===this.touchid||this.touchid===e.getID()?(this.touchid=null,this.onTouchCancel(e)):console.log(this.node.name," touch cancel  touchid is different! ")},t.prototype.onTouchStart=function(e){},t.prototype.onTouchMove=function(e){},t.prototype.onTouchEnd=function(e){},t.prototype.onTouchCancel=function(e){},t.prototype.onSetParent=function(e){},t.prototype._onSetParent=function(e){null==e&&(this.touchid=null),this.onSetParent(e)},t=__decorate([a],t)}(n.default));o.default=r,cc._RF.pop()},{"./BaseView":"BaseView"}],SkewView:[function(e,t,o){"use strict";cc._RF.push(t,"dec79oJ2D1Ju7yCFAAR3rSI","SkewView"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("./EaseBaseView"),i=cc._decorator,a=i.ccclass,r=(i.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.startSkew=cc.Vec2.ZERO,t}return __extends(t,e),t.prototype.onLoad=function(){0},t.prototype.start=function(){},t.prototype.canUpdate=function(){return!0},t.prototype.onSkewChanged=function(e,t,o,n){void 0===n&&(n=0),this.startSkew=cc.v2(this.node.skewX,this.node.skewY),this.startUpdate(new cc.Vec3(e.x,e.y,0),t,o,n)},t.prototype.onStep=function(){this.node.skewX=this.ease(this.startSkew.x,this.Target.x),this.node.skewY=this.ease(this.startSkew.y,this.Target.y)},t.prototype.onComplete=function(){this.node.skewX=this.Target.x,this.node.skewY=this.Target.y},t=__decorate([a],t)}(n.default));o.default=r,cc._RF.pop()},{"./EaseBaseView":"EaseBaseView"}],SliceModel:[function(e,t,o){"use strict";cc._RF.push(t,"be458eiSlxBgKfu5m9TtP1C","SliceModel"),Object.defineProperty(o,"__esModule",{value:!0});var n,i=e("../../Utils/Random");o.SliceRange=[0,1,2,3,4,5],function(e){e[e.Normal=0]="Normal",e[e.Star=1]="Star",e[e.Boom=2]="Boom",e[e.Unicorn=3]="Unicorn"}(n=o.SliceType||(o.SliceType={}));var a=function(){function e(t,o){this.start=0,this.length=0,this.id="",this.sliceIndex=[],this.type=null,this.isSelected=!1,this.specialIndex=-1,this.id=this.id,this.start=t,this.length=o,this.forEach(),this.id=e.objCount+++"-Lenght:"+o+"-Start:"+t}return e.prototype.initType=function(e){if(this.type=n.Normal,e.length>0){var t=i.Random.getRandom();this.length<=1?t<=.1&&e.length>0&&(this.type=e[i.Random.randomFloorToInt(0,e.length)]):t<=.3&&e.indexOf(n.Boom)>=0&&(this.type=n.Boom)}return this.type},Object.defineProperty(e.prototype,"Type",{get:function(){return this.type},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ID",{get:function(){return this.id},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"SliceIndex",{get:function(){return this.sliceIndex},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"SpecialIndex",{get:function(){return this.specialIndex},enumerable:!0,configurable:!0}),e.prototype.forEach=function(){for(var e=0;e<this.length;e++){var t=(e+this.start)%o.SliceRange.length;this.sliceIndex.push(t)}this.specialIndex=this.sliceIndex[i.Random.randomFloorToInt(0,this.SliceIndex.length)]},e.objCount=0,e}();o.SliceModel=a,cc._RF.pop()},{"../../Utils/Random":"Random"}],SliceTargetRoot:[function(e,t,o){"use strict";cc._RF.push(t,"53396iBakNIdq8Hn7Gs+OtL","SliceTargetRoot"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../../Controller/GameStateController"),i=e("../../../Factory/GameFactory"),a=e("../../../Global/GameRule"),r=e("../../../Model/PlayModelProxy"),s=e("../../../Utils/Signal"),c=e("../../Model/GameLogic"),l=e("../../Model/GamePlayModel"),u=e("./PieRoot"),p=cc._decorator,d=p.ccclass,h=(p.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(s.BaseSignal));o.SliceTargetTouchSignal=h;var f=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),Object.defineProperty(t.prototype,"Pie",{get:function(){return this.node.getChildByName("Pie")},enumerable:!0,configurable:!0}),t.prototype.onLoad=function(){var e=this;this.node.on(cc.Node.EventType.TOUCH_START,this.onTouch,this),c.CleartSlotSignal.inst.addListener(function(t,o,n){t.toString()==e.node.name&&(1!=o.length||o[0]!=c.ClearType.Monster&&o[0]!=c.ClearType.Boom||e.clear(n))},this),u.PieFlySignal.inst.addListener(function(t,o){t==e.node.name&&e.clear(o)},this),c.PieCompleteSignal.inst.addListener(function(t,o){t.toString()==e.node.name&&e.opciaty(o)},this),c.PlayModeChangedSignal.inst.addListener(function(t){t==c.PlayMode.Clean?e.node.runAction(cc.repeatForever(cc.sequence(cc.scaleTo(.5,.9).easing(cc.easeIn(2)),cc.scaleTo(.6,1).easing(cc.easeOut(2))))):(e.node.stopAllActions(),e.node.scale=1)},this),c.SliceBoomSignal.inst.addListener(function(t,o){if(t.toString()==e.node.name)for(var n=1,i=0,s=o;i<s.length;i++){var c=s[i],u=e.Pie.getChildByName(c);if(u)for(var p=0,d=u.children;p<d.length;p++){var h=d[p];h&&h.active&&"Score"!=h.name&&(r.PlayModelProxy.inst.Model.addPlayerScore(n*a.GetScoreByType(l.ScoreType.Step),l.ScoreType.Boom,1,h.getChildByName("Score")),n++)}}},this)},t.prototype.clear=function(e){for(var t=0,o=e;t<o.length;t++){var n=o[t],a=this.Pie.getChildByName(n);a&&i.gFactory.putObj("Slice",a)}},t.prototype.opciaty=function(e){for(var t=0,o=e;t<o.length;t++){var n=o[t],i=this.Pie.getChildByName(n);i&&(i.opacity=0)}},t.prototype.onTouch=function(){this.node.getNumberOfRunningActions()<=0&&this.node.runAction(cc.sequence(cc.scaleTo(.1,.9),cc.scaleTo(.1,1))),0!=n.GameStateController.inst.canInteractive()&&(c.GameLogic.inst.Mode!=c.PlayMode.Clean?h.inst.dispatch(this.Pie,parseInt(this.node.name)):c.GameLogic.inst.callMonster(parseInt(this.node.name)))},t=__decorate([d],t)}(cc.Component);o.default=f,cc._RF.pop()},{"../../../Controller/GameStateController":"GameStateController","../../../Factory/GameFactory":"GameFactory","../../../Global/GameRule":"GameRule","../../../Model/PlayModelProxy":"PlayModelProxy","../../../Utils/Signal":"Signal","../../Model/GameLogic":"GameLogic","../../Model/GamePlayModel":"GamePlayModel","./PieRoot":"PieRoot"}],SliceView:[function(e,t,o){"use strict";cc._RF.push(t,"8b77735NAxMZK71Ozdgz3gE","SliceView"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../../Command/CommonSignal"),i=e("../../../Controller/GameStateController"),a=e("../../../Controller/ResourceController"),r=e("../../../Factory/GameFactory"),s=e("../../../Global/GameRule"),c=e("../../../Model/PlayModelProxy"),l=e("../../../Utils/Cocos"),u=e("../../../Utils/Signal"),p=e("../../Model/GameLogic"),d=e("../../Model/GamePlayModel"),h=e("../../Model/SliceModel"),f=e("../Animation/OKAnimation"),m=e("./PrefabBaseView"),y=e("./SliceTargetRoot"),g=cc._decorator,S=g.ccclass,C=(g.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(u.BaseSignal));o.PlaceFailSignal=C;var _=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.canPlace=!1,t}return __extends(t,e),t.prototype.onReuse=function(){if(this.canPlace=!0,this.node.scale=0,this.node.runAction(cc.sequence(cc.scaleTo(.05,1.2),cc.scaleTo(.05,1))),this.model)for(var e=0,t=this.node.children;e<t.length;e++){var o=t[e];"Score"!=o.name&&(o.active=this.model.SliceIndex.indexOf(parseInt(o.name))>=0,o.getComponent(cc.Sprite).spriteFrame=a.ResourceController.inst.getAltas(s.SliceIcon[p.GameLogic.inst.SliceIconType]),o.active&&this.model.Type!=h.SliceType.Normal&&parseInt(o.name)==this.model.SpecialIndex&&(o.getChildByName(h.SliceType[this.model.Type]).active=!0))}},t.prototype.onUnuse=function(){this.node.opacity=255,this.model=null;for(var e=0,t=this.node.children;e<t.length;e++){var o=t[e];o.active=!1;for(var n=0,i=o.children;n<i.length;n++){i[n].active=!1}}},t.prototype.rotate=function(){},t.prototype.onLoad=function(){var e=this;y.SliceTargetTouchSignal.inst.addListener(this.onSliceTarget,this),p.SliceClearSignal.inst.addListener(this.onSliceClear,this),p.CleartSlotSignal.inst.addListener(function(t,o,n){if(n.indexOf(e.node.name)>=0)for(var i=0,a=e.node.children;i<a.length;i++)for(var r=0,s=a[i].children;r<s.length;r++){s[r].active=!1}},this),n.GameOverSignal.inst.addListener(function(){e.model.isSelected||e.onAddScore(0,s.GetScoreByType(d.ScoreType.Step),d.ScoreType.Step,"Score")},this)},t.prototype.onSliceClear=function(e){},t.prototype.onAddScore=function(e,t,o,n,i){if(void 0===i&&(i=!0),i)for(var a=1,r=0,s=this.node.children;r<s.length;r++){var l=s[r];l&&l.active&&(c.PlayModelProxy.inst.Model.addPlayerScore(e+a*t,o,1,l.getChildByName(n)),a++)}else c.PlayModelProxy.inst.Model.addPlayerScore(e,o,1,this.node.getChildByName(n))},t.prototype.onSliceTarget=function(e,t){var o=this;if(0!=i.GameStateController.inst.canInteractive()&&this.model&&0!=this.model.isSelected&&0!=this.canPlace){this.node.stopAllActions(),this.node.scale=1,this.node.rotation=0;var n=l.ConvertToNodeSpaceAR(e,this.node.parent);this.canPlace=!1,this.node.runAction(cc.sequence(cc.moveTo(.2,n),cc.callFunc(function(){var n=p.GameLogic.inst.placeSlice(t);n!=p.PlaceType.Fail?(o.model.isSelected=!1,o.canPlace=!0,o.onAddScore(s.GetScoreByType(d.ScoreType.Place),0,d.ScoreType.Place,"Score"),n!=p.PlaceType.Place?(n==p.PlaceType.Complete?o.onAddScore(s.GetScoreByType(d.ScoreType.Complete),0,d.ScoreType.Complete,"Score",!1):n==p.PlaceType.Star&&o.onAddScore(s.GetScoreByType(d.ScoreType.Star),0,d.ScoreType.Star,"Score",!1),r.gFactory.putObj("Slice",o.node)):(o.node.setPosition(0,0),o.node.setParent(e)),f.PlaceOkSignal.inst.dispatch(t.toString())):(C.inst.dispatch(),o.node.runAction(cc.sequence(cc.delayTime(.01),cc.moveTo(.02,0,0),cc.callFunc(function(){o.canPlace=!0}),cc.rotateBy(.5,360).easing(cc.easeElasticOut(2)))))})))}},t=__decorate([S],t)}(m.default);o.default=_,cc._RF.pop()},{"../../../Command/CommonSignal":"CommonSignal","../../../Controller/GameStateController":"GameStateController","../../../Controller/ResourceController":"ResourceController","../../../Factory/GameFactory":"GameFactory","../../../Global/GameRule":"GameRule","../../../Model/PlayModelProxy":"PlayModelProxy","../../../Utils/Cocos":"Cocos","../../../Utils/Signal":"Signal","../../Model/GameLogic":"GameLogic","../../Model/GamePlayModel":"GamePlayModel","../../Model/SliceModel":"SliceModel","../Animation/OKAnimation":"OKAnimation","./PrefabBaseView":"PrefabBaseView","./SliceTargetRoot":"SliceTargetRoot"}],SliderView:[function(e,t,o){"use strict";cc._RF.push(t,"2c746YFJCxKFJ34ypIaA1v3","SliderView"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../Utils/Random"),i=cc._decorator,a=i.ccclass,r=i.property,s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.Progress=null,t.Slider=null,t.totalLength=0,t}return __extends(t,e),Object.defineProperty(t.prototype,"Percent",{get:function(){return this.Slider.progress},set:function(e){this.Slider.progress=n.Random.clamp(e,0,1),this.Progress.width=this.Slider.node.width*this.Slider.progress},enumerable:!0,configurable:!0}),t.prototype.onLoad=function(){this.Slider.node.on("slide",this.onSlided,this),this.totalLength=this.Progress.width,this.Slider.node.width=this.totalLength},t.prototype.onSlided=function(){this.Progress.width=this.totalLength*this.Slider.progress,this.onProgress&&this.onProgress(this.Slider.progress)},t.prototype.start=function(){},t.prototype.onProgress=function(e){},__decorate([r(cc.Node)],t.prototype,"Progress",void 0),__decorate([r(cc.Slider)],t.prototype,"Slider",void 0),t=__decorate([a],t)}(cc.Component);o.default=s,cc._RF.pop()},{"../Utils/Random":"Random"}],SoundButtonView:[function(e,t,o){"use strict";cc._RF.push(t,"6d699bXGkJBYb+wyjeQyALI","SoundButtonView"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../../Controller/ResourceController"),i=e("../../../Manager/AudioManager"),a=e("../../../Utils/Signal"),r=e("../../../View/SingleTouchView"),s=cc._decorator,c=s.ccclass,l=(s.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(a.BaseSignal)),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),Object.defineProperty(t.prototype,"Sprite",{get:function(){return this.getComponent(cc.Sprite)},enumerable:!0,configurable:!0}),t.prototype.onLoad=function(){e.prototype.onLoad.call(this),this.updateState(),l.inst.addListener(this.updateState,this)},t.prototype.onTouchEnd=function(){i.gAudio.MusicVolume>0?(i.gAudio.setEffectVolume(0),i.gAudio.setMusicVolume(0)):(i.gAudio.setEffectVolume(1),i.gAudio.setMusicVolume(1)),l.inst.dispatch()},t.prototype.updateState=function(){var e=i.gAudio.MusicVolume;this.Sprite.spriteFrame=e>0?n.ResourceController.inst.getSoundEnable():n.ResourceController.inst.getSoundDisabled()},t=__decorate([c],t)}(r.default);o.default=u,cc._RF.pop()},{"../../../Controller/ResourceController":"ResourceController","../../../Manager/AudioManager":"AudioManager","../../../Utils/Signal":"Signal","../../../View/SingleTouchView":"SingleTouchView"}],StarAnimation:[function(e,t,o){"use strict";cc._RF.push(t,"17059XttLZFN5X3zp5VZci7","StarAnimation"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../../Utils/FrameAniBase"),i=e("../../../Utils/Signal"),a=e("../../Model/GameLogic"),r=e("../Game/PieRoot"),s=cc._decorator,c=s.ccclass,l=(s.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(i.BaseSignal));o.PlayStarSignal=l;var u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.slices=[],t.type=[],t}return __extends(t,e),t.prototype.onLoad=function(){var t=this;e.prototype.onLoad.call(this),this.Interval=.06,this.node.active=!1,a.PieCompleteSignal.inst.addListener(function(e,o,n){n.indexOf(a.ClearType.Star)<0||e.toString()==t.node.parent.name&&(t.type=n,t.isPlaying&&(t.stop(),t.onComplete()),t.play(),l.inst.dispatch(),t.slices=o)},this)},t.prototype.onComplete=function(){e.prototype.onComplete.call(this),this.type.indexOf(a.ClearType.Star)<0||r.PieFlySignal.inst.dispatch(this.node.parent.name,this.slices)},t=__decorate([c],t)}(n.default);o.default=u,cc._RF.pop()},{"../../../Utils/FrameAniBase":"FrameAniBase","../../../Utils/Signal":"Signal","../../Model/GameLogic":"GameLogic","../Game/PieRoot":"PieRoot"}],StartGameCommand:[function(e,t,o){"use strict";cc._RF.push(t,"1db594KvoJIVbc+cwfogrGn","StartGameCommand"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../Command/CommonSignal"),i=e("../../Controller/GameStateController"),a=e("../../Model/PlayModelProxy"),r=(CELER_X,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.execute=function(e){console.log("--------- excute StartGameCommand ---------"),a.PlayModelProxy.inst.init(),a.PlayModelProxy.inst.initGametheme(),n.GameReadySignal.inst.dispatch(),i.GameStateController.inst.isReady=!0},t}(puremvc.SimpleCommand));o.StartGameCommand=r,cc._RF.pop()},{"../../Command/CommonSignal":"CommonSignal","../../Controller/GameStateController":"GameStateController","../../Model/PlayModelProxy":"PlayModelProxy"}],StepManager:[function(e,t,o){"use strict";cc._RF.push(t,"83709TvPtJOVayPDGaPh6Ov","StepManager"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function e(){this.totalStep=[],this.curStep=[],this.loadTime={}}return e.prototype.register=function(e,t){this.completeCallback=e,this.totalStep=t;for(var o=0,n=t;o<n.length;o++){var i=n[o];this.loadTime[i]=Date.now()}},e.prototype.start=function(e){this.loadTime[e]=Date.now()},e.prototype.nextStep=function(e){if(this.totalStep.indexOf(e)<0)console.error(" \u6ca1\u6709\u8fd9\u4e00\u6b65\uff1a",e);else if(this.curStep.indexOf(e)>=0)console.warn(" \u6b65\u9aa4\u5df2\u5b8c\u6210\uff1a",e);else{this.curStep.push(e),this.curStep.sort(function(e,t){return e>t?-1:1}),this.totalStep.sort(function(e,t){return e>t?-1:1});var t=this.curStep.join("-"),o=this.totalStep.join("-"),n=Date.now()-this.loadTime[e];console.log(" cur step:",e,", cost time:",n," ms"),t==o&&(console.log(" step done"),this.totalStep.length=0,this.completeCallback(),this.completeCallback=null)}},e}();o.StepManager=n,cc._RF.pop()},{}],SubmitButtonView:[function(e,t,o){"use strict";cc._RF.push(t,"7d5e6ERlcdIapmrVvugM7L/","SubmitButtonView"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../../Controller/GameStateController"),i=e("../../../View/SingleTouchView"),a=e("../../Command/GamePlaySignal"),r=cc._decorator,s=r.ccclass,c=(r.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onTouchEnd=function(){n.GameStateController.inst.isGameOver()||0==n.GameStateController.inst.isRoundStart()||a.SubmitButtonClickSignal.inst.dispatch("Submit"==this.node.name)},t=__decorate([s],t)}(i.default));o.default=c,cc._RF.pop()},{"../../../Controller/GameStateController":"GameStateController","../../../View/SingleTouchView":"SingleTouchView","../../Command/GamePlaySignal":"GamePlaySignal"}],SubmitLayerView:[function(e,t,o){"use strict";cc._RF.push(t,"f65c05YNytD2Zq3Ran+pohk","SubmitLayerView"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../../Command/CommonSignal"),i=e("../../../Controller/GameStateController"),a=e("../../../Controller/ResourceController"),r=e("../../../Model/PlayModelProxy"),s=e("../../../Utils/Signal"),c=e("../../../View/BaseView"),l=e("../../Command/GamePlaySignal"),u=cc._decorator,p=u.ccclass,d=(u.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(s.BaseSignal));o.EndNowSignal=d;var h=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),Object.defineProperty(t.prototype,"Resume",{get:function(){return this.node.getChildByName("ResumeButton")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"EndNow",{get:function(){return this.node.getChildByName("EndNow")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"FreePauseCount",{get:function(){return this.node.getChildByName("FreePauseCount").getComponent(cc.Label)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"PauseInfo",{get:function(){return this.node.getChildByName("PauseInfo").getComponent(cc.Sprite)},enumerable:!0,configurable:!0}),t.prototype.onLoad=function(){var e=this;setTimeout(function(){e.node.active=!1,e.node.scale=1},0),l.SubmitButtonClickSignal.inst.addListener(this.onShow,this),this.EndNow.on(cc.Node.EventType.TOUCH_END,this.endNow,this),this.Resume.on(cc.Node.EventType.TOUCH_END,this.OnResume,this)},t.prototype.endNow=function(){var e=this;d.inst.dispatch(),n.ButtonClickSignal.inst.dispatch(),setTimeout(function(){e.Hide()},0)},t.prototype.OnResume=function(){var e=this;i.GameStateController.inst.resume(),n.ButtonClickSignal.inst.dispatch(),setTimeout(function(){e.Hide()},0)},t.prototype.onShow=function(){this.node.active||(r.PlayModelProxy.inst.FreePauseCount<=0?(this.FreePauseCount.node.active=!1,this.PauseInfo.spriteFrame=a.ResourceController.inst.getAltas("font_pauseno")):(this.FreePauseCount.node.active=!0,this.FreePauseCount.string=r.PlayModelProxy.inst.FreePauseCount.toString(),this.PauseInfo.spriteFrame=a.ResourceController.inst.getAltas("font_pausehave")),this.Show(),i.GameStateController.inst.pause())},t=__decorate([p],t)}(c.default);o.default=h,cc._RF.pop()},{"../../../Command/CommonSignal":"CommonSignal","../../../Controller/GameStateController":"GameStateController","../../../Controller/ResourceController":"ResourceController","../../../Model/PlayModelProxy":"PlayModelProxy","../../../Utils/Signal":"Signal","../../../View/BaseView":"BaseView","../../Command/GamePlaySignal":"GamePlaySignal"}],TableManager:[function(e,t,o){"use strict";cc._RF.push(t,"0dcdc3JitFOGKDKFwUK65LH","TableManager"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function e(){this.load=e.JSON_URL&&""!=e.JSON_URL?cc.loader.load.bind(cc.loader):cc.loader.loadRes.bind(cc.loader),this.fileFormat=e.JSON_URL&&""!=e.JSON_URL?".json?time="+Date.now():"",this.total=0,this.complete=0,this.En={}}return Object.defineProperty(e,"inst",{get:function(){return this.ins?this.ins:this.ins=new e},enumerable:!0,configurable:!0}),e.prototype.startLoad=function(t,o,n){this.completeCallback=o,this.progressCallback=n;var i=this;console.log("Base URL:",e.JSON_URL),this.load(e.JSON_URL+t.trim().split("/").join("")+"/file_list"+this.fileFormat,function(e,o){if(e)console.error(e.errorMessage);else{var n="Array"==o.constructor.name?o:o.json;this.total=n.length;for(var a=0,r=n;a<r.length;a++){var s=r[a];i.loadJson(t.trim().split("/").join("")+"/"+s.replace(".json",""))}}}.bind(this))},e.prototype.loadJson=function(t){console.log("start load:"+t);var o=this,n=t.split("/")[1];n=n.charAt(0).toUpperCase()+n.slice(1,n.length),this.load(e.JSON_URL+t+this.fileFormat,function(e,t){if(e)console.error(e.errorMessage);else{for(var i=0,a="Array"==t.constructor.name?t:t.json;i<a.length;i++){var r=a[i];o[n][r.ID]=r}o.completeLoad()}}.bind(this))},e.prototype.completeLoad=function(){this.complete++,this.progressCallback&&this.progressCallback(this.complete/this.total),this.complete>=this.total&&this.completeCallback&&this.completeCallback()},e.prototype.getEn=function(e){return this.En[e]?this.En[e]:(console.error("En \u4e0d\u5b58key\uff1a"+e),null)},e.prototype.getAll_En_Data=function(){return this.En},e.JSON_URL="",e}();o.TableManager=n,cc._RF.pop()},{}],TestApp:[function(e,t,o){"use strict";cc._RF.push(t,"b219e3JEelF8qF2ISXZvtH0","TestApp"),Object.defineProperty(o,"__esModule",{value:!0});e("../../Command/CommonSignal"),e("../../Factory/GameFactory");var n=cc._decorator,i=n.ccclass,a=(n.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}var o;return __extends(t,e),o=t,t.prototype.start=function(){this.node.removeComponent(o)},t=o=__decorate([i],t)}(cc.Component));o.default=a,cc._RF.pop()},{"../../Command/CommonSignal":"CommonSignal","../../Factory/GameFactory":"GameFactory"}],TestMove:[function(e,t,o){"use strict";cc._RF.push(t,"4f148+x0MNI1q0QAc63W54P","TestMove"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../Controller/GameStateController"),i=cc._decorator,a=i.ccclass,r=(i.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onLoad=function(){CELER_X?(this.node.removeFromParent(!0),this.node.destroy()):this.node.on(cc.Node.EventType.TOUCH_MOVE,function(e){n.GameStateController.inst.isReady},this)},t=__decorate([a],t)}(cc.Component));o.default=r,cc._RF.pop()},{"../Controller/GameStateController":"GameStateController"}],TestSingleTouchView:[function(e,t,o){"use strict";cc._RF.push(t,"2761dS0K89JwJjOcqk97q1o","TestSingleTouchView"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../Factory/GameFactory"),i=e("../SingleTouchView"),a=cc._decorator,r=a.ccclass,s=(a.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onSetParent=function(e){console.error("parent:",e)},t.prototype.onTouchStart=function(){n.gFactory.putObj("TestNode",this.node)},t.prototype.onTouchEnd=function(){console.error("ontouchend")},t=__decorate([r],t)}(i.default));o.default=s,cc._RF.pop()},{"../../Factory/GameFactory":"GameFactory","../SingleTouchView":"SingleTouchView"}],Test:[function(e,t,o){"use strict";cc._RF.push(t,"df1af1sWs9HWZ8cYz9x0Gs9","Test"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../Controller/GameStateController"),i=e("../GamePlay/Model/GameLogic"),a=e("../Utils/Random"),r=e("../Utils/Signal"),s=cc._decorator,c=s.ccclass,l=(s.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(r.BaseSignal));o.TestReStartSignal=l;var u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.refreshing=!1,t}return __extends(t,e),Object.defineProperty(t.prototype,"RandomSeed",{get:function(){return this.node.getChildByName("RandomSeed")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"RestartCount",{get:function(){return this.node.getChildByName("RestartCount")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Next",{get:function(){return this.node.getChildByName("Next")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"NextMap",{get:function(){return this.node.getChildByName("NextMap")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"TestClear",{get:function(){return this.node.getChildByName("TestClear")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"CheckDrop",{get:function(){return this.node.getChildByName("CheckDrop")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"CheckBlock",{get:function(){return this.node.getChildByName("CheckBlock")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Animation",{get:function(){return this.node.getChildByName("Animation")},enumerable:!0,configurable:!0}),t.prototype.onLoad=function(){var e=this;if(this.node.active=!CELER_X,this.node.removeComponent(cc.Sprite),this.node.opacity=255,CELER_X)return this.node.removeFromParent(!0),void this.node.destroy();if(this.TestClear){var t=this.TestClear.getComponent(cc.Toggle);t.isChecked=!1,this.TestClear.on("toggle",function(){console.log(" test clear:",t.isChecked)},this)}if(this.CheckDrop){var o=this.CheckDrop.getComponent(cc.Toggle);o.isChecked=!0,this.CheckDrop.on("toggle",function(){console.log(" IS_RUN_LEVEL:",o.isChecked)},this)}if(this.CheckBlock){var r=this.CheckBlock.getComponent(cc.Toggle);r.isChecked=!0,this.CheckBlock.on("toggle",function(){console.log(" CHECK_BLOCK:",r.isChecked)},this)}if(this.Animation){var s=this.Animation.getComponent(cc.Toggle);s.isChecked=!0,this.Animation.on("toggle",function(){console.log(" OPEN_EFFECT:",s.isChecked)},this)}a.RandomSeedInitSignal.inst.addListener(function(t){e.RandomSeed&&e.RandomSeed.getComponent(cc.Label)&&(e.RandomSeed.getComponent(cc.Label).string=t.toString())},this),this.RestartCount&&this.RestartCount.getComponent(cc.Label)&&(this.RestartCount.getComponent(cc.Label).string="0",i.RestartCountSignal.inst.addListener(function(t){e.RestartCount.getComponent(cc.Label).string=t.toString()},this)),this.Next&&this.Next.on(cc.Node.EventType.TOUCH_END,function(){e.refreshing||(e.refreshing=!0)},this),this.NextMap&&this.NextMap.on(cc.Node.EventType.TOUCH_END,function(){0!=n.GameStateController.inst.isReady&&l.inst.dispatch(!0)},this)},t.prototype.start=function(){},t=__decorate([c],t)}(cc.Component);o.default=u,cc._RF.pop()},{"../Controller/GameStateController":"GameStateController","../GamePlay/Model/GameLogic":"GameLogic","../Utils/Random":"Random","../Utils/Signal":"Signal"}],ThemeView:[function(e,t,o){"use strict";cc._RF.push(t,"2b2d1k5+RZFrKLwiNmu7pk+","ThemeView"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../View/BaseView"),i=e("../../Global/Theme"),a=e("../../Command/CommonSignal"),r=cc._decorator,s=r.ccclass,c=(r.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onLoad=function(){a.GameThemeInit.inst.addListener(this.onThemeInit,this)},t.prototype.start=function(){},t.prototype.onThemeInit=function(e){this.node.active=this.node.name==i.Theme[e]},t=__decorate([s],t)}(n.default));o.default=c,cc._RF.pop()},{"../../Command/CommonSignal":"CommonSignal","../../Global/Theme":"Theme","../../View/BaseView":"BaseView"}],Theme:[function(e,t,o){"use strict";cc._RF.push(t,"5fef4dbBENAfYW6Tw8oUA62","Theme"),Object.defineProperty(o,"__esModule",{value:!0}),function(e){e[e.One=0]="One"}(o.Theme||(o.Theme={})),cc._RF.pop()},{}],TimeEffectAnimation:[function(e,t,o){"use strict";cc._RF.push(t,"603e6ws6zRH9IcpX4uo/ZlK","TimeEffectAnimation"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../Utils/FrameAniBase"),i=e("../Command/CommonSignal"),a=cc._decorator,r=a.ccclass,s=(a.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onLoad=function(){e.prototype.onLoad.call(this),this.node.opacity=0,i.TimeAnimationStateChanged.inst.addListener(this.onPlayStateChanged,this)},t.prototype.onPlayStateChanged=function(e){e?0==this.isPlaying&&this.playOnLoop():this.stop()},t.prototype.start=function(){},t.prototype.playOnLoop=function(){this.node.opacity=255,e.prototype.playOnLoop.call(this)},t.prototype.stop=function(){this.node.opacity=0,e.prototype.stop.call(this)},t=__decorate([r],t)}(n.default));o.default=s,cc._RF.pop()},{"../Command/CommonSignal":"CommonSignal","../Utils/FrameAniBase":"FrameAniBase"}],TimeLabelView:[function(e,t,o){"use strict";cc._RF.push(t,"8e78fIPKARBx69B005nUUwo","TimeLabelView"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../../Command/CommonSignal"),i=e("../../../Utils/Time"),a=e("../../../View/BaseView"),r=cc._decorator,s=r.ccclass,c=(r.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.sec=0,t}return __extends(t,e),Object.defineProperty(t.prototype,"Label",{get:function(){return this.getComponent(cc.Label)},enumerable:!0,configurable:!0}),t.prototype.onLoad=function(){n.UpdateTimeNumber.inst.addListener(this.onTimeChanged,this)},t.prototype.onTimeChanged=function(e){var t=i.Time.timeFormat(e);"MinuteLabel"==this.node.name?this.Label.string=t.split("/")[0]:"SecondLabel"==this.node.name?this.Label.string=t.split("/")[1]:this.Label.string=t;var o=Math.floor(e);o!=this.sec&&("MinuteLabel"==this.node.name||"MinuteLabel"!=this.node.name&&"SecondLabel"!=this.node.name)&&(this.sec=o,this.sec<=5&&n.CountDownSignal.inst.dispatch())},t.prototype.start=function(){},t=__decorate([s],t)}(a.default));o.default=c,cc._RF.pop()},{"../../../Command/CommonSignal":"CommonSignal","../../../Utils/Time":"Time","../../../View/BaseView":"BaseView"}],Time:[function(e,t,o){"use strict";cc._RF.push(t,"87a24xcV95AoII6L5W1ABoI","Time"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function e(){}return e.timeFormat=function(e){var t=Math.floor(e/60),o=Math.floor(e%60),n=o.toString();return o<10&&(n="0"+o),t+":"+n},e}();o.Time=n,cc._RF.pop()},{}],ToSingleton:[function(e,t,o){"use strict";cc._RF.push(t,"b07299nlSpOIIxOkIMBhUY9","ToSingleton"),Object.defineProperty(o,"__esModule",{value:!0}),o.SingleTon=function(){return function(){function e(){}return Object.defineProperty(e,"inst",{get:function(){return this.ins?this.ins:this.ins=new this},enumerable:!0,configurable:!0}),e}()},cc._RF.pop()},{}],TutorialManager:[function(e,t,o){"use strict";cc._RF.push(t,"fb3a0xpHapEEa8amRe1j4OG","TutorialManager"),Object.defineProperty(o,"__esModule",{value:!0});var n,i=e("../Utils/HashMap"),a=e("../utils/ToSingleton"),r=e("./TutorialView");(function(e){e[e.Main=0]="Main",e[e.Bag=1]="Bag",e[e.PetInfo=2]="PetInfo",e[e.LeaderBoard=3]="LeaderBoard",e[e.Cook=4]="Cook",e[e.Skin=5]="Skin",e[e.Feed=6]="Feed",e[e.Abilities=7]="Abilities",e[e.AwardAlert=8]="AwardAlert",e[e.AbilitiesDetail=9]="AbilitiesDetail",e[e.SkinDetail=10]="SkinDetail"})(n=o.LayerType||(o.LayerType={})),function(e){e[e.Click=0]="Click",e[e.Tip=1]="Tip"}(o.TutorialType||(o.TutorialType={}));var s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.tutorialMap=new i.HashMap,t}return __extends(t,e),t.prototype.register=function(e,t){this.tutorialMap.has(e)?this.tutorialMap.add(e,this.tutorialMap.get(e).concat(t)):(this.tutorialMap.add(e,t),this.start(e))},t.prototype.getLayerNodesCount=function(e){return this.tutorialMap.has(e)?this.tutorialMap.get(e).length:0},t.prototype.shift=function(e){return this.tutorialMap.has(e)&&this.tutorialMap.get(e).length>0?this.tutorialMap.get(e).shift():(console.error(" layer:",n[e]," empty."),null)},t.prototype.isDone=function(e){return 0==this.tutorialMap.has(e)||0==this.tutorialMap.get(e).length},t.prototype.start=function(e){r.ShowTutorialSignal.inst.dispatch(e)},t.prototype.next=function(e){var t=this;return new Promise(function(o,n){t.shift(e),t.isDone(e)?o(e):n()})},t.prototype.show=function(e){var t=this;return new Promise(function(o,n){t.isDone(e)?n():o(t.tutorialMap.get(e)[0])})},t}(a.SingleTon());o.TutorialManager=s,cc._RF.pop()},{"../Utils/HashMap":"HashMap","../utils/ToSingleton":"ToSingleton","./TutorialView":"TutorialView"}],TutorialView:[function(e,t,o){"use strict";cc._RF.push(t,"d07740wOfxDpaYSQSVN98Yu","TutorialView"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../Utils/Cocos"),i=e("../Utils/Signal"),a=e("../View/BaseView"),r=e("./TutorialManager"),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(i.BaseSignal);o.ShowTutorialSignal=s;var c=cc._decorator,l=c.ccclass,u=(c.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.types=[],t.tutorial=null,t.hasTouchStart=!1,t}return __extends(t,e),Object.defineProperty(t.prototype,"Hand",{get:function(){return this.node.getChildByName("Hand")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Root",{get:function(){return this.node.getChildByName("Root")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Mask",{get:function(){return this.node.getChildByName("Mask")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Type",{get:function(){return this.types[this.types.length-1]},enumerable:!0,configurable:!0}),t.prototype.onLoad=function(){this.node.active=!1,this.node.scale=1,this.Hand.active=!1,this.Mask.active=!1,this.Mask.on(cc.Node.EventType.TOUCH_CANCEL,this.onTouchEnd,this),this.Mask.on(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this),this.Mask.on(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove,this),this.Mask.on(cc.Node.EventType.TOUCH_START,this.onTouchStart,this),s.inst.addListener(this.onShow,this)},t.prototype.onShow=function(e){this.pushType(e),this.Hand.active=!1,this.Hand.stopAllActions(),console.log("Show tutorial:",r.LayerType[e],", current:",r.LayerType[this.Type]),this.node.active?this.showNext():this.Show(this.showNext.bind(this))},t.prototype.pushType=function(e){this.Type!=e&&this.types.push(e)},t.prototype.toNext=function(e){var t=this;console.log("to Next:",r.LayerType[e],r.LayerType[this.Type]),r.TutorialManager.inst.next(e).then(function(){t.done()}).catch(function(){t.showNext()})},t.prototype.showNext=function(){null!=this.Type?(this.Root.destroyAllChildren(),r.TutorialManager.inst.show(this.Type).then(this.goNext.bind(this)).catch(this.done.bind(this))):this.end()},t.prototype.done=function(){console.log(r.LayerType[this.Type]," done."),this.types.pop(),null!=this.Type?this.showNext():this.end()},t.prototype.end=function(){this.tutorial&&this.tutorial.node&&(this.tutorial.node.group="default"),this.tutorial=null,this.Hand.active=!1,this.Mask.active=!1,this.Hide()},t.prototype.goNext=function(e){var t=this;this.tutorial&&this.tutorial.node&&(this.tutorial.node.group="default"),this.tutorial=e,this.hasTouchStart=!1,this.Mask.active=!0,this.Mask.getComponent(cc.Sprite).enabled=this.tutorial.needMask,this.Mask._touchListener.swallowTouches=this.tutorial.needMask,this.tutorial.maskClear?this.Mask.opacity=0:this.Mask.opacity=255,this.tutorial.delay?setTimeout(function(){t.doNext()},1e3*this.tutorial.delay):this.doNext()},t.prototype.doNext=function(){var e=this,t=n.ConvertToNodeSpaceAR(this.tutorial.node,this.Hand.parent);this.tutorial.needMask&&(this.tutorial.node.group="tutorial"),this.Hand.stopAllActions(),this.Hand.x=t.x+10,this.Hand.y=t.y-this.tutorial.node.height/4,this.Hand.rotation=0,Math.abs(this.Hand.x-20+this.Hand.width*(1-this.Hand.anchorX))>this.node.width/2&&(this.Hand.x=t.x,this.Hand.y=t.y-this.tutorial.node.height/4,this.Hand.rotation=50),this.Hand.active=!0,this.Hand.opacity=0,this.Hand.runAction(cc.sequence(cc.delayTime(.1),cc.fadeIn(.1),cc.callFunc(function(){}))),this.showHandAni(),this.tutorial.lastTime&&setTimeout(function(t){e.toNext(t)},1e3*this.tutorial.lastTime,this.tutorial.layer)},t.prototype.showHandAni=function(){var e=cc.repeatForever(cc.sequence(cc.moveTo(.5,cc.v2(this.Hand.position.x,this.Hand.position.y+20),100),cc.moveTo(.5,cc.v2(this.Hand.position.x,this.Hand.position.y-20),100)));this.Hand.runAction(e)},t.prototype.onTouchStart=function(e){this.tutorial?n.GetBoxToWorld(this.tutorial.node).contains(e.getLocation())&&(this.tutorial.needMask&&this.tutorial.node.dispatchEvent(e),this.hasTouchStart=!0):console.error("[onTouchStart] tutorial is null.")},t.prototype.onTouchEnd=function(e){this.tutorial?this.hasTouchStart&&(this.hasTouchStart=!1,this.tutorial.needMask&&this.tutorial.node.dispatchEvent(e),this.tutorial.lastTime||this.toNext(this.tutorial.layer)):console.error("[onTouchEnd] tutorial is null.")},t.prototype.onTouchMove=function(e){this.tutorial?this.hasTouchStart&&this.tutorial.needMask&&this.tutorial.node.dispatchEvent(e):console.error("[onTouchMove] tutorial is null.")},t=__decorate([l],t)}(a.default));o.default=u,cc._RF.pop()},{"../Utils/Cocos":"Cocos","../Utils/Signal":"Signal","../View/BaseView":"BaseView","./TutorialManager":"TutorialManager"}],UpdateController:[function(e,t,o){"use strict";cc._RF.push(t,"b3cadc9oLxMlaTWSqS0DgLW","UpdateController"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../Utils/ToSingleton"),i=cc._decorator,a=i.ccclass,r=(i.property,function(e){function t(){var t=e.call(this)||this;return t.assetsManager=null,t.STORAGE_PATH=(window.jsb&&jsb.fileUtils?jsb.fileUtils.getWritablePath():"/")+"hot-update",t.MANIFEST_PAth="",t.isUpdating=!1,t.manifest=null,t.completeCallback=[],t.startCallback=[],t.errorCallback=[],t.progressCallback=[],t.init(),t}return __extends(t,e),t.prototype.init=function(){window.jsb&&(this.assetsManager=new jsb.AssetsManager(this.MANIFEST_PAth,this.STORAGE_PATH,this.versionCompareHandle),this.assetsManager.setVerifyCallback(this.verifyCallback.bind(this)),cc.sys.os===cc.sys.OS_ANDROID&&this.assetsManager.setMaxConcurrentTask(2))},t.prototype.setManifest=function(e){this.manifest=e},t.prototype.getVersion=function(){return null==this.assetsManager?"":null==this.assetsManager.getLocalManifest()?"":this.assetsManager.getLocalManifest().getVersion()},t.prototype.addCompleteCallback=function(e,t){this.completeCallback.push({target:t,callback:e})},t.prototype.addErrorCallback=function(e,t){this.errorCallback.push({target:e,callback:t})},t.prototype.addStartCallback=function(e,t){this.startCallback.push({target:e,callback:t})},t.prototype.addProgressCallback=function(e,t){this.progressCallback.push({target:e,callback:t})},t.prototype.triggeError=function(e,t){void 0===t&&(t=!1),this.onError(e,t)},t.prototype.onError=function(e,t){void 0===t&&(t=!1),console.log(" this.errorCallback:",this.errorCallback.length,"error:",e);for(var o=0,n=this.errorCallback;o<n.length;o++){var i=n[o];i.callback.apply(i.target,[e,t])}},t.prototype.onComplete=function(e,t){void 0===t&&(t=!1),console.log(" on update complete:",this.getVersion()),console.log("storagePath:",this.getStoragePath()),console.log("search path:",this.getSearchPaths());for(var o=function(o){setTimeout(function(){o.callback.apply(o.target,[e,t])},0)},n=0,i=this.completeCallback;n<i.length;n++){o(i[n])}},t.prototype.getStoragePath=function(){return this.assetsManager?this.assetsManager.getStoragePath():""},t.prototype.getSearchPaths=function(){return window.jsb?jsb.fileUtils.getSearchPaths():""},t.prototype.onStart=function(e,t){void 0===t&&(t=!1),console.log(" this.startCallback:",this.startCallback.length);for(var o=0,n=this.startCallback;o<n.length;o++){var i=n[o];i.callback.apply(i.target,[e,t])}},t.prototype.onProgress=function(e,t){for(var o=0,n=this.progressCallback;o<n.length;o++){var i=n[o];i.callback.apply(i.target,[e,t])}},t.prototype.loadCustomManifest=function(e){if(null!=this.assetsManager&&this.assetsManager.getState()==jsb.AssetsManager.State.UNINITED){var t=new jsb.Manifest(e,this.STORAGE_PATH);this.assetsManager.loadLocalManifest(t,this.STORAGE_PATH)}},t.prototype.checkForUpdate=function(){this.onComplete("no need to update.")},t.prototype.checkUpdateCallback=function(e){switch(console.log("checkUpdateCallback Code: "+e.getEventCode()),e.getEventCode()){case jsb.EventAssetsManager.ERROR_NO_LOCAL_MANIFEST:this.onError("No local manifest file found, hot update skipped.");break;case jsb.EventAssetsManager.ERROR_DOWNLOAD_MANIFEST:case jsb.EventAssetsManager.ERROR_PARSE_MANIFEST:this.onError("Fail to download manifest file, hot update skipped.");break;case jsb.EventAssetsManager.ALREADY_UP_TO_DATE:var t=this.assetsManager.getRemoteManifest()?this.assetsManager.getRemoteManifest().getVersion():" null",o=this.assetsManager.getLocalManifest()?this.assetsManager.getLocalManifest().getVersion():"null";this.onComplete("Already up to date with the latest remote version :"+t+", local version :"+o);break;case jsb.EventAssetsManager.NEW_VERSION_FOUND:this.isUpdating=!1;var n=this.assetsManager.getLocalManifest()?this.assetsManager.getLocalManifest().getVersion():"null",i=this.assetsManager.getRemoteManifest()?this.assetsManager.getRemoteManifest().getVersion():"null";if(console.log("New version found, old:",n,", new: ",i),"null"==n||"null"==i);else{console.log("storage path:",this.assetsManager.getStoragePath());var a=n.split(".")[0];i.split(".")[0]>a?this.onStart("new version found, go to store to download new app.",!0):(this.onStart("new version found, update process start.",!1),this.updateVersion())}break;default:return}},t.prototype.getUpdateDescription=function(){return""},t.prototype.updateVersion=function(){if(null!=this.assetsManager&&!this.isUpdating)if([jsb.AssetsManager.State.UPDATING,jsb.AssetsManager.State.UNZIPPING,jsb.AssetsManager.State.UP_TO_DATE].indexOf(this.assetsManager.getState())>=0)this.onComplete("no need to update: "+this.assetsManager.getState(),!1);else{if(this.assetsManager.getState()===jsb.AssetsManager.State.UNINITED){var e=this.manifest.nativeUrl;cc.loader.md5Pipe&&(e=cc.loader.md5Pipe.transformURL(e)),this.assetsManager.loadLocalManifest(e)}this.assetsManager.setEventCallback(this.updateCallback.bind(this)),console.log(" start update ...:",this.assetsManager.getState()),this.assetsManager.update(),this.isUpdating=!0}},t.prototype.versionToInt=function(e){return parseInt(e.toString().split(".").join(""))},t.prototype.versionToString=function(e){return Math.floor(e/100)+"."+Math.floor(e/10)%10+"."+Math.floor(e)%10},t.prototype.updateCallback=function(e){var t=this,o=!1,n=!1,i=null;switch(console.log("update event code:",e.getEventCode()),e.getEventCode()){case jsb.EventAssetsManager.ERROR_NO_LOCAL_MANIFEST:this.onError("No local manifest file found, hot update skipped."),n=!0;break;case jsb.EventAssetsManager.UPDATE_PROGRESSION:var a=e.getPercent();NaN!=a&&"number"==typeof a||(a=0),this.onProgress(e.getMessage()?"Updated file:"+e.getMessage():"Updating:"+(100*a).toFixed(0)+"%",a);break;case jsb.EventAssetsManager.ERROR_DOWNLOAD_MANIFEST:case jsb.EventAssetsManager.ERROR_PARSE_MANIFEST:this.onError("Fail to download manifest file, hot update skipped."),n=!0;break;case jsb.EventAssetsManager.ALREADY_UP_TO_DATE:i=function(){var e=t.assetsManager.getRemoteManifest()?t.assetsManager.getRemoteManifest().getVersion():" null";t.onComplete("Already up to date with the latest remote version :"+e)},n=!0;break;case jsb.EventAssetsManager.UPDATE_FINISHED:i=function(){var o=t.assetsManager.getRemoteManifest()?t.assetsManager.getRemoteManifest().getVersion():" null";t.onComplete("Update finished. new : "+o+e.getMessage(),!0)},o=!0;break;case jsb.EventAssetsManager.UPDATE_FAILED:this.onError("Update failed. "+e.getMessage(),!0);break;case jsb.EventAssetsManager.ERROR_UPDATING:this.onError("Asset update error: "+e.getAssetId()+", "+e.getMessage());break;case jsb.EventAssetsManager.ERROR_DECOMPRESS:this.onError(e.getMessage())}if(n&&(this.assetsManager.setEventCallback(null),this.isUpdating=!1),o){this.assetsManager.setEventCallback(null);var r=jsb.fileUtils.getSearchPaths();console.log("old searchPaths:",r);var s=this.assetsManager.getLocalManifest().getSearchPaths();console.log("new path:",JSON.stringify(s));for(var c=0,l=s;c<l.length;c++){var u=l[c];r.indexOf(u)<0&&Array.prototype.unshift.apply(r,u)}cc.sys.localStorage.setItem("select-game",JSON.stringify(r)),jsb.fileUtils.setSearchPaths(r),console.log("new searchPaths:",JSON.stringify(r)),console.log(" paths storage:",cc.sys.localStorage.getItem("select-game"))}i&&i()},t.prototype.restart=function(){cc.audioEngine.stopAll(),cc.game.restart()},t.prototype.retry=function(){null!=this.assetsManager&&0==this.isUpdating&&this.assetsManager.downloadFailedAssets()},t.prototype.versionCompareHandle=function(e,t){cc.log("JS Custom Version Compare: version A is "+e+", version B is "+t);for(var o=e.split("."),n=t.split("."),i=0;i<o.length;++i){var a=parseInt(o[i]),r=parseInt(n[i]||"0");if(a!==r)return a-r}return n.length>o.length?-1:0},t.prototype.verifyCallback=function(e,t){var o=t.compressed,n=t.md5,i=t.path;t.size;return o?("Verification passed : "+i,!0):("Verification passed : "+i+" ("+n+")",!0)},t.prototype.destory=function(){this.assetsManager&&this.assetsManager.setEventCallback(null),this.startCallback=[],this.completeCallback=[],this.errorCallback=[],this.progressCallback=[]},t=__decorate([a],t)}(n.SingleTon()));o.default=r,cc._RF.pop()},{"../Utils/ToSingleton":"ToSingleton"}],VersionLabel:[function(e,t,o){"use strict";cc._RF.push(t,"6fe81MGclJHmK+YWeHe/Azd","VersionLabel"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../Command/CommonSignal"),i=cc._decorator,a=i.ccclass,r=(i.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onLoad=function(){var e=this;this.node.opacity=100,n.GameStartSignal.inst.addListener(function(){e.getComponent(cc.Label).string=window.GAME_VERSION&&window.GAME_VERSION.split("version")&&window.GAME_VERSION.split("version")[1]?window.GAME_VERSION.split("version")[1].replace(":",""):window.DEBUG_VERSION},this)},t=__decorate([a],t)}(cc.Component));o.default=r,cc._RF.pop()},{"../Command/CommonSignal":"CommonSignal"}],WildAdAnimation:[function(e,t,o){"use strict";cc._RF.push(t,"a477475bJVCr55eJoQUua8c","WildAdAnimation"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../utils/FrameAniBase"),i=e("../Utils/Signal"),a=cc._decorator,r=a.ccclass,s=(a.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(i.BaseSignal));o.WildAdAnimationIsPlaySignal=s;var c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.isStart=!1,t}return __extends(t,e),t.prototype.onStartPlay=function(){var e=this;s.inst.dispatch(!0),0==this.isStart&&(this.isStart=!0,setTimeout(function(){e.isStart=!1,e.stop(),e.node.opacity=0,setTimeout(function(){e.node.opacity=255,e.Loop=!0,e.play()},8e3)},2e3))},t.prototype.onComplete=function(){s.inst.dispatch(!1)},t=__decorate([r],t)}(n.default);o.default=c,cc._RF.pop()},{"../Utils/Signal":"Signal","../utils/FrameAniBase":"FrameAniBase"}],WildAdButton:[function(e,t,o){"use strict";cc._RF.push(t,"465d6JCvm9NEa4D+PNSyYjD","WildAdButton"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../Utils/Signal"),i=cc._decorator,a=i.ccclass,r=i.property,s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(n.BaseSignal);o.HideWildAdButtonSignal=s;var c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(n.BaseSignal);o.WildAdButtonClick=c;var l,u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(n.BaseSignal);o.WildButtonReadySignal=u,function(e){e[e.Default=0]="Default"}(l=o.AdButtonType||(o.AdButtonType={}));var p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.adType=l.Default,t}return __extends(t,e),t.prototype.onLoad=function(){var e=this;this.node.active=cc.sys.isMobile&&cc.sys.isBrowser&&cc.sys.os==cc.sys.OS_ANDROID,this.node.parent.active=this.node.active,this.node.scale=0,u.inst.addOnce(function(t){e.adType!=t&&null!=t||(console.log(" Wild button :",e.node.active),e.node.active&&(e.node.getComponent(cc.Button).transition=cc.Button.Transition.NONE,e.node.runAction(cc.sequence(cc.scaleTo(.1,1),cc.callFunc(function(){e.node.getComponent(cc.Button).transition=cc.Button.Transition.SCALE,e.node.getComponent(cc.Button).zoomScale=1.2,e.node.on(cc.Node.EventType.TOUCH_END,function(){c.inst.dispatch()},e)})))))},this),s.inst.addListener(function(t){if(e.adType==t||null==t){e.node.active=!1,e.node.parent.active=!1;for(var o=0,n=e.node.parent.children;o<n.length;o++){if(n[o].active){e.node.parent.active=!0;break}}}},this)},__decorate([r({type:cc.Enum(l)})],t.prototype,"adType",void 0),t=__decorate([a],t)}(cc.Component);o.default=p,cc._RF.pop()},{"../Utils/Signal":"Signal"}],table:[function(e,t,o){"use strict";cc._RF.push(t,"f4ed2LT641ClapudKL64DXV","table"),Object.defineProperty(o,"__esModule",{value:!0}),function(e){e[e.MianFeiZanTing=1]="MianFeiZanTing",e[e.ZanTingKouFen=2]="ZanTingKouFen",e[e.DeFen=4]="DeFen",e[e.BangZhuYeMian1=100]="BangZhuYeMian1",e[e.BangZhuYeMian2=101]="BangZhuYeMian2",e[e.BangZhuYeMian3=102]="BangZhuYeMian3",e[e.GuaiShouDanChuang=200]="GuaiShouDanChuang",e[e.GuaiShouQiPao=201]="GuaiShouQiPao",e[e[void 0]=2]="undefined"}(o.En_ID||(o.En_ID={})),function(e){e[e.ZanTingJieMian=1]="ZanTingJieMian",e[e.BangZhuJieMian=2]="BangZhuJieMian",e[e.GuangGaoJieMian=3]="GuangGaoJieMian",e[e.JieSuanJieMian=4]="JieSuanJieMian",e[e.GuaiShouShiYong=5]="GuaiShouShiYong"}(o.En_View||(o.En_View={})),cc._RF.pop()},{}]},{},["AdLayer","FlyCnicornAd","WildAdButton","Annealing","GeometryPolygon","FlyAdCnicornAniamtion","PauseCostAnimation","ResultAnimation","WildAdAnimation","App","Frame","VersionLabel","CommonSignal","AdController","GameStateController","ResourceController","GameFactory","GamePlaySignal","GameLogic","GamePlayModel","GridUtil","SliceModel","AddAnimation","BoomAnimation","EatAnimation","EffectBase","FireWorkAnimation","GetAnimation","MonsterIdleAnimation","OKAnimation","StarAnimation","MonsterReady","NextPie","PieArray","PieRoot","PieShow","PrefabBaseView","SliceTargetRoot","SliceView","BlackView","BonusProgressView","CleanButtonView","CleanCostLabel","ClearSliceLayer","ComboFont","ComboLabel","CompleteView","HelpButtonView","HelpLabelView","MenuButtonView","MenuLayerView","MonsterTipHand","PieCountLabel","ResultLayerView","RevertButtonView","ScoreLabelView","SoundButtonView","SubmitButtonView","SubmitLayerView","TimeLabelView","BreakAnimation","Page","ScoreFloat","GameRecorder","GameRule","Level","Theme","InititalCommand","LoadAudioCommand","LoadJsonCommand","LoadPrefabCommand","StartGameCommand","InitialFacade","LoadingAnimation","LoadingPageMediator","LoadingView","ThemeView","AudioManager","StepManager","PlayModelProxy","TableManager","TutorialManager","TutorialView","UpdateController","CelerSDK","Cocos","FrameAniBase","HashMap","LogHandler","Random","Signal","Time","ToSingleton","AdaptationWigetView","BaseMediator","BaseView","GlobalSingleTouchMediator","GlobalSingleTouchView","HelpLayerMediator","HelpLayerView","HelpTextView","NumberChangedView","SingleTouchMediator","SingleTouchView","SliderView","Test","TestMove","FrontView","TestApp","TestSingleTouchView","TimeEffectAnimation","EaseBaseView","PositionView","RotationView","ScaleView","SkewView","table"]);