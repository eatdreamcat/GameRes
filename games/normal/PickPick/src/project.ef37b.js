window.__require=function e(t,n,o){function i(r,s){if(!n[r]){if(!t[r]){var c=r.split("/");if(c=c[c.length-1],!t[c]){var l="function"==typeof __require&&__require;if(!s&&l)return l(c,!0);if(a)return a(c,!0);throw new Error("Cannot find module '"+r+"'")}}var u=n[r]={exports:{}};t[r][0].call(u.exports,function(e){return i(t[r][1][e]||e)},u,u.exports,e,t,n,o)}return n[r].exports}for(var a="function"==typeof __require&&__require,r=0;r<o.length;r++)i(o[r]);return i}({AdController:[function(e,t,n){"use strict";cc._RF.push(t,"dbb04KnQ3hLBaByYwTfX2Cv","AdController"),Object.defineProperty(n,"__esModule",{value:!0});var o=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.hasBind=!1,t.finishCallback={},t.failedCallback={},t.adCount=0,t.msgMap={},t.volume=0,t}return __extends(t,e),t.prototype.showAd=function(e,t,n){var o=this;0==this.hasBind&&this.bindCallback();var i=e+this.adCount;if(this.msgMap[i]=e,null==this.finishCallback[i]&&(this.finishCallback[i]=[]),this.finishCallback[i].push(t),null==this.failedCallback[i]&&(this.failedCallback[i]=[]),this.failedCallback[i].push(n),CELER_X)celerSDK.showAd(i);else if(cc.director.getScene()&&cc.director.getScene().getChildByName("Canvas")){var a=cc.director.getScene().getChildByName("Canvas");if(a.getChildByName("adNode"))return;var r=new cc.Node("adNode"),s=r.addComponent(cc.VideoPlayer);s.remoteURL="https://vicat.wang/GameRes/catcatcat.mp4",a.width=1464,a.height=2400,a.addChild(r),r.setPosition(0,0),this.volume=cc.audioEngine.getMusicVolume(),cc.audioEngine.setMusicVolume(0),s.node.on("ready-to-play",function(){console.log("ready-to-play"),r.width=1080,r.height=1920,s.play()},this),s.node.on("meta-loaded",function(){console.log("meta-loaded")},this),s.node.on("clicked",function(){if(console.log("clicked"),r.pauseCount++,r.pauseCount>=5){for(var e=document.getElementsByClassName("cocosVideo"),t=0;t<e.length;t++){var n=e.item(t);n&&n.remove()}setTimeout(function(){r.removeFromParent(!0),r.destroy(),o.onAddFaild(i)},0)}},this),s.node.on("playing",function(){console.log("playing")},this),r.pauseCount=0,s.node.on("paused",function(){if(console.log("paused"),r.pauseCount++,r.pauseCount>=5){for(var e=document.getElementsByClassName("cocosVideo"),t=0;t<e.length;t++){var n=e.item(t);n&&n.remove()}setTimeout(function(){r.removeFromParent(!0),r.destroy(),o.onAddFaild(i)},0)}},this),s.node.on("stopped",function(){console.log("stopped")},this),s.node.on("completed",function(){console.log("completed"),s.stop();for(var e=document.getElementsByClassName("cocosVideo"),t=0;t<e.length;t++){var n=e.item(t);n&&n.remove()}setTimeout(function(){r.removeFromParent(!0),r.destroy(),o.onAdFinish(i)},0)},this)}this.adCount++,console.log(" request ad:",i)},t.prototype.bindCallback=function(){this.hasBind=!0,CELER_X&&(celerSDK.onAdPlayFailed(this.onAddFaild.bind(this)),celerSDK.onAdPlayFinished(this.onAdFinish.bind(this)))},t.prototype.onAdFinish=function(e){if(this.finishCallback[e]){for(var t=0,n=this.finishCallback[e];t<n.length;t++){(0,n[t])(this.msgMap[e])}this.finishCallback[e]=null,this.failedCallback[e]=null,this.msgMap[e]=null}CELER_X||cc.audioEngine.setMusicVolume(this.volume)},t.prototype.onAddFaild=function(e){if(this.failedCallback[e]){for(var t=0,n=this.failedCallback[e];t<n.length;t++){(0,n[t])(this.msgMap[e])}this.failedCallback[e]=null,this.finishCallback[e]=null,this.msgMap[e]=null}CELER_X||cc.audioEngine.setMusicVolume(this.volume)},t}(e("../utils/ToSingleton").SingleTon());n.AdController=o,cc._RF.pop()},{"../utils/ToSingleton":"ToSingleton"}],AdLayer:[function(e,t,n){"use strict";cc._RF.push(t,"67391QyhbBGnpPQUpvrThZw","AdLayer"),Object.defineProperty(n,"__esModule",{value:!0});var o,i=e("../Controller/AdController"),a=e("../Controller/GameStateController"),r=e("../Utils/Signal"),s=e("./FlyCnicornAd"),c=e("./WildAdButton"),l=cc._decorator,u=l.ccclass,h=l.property,p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(r.BaseSignal);n.AdFinishSignal=p,function(e){e[e.Cnicorn=0]="Cnicorn",e[e.Sun=1]="Sun"}(o=n.AdType||(n.AdType={}));var d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.AdAtlas=null,t}return __extends(t,e),Object.defineProperty(t.prototype,"Panel",{get:function(){return this.node.getChildByName("NormalPanel")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"WatchAd",{get:function(){return this.Panel.getChildByName("btn_get")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"BackToGame",{get:function(){return this.Panel.getChildByName("btn_back")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Content",{get:function(){return this.Panel.getChildByName("font_freeprop1").getComponent(cc.Sprite)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"SubContent",{get:function(){return this.Panel.getChildByName("font_freeprop2").getComponent(cc.Sprite)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"MoveBonus",{get:function(){return this.Panel.getChildByName("Moves")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Title",{get:function(){return this.Panel.getChildByName("bg_title_freeprop").getComponent(cc.Sprite)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"FailTip",{get:function(){return this.node.getChildByName("FailTip")},enumerable:!0,configurable:!0}),t.prototype.onLoad=function(){var e=this;this.node.active=!1,this.node.scale=1,c.WildAdButtonClick.inst.addListener(function(){e.Show(o.Sun)},this),s.FlyCnicornClickSignal.inst.addListener(function(){e.Show(o.Cnicorn)},this),this.BackToGame.on(cc.Node.EventType.TOUCH_END,function(){setTimeout(function(){e.node.active=!1,a.GameStateController.inst.resume(),s.default.ShowTimeRest=10},0)},this)},t.prototype.onAdFinish=function(e){var t=this;p.inst.dispatchOne(e),e==o[o.Sun]?CELER_X&&c.HideWildAdButtonSignal.inst.dispatch():CELER_X&&s.RemoveFlyCnicornSignal.inst.dispatch(),setTimeout(function(){t.node.active=!1,a.GameStateController.inst.resume()},0)},t.prototype.onAdFailed=function(e){var t=this;this.FailTip.active=!0,this.Panel.active=!1,e==o[o.Cnicorn]&&s.CnicornWatchFailSignal.inst.dispatch(),setTimeout(function(){t.node.active=!1,a.GameStateController.inst.resume()},2e3)},t.prototype.Show=function(e){var t=this;1!=this.node.active&&(a.GameStateController.inst.pause(!0),this.node.active=!0,this.FailTip.active=!1,this.Panel.active=!0,this.WatchAd.active=!0,e==o.Sun?(this.Title.spriteFrame=this.AdAtlas.getSpriteFrame("font_free"),this.Content.spriteFrame=this.AdAtlas.getSpriteFrame("font_get prop1"),this.SubContent.spriteFrame=this.AdAtlas.getSpriteFrame("font_get prop2"),this.WatchAd.getComponent(cc.Sprite).spriteFrame=this.AdAtlas.getSpriteFrame("btn_getprop"),this.MoveBonus.active=!1):(this.Title.spriteFrame=this.AdAtlas.getSpriteFrame("font_add"),this.Content.spriteFrame=this.AdAtlas.getSpriteFrame("font_addmoves1"),this.SubContent.spriteFrame=this.AdAtlas.getSpriteFrame("font_addmoves2"),this.MoveBonus.active=!0,this.MoveBonus.getComponent(cc.Label).string="3",this.WatchAd.getComponent(cc.Sprite).spriteFrame=this.AdAtlas.getSpriteFrame("btn_addmoves")),this.WatchAd.targetOff(this),this.WatchAd.once(cc.Node.EventType.TOUCH_END,function(){setTimeout(function(){t.WatchAd.active=!1},0),i.AdController.inst.showAd(o[e],function(e){console.log(" watch ad success:",e),t.onAdFinish(e)},function(e){console.log(" watch ad fail:",e),t.onAdFailed(e)})},this))},__decorate([h(cc.SpriteAtlas)],t.prototype,"AdAtlas",void 0),t=__decorate([u],t)}(cc.Component);n.default=d,cc._RF.pop()},{"../Controller/AdController":"AdController","../Controller/GameStateController":"GameStateController","../Utils/Signal":"Signal","./FlyCnicornAd":"FlyCnicornAd","./WildAdButton":"WildAdButton"}],AdaptationWigetView:[function(e,t,n){"use strict";cc._RF.push(t,"4e5d6A0aNBHr7pctNWh6pyy","AdaptationWigetView"),Object.defineProperty(n,"__esModule",{value:!0});var o,i=cc._decorator,a=i.ccclass,r=i.property;(function(e){e[e.Top=0]="Top",e[e.TopLeft=1]="TopLeft",e[e.TopRight=2]="TopRight",e[e.Bottom=3]="Bottom",e[e.BotLeft=4]="BotLeft",e[e.BotRight=5]="BotRight",e[e.Left=6]="Left",e[e.Right=7]="Right",e[e.Center=8]="Center"})(o=n.AlignType||(n.AlignType={}));var s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.alignType=o.Center,t}return __extends(t,e),t.prototype.onLoad=function(){cc.sys.isMobile?window.addEventListener("resize",this.onResize.bind(this)):cc.view.on("canvas-resize",this.onResize,this),this.onResize()},t.prototype.onResize=function(){switch(this.alignType){case o.Top:this.alignTop();break;case o.TopLeft:this.alignTopLeft();break;case o.TopRight:this.alignTopRight();break;case o.Bottom:this.alignBottom();break;case o.BotLeft:this.alignBotLeft();break;case o.BotRight:this.alignBotRight();break;case o.Left:this.alignLeft();break;case o.Right:this.alignRight();break;case o.Center:this.alignCenter()}},t.prototype.alignTop=function(){var e=cc.view.getCanvasSize();this.node.anchorX=.5,this.node.anchorY=1,this.node.setPosition(this.LocalZero.add(cc.v2(e.width/this.UseRatio/2,e.height/this.UseRatio)))},t.prototype.alignTopLeft=function(){var e=cc.view.getCanvasSize();this.node.anchorX=0,this.node.anchorY=1,this.node.setPosition(this.LocalZero.add(cc.v2(0,e.height/this.UseRatio)))},t.prototype.alignTopRight=function(){var e=cc.view.getCanvasSize();this.node.anchorX=1,this.node.anchorY=1,this.node.setPosition(this.LocalZero.add(cc.v2(e.width/this.UseRatio,e.height/this.UseRatio)))},t.prototype.alignBottom=function(){var e=cc.view.getCanvasSize();this.node.anchorX=.5,this.node.anchorY=0,this.node.setPosition(this.LocalZero.add(cc.v2(e.width/this.UseRatio/2,0)))},t.prototype.alignBotLeft=function(){this.node.anchorX=0,this.node.anchorY=0,this.node.setPosition(this.LocalZero)},t.prototype.alignBotRight=function(){var e=cc.view.getCanvasSize();this.node.anchorX=1,this.node.anchorY=0,this.node.setPosition(this.LocalZero.add(cc.v2(e.width/this.UseRatio,0)))},t.prototype.alignLeft=function(){},t.prototype.alignRight=function(){},t.prototype.alignCenter=function(){},Object.defineProperty(t.prototype,"UseRatio",{get:function(){var e=cc.view.getCanvasSize(),t=cc.view.getDesignResolutionSize(),n=e.width/t.width,o=e.height/t.height;return Math.min(n,o)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"LocalZero",{get:function(){var e=cc.view.getCanvasSize(),t=cc.view.getDesignResolutionSize(),n=e.width/t.width,o=e.height/t.height,i=Math.min(n,o),a=cc.v2(0,0);return a=n<o?cc.v2(0,-(e.height/i-t.height)/2):n>o?cc.v2(-(e.width/i-t.width)/2,0):cc.v2(0,0),this.node.parent.convertToNodeSpaceAR(a)},enumerable:!0,configurable:!0}),__decorate([r({type:cc.Enum(o)})],t.prototype,"alignType",void 0),t=__decorate([a],t)}(cc.Component);n.default=s,cc._RF.pop()},{}],AddAnimation:[function(e,t,n){"use strict";cc._RF.push(t,"b3d976wEFpCQpT03NFZY3mc","AddAnimation"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../../Utils/FrameAniBase"),i=cc._decorator,a=i.ccclass,r=(i.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t=__decorate([a],t)}(o.default));n.default=r,cc._RF.pop()},{"../../../Utils/FrameAniBase":"FrameAniBase"}],Annealing:[function(e,t,n){"use strict";cc._RF.push(t,"c26f77+I9xO1a5iP/sBTn/P","Annealing"),Object.defineProperty(n,"__esModule",{value:!0});var o,i=e("../Utils/Cocos"),a=e("../Utils/Random");(function(e){e[e.Min=0]="Min",e[e.Max=1]="Max"})(o=n.AnnealType||(n.AnnealType={}));var r=function(){function e(e,t,n,o,i,a,r,s){void 0===a&&(a=1e-4),void 0===r&&(r=30),void 0===s&&(s=100),this.totalOutLoop=200,this.totalInnerLoop=500,this.minTemperate=1e-4,this.maxStableCount=30,this.stableCount=0,this.xRange={min:0,max:0},this.x0=0,this.x1=0,this.y0=0,this.y1=0,this.t=0,this.startD=100,this.type=e,this.totalInnerLoop=n,this.totalOutLoop=t,this.model=o,this.xRange.min=i.min,this.xRange.max=i.max,this.minTemperate=a,this.maxStableCount=r,this.startD=s}return Object.defineProperty(e.prototype,"Temperate",{get:function(){return 100*Math.pow(.95,this.t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"BaseStep",{get:function(){return this.Temperate/100*this.startD},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Step",{get:function(){return(1-this.t/this.totalOutLoop)*Math.abs(this.xRange.max-this.xRange.min)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"AcceptRate",{get:function(){return Math.pow(Math.E,-Math.abs(this.f(this.x1)-this.f(this.x0))/this.Temperate)},enumerable:!0,configurable:!0}),e.prototype.f=function(e){return this.model.getAnnealingValue(e)},Object.defineProperty(e.prototype,"isEndLoop",{get:function(){return this.t>=this.totalOutLoop||this.Temperate<=this.minTemperate||this.stableCount>=this.maxStableCount},enumerable:!0,configurable:!0}),e.prototype.loop=function(){for(this.t=0,this.stableCount=0,this.x0=a.Random.getRandom(this.xRange.min,this.xRange.max);;){for(var e=0;e++<=this.totalInnerLoop;){this.y0=this.f(this.x0);var t=a.Random.getRandom()>.5?1:-1,n=a.Random.getRandom()*this.Step+this.BaseStep;if(n%=t>0?Math.max(Math.floor(this.xRange.max-this.x0),1):Math.max(Math.floor(this.x0-this.xRange.min),1),n*=t,this.x1=this.x0+n,this.y1=this.f(this.x1),i.Approx(this.y0,this.y1))this.stableCount++;else if(this.stableCount=0,this.type==o.Max)if(this.y1>this.y0)this.x0=this.x1;else a.Random.getRandom()<=this.AcceptRate&&(this.x0=this.x1);else if(this.y1<this.y0)this.x0=this.x1;else a.Random.getRandom()<=this.AcceptRate&&(this.x0=this.x1);if(this.stableCount>=this.maxStableCount)break}if(this.t++,this.isEndLoop)break}return this.x0},e}();n.Annealing=r,cc._RF.pop()},{"../Utils/Cocos":"Cocos","../Utils/Random":"Random"}],App:[function(e,t,n){"use strict";cc._RF.push(t,"eaeeaWDD5pJfqkUameEwNsk","App"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../Controller/ResourceController"),i=e("../GameRecorder/GameRecorder"),a=e("../Initialization/Facade/InitialFacade"),r=e("../Model/PlayModelProxy"),s=e("../table"),c=e("../TableManager"),l=e("../Utils/Signal"),u=cc._decorator,h=u.ccclass,p=u.property,d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(l.BaseSignal);n.StartBindAtlasSignal=d;var g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.UI=null,t.PauseUI=null,t.ResultUI=null,t.UIAnimation=null,t.GamePlayAnimation=null,t.Add=null,t.ItemRootNode=null,t.Sub=null,t.ShowScore=null,t.TimeRed=null,t.TimeWhite=null,t.Result=null,t.Animals=null,t.Plants=null,t.Buildings=null,t.Books=null,t.Ball=null,t.Food=null,t.Shape=null,t.Outlet=null,t.Ornament=null,t.Tool=null,t.Makeup=null,t.Fruits=null,t.Vegetable=null,t.Other=null,t}var n;return __extends(t,e),n=t,t.prototype.onLoad=function(){console.log(" app onload "),n.ItemRoot=this.ItemRootNode,this.UI&&o.ResourceController.inst.setAtlas(this.UI),this.PauseUI&&o.ResourceController.inst.setPauseAtlas(this.PauseUI),this.ResultUI&&o.ResourceController.inst.setResultAtlas(this.ResultUI),this.Result&&o.ResourceController.inst.setFont(o.Font.ResultScore,this.Result),this.Add&&o.ResourceController.inst.setFont(o.Font.AddScore,this.Add),this.Sub&&o.ResourceController.inst.setFont(o.Font.SubScore,this.Sub),this.ShowScore&&o.ResourceController.inst.setFont(o.Font.ShowScore,this.ShowScore),this.TimeRed&&o.ResourceController.inst.setFont(o.Font.TimeRed,this.TimeRed),this.TimeWhite&&o.ResourceController.inst.setFont(o.Font.TimeWhite,this.TimeWhite),this.UIAnimation&&o.ResourceController.inst.pushAnimationAtlas(o.AnimationType.UI,this.UIAnimation),this.GamePlayAnimation&&o.ResourceController.inst.pushAnimationAtlas(o.AnimationType.GamePlay,this.GamePlayAnimation),cc.game.setFrameRate(60),cc.debug.setDisplayStats(!CELER_X),d.inst.addListener(this.bindItemAtals,this)},t.prototype.bindItemAtals=function(){for(var e=0,t=c.TableManager.inst.getRandom(s.Random_ID.SuiJiChi).Pool;e<t.length;e++){var n=t[e],i=c.TableManager.inst.getClass(n).Table;this[i]&&this[i]instanceof cc.SpriteAtlas&&o.ResourceController.inst.pushItemAtlas(n,this[i])}},t.prototype.start=function(){i.GameRecorder.inst.init(),a.InitialFacade.inst.start()},t.prototype.update=function(e){r.PlayModelProxy.inst.addGameTime(-e)},t.ItemRoot=null,__decorate([p(cc.SpriteAtlas)],t.prototype,"UI",void 0),__decorate([p(cc.SpriteAtlas)],t.prototype,"PauseUI",void 0),__decorate([p(cc.SpriteAtlas)],t.prototype,"ResultUI",void 0),__decorate([p(cc.SpriteAtlas)],t.prototype,"UIAnimation",void 0),__decorate([p(cc.SpriteAtlas)],t.prototype,"GamePlayAnimation",void 0),__decorate([p(cc.Font)],t.prototype,"Add",void 0),__decorate([p(cc.Node)],t.prototype,"ItemRootNode",void 0),__decorate([p(cc.Font)],t.prototype,"Sub",void 0),__decorate([p(cc.Font)],t.prototype,"ShowScore",void 0),__decorate([p(cc.Font)],t.prototype,"TimeRed",void 0),__decorate([p(cc.Font)],t.prototype,"TimeWhite",void 0),__decorate([p(cc.Font)],t.prototype,"Result",void 0),__decorate([p({type:cc.SpriteAtlas,displayName:"\u52a8\u7269\u7c7b"})],t.prototype,"Animals",void 0),__decorate([p({type:cc.SpriteAtlas,displayName:"\u690d\u7269\u7c7b"})],t.prototype,"Plants",void 0),__decorate([p({type:cc.SpriteAtlas,displayName:"\u5efa\u7b51"})],t.prototype,"Buildings",void 0),__decorate([p({type:cc.SpriteAtlas,displayName:"\u4e66\u7c4d"})],t.prototype,"Books",void 0),__decorate([p({type:cc.SpriteAtlas,displayName:"\u7403"})],t.prototype,"Ball",void 0),__decorate([p({type:cc.SpriteAtlas,displayName:"\u98df\u7269\u7c7b"})],t.prototype,"Food",void 0),__decorate([p({type:cc.SpriteAtlas,displayName:"\u5f62\u72b6"})],t.prototype,"Shape",void 0),__decorate([p({type:cc.SpriteAtlas,displayName:"\u670d\u88c5\u7c7b"})],t.prototype,"Outlet",void 0),__decorate([p({type:cc.SpriteAtlas,displayName:"\u914d\u9970"})],t.prototype,"Ornament",void 0),__decorate([p({type:cc.SpriteAtlas,displayName:"\u6587\u5177\u5de5\u5177"})],t.prototype,"Tool",void 0),__decorate([p({type:cc.SpriteAtlas,displayName:"\u5316\u5986\u54c1"})],t.prototype,"Makeup",void 0),__decorate([p({type:cc.SpriteAtlas,displayName:"\u6c34\u679c"})],t.prototype,"Fruits",void 0),__decorate([p({type:cc.SpriteAtlas,displayName:"\u852c\u83dc"})],t.prototype,"Vegetable",void 0),__decorate([p({type:cc.SpriteAtlas,displayName:"\u5e72\u6270"})],t.prototype,"Other",void 0),t=n=__decorate([h],t)}(cc.Component);n.default=g,cc._RF.pop()},{"../Controller/ResourceController":"ResourceController","../GameRecorder/GameRecorder":"GameRecorder","../Initialization/Facade/InitialFacade":"InitialFacade","../Model/PlayModelProxy":"PlayModelProxy","../TableManager":"TableManager","../Utils/Signal":"Signal","../table":"table"}],AudioManager:[function(e,t,n){"use strict";cc._RF.push(t,"88c70Ktw0pBKKUTDtyQ2NkZ","AudioManager"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../Utils/HashMap"),i=e("../Command/CommonSignal"),a=e("../Controller/GameStateController"),r=e("../Utils/ToSingleton"),s=e("../Model/PlayModelProxy"),c=e("../GamePlay/View/Game/Item"),l=e("../GamePlay/View/UI/Subject"),u=e("../GamePlay/View/UI/SubjectLabel");window.oncanplay&&(window.oncanplay=function(){p.canPlay=!0});var h="sounds/",p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.audioID={},t.effectCount=0,t.clips=new o.HashMap,t.effectVolumeScale=1,t.musicVolumeScale=.8,t}return __extends(t,e),Object.defineProperty(t.prototype,"EffectCount",{get:function(){return this.effectCount},set:function(e){this.effectCount=e,this.effectCount=Math.max(0,this.effectCount)},enumerable:!0,configurable:!0}),t.prototype.init=function(e,t){var n=this;console.log(" start load AudioClip ");var o=this;cc.loader.loadRes(h+"bgm",cc.AudioClip,function(e,n){t&&t(e/n)},function(t,n){t?console.error(t):("string"==typeof n._audio&&cc.loader._cache&&cc.loader._cache[n._audio]&&cc.loader._cache[n._audio].buffer&&(n._audio=cc.loader._cache[n._audio].buffer),o.clips.add(n.name,n),e&&e(),o.playMusic("bgm",!0))}),cc.loader.loadResDir(h,function(e,t,o){if(e)console.error(e);else for(var i=0,a=t;i<a.length;i++){var r=a[i];"string"==typeof r._audio&&cc.loader._cache&&cc.loader._cache[r._audio]&&cc.loader._cache[r._audio].buffer&&(r._audio=cc.loader._cache[r._audio].buffer),n.clips.has(r.name)||n.clips.add(r.name,r)}}),this.bindSignal()},t.prototype.setEffectVolume=function(e){this.effectVolumeScale=1,cc.audioEngine.setEffectsVolume(e*this.effectVolumeScale)},t.prototype.setMusicVolume=function(e){this.musicVolumeScale=1,cc.audioEngine.setMusicVolume(e*this.musicVolumeScale)},Object.defineProperty(t.prototype,"EffectVolume",{get:function(){return cc.audioEngine.getEffectsVolume()/this.effectVolumeScale},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"MusicVolume",{get:function(){return cc.audioEngine.getMusicVolume()/this.musicVolumeScale},enumerable:!0,configurable:!0}),t.prototype.bindSignal=function(){var e=this;this.setEffectVolume(1),this.setMusicVolume(1),c.OnWrongClickSignal.inst.addListener(function(){e.playEffect("Wrong")},this),l.SubjectOkSignal.inst.addListenerTwo(function(t,n){n&&e.playEffect("Finish")},this);var t=1;u.UpdateTypeScore.inst.addListener(function(){e.playEffect("Match"+t),++t>2&&(t=1)},this),i.UpdateTimeNumber.inst.addListenerOne(function(t){if(t>=30){if(cc.audioEngine.getState(e.audioID.bgm)==cc.audioEngine.AudioState.PLAYING)return;e.playMusic("bgm",!0)}else{if(cc.audioEngine.getState(e.audioID.bgm_30)==cc.audioEngine.AudioState.PLAYING)return;e.playMusic("bgm_30",!0)}},this),s.StartCountSignal.inst.addListener(function(){e.playEffect("start_count")},this),i.ScoreCountingSignal.inst.addListener(function(){e.audioID.scoreCount||e.playEffect("scoreCount",!1,function(){e.audioID.scoreCount=null})},this),i.ShowSubmitSignal.inst.addListener(function(){e.audioID.scoreCount&&cc.audioEngine.stopEffect(e.audioID.scoreCount),e.playEffect("showSubmit")},this),i.OpenResultLayerSignal.inst.addListenerOne(function(t){t==a.RoundEndType.TimeUp?e.playEffect("show_result"):(a.RoundEndType.Complete,e.playEffect("show_result"))},this),i.PlayerScoreChanged.inst.addListenerThree(function(e,t,n){},this),s.NextLevelSignal.inst.addListenerOne(function(t){0!=t&&e.playEffect("pass_level")},this),i.ButtonClickSignal.inst.addListener(function(){e.playEffect("click")},this),i.CountDownSignal.inst.addListener(function(){e.playEffect("countDown")},this),i.GameOverSignal.inst.addListenerOne(function(t){switch(e.effectCount=0,t){case a.RoundEndType.Complete:e.playEffect("complete");break;case a.RoundEndType.TimeUp:e.playEffect("timeup");break;case a.RoundEndType.Over:default:e.playEffect("over")}},this)},t.prototype.playEffect=function(e,n,o){var i=this;if(void 0===n&&(n=!1),t.canPlay){if(!(this.effectCount>=15||null!=this.audioID[e]||cc.audioEngine.getEffectsVolume()<=.05)){var a=this.clips.get(e);a?(this.audioID[e]=cc.audioEngine.playEffect(a,n),this.EffectCount++,cc.audioEngine.setFinishCallback(this.audioID[e],function(){i.audioID[e]=null,i.EffectCount--,o&&o()}),setTimeout(function(){i.audioID[e]=null},100)):cc.loader.loadRes(h+e,cc.AudioClip,function(t,a){t?console.error(t):("string"==typeof a._audio&&cc.loader._cache&&cc.loader._cache[a._audio]&&cc.loader._cache[a._audio].buffer&&(a._audio=cc.loader._cache[a._audio].buffer),i.clips.add(a.name,a),i.audioID[e]=cc.audioEngine.playEffect(a,n),i.EffectCount++,cc.audioEngine.setFinishCallback(i.audioID[e],function(){o&&o(),i.audioID[e]=null,i.EffectCount--}),setTimeout(function(){i.audioID[e]=null},100))})}}else this.bindTouch()},t.prototype.playMusic=function(e,n){var o=this;if(void 0===n&&(n=!0),!t.canPlay)return this.bindTouch(),void t.PlayedList.push({loop:!0,volume:1,clipName:e,supTime:Date.now(),skip:!1,isBgm:!0});var i=this.clips.get(e);i?this.audioID[e]=cc.audioEngine.playMusic(i,n):cc.loader.loadRes(h+e,cc.AudioClip,function(t,i){t?console.error(t):("string"==typeof i._audio&&cc.loader._cache&&cc.loader._cache[i._audio]&&cc.loader._cache[i._audio].buffer&&(i._audio=cc.loader._cache[i._audio].buffer),o.clips.add(i.name,i),o.audioID[e]=cc.audioEngine.playMusic(i,n))})},t.prototype.bindTouch=function(){if(!t.hasBindTouch){var e=this,n=function(){var o;for(cc.game.canvas.removeEventListener("touchstart",n),t.canPlay=!0;(o=t.PlayedList.pop())&&e.clips.get(o.clipName)&&!o.skip;)cc.audioEngine.playMusic(e.clips.get(o.clipName),o.loop)};t.hasBindTouch=!0,cc.game.canvas.addEventListener("touchstart",n)}},t.PlayedList=[],t.canPlay=cc.sys.WIN32==cc.sys.platform,t.hasBindTouch=!1,t}(r.SingleTon());n.gAudio=p.inst,cc._RF.pop()},{"../Command/CommonSignal":"CommonSignal","../Controller/GameStateController":"GameStateController","../GamePlay/View/Game/Item":"Item","../GamePlay/View/UI/Subject":"Subject","../GamePlay/View/UI/SubjectLabel":"SubjectLabel","../Model/PlayModelProxy":"PlayModelProxy","../Utils/HashMap":"HashMap","../Utils/ToSingleton":"ToSingleton"}],BaseMediator:[function(e,t,n){"use strict";cc._RF.push(t,"a76c1ySm3tAQId4zbAsdr/d","BaseMediator"),Object.defineProperty(n,"__esModule",{value:!0});var o=cc._decorator,i=o.ccclass,a=(o.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.bind=function(e){this.view=e},Object.defineProperty(t.prototype,"View",{get:function(){return console.assert(null!=this.view," view is null"),this.view},enumerable:!0,configurable:!0}),t.prototype.onRegister=function(){console.error(" should override onRegister ")},t.prototype.onUnregister=function(){console.error(" should override onUnregister ")},t=__decorate([i],t)}(cc.Component));n.default=a,cc._RF.pop()},{}],BasePacker:[function(e,t,n){"use strict";cc._RF.push(t,"7a4a4R8UZ1CGI696oGoU/ok","BasePacker"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../Utils/Cocos"),i=e("../Utils/Random"),a=e("../Utils/Signal"),r=e("../utils/ToSingleton"),s=e("./GeometryPolygon/GeometryPolygon"),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(a.BaseSignal);n.UpdatePanelHeightSignal=c;var l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(a.BaseSignal);n.PolygonPackDoneSignal=l;var u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.width=0,t.height=0,t._polygonsSort=[],t._polygonsSortNeed=[],t._currentPack=[],t._polygonData={},t._polygonDataNeed=[],t._idcount=0,t}return __extends(t,e),Object.defineProperty(t.prototype,"TotalArea",{get:function(){return this.height*this.width},enumerable:!0,configurable:!0}),t.prototype.init=function(e,t,n,a,r){this.width=e,this.height=0,this._polygonData=t,this._polygonDataNeed=n;for(var c=0;c<this._polygonDataNeed.length;c++){var l=this._polygonDataNeed[c];this._polygonsSortNeed[c]=[];for(var u=0,h=l;u<h.length;u++){var p=h[u],d=p.key+":"+this._idcount++,g=new s.GeometryPolygon(p.points,d,p.type,p.subType);g.expend(10),g.rotateTo(i.Random.randomFloorToInt(0,360)),this._polygonsSortNeed[c].push(g)}o.disOrderArray(this._polygonsSortNeed[c])}this._progressCallback=a,this._completeCallback=r,this.setPolygons(),this.pack()},t.prototype.setPolygons=function(e){if(void 0===e&&(e=""),""!=e&&this._polygonsSort.length>0){var t=this._polygonData[e],n=e+":"+this._idcount++;return(a=new s.GeometryPolygon(t.points,n,t.type,t.subType)).expend(10),a.rotateTo(i.Random.randomFloorToInt(0,360)),this._polygonsSort.push(a),void this._polygonsSort.sort(function(e,t){return e.Area-t.Area})}if(this._polygonsSort.length<=0){console.log(" setPolygons .");for(var o in this._polygonData){var a;n=o+":"+this._idcount++,t=this._polygonData[o];(a=new s.GeometryPolygon(t.points,n,t.type,t.subType)).expend(10),a.rotateTo(i.Random.randomFloorToInt(0,360)),this._polygonsSort.push(a)}this._polygonsSort.sort(function(e,t){return e.Area-t.Area})}},t.prototype.polygons=function(){return this._polygonsSort},t.prototype.polygonsNeed=function(){return this._polygonsSortNeed},t.prototype.packeds=function(){return this._currentPack},t.prototype.addPack=function(e){this._currentPack.push(e)},t.prototype.pack=function(){console.error("should override this method.")},t.prototype.done=function(){l.inst.dispatchOne(this._currentPack),c.inst.dispatchOne(this.height)},t.prototype.startPack=function(e){void 0===e&&(e=2880),console.error("should override this method.")},t}(r.SingleTon());n.BasePacker=u,cc._RF.pop()},{"../Utils/Cocos":"Cocos","../Utils/Random":"Random","../Utils/Signal":"Signal","../utils/ToSingleton":"ToSingleton","./GeometryPolygon/GeometryPolygon":"GeometryPolygon"}],BaseView:[function(e,t,n){"use strict";cc._RF.push(t,"6daedF7tVNJ3qN565kuohVZ","BaseView"),Object.defineProperty(n,"__esModule",{value:!0});var o=cc._decorator,i=o.ccclass,a=(o.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onLoad=function(){this.node.scale=0},t.prototype.Show=function(e){this.node.active=!0,this.node.runAction(cc.sequence(cc.callFunc(function(){}),cc.scaleTo(.1,1),cc.callFunc(function(){e&&e()})))},t.prototype.Hide=function(e){var t=this;this.node.runAction(cc.sequence(cc.scaleTo(.1,0),cc.callFunc(function(){t.node.active=!1,e&&e()})))},t.prototype.OnClick=function(){},t.prototype.BindMedaitor=function(e){if(!this.node.getComponent(e)){var t=this.node.addComponent(e);return t.bind&&t.bind(this),t.onRegister&&t.onRegister(),t}console.warn(" this node already has the same component..")},t.prototype.UnbindMedaitor=function(e){var t=this.node.getComponent(e);if(t)return t.onUnregister&&t.onUnregister(),t.bind&&t.bind(null),this.node.removeComponent(e),t;console.warn(" component already removed..")},t=__decorate([i],t)}(cc.Component));n.default=a,cc._RF.pop()},{}],BlackView:[function(e,t,n){"use strict";cc._RF.push(t,"f7137KIFk5HzYzsbeidU/gx","BlackView"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../../Command/CommonSignal"),i=e("../../../Controller/GameStateController"),a=cc._decorator,r=a.ccclass,s=(a.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onLoad=function(){var e=this;o.GameOverSignal.inst.addListenerOne(function(t){t!=i.RoundEndType.Complete&&(e.node.active=!0)},this),this.node.active=!1},t.prototype.start=function(){},t=__decorate([r],t)}(cc.Component));n.default=s,cc._RF.pop()},{"../../../Command/CommonSignal":"CommonSignal","../../../Controller/GameStateController":"GameStateController"}],BonusProgressView:[function(e,t,n){"use strict";cc._RF.push(t,"aecdbxP0iZAkrFXWqa7SId7","BonusProgressView"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../Model/GamePlayModel"),i=cc._decorator,a=i.ccclass,r=i.property,s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.Add=null,t}return __extends(t,e),t.prototype.onLoad=function(){var e=this;this.node.width=680,this.Add.active=!1,o.ScoreCountDownUpdateSignal.inst.addListenerOne(function(t){e.node.width=680*t,e.Add.x=e.node.width-20,e.Add.active=e.node.width>0&&e.node.width<680},this)},__decorate([r(cc.Node)],t.prototype,"Add",void 0),t=__decorate([a],t)}(cc.Component);n.default=s,cc._RF.pop()},{"../../Model/GamePlayModel":"GamePlayModel"}],BreakAnimation:[function(e,t,n){"use strict";cc._RF.push(t,"0b94f3OEERBQJp1naKXMDMO","BreakAnimation"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../../Utils/FrameAniBase"),i=cc._decorator,a=i.ccclass,r=(i.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.play=function(){this.node.opacity=255,e.prototype.play.call(this)},t.prototype.onComplete=function(){},t=__decorate([a],t)}(o.default));n.default=r,cc._RF.pop()},{"../../../Utils/FrameAniBase":"FrameAniBase"}],CelerSDK:[function(e,t,n){"use strict";cc._RF.push(t,"34a72Ol/DRKJb0NyonTxi8g","CelerSDK"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../ToSingleton"),i=e("../LogHandler"),a=e("../Random"),r=e("../../Command/CommonSignal"),s=e("../../Model/PlayModelProxy"),c=e("../../Controller/GameStateController"),l=e("../../Ad/WildAdButton"),u=e("../../Ad/FlyCnicornAd"),h=e("../../Global/GameRule"),p=e("../../TableManager"),d=e("../../table"),g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.alreadySubmit=!1,t.isNewPlayer=!0,t.celerStartCallback=null,t}return __extends(t,e),Object.defineProperty(t.prototype,"MatchID",{get:function(){return this.match.matchId},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"MatchRandomSeed",{get:function(){return this.match.sharedRandomSeed},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"DifficultyLevel",{get:function(){return this.match.difficultyLevel},enumerable:!0,configurable:!0}),t.prototype.init=function(e){this.alreadySubmit=!1,CELER_X&&celerSDK.onStart(this.onCelerStart.bind(this)),CELER_X&&celerSDK.provideScore(function(){return s.PlayModelProxy.inst.getTotalScore()}),this.celerStartCallback=e,i.LogHandler.inst.ready(),CELER_X&&i.LogHandler.inst.initLog(celerSDK.log)},t.prototype.celerXReady=function(){console.log(" invoke celerx.ready() "),CELER_X?celerSDK.ready():this.onCelerStart()},t.prototype.isNew=function(){return this.isNewPlayer},t.prototype.isOnCelerPlatform=function(){return CELER_X},t.prototype.onCelerStart=function(){console.log(" celerx onStart call"),this.match=CELER_X?celerSDK.getMatch():{matchId:"error : can not get id",shouldLaunchTutorial:!0,sharedRandomSeed:Math.random(),difficultyLevel:1,locale:"en_US"},console.log("match id:",this.match.matchId,", seed:",this.match.sharedRandomSeed),0==this.match.difficultyLevel&&(this.match.difficultyLevel=1),a.Random.setRandomSeed(this.match.sharedRandomSeed),s.PlayModelProxy.inst.setTotalTime(h.GetTotalTime()),this.match&&this.match.shouldLaunchTutorial?this.isNewPlayer=!0:this.isNewPlayer=!1,l.HideWildAdButtonSignal.inst.dispatch(),u.RemoveFlyCnicornSignal.inst.dispatch(),this.celerStartCallback&&(this.celerStartCallback(),this.celerStartCallback=null)},t.prototype.defineLan=function(){this.match.locale=this.match.locale||"en_US",lan.set(this.match.locale);var e={},t={},n=null;n=p.TableManager.inst.getAll_En_Data();var o=this.match.locale.split("_")[0].charAt(0).toUpperCase()+this.match.locale.split("_")[0].substring(1);if(p.TableManager.inst["getAll_"+o+"_Data"]&&p.TableManager.inst["getAll_"+o+"_Data"]()&&(n=p.TableManager.inst["getAll_"+o+"_Data"]()),n){for(var i in n){e[(m=n[i]).View]||(e[m.View]={}),e[m.View][m.ID]=m.Text,t[m.View]||(t[m.View]={}),t[m.View][m.ID]={FontSize:m.FontSize,MaxWidth:m.MaxWidth,HorizontalAlign:m.Horizontal,VerticalAlign:m.Vertical,LineHeight:m.LineHeight}}lan.define(this.match.locale,e),lan.defineStyle(this.match.locale,t)}for(var a={},s=0,h=p.TableManager.inst.getRandom(d.Random_ID.SuiJiChi).Pool;s<h.length;s++){var g=h[s],y=p.TableManager.inst.getClass(g).Table,f=null;if(f=p.TableManager.inst["getAll_"+y+"_en_Data"]?p.TableManager.inst["getAll_"+y+"_en_Data"]():null,p.TableManager.inst["getAll_"+y+"_"+o.toLocaleLowerCase()+"_Data"]&&p.TableManager.inst["getAll_"+y+"_"+o.toLocaleLowerCase()+"_Data"]()&&(f=p.TableManager.inst["getAll_"+y+"_"+o.toLocaleLowerCase()+"_Data"]()),f)for(var i in f){var m=f[i];a[g]||(a[g]={}),a[g][m.ID]=m.Name}}lan.define(this.match.locale,a),CELER_X?((1!=celerSDK.hasMethod("showAd")||this.isNewPlayer||this.isIOSWeb)&&(l.HideWildAdButtonSignal.inst.dispatch(),u.RemoveFlyCnicornSignal.inst.dispatch()),celerSDK.onPause(function(){console.log(" on pause "),c.GameStateController.inst.isGameOver()||c.GameStateController.inst.isPause()||r.ShowPauseLayerSignal.inst.dispatch()}),celerSDK.onResume(function(){console.log(" on resume ")})):(cc.game.on(cc.game.EVENT_HIDE,function(){console.log(" on pause "),c.GameStateController.inst.isGameOver()||c.GameStateController.inst.isPause()||r.ShowPauseLayerSignal.inst.dispatch()}),cc.game.on(cc.game.EVENT_SHOW,function(){console.log(" on resume ")}))},t.prototype.submitScore=function(e){this.alreadySubmit||(this.alreadySubmit=!0,console.log(" submit score:",e,", match id:",this.match),CELER_X?celerSDK.submitScore(e):window.location.reload())},Object.defineProperty(t.prototype,"isAndroidWeb",{get:function(){return cc.sys.isMobile&&cc.sys.isBrowser&&cc.sys.os==cc.sys.OS_ANDROID},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isIOSWeb",{get:function(){return cc.sys.isMobile&&cc.sys.isBrowser&&cc.sys.os==cc.sys.OS_IOS},enumerable:!0,configurable:!0}),t}(o.SingleTon());n.CelerSDK=g,cc._RF.pop()},{"../../Ad/FlyCnicornAd":"FlyCnicornAd","../../Ad/WildAdButton":"WildAdButton","../../Command/CommonSignal":"CommonSignal","../../Controller/GameStateController":"GameStateController","../../Global/GameRule":"GameRule","../../Model/PlayModelProxy":"PlayModelProxy","../../TableManager":"TableManager","../../table":"table","../LogHandler":"LogHandler","../Random":"Random","../ToSingleton":"ToSingleton"}],Cocos:[function(e,t,n){"use strict";cc._RF.push(t,"d9795RGCWVCp5Zf4JNywPPb","Cocos"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("./Random");function i(e){return e&&e.getParent&&e.getParent()?e.getParent().convertToWorldSpaceAR(e.position):cc.v2(0,0)}n.GetWorldPosition=i,n.ConvertToNodeSpaceAR=function(e,t){if(!t)return cc.v2(0,0);var n=i(e);return t.convertToNodeSpaceAR(n)},n.Distance=function(e,t){return Math.sqrt((e.x-t.x)*(e.x-t.x)+(e.y-t.y)*(e.y-t.y))},n.AreaOf2CrossRect=function(e,t){var n=e.x,o=e.y,i=e.x+e.width,a=e.y+e.height,r=t.x,s=t.y,c=t.x+t.width,l=t.y+t.height;return Math.max(0,Math.min(i,c)-Math.max(n,r))*Math.max(0,Math.min(a,l)-Math.max(o,s))},n.disOrderArray=function(e){for(var t,n=0;n<e.length;++n){var i=o.Random.randomFloorToInt(0,e.length);t=[e[i],e[n]],e[n]=t[0],e[i]=t[1]}},n.Clamp=function(e,t,n){return Math.max(Math.min(e,t),n)},n.IndexToi=function(e,t){return Math.floor(e/t)},n.IndexToj=function(e,t){return e%t},n.GetPixels=function(e,t,n,o){void 0===n&&(n=10),void 0===o&&(o=10);var i=cc.renderer.device.gl,a=new Uint8Array(n*o*4);return i.readPixels(e,t,n,o,i.RGBA,i.UNSIGNED_BYTE,a),a},n.RotatePoint=function(e,t,n,o){void 0===n&&(n=cc.v2(0,0)),void 0===o&&(o=!0);var i=o?-1:1,a=t/180*Math.PI,r=cc.v2(e.x,e.y);e.x=(r.x-n.x)*Math.cos(i*a)-(r.y-n.y)*Math.sin(i*a)+n.x,e.y=(r.x-n.x)*Math.sin(i*a)+(r.y-n.y)*Math.cos(i*a)+n.y};var a={mul:null};function r(e,t){return e._parent?(e._parent._updateWorldMatrix(),c(e,e._parent._worldMatrix,t)):s(e,t)}function s(e,t){e._updateLocalMatrix();var n=e._contentSize.width,o=e._contentSize.height,i=cc.rect(-e._anchorPoint.x*n,-e._anchorPoint.y*o,n,o),a=i.transformMat4(i,e._matrix);if(!t)return a;var s=r(t);return s.intersects(i)?a=l(a,s.intersection(s,i)):i}function c(e,t,n){e._updateLocalMatrix();var o=e._contentSize.width,i=e._contentSize.height,s=cc.rect(-e._anchorPoint.x*o,-e._anchorPoint.y*i,o,i);if(t=a.mul(e._worldMatrix,t,e._matrix),s.transformMat4(s,t),!n)return s;var c=r(n);return c.intersects(s)?s=l(s,c.intersection(c,s)):s}function l(e,t){var n=e.x,o=e.y,i=(e.width,e.height),a=(t.x,t.y,t.width,t.height);return e.x=n,e.y=o+a,e.height=Math.abs(i-a),e}a.mul=function(e,t,n){var o=t.m00,i=t.m01,a=t.m02,r=t.m03,s=t.m04,c=t.m05,l=t.m06,u=t.m07,h=t.m08,p=t.m09,d=t.m10,g=t.m11,y=t.m12,f=t.m13,m=t.m14,S=t.m15,_=n.m00,b=n.m01,C=n.m02,v=n.m03;return e.m00=_*o+b*s+C*h+v*y,e.m01=_*i+b*c+C*p+v*f,e.m02=_*a+b*l+C*d+v*m,e.m03=_*r+b*u+C*g+v*S,_=n.m04,b=n.m05,C=n.m06,v=n.m07,e.m04=_*o+b*s+C*h+v*y,e.m05=_*i+b*c+C*p+v*f,e.m06=_*a+b*l+C*d+v*m,e.m07=_*r+b*u+C*g+v*S,_=n.m08,b=n.m09,C=n.m10,v=n.m11,e.m08=_*o+b*s+C*h+v*y,e.m09=_*i+b*c+C*p+v*f,e.m10=_*a+b*l+C*d+v*m,e.m11=_*r+b*u+C*g+v*S,_=n.m12,b=n.m13,C=n.m14,v=n.m15,e.m12=_*o+b*s+C*h+v*y,e.m13=_*i+b*c+C*p+v*f,e.m14=_*a+b*l+C*d+v*m,e.m15=_*r+b*u+C*g+v*S,e},n.GetBoxToWorld=r,n.getBoundingBox=s,n.RectSub=l,n.Approx=function(e,t,n){return void 0===n&&(n=1e-6),Math.abs(e-t)<=n},cc._RF.pop()},{"./Random":"Random"}],CommonSignal:[function(e,t,n){"use strict";cc._RF.push(t,"f95914FtRVEIaVFtfSVd+lO","CommonSignal"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../Utils/Signal"),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(o.BaseSignal);n.ShowPauseLayerSignal=i;var a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(o.BaseSignal);n.HidePauseLayerSignal=a;var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(o.BaseSignal);n.GameThemeInit=r;var s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(o.BaseSignal);n.ShowHelpLayerSignal=s;var c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(o.BaseSignal);n.HideHelpLayerSignal=c;var l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(o.BaseSignal);n.OpenResultLayerSignal=l;var u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(o.BaseSignal);n.ShowSubmitSignal=u;var h=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(o.BaseSignal);n.ScoreCountingSignal=h;var p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(o.BaseSignal);n.ButtonClickSignal=p;var d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(o.BaseSignal);n.TimeAnimationStateChanged=d;var g=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(o.BaseSignal);n.UpdateTimeNumber=g;var y=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(o.BaseSignal);n.GameReadySignal=y;var f=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(o.BaseSignal);n.GameStartSignal=f;var m=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(o.BaseSignal);n.GameOverSignal=m;var S=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(o.BaseSignal);n.GamePauseSignal=S;var _=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(o.BaseSignal);n.PlayerScoreChanged=_;var b=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(o.BaseSignal);n.NoviceScoreChanged=b;var C=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(o.BaseSignal);n.CountDownSignal=C,cc._RF.pop()},{"../Utils/Signal":"Signal"}],CompleteView:[function(e,t,n){"use strict";cc._RF.push(t,"ba3d1yfxbBDUoRT1kaH73rI","CompleteView"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../../Command/CommonSignal"),i=e("../../../Controller/GameStateController"),a=e("../../../Controller/ResourceController"),r=e("../Animation/FireWorkAnimation"),s=cc._decorator,c=s.ccclass,l=(s.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),Object.defineProperty(t.prototype,"Font",{get:function(){return this.node.getChildByName("Font").getComponent(cc.Sprite)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Con",{get:function(){return this.node.getChildByName("Con")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"FireWork",{get:function(){return this.node.getChildByName("FireWork")?this.node.getChildByName("FireWork").getComponent(r.default):null},enumerable:!0,configurable:!0}),t.prototype.onLoad=function(){o.GameOverSignal.inst.addListenerOne(this.onGameOver,this),this.Font.node.active=!1,this.Con&&(this.Con.active=!1)},t.prototype.start=function(){this.FireWork&&(this.FireWork.node.active=!1)},t.prototype.onGameOver=function(e){this.Font.node.active=!0;var t=1500;switch(e){case i.RoundEndType.Complete:this.FireWork.node.active=!0,this.Con&&(this.Con.active=!0),this.Font.spriteFrame=a.ResourceController.inst.getAnimationAtlas(a.AnimationType.UI,a.Title.CompleteAni),t=3e3;break;case i.RoundEndType.Over:this.Font.spriteFrame=a.ResourceController.inst.getAnimationAtlas(a.AnimationType.UI,a.Title.Over);break;case i.RoundEndType.TimeUp:this.Font.spriteFrame=a.ResourceController.inst.getAnimationAtlas(a.AnimationType.UI,a.Title.TimeUp);break;case i.RoundEndType.OutOfMove:this.Font.spriteFrame=a.ResourceController.inst.getAnimationAtlas(a.AnimationType.UI,a.Title.OutOfMove)}this.FireWork&&this.FireWork.node.active&&this.FireWork.play(),this.Font.node.active?(this.Font.node.scaleX=0,this.Font.node.runAction(cc.scaleTo(.1,1.2))):this.Con&&(this.Con.scale=0,this.Con.runAction(cc.sequence(cc.scaleTo(.1,1.2),cc.scaleTo(.05,1),cc.delayTime(.15),cc.scaleTo(.1,1)))),setTimeout(function(){o.OpenResultLayerSignal.inst.dispatchOne(e)},t)},t=__decorate([c],t)}(cc.Component));n.default=l,cc._RF.pop()},{"../../../Command/CommonSignal":"CommonSignal","../../../Controller/GameStateController":"GameStateController","../../../Controller/ResourceController":"ResourceController","../Animation/FireWorkAnimation":"FireWorkAnimation"}],EaseBaseView:[function(e,t,n){"use strict";cc._RF.push(t,"fc226Q7q/NHwZUZiG7X+tIZ","EaseBaseView"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../BaseView"),i=cc._decorator,a=i.ccclass,r=(i.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.targetVal=new cc.Vec3(0,0,0),t.startTime=0,t.lastTime=0,t.completeCallback=null,t.callOnStart=!1,t}return __extends(t,e),Object.defineProperty(t.prototype,"CompleteCallback",{get:function(){return this.completeCallback},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"StartTime",{get:function(){return this.startTime},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"LastTime",{get:function(){return this.lastTime},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Target",{get:function(){return this.targetVal},enumerable:!0,configurable:!0}),t.prototype.onLoad=function(){},t.prototype.start=function(){},t.prototype.onStart=function(){},t.prototype.end=function(){null!=this.completeCallback&&(this.onComplete(),this.complete())},t.prototype.startUpdate=function(e,t,n,o){void 0===o&&(o=0),this.callOnStart=!1,this.targetVal=e,this.startTime=Date.now()+1e3*o,this.lastTime=1e3*t,this.completeCallback=n},t.prototype.complete=function(){if(this.startTime=this.lastTime=0,this.completeCallback){var e=this.completeCallback;this.completeCallback=null,e()}},t.prototype.clear=function(){this.startTime=this.lastTime=0},t.prototype.update=function(e){0!=this.startTime&&0!=this.canUpdate()&&(this.isComplete()?(this.onComplete(),this.complete()):this.canStart()&&(0==this.callOnStart&&(this.callOnStart=!0,this.onStart()),this.onStep()))},t.prototype.canStart=function(){return Date.now()>=this.startTime&&0!=this.startTime},t.prototype.isComplete=function(){return Date.now()>=this.startTime+this.lastTime},t.prototype.canUpdate=function(){return console.error("you should override this method."),!0},t.prototype.onStep=function(){},t.prototype.onComplete=function(){},t.prototype.ease=function(e,t){return this.lastTime<=0?t:(t-e)*(Date.now()-this.startTime)/this.lastTime+e},t=__decorate([a],t)}(o.default));n.default=r,cc._RF.pop()},{"../BaseView":"BaseView"}],EffectBase:[function(e,t,n){"use strict";cc._RF.push(t,"626d8q5DuVB5ZWzroHl1X4j","EffectBase"),Object.defineProperty(n,"__esModule",{value:!0});var o,i=e("../../../Factory/GameFactory"),a=e("../../../Model/PlayModelProxy"),r=e("../../../Utils/FrameAniBase"),s=e("../../../Utils/Signal"),c=cc._decorator,l=c.ccclass;c.property;(function(e){e[e.None=0]="None"})(o=n.AniType||(n.AniType={}));var u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(s.BaseSignal);n.OnNodeMovedSignal=u;var h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.id="",t.type=o.None,t.fromIndex=0,t.toIndex=0,t}return __extends(t,e),Object.defineProperty(t.prototype,"ID",{get:function(){return this.id},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Type",{get:function(){return this.type},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"FromIndex",{get:function(){return this.fromIndex},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ToIndex",{get:function(){return this.toIndex},enumerable:!0,configurable:!0}),t.prototype.unuse=function(){this.id="",this.type=o.None,this.node.scale=1,this.node.rotation=0,this.node.width=0,this.node.height=0,this.fromIndex=0,this.toIndex=0,this.node.setAnchorPoint(.5,.5),this.stop(),this.node.getComponent(cc.Sprite).spriteFrame=null,this.node.getComponent(cc.Sprite).type=cc.Sprite.Type.SIMPLE,this.node.getComponent(cc.Sprite).sizeMode=cc.Sprite.SizeMode.RAW},t.prototype.reuse=function(e,t,n,o){void 0===n&&(n=0),void 0===o&&(o=0),this.id=e,this.type=t,this.node.getComponent(cc.Sprite).spriteFrame=null,this.fromIndex=n,this.toIndex=o},t.prototype.onComplete=function(){var e=this;this.node.runAction(cc.sequence(cc.fadeOut(.2),cc.callFunc(function(){e.node.getComponent(cc.Sprite).spriteFrame=null,i.gFactory.putObj("Effect",e.node)})))},t.prototype.onStartPlay=function(){this.node.opacity=255},t.prototype.onLoad=function(){var t=this;e.prototype.onLoad.call(this),u.inst.addListenerTwo(this.onNodeMoved,this),a.NextLevelSignal.inst.addListener(function(){t.node.parent&&(t.node.getComponent(cc.Sprite).spriteFrame=null,i.gFactory.putObj("Effect",t.node))},this)},t.prototype.onNodeMoved=function(e,t){this.ID&&this.ID==e&&this.node.setPosition(t)},t=__decorate([l],t)}(r.default);n.default=h,cc._RF.pop()},{"../../../Factory/GameFactory":"GameFactory","../../../Model/PlayModelProxy":"PlayModelProxy","../../../Utils/FrameAniBase":"FrameAniBase","../../../Utils/Signal":"Signal"}],FireWorkAnimation:[function(e,t,n){"use strict";cc._RF.push(t,"fdcc6mLSFRPvZPIgAxSjpVB","FireWorkAnimation"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../../Utils/FrameAniBase"),i=cc._decorator,a=i.ccclass,r=(i.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onComplete=function(){this.node.runAction(cc.fadeOut(.1))},t.prototype.play=function(){this.node.active=!0,this.node.opacity=255,e.prototype.play.call(this)},t=__decorate([a],t)}(o.default));n.default=r,cc._RF.pop()},{"../../../Utils/FrameAniBase":"FrameAniBase"}],FlyAdCnicornAniamtion:[function(e,t,n){"use strict";cc._RF.push(t,"df82bE3jcpP0bURZ5D33BYC","FlyAdCnicornAniamtion"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../Utils/FrameAniBase"),i=cc._decorator,a=i.ccclass,r=(i.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t=__decorate([a],t)}(o.default));n.default=r,cc._RF.pop()},{"../Utils/FrameAniBase":"FrameAniBase"}],FlyCnicornAd:[function(e,t,n){"use strict";cc._RF.push(t,"36cb0yApqROmqNTDmiukrBP","FlyCnicornAd"),Object.defineProperty(n,"__esModule",{value:!0});var o,i=e("../Utils/Celer/CelerSDK"),a=e("../Utils/Signal"),r=cc._decorator,s=r.ccclass;r.property;(function(e){e[e.Left=0]="Left",e[e.Right=1]="Right"})(o=n.FlyOrigin||(n.FlyOrigin={}));var c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(a.BaseSignal);n.CnicornWatchFailSignal=c;var l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(a.BaseSignal);n.RemoveFlyCnicornSignal=l;var u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(a.BaseSignal);n.FlyCnicornAdDispearSignal=u;var h=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(a.BaseSignal);n.FlyCnicornClickSignal=h;var p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(a.BaseSignal);n.ShowFlyCnicornSignal=p;var d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.initY=0,t}var n;return __extends(t,e),n=t,Object.defineProperty(t.prototype,"Fly",{get:function(){return this.node.getChildByName("Fly")},enumerable:!0,configurable:!0}),t.prototype.reuse=function(e,t){console.log("ShowFlyCnicorn:",o[e]),this.node.opacity=255,this.Fly.opacity=255;var i=0;this.Fly.y=t,e=o.Right,this.Fly.scaleX=-1,this.Fly.x=940,i=-940,this.Fly.once(cc.Node.EventType.TOUCH_END,this.onAddTouch,this),this.Fly.runAction(cc.sequence(cc.moveTo(10,i,this.Fly.y),cc.spawn(cc.fadeOut(2),cc.moveBy(2,376*this.Fly.scaleX,0)),cc.callFunc(function(){u.inst.dispatch(),n.ShowTimeRest=10})))},t.prototype.unuse=function(){},t.prototype.onLoad=function(){var e=this;this.initY=this.Fly.y,l.inst.addOnce(function(){p.inst.removeTarget(e),c.inst.removeTarget(e),e.node.removeFromParent(!0),e.node.destroy()},this),c.inst.addListener(function(){n.ShowTimeRest=10},this),n.ShowTimeRest=10,p.inst.addListenerTwo(function(t,n){console.log(" Show Cnicorn"),e.Fly.getNumberOfRunningActions()>0||e.reuse(o.Right,e.initY)},this),0==i.CelerSDK.inst.isAndroidWeb&&l.inst.dispatch()},t.prototype.onAddTouch=function(e){this.Fly.stopAllActions(),this.Fly.runAction(cc.fadeOut(.2)),h.inst.dispatch()},t.prototype.update=function(e){},t.ShowTimeRest=0,t=n=__decorate([s],t)}(cc.Component);n.default=d,cc._RF.pop()},{"../Utils/Celer/CelerSDK":"CelerSDK","../Utils/Signal":"Signal"}],FrameAniBase:[function(e,t,n){"use strict";cc._RF.push(t,"6298cJI+OZK9J9ZyfrpqPP2","FrameAniBase"),Object.defineProperty(n,"__esModule",{value:!0});var o=cc._decorator,i=o.ccclass,a=o.property,r=o.requireComponent,s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.Frames=null,t.PrefixName="",t.FrameCount=0,t.Interval=.05,t.Priority=0,t.Loop=!1,t.PlayOnLoad=!1,t.currentIndex=0,t.time=0,t.isPlay=!1,t.listener=[],t.complateEvent=[],t}var n;return __extends(t,e),n=t,Object.defineProperty(t.prototype,"Sprite",{get:function(){return this.node.getComponent(cc.Sprite)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Animation",{set:function(e){this.Frames=e},enumerable:!0,configurable:!0}),t.prototype.onFocusInEditor=function(){},t.prototype.onLostFocusInEditor=function(){clearInterval(n.intervalID)},t.prototype.onLoad=function(){this.time=this.Interval,this.isPlay=this.PlayOnLoad},t.prototype.play=function(){this.isPlay=!0,this.currentIndex=0,this.node.opacity=255,this.updateCurrentFrame(),0==this.isPlaying&&this.callEventComplete()},t.prototype.onStartPlay=function(){},t.prototype.playOnLoop=function(){this.Loop=!0,this.play()},t.prototype.playByStep=function(){this.isPlay=!0,this.nextFrame(),this.isPlay=!1},t.prototype.pause=function(){this.isPlay=!1},t.prototype.resume=function(){this.isPlay=!0},t.prototype.stop=function(){this.isPlay=!1,this.currentIndex=0,this.updateCurrentFrame(),this.Loop=!1},t.prototype.updateCurrentFrame=function(){""!=this.PrefixName?this.Sprite.spriteFrame=this.Frames.getSpriteFrame(this.PrefixName+(this.currentIndex+1)):this.Sprite.spriteFrame=this.Frames.getSpriteFrames()[this.currentIndex]},t.prototype.onKeyFrame=function(e){},t.prototype.addKeyEventListener=function(e,t){this.listener.push({callback:e,target:t})},Object.defineProperty(t.prototype,"ListenerCount",{get:function(){return this.listener.length},enumerable:!0,configurable:!0}),t.prototype.clearAllListener=function(){return this.listener.length=0,this},t.prototype.onComplete=function(){this.node.runAction(cc.fadeOut(.2))},t.prototype.callEventFrame=function(){this.onKeyFrame(this.currentIndex);for(var e=0,t=this.listener;e<t.length;e++){var n=t[e];n.callback.apply(n.target,[this.currentIndex,this.__classname__])}},t.prototype.callEventComplete=function(){this.isPlay=!1;for(var e=0,t=this.complateEvent;e<t.length;e++){var n=t[e];n.f.apply(n.target,[this.__classname__])}this.onComplete()},t.prototype.addCompleteEvent=function(e,t){this.complateEvent.push({f:e,target:t})},Object.defineProperty(t.prototype,"TotalFrameCount",{get:function(){return""!=this.PrefixName&&this.FrameCount>0?this.Loop?this.FrameCount:this.FrameCount+1:this.Frames&&this.Frames.getSpriteFrames?this.Frames.getSpriteFrames().length+1:0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"CompleteEventCount",{get:function(){return this.complateEvent.length},enumerable:!0,configurable:!0}),t.prototype.clearCompleteEvent=function(){return this.complateEvent.length=0,this},t.prototype.start=function(){},Object.defineProperty(t.prototype,"isPlaying",{get:function(){if(this.isPlay&&this.Frames&&this.Frames.getSpriteFrames&&this.Frames.getSpriteFrames().length>0){for(var e=0,t=this.getComponents(n);e<t.length;e++){var o=t[e];if(o.Priority>this.Priority&&o.isPlaying)return!1}return!0}return!1},enumerable:!0,configurable:!0}),t.prototype.nextFrame=function(){0!=this.isPlaying?this.Frames&&this.Frames.getSpriteFrames&&this.Frames.getSpriteFrames().length>0&&(0==this.currentIndex&&this.onStartPlay(),this.updateCurrentFrame(),this.callEventFrame(),this.currentIndex=(this.currentIndex+1)%this.TotalFrameCount,0==this.currentIndex&&0==this.Loop&&(this.isPlay=!1,this.callEventComplete())):this.time=this.Interval},t.prototype.update=function(e){this.time>=this.Interval&&(this.time=0,this.nextFrame()),this.time+=e},t.aniName="FrameAniBase",t.intervalID=-1,__decorate([a(cc.SpriteAtlas)],t.prototype,"Frames",void 0),__decorate([a],t.prototype,"PrefixName",void 0),__decorate([a],t.prototype,"FrameCount",void 0),__decorate([a],t.prototype,"Interval",void 0),__decorate([a],t.prototype,"Priority",void 0),__decorate([a],t.prototype,"Loop",void 0),__decorate([a],t.prototype,"PlayOnLoad",void 0),t=n=__decorate([i,r(cc.Sprite)],t)}(cc.Component);n.default=s,cc._RF.pop()},{}],FrontView:[function(e,t,n){"use strict";cc._RF.push(t,"a7fe8WWCZVPgYx/jpZQ6l8q","FrontView"),Object.defineProperty(n,"__esModule",{value:!0});var o=cc._decorator,i=o.ccclass,a=(o.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onLoad=function(){},t.prototype.start=function(){},t.prototype.update=function(e){this.node.parent.scaleX>=0?this.node.scaleX=1:this.node.scaleX=0,this.node.parent.scaleY<0?this.node.scaleY=1:this.node.scaleY=0},t=__decorate([i],t)}(cc.Component));n.default=a,cc._RF.pop()},{}],GameFactory:[function(e,t,n){"use strict";cc._RF.push(t,"93d23kfnY1A76OtZSkIyJ5r","GameFactory"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../Utils/HashMap"),i=function(){function e(e,t,n){this._pool=[],this.totalSize=0,this.initTime=[],this.completeHandler=n,this.template=e,this.totalSize=t,this.hashKey="ObjPool:"+this.template.name+" - "+this.totalSize,this.initPool(t)}return e.prototype.initPool=function(e,t){var n=this;if(void 0===t&&(t=!1),t)for(var o=0;o<e;++o){this.initTime.push(Date.now());var i=cc.instantiate(this.template);this.put(i)}else for(o=0;o<e;++o)this.initTime.push(Date.now()),setTimeout(function(){var e=cc.instantiate(n.template);n.put(e)},o)},e.prototype.size=function(){return this._pool.length},e.prototype.clear=function(){for(var e=this._pool.length,t=0;t<e;++t)this._pool[t].destroy&&this._pool[t].destroy();this._pool.length=0},e.prototype.put=function(e){if(e&&-1===this._pool.indexOf(e)){e.removeFromParent(!1);for(var t=0,n=e.getComponents(cc.Component);t<n.length;t++){var o=n[t];o&&o.unuse&&o.unuse.apply(o)}this._pool.push(e),this.completeHandler&&this.totalSize<=this._pool.length&&(this.completeHandler(),this.completeHandler=null)}},e.prototype.get=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=this._pool.length-1;n<0&&this.initPool(1,!0),n=this._pool.length-1;var o=this._pool[n];this._pool.length=n;for(var i=0,a=o.getComponents(cc.Component);i<a.length;i++){var r=a[i];r&&r.reuse&&r.reuse.apply(r,arguments)}return o},e}(),a=function(){function e(){this.count=0,this.totalCount=0,this.objPool=new o.HashMap,this.startTime=0}return Object.defineProperty(e,"inst",{get:function(){return this.ins?this.ins:this.ins=new e},enumerable:!0,configurable:!0}),e.prototype.init=function(e,t){var n=this;this.doneCallback=e,this.progressCallback=t,this.startTime=Date.now(),cc.loader.loadResDir("prefabs/",cc.Prefab,function(e,t,o){if(e)console.error(" Game Factory init failed:",e);else{n.totalCount=t.length;for(var a=function(e){var o=t[e],a=o.name.split("."),r=a[0],s=a[1]?parseInt(a[1]):30;console.log(" init pool:",r,", count:",s),setTimeout(function(){var e=new i(o,s,n.addCount.bind(n));n.objPool.add(r,e)},5*e)},r=0;r<t.length;r++)a(r)}})},e.prototype.addObject=function(e,t,n){var o=this;return new Promise(function(a,r){cc.loader.loadRes(t,function(t,s){if(t)r(t);else{var c=new i(s,n,function(){a(e)});o.objPool.add(e,c)}})})},e.prototype.addCount=function(){this.count++,this.progressCallback&&this.progressCallback(this.count/this.totalCount),this.count>=this.totalCount&&(console.log(" factory cost time:",(Date.now()-this.startTime).toFixed(2)+"ms"),this.doneCallback&&(this.doneCallback(),this.doneCallback=null))},e.prototype.getObj=function(e){for(var t,n=[],o=1;o<arguments.length;o++)n[o-1]=arguments[o];return this.objPool.has(e)?(t=this.objPool.get(e)).get.apply(t,n):(console.error(" objPool dosen't exists this obj:",e),null)},e.prototype.putObj=function(e,t){if(this.objPool.has(e))return this.objPool.get(e).put(t);console.error(" objPool dosen't exists this obj:",e)},e}();n.gFactory=a.inst,cc._RF.pop()},{"../Utils/HashMap":"HashMap"}],GameLogic:[function(e,t,n){"use strict";cc._RF.push(t,"dcc3dWQyb9Je6+vGzSbnbD2","GameLogic"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../Ad/AdLayer"),i=e("../../AlgorithmUtils/MinimumPotentialLayout/MinPotentialPacker"),a=e("../../Controller/GameStateController"),r=e("../../Global/GameRule"),s=e("../../table"),c=e("../../TableManager"),l=e("../../Utils/Cocos"),u=e("../../Utils/HashMap"),h=e("../../Utils/Signal"),p=e("../../utils/ToSingleton"),d=e("../../View/Test"),g=e("../View/Game/Item"),y=e("../View/Game/ItemRoot"),f=e("../View/UI/Subject"),m=e("../View/UI/SubjectLabel"),S=e("../View/UI/TapCountView"),_=e("./GamePlayModel"),b=e("./ItemModel"),C=e("./TypeModel"),v=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(h.BaseSignal);n.RestartCountSignal=v;var P=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(h.BaseSignal);n.ComboUpdateSignal=P;var T=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.gamePlay=null,t.restartCount=0,t.combo=0,t.types=[],t.wrongCount=0,t.items=new u.HashMap,t.showedItems=new u.HashMap,t}return __extends(t,e),Object.defineProperty(t.prototype,"Types",{get:function(){return this.types},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Combo",{get:function(){return this.combo},set:function(e){this.combo=e,this.combo=Math.min(this.combo,7),P.inst.dispatchOne(this.combo)},enumerable:!0,configurable:!0}),t.prototype.bindGamePlay=function(e){this.gamePlay=e,CELER_X||d.TestReStartSignal.inst.addListener(this.restart,this),o.AdFinishSignal.inst.addListenerOne(this.onAdFinish,this),b.CreateItemNodeSignal.inst.addListenerOne(this.onItemAdd,this),b.RemoveItemSignal.inst.addListenerOne(this.onItemRemove,this)},t.prototype.onItemAdd=function(e){this.showedItems.add(e.ID,e)},t.prototype.onItemRemove=function(e){this.showedItems.remove(e.ID)},t.prototype.initData=function(){console.log("init game logic."),S.UpdateWrongTapCount.inst.dispatchOne(this.wrongCount);for(var e=[],t=0,n=c.TableManager.inst.getRandom(s.Random_ID.SuiJiChi).Pool;t<n.length;t++)for(var o=n[t],i=0,a=c.TableManager.inst.getRandom(o).Pool;i<a.length;i++){var u=a[i];e.push({type:o,subType:u})}for(l.disOrderArray(e);this.types.length<r.GetTotalLevel()*r.GetTypeCount();){var h=e.pop(),p=this.types.length%r.GetTypeCount();console.log("random type:",s.Random_Pool[h.subType],",index:",p),this.types.push(new C.TypeModel(h.type,h.subType,p))}},t.prototype.initItemModel=function(e,t){var n=this,o=i.MinPotentialPacker.inst.packeds(),a=0,r=o.length,s=setInterval(function(){var i=o[a],l=new b.ItemModel(i.ID.split(":")[0],i.Type,i.SubType,i.ExpendPoints,cc.v2(i.Position.x,i.Position.y),i.Rotation,i.ExpendBorder.bot.y-100,i.ExpendBorder.top.y-100,c.TableManager.inst.getClass(i.Type).Group);n.items.add(l.ID,l),e(++a/r),a>=r&&(t(),clearInterval(s))},2)},t.prototype.move=function(e){var t=[];this.items.forEach(function(n,o){o.move(e)&&t.push(o.ID),0});for(var n=0,o=t;n<o.length;n++){var i=o[n];this.items.remove(i)}},t.prototype.checkIsComplete=function(){for(var e=this,t=this.gamePlay.Level*r.GetTypeCount(),n=0;n<r.GetTypeCount();n++){var o=t+n;if(this.Types[o].MatchTimes<r.GetCollectCount())return}f.SubjectAnimationDone.inst.addOnce(function(){e.gamePlay.nextLevel()},this)},t.prototype.checkClick=function(e){var t=this,n=this.gamePlay.Level*r.GetTypeCount(),o=[],i=[],c=[];this.showedItems.forEach(function(l,u){if(u.checkClick(e)){o.push(u.ID);for(var h=!1,p=0;p<r.GetTypeCount();p++){var d=n+p,b=t.Types[d];if(b&&u.SubType==b.SubType)if(h=!0,b.MatchTimes>=r.GetCollectCount())f.SubjectOkSignal.inst.dispatchOne(b.Index);else{b.MatchTimes++,t.checkIsComplete();var C=r.GetScoreScale(t.gamePlay.BonusProgress)*r.ScoreModel.GetScore(s.Random_Pool[b.SubType],!0),v=y.default.ITEM_ROOT;t.gamePlay.addPlayerScore(C,_.ScoreType.Match,1,v.getChildByName(u.ID)),b.MatchTimes>=r.GetCollectCount()&&f.SubjectOkSignal.inst.dispatchTwo(b.Index,!0),t.gamePlay.resetScaleCountDown(),m.UpdateTypeScore.inst.dispatch(),i.push(u.ID),c.push(b.Index)}}0==h&&(t.wrongCount++,g.OnWrongClickSignal.inst.dispatchOne(u),S.UpdateWrongTapCount.inst.dispatchOne(t.wrongCount),t.wrongCount>=r.GetFaultCount()&&a.GameStateController.inst.roundEnd(a.RoundEndType.OutOfMove))}}),g.OnClickSignal.inst.dispatchOne(o);for(var l=0;l<i.length;l++){var u=i[l],h=c[l],p=this.items.get(u);p&&b.RemoveItemSignal.inst.dispatchThree(p,!0,h),this.items.remove(u),this.showedItems.remove(u)}},t.prototype.onAdFinish=function(e){console.log(" ad finish:",e),o.AdType[o.AdType.Sun]},t.prototype.restart=function(e){void 0===e&&(e=!1),console.log("restart:",e),this.restartCount++,v.inst.dispatchOne(this.restartCount)},t}(p.SingleTon());n.GameLogic=T,cc._RF.pop()},{"../../Ad/AdLayer":"AdLayer","../../AlgorithmUtils/MinimumPotentialLayout/MinPotentialPacker":"MinPotentialPacker","../../Controller/GameStateController":"GameStateController","../../Global/GameRule":"GameRule","../../TableManager":"TableManager","../../Utils/Cocos":"Cocos","../../Utils/HashMap":"HashMap","../../Utils/Signal":"Signal","../../View/Test":"Test","../../table":"table","../../utils/ToSingleton":"ToSingleton","../View/Game/Item":"Item","../View/Game/ItemRoot":"ItemRoot","../View/UI/Subject":"Subject","../View/UI/SubjectLabel":"SubjectLabel","../View/UI/TapCountView":"TapCountView","./GamePlayModel":"GamePlayModel","./ItemModel":"ItemModel","./TypeModel":"TypeModel"}],GamePlayModel:[function(e,t,n){"use strict";cc._RF.push(t,"3a3dbMmjXZDlbutv0S4vxKQ","GamePlayModel"),Object.defineProperty(n,"__esModule",{value:!0});var o,i=e("../../Global/Theme"),a=e("../../Global/GameRule"),r=e("../../Command/CommonSignal"),s=e("../../Global/Level"),c=e("../../Utils/Random"),l=e("../../Utils/Signal"),u=e("../View/UI/RevertButtonView"),h=e("../../Controller/GameStateController"),p=e("../View/UI/SubmitLayerView"),d=e("../../Model/PlayModelProxy"),g=e("./GameLogic"),y=e("../../Utils/Cocos"),f=e("../../Utils/HashMap");(function(e){e[e.Match=0]="Match",e[e.TimeBonus=1]="TimeBonus",e[e.PauseCost=2]="PauseCost"})(o=n.ScoreType||(n.ScoreType={}));var m=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(l.BaseSignal);n.ScoreCountDownUpdateSignal=m;var S=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(l.BaseSignal);n.GameTypeInitSignal=S;var _=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(l.BaseSignal);n.RevertButtonStateChangedSignal=_;var b=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(l.BaseSignal);n.UpdateTypeLabelSignal=b;var C=function(){function e(){this.level=0,this.playerScore=0,this.noviceScore=0,this.gameTime=a.GetTotalTime(),this.pauseCount=0,this.pauseScore=0,this.streak=0,this.totalStreak=0,this.maxSteak=0,this.items=new f.HashMap,this.scaleCountDown=a.ScoreBonusCountdown(),this.playerScoreMap={},this.reverts=[],this.init()}return e.prototype.init=function(){g.GameLogic.inst.bindGamePlay(this),u.RevertSignal.inst.addListener(this.revertAction,this),p.EndNowSignal.inst.addListener(this.onEndNow,this),r.GameOverSignal.inst.addListenerOne(function(e){},this),this.resetScaleCountDown()},Object.defineProperty(e.prototype,"Time",{get:function(){return this.gameTime},set:function(e){this.gameTime=e,this.gameTime=Math.max(0,this.gameTime)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"BonusProgress",{get:function(){return this.scaleCountDown/a.ScoreBonusCountdown()},enumerable:!0,configurable:!0}),e.prototype.addScaleCountDown=function(e){this.scaleCountDown>0&&(this.scaleCountDown+=e,this.scaleCountDown=y.Clamp(this.scaleCountDown,a.ScoreBonusCountdown(),0),m.inst.dispatchOne(this.BonusProgress))},e.prototype.resetScaleCountDown=function(){this.scaleCountDown=a.ScoreBonusCountdown(),m.inst.dispatchOne(this.scaleCountDown/a.ScoreBonusCountdown())},Object.defineProperty(e.prototype,"Theme",{get:function(){return this.theme},set:function(e){console.log("set game theme:",i.Theme[e]),this.theme=e,r.GameThemeInit.inst.dispatchOne(this.theme)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Level",{get:function(){return this.level},set:function(e){console.log("set game Level:",e),this.level=e;var t=this.level*a.GetTypeCount();d.NextLevelSignal.inst.dispatchOne(this.level),a.ScoreModel.NextLevel(),b.inst.dispatchOne(t)},enumerable:!0,configurable:!0}),e.prototype.nextLevel=function(){this.Level+1>=a.GetTotalLevel()?h.GameStateController.inst.roundEnd(h.RoundEndType.Complete):this.Level++},Object.defineProperty(e.prototype,"TotalScore",{get:function(){return Math.max(this.Timebonus+this.ScoreSpread+this.playerScore,0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Timebonus",{get:function(){for(var e=0,t=0,n=g.GameLogic.inst.Types;t<n.length;t++){e+=n[t].MatchTimes}return e<=0?0:Math.floor((e/(a.GetCollectCount()*a.GetTypeCount())*7.5+.5)*this.gameTime)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ScoreSpread",{get:function(){return 0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"PlayerScore",{get:function(){return this.playerScore},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"PauseScore",{get:function(){return this.pauseScore},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"NoviceScore",{get:function(){return this.noviceScore},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"TotalCombo",{get:function(){return this.totalStreak},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"PauseCount",{get:function(){return this.pauseCount},enumerable:!0,configurable:!0}),e.prototype.onEndNow=function(){this.checkCompleteScore(),h.GameStateController.inst.roundEnd(h.RoundEndType.Over)},e.prototype.addRevert=function(e){CELER_X&&(this.reverts.length=0),this.reverts.push(e),_.inst.dispatchOne(!0)},e.prototype.revertAction=function(){},e.prototype.checkCompleteScore=function(){},e.prototype.initGametheme=function(){var e=s.Level.getThemeRandomPool(this.Level);this.Theme=e[Math.floor(c.Random.getRandom()*e.length)]},e.prototype.initGameData=function(){console.log("init game data."),this.items.clear(),this.Level=0},e.prototype.addPlayerScore=function(e,t,n,o){if(void 0===n&&(n=1),void 0===o&&(o=null),0!=e){null==this.playerScoreMap[t]&&(this.playerScoreMap[t]=0),this.playerScoreMap[t]+=e;var i=this.playerScore;return this.playerScore+=e,e>0||this.resetCombo(),this.playerScore=Math.max(this.playerScore,0),r.PlayerScoreChanged.inst.dispatchFour(this.playerScore,e,n,o),this.playerScore-i}},e.prototype.addNoviceScore=function(e,t){void 0===t&&(t=1),this.noviceScore+=e,this.noviceScore=Math.max(this.noviceScore,0),r.NoviceScoreChanged.inst.dispatchThree(this.noviceScore,e,t)},e.prototype.getScoreByType=function(e){return"number"!=typeof this.playerScoreMap[e]?0:this.playerScoreMap[e]},e.prototype.addPauseCount=function(){this.pauseCount++,console.log("pause count:",this.pauseCount),this.pauseCount>a.FreePauseLimit&&this.addPlayerScore(-a.GetScoreByType(o.PauseCost),o.PauseCost)},e.prototype.resetCombo=function(){this.streak=0},e.prototype.addStreak=function(){this.streak++,this.totalStreak++,this.maxSteak=Math.max(this.maxSteak,this.streak)},e.prototype.dump=function(){},e}();n.GamePlayModel=C,cc._RF.pop()},{"../../Command/CommonSignal":"CommonSignal","../../Controller/GameStateController":"GameStateController","../../Global/GameRule":"GameRule","../../Global/Level":"Level","../../Global/Theme":"Theme","../../Model/PlayModelProxy":"PlayModelProxy","../../Utils/Cocos":"Cocos","../../Utils/HashMap":"HashMap","../../Utils/Random":"Random","../../Utils/Signal":"Signal","../View/UI/RevertButtonView":"RevertButtonView","../View/UI/SubmitLayerView":"SubmitLayerView","./GameLogic":"GameLogic"}],GamePlaySignal:[function(e,t,n){"use strict";cc._RF.push(t,"6a923XZO3BHe6UfcoANFeWX","GamePlaySignal"),Object.defineProperty(n,"__esModule",{value:!0});var o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(e("../../Utils/Signal").BaseSignal);n.SubmitButtonClickSignal=o,cc._RF.pop()},{"../../Utils/Signal":"Signal"}],GameRecorder:[function(e,t,n){"use strict";cc._RF.push(t,"46f2dagdDRJBLTWeuQLW3r/","GameRecorder"),Object.defineProperty(n,"__esModule",{value:!0});var o="http://192.168.100.69:2021/",i=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.RATE=6,t.frameCount=0,t}return __extends(t,e),t.prototype.init=function(){var e=this;CELER_X||cc.sys.isMobile||this.sendRequest(o,"Login").then(function(t){console.log("response:",t),e.register()}).catch(function(e){console.warn("err:",e)})},t.prototype.register=function(){cc.director.on(cc.Director.EVENT_AFTER_DRAW,this.onGameDrawed,this)},t.prototype.onGameDrawed=function(){if(this.frameCount++,!(this.frameCount<this.RATE)){this.frameCount=0;var e=document.getElementsByTagName("canvas")[0];this.sendRequest(o+"capture",e.toDataURL("image/jpeg",.1))}},t.prototype.sendRequest=function(e,t){return new Promise(function(n,o){var i=cc.loader.getXMLHttpRequest();i.onreadystatechange=function(){i.readyState==XMLHttpRequest.DONE&&(i.status>=200&&i.status<300?n(i.responseText):o(i.status))},i.timeout=5e3,i.open("POST",e),i.send(t)})},t}(e("../utils/ToSingleton").SingleTon());n.GameRecorder=i,cc._RF.pop()},{"../utils/ToSingleton":"ToSingleton"}],GameRule:[function(e,t,n){"use strict";cc._RF.push(t,"58c53me7vtEdKVK7W6RnNQo","GameRule"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../GamePlay/Model/GamePlayModel");function i(){return 120}n.DrawDebug=!1,n.FreePauseLimit=3,n.GetTotalTime=i,n.GetScoreByType=function(e){switch(e){case o.ScoreType.PauseCost:return 100}return 0},n.GetScoreScale=function(e){return e>.85?2:e>.4?1.5:e>0?1.2:1};var a=function(){function e(){}return e.GetScore=function(e,t){return void 0===t&&(t=!1),null==this.lastType?(t&&(this.lastType=e),50):this.lastType==e?50:(t&&(this.lastType=e),60)},e.NextLevel=function(){this.lastType=null},e.lastType=null,e}();function r(){return 50/30}function s(){return 80}n.ScoreModel=a,n.GetTotalLevel=function(){return 3},n.GetTypeCount=function(){return 3},n.GetCollectCount=function(){return 5},n.GetFaultCount=function(){return 5},n.ScoreBonusCountdown=function(){return 3},n.DoublePercent=function(){return.85},n.OneDa5Percent=function(){return.6},n.OneDa2Percent=function(){return 0},n.MapSpeedUpScale=r,n.StartSpeed=s,n.GetTotalMapHeight=function(){return 23520},n.CountPerLevelFloor=8,cc._RF.pop()},{"../GamePlay/Model/GamePlayModel":"GamePlayModel"}],GameStateController:[function(e,t,n){"use strict";cc._RF.push(t,"b768b1DCFpC4aef+tHUAH/Y","GameStateController"),Object.defineProperty(n,"__esModule",{value:!0});var o,i=e("../Utils/ToSingleton"),a=e("../Command/CommonSignal"),r=e("../Model/PlayModelProxy");(function(e){e[e.Complete=0]="Complete",e[e.Over=1]="Over",e[e.TimeUp=2]="TimeUp",e[e.OutOfMove=3]="OutOfMove"})(o=n.RoundEndType||(n.RoundEndType={}));var s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.pauseCount=0,t.roundstart=!1,t.isReady=!1,t.isOver=!1,t.currentRound=0,t.onResumeCallbacks=[],t}return __extends(t,e),t.prototype.start=function(){this.pauseCount=0},t.prototype.canStart=function(){return this.isReady},t.prototype.roundStart=function(){this.isOver||(console.log(" round start:",++this.currentRound),this.roundstart=!0)},t.prototype.roundEnd=function(e){console.log("round end :",o[e]),this.roundstart=!1,this.isOver=!0,a.GameOverSignal.inst.dispatchOne(e)},t.prototype.isRoundStart=function(){return this.roundstart},t.prototype.pause=function(e){void 0===e&&(e=!1),0==this.isPause()&&(this.onResumeCallbacks.length=0,a.GamePauseSignal.inst.dispatch(),e||this.onResumeCallbacks.push(function(){r.PlayModelProxy.inst.addPauseCount()})),this.pauseCount++},t.prototype.testEndComplete=function(){this.roundEnd(o.Complete)},t.prototype.testEndTimeUp=function(){r.PlayModelProxy.inst.addGameTime(-1e12)},t.prototype.clearResumeCallback=function(){this.onResumeCallbacks.length=0},t.prototype.resume=function(){if(this.pauseCount--,console.assert(this.pauseCount>=0," pause count smaller than 0!!!"),this.pauseCount=Math.max(this.pauseCount,0),this.pauseCount<=0){for(var e=0,t=this.onResumeCallbacks;e<t.length;e++){(0,t[e])()}this.onResumeCallbacks.length=0}},t.prototype.isPause=function(){return this.pauseCount>0},t.prototype.addResumeCallback=function(e){this.onResumeCallbacks||(this.onResumeCallbacks=[]),this.onResumeCallbacks.push(e)},t.prototype.isGameOver=function(){return this.isOver},t}(i.SingleTon());n.GameStateController=s,!CELER_X&&(window.GameState=s.inst),cc._RF.pop()},{"../Command/CommonSignal":"CommonSignal","../Model/PlayModelProxy":"PlayModelProxy","../Utils/ToSingleton":"ToSingleton"}],GeometryPolygon:[function(e,t,n){"use strict";cc._RF.push(t,"be6e5c558tCA4kc1f7sk46v","GeometryPolygon"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../Utils/Cocos");function i(e){if(e.length<=2)return 0;for(var t=0,n=0;n<e.length;++n){var o=(n+1)%e.length;t+=e[n].x*e[o].y,t-=e[n].y*e[o].x}return.5*Math.abs(t)}function a(e,t){for(var n=[],o=0,i=0,a=t;i<a.length;i++){var r=a[i];if(r.x==e.x&&r.y==e.y){n=n.concat(t.slice(o+1,t.length-1));break}n.push(r),o++}return cc.Intersection.pointInPolygon(e,n)}function r(e,t,n,o){var i=(t.y-e.y)*(o.x-n.x)-(e.x-t.x)*(n.y-o.y);if(0===i)return null;var a=((t.x-e.x)*(o.x-n.x)*(n.y-e.y)+(t.y-e.y)*(o.x-n.x)*e.x-(o.y-n.y)*(t.x-e.x)*n.x)/i,r=-((t.y-e.y)*(o.y-n.y)*(n.x-e.x)+(t.x-e.x)*(o.y-n.y)*e.y-(o.x-n.x)*(t.y-e.y)*n.y)/i;return(a-e.x)*(a-t.x)<=0&&(r-e.y)*(r-t.y)<=0&&(a-n.x)*(a-o.x)<=0&&(r-n.y)*(r-o.y)<=0?cc.v2(a,r):null}n.polygonArea=i,n.concaveJudgement=a,n.segementIntersection=r,n.intersectPolygon=function(e,t){for(var n=new s([],"",null,null),o=0,i=e.ExpendPoints;o<i.length;o++){var a=i[o];cc.Intersection.pointInPolygon(a,t.Points)&&n.addPoint(a)}for(var c=0,l=t.ExpendPoints;c<l.length;c++)a=l[c],cc.Intersection.pointInPolygon(a,e.Points)&&n.addPoint(a);for(var u=0;u<e.ExpendPoints.length;++u)for(var h=e.ExpendPoints[u],p=e.ExpendPoints[(u+1)%e.ExpendPoints.length],d=0;d<t.ExpendPoints.length;++d){var g=r(h,p,t.ExpendPoints[d],t.ExpendPoints[(d+1)%t.ExpendPoints.length]);g&&n.addPoint(g)}return n.update(),n.orderByPointAngle(),n.Points.length>0?n:null};var s=function(){function e(e,t,n,o,i){void 0===t&&(t=""),void 0===i&&(i=!0),this.isUpdate=!1,this.originPoints=[],this.originPointsBackup=[],this.originBoundingBox=cc.rect(0,0,0,0),this.currentPoints=[],this.currentBoundingBox=cc.rect(0,0,0,0),this.expendOriginPoints=[],this.expendCurrentPoints=[],this.expendBoundingBox=cc.rect(0,0,0,0),this.area=0,this.center=cc.v2(0,0),this.originCenter=cc.v2(0,0),this.position=cc.v2(0,0),this.rotation=0,this.id="",this.expendSize=null,this.inertia=0,this.border={top:cc.v2(0,cc.macro.MIN_ZINDEX),bot:cc.v2(0,cc.macro.MAX_ZINDEX),left:cc.v2(cc.macro.MAX_ZINDEX,0),right:cc.v2(cc.macro.MIN_ZINDEX,0)},this.expendBorder={top:cc.v2(0,cc.macro.MIN_ZINDEX),bot:cc.v2(0,cc.macro.MAX_ZINDEX),left:cc.v2(cc.macro.MAX_ZINDEX,0),right:cc.v2(cc.macro.MIN_ZINDEX,0)},this.originBorder={top:cc.v2(0,cc.macro.MIN_ZINDEX),bot:cc.v2(0,cc.macro.MAX_ZINDEX),left:cc.v2(cc.macro.MAX_ZINDEX,0),right:cc.v2(cc.macro.MIN_ZINDEX,0)},this.hasClearConcave=!1,this.type=n,this.subType=o,this.id=t;for(var a=0,r=e;a<r.length;a++){var s=r[a];this.originPoints.push(cc.v2(s.x,s.y)),this.originPointsBackup.push(cc.v2(s.x,s.y))}i?this.clearConcavePoints():this.update(),this.inertia=this.getInertia()}return Object.defineProperty(e.prototype,"SubType",{get:function(){return this.subType},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Type",{get:function(){return this.type},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Inertia",{get:function(){return this.inertia},enumerable:!0,configurable:!0}),e.prototype.getInertia=function(){for(var e,t,n,o=0,i=0,a=this.Points,r=0;r<a.length;r++)e=a[r].sub(this.position,e),t=a[(r+1)%a.length].sub(this.position,t),o+=(n=Math.abs(e.cross(t)))*(e.dot(e)+e.dot(t)+t.dot(t)),i+=n;return 1/6*(o/i)},e.prototype.addPoint=function(e,t){void 0===t&&(t=!1),this.hasClearConcave=!1,this.originPoints.push(e),t&&this.update()},e.prototype.updateOriginCenter=function(){this.originCenter=cc.v2(0,0);for(var e=this.OriginPoints,t=0;t<e.length;t++)this.originCenter.x+=e[t].x,this.originCenter.y+=e[t].y;this.originCenter.x/=e.length,this.originCenter.y/=e.length},e.prototype.clearConcavePoints=function(){if(!this.hasClearConcave){for(;;){for(var e=0,t=0;t<this.originPoints.length;t++){a(this.originPoints[t],this.originPoints)&&(e++,this.originPoints.splice(t,1),t--)}if(0==e)break}this.hasClearConcave=!0,this.update()}},e.prototype.update=function(){this.updateOriginBorder(),this.updateOriginCenter(),this.updatePoints(),this.area=i(this.originPoints)},e.prototype.rotateByAroundPoint=function(e,t){this.rotation=0;for(var n=[],i=0,a=this.currentPoints;i<a.length;i++){var r=a[i],s=cc.v2(r.x,r.y);o.RotatePoint(s,e,t),n.push(s)}null!=this.expendSize&&this.expend()},e.prototype.moveBy=function(e,t){this.position.x+=e,this.position.y+=t,this.updatePoints(),null!=this.expendSize&&this.expend()},e.prototype.moveTo=function(e,t){this.position.x=e,this.position.y=t,this.updatePoints(),null!=this.expendSize&&this.expend()},e.prototype.rotateTo=function(e){this.rotation=e,this.updatePoints(),null!=this.expendSize&&this.expend()},e.prototype.rotateBy=function(e){this.rotation+=e,this.updatePoints(),null!=this.expendSize&&this.expend()},e.prototype.expend=function(e){null!=e?this.expendSize=e:e=this.expendSize||0,this.clearConcavePoints(),this.expendCurrentPoints.length=0;for(var t=0;t<this.Points.length;t++){var n=this.Points[t],o=cc.v2(0,0);if(n.x==this.center.x)o.x=n.x,n.y>this.center.y?o.y=n.y+e:o.y=n.y-e;else if(n.y==this.center.y)o.y=n.y,n.x>this.center.x?o.x=n.x+e:o.x=n.x-e;else{var i=(n.y-this.center.y)/(n.x-this.center.x),a=Math.atan(i);n.x>this.center.x?o.x=n.x+Math.abs(Math.cos(a))*e:o.x=n.x-Math.abs(Math.cos(a))*e,n.y>this.center.y?o.y=n.y+Math.abs(Math.sin(a))*e:o.y=n.y-Math.abs(Math.sin(a))*e}this.expendCurrentPoints.push(o)}this.updateExpendBorder(),this.expendOriginPoints.length=0;for(var r=0;r<this.OriginPoints.length;r++){n=this.OriginPoints[r],o=cc.v2(0,0);if(n.x==this.originCenter.x)o.x=n.x,n.y>this.originCenter.y?o.y=n.y+e:o.y=n.y-e;else if(n.y==this.originCenter.y)o.y=n.y,n.x>this.originCenter.x?o.x=n.x+e:o.x=n.x-e;else{i=(n.y-this.originCenter.y)/(n.x-this.originCenter.x),a=Math.atan(i);n.x<this.originCenter.x?o.x=n.x-Math.abs(Math.cos(a))*e:o.x=n.x+Math.abs(Math.cos(a))*e,n.y<this.originCenter.y?o.y=n.y-Math.abs(Math.sin(a))*e:o.y=n.y+Math.abs(Math.sin(a))*e}this.expendOriginPoints.push(o)}},e.prototype.resetTransform=function(){this.position.x=0,this.position.y=0,this.rotation=0,this.updatePoints(),null!=this.expendSize&&this.expend()},e.prototype.updateOriginBorder=function(){this.originBorder={top:cc.v2(0,cc.macro.MIN_ZINDEX),bot:cc.v2(0,cc.macro.MAX_ZINDEX),left:cc.v2(cc.macro.MAX_ZINDEX,0),right:cc.v2(cc.macro.MIN_ZINDEX,0)};for(var e=0,t=this.OriginPoints;e<t.length;e++){var n=t[e];this.originBorder.top.y<n.y&&(this.originBorder.top=cc.v2(n.x,n.y)),this.originBorder.bot.y>n.y&&(this.originBorder.bot=cc.v2(n.x,n.y)),this.originBorder.left.x>n.x&&(this.originBorder.left=cc.v2(n.x,n.y)),this.originBorder.right.x<n.x&&(this.originBorder.right=cc.v2(n.x,n.y))}this.originBoundingBox.x=this.originBorder.left.x,this.originBoundingBox.y=this.originBorder.bot.y,this.originBoundingBox.width=Math.abs(this.originBorder.right.x-this.originBorder.left.x),this.originBoundingBox.height=Math.abs(this.originBorder.top.y-this.originBorder.bot.y)},Object.defineProperty(e.prototype,"OriginConcavePoints",{get:function(){return this.originPointsBackup},enumerable:!0,configurable:!0}),e.prototype.updateBorder=function(){this.border={top:cc.v2(0,cc.macro.MIN_ZINDEX),bot:cc.v2(0,cc.macro.MAX_ZINDEX),left:cc.v2(cc.macro.MAX_ZINDEX,0),right:cc.v2(cc.macro.MIN_ZINDEX,0)};for(var e=0,t=this.Points;e<t.length;e++){var n=t[e];this.border.top.y<n.y&&(this.border.top=cc.v2(n.x,n.y)),this.border.bot.y>n.y&&(this.border.bot=cc.v2(n.x,n.y)),this.border.left.x>n.x&&(this.border.left=cc.v2(n.x,n.y)),this.border.right.x<n.x&&(this.border.right=cc.v2(n.x,n.y))}this.currentBoundingBox.x=this.border.left.x,this.currentBoundingBox.y=this.border.bot.y,this.currentBoundingBox.width=Math.abs(this.border.right.x-this.border.left.x),this.currentBoundingBox.height=Math.abs(this.border.top.y-this.border.bot.y)},e.prototype.updateExpendBorder=function(){this.expendBorder={top:cc.v2(0,cc.macro.MIN_ZINDEX),bot:cc.v2(0,cc.macro.MAX_ZINDEX),left:cc.v2(cc.macro.MAX_ZINDEX,0),right:cc.v2(cc.macro.MIN_ZINDEX,0)};for(var e=0,t=this.expendCurrentPoints;e<t.length;e++){var n=t[e];this.expendBorder.top.y<n.y&&(this.expendBorder.top=cc.v2(n.x,n.y)),this.expendBorder.bot.y>n.y&&(this.expendBorder.bot=cc.v2(n.x,n.y)),this.expendBorder.left.x>n.x&&(this.expendBorder.left=cc.v2(n.x,n.y)),this.expendBorder.right.x<n.x&&(this.expendBorder.right=cc.v2(n.x,n.y))}this.expendBoundingBox.x=this.expendBorder.left.x,this.expendBoundingBox.y=this.expendBorder.bot.y,this.expendBoundingBox.width=Math.abs(this.expendBorder.right.x-this.expendBorder.left.x),this.expendBoundingBox.height=Math.abs(this.expendBorder.top.y-this.expendBorder.bot.y)},Object.defineProperty(e.prototype,"ExpendBorder",{get:function(){return this.expendBorder},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ExpendBox",{get:function(){return this.expendBoundingBox},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ExpendBoxPoints",{get:function(){var e=this.expendBoundingBox;return[cc.v2(e.x,e.y),cc.v2(e.x+e.width,e.y),cc.v2(e.x+e.width,e.y+e.height),cc.v2(e.x,e.y+e.height)]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Border",{get:function(){return this.border},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"OriginBorder",{get:function(){return this.originBorder},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ID",{get:function(){return this.id},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Points",{get:function(){return this.currentPoints},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"OriginPoints",{get:function(){return this.originPoints},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ExpendPoints",{get:function(){return this.expendCurrentPoints.length<=0&&this.expend(),this.expendCurrentPoints},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ExpendOrginPoints",{get:function(){return this.expendOriginPoints.length<=0&&this.expend(),this.expendOriginPoints},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Area",{get:function(){return this.area},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Center",{get:function(){return this.center},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"OriginCenter",{get:function(){return this.originCenter},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Rotation",{get:function(){return this.rotation},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Position",{get:function(){return this.position},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"BoundingBox",{get:function(){return this.currentBoundingBox},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"OriginBoundingBox",{get:function(){return this.originBoundingBox},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"BoundingPoints",{get:function(){var e=this.currentBoundingBox;return[cc.v2(e.x,e.y),cc.v2(e.x+e.width,e.y),cc.v2(e.x+e.width,e.y+e.height),cc.v2(e.x,e.y+e.height)]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"OriginBoundingPoints",{get:function(){var e=this.originBoundingBox;return[cc.v2(e.x,e.y),cc.v2(e.x+e.width,e.y),cc.v2(e.x+e.width,e.y+e.height),cc.v2(e.x,e.y+e.height)]},enumerable:!0,configurable:!0}),e.prototype.updatePoints=function(){this.currentPoints.length=0;for(var e=0,t=this.originPoints;e<t.length;e++){var n=t[e],i=cc.v2(n.x,n.y);o.RotatePoint(i,this.rotation),i.addSelf(this.position),this.currentPoints.push(i)}this.center=cc.v2(0,0);for(var a=this.currentPoints,r=0;r<a.length;r++)this.center.x+=a[r].x,this.center.y+=a[r].y;this.center.x/=a.length,this.center.y/=a.length,this.updateBorder()},e.prototype.orderByPointAngle=function(){},e.prototype.getAnnealingValue=function(e){this.rotateTo(e);for(var t=cc.v2(1e4,1e4),n=0,o=this.Points;n<o.length;n++){var i=o[n];i.y<t.y&&(t.x=i.x,t.y=i.y)}return this.center.y-t.y},Object.defineProperty(e.prototype,"GravityH",{get:function(){return this.center.y-this.expendBorder.bot.y},enumerable:!0,configurable:!0}),e}();n.GeometryPolygon=s,cc._RF.pop()},{"../../Utils/Cocos":"Cocos"}],GlobalSingleTouchMediator:[function(e,t,n){"use strict";cc._RF.push(t,"50484YTu+lAFp2acGVLgU7t","GlobalSingleTouchMediator"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../Controller/GameStateController"),i=e("../../Utils/Signal"),a=e("../SingleTouchMediator"),r=cc._decorator,s=r.ccclass,c=(r.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(i.BaseSignal));n.ShowTipSignal=c;var l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.time=0,t}return __extends(t,e),t.prototype.onRegister=function(){e.prototype.onRegister.call(this),this.node._touchListener.swallowTouches=!1},t.prototype.onTouchStart=function(e){o.GameStateController.inst.canStart()&&0==o.GameStateController.inst.isRoundStart()&&o.GameStateController.inst.roundStart(),this.time=0},t.prototype.onTouchMove=function(e){this.time=0},t.prototype.onTouchEnd=function(e){this.time=0},t.prototype.onTouchCancel=function(e){this.time=0},t.prototype.update=function(e){this.time+=e,this.time>=3&&(this.time=0,c.inst.dispatch())},t=__decorate([s],t)}(a.default);n.default=l,cc._RF.pop()},{"../../Controller/GameStateController":"GameStateController","../../Utils/Signal":"Signal","../SingleTouchMediator":"SingleTouchMediator"}],GlobalSingleTouchView:[function(e,t,n){"use strict";cc._RF.push(t,"4cc97bBcEZPu7Haxk0HdV9+","GlobalSingleTouchView"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../BaseView"),i=e("./GlobalSingleTouchMediator"),a=cc._decorator,r=a.ccclass,s=(a.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onLoad=function(){this.BindMedaitor(i.default)},t.prototype.start=function(){},t=__decorate([r],t)}(o.default));n.default=s,cc._RF.pop()},{"../BaseView":"BaseView","./GlobalSingleTouchMediator":"GlobalSingleTouchMediator"}],GridUtil:[function(e,t,n){"use strict";cc._RF.push(t,"8ed47lZW5tLWYuOMXgo3GBi","GridUtil"),Object.defineProperty(n,"__esModule",{value:!0}),n.GridRange={i:{max:11,min:0},j:{max:8,min:0}};var o=function(){function e(){}return e.copyGrid=function(e){return{i:e.i,j:e.j}},e.GetHorizontalWayByOrigin=function(e){for(var t=[],o={i:e.i,j:e.j};--o.j>=n.GridRange.j.min;)t.push(this.copyGrid(o));for(var i={i:e.i,j:e.j};++i.j<=n.GridRange.j.max;)t.push(this.copyGrid(i));return t},e.GetVerticalWayByOrigin=function(e){for(var t=[],o={i:e.i,j:e.j};++o.i<=n.GridRange.i.max;)t.push(this.copyGrid(o));for(var i={i:e.i,j:e.j};--i.i>=n.GridRange.i.min;)t.push(this.copyGrid(i));return t},e.GetDiagonalWayByOrigin=function(e){for(var t=[],o={i:e.i,j:e.j};++o.i<=n.GridRange.i.max&&--o.j>=n.GridRange.j.min;)t.push(this.copyGrid(o));for(var i={i:e.i,j:e.j};++i.i<=n.GridRange.i.max&&++i.j<=n.GridRange.j.max;)t.push(this.copyGrid(i));for(var a={i:e.i,j:e.j};--a.i>=n.GridRange.i.min&&--a.j>=n.GridRange.j.min;)t.push(this.copyGrid(a));for(var r={i:e.i,j:e.j};--r.i>=n.GridRange.i.min&&++r.j<=n.GridRange.j.max;)t.push(this.copyGrid(r));return t},e.GetSquaredWayByOrigin=function(e){for(var t=[],o={i:e.i,j:e.j};++o.i<=n.GridRange.i.max&&--o.j>=n.GridRange.j.min;){t.push(this.copyGrid(o));break}for(var i={i:e.i,j:e.j};++i.i<=n.GridRange.i.max&&++i.j<=n.GridRange.j.max;){t.push(this.copyGrid(i));break}for(var a={i:e.i,j:e.j};--a.i>=n.GridRange.i.min&&--a.j>=n.GridRange.j.min;){t.push(this.copyGrid(a));break}for(var r={i:e.i,j:e.j};--r.i>=n.GridRange.i.min&&++r.j<=n.GridRange.j.max;){t.push(this.copyGrid(r));break}for(var s={i:e.i,j:e.j};++s.j<=n.GridRange.j.max;){t.push(this.copyGrid(s));break}for(var c={i:e.i,j:e.j};--c.j>=n.GridRange.j.min;){t.push(this.copyGrid(c));break}for(var l={i:e.i,j:e.j};--l.i>=n.GridRange.i.min;){t.push(this.copyGrid(l));break}for(var u={i:e.i,j:e.j};++u.i<=n.GridRange.i.max;){t.push(this.copyGrid(u));break}return t},e}();n.GridUtil=o,cc._RF.pop()},{}],GridView:[function(e,t,n){"use strict";cc._RF.push(t,"c7521tIJNJP77pm97e86HHj","GridView"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../Controller/PolygonPacker"),i=e("../Factory/GameFactory"),a=e("../GamePlay/View/Game/PrefabBaseView"),r=cc._decorator,s=r.ccclass,c=(r.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onReuse=function(){},t.prototype.onUnuse=function(){this.model=null,this.node.color=cc.Color.WHITE},t.prototype.onLoad=function(){var e=this;o.GridEmployStateChangedSignal.inst.addListenerOne(function(t){if(e.model&&e.model.ID==t.ID)switch(e.model.State){case o.EmployState.Abandoned:e.node.color=cc.Color.ORANGE;break;case o.EmployState.Free:e.node.color=cc.Color.WHITE;break;case o.EmployState.Employed:e.node.color=cc.Color.YELLOW}},this),o.RemoveGridSignal.inst.addListenerOne(function(t){e.model&&e.model.ID==t.ID&&i.gFactory.putObj("Grid",e.node)},this)},t=__decorate([s],t)}(a.default));n.default=c,cc._RF.pop()},{"../Controller/PolygonPacker":"PolygonPacker","../Factory/GameFactory":"GameFactory","../GamePlay/View/Game/PrefabBaseView":"PrefabBaseView"}],HashMap:[function(e,t,n){"use strict";cc._RF.push(t,"4b0e7DzcRNJnZXTYCWgDaDU","HashMap"),Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(){this._list=new Array,this.clear()}return e.prototype.getIndexByKey=function(e){for(var t=this._list.length,n=0;n<t;n++){if(this._list[n].key==e)return n}return-1},e.prototype.keyOf=function(e){for(var t=this._list.length,n=0;n<t;n++){var o=this._list[n];if(o.value.hashKey&&e.hashKey&&o.value.hashKey===e.hashKey||o.value==e)return o.key}return null},Object.defineProperty(e.prototype,"keys",{get:function(){for(var e=new Array,t=0,n=this._list;t<n.length;t++){var o=n[t];o&&e.push(o.key)}return e},enumerable:!0,configurable:!0}),e.prototype.add=function(e,t){var n={key:e,value:t},o=this.getIndexByKey(e);-1!=o?this._list[o]=n:this._list.push(n)},Object.defineProperty(e.prototype,"values",{get:function(){return this._list},enumerable:!0,configurable:!0}),e.prototype.remove=function(e){var t=this.getIndexByKey(e);if(-1!=t){var n=this._list[t];return this._list.splice(t,1),n}return null},e.prototype.has=function(e){return-1!=this.getIndexByKey(e)},e.prototype.get=function(e){var t=this.getIndexByKey(e);return-1!=t?this._list[t].value:null},Object.defineProperty(e.prototype,"length",{get:function(){return this._list.length},enumerable:!0,configurable:!0}),e.prototype.sort=function(e){this._list.sort(e)},e.prototype.forEachKeyValue=function(e){for(var t=this._list.length,n=0;n<t;n++){e(this._list[n])}},e.prototype.forEach=function(e){for(var t=this._list.length,n=0;n<t;n++){var o=this._list[n];e(o.key,o.value)}},e.prototype.clear=function(){this._list=[]},e}();n.HashMap=o,cc._RF.pop()},{}],HelpButtonView:[function(e,t,n){"use strict";cc._RF.push(t,"55938+NxDZMXZHVR36gYzbo","HelpButtonView"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../../Command/CommonSignal"),i=e("../../../Controller/GameStateController"),a=e("../../../View/SingleTouchView"),r=cc._decorator,s=r.ccclass,c=(r.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onTouchEnd=function(){i.GameStateController.inst.isGameOver()||(o.ShowHelpLayerSignal.inst.dispatch(),o.ButtonClickSignal.inst.dispatch())},t=__decorate([s],t)}(a.default));n.default=c,cc._RF.pop()},{"../../../Command/CommonSignal":"CommonSignal","../../../Controller/GameStateController":"GameStateController","../../../View/SingleTouchView":"SingleTouchView"}],HelpLabelView:[function(e,t,n){"use strict";cc._RF.push(t,"35611eOFW5NW4kAL24WQXOx","HelpLabelView"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../../Command/CommonSignal"),i=e("../../../Global/GameRule"),a=e("../../../table"),r=e("../../../Tutorial/TutorialView"),s=cc._decorator,c=s.ccclass,l=(s.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),Object.defineProperty(t.prototype,"Label",{get:function(){return this.getComponent(cc.RichText)},enumerable:!0,configurable:!0}),t.prototype.onLoad=function(){o.ShowHelpLayerSignal.inst.addListener(this.renderText,this),r.ShowTutorialSignal.inst.addListener(this.renderText,this)},t.prototype.renderText=function(){var e=parseInt(this.node.name),t=[];switch(e){case 0:t=[i.GetTypeCount(),i.GetTypeCount()];break;case 1:t=[i.GetFaultCount(),i.GetFaultCount(),i.GetTotalLevel()]}this.Label.string=lan.t(a.En_View.BangZhuJieMian,a.En_ID.BangZhuYeMian1+e,t)},t=__decorate([c],t)}(cc.Component));n.default=l,cc._RF.pop()},{"../../../Command/CommonSignal":"CommonSignal","../../../Global/GameRule":"GameRule","../../../Tutorial/TutorialView":"TutorialView","../../../table":"table"}],HelpLayerMediator:[function(e,t,n){"use strict";cc._RF.push(t,"ab216iOmFFBBo7YhihjIFYL","HelpLayerMediator"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("./BaseMediator"),i=e("../Command/CommonSignal"),a=e("../Controller/GameStateController"),r=e("../Tutorial/TutorialView"),s=cc._decorator,c=s.ccclass,l=(s.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.closeCallback=null,t}return __extends(t,e),t.prototype.onRegister=function(){i.ShowHelpLayerSignal.inst.addListenerOne(this.showHelp,this),r.ShowTutorialSignal.inst.addListenerOne(this.showGuide,this),i.HideHelpLayerSignal.inst.addListenerOne(this.hideGuide,this)},t.prototype.showHelp=function(e){this.View.isShowed()||(a.GameStateController.inst.pause(),this.closeCallback=e,this.View.Show())},t.prototype.showGuide=function(e){this.View.isShowed()||(a.GameStateController.inst.pause(!0),this.closeCallback=e,this.View.Show(null,!0))},t.prototype.hideGuide=function(){0!=this.View.isShowed()&&(a.GameStateController.inst.resume(),this.View.Hide(this.closeCallback),this.closeCallback=null)},t=__decorate([c],t)}(o.default));n.default=l,cc._RF.pop()},{"../Command/CommonSignal":"CommonSignal","../Controller/GameStateController":"GameStateController","../Tutorial/TutorialView":"TutorialView","./BaseMediator":"BaseMediator"}],HelpLayerView:[function(e,t,n){"use strict";cc._RF.push(t,"7de5dV5nLxKg6SXhg1Pqw8Z","HelpLayerView"),Object.defineProperty(n,"__esModule",{value:!0});var o,i=e("./BaseView"),a=e("./HelpLayerMediator"),r=e("../Command/CommonSignal"),s=e("../GamePlay/View/new/Page"),c=e("../Model/PlayModelProxy"),l=e("../Global/Theme"),u=cc._decorator,h=u.ccclass,p=u.property;(function(e){e[e.Show=0]="Show",e[e.Hide=1]="Hide"})(o||(o={}));var d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state=o.Hide,t.Next=null,t.Close=null,t.GuidePage=null,t.TotalPage=null,t.Page=null,t}return __extends(t,e),Object.defineProperty(t.prototype,"Background",{get:function(){return this.node.getChildByName("Background")},enumerable:!0,configurable:!0}),t.prototype.onLoad=function(){this.BindMedaitor(a.default),this.state=o.Hide,this.node.scale=1,this.node.active=!1,this.GuidePage.node.on("page-turning",this.onPageChanged,this),this.Close.on(cc.Node.EventType.TOUCH_END,this.close,this),this.Next.on(cc.Node.EventType.TOUCH_END,this.next,this)},t.prototype.start=function(){},t.prototype.close=function(){r.ButtonClickSignal.inst.dispatch(),r.HideHelpLayerSignal.inst.dispatch()},t.prototype.next=function(){r.ButtonClickSignal.inst.dispatch(),this.GuidePage.scrollToPage((this.GuidePage.getCurrentPageIndex()+1)%this.GuidePage.content.childrenCount,0),this.onPageChanged()},t.prototype.onPageChanged=function(){this.TotalPage&&(this.TotalPage.string=this.GuidePage.content.childrenCount.toString()),this.Page&&(this.Page.string=(this.GuidePage.getCurrentPageIndex()+1).toString()),this.GuidePage.content.children[this.GuidePage.getCurrentPageIndex()].getComponent(s.default)&&this.GuidePage.content.children[this.GuidePage.getCurrentPageIndex()].getComponent(s.default).play(),this.GuidePage.getCurrentPageIndex()>=this.GuidePage.content.childrenCount-1||this.GuidePage.content.children[this.GuidePage.getCurrentPageIndex()+1]&&0==this.GuidePage.content.children[this.GuidePage.getCurrentPageIndex()+1].active?(this.Next.active=!1,this.Close.active=!0):(this.Next.active=!0,this.Close.active=!1)},t.prototype.isShowed=function(){return this.state==o.Show},t.prototype.Show=function(e,t){if(void 0===t&&(t=!1),!this.isShowed()){this.state=o.Show,this.node.active=!0,this.node.stopAllActions();for(var n=0,i=0,a=this.Background.children;i<a.length;i++){(p=a[i]).active=p.name==l.Theme[c.PlayModelProxy.inst.Theme],p.active&&n++}if(n<=0&&(this.Background.children[0].active=!0),this.node.scale=0,this.node.runAction(cc.sequence(cc.callFunc(function(){}),cc.scaleTo(.1,1),cc.callFunc(function(){e&&e()}))),this.Next.active=!0,this.Close.active=!1,this.GuidePage.scrollToPage(0,0),this.onPageChanged(),t)for(var r=0,s=this.GuidePage.content.children;r<s.length;r++){(p=s[r]).active="HideOnNew"!=p.name}else for(var u=0,h=this.GuidePage.content.children;u<h.length;u++){var p;(p=h[u]).active=!0}}},t.prototype.Hide=function(e){var t=this;0!=this.isShowed()&&(this.state=o.Hide,this.node.stopAllActions(),this.node.runAction(cc.sequence(cc.scaleTo(.1,0),cc.callFunc(function(){t.node.scale=1,e&&e(),t.node.active=!1}))))},__decorate([p(cc.Node)],t.prototype,"Next",void 0),__decorate([p(cc.Node)],t.prototype,"Close",void 0),__decorate([p(cc.PageView)],t.prototype,"GuidePage",void 0),__decorate([p(cc.Label)],t.prototype,"TotalPage",void 0),__decorate([p(cc.Label)],t.prototype,"Page",void 0),t=__decorate([h],t)}(i.default);n.default=d,cc._RF.pop()},{"../Command/CommonSignal":"CommonSignal","../GamePlay/View/new/Page":"Page","../Global/Theme":"Theme","../Model/PlayModelProxy":"PlayModelProxy","./BaseView":"BaseView","./HelpLayerMediator":"HelpLayerMediator"}],InitialFacade:[function(e,t,n){"use strict";cc._RF.push(t,"cbbbcO7od5PrqaPNOs8dFh3","InitialFacade"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../Command/InititalCommand"),i=e("../Command/StartGameCommand"),a=e("../Command/LoadAudioCommand"),r=e("../Command/LoadPrefabCommand"),s=e("../../Utils/Celer/CelerSDK"),c=e("../../Manager/StepManager"),l=e("../Command/LoadJsonCommand"),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(e("../../Utils/Signal").BaseSignal);n.UpdateInitLoadingSignal=u;var h=function(){function e(e){this.stepMgr=new c.StepManager,this.facade=puremvc.Facade.getInstance(e)}return Object.defineProperty(e,"inst",{get:function(){return this.instance?this.instance:this.instance=new e(e.MULTITON_KEY)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Facade",{get:function(){return console.assert(null!==this.facade," facade is null"),this.facade},enumerable:!0,configurable:!0}),e.prototype.startStep=function(e){this.stepMgr.start(e)},e.prototype.register=function(){var t=this;this.facade.registerCommand(e.INITIALIZATION,o.InitialCommand),this.facade.registerCommand(e.START_UP,i.StartGameCommand),this.stepMgr.register(function(){t.facade.sendNotification(e.START_UP,t)},e.TOTAL_STEPS),s.CelerSDK.inst.init(function(){t.facade.sendNotification(e.INITIALIZATION,t)})},e.prototype.unregister=function(){this.facade.removeCommand(e.INITIALIZATION),this.facade.removeCommand(e.START_UP)},e.prototype.start=function(){this.register(),s.CelerSDK.inst.celerXReady()},e.prototype.step=function(e){console.log(" initialization step:",e),this.stepMgr.nextStep(e)},e.MULTITON_KEY="INITIAL_FCADE",e.INITIALIZATION="initialization",e.START_UP="startup",e.TOTAL_STEPS=[a.LoadAudioCommand.STEP,r.LoadPrefabCommand.STEP,l.LoadJsonCommand.STEP,"POLYGON","ITEMS"],e}();n.InitialFacade=h,cc._RF.pop()},{"../../Manager/StepManager":"StepManager","../../Utils/Celer/CelerSDK":"CelerSDK","../../Utils/Signal":"Signal","../Command/InititalCommand":"InititalCommand","../Command/LoadAudioCommand":"LoadAudioCommand","../Command/LoadJsonCommand":"LoadJsonCommand","../Command/LoadPrefabCommand":"LoadPrefabCommand","../Command/StartGameCommand":"StartGameCommand"}],InititalCommand:[function(e,t,n){"use strict";cc._RF.push(t,"a28caT/H41F74cWxJYqN9pz","InititalCommand"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("./LoadPrefabCommand"),i=e("./LoadAudioCommand"),a=e("./LoadJsonCommand"),r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.initializeMacroCommand=function(){this.addSubCommand(o.LoadPrefabCommand),this.addSubCommand(i.LoadAudioCommand),this.addSubCommand(a.LoadJsonCommand)},t}(puremvc.MacroCommand);n.InitialCommand=r,cc._RF.pop()},{"./LoadAudioCommand":"LoadAudioCommand","./LoadJsonCommand":"LoadJsonCommand","./LoadPrefabCommand":"LoadPrefabCommand"}],ItemAnimationRoot:[function(e,t,n){"use strict";cc._RF.push(t,"ae8f2psh35KBr8D7ZaN8urc","ItemAnimationRoot"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../../Factory/GameFactory"),i=e("../../../Utils/Cocos"),a=e("../../Model/ItemModel"),r=e("../Game/ItemRoot"),s=e("./ItemAnimation"),c=cc._decorator,l=c.ccclass,u=(c.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onLoad=function(){a.RemoveItemSignal.inst.addListenerThree(this.onRemove,this)},t.prototype.onRemove=function(e,t,n){if(void 0===t&&(t=!1),void 0===n&&(n=0),e&&t){var a=r.default.ITEM_ROOT.getChildByName(e.ID);if(a){var c=o.gFactory.getObj("ItemAni");this.node.addChild(c),c.setPosition(i.ConvertToNodeSpaceAR(a,this.node)),c.opacity=255,c.active=!0,c.getComponent(s.default).onComplete=function(){c.runAction(cc.fadeOut(.1)),setTimeout(function(){o.gFactory.putObj("ItemAni",c)},100)},c.getComponent(s.default).play()}}},t=__decorate([l],t)}(cc.Component));n.default=u,cc._RF.pop()},{"../../../Factory/GameFactory":"GameFactory","../../../Utils/Cocos":"Cocos","../../Model/ItemModel":"ItemModel","../Game/ItemRoot":"ItemRoot","./ItemAnimation":"ItemAnimation"}],ItemAnimation:[function(e,t,n){"use strict";cc._RF.push(t,"00250UFjMVCPKpIPv18BwLm","ItemAnimation"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../../Utils/FrameAniBase"),i=cc._decorator,a=i.ccclass,r=(i.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t=__decorate([a],t)}(o.default));n.default=r,cc._RF.pop()},{"../../../Utils/FrameAniBase":"FrameAniBase"}],ItemModel:[function(e,t,n){"use strict";cc._RF.push(t,"5d06eXvBHZC4oH9dhUL4Xl7","ItemModel"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../table"),i=e("../../Utils/Signal"),a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(i.BaseSignal);n.CreateItemNodeSignal=a;var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(i.BaseSignal);n.RemoveItemSignal=r;var s=function(){function e(t,n,i,r,s,c,l,u,h){this.id="",this.spName="",this.type=null,this.subType=null,this.points=[],this.position=cc.v2(0,0),this.rotation=0,this.bot=0,this.top=0,this.hasCreate=!0,this.zIndex=0,this.id=t+"-"+o.Random_ID[n]+"-"+o.Random_Pool[i]+":"+e.objCount++;for(var p=0,d=r;p<d.length;p++){var g=d[p];this.points.push(g.clone())}this.zIndex=h,this.rotation=c,this.position=s,this.type=n,this.subType=i,this.spName=t,this.bot=l,this.top=u,this.bot<=1920&&this.top>=0?(this.hasCreate=!0,a.inst.dispatchOne(this)):this.hasCreate=!1}return Object.defineProperty(e.prototype,"ZIndex",{get:function(){return this.zIndex},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ID",{get:function(){return this.id},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Type",{get:function(){return this.type},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"SubType",{get:function(){return this.subType},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Points",{get:function(){return this.points},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"SpName",{get:function(){return this.spName},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Rotation",{get:function(){return this.rotation},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Position",{get:function(){return this.position},enumerable:!0,configurable:!0}),e.prototype.move=function(e){for(var t=0,n=this.points;t<n.length;t++){n[t].addSelf(e)}if(this.bot+=e.y,this.top+=e.y,this.bot<=1920&&this.top>=0)this.hasCreate||(a.inst.dispatchOne(this),this.hasCreate=!0);else{if(this.hasCreate)return r.inst.dispatchOne(this),!0;this.hasCreate=!1}return!1},e.prototype.checkClick=function(e){return cc.Intersection.pointInPolygon(e,this.points)},e.prototype.removeSelf=function(){},e.objCount=0,e}();n.ItemModel=s,cc._RF.pop()},{"../../Utils/Signal":"Signal","../../table":"table"}],ItemRoot:[function(e,t,n){"use strict";cc._RF.push(t,"4b727l4Xo9B5qgsuW7GAhw/","ItemRoot"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../../AlgorithmUtils/MinimumPotentialLayout/MinPotentialPacker"),i=e("../../../Command/CommonSignal"),a=e("../../../Factory/GameFactory"),r=e("../../../Global/GameRule"),s=e("../../Model/GameLogic"),c=e("../../Model/ItemModel"),l=cc._decorator,u=l.ccclass,h=(l.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.speed=r.StartSpeed(),t}var n;return __extends(t,e),n=t,Object.defineProperty(t.prototype,"Items",{get:function(){return this.node.getChildByName("Items")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Border",{get:function(){return this.node.getChildByName("Border")},enumerable:!0,configurable:!0}),t.prototype.onLoad=function(){var e=this;n.ITEM_ROOT=this.node,i.GameStartSignal.inst.addListener(function(){e.speed=r.StartSpeed(),o.MinPotentialPacker.inst.DebugNode&&(o.MinPotentialPacker.inst.DebugNode.y=e.node.y+960)},this),this.Border.y=r.GetTotalMapHeight()/r.GetTotalLevel(),this.Border.removeFromParent(!0),i.UpdateTimeNumber.inst.addListenerTwo(function(t,n){e.updateStep(n)},this),c.CreateItemNodeSignal.inst.addListenerOne(this.onCreate,this),i.GameStartSignal.inst.addListener(function(){},this)},t.prototype.updateStep=function(e){this.node.y-=e*this.speed,s.GameLogic.inst.move(cc.v2(0,-e*this.speed)),o.MinPotentialPacker.inst.DebugNode&&(o.MinPotentialPacker.inst.DebugNode.y=this.node.y+960),this.speed+=r.MapSpeedUpScale()*e},t.prototype.onCreate=function(e){var t=a.gFactory.getObj("Item",e);t.setPosition(e.Position),t.rotation=e.Rotation,t.name=e.ID,this.node.addChild(t)},t.DRAW=!1,t=n=__decorate([u],t)}(cc.Component));n.default=h,cc._RF.pop()},{"../../../AlgorithmUtils/MinimumPotentialLayout/MinPotentialPacker":"MinPotentialPacker","../../../Command/CommonSignal":"CommonSignal","../../../Factory/GameFactory":"GameFactory","../../../Global/GameRule":"GameRule","../../Model/GameLogic":"GameLogic","../../Model/ItemModel":"ItemModel"}],ItemType:[function(e,t,n){"use strict";cc._RF.push(t,"61d7e4GieJBtbErXwwWdJN0","ItemType"),cc._RF.pop()},{}],Item:[function(e,t,n){"use strict";cc._RF.push(t,"66b6cLD2CdIFpejxxeVDVjb","Item"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../../Controller/ResourceController"),i=e("../../../Factory/GameFactory"),a=e("../../../Utils/Signal"),r=e("../../Model/ItemModel"),s=e("./PrefabBaseView"),c=cc._decorator,l=c.ccclass,u=(c.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(a.BaseSignal));n.OnClickSignal=u;var h=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(a.BaseSignal);n.OnWrongClickSignal=h;var p=[cc.v2(198,-22.377),cc.v2(527.752,-22.377),cc.v2(874.648,-22.377)],d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),Object.defineProperty(t.prototype,"Sprite",{get:function(){return this.getComponent(cc.Sprite)},enumerable:!0,configurable:!0}),t.prototype.onLoad=function(){r.RemoveItemSignal.inst.addListenerThree(this.onRemove,this),u.inst.addListenerOne(this.onClick,this),h.inst.addListenerOne(this.onWrongClick,this)},t.prototype.onReuse=function(){this.Sprite.spriteFrame=o.ResourceController.inst.getItemSprite(this.model.Type,this.model.SpName)},t.prototype.onWrongClick=function(e){var t=this;this.model&&e.ID==this.model.ID&&(this.node.color=cc.color(247,91,75),setTimeout(function(){t.node.color=cc.Color.WHITE},100))},t.prototype.onUnuse=function(){this.model=null,this.node.scale=1,this.node.opacity=255,this.node.scale=1},t.prototype.onRemove=function(e,t,n){var o=this;void 0===t&&(t=!1),void 0===n&&(n=0),this.model&&e.ID==this.model.ID&&(t?(this.node.zIndex=100,this.node.runAction(cc.spawn(cc.fadeOut(.4),cc.moveTo(.4,p[n]),cc.rotateTo(.4,180))),setTimeout(function(){i.gFactory.putObj("Item",o.node)},400)):i.gFactory.putObj("Item",this.node))},t.prototype.onClick=function(e){var t=this;this.model&&e.indexOf(this.model.ID)>=0&&(this.node.zIndex=100,setTimeout(function(){t.model&&(t.node.zIndex=t.model.ZIndex),t.node.scale=1},150),this.node.runAction(cc.sequence(cc.scaleTo(.1,1.2),cc.scaleTo(.05,1),cc.callFunc(function(){}))))},t=__decorate([l],t)}(s.default);n.default=d,cc._RF.pop()},{"../../../Controller/ResourceController":"ResourceController","../../../Factory/GameFactory":"GameFactory","../../../Utils/Signal":"Signal","../../Model/ItemModel":"ItemModel","./PrefabBaseView":"PrefabBaseView"}],Level:[function(e,t,n){"use strict";cc._RF.push(t,"3db54FVK6dM2Ik/+eMmSgop","Level"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../Utils/Cocos"),i=e("./Theme"),a=function(){function e(){}return e.getThemeRandomPool=function(e){for(;this.pool.length<120;)this.pool.push(i.Theme.One),this.pool.push(i.Theme.Two),this.pool.push(i.Theme.Three),this.pool.push(i.Theme.Four);return o.disOrderArray(this.pool),this.pool},e.pool=[],e}();n.Level=a,cc._RF.pop()},{"../Utils/Cocos":"Cocos","./Theme":"Theme"}],LoadAudioCommand:[function(e,t,n){"use strict";cc._RF.push(t,"d4f3eGYUlBES5d8aEvuPQna","LoadAudioCommand"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../Facade/InitialFacade"),i=e("../../Manager/AudioManager"),a=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.percent=0,t}return __extends(t,e),t.prototype.execute=function(e){var n=this;if(e){var a=e.getBody();a&&a.step&&i.gAudio.init(function(){a.step(t.STEP)},function(e){o.UpdateInitLoadingSignal.inst.dispatchOne(1/o.InitialFacade.TOTAL_STEPS.length*(e-n.percent)),n.percent=e})}},t.STEP="LoadAudio",t}(puremvc.SimpleCommand);n.LoadAudioCommand=a,cc._RF.pop()},{"../../Manager/AudioManager":"AudioManager","../Facade/InitialFacade":"InitialFacade"}],LoadJsonCommand:[function(e,t,n){"use strict";cc._RF.push(t,"a8ceflQ6kFFcbxjBXqDT3ec","LoadJsonCommand"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../AlgorithmUtils/MinimumPotentialLayout/MinPotentialPacker"),i=e("../../App/App"),a=e("../../GamePlay/Model/GameLogic"),r=e("../../Global/GameRule"),s=e("../../Model/PolygonDataModel"),c=e("../../table"),l=e("../../TableManager"),u=e("../../Utils/Celer/CelerSDK"),h=e("../../Utils/Cocos"),p=e("../Facade/InitialFacade"),d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.percent1=0,t.percent2=0,t.percent3=0,t.percent4=0,t.count=0,t.Total=2,t}return __extends(t,e),t.prototype.execute=function(e){var t=this;this.count=0,this.notification=e,l.TableManager.inst.startLoad("/json",function(){i.StartBindAtlasSignal.inst.dispatch(),u.CelerSDK.inst.defineLan(),t.addCount()},function(e){p.UpdateInitLoadingSignal.inst.dispatchOne(1/t.Total/p.InitialFacade.TOTAL_STEPS.length*(e-t.percent1)),t.percent1=e}),s.PolygonDataModel.inst.load("/polygonData/polygon",function(e){t.addCount()},function(e){p.UpdateInitLoadingSignal.inst.dispatchOne(1/t.Total/p.InitialFacade.TOTAL_STEPS.length*(e-t.percent2)),t.percent2=e})},t.prototype.addCount=function(){var e=this,n=this.notification.getBody();if(this.count++,this.notification&&this.count>=this.Total){a.GameLogic.inst.initData();for(var i=s.PolygonDataModel.inst.getData(),u=[],d={},g=0,y=l.TableManager.inst.getRandom(c.Random_ID.SuiJiChi).Pool;g<y.length;g++){var f=y[g],m=l.TableManager.inst.getClass(f).Table;if(l.TableManager.inst["getAll_"+m+"_Data"]){var S=l.TableManager.inst["getAll_"+m+"_Data"]();for(var _ in S)for(var b=S[_],C=0,v=b.Icons;C<v.length;C++){d[B=v[C].split(".")[0]]={points:i[B],type:b.Type,subType:b.ID}}}}for(var P=r.GetTotalLevel(),T=0;T<P;T++){u[T]=[];for(var M=0;a.GameLogic.inst.Types[M];M++){f=a.GameLogic.inst.Types[M];var R=[],L=l.TableManager.inst.getClass(f.Type).Table;if(l.TableManager.inst["get"+L]){R=l.TableManager.inst["get"+L](f.SubType).Icons.concat();var F=[];for(h.disOrderArray(R);F.length<r.CountPerLevelFloor;)F.push(R.pop()),R.length<=0&&(R=l.TableManager.inst["get"+L](f.SubType).Icons.concat(),h.disOrderArray(R));for(var G=0,x=F;G<x.length;G++){var B=x[G].split(".")[0];u[T].push({key:B,points:i[B],type:f.Type,subType:f.SubType})}}}}0,n.startStep("ITEMS"),o.MinPotentialPacker.inst.init(1080,d,u,function(t){p.UpdateInitLoadingSignal.inst.dispatchOne(1/p.InitialFacade.TOTAL_STEPS.length*(t-e.percent3)),e.percent3=t},function(){n.startStep("POLYGON"),a.GameLogic.inst.initItemModel(function(t){p.UpdateInitLoadingSignal.inst.dispatchOne(1/p.InitialFacade.TOTAL_STEPS.length*(t-e.percent4)),e.percent4=t},function(){n.step("POLYGON")}),n&&n.step&&n.step("ITEMS")}),n&&n.step&&n.step(t.STEP)}},t.STEP="LoadJson",t}(puremvc.SimpleCommand);n.LoadJsonCommand=d,cc._RF.pop()},{"../../AlgorithmUtils/MinimumPotentialLayout/MinPotentialPacker":"MinPotentialPacker","../../App/App":"App","../../GamePlay/Model/GameLogic":"GameLogic","../../Global/GameRule":"GameRule","../../Model/PolygonDataModel":"PolygonDataModel","../../TableManager":"TableManager","../../Utils/Celer/CelerSDK":"CelerSDK","../../Utils/Cocos":"Cocos","../../table":"table","../Facade/InitialFacade":"InitialFacade"}],LoadPrefabCommand:[function(e,t,n){"use strict";cc._RF.push(t,"8b33fPnvCZEJ7bc/zCVv9My","LoadPrefabCommand"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../Facade/InitialFacade"),i=e("../../Factory/GameFactory"),a=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.percent=0,t}return __extends(t,e),t.prototype.execute=function(e){var n=this;i.gFactory.init(function(){if(e){var n=e.getBody();n&&n.step&&n.step(t.STEP)}},function(e){o.UpdateInitLoadingSignal.inst.dispatchOne(1/o.InitialFacade.TOTAL_STEPS.length*(e-n.percent)),n.percent=e})},t.STEP="LoadPrefab",t}(puremvc.SimpleCommand);n.LoadPrefabCommand=a,cc._RF.pop()},{"../../Factory/GameFactory":"GameFactory","../Facade/InitialFacade":"InitialFacade"}],LoadingAnimation:[function(e,t,n){"use strict";cc._RF.push(t,"ffb02xEHrJEypPRGQsTZHhY","LoadingAnimation"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../Utils/FrameAniBase"),i=cc._decorator,a=i.ccclass,r=(i.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t=__decorate([a],t)}(o.default));n.default=r,cc._RF.pop()},{"../../Utils/FrameAniBase":"FrameAniBase"}],LoadingPageMediator:[function(e,t,n){"use strict";cc._RF.push(t,"359acCsI6FNpLUAuWOw+Fv4","LoadingPageMediator"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../View/BaseMediator"),i=e("../../Utils/Celer/CelerSDK"),a=e("../../Command/CommonSignal"),r=e("../../Model/PlayModelProxy"),s=e("../../Tutorial/TutorialView"),c=cc._decorator,l=c.ccclass,u=(c.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.time=1500,t.startTime=0,t}return __extends(t,e),t.prototype.onRegister=function(){this.startTime=Date.now(),a.GameReadySignal.inst.addOnce(this.onGameReady,this)},t.prototype.onGameReady=function(){var e=this,t=Date.now()-this.startTime;console.log(" -- game init done, hide loading page: ",t),s.ShowTutorialSignal.inst.dispatch(),a.HideHelpLayerSignal.inst.dispatch(),t<=this.time?setTimeout(function(){e.View.Hide(function(){e.startGame()})},this.time-t):this.View.Hide(function(){e.startGame()})},t.prototype.startGame=function(){i.CelerSDK.inst.isNew()?s.ShowTutorialSignal.inst.dispatchOne(function(){r.PlayModelProxy.inst.gameReadyShow()}):r.PlayModelProxy.inst.gameReadyShow()},t.prototype.onDestroy=function(){},t=__decorate([l],t)}(o.default));n.default=u,cc._RF.pop()},{"../../Command/CommonSignal":"CommonSignal","../../Model/PlayModelProxy":"PlayModelProxy","../../Tutorial/TutorialView":"TutorialView","../../Utils/Celer/CelerSDK":"CelerSDK","../../View/BaseMediator":"BaseMediator"}],LoadingView:[function(e,t,n){"use strict";cc._RF.push(t,"dfec6LZreJCaa8QdaMxRAO/","LoadingView"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../View/BaseView"),i=e("../Facade/InitialFacade"),a=e("./LoadingPageMediator"),r=cc._decorator,s=r.ccclass,c=(r.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.percent=0,t}return __extends(t,e),Object.defineProperty(t.prototype,"ProgressLabel",{get:function(){return this.node.getChildByName("ProgressLabel").getComponent(cc.Label)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Loading",{get:function(){return this.node.getChildByName("ae_loading1")},enumerable:!0,configurable:!0}),t.prototype.onLoad=function(){var e=this;this.node.scale=1,this.node.opacity=255,this.BindMedaitor(a.default),i.UpdateInitLoadingSignal.inst.addListenerOne(function(t){e.percent+=t,e.percent=Math.min(1,e.percent),e.ProgressLabel.string=(100*e.percent).toFixed(0)+"%"},this)},t.prototype.start=function(){},t.prototype.Hide=function(e){var t=this;this.Loading.active=!1,this.node.runAction(cc.sequence(cc.fadeOut(.5),cc.callFunc(function(){t.node.active=!1,e()})))},t=__decorate([s],t)}(o.default));n.default=c,cc._RF.pop()},{"../../View/BaseView":"BaseView","../Facade/InitialFacade":"InitialFacade","./LoadingPageMediator":"LoadingPageMediator"}],LogHandler:[function(e,t,n){"use strict";cc._RF.push(t,"a4747QIvUBIo6Ktpx/xQwuB","LogHandler"),Object.defineProperty(n,"__esModule",{value:!0});var o=function(e){function t(){var n=e.call(this)||this;if(n.logFunc=console.log,n.logMsg=null,n.frameTimes=0,n.now=0,n.Frame=20,n.totalFrames=0,n.startTime=0,window.addEventListener)for(var o=0,i=t.LISTENNING_EVENTS;o<i.length;o++){var a=i[o],r="trigger"+a.charAt(0).toLocaleUpperCase()+a.substring(1);n[r]&&"function"==typeof n[r]&&window.addEventListener(a,n[r].bind(n))}return n}return __extends(t,e),t.prototype.dumpFrameInfo=function(){var e=(Date.now()-this.startTime)/1e3,t=e/this.totalFrames;this.log(" total frames:",this.totalFrames," ,total cost time:",e+"s"," , per frame cost time ave:"+t+"s")},t.prototype.log=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.addLog.apply(this,e),this.sendLog()},t.prototype.ready=function(){console.log(t.VERSION)},t.prototype.initLog=function(e){var n=this;cc.director.once(cc.Director.EVENT_AFTER_SCENE_LAUNCH,function(){n.frameTimes=0,n.now=Date.now(),n.startTime=Date.now()},this),cc.director.on(cc.Director.EVENT_AFTER_DRAW,function(){n.frameTimes++,n.totalFrames++,n.frameTimes>=n.Frame&&(n.frameTimes=0,n.now=Date.now())},this),this.logFunc=e,window.consoleError=console.error,window.consoleWarn=console.warn,window.consoleLog=console.log,window.consoleAssert=console.assert,console.error=function(){for(var e,n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];(e=t.inst).log.apply(e,["[ERROR]"].concat(n))},console.warn=function(){for(var e,n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];(e=t.inst).log.apply(e,["[WARN]"].concat(n))},console.log=function(){for(var e,n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];(e=t.inst).log.apply(e,["[INFO]"].concat(n))},console.assert=function(e){for(var n,o=[],i=1;i<arguments.length;i++)o[i-1]=arguments[i];e||(n=t.inst).log.apply(n,["[ASSERT ERROR]"].concat(o))}},t.prototype.formatLogArguments=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n="",o=0;o<arguments.length;o++){var i=typeof arguments[o];"string"==i||"number"==i?n+=" "+arguments[o]:"object"==i?n+=" "+JSON.stringify(arguments[o]):"boolean"==i&&arguments[o].toString&&(n+=arguments[o].toString())}return n},t.prototype.addLog=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];null==this.logMsg&&(this.logMsg={});var o=this.formatLogArguments.apply(this,e),i=this.getFullTime(new Date);this.logMsg[i]=t.VERSION+o},t.prototype.getFullTime=function(e){var t="";t+=e.getFullYear();var n=e.getMonth()+1;t+="-"+(n>=10?n:"0"+n);var o=e.getDate();t+="-"+(o>=10?o:"0"+o);var i=e.getHours();t+="  "+(i>=10?i:"0"+i);var a=e.getMinutes();t+=":"+(a>=10?a:"0"+a);var r=e.getSeconds();return t+=":"+(r>=10?r:"0"+r)},t.prototype.sendLog=function(){this.logFunc&&null!=this.logMsg&&(this.logFunc(JSON.stringify(this.logMsg)),this.logMsg=null)},t.prototype.triggerClose=function(e){this.addLog("triggerClose"),this.sendLog()},t.prototype.triggerLoad=function(e){this.addLog("triggerLoad"),this.sendLog()},t.prototype.triggerUnload=function(e){this.addLog("triggerUnload"),this.sendLog()},t.prototype.triggerOnunload=function(e){this.addLog("triggerUnload"),this.sendLog()},t.prototype.triggerError=function(e){this.addLog("triggerError"),this.addLog(e.message),this.sendLog()},t.prototype.triggerFocus=function(e){this.addLog("triggerFocus"),this.sendLog()},t.prototype.triggerBlur=function(e){this.addLog("triggerBlur"),this.sendLog()},t.prototype.triggerAbort=function(e){this.addLog("triggerAbort"),this.sendLog()},t.prototype.triggerSuspend=function(e){this.addLog("triggerSuspend"),this.sendLog()},t.prototype.beforeunload=function(e){this.addLog("beforeunload"),this.sendLog()},t.VERSION=window.GAME_VERSION||" --- ",t.LISTENNING_EVENTS=["error"],t}(e("./ToSingleton").SingleTon());n.LogHandler=o,cc._RF.pop()},{"./ToSingleton":"ToSingleton"}],MenuButtonView:[function(e,t,n){"use strict";cc._RF.push(t,"28073o37LNPKaWTUfECMch5","MenuButtonView"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../../Command/CommonSignal"),i=e("../../../Controller/GameStateController"),a=e("../../../Utils/Signal"),r=e("../../../View/SingleTouchView"),s=cc._decorator,c=s.ccclass,l=(s.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(a.BaseSignal));n.MenuButtonClickSignal=l;var u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onTouchEnd=function(){i.GameStateController.inst.isGameOver()||(l.inst.dispatch(),o.ButtonClickSignal.inst.dispatch())},t.prototype.start=function(){},t=__decorate([c],t)}(r.default);n.default=u,cc._RF.pop()},{"../../../Command/CommonSignal":"CommonSignal","../../../Controller/GameStateController":"GameStateController","../../../Utils/Signal":"Signal","../../../View/SingleTouchView":"SingleTouchView"}],MenuLayerView:[function(e,t,n){"use strict";cc._RF.push(t,"85bd9XHwOpA8pPYE/vCkvEe","MenuLayerView"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../../Command/CommonSignal"),i=e("../../../Controller/GameStateController"),a=e("../../../Global/GameRule"),r=e("../../../Global/Theme"),s=e("../../../Model/PlayModelProxy"),c=e("../../../table"),l=e("../../../View/BaseView"),u=e("../../Model/GamePlayModel"),h=e("./MenuButtonView"),p=e("./SubmitLayerView"),d=cc._decorator,g=d.ccclass,y=(d.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),Object.defineProperty(t.prototype,"Resume",{get:function(){return this.node.getChildByName("ResumeButton")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"EndNow",{get:function(){return this.node.getChildByName("EndNow")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Background",{get:function(){return this.node.getChildByName("Background")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Content",{get:function(){return this.node.getChildByName("Content").getComponent(cc.RichText)},enumerable:!0,configurable:!0}),t.prototype.onLoad=function(){var t=this;h.MenuButtonClickSignal.inst.addListener(this.onShow,this),o.ShowPauseLayerSignal.inst.addListener(function(){t.onShow()},this),this.Resume.on(cc.Node.EventType.TOUCH_END,function(){i.GameStateController.inst.resume(),o.ButtonClickSignal.inst.dispatch(),t.Hide()},this),this.EndNow.on(cc.Node.EventType.TOUCH_END,function(){t.Hide(),o.ButtonClickSignal.inst.dispatch(),p.EndNowSignal.inst.dispatch()},this),e.prototype.onLoad.call(this),this.node.active=!1},t.prototype.onShow=function(){if(!this.node.active){for(var e=0,t=0,n=this.Background.children;t<n.length;t++){var o=n[t];o.active=o.name==r.Theme[s.PlayModelProxy.inst.Theme],o.active&&e++}e<=0&&(this.Background.children[0].active=!0),s.PlayModelProxy.inst.FreePauseCount<=0?this.Content.string=lan.t(c.En_View.ZanTingJieMian,c.En_ID.ZanTingKouFen,[""+a.GetScoreByType(u.ScoreType.PauseCost)]):this.Content.string=lan.t(c.En_View.ZanTingJieMian,c.En_ID.MianFeiZanTing,[s.PlayModelProxy.inst.FreePauseCount.toString(),""+a.GetScoreByType(u.ScoreType.PauseCost)]),this.Show(),i.GameStateController.inst.pause()}},t.prototype.start=function(){},t=__decorate([g],t)}(l.default));n.default=y,cc._RF.pop()},{"../../../Command/CommonSignal":"CommonSignal","../../../Controller/GameStateController":"GameStateController","../../../Global/GameRule":"GameRule","../../../Global/Theme":"Theme","../../../Model/PlayModelProxy":"PlayModelProxy","../../../View/BaseView":"BaseView","../../../table":"table","../../Model/GamePlayModel":"GamePlayModel","./MenuButtonView":"MenuButtonView","./SubmitLayerView":"SubmitLayerView"}],MinPotentialPacker:[function(e,t,n){"use strict";cc._RF.push(t,"342cdspmiVBzK05aeMfPo3x","MinPotentialPacker"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../Editor/PercentLabel2"),i=e("../../GamePlay/View/Game/ItemRoot"),a=e("../../Global/GameRule"),r=e("../../Utils/Cocos"),s=e("../../Utils/HashMap"),c=e("../../Utils/Random"),l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.warpCount=0,t.sideCount=new s.HashMap,t.count=0,t.borderY=0,t.DebugNode=null,t.targetHeight=0,t.level=0,t.stepID=-1,t.index=-1,t.answerIndex=0,t.indexRef=0,t}return __extends(t,e),t.prototype.pack=function(){if(null==this.b2World){this.b2World=new b2.World(new b2.Vec2(0,-300)),this.b2World.SetAllowSleeping(!0);var e=2*a.GetTotalMapHeight(),t=100,n=new b2.BodyDef;n.allowSleep=!0,n.angle=0,n.gravityScale=0,n.type=b2.BodyType.b2_staticBody;var o=new b2.PolygonShape;o.SetAsBox(50/cc.PhysicsTypes.PTM_RATIO,e/2/cc.PhysicsTypes.PTM_RATIO,new b2.Vec2(-50/cc.PhysicsTypes.PTM_RATIO,0/cc.PhysicsTypes.PTM_RATIO));var i=new b2.FixtureDef;i.density=1,i.shape=o;var r=this.b2World.CreateBody(n);r.CreateFixture(i),r.SetPosition(new b2.Vec2(0/cc.PhysicsTypes.PTM_RATIO,(e/2+t)/cc.PhysicsTypes.PTM_RATIO)),r.name="left";var s=new b2.BodyDef;s.allowSleep=!0,s.angle=0,s.type=b2.BodyType.b2_staticBody,s.gravityScale=0;var c=new b2.PolygonShape;c.SetAsBox(50/cc.PhysicsTypes.PTM_RATIO,e/2/cc.PhysicsTypes.PTM_RATIO,new b2.Vec2(50/cc.PhysicsTypes.PTM_RATIO,0/cc.PhysicsTypes.PTM_RATIO));var l=new b2.FixtureDef;l.density=1,l.shape=c;var u=this.b2World.CreateBody(n);u.CreateFixture(l),u.SetPosition(new b2.Vec2(1080/cc.PhysicsTypes.PTM_RATIO,(e/2+t)/cc.PhysicsTypes.PTM_RATIO)),u.name="right";var h=new b2.BodyDef;h.allowSleep=!0,h.type=b2.BodyType.b2_staticBody,h.gravityScale=0,h.angle=0;var p=new b2.PolygonShape;p.SetAsBox(1080/cc.PhysicsTypes.PTM_RATIO,50/cc.PhysicsTypes.PTM_RATIO,new b2.Vec2(0,50/cc.PhysicsTypes.PTM_RATIO));var d=new b2.FixtureDef;d.density=1,d.shape=p;var g=this.b2World.CreateBody(h);g.CreateFixture(d),g.SetPosition(new b2.Vec2(540/cc.PhysicsTypes.PTM_RATIO,0))}this.warpCount=0,this.sideCount.add(this.warpCount,{left:[],right:[]}),this.borderY=128,this.startPack(a.GetTotalMapHeight())},t.prototype.Step=function(e,t,n,o){void 0===e&&(e=!0),void 0===t&&(t=cc.PhysicsManager.FIXED_TIME_STEP),void 0===n&&(n=cc.PhysicsManager.VELOCITY_ITERATIONS),void 0===o&&(o=cc.PhysicsManager.POSITION_ITERATIONS),i.default.DRAW&&e&&this.b2World.ClearDebugDraw(),this.b2World.Step(t,n,o),this.syncBody(),i.default.DRAW&&e&&this.b2World.DrawDebugData()},t.prototype.syncBody=function(){this.b2World.SyncDynamicTransform(function(e,t,n){if(e.data){var o=e.data;o.rotateBy(cc.PhysicsTypes.PHYSICS_ANGLE_TO_ANGLE*n),o.moveBy(t.x*cc.PhysicsTypes.PTM_RATIO,t.y*cc.PhysicsTypes.PTM_RATIO)}})},t.prototype.createBody=function(e){var t=new b2.BodyDef;t.allowSleep=!0,t.angle=0,t.type=b2.BodyType.b2_dynamicBody,t.bullet=!0,t.linearDamping=.5,t.angularDamping=.5;var n=this.b2World.CreateBody(t);n.data=e,n.SetPosition(new b2.Vec2(e.Position.x/cc.PhysicsTypes.PTM_RATIO,e.Position.y/cc.PhysicsTypes.PTM_RATIO));for(var o=cc.PolygonSeparator.ConvexPartition(e.ExpendPoints),i=[],a=0;a<o.length;a++){for(var r=o[a],s=[],c=null,l=null,u=0;u<r.length;u++){null==c&&(c=new b2.PolygonShape);var h=r[u],p=new b2.Vec2((h.x-e.Position.x)/cc.PhysicsTypes.PTM_RATIO,(h.y-e.Position.y)/cc.PhysicsTypes.PTM_RATIO);s.push(p),l||(l=p),s.length===b2.maxPolygonVertices&&(c.Set(s,s.length),i.push(c),c=null,u<r.length-1&&(s=[l,s[s.length-1]]))}c&&(c.Set(s,s.length),i.push(c))}for(var d=0,g=i;d<g.length;d++){var y=g[d],f=new b2.FixtureDef;f.density=1,f.isSensor=!1,f.shape=y,n.CreateFixture(f)}n.SyncTransform()},t.prototype.startPack=function(e){void 0===e&&(e=28800),this.targetHeight=e,this.packAsync(e)},t.prototype.packAsync=function(e){var t=this,n=Date.now();this.packeds().length=0;var i=this.height;this.b2World.SetGravity(new b2.Vec2(0,-300)),this.b2World.m_AngleLimit=Math.abs(2/cc.PhysicsTypes.PHYSICS_ANGLE_TO_ANGLE),this.b2World.m_OffsetLimit=10/cc.PhysicsTypes.PTM_RATIO,this.b2World.m_StaticRefLimit=10,this.b2World.m_VelocityLimit=.5,this.stepID=setInterval(function(){for(var a=30;a--;)if(t.Step(!1),t.b2World.IsAllDynamicBodySleepingNow()){t.b2World.SetAllDynamic2Static(),t.height>=e?(clearInterval(t.stepID),!CELER_X&&console.log(" polygons cost:",Date.now()-n," ms",", total Pack:",t.packeds().length,", height:",t.height,", heightAdd:",t.height-i),t.done()):(t.updateHeight(),t.stepAsync(e));break}o.UpdateLoadingSignal.inst.dispatchOne(t.height/e)},2)},t.prototype.stepAsync=function(e){if(!(this.height>=e))for(;;){var t=this.sideCount.get(this.warpCount),n=0,o=this.width;t.left.length>0&&(n=t.left[0].ExpendBorder.right.x),t.right.length>0&&(o=t.right[0].ExpendBorder.left.x);var i=Math.abs(o-n),a=this.findPolygons(i);if(a.length<=0){for(var r=0,s=t.left;r<s.length;r++){var l=s[r];this.createBody(l)}for(var u=0,h=t.right;u<h.length;u++){var p=h[u];this.createBody(p)}this.wrap();break}var d=a[c.Random.randomFloorToInt(0,a.length)],g=d.Rotation;0==this.warpCount&&(this.layFirstWrap(d),d.ExpendBox.width>i&&d.ExpendBox.height>i&&d.rotateTo(g)),d.ExpendBox.width>i&&d.rotateBy(90);for(var y=0;y<this.polygons().length;y++)if(this.polygons()[y].ID==d.ID){this.polygons().splice(y,1),this.setPolygons(d.ID.split(":")[0]);break}var f=[];this.count%2==0?(d.moveTo(n-d.ExpendBox.x,this.borderY-d.ExpendBox.y),f=t.left):(d.moveTo(o-(d.ExpendBox.x+d.ExpendBox.width),this.borderY-d.ExpendBox.y),f=t.right),f.unshift(d),this.count++,d.isUpdate=!0,this.addPack(d)}},t.prototype.done=function(){e.prototype.done.call(this),this._completeCallback&&this._completeCallback()},t.prototype.findPolygons=function(e){var t=[],n=this.targetHeight/a.GetTotalLevel(),o=this.polygonsNeed()[this.level],i=n/(a.GetCollectCount()*a.GetTypeCount()*a.GetTotalLevel());if(o&&o.length>0){r.disOrderArray(o);var s=Math.floor(this.height/i);if(s!=this.index?(this.index=s,this.indexRef=0):this.indexRef++,this.indexRef<=2)for(var c=0;c<o.length;c++){if((h=o[c]).ExpendBox.width<=e||h.ExpendBox.height<=e){t.push(h),o.splice(c,1);break}}}if(t.length>0)return t;for(var l=0,u=this.polygons();l<u.length;l++){var h;((h=u[l]).ExpendBox.width<=e||h.ExpendBox.height<=e)&&t.push(h)}return t},t.prototype.layFirstWrap=function(e){if(!(this.warpCount>0)){var t=0;t=this.count%2==0?1:-1;for(var n=90,o=e.ExpendPoints.length;n-- >0;){for(var i=!1,a=0;a<o;a++){var s=e.ExpendPoints[(a+o-1)%o],c=e.ExpendPoints[(a+1)%o],l=e.ExpendPoints[a];l.y>e.Center.y||(r.Approx(s.y,l.y,1)||r.Approx(c.y,l.y,1))&&(i=!0)}if(i)break;e.rotateBy(t)}}},t.prototype.wrap=function(){this.warpCount++,this.sideCount.add(this.warpCount,{left:[],right:[]})},t.prototype.updateHeight=function(){if(0!=this.warpCount){for(var e=this.sideCount.get(this.warpCount-1),t=0,n=e.left;t<n.length;t++){var o=n[t];this.borderY=Math.max(this.borderY,o.ExpendBorder.top.y)}for(var i=0,r=e.right;i<r.length;i++){o=r[i];this.borderY=Math.max(this.borderY,o.ExpendBorder.top.y)}for(var s=0,c=0,l=e.left;c<l.length;c++){o=l[c];s=0==s?o.ExpendBorder.top.y:Math.min(s,o.ExpendBorder.top.y)}for(var u=0,h=e.right;u<h.length;u++){o=h[u];s=Math.min(s,o.ExpendBorder.top.y)}this.height=Math.max(s,this.height);var p=this.targetHeight/a.GetTotalLevel();this.level!=Math.floor(this.height/p)&&(this.index=-1),this.level=Math.floor(this.height/p),this._progressCallback&&this._progressCallback(Math.min(1,this.height/this.targetHeight))}},t}(e("../BasePacker").BasePacker);n.MinPotentialPacker=l,cc._RF.pop()},{"../../Editor/PercentLabel2":"PercentLabel2","../../GamePlay/View/Game/ItemRoot":"ItemRoot","../../Global/GameRule":"GameRule","../../Utils/Cocos":"Cocos","../../Utils/HashMap":"HashMap","../../Utils/Random":"Random","../BasePacker":"BasePacker"}],NumberChangedView:[function(e,t,n){"use strict";cc._RF.push(t,"5f2acutWoZLka/VldveJWjk","NumberChangedView"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("./BaseView"),i=cc._decorator,a=i.ccclass,r=(i.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.num=0,t.showNum=0,t.step=0,t.label=null,t.action=!0,t.STEP=120,t.callback=null,t}return __extends(t,e),t.prototype.setNumber=function(e){this.showNum=e,this.num=e,this.Label.string=e.toString()},Object.defineProperty(t.prototype,"Label",{get:function(){return this.label?this.label:this.label=this.node.getComponent(cc.Label)},enumerable:!0,configurable:!0}),t.prototype.onLoad=function(){},t.prototype.start=function(){},t.prototype.onStep=function(e){},t.prototype.onNumberChanged=function(e,t){if(this.num=e,this.callback=t,this.num!=this.showNum){var n=this.num-this.showNum;this.step=n>0?Math.ceil(n/this.STEP):Math.floor(n/this.STEP),this.action&&this.node.runAction(cc.sequence(cc.scaleTo(.1,1.4),cc.delayTime(.2),cc.scaleTo(.1,1)))}else this.step=0},t.prototype.update=function(e){this.num!=this.showNum&&(this.showNum+=this.step,this.onStep(this.step),(this.showNum>this.num&&this.step>0||this.showNum<this.num&&this.step<0)&&(this.showNum=this.num,this.step=0)),Math.abs(this.num-this.showNum)<=Math.abs(this.step)&&this.callback&&"function"==typeof this.callback&&(this.callback(),this.callback=null),this.Label.string=this.showNum>=0?this.showNum.toString():"/"+Math.abs(this.showNum).toString()},t=__decorate([a],t)}(o.default));n.default=r,cc._RF.pop()},{"./BaseView":"BaseView"}],P2Packer:[function(e,t,n){"use strict";cc._RF.push(t,"5ad7eWfva1GjrLhJEXg5ONo","P2Packer"),Object.defineProperty(n,"__esModule",{value:!0});var o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(e("../BasePacker").BasePacker);n.P2Packer=o,cc._RF.pop()},{"../BasePacker":"BasePacker"}],Page:[function(e,t,n){"use strict";cc._RF.push(t,"5ab38aDYzFDBobaWEcqAEr3","Page"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("./BreakAnimation"),i=cc._decorator,a=i.ccclass,r=i.property,s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.DiamondRoot=null,t.BreakAnimation=null,t.ScoreRoot=null,t.Blue=null,t.Green=null,t.blueFrom=null,t.greenFrom=null,t}return __extends(t,e),t.prototype.onLoad=function(){this.blueFrom=this.Blue.position.clone(),this.greenFrom=this.Green.position.clone()},t.prototype.play=function(){this.showDiamond(),this.swapDiamond()},t.prototype.showDiamond=function(){this.Blue.setPosition(this.blueFrom),this.Green.setPosition(this.greenFrom),this.DiamondRoot.active=!0;for(var e=0,t=this.DiamondRoot.children;e<t.length;e++){t[e].stopAllActions()}for(var n=0,o=this.ScoreRoot.children;n<o.length;n++){o[n].stopAllActions()}this.BreakAnimation.active=!1,this.ScoreRoot.active=!1},t.prototype.swapDiamond=function(){var e=this;this.Blue.runAction(cc.sequence(cc.delayTime(.5),cc.moveTo(.1,this.greenFrom),cc.delayTime(.2),cc.callFunc(function(){e.playBreak()}))),this.Green.runAction(cc.sequence(cc.delayTime(.5),cc.moveTo(.1,this.blueFrom),cc.callFunc(function(){})))},t.prototype.playBreak=function(){var e=this;this.DiamondRoot.active=!1,this.BreakAnimation.active=!0;for(var t=!1,n=function(n){n.getComponent(o.default).play(),n.getComponent(o.default).onComplete=t?function(){}:function(){n.runAction(cc.sequence(cc.fadeOut(.2),cc.delayTime(1),cc.callFunc(function(){e.play()})))},t=!0},i=0,a=this.BreakAnimation.children;i<a.length;i++){n(c=a[i])}this.ScoreRoot.active=!0;for(var r=0,s=this.ScoreRoot.children;r<s.length;r++){var c;(c=s[r]).opacity=255,c.stopAllActions(),c.scale=0,c.runAction(cc.sequence(cc.scaleTo(0,0),cc.scaleTo(.2,1),cc.scaleTo(.1,.5),cc.fadeOut(.1),cc.callFunc(function(){})))}},__decorate([r(cc.Node)],t.prototype,"DiamondRoot",void 0),__decorate([r(cc.Node)],t.prototype,"BreakAnimation",void 0),__decorate([r(cc.Node)],t.prototype,"ScoreRoot",void 0),__decorate([r(cc.Node)],t.prototype,"Blue",void 0),__decorate([r(cc.Node)],t.prototype,"Green",void 0),t=__decorate([a],t)}(cc.Component);n.default=s,cc._RF.pop()},{"./BreakAnimation":"BreakAnimation"}],PauseCostAnimation:[function(e,t,n){"use strict";cc._RF.push(t,"aeb0dNv81RCiZOQBUkb+RCq","PauseCostAnimation"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../Command/CommonSignal"),i=cc._decorator,a=i.ccclass,r=(i.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onLoad=function(){this.node.active=!1,o.PlayerScoreChanged.inst.addListenerFour(this.onScoreChanged,this)},t.prototype.onScoreChanged=function(e,t){var n=this;t>=0||(this.node.active=!0,this.node.opacity=255,this.node.scale=0,this.node.runAction(cc.sequence(cc.scaleTo(.1,1.2),cc.scaleTo(.05,1),cc.fadeOut(.1),cc.callFunc(function(){n.node.active=!1}))))},t=__decorate([a],t)}(cc.Component));n.default=r,cc._RF.pop()},{"../Command/CommonSignal":"CommonSignal"}],PercentLabel2:[function(e,t,n){"use strict";cc._RF.push(t,"258fcA13G9Eyor2mIvIXVar","PercentLabel2"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../Utils/Signal"),i=cc._decorator,a=i.ccclass,r=(i.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(o.BaseSignal));n.UpdateLoadingSignal=r;var s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onLoad=function(){var e=this;this.node.active=!1,r.inst.addListenerOne(function(t){(t=Math.min(t,1))>=1&&setTimeout(function(){e.node.active=!1},1e3),e.getComponent(cc.Label).string=(100*t).toFixed(2)+"%"},this)},t=__decorate([a],t)}(cc.Component);n.default=s,cc._RF.pop()},{"../Utils/Signal":"Signal"}],PercentLabel:[function(e,t,n){"use strict";cc._RF.push(t,"db1f1UW/QJIB4QIk856bH9s","PercentLabel"),Object.defineProperty(n,"__esModule",{value:!0});var o=cc._decorator,i=o.ccclass,a=(o.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onLoad=function(){this.node.active=!1},t=__decorate([i],t)}(cc.Component));n.default=a,cc._RF.pop()},{}],PlayModelProxy:[function(e,t,n){"use strict";cc._RF.push(t,"50835VU6k9M3pgXsJbG5zxG","PlayModelProxy"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../Utils/ToSingleton"),i=e("../Controller/GameStateController"),a=e("../GamePlay/Model/GamePlayModel"),r=e("../Command/CommonSignal"),s=e("../Global/GameRule"),c=e("../Utils/Signal"),l=e("../Ad/FlyCnicornAd"),u=e("../Ad/WildAdButton"),h=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(c.BaseSignal);n.NextLevelSignal=h;var p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(c.BaseSignal);n.StartInitMapSignal=p;var d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(c.BaseSignal);n.StartCountSignal=d;var g=function(e){function t(){var t=e.call(this)||this;return t.isGameOver=!1,t.playerModel=null,t.hasStartCount=!1,t.bindSignal(),t}return __extends(t,e),Object.defineProperty(t.prototype,"Model",{get:function(){return this.playerModel?this.playerModel:this.playerModel=new a.GamePlayModel},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"TimeLeft",{get:function(){return this.Model.Time},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"PlayerScore",{get:function(){return this.Model.PlayerScore},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"NoviceScore",{get:function(){return this.Model.NoviceScore},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"PointSpread",{get:function(){return this.Model.ScoreSpread},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"TimeBonus",{get:function(){return this.Model.Timebonus},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Theme",{get:function(){return this.Model.Theme},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Level",{get:function(){return this.Model.Level},set:function(e){this.Model.Level=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"PauseScore",{get:function(){return this.Model.PauseScore},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"FreePauseCount",{get:function(){return Math.max(0,s.FreePauseLimit-this.Model.PauseCount)},enumerable:!0,configurable:!0}),t.prototype.bindSignal=function(){},t.prototype.initGametheme=function(){p.inst.dispatch(),this.Model.initGametheme()},t.prototype.getTotalScore=function(){return this.Model.TotalScore},t.prototype.addPauseCount=function(){this.Model.addPauseCount()},t.prototype.setTotalTime=function(e){this.Model.Time=e,r.UpdateTimeNumber.inst.dispatchTwo(this.Model.Time,0)},t.prototype.addGameTime=function(e){i.GameStateController.inst.isPause()||0==i.GameStateController.inst.isRoundStart()||this.isGameOver||(0==this.hasStartCount&&(this.hasStartCount=!0,d.inst.dispatch()),this.Model.Time+=e,this.Model.addScaleCountDown(e),l.default.ShowTimeRest>0&&(l.default.ShowTimeRest+=e,l.default.ShowTimeRest<=0&&l.ShowFlyCnicornSignal.inst.dispatch()),r.UpdateTimeNumber.inst.dispatchTwo(this.Model.Time,Math.abs(e)),r.TimeAnimationStateChanged.inst.dispatchOne(this.Model.Time<=30),this.Model.Time<=0&&(this.Model.checkCompleteScore(),i.GameStateController.inst.roundEnd(i.RoundEndType.TimeUp)))},t.prototype.getScoreByType=function(e){return this.Model.getScoreByType(e)},t.prototype.dump=function(){this.Model.dump()},t.prototype.init=function(){this.Model.initGameData()},t.prototype.gameReadyToStart=function(){r.GameStartSignal.inst.dispatch(),console.log("gameReadyToStart"),u.WildButtonReadySignal.inst.dispatch()},t.prototype.gameReadyShow=function(){this.gameReadyToStart()},t.prototype.testNextLevel=function(){this.Level>=s.GetTotalLevel()?this.Level=0:this.Level++},t.prototype.testScale=function(e){},t.prototype.testGameComplete=function(){setTimeout(function(){i.GameStateController.inst.roundEnd(i.RoundEndType.Complete)},200)},t.prototype.testGameOver=function(){i.GameStateController.inst.roundEnd(i.RoundEndType.Over)},t.prototype.testTimeUp=function(){i.GameStateController.inst.roundEnd(i.RoundEndType.TimeUp)},t.prototype.testOutOfMove=function(){i.GameStateController.inst.roundEnd(i.RoundEndType.OutOfMove)},t}(o.SingleTon());n.PlayModelProxy=g,!CELER_X&&(window.Game=g.inst),cc._RF.pop()},{"../Ad/FlyCnicornAd":"FlyCnicornAd","../Ad/WildAdButton":"WildAdButton","../Command/CommonSignal":"CommonSignal","../Controller/GameStateController":"GameStateController","../GamePlay/Model/GamePlayModel":"GamePlayModel","../Global/GameRule":"GameRule","../Utils/Signal":"Signal","../Utils/ToSingleton":"ToSingleton"}],PolygonDataModel:[function(e,t,n){"use strict";cc._RF.push(t,"1b43dCtSHhAHqqUgOK9tn3Q","PolygonDataModel"),Object.defineProperty(n,"__esModule",{value:!0});var o=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.polygon=null,t}return __extends(t,e),t.prototype.load=function(e,t,n){var o=this;cc.loader.loadRes(e,function(e,t){n&&n(e/t)},function(e,n){e?console.error("load polygon err:",e):(o.polygon=n.json,t(o.polygon))})},t.prototype.getPoints=function(e){return this.polygon[e]},t.prototype.getData=function(){return this.polygon},t}(e("../utils/ToSingleton").SingleTon());n.PolygonDataModel=o,cc._RF.pop()},{"../utils/ToSingleton":"ToSingleton"}],PolygonPacker:[function(e,t,n){"use strict";cc._RF.push(t,"c61fc/8ZHJN15NTGNU2O3+J","PolygonPacker"),Object.defineProperty(n,"__esModule",{value:!0});var o,i=e("../Factory/GameFactory"),a=e("../Utils/Cocos"),r=e("../Utils/Signal"),s=e("../utils/ToSingleton"),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(r.BaseSignal);n.GridEmployStateChangedSignal=c,function(e){e[e.Free=0]="Free",e[e.Abandoned=1]="Abandoned",e[e.Employed=2]="Employed"}(o=n.EmployState||(n.EmployState={}));var l=function(){function e(e,t,n,i){this.rect=e,this.id="i:"+t+" - j:"+n,this._i=t,this._j=n,this.employState=o.Free,i&&u.inst.dispatchOne(this)}return Object.defineProperty(e.prototype,"Rect",{get:function(){return this.rect},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"i",{get:function(){return this._i},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"j",{get:function(){return this._j},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ID",{get:function(){return this.id},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"State",{get:function(){return this.employState},set:function(e){e!=this.employState&&(this.employState=e,c.inst.dispatchOne(this))},enumerable:!0,configurable:!0}),e.prototype.removeSelf=function(){h.inst.dispatchOne(this)},e}();n.Grid=l;var u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(r.BaseSignal);n.CreateDebugGridSignal=u;var h=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(r.BaseSignal);n.RemoveGridSignal=h;var p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.gridSize=10,t.step=10,t.freeGrid=[],t.polygons=[],t.lastHroizontalPlaceCount=0,t.horizontalPlaceCount=0,t.panelSize=cc.size(0,0),t.horizontalCount=0,t.verticalCount=0,t.showDebugGrid=!1,t.startPositionX=[],t.startPositionY=[],t.borderLeft=null,t.borderRight=null,t.borderTop=null,t.borderBot=null,t.timer={},t}return __extends(t,e),Object.defineProperty(t.prototype,"DrawDebug",{get:function(){return this.showDebugGrid&&!CELER_X},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"GridSize",{get:function(){return this.gridSize},enumerable:!0,configurable:!0}),t.prototype.checkTime=function(e){this.timer[e]=Date.now()},t.prototype.dumpTime=function(e){console.log(e," cost ",Date.now()-this.timer[e]," ms")},t.prototype.init=function(e,t,n,o,a,r){var s=this;return this.StartPositionX=0,this.StartPositionY=0,this.borderBot=r,this.borderLeft=n,this.borderRight=o,this.borderTop=a,this.gridSize=e,this.panelSize=t,new Promise(function(e,t){s.showDebugGrid&&!CELER_X?i.gFactory.addObject("Grid","/polygonData/Grid",100).then(function(){s.createGrid(!0),e(s)}).catch(function(e){t(e)}):e(s)})},t.prototype.createGrid=function(e){void 0===e&&(e=!1),this.horizontalCount=this.panelSize.width/this.gridSize,this.verticalCount=this.panelSize.height/this.gridSize;for(var t=0;t<this.verticalCount;t++)for(var n=0;n<this.horizontalCount;n++){var o=cc.rect(n*this.gridSize+this.gridSize/2,t*this.gridSize+this.gridSize/2,this.gridSize,this.gridSize),i=new l(o,t,n,e);this.freeGrid.push(i)}},t.prototype.getTransPoint=function(e,t){for(var n=[],o=0,i=e;o<i.length;o++){var r=i[o],s=cc.v2(r.x,r.y);a.RotatePoint(s,t.rotation),s.addSelf(t.position),n.push(s)}return n},t.prototype.checkGridEmploy=function(e,t){this.checkTime("checkGridEmploy");for(var n=this.getTransPoint(e,t),i=0,a=0,r=0,s=n;r<s.length;r++){var c=s[r];i=Math.max(c.x,i),a=Math.max(c.y,a)}for(var l=0,u=0;u<this.freeGrid.length;u++){var h=this.freeGrid[u];if(!(h.Rect.x>i)){if(h.Rect.y>a)break;cc.Intersection.rectPolygon(h.Rect,n)?(h.State=o.Employed,this.freeGrid.splice(u,1),u--,l++):h.Rect.x<i&&h.Rect.y<t.y?(h.State=o.Abandoned,this.freeGrid.splice(u,1),u--,l++):l++}}console.log(" loop :",l),this.dumpTime("checkGridEmploy")},t.prototype.wrap=function(e){this.StartPositionX=0;for(var t=1e15,n=0,o=this.polygons;n<o.length;n++){for(var i=0,a=0,r=o[n];a<r.length;a++){var s=r[a];i=Math.max(s.y,i)}t=Math.min(t,i)}this.StartPositionY=t;var c=this.lastHroizontalPlaceCount;for(this.lastHroizontalPlaceCount=this.horizontalPlaceCount,this.horizontalPlaceCount=0;c-- >0;)this.polygons.pop();e.x=this.StartX,e.y=this.StartY},t.prototype.checkBorder=function(e,t){this.checkTime("checkBorder");for(var n=this.getTransPoint(t,e),o=cc.Intersection.rectPolygon(this.borderLeft.getBoundingBox(),n),i=cc.Intersection.rectPolygon(this.borderRight.getBoundingBox(),n),a=cc.Intersection.rectPolygon(this.borderBot.getBoundingBox(),n),r=cc.Intersection.rectPolygon(this.borderTop.getBoundingBox(),n),s=0;(o||i||a||r)&&s++<1e3;)o?(e.x+=this.step,i&&this.wrap(e)):i&&(e.x-=this.step),a&&(e.y+=this.step),r&&(e.y-=this.step),n=this.getTransPoint(t,e),o=cc.Intersection.rectPolygon(this.borderLeft.getBoundingBox(),n),i=cc.Intersection.rectPolygon(this.borderRight.getBoundingBox(),n),a=cc.Intersection.rectPolygon(this.borderBot.getBoundingBox(),n),r=cc.Intersection.rectPolygon(this.borderTop.getBoundingBox(),n);this.instersectGrid(e,t),this.dumpTime("checkBorder");for(var c=0,l=0,u=0,h=n=this.getTransPoint(t,e);u<h.length;u++){var p=h[u];c=Math.max(p.x,c),l=Math.max(p.y,l)}this.StartPositionX=c,this.polygons.unshift(n),this.horizontalPlaceCount++,this.checkGridEmploy(t,e)},t.prototype.instersectGrid=function(e,t){for(var n=!0,o=0;n&&o++<1e3;){var i=this.getTransPoint(t,e);if(n=!1,this.polygons.length>0&&cc.Intersection.polygonPolygon(this.polygons[0],i))e.x+=this.step,n=!0,cc.Intersection.rectPolygon(this.borderRight.getBoundingBox(),i)&&(this.wrap(e),this.checkBorder(e,t))}o>=1e3&&console.error("instersectGrid loop error:",o)},Object.defineProperty(t.prototype,"StartX",{get:function(){return!this.startPositionX||this.startPositionX.length<=0?0:this.startPositionX[0]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"StartPositionX",{set:function(e){this.startPositionX.unshift(e),this.startPositionX.length>2&&this.startPositionX.pop(),this.startPositionX.length},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"StartY",{get:function(){return!this.startPositionY||this.startPositionY.length<=0?0:this.startPositionY[0]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"StartPositionY",{set:function(e){this.startPositionY.unshift(e),this.startPositionY.length>2&&this.startPositionY.pop(),this.startPositionY.length},enumerable:!0,configurable:!0}),t.prototype.clearGrid=function(e){},t.prototype.testCheck=function(e,t){for(var n=this.getTransPoint(e,t),o=!1,i=0,a=this.polygons;i<a.length;i++){var r=a[i];if(cc.Intersection.polygonPolygon(r,n)){o=!0;break}}t.color=o?cc.Color.GREEN:cc.Color.WHITE},t}(s.SingleTon());n.PolygonPacker=p,cc._RF.pop()},{"../Factory/GameFactory":"GameFactory","../Utils/Cocos":"Cocos","../Utils/Signal":"Signal","../utils/ToSingleton":"ToSingleton"}],PolygonScene:[function(e,t,n){"use strict";cc._RF.push(t,"f6b48rn9TFDDJp5jipcaJe+","PolygonScene"),Object.defineProperty(n,"__esModule",{value:!0});var o=cc._decorator,i=o.ccclass,a=o.property,r=o.executeInEditMode,s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.Threshold=10,t.physicsUtils=null,t.totalCount=0,t.count=0,t.atlasList=[],t.polygonData={},t}return __extends(t,e),Object.defineProperty(t.prototype,"IpcListener",{get:function(){return null==this.ipcListener&&(this.ipcListener=new Editor.IpcListener),this.ipcListener},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Count",{get:function(){return this.count},set:function(e){this.count=e,this.PercentLabel.string=(this.count/this.totalCount*100).toFixed(2)+"%",this.count>=this.totalCount&&this.done()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"PercentLabel",{get:function(){return this.node.getChildByName("PercentLabel").getComponent(cc.Label)},enumerable:!0,configurable:!0}),t.prototype.onLoad=function(){0},t.prototype.show=function(){var e=this;cc.loader.loadResDir("./Items/",cc.SpriteFrame,function(t,n){if(t)Editor.Dialog.messageBox({type:"error",title:"Load Failed",message:" Load item atlas failed."});else{e.atlasList=n;for(var o=0,i=0,a=e.atlasList;i<a.length;i++){var r=a[i];!e.polygonData[r.name]||e.polygonData[r.name].length<4||setTimeout(function(t){var n=new cc.Node;n.addComponent(cc.Sprite).spriteFrame=t;var o=n.addComponent(cc.RigidBody);o.bullet=!0,o.linearDamping=.4,o.angularDamping=.4;var i=n.addComponent(cc.PhysicsPolygonCollider);i.friction=.5,i.density=1;for(var a=[],r=0,s=e.polygonData[t.name];r<s.length;r++){var c=s[r];a.push(cc.v2(c.x,c.y))}i.points=a,setTimeout(function(t){e.node.addChild(t),console.log(" count:",e.node.childrenCount)},1e3,n)},1e3*o++,r)}}})},t.prototype.startGeneratePolygonData=function(){var e=this;Editor.info(" startGeneratePolygonData "),cc.loader.loadResDir("./Items/",cc.SpriteFrame,function(t,n){t?Editor.Dialog.messageBox({type:"error",title:"Load Failed",message:" Load item atlas failed."}):(e.atlasList=n,e.totalCount=n.length,e.Count=0,Editor.assetdb.createOrSave("db://assets/resources/polygonData/polygon.json","{}",function(){}),e.polygonData={},Editor.info(" start generate "),e.generateByAtlasList())})},t.prototype.generateByAtlasList=function(){this.atlasList.length<=0||(Editor.info(" start generate "+this.atlasList.length),this.generateByAtlas(this.atlasList))},t.prototype.generateByAtlas=function(e,t){var n=this;void 0===t&&(t=0);var o=new cc.Node,i=e[t];Editor.info(t+"-"+i.name),o.addComponent(cc.Sprite).spriteFrame=i;var a=o.addComponent(cc.PolygonCollider);this.node.addChild(o),this.physicsUtils.resetPoints(a,{threshold:this.Threshold}),setTimeout(function(){if(a.points.length<4)Editor.error(" points error:"+i.name);else{n.polygonData[i.name]=[];for(var r=0,s=a.points;r<s.length;r++){var c=s[r];n.polygonData[i.name].push({x:c.x,y:c.y})}}o.destroy(),n.Count++,++t>=e.length||n.generateByAtlas(e,t)},5e3)},t.prototype.done=function(){Editor.assetdb.createOrSave("db://assets/resources/polygonData/polygon.json",JSON.stringify(this.polygonData),function(e){e?Editor.Dialog.messageBox({type:"error",title:"Gen failed.",message:" Generate polygon data failed."}):Editor.Dialog.messageBox({type:"info",title:"Gen done",message:" Generate polygon data success."})})},__decorate([a],t.prototype,"Threshold",void 0),t=__decorate([i,r],t)}(cc.Component);n.default=s,cc._RF.pop()},{}],PositionView:[function(e,t,n){"use strict";cc._RF.push(t,"416f296ZMZPEaWAE2E6IRlj","PositionView"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("./EaseBaseView"),i=cc._decorator,a=i.ccclass,r=(i.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.startPos=cc.Vec2.ZERO,t}return __extends(t,e),Object.defineProperty(t.prototype,"TargetPos",{get:function(){return cc.v2(this.Target.x,this.Target.y)},enumerable:!0,configurable:!0}),t.prototype.canUpdate=function(){return!0},t.prototype.onLoad=function(){0},t.prototype.start=function(){},t.prototype.onPositionChanged=function(e,t,n,o){void 0===o&&(o=0),this.startPos=this.node.position.clone(),this.startUpdate(new cc.Vec3(e.x,e.y,0),t,n,o)},t.prototype.onStep=function(){this.node.x=this.ease(this.startPos.x,this.Target.x),this.node.y=this.ease(this.startPos.y,this.Target.y)},t.prototype.onComplete=function(){this.node.setPosition(cc.v2(this.Target.x,this.Target.y))},t=__decorate([a],t)}(o.default));n.default=r,cc._RF.pop()},{"./EaseBaseView":"EaseBaseView"}],PrefabBaseView:[function(e,t,n){"use strict";cc._RF.push(t,"f24ed/ng45Kt5VKvqibEbvg","PrefabBaseView"),Object.defineProperty(n,"__esModule",{value:!0});var o=cc._decorator,i=o.ccclass,a=(o.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.model=null,t}return __extends(t,e),t.prototype.onLoad=function(){},t.prototype.reuse=function(e){this.model=e,this.onReuse()},t.prototype.unuse=function(){this.model,this.model=null,this.onUnuse()},t.prototype.onReuse=function(){console.warn(" should override onReuse.")},t.prototype.onUnuse=function(){console.warn(" should override onUnuse.")},t=__decorate([i],t)}(cc.Component));n.default=a,cc._RF.pop()},{}],Random:[function(e,t,n){"use strict";cc._RF.push(t,"114f9Vox8JGQbohBr4HFlkf","Random"),Object.defineProperty(n,"__esModule",{value:!0});var o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(e("./Signal").BaseSignal);n.RandomSeedInitSignal=o;var i=function(){function e(){}return e.seededRandom=function(e,t,n){return t+1e6*((1711*e+88888)%302654/302654+(1722*e+55555)%302665/302665+(1755*e+23333)%302766/302766)%1e6/1e6*(n-t)},e.getRandom=function(e,t){void 0===e&&(e=0),void 0===t&&(t=1);var n=this.randomSeed,o=this.seededRandom(n,e,t),i=Math.floor(this.seededRandom(n,1,302766));return this.randomSeed+=i,o},e.setRandomSeed=function(e){console.log(" set random seed:",e),this.randomSeed=e,this.sharedSeed=e,o.inst.dispatchOne(e)},e.randomRoundToInt=function(e,t){return void 0===e&&(e=0),void 0===t&&(t=1),Math.round(this.getRandom(e,t))},e.randomFloorToInt=function(e,t){return void 0===e&&(e=0),void 0===t&&(t=1),Math.floor(this.getRandom(e,t))},e.randomCeilToInt=function(e,t){return void 0===e&&(e=0),void 0===t&&(t=1),Math.ceil(this.getRandom(e,t))},e.clamp=function(e,t,n){return Math.max(t,Math.min(e,n))},e.randomSeed=Math.random(),e.sharedSeed=Math.random(),e}();n.Random=i,cc._RF.pop()},{"./Signal":"Signal"}],ResourceController:[function(e,t,n){"use strict";cc._RF.push(t,"d264b/eizRMLqzXH1k4Oll+","ResourceController"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../Utils/ToSingleton"),i=e("../Utils/HashMap");n.Title={Complete:"bg_font_complete",CompleteAni:"ae_complete",TimeUp:"bg_font_time'sup",Over:"bg_font_gameover",OutOfMove:"bg_font_gameover"},n.PauseFont={HasFree:"bg_fontfree",NoneFree:"bg_fontnofree"},n.Font={TotalScore:"totalScore",ResultScore:"resultScore",TimeWhite:"TimeWhite",TimeRed:"TimeRed",AddScore:"addScore",SubScore:"subScore",ShowScore:"showScore"},function(e){e[e.UI=0]="UI",e[e.GamePlay=1]="GamePlay"}(n.AnimationType||(n.AnimationType={}));var a=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.fontMap=new i.HashMap,t.UIAtlas=null,t.ResultAtlas=null,t.PauseAtlas=null,t.Animations=new i.HashMap,t.ItemAtlas=new i.HashMap,t}return __extends(t,e),t.prototype.setFont=function(e,t){this.fontMap.add(e,t)},t.prototype.setAtlas=function(e){console.assert(null!=e,"game atlas is null!"),this.UIAtlas=e},t.prototype.setResultAtlas=function(e){console.assert(null!=e,"game atlas is null!"),this.ResultAtlas=e},t.prototype.setPauseAtlas=function(e){console.assert(null!=e,"game atlas is null!"),this.PauseAtlas=e},t.prototype.getTitleSprite=function(e){return this.UIAtlas.getSpriteFrame(e)},t.prototype.getResultSprite=function(e){return this.ResultAtlas.getSpriteFrame(e)},t.prototype.getAltas=function(e){return this.UIAtlas.getSpriteFrame(e)},t.prototype.getPauseAtlas=function(e){return this.PauseAtlas.getSpriteFrame(e)},t.prototype.pushItemAtlas=function(e,t){this.ItemAtlas.add(e,t)},t.prototype.getItemSprite=function(e,t){return this.ItemAtlas.has(e)?this.ItemAtlas.get(e).getSpriteFrame(t):null},t.prototype.pushAnimationAtlas=function(e,t){console.assert(null!=t,"animation atlas is null!"),this.Animations.add(e,t)},t.prototype.getAnimationAtlas=function(e,t){return this.Animations.get(e).getSpriteFrame(t)},t.prototype.getAddScoreFont=function(){return this.fontMap.get(n.Font.AddScore)},t.prototype.getSubScoreFont=function(){return this.fontMap.get(n.Font.SubScore)},t.prototype.getSoundDisabled=function(){return this.PauseAtlas.getSpriteFrame("btn_no sound")},t.prototype.getSoundEnable=function(){return this.PauseAtlas.getSpriteFrame("btn_sound")},t.prototype.getPauseFont=function(e){return this.PauseAtlas.getSpriteFrame(e)},t.prototype.getTimeRedFont=function(){return this.fontMap.get(n.Font.TimeRed)},t.prototype.getTimeWhiteFont=function(){return this.fontMap.get(n.Font.TimeWhite)},t}(o.SingleTon());n.ResourceController=a,cc._RF.pop()},{"../Utils/HashMap":"HashMap","../Utils/ToSingleton":"ToSingleton"}],ResultAnimation:[function(e,t,n){"use strict";cc._RF.push(t,"3ae5283yuFOVr64ADyd/C0J","ResultAnimation"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../Utils/FrameAniBase"),i=cc._decorator,a=i.ccclass,r=(i.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t=__decorate([a],t)}(o.default));n.default=r,cc._RF.pop()},{"../Utils/FrameAniBase":"FrameAniBase"}],ResultLayerView:[function(e,t,n){"use strict";cc._RF.push(t,"ba2b7WYGTNEqazUlmB5rAul","ResultLayerView"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../../View/BaseView"),i=e("../../../View/NumberChangedView"),a=e("../../../Command/CommonSignal"),r=e("../../../Controller/GameStateController"),s=e("../../../Controller/ResourceController"),c=e("../../../Model/PlayModelProxy"),l=e("../../../Utils/Celer/CelerSDK"),u=e("../../../Animation/ResultAnimation"),h=e("../../../Utils/Signal"),p=e("../../../table"),d=cc._decorator,g=d.ccclass,y=(d.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(h.BaseSignal));n.PlayResultAnimationSignal=y;var f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.CountTotal=3,t.count=0,t}return __extends(t,e),Object.defineProperty(t.prototype,"Root",{get:function(){return this.node.getChildByName("Root")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Title",{get:function(){return this.Root.getChildByName("Title").getComponent(cc.Sprite)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"TotalScore",{get:function(){return this.Root.getChildByName("TotalScore").getComponent(i.default)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"TimeBonus",{get:function(){return this.Root.getChildByName("TimeBonus").getComponent(i.default)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Score",{get:function(){return this.Root.getChildByName("ScoreLabel").getComponent(i.default)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Submit",{get:function(){return this.Root.getChildByName("Submit")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Content",{get:function(){return this.Root.getChildByName("Content").getComponent(cc.RichText)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Ani",{get:function(){return this.Root.getChildByName("Ani").getComponent(u.default)},enumerable:!0,configurable:!0}),t.prototype.onLoad=function(){this.node.active=!1,this.node.scale=1,a.OpenResultLayerSignal.inst.addListenerOne(this.onGameOver,this)},t.prototype.onGameOver=function(e){console.log("Open result:",r.RoundEndType[e]),this.Submit.scale=0,this.Content.string=lan.t(p.En_View.JieSuanJieMian,p.En_ID.DeFen),e==r.RoundEndType.TimeUp?this.Title.spriteFrame=s.ResourceController.inst.getResultSprite(s.Title.TimeUp):e==r.RoundEndType.Complete?this.Title.spriteFrame=s.ResourceController.inst.getResultSprite(s.Title.Complete):e==r.RoundEndType.OutOfMove?this.Title.spriteFrame=s.ResourceController.inst.getResultSprite(s.Title.OutOfMove):this.Title.spriteFrame=s.ResourceController.inst.getResultSprite(s.Title.Over),this.Title.node.scale=0,this.Root.scale=0,this.node.active=!0,this.Root.runAction(cc.sequence(cc.scaleTo(.1,.9,1.3),cc.scaleTo(.1,1.2,.9),cc.scaleTo(.1,1,1),cc.callFunc(this.showInfo.bind(this))))},Object.defineProperty(t.prototype,"Count",{get:function(){return this.count},set:function(e){var t=this;this.count!=e&&(this.count=e,console.log("count:",this.Count),this.Count>=this.CountTotal&&(a.ShowSubmitSignal.inst.dispatch(),this.Submit.runAction(cc.sequence(cc.scaleTo(.1,1.2),cc.scaleTo(.1,1),cc.callFunc(function(){t.Submit.once(cc.Node.EventType.TOUCH_END,function(){l.CelerSDK.inst.submitScore(c.PlayModelProxy.inst.getTotalScore())},t),CELER_X&&setTimeout(function(){l.CelerSDK.inst.submitScore(c.PlayModelProxy.inst.getTotalScore())},5e3)})))))},enumerable:!0,configurable:!0}),t.prototype.showInfo=function(){var e=this;this.Count=0,this.TotalScore.STEP=150,this.TimeBonus.STEP=150,this.Score.STEP=150,this.Ani.play();var t=function(){a.ScoreCountingSignal.inst.dispatch()};this.TimeBonus.onStep=t,this.TotalScore.onStep=t,this.Score.onStep=t,this.Title.node.runAction(cc.sequence(cc.scaleTo(.1,1.5),cc.scaleTo(.1,1),cc.scaleTo(.1,1.2),cc.scaleTo(.1,1))),this.TimeBonus.onNumberChanged(c.PlayModelProxy.inst.TimeBonus,function(){e.Count++,console.log("TimeBonus Done")}),this.TotalScore.onNumberChanged(c.PlayModelProxy.inst.getTotalScore(),function(){e.Count++,console.log("TotalScore Done")}),this.Score.onNumberChanged(c.PlayModelProxy.inst.getTotalScore()-c.PlayModelProxy.inst.TimeBonus,function(){e.Count++,console.log("Score Done")})},t=__decorate([g],t)}(o.default);n.default=f,cc._RF.pop()},{"../../../Animation/ResultAnimation":"ResultAnimation","../../../Command/CommonSignal":"CommonSignal","../../../Controller/GameStateController":"GameStateController","../../../Controller/ResourceController":"ResourceController","../../../Model/PlayModelProxy":"PlayModelProxy","../../../Utils/Celer/CelerSDK":"CelerSDK","../../../Utils/Signal":"Signal","../../../View/BaseView":"BaseView","../../../View/NumberChangedView":"NumberChangedView","../../../table":"table"}],RevertButtonView:[function(e,t,n){"use strict";cc._RF.push(t,"3e84eq+F3NMM5PkgzsJHXMl","RevertButtonView"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../../Controller/GameStateController"),i=e("../../../Utils/Signal"),a=e("../../../View/SingleTouchView"),r=e("../../Model/GamePlayModel"),s=cc._decorator,c=s.ccclass,l=(s.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(i.BaseSignal));n.RevertSignal=l;var u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),Object.defineProperty(t.prototype,"Button",{get:function(){return this.getComponent(cc.Button)},enumerable:!0,configurable:!0}),t.prototype.onLoad=function(){e.prototype.onLoad.call(this),this.Button.interactable=!1,r.RevertButtonStateChangedSignal.inst.addListenerOne(this.onButtonStateChanged,this)},t.prototype.onTouchEnd=function(){o.GameStateController.inst.isGameOver()||0==o.GameStateController.inst.isRoundStart()||0!=this.Button.interactable&&(console.log("revert"),l.inst.dispatch())},t.prototype.onButtonStateChanged=function(e){this.Button.interactable=e},t=__decorate([c],t)}(a.default);n.default=u,cc._RF.pop()},{"../../../Controller/GameStateController":"GameStateController","../../../Utils/Signal":"Signal","../../../View/SingleTouchView":"SingleTouchView","../../Model/GamePlayModel":"GamePlayModel"}],RotationView:[function(e,t,n){"use strict";cc._RF.push(t,"f3329CeqRdN6ZoUyx7znT4N","RotationView"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("./EaseBaseView"),i=cc._decorator,a=i.ccclass,r=(i.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.startRotation=0,t}return __extends(t,e),t.prototype.onLoad=function(){0},t.prototype.canUpdate=function(){return!0},t.prototype.start=function(){},t.prototype.onRotationChanged=function(e,t,n,o){void 0===o&&(o=0),this.startRotation=this.node.rotation,this.startUpdate(new cc.Vec3(e,e,e),t,n,o)},t.prototype.onStep=function(){this.node.rotation=this.ease(this.startRotation,this.Target.x)},t.prototype.onComplete=function(){this.node.setRotation(this.Target.x)},t=__decorate([a],t)}(o.default));n.default=r,cc._RF.pop()},{"./EaseBaseView":"EaseBaseView"}],ScaleView:[function(e,t,n){"use strict";cc._RF.push(t,"b6981r0u55OyqSF4preRXtY","ScaleView"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("./EaseBaseView"),i=cc._decorator,a=i.ccclass,r=(i.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.startScale=cc.Vec2.ZERO,t}return __extends(t,e),t.prototype.onLoad=function(){0},t.prototype.canUpdate=function(){return!0},t.prototype.start=function(){},t.prototype.onScaleChanged=function(e,t,n,o){void 0===o&&(o=0),this.startScale=cc.v2(this.node.scaleX,this.node.scaleY),this.startUpdate(new cc.Vec3(e.x,e.y,0),t,n,o)},t.prototype.onStep=function(){this.node.scaleX=this.ease(this.startScale.x,this.Target.x),this.node.scaleY=this.ease(this.startScale.y,this.Target.y)},t.prototype.onComplete=function(){this.node.scaleX=this.Target.x,this.node.scaleY=this.Target.y},t=__decorate([a],t)}(o.default));n.default=r,cc._RF.pop()},{"./EaseBaseView":"EaseBaseView"}],ScoreFloat:[function(e,t,n){"use strict";cc._RF.push(t,"9a0bdeGuRVNJo7rEuZpmiZ9","ScoreFloat"),Object.defineProperty(n,"__esModule",{value:!0});var o=cc._decorator,i=o.ccclass,a=o.property,r=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.label=null,t.text="hello",t}return __extends(t,e),t.prototype.start=function(){},__decorate([a(cc.Label)],t.prototype,"label",void 0),__decorate([a],t.prototype,"text",void 0),t=__decorate([i],t)}(cc.Component);n.default=r,cc._RF.pop()},{}],ScoreLabelView:[function(e,t,n){"use strict";cc._RF.push(t,"5857dLL+ulDqKijkly4V/xN","ScoreLabelView"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../../Command/CommonSignal"),i=e("../../../Controller/ResourceController"),a=e("../../../Factory/GameFactory"),r=e("../../../Model/PlayModelProxy"),s=e("../../../Utils/Cocos"),c=e("../../../Utils/Signal"),l=e("../../../View/NumberChangedView"),u=cc._decorator,h=u.ccclass,p=u.property,d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(c.BaseSignal);n.PLayerScoreInitSignal=d;var g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.ScoreFloatRoot=null,t}return __extends(t,e),t.prototype.onLoad=function(){var e=this;o.PlayerScoreChanged.inst.addListenerFour(this.onScoreChanged,this),d.inst.addListenerOne(function(t){e.setNumber(t)},this)},t.prototype.onScoreChanged=function(e,t,n,o){var c=this;if(null==this.ScoreFloatRoot||t<0)this.onNumberChanged(r.PlayModelProxy.inst.PlayerScore);else{var l=a.gFactory.getObj("AddScore"),u=l.getComponent(cc.Label);u.font=t>=0?i.ResourceController.inst.getAddScoreFont():i.ResourceController.inst.getSubScoreFont(),u.string="/"+Math.abs(t),this.ScoreFloatRoot.addChild(l);var h=cc.v2(0,0);o&&(h=s.ConvertToNodeSpaceAR(o,this.ScoreFloatRoot));var p=s.ConvertToNodeSpaceAR(this.node,this.ScoreFloatRoot);l.setPosition(h);var d=s.Distance(h,p)/2500;l.scale=0,l.runAction(cc.sequence(cc.scaleTo(0,0),cc.scaleTo(.1,1.2),cc.scaleTo(.1,1),cc.moveTo(d,p),cc.callFunc(function(){a.gFactory.putObj("AddScore",l)}))),setTimeout(function(){c.onNumberChanged(r.PlayModelProxy.inst.PlayerScore)},200+1e3*d)}},__decorate([p(cc.Node)],t.prototype,"ScoreFloatRoot",void 0),t=__decorate([h],t)}(l.default);n.default=g,cc._RF.pop()},{"../../../Command/CommonSignal":"CommonSignal","../../../Controller/ResourceController":"ResourceController","../../../Factory/GameFactory":"GameFactory","../../../Model/PlayModelProxy":"PlayModelProxy","../../../Utils/Cocos":"Cocos","../../../Utils/Signal":"Signal","../../../View/NumberChangedView":"NumberChangedView"}],Signal:[function(e,t,n){"use strict";cc._RF.push(t,"5e03fyVNOZPs7lLvT6ttunM","Signal"),Object.defineProperty(n,"__esModule",{value:!0});var o=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.listenerMap=[],t.onceListenerMap=[],t}return __extends(t,e),t.prototype.doDispatch=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.excuteListener.apply(this,e),this.excuteOnce.apply(this,e)},t.prototype.excuteListener=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(this.listenerMap&&this.listenerMap.length>0)for(var n=0,o=this.listenerMap;n<o.length;n++){var i=o[n];i.callback.apply(i.target,e)}},t.prototype.excuteOnce=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(this.onceListenerMap&&this.onceListenerMap.length>0){for(var n=0,o=this.onceListenerMap;n<o.length;n++){var i=o[n];i.callback.apply(i.target,e)}this.onceListenerMap.length=0}},t.prototype.listen=function(e,t){this.listenerMap.push({callback:e,target:t})},t.prototype.listenOnce=function(e,t){this.onceListenerMap.push({callback:e,target:t})},t.prototype.removeListener=function(e,t){if(this.listenerMap&&this.listenerMap.length>0)for(var n=0;n<this.listenerMap.length;++n){var o=this.listenerMap[n];o.callback==e&&o.target==t&&(this.listenerMap.splice(n,1),--n)}},t.prototype.removeTarget=function(e){if(this.listenerMap&&this.listenerMap.length>0)for(var t=0;t<this.listenerMap.length;++t){this.listenerMap[t].target==e&&(this.listenerMap.splice(t,1),--t)}},t.prototype.dispatch=function(){this.doDispatch(null)},t.prototype.dispatchOne=function(e){this.doDispatch(e)},t.prototype.dispatchTwo=function(e,t){this.doDispatch(e,t)},t.prototype.dispatchThree=function(e,t,n){this.doDispatch(e,t,n)},t.prototype.dispatchFour=function(e,t,n,o){this.doDispatch(e,t,n,o)},t.prototype.dispatchFive=function(e,t,n,o,i){this.doDispatch(e,t,n,o,i)},t.prototype.addListener=function(e,t){this.listen(e,t)},t.prototype.addOnce=function(e,t){this.listenOnce(e,t)},t.prototype.addListenerOne=function(e,t){this.listen(e,t)},t.prototype.addListenerTwo=function(e,t){this.listen(e,t)},t.prototype.addListenerThree=function(e,t){this.listen(e,t)},t.prototype.addListenerFour=function(e,t){this.listen(e,t)},t.prototype.addListenerFive=function(e,t){this.listen(e,t)},t.prototype.addOnceOne=function(e,t){this.listenOnce(e,t)},t.prototype.addOnceTwo=function(e,t){this.listenOnce(e,t)},t.prototype.addOnceThree=function(e,t){this.listenOnce(e,t)},t.prototype.addOnceFour=function(e,t){this.listenOnce(e,t)},t.prototype.addOnceFive=function(e,t){this.listenOnce(e,t)},t}(e("./ToSingleton").SingleTon());n.BaseSignal=o,cc._RF.pop()},{"./ToSingleton":"ToSingleton"}],SingleTouchMediator:[function(e,t,n){"use strict";cc._RF.push(t,"e1695pPIshGg5cBwRP4Oun7","SingleTouchMediator"),Object.defineProperty(n,"__esModule",{value:!0});e("../AlgorithmUtils/MinimumPotentialLayout/MinPotentialPacker"),e("../App/App"),e("../GamePlay/Model/GameLogic");var o=cc._decorator,i=o.ccclass,a=(o.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._touchid=null,t}return __extends(t,e),t.prototype.bind=function(e){this.view=e},Object.defineProperty(t.prototype,"View",{get:function(){return console.assert(null!=this.view," view is null"),this.view},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"touchid",{get:function(){return this._touchid},set:function(e){this._touchid=e,window.OpenTouchIDlog&&console.log(this.node.name," touchid :",this._touchid)},enumerable:!0,configurable:!0}),t.prototype.onRegister=function(){this.node.targetOff(this),this.node._onSetParent=this._onSetParent.bind(this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this.touchCancel,this),this.node.on(cc.Node.EventType.TOUCH_END,this.touchEnd,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this.touchMove,this),this.node.on(cc.Node.EventType.TOUCH_START,this.touchStart,this)},t.prototype.onUnregister=function(){this.node.targetOff(this)},t.prototype.touchStart=function(e){if(null!==this.touchid&&this.touchid!==e.getID())return console.log(this.node.name," touch start  touchid is different: ",this.touchid,e.getID()),void e.stopPropagation();this.touchid=e.getID(),this.onTouchStart(e)},t.prototype.touchMove=function(e){null===this.touchid||this.touchid===e.getID()?(this.touchid=e.getID(),this.onTouchMove(e)):e.stopPropagation()},t.prototype.touchEnd=function(e){if(null!==this.touchid&&this.touchid!==e.getID())return console.log(this.node.name," touch end  touchid is different: ",this.touchid,e.getID()),void e.stopPropagation();null!=this.touchid?(this.touchid=null,this.onTouchEnd(e),this.OnClick()):e.stopPropagation()},t.prototype.touchCancel=function(e){if(null!==this.touchid&&this.touchid!==e.getID())return console.log(this.node.name," touch cancel  touchid is different: ",this.touchid,e.getID()),void e.stopPropagation();null!=this.touchid?(this.touchid=null,this.onTouchCancel(e)):e.stopPropagation()},t.prototype.OnClick=function(){},t.prototype.onTouchStart=function(e){},t.prototype.onTouchMove=function(e){},t.prototype.onTouchEnd=function(e){},t.prototype.onTouchCancel=function(e){},t.prototype.onSetParent=function(e){},t.prototype._onSetParent=function(e){null==e&&(this.touchid=null),this.onSetParent(e)},t=__decorate([i],t)}(cc.Component));n.default=a,cc._RF.pop()},{"../AlgorithmUtils/MinimumPotentialLayout/MinPotentialPacker":"MinPotentialPacker","../App/App":"App","../GamePlay/Model/GameLogic":"GameLogic"}],SingleTouchView:[function(e,t,n){"use strict";cc._RF.push(t,"85688DQVyhPRqaAh/y2/Qug","SingleTouchView"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("./BaseView"),i=cc._decorator,a=i.ccclass,r=(i.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._touchid=null,t}return __extends(t,e),Object.defineProperty(t.prototype,"touchid",{get:function(){return this._touchid},set:function(e){this._touchid=e,window.OpenTouchIDlog&&console.log(this.node.name," touchid :",this._touchid)},enumerable:!0,configurable:!0}),t.prototype.onLoad=function(){this.node._onSetParent=this._onSetParent.bind(this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this.touchCancel,this),this.node.on(cc.Node.EventType.TOUCH_END,this.touchEnd,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this.touchMove,this),this.node.on(cc.Node.EventType.TOUCH_START,this.touchStart,this)},t.prototype.start=function(){},t.prototype.touchStart=function(e){null===this.touchid||this.touchid===e.getID()?(this.touchid=e.getID(),this.onTouchStart(e)):console.log(this.node.name," touch start  touchid is different! ")},t.prototype.touchMove=function(e){null!==this.touchid&&this.touchid!==e.getID()||(this.touchid=e.getID(),this.onTouchMove(e))},t.prototype.touchEnd=function(e){null===this.touchid||this.touchid===e.getID()?(this.touchid=null,this.onTouchEnd(e)):console.log(this.node.name," touch end  touchid is different! ")},t.prototype.touchCancel=function(e){null===this.touchid||this.touchid===e.getID()?(this.touchid=null,this.onTouchCancel(e)):console.log(this.node.name," touch cancel  touchid is different! ")},t.prototype.onTouchStart=function(e){},t.prototype.onTouchMove=function(e){},t.prototype.onTouchEnd=function(e){},t.prototype.onTouchCancel=function(e){},t.prototype.onSetParent=function(e){},t.prototype._onSetParent=function(e){null==e&&(this.touchid=null),this.onSetParent(e)},t=__decorate([a],t)}(o.default));n.default=r,cc._RF.pop()},{"./BaseView":"BaseView"}],SkewView:[function(e,t,n){"use strict";cc._RF.push(t,"dec79oJ2D1Ju7yCFAAR3rSI","SkewView"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("./EaseBaseView"),i=cc._decorator,a=i.ccclass,r=(i.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.startSkew=cc.Vec2.ZERO,t}return __extends(t,e),t.prototype.onLoad=function(){0},t.prototype.start=function(){},t.prototype.canUpdate=function(){return!0},t.prototype.onSkewChanged=function(e,t,n,o){void 0===o&&(o=0),this.startSkew=cc.v2(this.node.skewX,this.node.skewY),this.startUpdate(new cc.Vec3(e.x,e.y,0),t,n,o)},t.prototype.onStep=function(){this.node.skewX=this.ease(this.startSkew.x,this.Target.x),this.node.skewY=this.ease(this.startSkew.y,this.Target.y)},t.prototype.onComplete=function(){this.node.skewX=this.Target.x,this.node.skewY=this.Target.y},t=__decorate([a],t)}(o.default));n.default=r,cc._RF.pop()},{"./EaseBaseView":"EaseBaseView"}],SliderView:[function(e,t,n){"use strict";cc._RF.push(t,"2c746YFJCxKFJ34ypIaA1v3","SliderView"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../Utils/Random"),i=cc._decorator,a=i.ccclass,r=i.property,s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.Progress=null,t.Slider=null,t.totalLength=0,t}return __extends(t,e),Object.defineProperty(t.prototype,"Percent",{get:function(){return this.Slider.progress},set:function(e){this.Slider.progress=o.Random.clamp(e,0,1),this.Progress.width=this.Slider.node.width*this.Slider.progress},enumerable:!0,configurable:!0}),t.prototype.onLoad=function(){this.Slider.node.on("slide",this.onSlided,this),this.totalLength=this.Progress.width,this.Slider.node.width=this.totalLength},t.prototype.onSlided=function(){this.Progress.width=this.totalLength*this.Slider.progress,this.onProgress&&this.onProgress(this.Slider.progress)},t.prototype.start=function(){},t.prototype.onProgress=function(e){},__decorate([r(cc.Node)],t.prototype,"Progress",void 0),__decorate([r(cc.Slider)],t.prototype,"Slider",void 0),t=__decorate([a],t)}(cc.Component);n.default=s,cc._RF.pop()},{"../Utils/Random":"Random"}],SoundButtonView:[function(e,t,n){"use strict";cc._RF.push(t,"6d699bXGkJBYb+wyjeQyALI","SoundButtonView"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../../Controller/ResourceController"),i=e("../../../Manager/AudioManager"),a=e("../../../Utils/Signal"),r=e("../../../View/SingleTouchView"),s=cc._decorator,c=s.ccclass,l=(s.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(a.BaseSignal)),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),Object.defineProperty(t.prototype,"Sprite",{get:function(){return this.getComponent(cc.Sprite)},enumerable:!0,configurable:!0}),t.prototype.onLoad=function(){e.prototype.onLoad.call(this),this.updateState(),l.inst.addListener(this.updateState,this)},t.prototype.onTouchEnd=function(){i.gAudio.MusicVolume>0?(i.gAudio.setEffectVolume(0),i.gAudio.setMusicVolume(0)):(i.gAudio.setEffectVolume(1),i.gAudio.setMusicVolume(1)),l.inst.dispatch()},t.prototype.updateState=function(){var e=i.gAudio.MusicVolume;this.Sprite.spriteFrame=e>0?o.ResourceController.inst.getSoundEnable():o.ResourceController.inst.getSoundDisabled()},t=__decorate([c],t)}(r.default);n.default=u,cc._RF.pop()},{"../../../Controller/ResourceController":"ResourceController","../../../Manager/AudioManager":"AudioManager","../../../Utils/Signal":"Signal","../../../View/SingleTouchView":"SingleTouchView"}],StartGameCommand:[function(e,t,n){"use strict";cc._RF.push(t,"1db594KvoJIVbc+cwfogrGn","StartGameCommand"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../Command/CommonSignal"),i=e("../../Model/PlayModelProxy"),a=(CELER_X,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.execute=function(e){console.log("--------- excute StartGameCommand ---------"),this.normalInit(),i.PlayModelProxy.inst.initGametheme(),o.GameReadySignal.inst.dispatch()},t.prototype.testInit=function(){console.log("test init ."),i.PlayModelProxy.inst.init()},t.prototype.normalInit=function(){console.log("normal init ."),i.PlayModelProxy.inst.init()},t}(puremvc.SimpleCommand));n.StartGameCommand=a,cc._RF.pop()},{"../../Command/CommonSignal":"CommonSignal","../../Model/PlayModelProxy":"PlayModelProxy"}],StepManager:[function(e,t,n){"use strict";cc._RF.push(t,"83709TvPtJOVayPDGaPh6Ov","StepManager"),Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(){this.totalStep=[],this.curStep=[],this.loadTime={}}return e.prototype.register=function(e,t){this.completeCallback=e,this.totalStep=t;for(var n=0,o=t;n<o.length;n++){var i=o[n];this.loadTime[i]=Date.now()}},e.prototype.start=function(e){this.loadTime[e]=Date.now()},e.prototype.nextStep=function(e){if(this.totalStep.indexOf(e)<0)console.error(" \u6ca1\u6709\u8fd9\u4e00\u6b65\uff1a",e);else if(this.curStep.indexOf(e)>=0)console.warn(" \u6b65\u9aa4\u5df2\u5b8c\u6210\uff1a",e);else{this.curStep.push(e),this.curStep.sort(function(e,t){return e>t?-1:1}),this.totalStep.sort(function(e,t){return e>t?-1:1});var t=this.curStep.join("-"),n=this.totalStep.join("-"),o=Date.now()-this.loadTime[e];console.log(" cur step:",e,", cost time:",o," ms"),t==n&&(console.log(" step done"),this.totalStep.length=0,this.completeCallback(),this.completeCallback=null)}},e}();n.StepManager=o,cc._RF.pop()},{}],SubjectLabel:[function(e,t,n){"use strict";cc._RF.push(t,"82f9al/12BMjKb19IbgzXLO","SubjectLabel"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../../Global/GameRule"),i=e("../../../Model/PlayModelProxy"),a=e("../../../table"),r=e("../../../Utils/Signal"),s=e("../../Model/GameLogic"),c=e("../../Model/GamePlayModel"),l=e("../../Model/TypeModel"),u=e("./Subject"),h=cc._decorator,p=h.ccclass,d=(h.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(r.BaseSignal));n.UpdateTypeScore=d;var g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type=null,t}return __extends(t,e),Object.defineProperty(t.prototype,"Count",{get:function(){return this.node.getChildByName("Count").getComponent(cc.Label)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Score",{get:function(){return this.node.getChildByName("Score").getComponent(cc.Label)},enumerable:!0,configurable:!0}),t.prototype.onLoad=function(){var e=this;this.Count.node.color=cc.color(226,83,51),this.Count.string="0/"+o.GetCollectCount(),this.Score.string="+"+o.ScoreModel.GetScore(a.Random_Pool[this.type]),c.UpdateTypeLabelSignal.inst.addListenerOne(this.onTypeUpdate,this),d.inst.addListener(function(){e.type&&(e.Score.string="+"+o.ScoreModel.GetScore(a.Random_Pool[e.type]))},this),l.UpdateMatchTimes.inst.addListenerTwo(this.onMatchTimesUpdate,this),u.SubjectOkSignal.inst.addListenerOne(this.onSubjectOK,this),i.NextLevelSignal.inst.addListener(function(){e.type=null},this)},t.prototype.onSubjectOK=function(e){e==parseInt(this.node.name)&&(this.Count.node.color=cc.color(63,157,157),this.Score.string="",this.type=null)},t.prototype.onMatchTimesUpdate=function(e,t){e==parseInt(this.node.name)&&(this.Count.string=t+"/"+o.GetCollectCount())},t.prototype.onTypeUpdate=function(e){var t=parseInt(this.node.name)+e,n=s.GameLogic.inst.Types[t];n?(this.Count.node.color=cc.color(226,83,51),this.Count.string=n.MatchTimes+"/"+o.GetCollectCount(),this.type=n.SubType,this.Score.string="+"+o.ScoreModel.GetScore(a.Random_Pool[this.type])):console.error(" \u7c7b\u522bmodel\u4e0d\u5b58\u5728\uff1a",t,e)},t=__decorate([p],t)}(cc.Component);n.default=g,cc._RF.pop()},{"../../../Global/GameRule":"GameRule","../../../Model/PlayModelProxy":"PlayModelProxy","../../../Utils/Signal":"Signal","../../../table":"table","../../Model/GameLogic":"GameLogic","../../Model/GamePlayModel":"GamePlayModel","../../Model/TypeModel":"TypeModel","./Subject":"Subject"}],SubjectTap:[function(e,t,n){"use strict";cc._RF.push(t,"aa9f9Nkvf1DAJvDUYBiLh8C","SubjectTap"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../../Command/CommonSignal"),i=e("../../../Controller/GameStateController"),a=e("../../../Model/PlayModelProxy"),r=e("../../Model/GameLogic"),s=e("../../Model/GamePlayModel"),c=e("./Subject"),l=cc._decorator,u=l.ccclass,h=(l.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.y=0,t}return __extends(t,e),Object.defineProperty(t.prototype,"Tap",{get:function(){return this.node.getChildByName("tap")},enumerable:!0,configurable:!0}),t.prototype.onLoad=function(){var e=this;this.y=this.Tap.y,c.SubjectOkSignal.inst.addListenerOne(this.onSubjectOk,this),a.NextLevelSignal.inst.addListener(function(){e.getComponent(cc.Sprite).enabled=!0},this),o.GameStartSignal.inst.addListener(this.onReadyStart,this),s.UpdateTypeLabelSignal.inst.addListenerOne(this.onTypeUpdate,this)},t.prototype.onTypeUpdate=function(e){var t=parseInt(this.node.name)+e,n=r.GameLogic.inst.Types[t];i.GameStateController.inst.isReady&&n&&this.onReadyStart()},t.prototype.onReadyStart=function(){var e=this;this.Tap.runAction(cc.sequence(cc.moveTo(.1,cc.v2(this.Tap.x,this.y+900)),cc.scaleTo(.1,1.3),cc.scaleTo(.2,1),cc.delayTime(.8),cc.moveTo(.1,cc.v2(this.Tap.x,this.y)),cc.callFunc(function(){}))),setTimeout(function(){e.Tap.stopAllActions(),e.Tap.y=e.y},1400)},t.prototype.onSubjectOk=function(e){e==parseInt(this.node.name)&&(this.getComponent(cc.Sprite).enabled=!1)},t=__decorate([u],t)}(cc.Component));n.default=h,cc._RF.pop()},{"../../../Command/CommonSignal":"CommonSignal","../../../Controller/GameStateController":"GameStateController","../../../Model/PlayModelProxy":"PlayModelProxy","../../Model/GameLogic":"GameLogic","../../Model/GamePlayModel":"GamePlayModel","./Subject":"Subject"}],SubjectTypeLabel:[function(e,t,n){"use strict";cc._RF.push(t,"7bbc22NPA9BXYwN8/GGRxSQ","SubjectTypeLabel"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../../Command/CommonSignal"),i=e("../../../Controller/GameStateController"),a=e("../../Model/GameLogic"),r=e("../../Model/GamePlayModel"),s=cc._decorator,c=s.ccclass,l=(s.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.y=0,t}return __extends(t,e),Object.defineProperty(t.prototype,"Type",{get:function(){return this.node.getChildByName("Type").getComponent(cc.RichText)},enumerable:!0,configurable:!0}),t.prototype.onLoad=function(){this.y=this.node.y,this.Type.string="",r.UpdateTypeLabelSignal.inst.addListenerOne(this.onTypeUpdate,this),o.GameStartSignal.inst.addListenerOne(this.onReadyStart,this)},t.prototype.start=function(){},t.prototype.onReadyStart=function(e){var t=this;this.node.runAction(cc.sequence(cc.moveTo(.1,cc.v2(this.node.x,this.y+900)),cc.scaleTo(.1,1.3),cc.scaleTo(.2,1),cc.delayTime(.8),cc.moveTo(.1,cc.v2(this.node.x,this.y)),cc.callFunc(function(){}))),setTimeout(function(){t.node.stopAllActions(),t.node.y=t.y,i.GameStateController.inst.isReady||(i.GameStateController.inst.isReady=!0),e&&e()},1400)},t.prototype.onTypeUpdate=function(e){var t=parseInt(this.node.name)+e,n=a.GameLogic.inst.Types[t];n?(console.log("Type update:",this.node.name),this.Type.string=lan.t(n.Type,n.SubType),i.GameStateController.inst.isReady&&(i.GameStateController.inst.pause(!0),this.onReadyStart(function(){i.GameStateController.inst.resume()}))):console.error(" \u7c7b\u522bmodel\u4e0d\u5b58\u5728\uff1a",t,e)},t=__decorate([c],t)}(cc.Component));n.default=l,cc._RF.pop()},{"../../../Command/CommonSignal":"CommonSignal","../../../Controller/GameStateController":"GameStateController","../../Model/GameLogic":"GameLogic","../../Model/GamePlayModel":"GamePlayModel"}],Subject:[function(e,t,n){"use strict";cc._RF.push(t,"529f5OU/n9DgpWXPbsgeP1J","Subject"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../../Model/PlayModelProxy"),i=e("../../../Utils/Signal"),a=e("../Animation/TypeFinishLight"),r=e("../Animation/TypeFinishRing"),s=cc._decorator,c=s.ccclass,l=(s.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(i.BaseSignal));n.SubjectOkSignal=l;var u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(i.BaseSignal);n.SubjectAnimationDone=u;var h=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),Object.defineProperty(t.prototype,"Tag",{get:function(){return this.node.getChildByName("tagOK")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Finish1",{get:function(){return this.node.getChildByName("Finish1").getComponent(a.default)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Finish2",{get:function(){return this.node.getChildByName("Finish2").getComponent(r.default)},enumerable:!0,configurable:!0}),t.prototype.onLoad=function(){var e=this;this.Tag.active=!1,this.Finish1.node.active=!1,this.Finish2.node.active=!1,l.inst.addListenerOne(this.onSubjectOk,this),o.NextLevelSignal.inst.addListener(function(){e.Tag.active=!1},this)},t.prototype.playFinish1=function(){var e=this;this.Finish1.node.active=!0,this.Finish1.node.opacity=255,this.Finish1.play(),this.Finish1.onComplete=function(){e.Finish1.node.runAction(cc.sequence(cc.fadeOut(.1),cc.callFunc(function(){e.Finish1.node.active=!1})))}},t.prototype.playFinish2=function(){var e=this;this.Finish2.node.active=!0,this.Finish2.node.opacity=255,this.Finish2.play(),this.Finish2.onComplete=function(){setTimeout(function(){u.inst.dispatch()},300),e.Finish2.node.runAction(cc.sequence(cc.fadeOut(.1),cc.callFunc(function(){e.Finish2.node.active=!1})))}},t.prototype.onSubjectOk=function(e){e==parseInt(this.node.name)&&(1==this.Tag.active?this.Tag.getNumberOfRunningActions()<=0&&(this.playFinish1(),this.Tag.runAction(cc.sequence(cc.scaleTo(.1,1.2),cc.scaleTo(.05,1),cc.callFunc(function(){})))):(this.playFinish1(),this.playFinish2(),this.Tag.active=!0,this.Tag.opacity=50,this.Tag.scale=3,this.Tag.runAction(cc.sequence(cc.spawn(cc.scaleTo(.1,.9),cc.fadeTo(.1,255)),cc.callFunc(function(){}),cc.scaleTo(.1,1.2),cc.scaleTo(.1,1)))))},t=__decorate([c],t)}(cc.Component);n.default=h,cc._RF.pop()},{"../../../Model/PlayModelProxy":"PlayModelProxy","../../../Utils/Signal":"Signal","../Animation/TypeFinishLight":"TypeFinishLight","../Animation/TypeFinishRing":"TypeFinishRing"}],SubmitButtonView:[function(e,t,n){"use strict";cc._RF.push(t,"7d5e6ERlcdIapmrVvugM7L/","SubmitButtonView"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../../Controller/GameStateController"),i=e("../../../View/SingleTouchView"),a=e("../../Command/GamePlaySignal"),r=cc._decorator,s=r.ccclass,c=(r.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onTouchEnd=function(){o.GameStateController.inst.isGameOver()||0==o.GameStateController.inst.isRoundStart()||a.SubmitButtonClickSignal.inst.dispatchOne("Submit"==this.node.name)},t=__decorate([s],t)}(i.default));n.default=c,cc._RF.pop()},{"../../../Controller/GameStateController":"GameStateController","../../../View/SingleTouchView":"SingleTouchView","../../Command/GamePlaySignal":"GamePlaySignal"}],SubmitLayerView:[function(e,t,n){"use strict";cc._RF.push(t,"f65c05YNytD2Zq3Ran+pohk","SubmitLayerView"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../../Command/CommonSignal"),i=e("../../../Controller/GameStateController"),a=e("../../../Controller/ResourceController"),r=e("../../../Model/PlayModelProxy"),s=e("../../../Utils/Signal"),c=e("../../../View/BaseView"),l=e("../../Command/GamePlaySignal"),u=cc._decorator,h=u.ccclass,p=(u.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(s.BaseSignal));n.EndNowSignal=p;var d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),Object.defineProperty(t.prototype,"Resume",{get:function(){return this.node.getChildByName("ResumeButton")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"EndNow",{get:function(){return this.node.getChildByName("EndNow")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"FreePauseCount",{get:function(){return this.node.getChildByName("FreePauseCount").getComponent(cc.Label)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"PauseInfo",{get:function(){return this.node.getChildByName("PauseInfo").getComponent(cc.Sprite)},enumerable:!0,configurable:!0}),t.prototype.onLoad=function(){var e=this;setTimeout(function(){e.node.active=!1,e.node.scale=1},0),l.SubmitButtonClickSignal.inst.addListenerOne(this.onShow,this),this.EndNow.on(cc.Node.EventType.TOUCH_END,this.endNow,this),this.Resume.on(cc.Node.EventType.TOUCH_END,this.OnResume,this)},t.prototype.endNow=function(){var e=this;p.inst.dispatch(),o.ButtonClickSignal.inst.dispatch(),setTimeout(function(){e.Hide()},0)},t.prototype.OnResume=function(){var e=this;i.GameStateController.inst.resume(),o.ButtonClickSignal.inst.dispatch(),setTimeout(function(){e.Hide()},0)},t.prototype.onShow=function(){this.node.active||(r.PlayModelProxy.inst.FreePauseCount<=0?(this.FreePauseCount.node.active=!1,this.PauseInfo.spriteFrame=a.ResourceController.inst.getAltas("font_pauseno")):(this.FreePauseCount.node.active=!0,this.FreePauseCount.string=r.PlayModelProxy.inst.FreePauseCount.toString(),this.PauseInfo.spriteFrame=a.ResourceController.inst.getAltas("font_pausehave")),this.Show(),i.GameStateController.inst.pause())},t=__decorate([h],t)}(c.default);n.default=d,cc._RF.pop()},{"../../../Command/CommonSignal":"CommonSignal","../../../Controller/GameStateController":"GameStateController","../../../Controller/ResourceController":"ResourceController","../../../Model/PlayModelProxy":"PlayModelProxy","../../../Utils/Signal":"Signal","../../../View/BaseView":"BaseView","../../Command/GamePlaySignal":"GamePlaySignal"}],TableManager:[function(e,t,n){"use strict";cc._RF.push(t,"0dcdc3JitFOGKDKFwUK65LH","TableManager"),Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(){this.load=e.JSON_URL&&""!=e.JSON_URL?cc.loader.load.bind(cc.loader):cc.loader.loadRes.bind(cc.loader),this.fileFormat=e.JSON_URL&&""!=e.JSON_URL?".json?time="+Date.now():"",this.total=0,this.complete=0,this.Animals={},this.Animals_en={},this.Ball={},this.Ball_en={},this.Books={},this.Books_en={},this.Buildings={},this.Buildings_en={},this.Class={},this.En={},this.Food={},this.Food_en={},this.Fruits={},this.Fruits_en={},this.Makeup={},this.Makeup_en={},this.Ornament={},this.Ornament_en={},this.Other={},this.Other_en={},this.Outlet={},this.Outlet_en={},this.Plants={},this.Plants_en={},this.Random={},this.Shape={},this.Shape_en={},this.Tool={},this.Tool_en={},this.Vegetable={},this.Vegetable_en={}}return Object.defineProperty(e,"inst",{get:function(){return this.ins?this.ins:this.ins=new e},enumerable:!0,configurable:!0}),e.prototype.startLoad=function(t,n,o){this.completeCallback=n,this.progressCallback=o;var i=this;console.log("Base URL:",e.JSON_URL),this.load(e.JSON_URL+t.trim().split("/").join("")+"/file_list"+this.fileFormat,function(e,n){if(e)console.error(e.errorMessage);else{var o="Array"==n.constructor.name?n:n.json;this.total=o.length;for(var a=0,r=o;a<r.length;a++){var s=r[a];i.loadJson(t.trim().split("/").join("")+"/"+s.replace(".json",""))}}}.bind(this))},e.prototype.loadJson=function(t){console.log("start load:"+t);var n=this,o=t.split("/")[1];o=o.charAt(0).toUpperCase()+o.slice(1,o.length),this.load(e.JSON_URL+t+this.fileFormat,function(e,t){if(e)console.error(e.errorMessage);else{for(var i=0,a="Array"==t.constructor.name?t:t.json;i<a.length;i++){var r=a[i];n[o][r.ID]=r}n.completeLoad()}}.bind(this))},e.prototype.completeLoad=function(){this.complete++,this.progressCallback&&this.progressCallback(this.complete/this.total),this.complete>=this.total&&this.completeCallback&&this.completeCallback()},e.prototype.getAnimals=function(e){return this.Animals[e]?this.Animals[e]:(console.error("Animals \u4e0d\u5b58key\uff1a"+e),null)},e.prototype.getAll_Animals_Data=function(){return this.Animals},e.prototype.getAnimals_en=function(e){return this.Animals_en[e]?this.Animals_en[e]:(console.error("Animals_en \u4e0d\u5b58key\uff1a"+e),null)},e.prototype.getAll_Animals_en_Data=function(){return this.Animals_en},e.prototype.getBall=function(e){return this.Ball[e]?this.Ball[e]:(console.error("Ball \u4e0d\u5b58key\uff1a"+e),null)},e.prototype.getAll_Ball_Data=function(){return this.Ball},e.prototype.getBall_en=function(e){return this.Ball_en[e]?this.Ball_en[e]:(console.error("Ball_en \u4e0d\u5b58key\uff1a"+e),null)},e.prototype.getAll_Ball_en_Data=function(){return this.Ball_en},e.prototype.getBooks=function(e){return this.Books[e]?this.Books[e]:(console.error("Books \u4e0d\u5b58key\uff1a"+e),null)},e.prototype.getAll_Books_Data=function(){return this.Books},e.prototype.getBooks_en=function(e){return this.Books_en[e]?this.Books_en[e]:(console.error("Books_en \u4e0d\u5b58key\uff1a"+e),null)},e.prototype.getAll_Books_en_Data=function(){return this.Books_en},e.prototype.getBuildings=function(e){return this.Buildings[e]?this.Buildings[e]:(console.error("Buildings \u4e0d\u5b58key\uff1a"+e),null)},e.prototype.getAll_Buildings_Data=function(){return this.Buildings},e.prototype.getBuildings_en=function(e){return this.Buildings_en[e]?this.Buildings_en[e]:(console.error("Buildings_en \u4e0d\u5b58key\uff1a"+e),null)},e.prototype.getAll_Buildings_en_Data=function(){return this.Buildings_en},e.prototype.getClass=function(e){return this.Class[e]?this.Class[e]:(console.error("Class \u4e0d\u5b58key\uff1a"+e),null)},e.prototype.getAll_Class_Data=function(){return this.Class},e.prototype.getEn=function(e){return this.En[e]?this.En[e]:(console.error("En \u4e0d\u5b58key\uff1a"+e),null)},e.prototype.getAll_En_Data=function(){return this.En},e.prototype.getFood=function(e){return this.Food[e]?this.Food[e]:(console.error("Food \u4e0d\u5b58key\uff1a"+e),null)},e.prototype.getAll_Food_Data=function(){return this.Food},e.prototype.getFood_en=function(e){return this.Food_en[e]?this.Food_en[e]:(console.error("Food_en \u4e0d\u5b58key\uff1a"+e),null)},e.prototype.getAll_Food_en_Data=function(){return this.Food_en},e.prototype.getFruits=function(e){return this.Fruits[e]?this.Fruits[e]:(console.error("Fruits \u4e0d\u5b58key\uff1a"+e),null)},e.prototype.getAll_Fruits_Data=function(){return this.Fruits},e.prototype.getFruits_en=function(e){return this.Fruits_en[e]?this.Fruits_en[e]:(console.error("Fruits_en \u4e0d\u5b58key\uff1a"+e),null)},e.prototype.getAll_Fruits_en_Data=function(){return this.Fruits_en},e.prototype.getMakeup=function(e){return this.Makeup[e]?this.Makeup[e]:(console.error("Makeup \u4e0d\u5b58key\uff1a"+e),null)},e.prototype.getAll_Makeup_Data=function(){return this.Makeup},e.prototype.getMakeup_en=function(e){return this.Makeup_en[e]?this.Makeup_en[e]:(console.error("Makeup_en \u4e0d\u5b58key\uff1a"+e),null)},e.prototype.getAll_Makeup_en_Data=function(){return this.Makeup_en},e.prototype.getOrnament=function(e){return this.Ornament[e]?this.Ornament[e]:(console.error("Ornament \u4e0d\u5b58key\uff1a"+e),null)},e.prototype.getAll_Ornament_Data=function(){return this.Ornament},e.prototype.getOrnament_en=function(e){return this.Ornament_en[e]?this.Ornament_en[e]:(console.error("Ornament_en \u4e0d\u5b58key\uff1a"+e),null)},e.prototype.getAll_Ornament_en_Data=function(){return this.Ornament_en},e.prototype.getOther=function(e){return this.Other[e]?this.Other[e]:(console.error("Other \u4e0d\u5b58key\uff1a"+e),null)},e.prototype.getAll_Other_Data=function(){return this.Other},e.prototype.getOther_en=function(e){return this.Other_en[e]?this.Other_en[e]:(console.error("Other_en \u4e0d\u5b58key\uff1a"+e),null)},e.prototype.getAll_Other_en_Data=function(){return this.Other_en},e.prototype.getOutlet=function(e){return this.Outlet[e]?this.Outlet[e]:(console.error("Outlet \u4e0d\u5b58key\uff1a"+e),null)},e.prototype.getAll_Outlet_Data=function(){return this.Outlet},e.prototype.getOutlet_en=function(e){return this.Outlet_en[e]?this.Outlet_en[e]:(console.error("Outlet_en \u4e0d\u5b58key\uff1a"+e),null)},e.prototype.getAll_Outlet_en_Data=function(){return this.Outlet_en},e.prototype.getPlants=function(e){return this.Plants[e]?this.Plants[e]:(console.error("Plants \u4e0d\u5b58key\uff1a"+e),null)},e.prototype.getAll_Plants_Data=function(){return this.Plants},e.prototype.getPlants_en=function(e){return this.Plants_en[e]?this.Plants_en[e]:(console.error("Plants_en \u4e0d\u5b58key\uff1a"+e),null)},e.prototype.getAll_Plants_en_Data=function(){return this.Plants_en},e.prototype.getRandom=function(e){return this.Random[e]?this.Random[e]:(console.error("Random \u4e0d\u5b58key\uff1a"+e),null)},e.prototype.getAll_Random_Data=function(){return this.Random},e.prototype.getShape=function(e){return this.Shape[e]?this.Shape[e]:(console.error("Shape \u4e0d\u5b58key\uff1a"+e),null)},e.prototype.getAll_Shape_Data=function(){return this.Shape},e.prototype.getShape_en=function(e){return this.Shape_en[e]?this.Shape_en[e]:(console.error("Shape_en \u4e0d\u5b58key\uff1a"+e),null)},e.prototype.getAll_Shape_en_Data=function(){return this.Shape_en},e.prototype.getTool=function(e){return this.Tool[e]?this.Tool[e]:(console.error("Tool \u4e0d\u5b58key\uff1a"+e),null)},e.prototype.getAll_Tool_Data=function(){return this.Tool},e.prototype.getTool_en=function(e){return this.Tool_en[e]?this.Tool_en[e]:(console.error("Tool_en \u4e0d\u5b58key\uff1a"+e),null)},e.prototype.getAll_Tool_en_Data=function(){return this.Tool_en},e.prototype.getVegetable=function(e){return this.Vegetable[e]?this.Vegetable[e]:(console.error("Vegetable \u4e0d\u5b58key\uff1a"+e),null)},e.prototype.getAll_Vegetable_Data=function(){return this.Vegetable},e.prototype.getVegetable_en=function(e){return this.Vegetable_en[e]?this.Vegetable_en[e]:(console.error("Vegetable_en \u4e0d\u5b58key\uff1a"+e),null)},e.prototype.getAll_Vegetable_en_Data=function(){return this.Vegetable_en},e.JSON_URL="",e}();n.TableManager=o,cc._RF.pop()},{}],TapCountView:[function(e,t,n){"use strict";cc._RF.push(t,"9a170RpdiVGnrujMpnItOcJ","TapCountView"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../../Utils/Signal"),i=cc._decorator,a=i.ccclass,r=(i.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(o.BaseSignal));n.UpdateWrongTapCount=r;var s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onLoad=function(){r.inst.addListenerOne(this.onTapUpdate,this)},t.prototype.onTapUpdate=function(e){for(var t=0,n=this.node.children;t<n.length;t++){var o=n[t];o.getChildByName("bg_miss").active=parseInt(o.name)<e}},t=__decorate([a],t)}(cc.Component);n.default=s,cc._RF.pop()},{"../../../Utils/Signal":"Signal"}],TestApp:[function(e,t,n){"use strict";cc._RF.push(t,"b219e3JEelF8qF2ISXZvtH0","TestApp"),Object.defineProperty(n,"__esModule",{value:!0});e("../../Command/CommonSignal"),e("../../Factory/GameFactory");var o=cc._decorator,i=o.ccclass,a=(o.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}var n;return __extends(t,e),n=t,t.prototype.start=function(){this.node.removeComponent(n)},t=n=__decorate([i],t)}(cc.Component));n.default=a,cc._RF.pop()},{"../../Command/CommonSignal":"CommonSignal","../../Factory/GameFactory":"GameFactory"}],TestItemRoot:[function(e,t,n){"use strict";cc._RF.push(t,"c89c618OHFHeaKyv4oWs6tJ","TestItemRoot"),Object.defineProperty(n,"__esModule",{value:!0});var o,i=e("../AlgorithmUtils/BasePacker"),a=e("../AlgorithmUtils/MinimumPotentialLayout/MinPotentialPacker"),r=e("../Controller/GameStateController"),s=e("../Controller/PolygonPacker"),c=e("../Factory/GameFactory"),l=e("../Utils/Random"),u=e("../Utils/Signal"),h=e("../Global/GameRule"),p=e("../Utils/Time"),d=cc._decorator,g=d.ccclass,y=d.property;(function(e){e[e.MinPotential=0]="MinPotential",e[e.Physics=1]="Physics"})(o=n.PackType||(n.PackType={}));var f=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(u.BaseSignal);n.ItemUpdateSignal=f;var m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type=o.MinPotential,t.polygonData={},t.initChildCount=0,t.speed=h.StartSpeed(),t.lastTime=0,t.isStartMove=!1,t}return __extends(t,e),Object.defineProperty(t.prototype,"GridRoot",{get:function(){return this.node.getChildByName("GridRoot")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Items",{get:function(){return this.node.getChildByName("Items")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Center",{get:function(){return this.node.getChildByName("Center")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"BorderTop",{get:function(){return this.node.getChildByName("Top")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"BorderBot",{get:function(){return this.node.getChildByName("Bot")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"BorderLeft",{get:function(){return this.node.getChildByName("Left")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"BorderRight",{get:function(){return this.node.getChildByName("Right")},enumerable:!0,configurable:!0}),t.prototype.onLoad=function(){var e=this;cc.director.getPhysicsManager().enabled=!0,cc.director.getPhysicsManager().enabled=!1,cc.director.getPhysicsManager().enabled&&(cc.director.getPhysicsManager().gravity=cc.v2(0,0),cc.director.getPhysicsManager().enabledAccumulator=!0,cc.director.getPhysicsManager().debugDrawFlags=cc.PhysicsManager.DrawBits.e_shapeBit),l.Random.setRandomSeed(Math.random()),l.Random.setRandomSeed(.6172724379868753),this.node.height=h.GetTotalMapHeight(),s.CreateDebugGridSignal.inst.addListenerOne(function(t){var n=c.gFactory.getObj("Grid",t);n.setPosition(t.j*t.Rect.width+t.Rect.width/2,t.i*t.Rect.height+t.Rect.height/2),n.width=t.Rect.width,n.height=t.Rect.height,e.GridRoot.addChild(n)},this),cc.debug.setDisplayStats(!1),cc.loader.loadRes("./polygonData/polygon",cc.JsonAsset,function(t,n){t?console.error(t):(e.polygonData=n.json,e.initPolygonPacker())}),this.node.on(cc.Node.EventType.TOUCH_MOVE,function(t){e.node.y+=t.getDeltaY(),a.MinPotentialPacker.inst.DebugNode&&(a.MinPotentialPacker.inst.DebugNode.y+=t.getDeltaY())},this),this.type==o.MinPotential&&i.PolygonPackDoneSignal.inst.addListenerOne(this.onPackDone,this)},t.prototype.startMove=function(){cc.director.getPhysicsManager().enabled||(this.isStartMove=!0)},t.prototype.update=function(e){0!=this.isStartMove&&(this.node.y-=e*this.speed,a.MinPotentialPacker.inst.DebugNode&&(a.MinPotentialPacker.inst.DebugNode.y-=e*this.speed),this.lastTime+=e,console.log(p.Time.timeFormat(this.lastTime).replace("/",":")),this.speed+=h.MapSpeedUpScale()*e,this.lastTime>=h.GetTotalTime()&&(this.isStartMove=!1),!r.GameStateController.inst.isRoundStart()||r.GameStateController.inst.isPause()||r.GameStateController.inst.isGameOver()||(this.node.y-=e*this.speed))},t.prototype.checkNeedAdd=function(){},t.prototype.onPackDone=function(e){var t=this;console.log("on pack done:",e.length);var n=0;f.inst.removeTarget(this),f.inst.addListenerThree(function(e,n,o){var i=t.Items.getChildByName(e);i&&(i.setPosition(n),i.rotation=o)},this);for(var o=0,i=e;o<i.length;o++){var a=i[o],r=a.ID;n++,a.isUpdate&&setTimeout(function(n,o,i){cc.loader.loadRes("./Items/"+o.split(":")[0],cc.SpriteFrame,function(o,a){if(o)console.error(o);else{var r=new cc.Node;r.name=n.ID,r.rotation=n.Rotation,r.setPosition(n.Position),r.addComponent(cc.Sprite).spriteFrame=a,t.Items.addChild(r),console.log("item:",r.anchorX,r.anchorY),i>=e.length&&(0==t.initChildCount&&(t.initChildCount=t.Items.childrenCount),t.startMove())}})},0,a,r,n)}},t.prototype.initPolygonPacker=function(){if(this.type==o.MinPotential){var e={};for(var t in this.polygonData)e[t]={points:this.polygonData[t],type:0,subType:0};a.MinPotentialPacker.inst.init(this.node.width,e,[])}else this.type,o.Physics},__decorate([y({type:cc.Enum(o)})],t.prototype,"type",void 0),t=__decorate([g],t)}(cc.Component);n.default=m,cc._RF.pop()},{"../AlgorithmUtils/BasePacker":"BasePacker","../AlgorithmUtils/MinimumPotentialLayout/MinPotentialPacker":"MinPotentialPacker","../Controller/GameStateController":"GameStateController","../Controller/PolygonPacker":"PolygonPacker","../Factory/GameFactory":"GameFactory","../Global/GameRule":"GameRule","../Utils/Random":"Random","../Utils/Signal":"Signal","../Utils/Time":"Time"}],TestMove:[function(e,t,n){"use strict";cc._RF.push(t,"4f148+x0MNI1q0QAc63W54P","TestMove"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../Controller/GameStateController"),i=cc._decorator,a=i.ccclass,r=(i.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onLoad=function(){CELER_X?(this.node.removeFromParent(!0),this.node.destroy()):this.node.on(cc.Node.EventType.TOUCH_MOVE,function(e){o.GameStateController.inst.isReady},this)},t=__decorate([a],t)}(cc.Component));n.default=r,cc._RF.pop()},{"../Controller/GameStateController":"GameStateController"}],TestSingleTouchView:[function(e,t,n){"use strict";cc._RF.push(t,"2761dS0K89JwJjOcqk97q1o","TestSingleTouchView"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../Factory/GameFactory"),i=e("../SingleTouchView"),a=cc._decorator,r=a.ccclass,s=(a.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onSetParent=function(e){console.error("parent:",e)},t.prototype.onTouchStart=function(){o.gFactory.putObj("TestNode",this.node)},t.prototype.onTouchEnd=function(){console.error("ontouchend")},t=__decorate([r],t)}(i.default));n.default=s,cc._RF.pop()},{"../../Factory/GameFactory":"GameFactory","../SingleTouchView":"SingleTouchView"}],Test:[function(e,t,n){"use strict";cc._RF.push(t,"df1af1sWs9HWZ8cYz9x0Gs9","Test"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../Controller/GameStateController"),i=e("../GamePlay/Model/GameLogic"),a=e("../Utils/Random"),r=e("../Utils/Signal"),s=cc._decorator,c=s.ccclass,l=(s.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(r.BaseSignal));n.TestReStartSignal=l;var u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.refreshing=!1,t}return __extends(t,e),Object.defineProperty(t.prototype,"RandomSeed",{get:function(){return this.node.getChildByName("RandomSeed")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"RestartCount",{get:function(){return this.node.getChildByName("RestartCount")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Next",{get:function(){return this.node.getChildByName("Next")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"NextMap",{get:function(){return this.node.getChildByName("NextMap")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"TestClear",{get:function(){return this.node.getChildByName("TestClear")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"CheckDrop",{get:function(){return this.node.getChildByName("CheckDrop")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"CheckBlock",{get:function(){return this.node.getChildByName("CheckBlock")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Animation",{get:function(){return this.node.getChildByName("Animation")},enumerable:!0,configurable:!0}),t.prototype.onLoad=function(){var e=this;if(this.node.active=!CELER_X,this.node.removeComponent(cc.Sprite),this.node.opacity=255,CELER_X)return this.node.removeFromParent(!0),void this.node.destroy();if(this.TestClear){var t=this.TestClear.getComponent(cc.Toggle);t.isChecked=!1,this.TestClear.on("toggle",function(){console.log(" test clear:",t.isChecked)},this)}if(this.CheckDrop){var n=this.CheckDrop.getComponent(cc.Toggle);n.isChecked=!0,this.CheckDrop.on("toggle",function(){console.log(" IS_RUN_LEVEL:",n.isChecked)},this)}if(this.CheckBlock){var r=this.CheckBlock.getComponent(cc.Toggle);r.isChecked=!0,this.CheckBlock.on("toggle",function(){console.log(" CHECK_BLOCK:",r.isChecked)},this)}if(this.Animation){var s=this.Animation.getComponent(cc.Toggle);s.isChecked=!0,this.Animation.on("toggle",function(){console.log(" OPEN_EFFECT:",s.isChecked)},this)}a.RandomSeedInitSignal.inst.addListenerOne(function(t){e.RandomSeed&&e.RandomSeed.getComponent(cc.Label)&&(e.RandomSeed.getComponent(cc.Label).string=t.toString())},this),this.RestartCount&&this.RestartCount.getComponent(cc.Label)&&(this.RestartCount.getComponent(cc.Label).string="0",i.RestartCountSignal.inst.addListenerOne(function(t){e.RestartCount.getComponent(cc.Label).string=t.toString()},this)),this.Next&&this.Next.on(cc.Node.EventType.TOUCH_END,function(){e.refreshing||(e.refreshing=!0)},this),this.NextMap&&this.NextMap.on(cc.Node.EventType.TOUCH_END,function(){0!=o.GameStateController.inst.isReady&&l.inst.dispatchOne(!0)},this)},t.prototype.start=function(){},t=__decorate([c],t)}(cc.Component);n.default=u,cc._RF.pop()},{"../Controller/GameStateController":"GameStateController","../GamePlay/Model/GameLogic":"GameLogic","../Utils/Random":"Random","../Utils/Signal":"Signal"}],ThemeView:[function(e,t,n){"use strict";cc._RF.push(t,"2b2d1k5+RZFrKLwiNmu7pk+","ThemeView"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../View/BaseView"),i=e("../../Global/Theme"),a=e("../../Command/CommonSignal"),r=cc._decorator,s=r.ccclass,c=(r.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onLoad=function(){a.GameThemeInit.inst.addListenerOne(this.onThemeInit,this)},t.prototype.start=function(){},t.prototype.onThemeInit=function(e){this.node.active=this.node.name==i.Theme[e]},t=__decorate([s],t)}(o.default));n.default=c,cc._RF.pop()},{"../../Command/CommonSignal":"CommonSignal","../../Global/Theme":"Theme","../../View/BaseView":"BaseView"}],Theme:[function(e,t,n){"use strict";cc._RF.push(t,"5fef4dbBENAfYW6Tw8oUA62","Theme"),Object.defineProperty(n,"__esModule",{value:!0}),function(e){e[e.One=0]="One",e[e.Two=1]="Two",e[e.Three=2]="Three",e[e.Four=3]="Four"}(n.Theme||(n.Theme={})),cc._RF.pop()},{}],TimeEffectAnimation:[function(e,t,n){"use strict";cc._RF.push(t,"603e6ws6zRH9IcpX4uo/ZlK","TimeEffectAnimation"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../Utils/FrameAniBase"),i=e("../Command/CommonSignal"),a=cc._decorator,r=a.ccclass,s=(a.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onLoad=function(){e.prototype.onLoad.call(this),this.node.opacity=0,i.TimeAnimationStateChanged.inst.addListenerOne(this.onPlayStateChanged,this)},t.prototype.onPlayStateChanged=function(e){e?0==this.isPlaying&&this.play():this.stop()},t.prototype.start=function(){},t.prototype.play=function(){this.node.opacity=255,e.prototype.play.call(this)},t.prototype.stop=function(){this.node.opacity=0,e.prototype.stop.call(this)},t=__decorate([r],t)}(o.default));n.default=s,cc._RF.pop()},{"../Command/CommonSignal":"CommonSignal","../Utils/FrameAniBase":"FrameAniBase"}],TimeLabelView:[function(e,t,n){"use strict";cc._RF.push(t,"8e78fIPKARBx69B005nUUwo","TimeLabelView"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../../Command/CommonSignal"),i=e("../../../Utils/Time"),a=e("../../../View/BaseView"),r=cc._decorator,s=r.ccclass,c=(r.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.sec=0,t}return __extends(t,e),Object.defineProperty(t.prototype,"Label",{get:function(){return this.getComponent(cc.Label)},enumerable:!0,configurable:!0}),t.prototype.onLoad=function(){o.UpdateTimeNumber.inst.addListenerOne(this.onTimeChanged,this)},t.prototype.onTimeChanged=function(e){var t=i.Time.timeFormat(e);"MinuteLabel"==this.node.name?this.Label.string=t.split("/")[0]:"SecondLabel"==this.node.name?this.Label.string=t.split("/")[1]:this.Label.string=t;var n=Math.floor(e);n!=this.sec&&("MinuteLabel"==this.node.name||"MinuteLabel"!=this.node.name&&"SecondLabel"!=this.node.name)&&(this.sec=n,this.sec<=5&&o.CountDownSignal.inst.dispatch())},t.prototype.start=function(){},t=__decorate([s],t)}(a.default));n.default=c,cc._RF.pop()},{"../../../Command/CommonSignal":"CommonSignal","../../../Utils/Time":"Time","../../../View/BaseView":"BaseView"}],Time:[function(e,t,n){"use strict";cc._RF.push(t,"87a24xcV95AoII6L5W1ABoI","Time"),Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(){}return e.timeFormat=function(e){var t=Math.floor(e/60),n=Math.floor(e%60),o=n.toString();return n<10&&(o="0"+n),t+":"+o},e}();n.Time=o,cc._RF.pop()},{}],ToSingleton:[function(e,t,n){"use strict";cc._RF.push(t,"b07299nlSpOIIxOkIMBhUY9","ToSingleton"),Object.defineProperty(n,"__esModule",{value:!0}),n.SingleTon=function(){return function(){function e(){}return Object.defineProperty(e,"inst",{get:function(){return this.ins?this.ins:this.ins=new this},enumerable:!0,configurable:!0}),e}()},cc._RF.pop()},{}],TutorialManager:[function(e,t,n){"use strict";cc._RF.push(t,"fb3a0xpHapEEa8amRe1j4OG","TutorialManager"),Object.defineProperty(n,"__esModule",{value:!0});var o,i=e("../Utils/HashMap"),a=e("../utils/ToSingleton"),r=e("./TutorialView");(function(e){e[e.Main=0]="Main",e[e.Bag=1]="Bag",e[e.PetInfo=2]="PetInfo",e[e.LeaderBoard=3]="LeaderBoard",e[e.Cook=4]="Cook",e[e.Skin=5]="Skin",e[e.Feed=6]="Feed",e[e.Abilities=7]="Abilities",e[e.AwardAlert=8]="AwardAlert",e[e.AbilitiesDetail=9]="AbilitiesDetail",e[e.SkinDetail=10]="SkinDetail"})(o=n.LayerType||(n.LayerType={})),function(e){e[e.Click=0]="Click",e[e.Tip=1]="Tip"}(n.TutorialType||(n.TutorialType={}));var s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.tutorialMap=new i.HashMap,t}return __extends(t,e),t.prototype.register=function(e,t){this.tutorialMap.has(e)?this.tutorialMap.add(e,this.tutorialMap.get(e).concat(t)):(this.tutorialMap.add(e,t),this.start(e))},t.prototype.getLayerNodesCount=function(e){return this.tutorialMap.has(e)?this.tutorialMap.get(e).length:0},t.prototype.shift=function(e){return this.tutorialMap.has(e)&&this.tutorialMap.get(e).length>0?this.tutorialMap.get(e).shift():(console.error(" layer:",o[e]," empty."),null)},t.prototype.isDone=function(e){return 0==this.tutorialMap.has(e)||0==this.tutorialMap.get(e).length},t.prototype.start=function(e){r.ShowTutorialSignal.inst.dispatchOne(e)},t.prototype.next=function(e){var t=this;return new Promise(function(n,o){t.shift(e),t.isDone(e)?n(e):o()})},t.prototype.show=function(e){var t=this;return new Promise(function(n,o){t.isDone(e)?o():n(t.tutorialMap.get(e)[0])})},t}(a.SingleTon());n.TutorialManager=s,cc._RF.pop()},{"../Utils/HashMap":"HashMap","../utils/ToSingleton":"ToSingleton","./TutorialView":"TutorialView"}],TutorialView:[function(e,t,n){"use strict";cc._RF.push(t,"d07740wOfxDpaYSQSVN98Yu","TutorialView"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../Utils/Cocos"),i=e("../Utils/Signal"),a=e("../View/BaseView"),r=e("./TutorialManager"),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(i.BaseSignal);n.ShowTutorialSignal=s;var c=cc._decorator,l=c.ccclass,u=(c.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.types=[],t.tutorial=null,t.hasTouchStart=!1,t}return __extends(t,e),Object.defineProperty(t.prototype,"Hand",{get:function(){return this.node.getChildByName("Hand")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Root",{get:function(){return this.node.getChildByName("Root")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Mask",{get:function(){return this.node.getChildByName("Mask")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Type",{get:function(){return this.types[this.types.length-1]},enumerable:!0,configurable:!0}),t.prototype.onLoad=function(){this.node.active=!1,this.node.scale=1,this.Hand.active=!1,this.Mask.active=!1,this.Mask.on(cc.Node.EventType.TOUCH_CANCEL,this.onTouchEnd,this),this.Mask.on(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this),this.Mask.on(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove,this),this.Mask.on(cc.Node.EventType.TOUCH_START,this.onTouchStart,this),s.inst.addListenerOne(this.onShow,this)},t.prototype.onShow=function(e){this.pushType(e),this.Hand.active=!1,this.Hand.stopAllActions(),console.log("Show tutorial:",r.LayerType[e],", current:",r.LayerType[this.Type]),this.node.active?this.showNext():this.Show(this.showNext.bind(this))},t.prototype.pushType=function(e){this.Type!=e&&this.types.push(e)},t.prototype.toNext=function(e){var t=this;console.log("to Next:",r.LayerType[e],r.LayerType[this.Type]),r.TutorialManager.inst.next(e).then(function(){t.done()}).catch(function(){t.showNext()})},t.prototype.showNext=function(){null!=this.Type?(this.Root.destroyAllChildren(),r.TutorialManager.inst.show(this.Type).then(this.goNext.bind(this)).catch(this.done.bind(this))):this.end()},t.prototype.done=function(){console.log(r.LayerType[this.Type]," done."),this.types.pop(),null!=this.Type?this.showNext():this.end()},t.prototype.end=function(){this.tutorial&&this.tutorial.node&&(this.tutorial.node.group="default"),this.tutorial=null,this.Hand.active=!1,this.Mask.active=!1,this.Hide()},t.prototype.goNext=function(e){var t=this;this.tutorial&&this.tutorial.node&&(this.tutorial.node.group="default"),this.tutorial=e,this.hasTouchStart=!1,this.Mask.active=!0,this.Mask.getComponent(cc.Sprite).enabled=this.tutorial.needMask,this.Mask._touchListener.swallowTouches=this.tutorial.needMask,this.tutorial.maskClear?this.Mask.opacity=0:this.Mask.opacity=255,this.tutorial.delay?setTimeout(function(){t.doNext()},1e3*this.tutorial.delay):this.doNext()},t.prototype.doNext=function(){var e=this,t=o.ConvertToNodeSpaceAR(this.tutorial.node,this.Hand.parent);this.tutorial.needMask&&(this.tutorial.node.group="tutorial"),this.Hand.stopAllActions(),this.Hand.x=t.x+10,this.Hand.y=t.y-this.tutorial.node.height/4,this.Hand.rotation=0,Math.abs(this.Hand.x-20+this.Hand.width*(1-this.Hand.anchorX))>this.node.width/2&&(this.Hand.x=t.x,this.Hand.y=t.y-this.tutorial.node.height/4,this.Hand.rotation=50),this.Hand.active=!0,this.Hand.opacity=0,this.Hand.runAction(cc.sequence(cc.delayTime(.1),cc.fadeIn(.1),cc.callFunc(function(){}))),this.showHandAni(),this.tutorial.lastTime&&setTimeout(function(t){e.toNext(t)},1e3*this.tutorial.lastTime,this.tutorial.layer)},t.prototype.showHandAni=function(){var e=cc.repeatForever(cc.sequence(cc.moveTo(.5,cc.v2(this.Hand.position.x,this.Hand.position.y+20),100),cc.moveTo(.5,cc.v2(this.Hand.position.x,this.Hand.position.y-20),100)));this.Hand.runAction(e)},t.prototype.onTouchStart=function(e){this.tutorial?o.GetBoxToWorld(this.tutorial.node).contains(e.getLocation())&&(this.tutorial.needMask&&this.tutorial.node.dispatchEvent(e),this.hasTouchStart=!0):console.error("[onTouchStart] tutorial is null.")},t.prototype.onTouchEnd=function(e){this.tutorial?this.hasTouchStart&&(this.hasTouchStart=!1,this.tutorial.needMask&&this.tutorial.node.dispatchEvent(e),this.tutorial.lastTime||this.toNext(this.tutorial.layer)):console.error("[onTouchEnd] tutorial is null.")},t.prototype.onTouchMove=function(e){this.tutorial?this.hasTouchStart&&this.tutorial.needMask&&this.tutorial.node.dispatchEvent(e):console.error("[onTouchMove] tutorial is null.")},t=__decorate([l],t)}(a.default));n.default=u,cc._RF.pop()},{"../Utils/Cocos":"Cocos","../Utils/Signal":"Signal","../View/BaseView":"BaseView","./TutorialManager":"TutorialManager"}],TypeFinishLight:[function(e,t,n){"use strict";cc._RF.push(t,"103844YuvxPXZOhYpUA4NwM","TypeFinishLight"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../../Utils/FrameAniBase"),i=cc._decorator,a=i.ccclass,r=(i.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t=__decorate([a],t)}(o.default));n.default=r,cc._RF.pop()},{"../../../Utils/FrameAniBase":"FrameAniBase"}],TypeFinishRing:[function(e,t,n){"use strict";cc._RF.push(t,"06ddazEcJVJD61fenhUJxVn","TypeFinishRing"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../../Utils/FrameAniBase"),i=cc._decorator,a=i.ccclass,r=(i.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t=__decorate([a],t)}(o.default));n.default=r,cc._RF.pop()},{"../../../Utils/FrameAniBase":"FrameAniBase"}],TypeModel:[function(e,t,n){"use strict";cc._RF.push(t,"4551by/dfVOY7pZRHUyLKmG","TypeModel"),Object.defineProperty(n,"__esModule",{value:!0});var o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(e("../../Utils/Signal").BaseSignal);n.UpdateMatchTimes=o;var i=function(){function e(e,t,n){this.type=null,this.subType=null,this.matchTimes=0,this.index=0,this.subType=t,this.type=e,this.index=n}return Object.defineProperty(e.prototype,"Type",{get:function(){return this.type},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"SubType",{get:function(){return this.subType},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"MatchTimes",{get:function(){return this.matchTimes},set:function(e){this.matchTimes=e,o.inst.dispatchTwo(this.index,this.matchTimes)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Index",{get:function(){return this.index},enumerable:!0,configurable:!0}),e}();n.TypeModel=i,cc._RF.pop()},{"../../Utils/Signal":"Signal"}],UpdateController:[function(e,t,n){"use strict";cc._RF.push(t,"b3cadc9oLxMlaTWSqS0DgLW","UpdateController"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../Utils/ToSingleton"),i=cc._decorator,a=i.ccclass,r=(i.property,function(e){function t(){var t=e.call(this)||this;return t.assetsManager=null,t.STORAGE_PATH=(window.jsb&&jsb.fileUtils?jsb.fileUtils.getWritablePath():"/")+"hot-update",t.MANIFEST_PAth="",t.isUpdating=!1,t.manifest=null,t.completeCallback=[],t.startCallback=[],t.errorCallback=[],t.progressCallback=[],t.init(),t}return __extends(t,e),t.prototype.init=function(){window.jsb&&(this.assetsManager=new jsb.AssetsManager(this.MANIFEST_PAth,this.STORAGE_PATH,this.versionCompareHandle),this.assetsManager.setVerifyCallback(this.verifyCallback.bind(this)),cc.sys.os===cc.sys.OS_ANDROID&&this.assetsManager.setMaxConcurrentTask(2))},t.prototype.setManifest=function(e){this.manifest=e},t.prototype.getVersion=function(){return null==this.assetsManager?"":null==this.assetsManager.getLocalManifest()?"":this.assetsManager.getLocalManifest().getVersion()},t.prototype.addCompleteCallback=function(e,t){this.completeCallback.push({target:t,callback:e})},t.prototype.addErrorCallback=function(e,t){this.errorCallback.push({target:e,callback:t})},t.prototype.addStartCallback=function(e,t){this.startCallback.push({target:e,callback:t})},t.prototype.addProgressCallback=function(e,t){this.progressCallback.push({target:e,callback:t})},t.prototype.triggeError=function(e,t){void 0===t&&(t=!1),this.onError(e,t)},t.prototype.onError=function(e,t){void 0===t&&(t=!1),console.log(" this.errorCallback:",this.errorCallback.length,"error:",e);for(var n=0,o=this.errorCallback;n<o.length;n++){var i=o[n];i.callback.apply(i.target,[e,t])}},t.prototype.onComplete=function(e,t){void 0===t&&(t=!1),console.log(" on update complete:",this.getVersion()),console.log("storagePath:",this.getStoragePath()),console.log("search path:",this.getSearchPaths());for(var n=function(n){setTimeout(function(){n.callback.apply(n.target,[e,t])},0)},o=0,i=this.completeCallback;o<i.length;o++){n(i[o])}},t.prototype.getStoragePath=function(){return this.assetsManager?this.assetsManager.getStoragePath():""},t.prototype.getSearchPaths=function(){return window.jsb?jsb.fileUtils.getSearchPaths():""},t.prototype.onStart=function(e,t){void 0===t&&(t=!1),console.log(" this.startCallback:",this.startCallback.length);for(var n=0,o=this.startCallback;n<o.length;n++){var i=o[n];i.callback.apply(i.target,[e,t])}},t.prototype.onProgress=function(e,t){for(var n=0,o=this.progressCallback;n<o.length;n++){var i=o[n];i.callback.apply(i.target,[e,t])}},t.prototype.loadCustomManifest=function(e){if(null!=this.assetsManager&&this.assetsManager.getState()==jsb.AssetsManager.State.UNINITED){var t=new jsb.Manifest(e,this.STORAGE_PATH);this.assetsManager.loadLocalManifest(t,this.STORAGE_PATH)}},t.prototype.checkForUpdate=function(){this.onComplete("no need to update.")},t.prototype.checkUpdateCallback=function(e){switch(console.log("checkUpdateCallback Code: "+e.getEventCode()),e.getEventCode()){case jsb.EventAssetsManager.ERROR_NO_LOCAL_MANIFEST:this.onError("No local manifest file found, hot update skipped.");break;case jsb.EventAssetsManager.ERROR_DOWNLOAD_MANIFEST:case jsb.EventAssetsManager.ERROR_PARSE_MANIFEST:this.onError("Fail to download manifest file, hot update skipped.");break;case jsb.EventAssetsManager.ALREADY_UP_TO_DATE:var t=this.assetsManager.getRemoteManifest()?this.assetsManager.getRemoteManifest().getVersion():" null",n=this.assetsManager.getLocalManifest()?this.assetsManager.getLocalManifest().getVersion():"null";this.onComplete("Already up to date with the latest remote version :"+t+", local version :"+n);break;case jsb.EventAssetsManager.NEW_VERSION_FOUND:this.isUpdating=!1;var o=this.assetsManager.getLocalManifest()?this.assetsManager.getLocalManifest().getVersion():"null",i=this.assetsManager.getRemoteManifest()?this.assetsManager.getRemoteManifest().getVersion():"null";if(console.log("New version found, old:",o,", new: ",i),"null"==o||"null"==i);else{console.log("storage path:",this.assetsManager.getStoragePath());var a=o.split(".")[0];i.split(".")[0]>a?this.onStart("new version found, go to store to download new app.",!0):(this.onStart("new version found, update process start.",!1),this.updateVersion())}break;default:return}},t.prototype.getUpdateDescription=function(){return""},t.prototype.updateVersion=function(){if(null!=this.assetsManager&&!this.isUpdating)if([jsb.AssetsManager.State.UPDATING,jsb.AssetsManager.State.UNZIPPING,jsb.AssetsManager.State.UP_TO_DATE].indexOf(this.assetsManager.getState())>=0)this.onComplete("no need to update: "+this.assetsManager.getState(),!1);else{if(this.assetsManager.getState()===jsb.AssetsManager.State.UNINITED){var e=this.manifest.nativeUrl;cc.loader.md5Pipe&&(e=cc.loader.md5Pipe.transformURL(e)),this.assetsManager.loadLocalManifest(e)}this.assetsManager.setEventCallback(this.updateCallback.bind(this)),console.log(" start update ...:",this.assetsManager.getState()),this.assetsManager.update(),this.isUpdating=!0}},t.prototype.versionToInt=function(e){return parseInt(e.toString().split(".").join(""))},t.prototype.versionToString=function(e){return Math.floor(e/100)+"."+Math.floor(e/10)%10+"."+Math.floor(e)%10},t.prototype.updateCallback=function(e){var t=this,n=!1,o=!1,i=null;switch(console.log("update event code:",e.getEventCode()),e.getEventCode()){case jsb.EventAssetsManager.ERROR_NO_LOCAL_MANIFEST:this.onError("No local manifest file found, hot update skipped."),o=!0;break;case jsb.EventAssetsManager.UPDATE_PROGRESSION:var a=e.getPercent();NaN!=a&&"number"==typeof a||(a=0),this.onProgress(e.getMessage()?"Updated file:"+e.getMessage():"Updating:"+(100*a).toFixed(0)+"%",a);break;case jsb.EventAssetsManager.ERROR_DOWNLOAD_MANIFEST:case jsb.EventAssetsManager.ERROR_PARSE_MANIFEST:this.onError("Fail to download manifest file, hot update skipped."),o=!0;break;case jsb.EventAssetsManager.ALREADY_UP_TO_DATE:i=function(){var e=t.assetsManager.getRemoteManifest()?t.assetsManager.getRemoteManifest().getVersion():" null";t.onComplete("Already up to date with the latest remote version :"+e)},o=!0;break;case jsb.EventAssetsManager.UPDATE_FINISHED:i=function(){var n=t.assetsManager.getRemoteManifest()?t.assetsManager.getRemoteManifest().getVersion():" null";t.onComplete("Update finished. new : "+n+e.getMessage(),!0)},n=!0;break;case jsb.EventAssetsManager.UPDATE_FAILED:this.onError("Update failed. "+e.getMessage(),!0);break;case jsb.EventAssetsManager.ERROR_UPDATING:this.onError("Asset update error: "+e.getAssetId()+", "+e.getMessage());break;case jsb.EventAssetsManager.ERROR_DECOMPRESS:this.onError(e.getMessage())}if(o&&(this.assetsManager.setEventCallback(null),this.isUpdating=!1),n){this.assetsManager.setEventCallback(null);var r=jsb.fileUtils.getSearchPaths();console.log("old searchPaths:",r);var s=this.assetsManager.getLocalManifest().getSearchPaths();console.log("new path:",JSON.stringify(s));for(var c=0,l=s;c<l.length;c++){var u=l[c];r.indexOf(u)<0&&Array.prototype.unshift.apply(r,u)}cc.sys.localStorage.setItem("select-game",JSON.stringify(r)),jsb.fileUtils.setSearchPaths(r),console.log("new searchPaths:",JSON.stringify(r)),console.log(" paths storage:",cc.sys.localStorage.getItem("select-game"))}i&&i()},t.prototype.restart=function(){cc.audioEngine.stopAll(),cc.game.restart()},t.prototype.retry=function(){null!=this.assetsManager&&0==this.isUpdating&&this.assetsManager.downloadFailedAssets()},t.prototype.versionCompareHandle=function(e,t){cc.log("JS Custom Version Compare: version A is "+e+", version B is "+t);for(var n=e.split("."),o=t.split("."),i=0;i<n.length;++i){var a=parseInt(n[i]),r=parseInt(o[i]||"0");if(a!==r)return a-r}return o.length>n.length?-1:0},t.prototype.verifyCallback=function(e,t){var n=t.compressed,o=t.md5,i=t.path;t.size;return n?("Verification passed : "+i,!0):("Verification passed : "+i+" ("+o+")",!0)},t.prototype.destory=function(){this.assetsManager&&this.assetsManager.setEventCallback(null),this.startCallback=[],this.completeCallback=[],this.errorCallback=[],this.progressCallback=[]},t=__decorate([a],t)}(o.SingleTon()));n.default=r,cc._RF.pop()},{"../Utils/ToSingleton":"ToSingleton"}],VisibleFrame:[function(e,t,n){"use strict";cc._RF.push(t,"8bab43nnr1LkoKL5M3gqj8F","VisibleFrame"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../../Controller/GameStateController"),i=e("../../Model/GameLogic"),a=cc._decorator,r=a.ccclass,s=(a.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onLoad=function(){this.node.on(cc.Node.EventType.TOUCH_START,this.onTap,this)},t.prototype.onTap=function(e){o.GameStateController.inst.isRoundStart()&&!o.GameStateController.inst.isPause()&&i.GameLogic.inst.checkClick(e.getLocation().addSelf(cc.v2(0,-960-this.node.y)))},t=__decorate([r],t)}(cc.Component));n.default=s,cc._RF.pop()},{"../../../Controller/GameStateController":"GameStateController","../../Model/GameLogic":"GameLogic"}],WildAdAnimation:[function(e,t,n){"use strict";cc._RF.push(t,"a477475bJVCr55eJoQUua8c","WildAdAnimation"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../utils/FrameAniBase"),i=e("../Utils/Signal"),a=cc._decorator,r=a.ccclass,s=(a.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(i.BaseSignal));n.WildAdAnimationIsPlaySignal=s;var c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.isStart=!1,t}return __extends(t,e),t.prototype.onStartPlay=function(){var e=this;s.inst.dispatchOne(!0),0==this.isStart&&(this.isStart=!0,setTimeout(function(){e.isStart=!1,e.stop(),e.node.opacity=0,setTimeout(function(){e.node.opacity=255,e.Loop=!0,e.play()},8e3)},2e3))},t.prototype.onComplete=function(){s.inst.dispatchOne(!1)},t=__decorate([r],t)}(o.default);n.default=c,cc._RF.pop()},{"../Utils/Signal":"Signal","../utils/FrameAniBase":"FrameAniBase"}],WildAdButton:[function(e,t,n){"use strict";cc._RF.push(t,"465d6JCvm9NEa4D+PNSyYjD","WildAdButton"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../Utils/Signal"),i=cc._decorator,a=i.ccclass,r=i.property,s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(o.BaseSignal);n.HideWildAdButtonSignal=s;var c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(o.BaseSignal);n.WildAdButtonClick=c;var l,u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(o.BaseSignal);n.WildButtonReadySignal=u,function(e){e[e.Default=0]="Default"}(l=n.AdButtonType||(n.AdButtonType={}));var h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.adType=l.Default,t}return __extends(t,e),t.prototype.onLoad=function(){var e=this;this.node.active=cc.sys.isMobile&&cc.sys.isBrowser&&cc.sys.os==cc.sys.OS_ANDROID,this.node.parent.active=this.node.active,this.node.scale=0,u.inst.addOnceOne(function(t){e.adType!=t&&null!=t||(console.log(" Wild button :",e.node.active),e.node.active&&(e.node.getComponent(cc.Button).transition=cc.Button.Transition.NONE,e.node.runAction(cc.sequence(cc.scaleTo(.1,1),cc.callFunc(function(){e.node.getComponent(cc.Button).transition=cc.Button.Transition.SCALE,e.node.getComponent(cc.Button).zoomScale=1.2,e.node.on(cc.Node.EventType.TOUCH_END,function(){c.inst.dispatch()},e)})))))},this),s.inst.addListenerOne(function(t){if(e.adType==t||null==t){e.node.active=!1,e.node.parent.active=!1;for(var n=0,o=e.node.parent.children;n<o.length;n++){if(o[n].active){e.node.parent.active=!0;break}}}},this)},__decorate([r({type:cc.Enum(l)})],t.prototype,"adType",void 0),t=__decorate([a],t)}(cc.Component);n.default=h,cc._RF.pop()},{"../Utils/Signal":"Signal"}],table:[function(e,t,n){"use strict";cc._RF.push(t,"f4ed2LT641ClapudKL64DXV","table"),Object.defineProperty(n,"__esModule",{value:!0}),function(e){e[e.Mao=1e3]="Mao",e[e.Gou=1001]="Gou",e[e.Niao=1002]="Niao",e[e.Zhu=1003]="Zhu",e[e.Yu=1004]="Yu",e[e.WuGui=1005]="WuGui",e[e.Tu=1006]="Tu",e[e.Yang=1007]="Yang",e[e.Ma=1008]="Ma",e[e.She=1009]="She",e[e.Ji=1010]="Ji",e[e.Ya=1011]="Ya",e[e.QingWa=1012]="QingWa",e[e.HuLi=1013]="HuLi",e[e.LaoShu=1014]="LaoShu"}(n.Animals_ID||(n.Animals_ID={})),function(e){e[e.DongWuLei=100]="DongWuLei",e[e.ZhiWuLei=101]="ZhiWuLei",e[e.JianZhu=102]="JianZhu",e[e.ShuJi=103]="ShuJi",e[e.Qiu=104]="Qiu",e[e.ShiWuLei=105]="ShiWuLei",e[e.XingZhuang=106]="XingZhuang",e[e.FuZhuangLei=107]="FuZhuangLei",e[e.PeiShi=108]="PeiShi",e[e.WenJuGongJu=109]="WenJuGongJu",e[e.HuaZhuangPin=110]="HuaZhuangPin",e[e.ShuiGuo=111]="ShuiGuo",e[e.ShuCai=112]="ShuCai",e[e.GanRao=113]="GanRao"}(n.Animals_Type||(n.Animals_Type={})),function(e){e[e.Mao=1e3]="Mao",e[e.Gou=1001]="Gou",e[e.Niao=1002]="Niao",e[e.Zhu=1003]="Zhu",e[e.Yu=1004]="Yu",e[e.WuGui=1005]="WuGui",e[e.Tu=1006]="Tu",e[e.Yang=1007]="Yang",e[e.Ma=1008]="Ma",e[e.She=1009]="She",e[e.Ji=1010]="Ji",e[e.Ya=1011]="Ya",e[e.QingWa=1012]="QingWa",e[e.HuLi=1013]="HuLi",e[e.LaoShu=1014]="LaoShu"}(n.Animals_en_ID||(n.Animals_en_ID={})),function(e){e[e.LanQiu=5e3]="LanQiu",e[e.YuMaoQiu=5001]="YuMaoQiu",e[e.PingPangQiu=5002]="PingPangQiu",e[e.ZuQiu=5003]="ZuQiu",e[e.PaiQiu=5004]="PaiQiu",e[e.WangQiu=5005]="WangQiu",e[e.ZhuoQiu=5006]="ZhuoQiu",e[e.BaoLingQiu=5007]="BaoLingQiu",e[e.BangQiu=5008]="BangQiu"}(n.Ball_ID||(n.Ball_ID={})),function(e){e[e.DongWuLei=100]="DongWuLei",e[e.ZhiWuLei=101]="ZhiWuLei",e[e.JianZhu=102]="JianZhu",e[e.ShuJi=103]="ShuJi",e[e.Qiu=104]="Qiu",e[e.ShiWuLei=105]="ShiWuLei",e[e.XingZhuang=106]="XingZhuang",e[e.FuZhuangLei=107]="FuZhuangLei",e[e.PeiShi=108]="PeiShi",e[e.WenJuGongJu=109]="WenJuGongJu",e[e.HuaZhuangPin=110]="HuaZhuangPin",e[e.ShuiGuo=111]="ShuiGuo",e[e.ShuCai=112]="ShuCai",e[e.GanRao=113]="GanRao"}(n.Ball_Type||(n.Ball_Type={})),function(e){e[e.LanQiu=5e3]="LanQiu",e[e.YuMaoQiu=5001]="YuMaoQiu",e[e.PingPangQiu=5002]="PingPangQiu",e[e.ZuQiu=5003]="ZuQiu",e[e.PaiQiu=5004]="PaiQiu",e[e.WangQiu=5005]="WangQiu",e[e.ZhuoQiu=5006]="ZhuoQiu",e[e.BaoLingQiu=5007]="BaoLingQiu",e[e.BangQiu=5008]="BangQiu"}(n.Ball_en_ID||(n.Ball_en_ID={})),function(e){e[e.ShuBen=4e3]="ShuBen"}(n.Books_ID||(n.Books_ID={})),function(e){e[e.DongWuLei=100]="DongWuLei",e[e.ZhiWuLei=101]="ZhiWuLei",e[e.JianZhu=102]="JianZhu",e[e.ShuJi=103]="ShuJi",e[e.Qiu=104]="Qiu",e[e.ShiWuLei=105]="ShiWuLei",e[e.XingZhuang=106]="XingZhuang",e[e.FuZhuangLei=107]="FuZhuangLei",e[e.PeiShi=108]="PeiShi",e[e.WenJuGongJu=109]="WenJuGongJu",e[e.HuaZhuangPin=110]="HuaZhuangPin",e[e.ShuiGuo=111]="ShuiGuo",e[e.ShuCai=112]="ShuCai",e[e.GanRao=113]="GanRao"}(n.Books_Type||(n.Books_Type={})),function(e){e[e.ShuBen=4e3]="ShuBen"}(n.Books_en_ID||(n.Books_en_ID={})),function(e){e[e.MingShengGuJi=3e3]="MingShengGuJi"}(n.Buildings_ID||(n.Buildings_ID={})),function(e){e[e.DongWuLei=100]="DongWuLei",e[e.ZhiWuLei=101]="ZhiWuLei",e[e.JianZhu=102]="JianZhu",e[e.ShuJi=103]="ShuJi",e[e.Qiu=104]="Qiu",e[e.ShiWuLei=105]="ShiWuLei",e[e.XingZhuang=106]="XingZhuang",e[e.FuZhuangLei=107]="FuZhuangLei",e[e.PeiShi=108]="PeiShi",e[e.WenJuGongJu=109]="WenJuGongJu",e[e.HuaZhuangPin=110]="HuaZhuangPin",e[e.ShuiGuo=111]="ShuiGuo",e[e.ShuCai=112]="ShuCai",e[e.GanRao=113]="GanRao"}(n.Buildings_Type||(n.Buildings_Type={})),function(e){e[e.MingShengGuJi=3e3]="MingShengGuJi"}(n.Buildings_en_ID||(n.Buildings_en_ID={})),function(e){e[e.DongWuLei=100]="DongWuLei",e[e.ZhiWuLei=101]="ZhiWuLei",e[e.JianZhu=102]="JianZhu",e[e.ShuJi=103]="ShuJi",e[e.Qiu=104]="Qiu",e[e.ShiWuLei=105]="ShiWuLei",e[e.XingZhuang=106]="XingZhuang",e[e.FuZhuangLei=107]="FuZhuangLei",e[e.PeiShi=108]="PeiShi",e[e.WenJuGongJu=109]="WenJuGongJu",e[e.HuaZhuangPin=110]="HuaZhuangPin",e[e.ShuiGuo=111]="ShuiGuo",e[e.ShuCai=112]="ShuCai",e[e.GanRao=113]="GanRao"}(n.Class_ID||(n.Class_ID={})),function(e){e[e.KanGuangGaoShiBai=1]="KanGuangGaoShiBai",e[e.JiangLiBuShu=2]="JiangLiBuShu",e[e.JiangLiCaiHongBaoShi=3]="JiangLiCaiHongBaoShi",e[e.ZanTingMiaoShu=4]="ZanTingMiaoShu",e[e.MianFeiZanTing=5]="MianFeiZanTing",e[e.ZanTingKouFen=6]="ZanTingKouFen",e[e.BangZhuYeMian1=7]="BangZhuYeMian1",e[e.BangZhuYeMian2=8]="BangZhuYeMian2",e[e.BangZhuYeMian3=9]="BangZhuYeMian3",e[e.BangZhuYeMian4=10]="BangZhuYeMian4",e[e.DeFen=11]="DeFen"}(n.En_ID||(n.En_ID={})),function(e){e[e.ZanTingJieMian=400]="ZanTingJieMian",e[e.BangZhuJieMian=500]="BangZhuJieMian",e[e.JieSuanJieMian=600]="JieSuanJieMian",e[e.GuangGaoJieMian=700]="GuangGaoJieMian"}(n.En_View||(n.En_View={})),function(e){e[e.Zuo=0]="Zuo",e[e.JuZhong=1]="JuZhong",e[e.You=2]="You"}(n.En_Horizontal||(n.En_Horizontal={})),function(e){e[e.Shang=0]="Shang",e[e.JuZhong=1]="JuZhong",e[e.Xia=2]="Xia"}(n.En_Vertical||(n.En_Vertical={})),function(e){e[e.PiSa=6e3]="PiSa",e[e.MianTiao=6001]="MianTiao",e[e.DanGao=6002]="DanGao",e[e.TianTianQuan=6003]="TianTianQuan",e[e.ShouSi=6004]="ShouSi",e[e.HanBao=6005]="HanBao",e[e.MianBao=6006]="MianBao",e[e.Dan=6007]="Dan",e[e.NiuNai=6008]="NiuNai",e[e.GuoZhi=6009]="GuoZhi",e[e.KaFei=6010]="KaFei",e[e.KuangQuanShui=6011]="KuangQuanShui",e[e.GuanTou=6012]="GuanTou",e[e.XiangChang=6013]="XiangChang",e[e.SeLa=6014]="SeLa",e[e.Rou=6015]="Rou",e[e.LengYin=6016]="LengYin",e[e.TangGuo=6017]="TangGuo",e[e.QiaoKeLi=6018]="QiaoKeLi",e[e.ShuTiao=6019]="ShuTiao"}(n.Food_ID||(n.Food_ID={})),function(e){e[e.DongWuLei=100]="DongWuLei",e[e.ZhiWuLei=101]="ZhiWuLei",e[e.JianZhu=102]="JianZhu",e[e.ShuJi=103]="ShuJi",e[e.Qiu=104]="Qiu",e[e.ShiWuLei=105]="ShiWuLei",e[e.XingZhuang=106]="XingZhuang",e[e.FuZhuangLei=107]="FuZhuangLei",e[e.PeiShi=108]="PeiShi",e[e.WenJuGongJu=109]="WenJuGongJu",e[e.HuaZhuangPin=110]="HuaZhuangPin",e[e.ShuiGuo=111]="ShuiGuo",e[e.ShuCai=112]="ShuCai",e[e.GanRao=113]="GanRao"}(n.Food_Type||(n.Food_Type={})),function(e){e[e.PiSa=6e3]="PiSa",e[e.MianTiao=6001]="MianTiao",e[e.DanGao=6002]="DanGao",e[e.TianTianQuan=6003]="TianTianQuan",e[e.ShouSi=6004]="ShouSi",e[e.HanBao=6005]="HanBao",e[e.MianBao=6006]="MianBao",e[e.Dan=6007]="Dan",e[e.NiuNai=6008]="NiuNai",e[e.GuoZhi=6009]="GuoZhi",e[e.KaFei=6010]="KaFei",e[e.KuangQuanShui=6011]="KuangQuanShui",e[e.GuanTou=6012]="GuanTou",e[e.XiangChang=6013]="XiangChang",e[e.SeLa=6014]="SeLa",e[e.Rou=6015]="Rou",e[e.LengYin=6016]="LengYin",e[e.TangGuo=6017]="TangGuo",e[e.QiaoKeLi=6018]="QiaoKeLi",e[e.ShuTiao=6019]="ShuTiao"}(n.Food_en_ID||(n.Food_en_ID={})),function(e){e[e.XiGua=12e3]="XiGua",e[e.PingGuo=12001]="PingGuo",e[e.LiZi=12002]="LiZi",e[e.XiangJiao=12003]="XiangJiao",e[e.MiHouTao=12004]="MiHouTao",e[e.ChengZi=12005]="ChengZi",e[e.PuTao=12006]="PuTao",e[e.Tao=12007]="Tao",e[e.YingTao=12008]="YingTao",e[e.BoLuo=12009]="BoLuo",e[e.CaoMei=12010]="CaoMei",e[e.LanMei=12011]="LanMei",e[e.NingMeng=12012]="NingMeng",e[e.MangGuo=12013]="MangGuo",e[e.NiuYouGuo=12014]="NiuYouGuo",e[e.HuoLongGuo=12015]="HuoLongGuo"}(n.Fruits_ID||(n.Fruits_ID={})),function(e){e[e.DongWuLei=100]="DongWuLei",e[e.ZhiWuLei=101]="ZhiWuLei",e[e.JianZhu=102]="JianZhu",e[e.ShuJi=103]="ShuJi",e[e.Qiu=104]="Qiu",e[e.ShiWuLei=105]="ShiWuLei",e[e.XingZhuang=106]="XingZhuang",e[e.FuZhuangLei=107]="FuZhuangLei",e[e.PeiShi=108]="PeiShi",e[e.WenJuGongJu=109]="WenJuGongJu",e[e.HuaZhuangPin=110]="HuaZhuangPin",e[e.ShuiGuo=111]="ShuiGuo",e[e.ShuCai=112]="ShuCai",e[e.GanRao=113]="GanRao"}(n.Fruits_Type||(n.Fruits_Type={})),function(e){e[e.XiGua=12e3]="XiGua",e[e.PingGuo=12001]="PingGuo",e[e.LiZi=12002]="LiZi",e[e.XiangJiao=12003]="XiangJiao",e[e.MiHouTao=12004]="MiHouTao",e[e.ChengZi=12005]="ChengZi",e[e.PuTao=12006]="PuTao",e[e.Tao=12007]="Tao",e[e.YingTao=12008]="YingTao",e[e.BoLuo=12009]="BoLuo",e[e.CaoMei=12010]="CaoMei",e[e.LanMei=12011]="LanMei",e[e.NingMeng=12012]="NingMeng",e[e.MangGuo=12013]="MangGuo",e[e.NiuYouGuo=12014]="NiuYouGuo",e[e.HuoLongGuo=12015]="HuoLongGuo"}(n.Fruits_en_ID||(n.Fruits_en_ID={})),function(e){e[e.KouHong=11e3]="KouHong",e[e.JingZi=11001]="JingZi",e[e.YanYingPan=11002]="YanYingPan",e[e.XiangShui=11003]="XiangShui"}(n.Makeup_ID||(n.Makeup_ID={})),function(e){e[e.DongWuLei=100]="DongWuLei",e[e.ZhiWuLei=101]="ZhiWuLei",e[e.JianZhu=102]="JianZhu",e[e.ShuJi=103]="ShuJi",e[e.Qiu=104]="Qiu",e[e.ShiWuLei=105]="ShiWuLei",e[e.XingZhuang=106]="XingZhuang",e[e.FuZhuangLei=107]="FuZhuangLei",e[e.PeiShi=108]="PeiShi",e[e.WenJuGongJu=109]="WenJuGongJu",e[e.HuaZhuangPin=110]="HuaZhuangPin",e[e.ShuiGuo=111]="ShuiGuo",e[e.ShuCai=112]="ShuCai",e[e.GanRao=113]="GanRao"}(n.Makeup_Type||(n.Makeup_Type={})),function(e){e[e.KouHong=11e3]="KouHong",e[e.JingZi=11001]="JingZi",e[e.YanYingPan=11002]="YanYingPan",e[e.XiangShui=11003]="XiangShui"}(n.Makeup_en_ID||(n.Makeup_en_ID={})),function(e){e[e.ShouBiao=9e3]="ShouBiao",e[e.JieZhi=9001]="JieZhi",e[e.ErHuan=9002]="ErHuan",e[e.XiangLian=9003]="XiangLian",e[e.ShouHuan=9004]="ShouHuan",e[e.PiBao=9005]="PiBao",e[e.SiJin=9006]="SiJin",e[e.WaZi=9007]="WaZi",e[e.MaoZi=9008]="MaoZi",e[e.FaQia=9009]="FaQia"}(n.Ornament_ID||(n.Ornament_ID={})),function(e){e[e.DongWuLei=100]="DongWuLei",e[e.ZhiWuLei=101]="ZhiWuLei",e[e.JianZhu=102]="JianZhu",e[e.ShuJi=103]="ShuJi",e[e.Qiu=104]="Qiu",e[e.ShiWuLei=105]="ShiWuLei",e[e.XingZhuang=106]="XingZhuang",e[e.FuZhuangLei=107]="FuZhuangLei",e[e.PeiShi=108]="PeiShi",e[e.WenJuGongJu=109]="WenJuGongJu",e[e.HuaZhuangPin=110]="HuaZhuangPin",e[e.ShuiGuo=111]="ShuiGuo",e[e.ShuCai=112]="ShuCai",e[e.GanRao=113]="GanRao"}(n.Ornament_Type||(n.Ornament_Type={})),function(e){e[e.ShouBiao=9e3]="ShouBiao",e[e.JieZhi=9001]="JieZhi",e[e.ErHuan=9002]="ErHuan",e[e.XiangLian=9003]="XiangLian",e[e.ShouHuan=9004]="ShouHuan",e[e.PiBao=9005]="PiBao",e[e.SiJin=9006]="SiJin",e[e.WaZi=9007]="WaZi",e[e.MaoZi=9008]="MaoZi",e[e.FaQia=9009]="FaQia"}(n.Ornament_en_ID||(n.Ornament_en_ID={})),function(e){e[e.GanRaoWuPin=14e3]="GanRaoWuPin"}(n.Other_ID||(n.Other_ID={})),function(e){e[e.DongWuLei=100]="DongWuLei",e[e.ZhiWuLei=101]="ZhiWuLei",e[e.JianZhu=102]="JianZhu",e[e.ShuJi=103]="ShuJi",e[e.Qiu=104]="Qiu",e[e.ShiWuLei=105]="ShiWuLei",e[e.XingZhuang=106]="XingZhuang",e[e.FuZhuangLei=107]="FuZhuangLei",e[e.PeiShi=108]="PeiShi",e[e.WenJuGongJu=109]="WenJuGongJu",e[e.HuaZhuangPin=110]="HuaZhuangPin",e[e.ShuiGuo=111]="ShuiGuo",e[e.ShuCai=112]="ShuCai",e[e.GanRao=113]="GanRao"}(n.Other_Type||(n.Other_Type={})),function(e){e[e.GanRaoWuPin=14e3]="GanRaoWuPin"}(n.Other_en_ID||(n.Other_en_ID={})),function(e){e[e.BeiXin=8e3]="BeiXin",e[e.TXu=8001]="TXu",e[e.ChenYi=8002]="ChenYi",e[e.MaoYi=8003]="MaoYi",e[e.YuRongFu=8004]="YuRongFu",e[e.DuanKu=8005]="DuanKu",e[e.ChangKu=8006]="ChangKu",e[e.PiXie=8007]="PiXie",e[e.YunDongPaoXie=8008]="YunDongPaoXie",e[e.XueZi=8009]="XueZi"}(n.Outlet_ID||(n.Outlet_ID={})),function(e){e[e.DongWuLei=100]="DongWuLei",e[e.ZhiWuLei=101]="ZhiWuLei",e[e.JianZhu=102]="JianZhu",e[e.ShuJi=103]="ShuJi",e[e.Qiu=104]="Qiu",e[e.ShiWuLei=105]="ShiWuLei",e[e.XingZhuang=106]="XingZhuang",e[e.FuZhuangLei=107]="FuZhuangLei",e[e.PeiShi=108]="PeiShi",e[e.WenJuGongJu=109]="WenJuGongJu",e[e.HuaZhuangPin=110]="HuaZhuangPin",e[e.ShuiGuo=111]="ShuiGuo",e[e.ShuCai=112]="ShuCai",e[e.GanRao=113]="GanRao"}(n.Outlet_Type||(n.Outlet_Type={})),function(e){e[e.BeiXin=8e3]="BeiXin",e[e.TXu=8001]="TXu",e[e.ChenYi=8002]="ChenYi",e[e.MaoYi=8003]="MaoYi",e[e.YuRongFu=8004]="YuRongFu",e[e.DuanKu=8005]="DuanKu",e[e.ChangKu=8006]="ChangKu",e[e.PiXie=8007]="PiXie",e[e.YunDongPaoXie=8008]="YunDongPaoXie",e[e.XueZi=8009]="XueZi"}(n.Outlet_en_ID||(n.Outlet_en_ID={})),function(e){e[e.ShuYe=2e3]="ShuYe",e[e.HuaDuo=2001]="HuaDuo",e[e.HuaHuan=2002]="HuaHuan",e[e.XianRenQiuPenZai=2003]="XianRenQiuPenZai",e[e.ShengDanShu=2004]="ShengDanShu"}(n.Plants_ID||(n.Plants_ID={})),function(e){e[e.DongWuLei=100]="DongWuLei",e[e.ZhiWuLei=101]="ZhiWuLei",e[e.JianZhu=102]="JianZhu",e[e.ShuJi=103]="ShuJi",e[e.Qiu=104]="Qiu",e[e.ShiWuLei=105]="ShiWuLei",e[e.XingZhuang=106]="XingZhuang",e[e.FuZhuangLei=107]="FuZhuangLei",e[e.PeiShi=108]="PeiShi",e[e.WenJuGongJu=109]="WenJuGongJu",e[e.HuaZhuangPin=110]="HuaZhuangPin",e[e.ShuiGuo=111]="ShuiGuo",e[e.ShuCai=112]="ShuCai",e[e.GanRao=113]="GanRao"}(n.Plants_Type||(n.Plants_Type={})),function(e){e[e.ShuYe=2e3]="ShuYe",e[e.HuaDuo=2001]="HuaDuo",e[e.HuaHuan=2002]="HuaHuan",e[e.XianRenQiuPenZai=2003]="XianRenQiuPenZai",e[e.ShengDanShu=2004]="ShengDanShu"}(n.Plants_en_ID||(n.Plants_en_ID={})),function(e){e[e.DongWuLei=100]="DongWuLei",e[e.ZhiWuLei=101]="ZhiWuLei",e[e.JianZhu=102]="JianZhu",e[e.ShuJi=103]="ShuJi",e[e.Qiu=104]="Qiu",e[e.ShiWuLei=105]="ShiWuLei",e[e.XingZhuang=106]="XingZhuang",e[e.FuZhuangLei=107]="FuZhuangLei",e[e.PeiShi=108]="PeiShi",e[e.WenJuGongJu=109]="WenJuGongJu",e[e.HuaZhuangPin=110]="HuaZhuangPin",e[e.ShuiGuo=111]="ShuiGuo",e[e.ShuCai=112]="ShuCai",e[e.GanRao=113]="GanRao",e[e.SuiJiChi=114]="SuiJiChi"}(n.Random_ID||(n.Random_ID={})),function(e){e[e.DongWuLei=100]="DongWuLei",e[e.ZhiWuLei=101]="ZhiWuLei",e[e.JianZhu=102]="JianZhu",e[e.ShuJi=103]="ShuJi",e[e.Qiu=104]="Qiu",e[e.ShiWuLei=105]="ShiWuLei",e[e.XingZhuang=106]="XingZhuang",e[e.FuZhuangLei=107]="FuZhuangLei",e[e.PeiShi=108]="PeiShi",e[e.WenJuGongJu=109]="WenJuGongJu",e[e.HuaZhuangPin=110]="HuaZhuangPin",e[e.ShuiGuo=111]="ShuiGuo",e[e.ShuCai=112]="ShuCai",e[e.GanRao=113]="GanRao",e[e.Mao=1e3]="Mao",e[e.Gou=1001]="Gou",e[e.Niao=1002]="Niao",e[e.Zhu=1003]="Zhu",e[e.Yu=1004]="Yu",e[e.WuGui=1005]="WuGui",e[e.Tu=1006]="Tu",e[e.Yang=1007]="Yang",e[e.Ma=1008]="Ma",e[e.She=1009]="She",e[e.Ji=1010]="Ji",e[e.Ya=1011]="Ya",e[e.QingWa=1012]="QingWa",e[e.HuLi=1013]="HuLi",e[e.LaoShu=1014]="LaoShu",e[e.ShuYe=2e3]="ShuYe",e[e.HuaDuo=2001]="HuaDuo",e[e.HuaHuan=2002]="HuaHuan",e[e.XianRenQiuPenZai=2003]="XianRenQiuPenZai",e[e.ShengDanShu=2004]="ShengDanShu",e[e.MingShengGuJi=3e3]="MingShengGuJi",e[e.ShuBen=4e3]="ShuBen",e[e.LanQiu=5e3]="LanQiu",e[e.YuMaoQiu=5001]="YuMaoQiu",e[e.PingPangQiu=5002]="PingPangQiu",e[e.ZuQiu=5003]="ZuQiu",e[e.PaiQiu=5004]="PaiQiu",e[e.WangQiu=5005]="WangQiu",e[e.ZhuoQiu=5006]="ZhuoQiu",e[e.BaoLingQiu=5007]="BaoLingQiu",e[e.BangQiu=5008]="BangQiu",e[e.PiSa=6e3]="PiSa",e[e.MianTiao=6001]="MianTiao",e[e.DanGao=6002]="DanGao",e[e.TianTianQuan=6003]="TianTianQuan",e[e.ShouSi=6004]="ShouSi",e[e.HanBao=6005]="HanBao",e[e.MianBao=6006]="MianBao",e[e.Dan=6007]="Dan",e[e.NiuNai=6008]="NiuNai",e[e.GuoZhi=6009]="GuoZhi",e[e.KaFei=6010]="KaFei",e[e.KuangQuanShui=6011]="KuangQuanShui",e[e.GuanTou=6012]="GuanTou",e[e.XiangChang=6013]="XiangChang",e[e.SeLa=6014]="SeLa",e[e.Rou=6015]="Rou",e[e.LengYin=6016]="LengYin",e[e.TangGuo=6017]="TangGuo",e[e.QiaoKeLi=6018]="QiaoKeLi",e[e.ShuTiao=6019]="ShuTiao",e[e.SanJiaoXing=7e3]="SanJiaoXing",e[e.ZhengFangXing=7001]="ZhengFangXing",e[e.BeiKe=7002]="BeiKe",e[e.BeiXin=8e3]="BeiXin",e[e.TXu=8001]="TXu",e[e.ChenYi=8002]="ChenYi",e[e.MaoYi=8003]="MaoYi",e[e.YuRongFu=8004]="YuRongFu",e[e.DuanKu=8005]="DuanKu",e[e.ChangKu=8006]="ChangKu",e[e.PiXie=8007]="PiXie",e[e.YunDongPaoXie=8008]="YunDongPaoXie",e[e.XueZi=8009]="XueZi",e[e.ShouBiao=9e3]="ShouBiao",e[e.JieZhi=9001]="JieZhi",e[e.ErHuan=9002]="ErHuan",e[e.XiangLian=9003]="XiangLian",e[e.ShouHuan=9004]="ShouHuan",e[e.PiBao=9005]="PiBao",e[e.SiJin=9006]="SiJin",e[e.WaZi=9007]="WaZi",e[e.MaoZi=9008]="MaoZi",e[e.FaQia=9009]="FaQia",e[e.JianDao=1e4]="JianDao",e[e.JuanChi=10001]="JuanChi",e[e.ShuBao=10002]="ShuBao",e[e.Bi=10003]="Bi",e[e.DiTu=10004]="DiTu",e[e.ShangSeHuaPan=10005]="ShangSeHuaPan",e[e.KouHong=11e3]="KouHong",e[e.JingZi=11001]="JingZi",e[e.YanYingPan=11002]="YanYingPan",e[e.XiangShui=11003]="XiangShui",e[e.XiGua=12e3]="XiGua",e[e.PingGuo=12001]="PingGuo",e[e.LiZi=12002]="LiZi",e[e.XiangJiao=12003]="XiangJiao",e[e.MiHouTao=12004]="MiHouTao",e[e.ChengZi=12005]="ChengZi",e[e.PuTao=12006]="PuTao",e[e.Tao=12007]="Tao",e[e.YingTao=12008]="YingTao",e[e.BoLuo=12009]="BoLuo",e[e.CaoMei=12010]="CaoMei",e[e.LanMei=12011]="LanMei",e[e.NingMeng=12012]="NingMeng",e[e.MangGuo=12013]="MangGuo",e[e.NiuYouGuo=12014]="NiuYouGuo",e[e.HuoLongGuo=12015]="HuoLongGuo",e[e.HuLuoBu=13e3]="HuLuoBu",e[e.WanDou=13001]="WanDou",e[e.NanGua=13002]="NanGua",e[e.TianJiao=13003]="TianJiao",e[e.YuMi=13004]="YuMi",e[e.YangCong=13005]="YangCong",e[e.TuDou=13006]="TuDou",e[e.HuangGua=13007]="HuangGua",e[e.FanQie=13008]="FanQie",e[e.MoGu=13009]="MoGu",e[e.QingHuaCai=13010]="QingHuaCai",e[e.QieZi=13011]="QieZi",e[e.JuanXinCai=13012]="JuanXinCai",e[e.GanRaoWuPin=14e3]="GanRaoWuPin"}(n.Random_Pool||(n.Random_Pool={})),function(e){e[e.SanJiaoXing=7e3]="SanJiaoXing",e[e.ZhengFangXing=7001]="ZhengFangXing",e[e.BeiKe=7002]="BeiKe"}(n.Shape_ID||(n.Shape_ID={})),function(e){e[e.DongWuLei=100]="DongWuLei",e[e.ZhiWuLei=101]="ZhiWuLei",e[e.JianZhu=102]="JianZhu",e[e.ShuJi=103]="ShuJi",e[e.Qiu=104]="Qiu",e[e.ShiWuLei=105]="ShiWuLei",e[e.XingZhuang=106]="XingZhuang",e[e.FuZhuangLei=107]="FuZhuangLei",e[e.PeiShi=108]="PeiShi",e[e.WenJuGongJu=109]="WenJuGongJu",e[e.HuaZhuangPin=110]="HuaZhuangPin",e[e.ShuiGuo=111]="ShuiGuo",e[e.ShuCai=112]="ShuCai",e[e.GanRao=113]="GanRao"}(n.Shape_Type||(n.Shape_Type={})),function(e){e[e.SanJiaoXing=7e3]="SanJiaoXing",e[e.ZhengFangXing=7001]="ZhengFangXing",e[e.BeiKe=7002]="BeiKe"}(n.Shape_en_ID||(n.Shape_en_ID={})),function(e){e[e.JianDao=1e4]="JianDao",e[e.JuanChi=10001]="JuanChi",e[e.ShuBao=10002]="ShuBao",e[e.Bi=10003]="Bi",e[e.DiTu=10004]="DiTu",e[e.ShangSeHuaPan=10005]="ShangSeHuaPan"}(n.Tool_ID||(n.Tool_ID={})),function(e){e[e.DongWuLei=100]="DongWuLei",e[e.ZhiWuLei=101]="ZhiWuLei",e[e.JianZhu=102]="JianZhu",e[e.ShuJi=103]="ShuJi",e[e.Qiu=104]="Qiu",e[e.ShiWuLei=105]="ShiWuLei",e[e.XingZhuang=106]="XingZhuang",e[e.FuZhuangLei=107]="FuZhuangLei",e[e.PeiShi=108]="PeiShi",e[e.WenJuGongJu=109]="WenJuGongJu",e[e.HuaZhuangPin=110]="HuaZhuangPin",e[e.ShuiGuo=111]="ShuiGuo",e[e.ShuCai=112]="ShuCai",e[e.GanRao=113]="GanRao"}(n.Tool_Type||(n.Tool_Type={})),function(e){e[e.JianDao=1e4]="JianDao",e[e.JuanChi=10001]="JuanChi",e[e.ShuBao=10002]="ShuBao",e[e.Bi=10003]="Bi",e[e.DiTu=10004]="DiTu",e[e.ShangSeHuaPan=10005]="ShangSeHuaPan"}(n.Tool_en_ID||(n.Tool_en_ID={})),function(e){e[e.HuLuoBu=13e3]="HuLuoBu",e[e.WanDou=13001]="WanDou",e[e.NanGua=13002]="NanGua",e[e.TianJiao=13003]="TianJiao",e[e.YuMi=13004]="YuMi",e[e.YangCong=13005]="YangCong",e[e.TuDou=13006]="TuDou",e[e.HuangGua=13007]="HuangGua",e[e.FanQie=13008]="FanQie",e[e.MoGu=13009]="MoGu",e[e.QingHuaCai=13010]="QingHuaCai",e[e.QieZi=13011]="QieZi",e[e.JuanXinCai=13012]="JuanXinCai"}(n.Vegetable_ID||(n.Vegetable_ID={})),function(e){e[e.DongWuLei=100]="DongWuLei",e[e.ZhiWuLei=101]="ZhiWuLei",e[e.JianZhu=102]="JianZhu",e[e.ShuJi=103]="ShuJi",e[e.Qiu=104]="Qiu",e[e.ShiWuLei=105]="ShiWuLei",e[e.XingZhuang=106]="XingZhuang",e[e.FuZhuangLei=107]="FuZhuangLei",e[e.PeiShi=108]="PeiShi",e[e.WenJuGongJu=109]="WenJuGongJu",e[e.HuaZhuangPin=110]="HuaZhuangPin",e[e.ShuiGuo=111]="ShuiGuo",e[e.ShuCai=112]="ShuCai",e[e.GanRao=113]="GanRao"}(n.Vegetable_Type||(n.Vegetable_Type={})),function(e){e[e.HuLuoBu=13e3]="HuLuoBu",e[e.WanDou=13001]="WanDou",e[e.NanGua=13002]="NanGua",e[e.TianJiao=13003]="TianJiao",e[e.YuMi=13004]="YuMi",e[e.YangCong=13005]="YangCong",e[e.TuDou=13006]="TuDou",e[e.HuangGua=13007]="HuangGua",e[e.FanQie=13008]="FanQie",e[e.MoGu=13009]="MoGu",e[e.QingHuaCai=13010]="QingHuaCai",e[e.QieZi=13011]="QieZi",e[e.JuanXinCai=13012]="JuanXinCai"}(n.Vegetable_en_ID||(n.Vegetable_en_ID={})),cc._RF.pop()},{}]},{},["AdLayer","FlyCnicornAd","WildAdButton","Annealing","BasePacker","GeometryPolygon","MinPotentialPacker","P2Packer","FlyAdCnicornAniamtion","PauseCostAnimation","ResultAnimation","WildAdAnimation","App","CommonSignal","AdController","GameStateController","PolygonPacker","ResourceController","GridView","PercentLabel","PercentLabel2","PolygonScene","TestItemRoot","GameFactory","GamePlaySignal","GameLogic","GamePlayModel","GridUtil","ItemModel","TypeModel","AddAnimation","EffectBase","FireWorkAnimation","ItemAnimation","ItemAnimationRoot","TypeFinishLight","TypeFinishRing","Item","ItemRoot","PrefabBaseView","VisibleFrame","BlackView","BonusProgressView","CompleteView","HelpButtonView","HelpLabelView","MenuButtonView","MenuLayerView","ResultLayerView","RevertButtonView","ScoreLabelView","SoundButtonView","Subject","SubjectLabel","SubjectTap","SubjectTypeLabel","SubmitButtonView","SubmitLayerView","TapCountView","TimeLabelView","BreakAnimation","Page","ScoreFloat","GameRecorder","GameRule","ItemType","Level","Theme","InititalCommand","LoadAudioCommand","LoadJsonCommand","LoadPrefabCommand","StartGameCommand","InitialFacade","LoadingAnimation","LoadingPageMediator","LoadingView","ThemeView","AudioManager","StepManager","PlayModelProxy","PolygonDataModel","TableManager","TutorialManager","TutorialView","UpdateController","CelerSDK","Cocos","FrameAniBase","HashMap","LogHandler","Random","Signal","Time","ToSingleton","AdaptationWigetView","BaseMediator","BaseView","GlobalSingleTouchMediator","GlobalSingleTouchView","HelpLayerMediator","HelpLayerView","NumberChangedView","SingleTouchMediator","SingleTouchView","SliderView","Test","TestMove","FrontView","TestApp","TestSingleTouchView","TimeEffectAnimation","EaseBaseView","PositionView","RotationView","ScaleView","SkewView","table"]);