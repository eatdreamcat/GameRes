window.__require=function e(t,n,i){function o(r,s){if(!n[r]){if(!t[r]){var c=r.split("/");if(c=c[c.length-1],!t[c]){var l="function"==typeof __require&&__require;if(!s&&l)return l(c,!0);if(a)return a(c,!0);throw new Error("Cannot find module '"+r+"'")}}var u=n[r]={exports:{}};t[r][0].call(u.exports,function(e){return o(t[r][1][e]||e)},u,u.exports,e,t,n,i)}return n[r].exports}for(var a="function"==typeof __require&&__require,r=0;r<i.length;r++)o(i[r]);return o}({AdController:[function(e,t,n){"use strict";cc._RF.push(t,"f8fd81TK4dBe5zdFJ25L5qK","AdController"),Object.defineProperty(n,"__esModule",{value:!0});var i=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.hasBind=!1,t.finishCallback={},t.failedCallback={},t.adCount=0,t.msgMap={},t.musicVolume=0,t.effectVolume=0,t}return __extends(t,e),t.prototype.showAd=function(e,t,n){var i=this;0==this.hasBind&&this.bindCallback();var o=e+this.adCount;if(this.msgMap[o]=e,null==this.finishCallback[o]&&(this.finishCallback[o]=[]),this.finishCallback[o].push(t),null==this.failedCallback[o]&&(this.failedCallback[o]=[]),this.failedCallback[o].push(n),this.musicVolume=cc.audioEngine.getMusicVolume(),this.effectVolume=cc.audioEngine.getEffectsVolume(),CELER_X)celerSDK.showAd(o);else if(cc.director.getScene()&&cc.director.getScene().getChildByName("Canvas")){var a=cc.director.getScene().getChildByName("Canvas");if(a.getChildByName("adNode"))return;var r=new cc.Node("adNode"),s=r.addComponent(cc.VideoPlayer);s.remoteURL="https://vicat.wang/GameRes/catcatcat.mp4",a.width=1464,a.height=2400,a.addChild(r),r.setPosition(0,0),s.node.on("ready-to-play",function(){console.log("ready-to-play"),r.width=1080,r.height=1920,s.play()},this),s.node.on("meta-loaded",function(){console.log("meta-loaded")},this),s.node.on("clicked",function(){if(console.log("clicked"),r.pauseCount++,r.pauseCount>=5){for(var e=document.getElementsByClassName("cocosVideo"),t=0;t<e.length;t++){var n=e.item(t);n&&n.remove()}setTimeout(function(){r.removeFromParent(!0),i.onAddFaild(o)},0)}},this),s.node.on("playing",function(){console.log("playing")},this),r.pauseCount=0,s.node.on("paused",function(){if(console.log("paused"),r.pauseCount++,r.pauseCount>=5){for(var e=document.getElementsByClassName("cocosVideo"),t=0;t<e.length;t++){var n=e.item(t);n&&n.remove()}setTimeout(function(){r.removeFromParent(!0),i.onAddFaild(o)},0)}},this),s.node.on("stopped",function(){console.log("stopped")},this),s.node.on("completed",function(){console.log("completed"),s.stop();for(var e=document.getElementsByClassName("cocosVideo"),t=0;t<e.length;t++){var n=e.item(t);n&&n.remove()}setTimeout(function(){r.removeFromParent(!0),i.onAdFinish(o)},0)},this)}this.adCount++,console.log(" request ad:",o)},t.prototype.bindCallback=function(){this.hasBind=!0,CELER_X&&(celerSDK.onAdPlayFailed(this.onAddFaild.bind(this)),celerSDK.onAdPlayFinished(this.onAdFinish.bind(this)))},t.prototype.onAdFinish=function(e){if(this.finishCallback[e]){for(var t=0,n=this.finishCallback[e];t<n.length;t++){(0,n[t])(this.msgMap[e])}this.finishCallback[e]=null,this.failedCallback[e]=null,this.msgMap[e]=null}},t.prototype.onAddFaild=function(e){if(this.failedCallback[e]){for(var t=0,n=this.failedCallback[e];t<n.length;t++){(0,n[t])(this.msgMap[e])}this.failedCallback[e]=null,this.finishCallback[e]=null,this.msgMap[e]=null}},t}(e("../Utils/ToSingleton").SingleTon());n.AdController=i,cc._RF.pop()},{"../Utils/ToSingleton":"ToSingleton"}],AdLayer:[function(e,t,n){"use strict";cc._RF.push(t,"904dfLpgTdDDYKRCr4s4kr2","AdLayer"),Object.defineProperty(n,"__esModule",{value:!0});var i=e("./Ad/FlyCnicornAd"),o=e("./Controller/AdController"),a=e("./table"),r=e("./Utils/Signal"),s=e("./WildAdButton"),c=cc._decorator,l=c.ccclass,u=c.property,h=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(r.BaseSignal);n.RandomFreeClearSignal=h;var d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(r.BaseSignal);n.RemoveFlyCnicornSignal=d;var p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(r.BaseSignal);n.CnicornWatchFailSignal=p;var g=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(r.BaseSignal);n.HideSubmitLayerSignal=g;var f,m=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(r.BaseSignal);n.SetAllSunSignal=m,function(e){e[e.Cnicorn=0]="Cnicorn",e[e.Sun=1]="Sun"}(f||(f={}));var y=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.AdAtlas=null,t}return __extends(t,e),Object.defineProperty(t.prototype,"Panel",{get:function(){return this.node.getChildByName("NormalPanel")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"WatchAd",{get:function(){return this.Panel.getChildByName("btn_get")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"BackToGame",{get:function(){return this.Panel.getChildByName("btn_back")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Content",{get:function(){return this.Panel.getChildByName("Content").getComponent(cc.RichText)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"FailTip",{get:function(){return this.node.getChildByName("FailTip")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"FailTipLabel",{get:function(){return this.FailTip.getChildByName("Label").getComponent(cc.RichText)},enumerable:!0,configurable:!0}),t.prototype.onLoad=function(){var e=this;this.node.active=!1,this.node.scale=1,s.WildAdButtonClick.inst.addListener(function(){e.Show(f.Sun)},this),i.FlyCnicornClickSignal.inst.addListener(function(){e.Show(f.Cnicorn)},this),this.BackToGame.on(cc.Node.EventType.TOUCH_END,function(){setTimeout(function(){e.node.active=!1},0)},this)},t.prototype.onAdFinish=function(e){var t=this;setTimeout(function(){e==f[f.Sun]?(CELER_X&&s.HideWildAdButtonSignal.inst.dispatch(),m.inst.dispatch()):(CELER_X&&d.inst.dispatch(),h.inst.dispatch())},0),setTimeout(function(){t.node.active=!1},0)},t.prototype.onAdFailed=function(e){var t=this;this.FailTip.active=!0,this.Panel.active=!1,e==f[f.Cnicorn]&&p.inst.dispatch(),setTimeout(function(){t.node.active=!1},2e3)},t.prototype.Show=function(e){var t=this;1!=this.node.active&&(this.node.active=!0,this.FailTip.active=!1,this.Panel.active=!0,this.WatchAd.active=!0,this.FailTipLabel.string=lan.t(a.En_View.GuangGaoJieMian,a.En_ID.KanGuangGaoShiBai),e==f.Sun?this.Content.string=lan.t(a.En_View.GuangGaoJieMian,a.En_ID.MianFeiDaoJu,["3"]):this.Content.string=lan.t(a.En_View.GuangGaoJieMian,a.En_ID.SuiJiQingChuJiangLi,["2"]),this.WatchAd.targetOff(this),this.WatchAd.once(cc.Node.EventType.TOUCH_END,function(){setTimeout(function(){t.WatchAd.active=!1},0),o.AdController.inst.showAd(f[e],function(e){console.log(" watch ad success:",e),t.onAdFinish(e)},function(e){console.log(" watch ad fail:",e),t.onAdFailed(e)})},this))},__decorate([u(cc.SpriteAtlas)],t.prototype,"AdAtlas",void 0),t=__decorate([l],t)}(cc.Component);n.default=y,cc._RF.pop()},{"./Ad/FlyCnicornAd":"FlyCnicornAd","./Controller/AdController":"AdController","./Utils/Signal":"Signal","./WildAdButton":"WildAdButton","./table":"table"}],AudioController:[function(e,t,n){"use strict";cc._RF.push(t,"76488zQCU1KqLU6loyhNNZ5","AudioController"),Object.defineProperty(n,"__esModule",{value:!0});var i=e("../AdLayer"),o=e("../Utils/HashMap"),a=e("../Utils/ToSingleton"),r=e("./EventManager"),s=e("./EventName");window.oncanplay&&(window.oncanplay=function(){c.canPlay=!0});var c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.audioID={},t.clips=new o.HashMap,t}return __extends(t,e),t.prototype.init=function(e){console.log(" start load AudioClip ");var t=this;cc.loader.loadResDir("preLoadSounds",cc.AudioClip,function(n,i,o){if(n)console.error(n);else{for(var a=0,r=i;a<r.length;a++){var s=r[a];"string"==typeof s._audio&&cc.loader._cache&&cc.loader._cache[s._audio]&&cc.loader._cache[s._audio].buffer&&(s._audio=cc.loader._cache[s._audio].buffer),t.clips.add(s.name,s)}t.initEvent(),e&&e()}})},t.prototype.initEvent=function(){var e=this;r.gEventMgr.targetOff(this),cc.audioEngine.stopAll(),this.audioID.bgm=this.play("normal_bgm",!0,1.5,!0),console.log("this.audioID bgm = ",null===this.audioID.bgm),r.gEventMgr.on(s.GlobalEvent.PLAY_KILL_EFFECT,function(){e.audioID.fruit_break=e.play("fruit_break",!1,2.5),cc.audioEngine.setFinishCallback(e.audioID.fruit_break,function(){this.audioID.fruit_break=null}.bind(e))},this),r.gEventMgr.on(s.GlobalEvent.PLAY_30_BGM,function(){null!=e.audioID.bgm&&e.stop(e.audioID.bgm),e.audioID.time_counting=e.play("time_counting",!0,3),e.audioID.bgm=e.play("bgm_30secs",!0,1.5,!0),null==e.audioID.specialA_bgm&&null==e.audioID.specialB_bgm||cc.audioEngine.pause(e.audioID.bgm)},this),i.SetAllSunSignal.inst.addListener(function(){e.play("change_horce")},this),r.gEventMgr.on(s.GlobalEvent.PLAY_BIU,function(){e.audioID.biu=e.play("biu",!1,.5),cc.audioEngine.setFinishCallback(e.audioID.biu,function(){this.audioID.biu=null}.bind(e))},this),r.gEventMgr.on(s.GlobalEvent.PLAY_TOUCH,function(){e.audioID.touch=e.play("touch"),cc.audioEngine.setFinishCallback(e.audioID.touch,function(){this.audioID.touch=null}.bind(e))},this),r.gEventMgr.on(s.GlobalEvent.PLAY_PLACE,function(){e.audioID.lay=e.play("lay"),cc.audioEngine.setFinishCallback(e.audioID.lay,function(){this.audioID.lay=null}.bind(e))},this),r.gEventMgr.on(s.GlobalEvent.PLAY_SPECIAL_A_BGM,function(t){console.log(" SpecialA_bgm:",t),t?(null!=e.audioID.bgm&&cc.audioEngine.pause(e.audioID.bgm),e.audioID.SpecialA_bgm=e.play("SpecialA_bgm",!0)):(null!=e.audioID.bgm&&cc.audioEngine.resume(e.audioID.bgm),null!=e.audioID.SpecialA_bgm&&(cc.audioEngine.stop(e.audioID.SpecialA_bgm),e.audioID.SpecialA_bgm=null))},this),r.gEventMgr.on(s.GlobalEvent.PLAY_SPECIAL_B_BGM,function(t){console.log(" SpecialB_bgm:",t),t?(null!=e.audioID.bgm&&cc.audioEngine.pause(e.audioID.bgm),e.audioID.SpecialB_bgm=e.play("SpecialB_bgm",!0)):(null!=e.audioID.bgm&&cc.audioEngine.resume(e.audioID.bgm),null!=e.audioID.SpecialB_bgm&&(cc.audioEngine.stop(e.audioID.SpecialB_bgm),e.audioID.SpecialB_bgm=null))},this),r.gEventMgr.on(s.GlobalEvent.PLAY_OVER,function(){null!=e.audioID.time_counting&&e.stop(e.audioID.time_counting),e.audioID.over=e.play("over"),cc.audioEngine.setFinishCallback(e.audioID.over,function(){this.audioID.over=null}.bind(e))},this),r.gEventMgr.on(s.GlobalEvent.PLAY_OVER_NO_PLACE,function(){null!=e.audioID.bgm&&e.stop(e.audioID.bgm),e.audioID.over_no_place=e.play("over_no_place"),cc.audioEngine.setFinishCallback(e.audioID.over_no_place,function(){this.audioID.over_no_place=null}.bind(e))},this),r.gEventMgr.on(s.GlobalEvent.PLAY_LAY_FAIL,function(){e.audioID.lay_fail=e.play("lay_fail"),cc.audioEngine.setFinishCallback(e.audioID.lay_fail,function(){this.audioID.lay_fail=null}.bind(e))},this),r.gEventMgr.on(s.GlobalEvent.PLAY_OVER_TIME_UP,function(){null!=e.audioID.bgm&&e.stop(e.audioID.bgm),e.audioID.frezon=e.play("frezon"),cc.audioEngine.setFinishCallback(e.audioID.frezon,function(){this.audioID.frezon=null}.bind(e))},this),r.gEventMgr.on(s.GlobalEvent.PLAY_OVER_TAB,function(){e.audioID.over_biu=e.play("over_biu"),cc.audioEngine.setFinishCallback(e.audioID.over_biu,function(){this.audioID.over_biu=null}.bind(e))},this),r.gEventMgr.on(s.GlobalEvent.PLAY_SCORE,function(t){t?e.audioID.score=e.play("score",!0,1):null!=e.audioID.score&&(e.stop(e.audioID.score),e.audioID.score=null)},this),r.gEventMgr.on(s.GlobalEvent.PLAY_SPECIAL_A,function(){console.log(" specialA -----------------------------",e.audioID.specialA),e.audioID.specialA=e.play("specialA",!1,1.5),cc.audioEngine.setFinishCallback(e.audioID.specialA,function(){this.audioID.specialA=null}.bind(e))},this),r.gEventMgr.on(s.GlobalEvent.PLAY_SPECIAL_B,function(){console.log(" specialB -----------------------------",e.audioID.specialB),e.audioID.specialB=e.play("specialB",!1,1.5),cc.audioEngine.setFinishCallback(e.audioID.specialB,function(){this.audioID.specialB=null}.bind(e))},this)},t.prototype.stop=function(e,n){if(t.canPlay)cc.audioEngine.stop(e);else for(var i=0,o=t.PlayedList;i<o.length;i++){var a=o[i];a.skip=a.clipName==n}},t.prototype.play=function(e,n,i,o,a){var r=this;if(void 0===n&&(n=!1),void 0===i&&(i=1),void 0===o&&(o=!1),void 0===a&&(a=0),!t.canPlay&&!t.hasBindTouch){t.hasBindTouch=!0;var s=this,c=function(){var e;for(cc.game.canvas.removeEventListener("touchstart",c),t.canPlay=!0,cc.audioEngine.stopAll();(e=t.PlayedList.pop())&&s.clips.get(e.clipName)&&!e.skip;){var n=cc.audioEngine.play(s.clips.get(e.clipName),e.loop,e.volume);e.isBgm?(s.audioID.bgm=n,cc.audioEngine.setCurrentTime(n,(Date.now()-e.supTime)/1e3%cc.audioEngine.getDuration(n))):cc.audioEngine.setCurrentTime(n,(Date.now()-e.supTime)/1e3)}};cc.game.canvas.addEventListener("touchstart",c)}if(!this.clips.get(e)){var l=Date.now();return cc.loader.loadRes("sounds/"+e,cc.AudioClip,function(t,a){if(t)console.error(t);else{"string"==typeof a._audio&&cc.loader._cache&&cc.loader._cache[a._audio]&&cc.loader._cache[a._audio].buffer&&(a._audio=cc.loader._cache[a._audio].buffer),r.clips.add(a.name,a);var s=(Date.now()-l)/1e3;r.audioID[e]=r.play(e,n,i,o,s)}}),-1}if(t.canPlay){var u=cc.audioEngine.play(this.clips.get(e),n,i);return cc.audioEngine.setCurrentTime(u,a%cc.audioEngine.getDuration(u)),u}return t.PlayedList.push({clipName:e,loop:n,volume:i,supTime:Date.now()-a/1e3,skip:!1,isBgm:o}),-2},t.PlayedList=[],t.canPlay=!1,t.hasBindTouch=!1,t}(a.SingleTon());n.gAudio=c.inst,cc._RF.pop()},{"../AdLayer":"AdLayer","../Utils/HashMap":"HashMap","../Utils/ToSingleton":"ToSingleton","./EventManager":"EventManager","./EventName":"EventName"}],BaseMediator:[function(e,t,n){"use strict";cc._RF.push(t,"0834bDedOhOG7ZA6LTTR4FC","BaseMediator"),Object.defineProperty(n,"__esModule",{value:!0});var i=cc._decorator,o=i.ccclass,a=(i.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.bind=function(e){this.view=e},Object.defineProperty(t.prototype,"View",{get:function(){return console.assert(null!=this.view," view is null"),this.view},enumerable:!0,configurable:!0}),t.prototype.onRegister=function(){console.error(" should override onRegister ")},t.prototype.onUnregister=function(){console.error(" should override onUnregister ")},t=__decorate([o],t)}(cc.Component));n.default=a,cc._RF.pop()},{}],BaseView:[function(e,t,n){"use strict";cc._RF.push(t,"b0542nEuINB1betdmCh+PtU","BaseView"),Object.defineProperty(n,"__esModule",{value:!0});var i=cc._decorator,o=i.ccclass,a=(i.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onLoad=function(){this.node.scale=0},t.prototype.Show=function(e){this.node.active=!0,this.node.runAction(cc.sequence(cc.callFunc(function(){}),cc.scaleTo(.1,1),cc.callFunc(function(){e&&e()})))},t.prototype.Hide=function(e){var t=this;this.node.runAction(cc.sequence(cc.scaleTo(.1,0),cc.callFunc(function(){t.node.active=!1,e&&e()})))},t.prototype.OnClick=function(){},t.prototype.BindMedaitor=function(e){if(!this.node.getComponent(e)){var t=this.node.addComponent(e);return t.bind&&t.bind(this),t.onRegister&&t.onRegister(),t}console.warn(" this node already has the same component..")},t.prototype.UnbindMedaitor=function(e){var t=this.node.getComponent(e);if(t)return t.onUnregister&&t.onUnregister(),t.bind&&t.bind(null),this.node.removeComponent(e),t;console.warn(" component already removed..")},t=__decorate([o],t)}(cc.Component));n.default=a,cc._RF.pop()},{}],CelerSDK:[function(e,t,n){"use strict";cc._RF.push(t,"34a72Ol/DRKJb0NyonTxi8g","CelerSDK"),Object.defineProperty(n,"__esModule",{value:!0});var i=e("../ToSingleton"),o=e("../LogHandler"),a=e("../Random"),r=e("../../Game/GameMgr"),s=e("../../WildAdButton"),c=e("../../AdLayer"),l=e("../../TableManager"),u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.alreadySubmit=!1,t.isNewPlayer=!0,t.celerStartCallback=null,t}return __extends(t,e),Object.defineProperty(t.prototype,"MatchID",{get:function(){return this.match.matchId},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"MatchRandomSeed",{get:function(){return this.match.sharedRandomSeed},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"DifficultyLevel",{get:function(){return this.match.difficultyLevel},enumerable:!0,configurable:!0}),t.prototype.init=function(e){this.alreadySubmit=!1,CELER_X&&celerSDK.onStart(this.onCelerStart.bind(this)),CELER_X&&celerSDK.provideScore(function(){return r.Game.getScore()}),this.celerStartCallback=e,o.LogHandler.inst.ready(),CELER_X?o.LogHandler.inst.initLog(celerSDK.log):console.log("v 1.4")},t.prototype.celerXReady=function(){console.log(" invoke celerx.ready() "),CELER_X?celerSDK.ready():this.onCelerStart()},t.prototype.isNew=function(){return this.isNewPlayer},t.prototype.isOnCelerPlatform=function(){return CELER_X},t.prototype.onCelerStart=function(){console.log(" celerx onStart call"),this.match=CELER_X?celerSDK.getMatch():{matchId:"error : can not get id",shouldLaunchTutorial:!0,sharedRandomSeed:Math.random(),difficultyLevel:0,locale:"en_US"},console.log("match id:",this.match),a.Random.setRandomSeed(this.match.sharedRandomSeed),r.Game.MatchInfo=this.match,this.defineLan(),this.match&&this.match.shouldLaunchTutorial?(this.isNewPlayer=!0,s.HideWildAdButtonSignal.inst.dispatch(),c.RemoveFlyCnicornSignal.inst.dispatch()):this.isNewPlayer=!1,CELER_X&&1!=celerSDK.hasMethod("showAd")&&(s.HideWildAdButtonSignal.inst.dispatch(),c.RemoveFlyCnicornSignal.inst.dispatch()),this.celerStartCallback&&(this.celerStartCallback(),this.celerStartCallback=null)},t.prototype.defineLan=function(){r.Game.MatchInfo.locale=r.Game.MatchInfo.locale||"en_US",lan.set(r.Game.MatchInfo.locale);var e={},t=null;t=l.TableManager.inst.getAll_En_Data();var n=this.match.locale.split("_")[0].charAt(0).toUpperCase()+this.match.locale.split("_")[0].substring(1);if(l.TableManager.inst["getAll_"+n+"_Data"]&&l.TableManager.inst["getAll_"+n+"_Data"]()&&(t=l.TableManager.inst["getAll_"+n+"_Data"]()),t){for(var i in t){var o=t[i];e[o.View]||(e[o.View]={}),e[o.View][o.ID]=o.Text}lan.define(r.Game.MatchInfo.locale,e)}},t.prototype.submitScore=function(e){this.alreadySubmit||(this.alreadySubmit=!0,console.log(" submit score:",e,", match id:",this.match),CELER_X&&celerSDK.submitScore(e))},Object.defineProperty(t.prototype,"isAndroidWeb",{get:function(){return cc.sys.isMobile&&cc.sys.isBrowser&&cc.sys.os==cc.sys.OS_ANDROID},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isIOSWeb",{get:function(){return cc.sys.isMobile&&cc.sys.isBrowser&&cc.sys.os==cc.sys.OS_IOS},enumerable:!0,configurable:!0}),t}(i.SingleTon());n.CelerSDK=u,cc._RF.pop()},{"../../AdLayer":"AdLayer","../../Game/GameMgr":"GameMgr","../../TableManager":"TableManager","../../WildAdButton":"WildAdButton","../LogHandler":"LogHandler","../Random":"Random","../ToSingleton":"ToSingleton"}],Cocos:[function(e,t,n){"use strict";cc._RF.push(t,"d9795RGCWVCp5Zf4JNywPPb","Cocos"),Object.defineProperty(n,"__esModule",{value:!0});var i=e("./Random");function o(e){return e&&e.getParent&&e.getParent()?e.getParent().convertToWorldSpaceAR(e.position):cc.v2(0,0)}n.GetWorldPosition=o,n.ConvertToNodeSpaceAR=function(e,t){if(!t)return cc.v2(0,0);var n=o(e);return t.convertToNodeSpaceAR(n)},n.Distance=function(e,t){return Math.sqrt((e.x-t.x)*(e.x-t.x)+(e.y-t.y)*(e.y-t.y))},n.AreaOf2CrossRect=function(e,t){var n=e.x,i=e.y,o=e.x+e.width,a=e.y+e.height,r=t.x,s=t.y,c=t.x+t.width,l=t.y+t.height;return Math.max(0,Math.min(o,c)-Math.max(n,r))*Math.max(0,Math.min(a,l)-Math.max(i,s))},n.disOrderArray=function(e){for(var t,n=0;n<e.length;++n){var o=i.Random.randomFloorToInt(0,e.length);t=[e[o],e[n]],e[n]=t[0],e[o]=t[1]}},n.Clamp=function(e,t,n){return Math.max(Math.min(e,t),n)},cc._RF.pop()},{"./Random":"Random"}],Config:[function(e,t,n){"use strict";cc._RF.push(t,"7419cx/DDRG86x2LiwgMtL9","Config"),Object.defineProperty(n,"__esModule",{value:!0}),n.Config={FPS:60,WinSize:cc.size(1080,1920),Grid:cc.v2(8,8),GameTime:60,Space:4},cc._RF.pop()},{}],CubeBg:[function(e,t,n){"use strict";cc._RF.push(t,"c1d5137ZNhJsZAlX67esxnT","CubeBg"),Object.defineProperty(n,"__esModule",{value:!0});var i,o=e("../Controller/EventManager"),a=e("../Controller/EventName"),r=e("./GameMgr"),s=e("../Config/Config"),c=e("../table"),l=e("./GameScene"),u=e("../TableManager"),h=cc._decorator,d=h.ccclass,p=h.property;(function(e){e[e.Shake=0]="Shake",e[e.Idle=1]="Idle"})(i||(i={}));var g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.cube=null,t.yingtao=null,t.pingguo=null,t.fanqie=null,t.mihoutao=null,t.boluo=null,t.chengzi=null,t.icon_daoju_B=null,t.icon_daoju_A=null,t.index=0,t.OldFruitID=2e4,t.available=!1,t.preRowFlag=!1,t.preColFlag=!1,t.isPlaying=!1,t.isDirectlyKill=!1,t.isPlaySpecial=!1,t}return __extends(t,e),t.prototype.onLoad=function(){this.initEvent()},t.prototype.update=function(e){},t.prototype.reuse=function(){this.OldFruitID=2e4,this.fruitData=u.TableManager.inst.getFruits(this.OldFruitID),this.isPlaying=!1,this.index=parseInt(this.node.name),this.setCubeActive(!1),this.cube.node.opacity=255,this.node.scale=0,this.node.runAction(cc.sequence(cc.delayTime(this.index/60),cc.scaleTo(0,.9),cc.scaleTo(.1,1.1),cc.scaleTo(.2,1),cc.callFunc(this.ready.bind(this),this))),this.initEvent()},t.prototype.ready=function(){o.gEventMgr.emit(a.GlobalEvent.PLAY_BIU),r.Game.getCubeIndex()[this.index]>0?(this.available=!0,this.setAvailable(!1,!0)):(this.available=!1,this.setAvailable(!0))},t.prototype.unuse=function(){this.available=!1,o.gEventMgr.targetOff(this)},t.prototype.initEvent=function(){var e=this;o.gEventMgr.targetOff(this),o.gEventMgr.on(a.GlobalEvent.PREPARE_CUBE_BG,this.reuse,this),o.gEventMgr.on(a.GlobalEvent.CUBE_BOX_DRAG_CANCEL,this.onDragCancel,this),o.gEventMgr.on(a.GlobalEvent.CUBE_BOX_DRAG_INDEX,this.onDragIndex,this),o.gEventMgr.on(a.GlobalEvent.CUBE_BOX_PLACE_DONE,this.placeDone,this),o.gEventMgr.on(a.GlobalEvent.EAT_COL,this.eatCol,this),o.gEventMgr.on(a.GlobalEvent.EAT_ROW,this.eatRow,this),o.gEventMgr.on(a.GlobalEvent.KILL_DIRECTLY,this.killDirectly,this),o.gEventMgr.on(a.GlobalEvent.GAME_OVER,this.onGameOver,this),o.gEventMgr.on(a.GlobalEvent.CLEAR_CUBE_ROOT,this.clear,this),this.cube.getComponent(cc.Animation).on(cc.Animation.EventType.FINISHED,this.onKillFinished,this),this.cube.getComponent(cc.Animation).on(cc.Animation.EventType.STOP,function(){e.cube.node.scale=1},this),this.cube.getComponent(cc.Animation).on(cc.Animation.EventType.PLAY,function(){e.cube.node.stopAllActions(),e.cube.node.scale=e.fruitData?e.fruitData.Scale:2},this),this.cube.getComponent(cc.Animation).on(cc.Animation.EventType.RESUME,function(){e.cube.node.scale=e.fruitData?e.fruitData.Scale:2},this),this.cube.getComponent(cc.Animation).on(cc.Animation.EventType.PAUSE,function(){e.cube.node.scale=1},this)},t.prototype.clear=function(){this.setCubeActive(!1),this.node.scale=0},t.prototype.onGameOver=function(e){var t=this,n=e==r.OverType.NO_PLACE?this.fruitData.FailedIcon:this.fruitData.FrozenIcon;e==r.OverType.NO_PLACE?setTimeout(function(){t.cube.node.stopAllActions(),t.cube.node.scale=1,t.cube.spriteFrame=l.default.UIAtlas.getSpriteFrame(n),r.Game.addOverCount()},this.index/60*1e3):this.onFrozon(this.index/60*1e3)},t.prototype.onFrozon=function(e){void 0===e&&(e=0);var t=this.fruitData.KillAni,n=this.fruitData?this.fruitData.Speed:1,i=this.fruitData?this.fruitData.Scale:2;setTimeout(function(){this.cube.node.stopAllActions(),this.cube.node.scale=i,this.cube.getComponent(cc.Animation).play(t,0).speed=n,r.Game.addOverCount()}.bind(this),e)},t.prototype.eatCol=function(e){if(!this.isAvailable())for(var t=0,n=e;t<n.length;t++){var i=n[t];if(this.index%s.Config.Grid.x==i){this.onKill(Math.floor(this.index/8)*this.fruitData.Delay);break}}},t.prototype.killDirectly=function(){this.isAvailable()||this.isDirectlyKill&&(this.isDirectlyKill=!1,this.onKill(this.index%8*this.fruitData.Delay))},t.prototype.eatRow=function(e){if(!this.isAvailable())for(var t=0,n=e;t<n.length;t++){var i=n[t];if(this.index>=i*s.Config.Grid.x&&this.index<(i+1)*s.Config.Grid.x){this.onKill(this.index%8*this.fruitData.Delay);break}}},t.prototype.onKill=function(e){void 0===e&&(e=0),this.isPlaying=!0,r.Game.addScore(this.fruitData.Score),r.Game.addFruitKill(this.fruitData.ID),r.Game.addFruitScore(this.fruitData.ID,this.fruitData.Score);var t=this.fruitData.KillAni;o.gEventMgr.emit(a.GlobalEvent.ON_KILL),this.fruitData.Type==c.Fruits_Type.DaoJu&&console.log(" this.fruitData :",this.fruitData.Name,r.Game.isEmitRainbowEvent),this.fruitData.Type!=c.Fruits_Type.DaoJu||r.Game.isEmitRainbowEvent||(r.Game.isEmitRainbowEvent=!0,o.gEventMgr.emit(a.GlobalEvent.PLAY_RAINBOW_EFFECT,20006==this.fruitData.ID?"rainbow":"hourse")),this.isPlaySpecial&&(this.isPlaySpecial=!1,console.log(" isPlaySpecial :"+this.fruitData.ID),20007==this.fruitData.ID?o.gEventMgr.emit(a.GlobalEvent.PLAY_SPECIAL_A):o.gEventMgr.emit(a.GlobalEvent.PLAY_SPECIAL_B));var n=this.fruitData?this.fruitData.Speed:1,i=this.fruitData?this.fruitData.Scale:2;setTimeout(function(){this.isPlaying&&(this.cube.node.stopAllActions(),this.cube.node.scale=i,this.cube.getComponent(cc.Animation).play(t,0).speed=n)}.bind(this),e),this.setAvailable(!0)},t.prototype.onKillFinished=function(){this.cube.node.scale=1,"default"!=this.cube.node.group&&(this.cube.node.group="default"),this.isPlaying=!1,this.isAvailable()&&(this.cube.node.active&&this.cube.node.opacity<255||(this.setCubeActive(!1),this.cube.node.opacity=255))},t.prototype.preCol=function(e){for(var t=0,n=e;t<n.length;t++){var i=n[t];if(this.index%s.Config.Grid.x==i){this.preColFlag=!0;break}this.preColFlag=!1}},t.prototype.preRow=function(e){for(var t=0,n=e;t<n.length;t++){var i=n[t];if(this.index>=i*s.Config.Grid.x&&this.index<(i+1)*s.Config.Grid.x){this.preRowFlag=!0;break}this.preRowFlag=!1}},t.prototype.setCubeActive=function(e){this.cube.node.active=e,this.cube.node.active||(this.cube.node.stopAllActions(),this.cube.node.scale=1)},t.prototype.onDragIndex=function(e,t,n,i){if(r.Game.isStart){if(r.Game.killDirectlyCount=0,n&&n.length>0?(this.isDirectlyKill=n.indexOf(this.index)>=0,r.Game.killDirectlyCount++):(this.isDirectlyKill=!1,r.Game.killDirectlyCount--),i&&i.length>0?this.isPlaySpecial=i.indexOf(this.index)>=0:this.isPlaySpecial=!1,this.available){var o=e.indexOf(this.index)>=0;this.setCubeActive(o||this.isPlaying),o&&(this.cube.node.opacity=150),this.cube.node.active&&this.cube.node.opacity<255?(r.Game.setPreCubeIndex(this.index,this.fruitData.Score),this.isPlaying&&(this.cube.getComponent(cc.Animation).stop(),this.isPlaying=!1),this.OldFruitID=r.Game.curSelectFruitID,this.updateFruitData(r.Game.curSelectFruitID)):r.Game.resetPreCubeIndex(this.index)}else e.indexOf(this.index)>=0&&r.Game.dragCount--,r.Game.setPreCubeIndex(this.index,this.fruitData.Score);this.preCheck()}},t.prototype.updateFruitData=function(e){this.fruitData=null,this.fruitData=u.TableManager.inst.getFruits(e),this.isPlaying||(this.cube.spriteFrame=this[this.fruitData.Icon],this.cube.node.group="default")},t.prototype.preCheck=function(){var e=r.Game.checkRowCol(r.Game.getPreCubeIndex()),t=e[0],n=e[1];this.preRowFlag=!1,this.preColFlag=!1,n.length>0?this.preCol(n):this.preColFlag=!1,t.length>0?this.preRow(t):this.preRowFlag=!1;var i=u.TableManager.inst.getFruits(r.Game.curSelectFruitID);i&&this.cube.node.active&&this.cube.node.opacity<255&&r.Game.addPreScore(i.BaseScore),(this.preRowFlag||this.preColFlag||this.isDirectlyKill)&&r.Game.addPreScore(i.Score),20006!=r.Game.curSelectFruitID&&20007!=r.Game.curSelectFruitID||(r.Game.isEmitRainbowEvent=!1,o.gEventMgr.emit(a.GlobalEvent.UPDATE_RAINBOW_SCORE,r.Game.getPreScore().toString())),this.preRowFlag||this.preColFlag||this.isDirectlyKill?this.shake(!0):this.shake(!1)},t.prototype.shake=function(e){if(e){this.updateFruitData(r.Game.curSelectFruitID);var t=this.cube.node.getActionByTag(i.Shake);if(t&&!t.isDone())return;var n=cc.repeatForever(cc.sequence(cc.rotateTo(.03,-4),cc.rotateTo(.03,0),cc.rotateBy(.03,4),cc.rotateTo(.03,0)));this.cube.node.stopActionByTag(i.Idle),this.cube.node.scale=1,n.setTag(i.Shake),this.cube.node.runAction(n)}else this.cube.node.stopActionByTag(i.Shake),this.updateFruitData(this.OldFruitID),this.cube.node.rotation=0},t.prototype.getIndex=function(){return this.index},t.prototype.isAvailable=function(){return this.available},t.prototype.setAvailable=function(e,t){void 0===t&&(t=!1),this.available!=e&&(this.available=e,this.available?(r.Game.resetCubeIndex(this.index),r.Game.resetPreCubeIndex(this.index),r.Game.addAvailableCount(1),this.setCubeActive(this.isPlaying)):(r.Game.setCubeIndex(this.index,this.fruitData.Score),r.Game.setPreCubeIndex(this.index,this.fruitData.Score),t||r.Game.addAvailableCount(-1),this.cube.node.opacity=255,this.setCubeActive(!0),this.cube.getComponent(cc.Animation).stop(),this.isPlaying=!1,this.updateFruitData(r.Game.curSelectFruitID)),this.shake(!1))},t.prototype.placeDone=function(){if(r.Game.canPlace=!1,r.Game.resetPreScore(),this.available){if(this.cube.node.active&&this.cube.node.opacity<255){this.setAvailable(!1);var e=cc.sequence(cc.scaleTo(.1,1.2,.8),cc.scaleTo(.1,.8,1.2),cc.scaleTo(.1,1.1,.9),cc.scaleTo(.1,1,1));e.setTag(i.Idle),this.cube.node.runAction(e),r.Game.curPlaceCount++,r.Game.addScore(this.fruitData.BaseScore),r.Game.addFruitScore(this.fruitData.ID,this.fruitData.BaseScore)}else this.setAvailable(!0);console.log(r.Game.curPlaceCount,r.Game.dragCount),r.Game.curPlaceCount>=r.Game.dragCount&&r.Game.curPlaceCount>0&&(r.Game.curPlaceCount=0,r.Game.dragCount=0,o.gEventMgr.emit(a.GlobalEvent.PLAY_PLACE),o.gEventMgr.emit(a.GlobalEvent.CUBE_BOX_SET_STATE_DONE))}},t.prototype.onDragCancel=function(){r.Game.resetPreScore(),this.available?(this.isPlaying||(this.setCubeActive(!1),this.cube.node.opacity=255),r.Game.dragCount=0):this.shake(!1)},t.prototype.start=function(){},__decorate([p(cc.Sprite)],t.prototype,"cube",void 0),__decorate([p({type:cc.SpriteFrame,displayName:"\u6a31\u6843"})],t.prototype,"yingtao",void 0),__decorate([p({type:cc.SpriteFrame,displayName:"\u82f9\u679c"})],t.prototype,"pingguo",void 0),__decorate([p({type:cc.SpriteFrame,displayName:"\u756a\u8304"})],t.prototype,"fanqie",void 0),__decorate([p({type:cc.SpriteFrame,displayName:"\u7315\u7334\u6843"})],t.prototype,"mihoutao",void 0),__decorate([p({type:cc.SpriteFrame,displayName:"\u83e0\u841d"})],t.prototype,"boluo",void 0),__decorate([p({type:cc.SpriteFrame,displayName:"\u6a59\u5b50"})],t.prototype,"chengzi",void 0),__decorate([p({type:cc.SpriteFrame,displayName:"\u4e5d\u5bab\u683c"})],t.prototype,"icon_daoju_B",void 0),__decorate([p({type:cc.SpriteFrame,displayName:"\u6a2a\u7ad6"})],t.prototype,"icon_daoju_A",void 0),t=__decorate([d],t)}(cc.Component);n.default=g,cc._RF.pop()},{"../Config/Config":"Config","../Controller/EventManager":"EventManager","../Controller/EventName":"EventName","../TableManager":"TableManager","../table":"table","./GameMgr":"GameMgr","./GameScene":"GameScene"}],CubeRoot:[function(e,t,n){"use strict";cc._RF.push(t,"b6abe/Y9ElKYballHwIR463","CubeRoot"),Object.defineProperty(n,"__esModule",{value:!0});var i=e("../Controller/GameFactory"),o=e("../Controller/EventManager"),a=e("../Controller/EventName"),r=e("../Config/Config"),s=e("./GameMgr"),c=e("../Utils/Random"),l=e("../TableManager"),u=cc._decorator,h=u.ccclass,d=u.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.maxSize=cc.size(450,450),t.moveDetalTime=.1,t.layDetalTime=.02,t.dragSense=cc.v2(2.9,2.6),t.popOffset=cc.v2(100,50),t.popBaseY=500,t.scale=1,t.posRestored=cc.v2(0,0),t.isReady=!1,t.shapeData=null,t.fruitID=0,t.maxHorIndex=0,t.maxRow=0,t.endIndex=0,t.DragNode=null,t.PlaceNode=null,t}return __extends(t,e),t.prototype.reuse=function(){this.node.opacity=255,this.shapeData=arguments[0][0],this.node.width=0,this.node.height=0,this.node.zIndex=0,this.PlaceNode.width=0,this.PlaceNode.height=0,this.node.active=!1,this.shapeData.shape.sort(function(e,t){return e-t});for(var e=r.Config.Grid.x,t=Math.floor(this.shapeData.shape[0]/e),n=0;n<this.shapeData.shape.length;n++)this.shapeData.shape[n]=this.shapeData.shape[n]%e+Math.max(Math.floor(this.shapeData.shape[n]/e-t),0)*e,this.maxHorIndex=Math.max(this.maxHorIndex,this.shapeData.shape[n]%r.Config.Grid.x);var o=this.shapeData.shape[this.shapeData.shape.length-1];this.maxRow=Math.max(1,Math.ceil(o/r.Config.Grid.x)),this.endIndex=(o-(this.maxRow-1)*r.Config.Grid.x)%r.Config.Grid.x,this.endIndex=this.maxHorIndex-this.endIndex,this.setFruit(),this.PlaceNode.removeAllChildren();for(var a=0,s=this.shapeData.shape;a<s.length;a++){var c=s[a];this.PlaceNode.addChild(i.gFactory.getCube(c,this.fruitID))}this.initEvent(),this.scheduleOnce(this.adjustPos.bind(this),0)},t.prototype.setFruit=function(){this.shapeStaticData=l.TableManager.inst.getShape(this.shapeData.shapeID);for(var e=0,t=[],n=0,i=this.shapeStaticData.Fruit;n<i.length;n++){var o=i[n],a=parseInt(o.split("|")[0]),r=parseInt(o.split("|")[1]);e+=a,t.push({id:r,weight:e})}for(var s=c.Random.getRandom()*e,u=0,h=t;u<h.length;u++){if((o=h[u]).weight>=s){this.fruitID=o.id;break}}},t.prototype.unuse=function(){this.node.opacity=0,this.node.scale=1,o.gEventMgr.targetOff(this),this.node.targetOff(this),this.posRestored=cc.v2(0,0),this.node.x=0,this.node.y=0,this.scale=1,this.isReady=!1,this.maxHorIndex=0},t.prototype.initEvent=function(){o.gEventMgr.targetOff(this),o.gEventMgr.on(a.GlobalEvent.DRAG_ADJUST_DONE,this.restorePos,this),o.gEventMgr.on(a.GlobalEvent.GAME_OVER,this.gameOver,this),o.gEventMgr.on(a.GlobalEvent.CLEAR_CUBE_ROOT,this.clear,this)},t.prototype.clear=function(){if(!s.Game.isStart){for(this.node.opacity=0;this.PlaceNode.children.length>0;)i.gFactory.putCube(this.PlaceNode.children[0]);i.gFactory.putCubeRoot(this.node)}},t.prototype.gameOver=function(){s.Game.canPlace=!1,this.back()},t.prototype.restorePos=function(){this.posRestored.addSelf(this.node.position)},t.prototype.adjustPos=function(){for(var e=0,t=this.PlaceNode.children;e<t.length;e++){var n=t[e];this.PlaceNode.width=Math.max(this.PlaceNode.width,n.x),this.PlaceNode.height=Math.max(this.PlaceNode.height,Math.abs(n.y))}this.PlaceNode.width+=this.PlaceNode.children[0].width,this.PlaceNode.height+=this.PlaceNode.children[0].height,this.node.width=this.PlaceNode.width,this.node.height=this.PlaceNode.height,this.scale=Math.min(1,this.maxSize.width/this.node.width,this.maxSize.height/this.node.height),this.node.scale=this.scale,this.DragNode.scale=1/this.scale;for(var i=0,r=this.PlaceNode.children;i<r.length;i++){(n=r[i]).x-=this.PlaceNode.width/2-n.width/2,n.y+=this.PlaceNode.height/2-n.height/2}this.node.y=0,this.boxSize=cc.size(this.node.width,this.node.height),this.cellSize=cc.size(this.PlaceNode.children[0].width,this.PlaceNode.children[0].height),this.node.active=!0,this.DragNode.targetOff(this),this.DragNode.on(cc.Node.EventType.TOUCH_MOVE,this.onDrag,this),this.DragNode.on(cc.Node.EventType.TOUCH_START,this.onTouchStart,this),this.DragNode.on(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this),this.DragNode.on(cc.Node.EventType.TOUCH_CANCEL,this.onTouchEnd,this),o.gEventMgr.emit(a.GlobalEvent.Cube_ADJUST_DONE)},t.prototype.onTouchStart=function(e){if(!this.isReady&&s.Game.canDrag&&s.Game.isStart&&!s.Game.isSelected){s.Game.isSelected=!0,o.gEventMgr.emit(a.GlobalEvent.PLAY_TOUCH),10033==this.shapeData.shapeID?o.gEventMgr.emit(a.GlobalEvent.PLAY_SPECIAL_B_BGM,!0):10032==this.shapeData.shapeID&&o.gEventMgr.emit(a.GlobalEvent.PLAY_SPECIAL_A_BGM,!0),s.Game.resetPreScore();var t=this.DragNode.convertToNodeSpaceAR(e.getLocation()),n=cc.v2(t.x/this.DragNode.width*2,t.y/this.DragNode.height*2),i=cc.v2(this.node.x+this.popOffset.x*n.x,this.node.y+this.popBaseY+n.y*this.popOffset.y),r=1/this.node.parent.scale,c=cc.sequence(cc.spawn(cc.moveTo(this.moveDetalTime,i),cc.scaleTo(this.moveDetalTime,r)),cc.callFunc(this.ready.bind(this),this));this.node.stopAllActions(),this.node.zIndex=3,this.node.runAction(c),s.Game.curSelectFruitID=this.fruitID}},t.prototype.ready=function(){this.isReady=!0},t.prototype.reset=function(){this.isReady=!1,this.node.zIndex=1,s.Game.canDrag=!0,s.Game.isSelected=!1},t.prototype.onTouchEnd=function(){if(s.Game.isStart)if(console.log(" end :",s.Game.canPlace),this.isReady)if(s.Game.isSelected=!1,s.Game.canPlace){10033==this.shapeData.shapeID?o.gEventMgr.emit(a.GlobalEvent.PLAY_SPECIAL_B_BGM,!1):10032==this.shapeData.shapeID&&o.gEventMgr.emit(a.GlobalEvent.PLAY_SPECIAL_A_BGM,!1),this.node.stopAllActions();var e=this.node.parent.convertToNodeSpaceAR(s.Game.placePos);this.node.runAction(cc.sequence(cc.moveTo(this.layDetalTime,e),cc.callFunc(this.placeDoneRoot.bind(this),this)))}else this.back(),o.gEventMgr.emit(a.GlobalEvent.PLAY_LAY_FAIL);else s.Game.canPlace||(this.back(),o.gEventMgr.emit(a.GlobalEvent.PLAY_LAY_FAIL))},t.prototype.back=function(){10033==this.shapeData.shapeID?o.gEventMgr.emit(a.GlobalEvent.PLAY_SPECIAL_B_BGM,!1):10032==this.shapeData.shapeID&&o.gEventMgr.emit(a.GlobalEvent.PLAY_SPECIAL_A_BGM,!1);var e=cc.sequence(cc.spawn(cc.moveTo(this.moveDetalTime,this.posRestored),cc.scaleTo(this.moveDetalTime,this.scale)),cc.callFunc(this.reset.bind(this),this));this.node.stopAllActions(),this.node.runAction(e),o.gEventMgr.emit(a.GlobalEvent.CUBE_BOX_DRAG_CANCEL)},t.prototype.placeDoneRoot=function(){for(s.Game.canDrag=!0,this.node.opacity=0;this.PlaceNode.children.length>0;)i.gFactory.putCube(this.PlaceNode.children[0]);i.gFactory.putCubeRoot(this.node),o.gEventMgr.emit(a.GlobalEvent.CUBE_BOX_PLACE_DONE)},t.prototype.removeSelf=function(){for(;this.PlaceNode.children.length>0;)i.gFactory.putCube(this.PlaceNode.children[0]);i.gFactory.putCubeRoot(this.node)},t.prototype.onDrag=function(e){if(s.Game.canDrag&&s.Game.isStart&&this.isReady){s.Game.resetPreScore(),this.node.x+=e.getDeltaX()*this.dragSense.x,this.node.y+=e.getDeltaY()*this.dragSense.y;var t=s.Game.gamePanel.convertToNodeSpaceAR(this.node.parent.convertToWorldSpaceAR(this.node.position));o.gEventMgr.emit(a.GlobalEvent.CUBE_BOX_DRAGING,t,[this.boxSize,this.cellSize],this.shapeData.shape,[this.endIndex,this.maxRow,this.maxHorIndex],this.shapeStaticData.ID)}},t.prototype.getInfo=function(){return[this.endIndex,this.maxRow,this.maxHorIndex]},t.prototype.getShape=function(){return this.shapeData.shape},t.prototype.getBoxSize=function(){return this.boxSize},t.prototype.getCellSize=function(){return this.cellSize},t.prototype.getShapeID=function(){return this.shapeStaticData.ID},t.prototype.onLoad=function(){},t.prototype.start=function(){},__decorate([d(cc.Node)],t.prototype,"DragNode",void 0),__decorate([d(cc.Node)],t.prototype,"PlaceNode",void 0),t=__decorate([h],t)}(cc.Component);n.default=p,cc._RF.pop()},{"../Config/Config":"Config","../Controller/EventManager":"EventManager","../Controller/EventName":"EventName","../Controller/GameFactory":"GameFactory","../TableManager":"TableManager","../Utils/Random":"Random","./GameMgr":"GameMgr"}],Cube:[function(e,t,n){"use strict";cc._RF.push(t,"2cc1c9ARLVAs4tu9Y4hLOzZ","Cube"),Object.defineProperty(n,"__esModule",{value:!0});var i=e("../Animation/TurnSunAnimation"),o=e("../Config/Config"),a=e("../TableManager"),r=e("../Utils/Signal"),s=e("./GameScene"),c=cc._decorator,l=c.ccclass,u=(c.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(r.BaseSignal));n.PlayTurnSunAnimationSignal=u;var h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.posIndex=0,t.fruitID=0,t}return __extends(t,e),Object.defineProperty(t.prototype,"Animation",{get:function(){return this.node.getChildByName("Animation")},enumerable:!0,configurable:!0}),t.prototype.reuse=function(){this.posIndex=arguments[0][0],this.fruitID=arguments[0][1],this.node.active=!1;var e=a.TableManager.inst.getFruits(this.fruitID).Icon;this.getComponent(cc.Sprite).spriteFrame=s.default.UIAtlas.getSpriteFrame(e),this.node.active=!0;var t=cc.v2(this.posIndex%o.Config.Grid.x*(this.node.width+o.Config.Space),-Math.floor(this.posIndex/o.Config.Grid.y)*(this.node.height+o.Config.Space));this.node.setPosition(t),this.Animation.active=!1},t.prototype.getIndex=function(){return this.posIndex},t.prototype.unuse=function(){this.posIndex=0,this.node.x=0,this.node.y=0,this.node.scale=1},t.prototype.onLoad=function(){var e=this;u.inst.addListener(function(){null!=e.node.parent&&(e.Animation.active=!0,e.Animation.opacity=255,e.Animation.getComponent(i.default).onComplete=function(){e.Animation.runAction(cc.fadeOut(.1))},e.Animation.getComponent(i.default).play())},this)},t.prototype.start=function(){},t.prototype.update=function(e){},t=__decorate([l],t)}(cc.Component);n.default=h,cc._RF.pop()},{"../Animation/TurnSunAnimation":"TurnSunAnimation","../Config/Config":"Config","../TableManager":"TableManager","../Utils/Signal":"Signal","./GameScene":"GameScene"}],EventManager:[function(e,t,n){"use strict";cc._RF.push(t,"3c384HeRO5DCL/qOmRM/SNf","EventManager"),Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(){this.eventTarget=new cc.EventTarget}return Object.defineProperty(e,"inst",{get:function(){return this.ins?this.ins:this.ins=new e},enumerable:!0,configurable:!0}),e.prototype.emit=function(e,t,n,i,o,a){this.eventTarget.emit(e.toString(),t,n,i,o,a)},e.prototype.on=function(e,t,n,i){return this.eventTarget.on(e.toString(),t,n,i)},e.prototype.once=function(e,t,n){this.eventTarget.once(e.toString(),t,n)},e.prototype.dispatchEvent=function(e){this.eventTarget.dispatchEvent(e)},e.prototype.off=function(e,t,n){this.eventTarget.off(e.toString(),t,n)},e.prototype.hasEventListener=function(e){return this.eventTarget.hasEventListener(e.toString())},e.prototype.targetOff=function(e){this.eventTarget.targetOff(e)},e}();n.gEventMgr=i.inst,cc._RF.pop()},{}],EventName:[function(e,t,n){"use strict";cc._RF.push(t,"cbeb5B1/2hLsYY0DvZwARsp","EventName"),Object.defineProperty(n,"__esModule",{value:!0}),function(e){e[e.Cube_ADJUST_DONE=0]="Cube_ADJUST_DONE",e[e.DRAG_ADJUST_DONE=1]="DRAG_ADJUST_DONE",e[e.CUBE_BOX_DRAGING=2]="CUBE_BOX_DRAGING",e[e.CUBE_BOX_DRAG_INDEX=3]="CUBE_BOX_DRAG_INDEX",e[e.CUBE_BOX_DRAG_CANCEL=4]="CUBE_BOX_DRAG_CANCEL",e[e.CUBE_BOX_PLACE_DONE=5]="CUBE_BOX_PLACE_DONE",e[e.CUBE_BOX_SET_STATE_DONE=6]="CUBE_BOX_SET_STATE_DONE",e[e.GAME_START=7]="GAME_START",e[e.GAME_RESTART=8]="GAME_RESTART",e[e.EAT_COL=9]="EAT_COL",e[e.EAT_ROW=10]="EAT_ROW",e[e.KILL_DIRECTLY=11]="KILL_DIRECTLY",e[e.UPDATE_SCORE=12]="UPDATE_SCORE",e[e.UPDATE_COMBO=13]="UPDATE_COMBO",e[e.GAME_OVER=14]="GAME_OVER",e[e.ON_KILL=15]="ON_KILL",e[e.ROW_EFFECT=16]="ROW_EFFECT",e[e.COL_EFFECT=17]="COL_EFFECT",e[e.SHOW_TEXT=18]="SHOW_TEXT",e[e.UPDATE_PRE_SCORE=19]="UPDATE_PRE_SCORE",e[e.SHOW_OVER_LAYER=20]="SHOW_OVER_LAYER",e[e.CLEAR_CUBE_ROOT=21]="CLEAR_CUBE_ROOT",e[e.PREPARE_CUBE_BG=22]="PREPARE_CUBE_BG",e[e.PLAY_RAINBOW_EFFECT=23]="PLAY_RAINBOW_EFFECT",e[e.UPDATE_RAINBOW_SCORE=24]="UPDATE_RAINBOW_SCORE",e[e.PLAY_KILL_EFFECT=25]="PLAY_KILL_EFFECT",e[e.PLAY_30_BGM=26]="PLAY_30_BGM",e[e.PLAY_LETSGO=27]="PLAY_LETSGO",e[e.PLAY_BIU=28]="PLAY_BIU",e[e.PLAY_TOUCH=29]="PLAY_TOUCH",e[e.PLAY_PLACE=30]="PLAY_PLACE",e[e.PLAY_TEXT=31]="PLAY_TEXT",e[e.PLAY_SCORE=32]="PLAY_SCORE",e[e.PLAY_OVER=33]="PLAY_OVER",e[e.PLAY_SPECIAL_A=34]="PLAY_SPECIAL_A",e[e.PLAY_SPECIAL_B=35]="PLAY_SPECIAL_B",e[e.PLAY_OVER_NO_PLACE=36]="PLAY_OVER_NO_PLACE",e[e.PLAY_OVER_TIME_UP=37]="PLAY_OVER_TIME_UP",e[e.PLAY_OVER_TAB=38]="PLAY_OVER_TAB",e[e.PLAY_LAY_FAIL=39]="PLAY_LAY_FAIL",e[e.PLAY_SPECIAL_B_BGM=40]="PLAY_SPECIAL_B_BGM",e[e.PLAY_SPECIAL_A_BGM=41]="PLAY_SPECIAL_A_BGM"}(n.GlobalEvent||(n.GlobalEvent={})),cc._RF.pop()},{}],FlyAdCnicornAniamtion:[function(e,t,n){"use strict";cc._RF.push(t,"df82bE3jcpP0bURZ5D33BYC","FlyAdCnicornAniamtion"),Object.defineProperty(n,"__esModule",{value:!0});var i=e("../Utils/FrameAniBase"),o=cc._decorator,a=o.ccclass,r=(o.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t=__decorate([a],t)}(i.default));n.default=r,cc._RF.pop()},{"../Utils/FrameAniBase":"FrameAniBase"}],FlyCnicornAd:[function(e,t,n){"use strict";cc._RF.push(t,"330ebu2XaRJd4M1vpZoY4lZ","FlyCnicornAd"),Object.defineProperty(n,"__esModule",{value:!0});var i,o=e("../AdLayer"),a=e("../Game/GameMgr"),r=e("../Utils/Signal"),s=cc._decorator,c=s.ccclass;s.property;(function(e){e[e.Left=0]="Left",e[e.Right=1]="Right"})(i=n.FlyOrigin||(n.FlyOrigin={}));var l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(r.BaseSignal);n.FlyCnicornAdDispearSignal=l;var u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(r.BaseSignal);n.FlyCnicornClickSignal=u;var h=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(r.BaseSignal);n.ShowFlyCnicornSignal=h;var d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),Object.defineProperty(t.prototype,"Fly",{get:function(){return this.node.getChildByName("Fly")},enumerable:!0,configurable:!0}),t.prototype.reuse=function(e,t){console.log("ShowFlyCnicorn:",i[e]),this.node.opacity=255,this.Fly.opacity=255;var n=0;this.Fly.y=t,e=i.Right,this.Fly.scaleX=-1,this.Fly.x=940,n=-940,this.Fly.targetOff(this),this.Fly.once(cc.Node.EventType.TOUCH_END,this.onAddTouch,this),this.Fly.runAction(cc.sequence(cc.moveTo(10,n,this.Fly.y),cc.spawn(cc.fadeOut(2),cc.moveBy(2,376*this.Fly.scaleX,0)),cc.callFunc(function(){l.inst.dispatch(),a.Game.ShowTimeRest=10})))},t.prototype.unuse=function(){},t.prototype.onLoad=function(){var e=this;o.RemoveFlyCnicornSignal.inst.addOnce(function(){h.inst.removeTarget(e),o.CnicornWatchFailSignal.inst.removeTarget(e),e.node.removeFromParent(!0)},this),o.CnicornWatchFailSignal.inst.addListener(function(){a.Game.ShowTimeRest=10},this),a.Game.ShowTimeRest=10,h.inst.addListenerTwo(function(t,n){e.reuse(t,n)},this)},t.prototype.onAddTouch=function(e){this.Fly.stopAllActions(),this.Fly.runAction(cc.fadeOut(.2)),u.inst.dispatch()},t.prototype.update=function(e){},t=__decorate([c],t)}(cc.Component);n.default=d,cc._RF.pop()},{"../AdLayer":"AdLayer","../Game/GameMgr":"GameMgr","../Utils/Signal":"Signal"}],FrameAniBase:[function(e,t,n){"use strict";cc._RF.push(t,"6298cJI+OZK9J9ZyfrpqPP2","FrameAniBase"),Object.defineProperty(n,"__esModule",{value:!0});var i=cc._decorator,o=i.ccclass,a=i.property,r=i.requireComponent,s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.Frames=null,t.PrefixName="",t.FrameCount=0,t.Interval=.05,t.Priority=0,t.Loop=!1,t.PlayOnLoad=!1,t.currentIndex=0,t.time=0,t.isPlay=!1,t.listener=[],t.complateEvent=[],t}var n;return __extends(t,e),n=t,Object.defineProperty(t.prototype,"Sprite",{get:function(){return this.node.getComponent(cc.Sprite)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Animation",{set:function(e){this.Frames=e},enumerable:!0,configurable:!0}),t.prototype.onFocusInEditor=function(){},t.prototype.onLostFocusInEditor=function(){clearInterval(n.intervalID)},t.prototype.onLoad=function(){this.time=this.Interval,this.isPlay=this.PlayOnLoad},t.prototype.play=function(){this.isPlay=!0,this.currentIndex=0,0==this.isPlaying&&this.callEventComplete()},t.prototype.onStartPlay=function(){},t.prototype.playOnLoop=function(){this.Loop=!0,this.play()},t.prototype.playByStep=function(){this.isPlay=!0,this.nextFrame(),this.isPlay=!1},t.prototype.pause=function(){this.isPlay=!1},t.prototype.resume=function(){this.isPlay=!0},t.prototype.stop=function(){this.isPlay=!1,this.currentIndex=0,this.updateCurrentFrame(),this.Loop=!1},t.prototype.updateCurrentFrame=function(){""!=this.PrefixName?this.Sprite.spriteFrame=this.Frames.getSpriteFrame(this.PrefixName+(this.currentIndex+1)):this.Sprite.spriteFrame=this.Frames.getSpriteFrames()[this.currentIndex]},t.prototype.onKeyFrame=function(e){},t.prototype.addKeyEventListener=function(e,t){this.listener.push({callback:e,target:t})},Object.defineProperty(t.prototype,"ListenerCount",{get:function(){return this.listener.length},enumerable:!0,configurable:!0}),t.prototype.clearAllListener=function(){return this.listener.length=0,this},t.prototype.onComplete=function(){},t.prototype.callEventFrame=function(){this.onKeyFrame(this.currentIndex);for(var e=0,t=this.listener;e<t.length;e++){var n=t[e];n.callback.apply(n.target,[this.currentIndex,this.__classname__])}},t.prototype.callEventComplete=function(){this.onComplete();for(var e=0,t=this.complateEvent;e<t.length;e++){var n=t[e];n.f.apply(n.target,[this.__classname__])}},t.prototype.addCompleteEvent=function(e,t){this.complateEvent.push({f:e,target:t})},Object.defineProperty(t.prototype,"TotalFrameCount",{get:function(){return""!=this.PrefixName&&this.FrameCount>0?this.FrameCount:this.Frames&&this.Frames.getSpriteFrames?this.Frames.getSpriteFrames().length:0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"CompleteEventCount",{get:function(){return this.complateEvent.length},enumerable:!0,configurable:!0}),t.prototype.clearCompleteEvent=function(){return this.complateEvent.length=0,this},t.prototype.start=function(){},Object.defineProperty(t.prototype,"isPlaying",{get:function(){if(this.isPlay&&this.Frames&&this.Frames.getSpriteFrames&&this.Frames.getSpriteFrames().length>0){for(var e=0,t=this.getComponents(n);e<t.length;e++){var i=t[e];if(i.Priority>this.Priority&&i.isPlaying)return!1}return!0}return!1},enumerable:!0,configurable:!0}),t.prototype.nextFrame=function(){0!=this.isPlaying?this.Frames&&this.Frames.getSpriteFrames&&this.Frames.getSpriteFrames().length>0&&(0==this.currentIndex&&this.onStartPlay(),this.updateCurrentFrame(),this.callEventFrame(),this.currentIndex=(this.currentIndex+1)%this.TotalFrameCount,0==this.currentIndex&&0==this.Loop&&(this.isPlay=!1,this.callEventComplete())):this.time=this.Interval},t.prototype.update=function(e){this.time>=this.Interval&&(this.time=0,this.nextFrame()),this.time+=e},t.aniName="FrameAniBase",t.intervalID=-1,__decorate([a(cc.SpriteAtlas)],t.prototype,"Frames",void 0),__decorate([a],t.prototype,"PrefixName",void 0),__decorate([a],t.prototype,"FrameCount",void 0),__decorate([a],t.prototype,"Interval",void 0),__decorate([a],t.prototype,"Priority",void 0),__decorate([a],t.prototype,"Loop",void 0),__decorate([a],t.prototype,"PlayOnLoad",void 0),t=n=__decorate([o,r(cc.Sprite)],t)}(cc.Component);n.default=s,cc._RF.pop()},{}],GameFactory:[function(e,t,n){"use strict";cc._RF.push(t,"e1ae9PPwO5MhJFqc7MS46ep","GameFactory"),Object.defineProperty(n,"__esModule",{value:!0});var i,o=e("../Utils/HashMap"),a=function(){function e(e,t,n){this._pool=[],this.poolHandlerComps=[],this.poolHandlerComps=n,this.template=e,this.initPool(t)}return e.prototype.initPool=function(e){for(var t=0;t<e;++t){var n=cc.instantiate(this.template);this.put(n)}},e.prototype.size=function(){return this._pool.length},e.prototype.clear=function(){for(var e=this._pool.length,t=0;t<e;++t)this._pool[t].destroy&&this._pool[t].destroy();this._pool.length=0},e.prototype.put=function(e){if(e&&-1===this._pool.indexOf(e)){if(e.removeFromParent(!1),this.poolHandlerComps)for(var t=0,n=this.poolHandlerComps;t<n.length;t++){var i=n[t],o=e.getComponent(i);o&&o.unuse&&o.unuse.apply(o)}else for(var a=0,r=e.getComponents(cc.Component);a<r.length;a++){(i=r[a])&&i.unuse&&i.unuse.apply(i)}this._pool.push(e)}},e.prototype.get=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=this._pool.length-1;n<0&&this.initPool(1),n=this._pool.length-1;var i=this._pool[n];if(this._pool.length=n,this.poolHandlerComps)for(var o=0,a=this.poolHandlerComps;o<a.length;o++){var r=a[o],s=i.getComponent(r);s&&s.reuse&&s.reuse.apply(s,arguments)}else for(var c=0,l=i.getComponents(cc.Component);c<l.length;c++){(r=l[c])&&r.reuse&&r.reuse.apply(r,arguments)}return i},e}();(function(e){e[e.INIT=0]="INIT",e[e.CUBE=4]="CUBE",e[e.CUBE_ROOT=8]="CUBE_ROOT",e[e.CUBE_BG=16]="CUBE_BG",e[e.DONE=28]="DONE"})(i||(i={}));var r=function(){function e(){this.step=i.INIT,this.CubeBgPool=new o.HashMap,this.CubePool=new o.HashMap,this.CubeRootPool=new o.HashMap}return Object.defineProperty(e,"inst",{get:function(){return this.ins?this.ins:this.ins=new e},enumerable:!0,configurable:!0}),e.prototype.init=function(e,t,n){this.doneCallback=e,this.nextStep(i.CUBE_BG),this.initCube(1,t),this.initCubeRoot(1,n)},e.prototype.nextStep=function(e){this.step|=e,console.log("Factory Step:"+i[e]),this.step>=i.DONE&&this.doneCallback&&this.doneCallback()},e.prototype.initCubeBg=function(e,t){var n=this;t?(n.CubeBgPool.add("CubeBg",new a(t,e)),n.nextStep(i.CUBE_BG)):cc.loader.loadRes("prefabs/CubeBg",cc.Prefab,function(t,o){t?console.error(t):(n.CubeBgPool.add("CubeBg",new a(o,e)),n.nextStep(i.CUBE_BG))})},e.prototype.getCubeBg=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return this.CubeBgPool.get("CubeBg").get(e)},e.prototype.putCubeBg=function(e){this.CubeBgPool.get("CubeBg").put(e)},e.prototype.initCube=function(e,t){var n=this;t?(n.CubePool.add("Cube",new a(t,e)),n.nextStep(i.CUBE)):cc.loader.loadRes("prefabs/Cube",cc.Prefab,function(t,o){t?console.error(t):(n.CubePool.add("Cube",new a(o,e)),n.nextStep(i.CUBE))})},e.prototype.getCube=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return this.CubePool.get("Cube").get(e)},e.prototype.putCube=function(e){this.CubePool.get("Cube").put(e)},e.prototype.initCubeRoot=function(e,t){var n=this;t?(n.CubeRootPool.add("CubeRoot",new a(t,e)),n.nextStep(i.CUBE_ROOT)):cc.loader.loadRes("prefabs/CubeRoot",cc.Prefab,function(t,o){t?console.error(t):(n.CubeRootPool.add("CubeRoot",new a(o,e)),n.nextStep(i.CUBE_ROOT))})},e.prototype.getCubeRoot=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return this.CubeRootPool.get("CubeRoot").get(e)},e.prototype.putCubeRoot=function(e){this.CubeRootPool.get("CubeRoot").put(e)},e}();n.gFactory=r.inst,cc._RF.pop()},{"../Utils/HashMap":"HashMap"}],GameMgr:[function(e,t,n){"use strict";cc._RF.push(t,"004c8nxswRJr5F7AfDn0nPo","GameMgr"),Object.defineProperty(n,"__esModule",{value:!0});var i,o=e("../Config/Config"),a=e("../Controller/EventManager"),r=e("../Controller/EventName"),s=e("../table"),c=e("../Utils/HashMap"),l=e("../Utils/Random"),u=e("../AdLayer"),h=e("../Ad/FlyCnicornAd"),d=e("../TableManager");(function(e){e[e.TIME_OUT=0]="TIME_OUT",e[e.NO_PLACE=1]="NO_PLACE"})(i=n.OverType||(n.OverType={}));var p=function(){function e(){this.gamePanel=null,this.dragPanel=null,this.isEmitRainbowEvent=!1,this.isSelected=!1,this.data={totalScore:0,killCol:0,killRow:0,maxCombo:0,wildScore:0,fruitKill:{},fruitScore:{},comboScore:0,mostFruitID:0,bestFruitID:0,Wild_A:!1,Wild_B:!1},this.combo=0,this.time=o.Config.GameTime,this.canPlace=!1,this.placePos=cc.v2(0,0),this.canDrag=!0,this.isStart=!1,this.dragCount=0,this.curPlaceCount=0,this.availableCount=0,this.initAvailableCountInit=64,this.cubeCount=64,this.testCubeIndex=[],this.cubeIndex=[],this.preCubeIndex=[],this.curSelectFruitID=2e4,this.killDirectlyCount=0,this.shapeWeight=new c.HashMap,this.shapeTotalWeight=0,this.preScore=0,this.callShapeCount=0,this.ShowTimeRest=0}return Object.defineProperty(e,"inst",{get:function(){return this.ins?this.ins:this.ins=new e},enumerable:!0,configurable:!0}),e.prototype.start=function(){var e=this;console.log("------------------------------- start ---------------------------"),this.time=o.Config.GameTime,this.cubeCount=64,this.callShapeCount=0,this.availableCount=0,this.addPreScore(-this.preScore),this.initData();for(var t=0,n=this.testCubeIndex;t<n.length;t++){n[t]>0&&this.initAvailableCountInit--}console.log("initAvailableCountInit:",this.initAvailableCountInit);for(var i=0;i<64;i++)this.testCubeIndex[i]>0?this.cubeIndex[i]=100:this.cubeIndex[i]=-1e4;this.preCubeIndex=this.cubeIndex.concat();var a=d.TableManager.inst.getAll_ShapeWeight_Data();for(var r in a){var s=a[r];this.shapeWeight.add(parseInt(r),s.Weight)}this.shapeWeight.sort(function(e,t){return t.value-e.value}),this.shapeTotalWeight=0,this.shapeWeight.forEach(function(t,n){e.shapeTotalWeight+=n,e.shapeWeight.add(t,e.shapeTotalWeight)})},e.prototype.restart=function(){this.start(),a.gEventMgr.emit(r.GlobalEvent.GAME_RESTART)},e.prototype.getResultData=function(){return this.data},e.prototype.initData=function(){this.data.fruitKill={},this.data.fruitScore={},this.data.killCol=0,this.data.killRow=0,this.data.maxCombo=0,this.data.wildScore=0,this.data.comboScore=0,this.data.bestFruitID=0,this.data.mostFruitID=0,this.addScore(-this.data.totalScore)},e.prototype.addFruitKill=function(e){this.data.fruitKill[e]?this.data.fruitKill[e]++:this.data.fruitKill[e]=1},e.prototype.addFruitScore=function(e,t){var n=d.TableManager.inst.getFruits(e);n?(this.data.fruitScore[e]?this.data.fruitScore[e]+=t:this.data.fruitScore[e]=t,n.Type!=s.Fruits_Type.ShuiGuo&&(this.data.wildScore+=t)):console.error(" error fruitID: "+e)},e.prototype.addOverCount=function(){this.cubeCount--,this.cubeCount<=0&&a.gEventMgr.emit(r.GlobalEvent.SHOW_OVER_LAYER)},e.prototype.addScore=function(e){this.data.totalScore+=e,console.log("add Score:",e),this.data.totalScore=Math.max(0,this.data.totalScore),this.combo>=2&&(this.data.comboScore+=e),a.gEventMgr.emit(r.GlobalEvent.UPDATE_SCORE)},e.prototype.getScore=function(){return parseInt(this.data.totalScore.toString())},e.prototype.addKillCol=function(e){this.data.killCol+=e},e.prototype.addKillRow=function(e){this.data.killRow+=e},e.prototype.addCombo=function(e){this.combo+=e,this.combo>this.data.maxCombo&&(this.data.maxCombo=this.combo),this.combo>0&&a.gEventMgr.emit(r.GlobalEvent.UPDATE_COMBO),console.log(" --------------combo:",this.combo)},e.prototype.getCombo=function(){return this.combo},e.prototype.getShapes=function(){for(var e=[],t={},n=0;n<3;n++)for(var i={shape:[],shapeID:0},o=l.Random.getRandom(0,1)*this.shapeTotalWeight,a=0,r=this.shapeWeight.values;a<r.length;a++){var c=r[a];if(o<=c.value){var u=d.TableManager.inst.getShapeWeight(c.key).ShapeList.concat();if(this.callShapeCount<3)for(var h=0;h<u.length;h++)[1e4,10001,10002,10032,10033].indexOf(u[h])>=0&&(u.splice(h,1),h--);if(u.length<=0)continue;var p=l.Random.getRandom(0,1)*(u.length-1);i.shapeID=u[Math.round(p)];var g=d.TableManager.inst.getShape(i.shapeID);if(g.Type!=s.Shape_Type.PuTongFangKuai&&t[g.Type])continue;g.Type!=s.Shape_Type.PuTongFangKuai&&(t[g.Type]=!0),i.shape=g.Shape,!this.data.Wild_A&&(this.data.Wild_A=10032==g.ID),!this.data.Wild_B&&(this.data.Wild_B=10033==g.ID),e.push(i);break}}return this.callShapeCount++,e},e.prototype.getPreCubeIndex=function(){return this.preCubeIndex},e.prototype.getCubeIndex=function(){return this.cubeIndex},e.prototype.setCubeIndex=function(e,t){this.cubeIndex[e]=t},e.prototype.resetCubeIndex=function(e){this.testCubeIndex[e]>0?this.cubeIndex[e]=100:this.cubeIndex[e]=-1e4},e.prototype.setPreCubeIndex=function(e,t){this.preCubeIndex[e]=t},e.prototype.resetPreCubeIndex=function(e){this.preCubeIndex[e]=-1e4},e.prototype.doClear=function(e){var t=e[0],n=e[1],i=d.TableManager.inst.getFruits(this.curSelectFruitID)||{Name:"\u8fa3\u9e21",Type:100};if(a.gEventMgr.emit(r.GlobalEvent.EAT_COL,n),a.gEventMgr.emit(r.GlobalEvent.EAT_ROW,t),this.addKillRow(t.length),this.addKillCol(n.length),t.length>0||n.length>0||this.killDirectlyCount>0?this.addCombo(1):this.addCombo(-this.combo),i&&i.Type==s.Fruits_Type.ShuiGuo&&(t.length>0||n.length>0)&&(a.gEventMgr.emit(r.GlobalEvent.COL_EFFECT,n),a.gEventMgr.emit(r.GlobalEvent.ROW_EFFECT,t)),t.length>0||n.length>0||this.combo>0){var o="good";o=this.combo>=3?"unbelievable":this.combo>1?t.length+n.length<2?"combo":"unbelievable":t.length+n.length<2?"good":t.length+n.length<3?"great":t.length+n.length<4?"amazing":"unbelievable",a.gEventMgr.emit(r.GlobalEvent.SHOW_TEXT,o)}a.gEventMgr.emit(r.GlobalEvent.KILL_DIRECTLY)},e.prototype.check=function(){var e=this.checkRowCol(this.cubeIndex);this.doClear(e)},e.prototype.checkRowCol=function(e){for(var t=[],n=[],i=0;i<o.Config.Grid.x;i++){for(var a=0,r=0,s=0;s<o.Config.Grid.y;s++)a+=e[s+i*o.Config.Grid.x],r+=e[i+s*o.Config.Grid.y];r>0&&t.push(i),a>0&&n.push(i)}return[n,t]},e.prototype.checkFruitColRow=function(){for(var e=[],t=[],n=0;n<this.cubeIndex.length;n++)if(this.cubeIndex[n]>0){var i=Math.floor(n/o.Config.Grid.x),a=n%o.Config.Grid.y;e.indexOf(i)<0&&e.push(i),t.indexOf(a)<0&&t.push(a)}return[t,e]},e.prototype.bindGamePanel=function(e){this.gamePanel=e},e.prototype.gameOver=function(e){console.log("game over"),this.isStart=!1;var t=0;for(var n in this.data.fruitScore)t<=this.data.fruitScore[n]&&(t=this.data.fruitScore[n],this.data.mostFruitID=parseInt(n));var i=0;for(var n in this.data.fruitKill)i<=this.data.fruitKill[n]&&(i=this.data.fruitKill[n],this.data.bestFruitID=parseInt(n));a.gEventMgr.emit(r.GlobalEvent.GAME_OVER,e)},e.prototype.addAvailableCount=function(e){this.availableCount+=e,0==this.isStart&&this.availableCount>=this.initAvailableCountInit&&a.gEventMgr.emit(r.GlobalEvent.GAME_START)},e.prototype.getAvailableCount=function(){return this.availableCount},e.prototype.update=function(e){this.isStart&&(n.Game.ShowTimeRest>0&&(n.Game.ShowTimeRest-=e,n.Game.ShowTimeRest<=0&&cc.sys.isMobile&&cc.sys.isBrowser&&cc.sys.os==cc.sys.OS_ANDROID&&h.ShowFlyCnicornSignal.inst.dispatchTwo(l.Random.getRandom()>.5?h.FlyOrigin.Left:h.FlyOrigin.Right,-364.409)),this.time>30&&this.time-e<=30&&a.gEventMgr.emit(r.GlobalEvent.PLAY_30_BGM),this.time-=e,this.time<=0&&(this.time=0,this.isStart=!1,this.gameOver(i.TIME_OUT),a.gEventMgr.emit(r.GlobalEvent.PLAY_OVER_TIME_UP)))},e.prototype.getTime=function(){return this.time},e.prototype.addPreScore=function(e){this.preScore+=e,a.gEventMgr.emit(r.GlobalEvent.UPDATE_PRE_SCORE)},e.prototype.resetPreScore=function(){this.preScore=0,a.gEventMgr.emit(r.GlobalEvent.UPDATE_PRE_SCORE)},e.prototype.getPreScore=function(){return this.preScore},e.prototype.testRandomClear=function(){u.RandomFreeClearSignal.inst.dispatch()},e.prototype.testGetSun=function(){setTimeout(function(){u.SetAllSunSignal.inst.dispatch()},3e3)},e}();n.Game=p.inst,cc._RF.pop()},{"../Ad/FlyCnicornAd":"FlyCnicornAd","../AdLayer":"AdLayer","../Config/Config":"Config","../Controller/EventManager":"EventManager","../Controller/EventName":"EventName","../TableManager":"TableManager","../Utils/HashMap":"HashMap","../Utils/Random":"Random","../table":"table"}],GameScene:[function(e,t,n){"use strict";cc._RF.push(t,"e4483cGN9dC8JpeMWEDWaJe","GameScene"),Object.defineProperty(n,"__esModule",{value:!0});var i,o=e("../Controller/GameFactory"),a=e("../Controller/EventManager"),r=e("../Controller/EventName"),s=e("../Controller/AudioController"),c=e("./GameMgr"),l=e("./CubeBg"),u=e("../Config/Config"),h=e("./CubeRoot"),d=e("../table"),p=e("../Utils/Celer/CelerSDK"),g=e("../Utils/Random"),f=e("../Utils/Cocos"),m=e("../Utils/Time"),y=e("../View/PauseLayer"),_=e("../WildAdButton"),v=e("../AdLayer"),S=e("./Cube"),b=e("../TableManager"),C=e("../LoadingImg"),E=cc._decorator,D=E.ccclass,T=E.property;(function(e){e[e.READY=0]="READY",e[e.PREFABS=2]="PREFABS",e[e.AUDIO=16]="AUDIO",e[e.CELER=32]="CELER",e[e.GUIDE=64]="GUIDE",e[e.DONE=98]="DONE"})(i=n.LOAD_STEP||(n.LOAD_STEP={}));var F=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.GamePanel=null,t.ScorePanel=null,t.DragPanel=null,t.Score=null,t.adLayer=null,t.TimeLabel=null,t.TimeProgress=null,t.ShowText=null,t.FloatScore=null,t.Cube=null,t.CubeRoot=null,t.PauseLayer=null,t.GuidePage=null,t.Forward=null,t.Next=null,t.ButtonNode=null,t.Close=null,t.NextSprite=null,t.UI=null,t._step=i.READY,t.Tip=null,t.adjustCount=0,t.floatScoreMoveSpeed=600,t.scorePos=cc.v2(350,95),t.score=0,t.canUpdateScore=!1,t.rainbowEffectArray=[],t.rainbowScoreArray=[],t}var n;return __extends(t,e),n=t,t.prototype.onLoad=function(){var e=this;n.UIAtlas=this.UI,y.PauseScoreUpdate.inst.addListener(function(){e.startUpdatePauseScore()},this);var t=this;p.CelerSDK.inst.init(function(){t.celerStart()}.bind(this)),this.GuidePage.node.active=!1,this.ButtonNode.active=!1,this.Next.node.on(cc.Node.EventType.TOUCH_START,this.nextPage,this),this.Forward.node.on(cc.Node.EventType.TOUCH_START,this.forwardPage,this),this.GuidePage.node.on("scroll-ended",this.updateButton,this),console.log(" invoke celerx.ready"),cc.game.setFrameRate(u.Config.FPS),cc.loader.loadResDir("Textures/Fruits/"),cc.loader.loadResDir("sounds"),cc.loader.loadRes("prefabs/OverLayer"),this.Score.string="0",this.FloatScore.string="",this.Tip.node.active=!1,s.gAudio.init(function(){}.bind(this)),console.log(" start load json"),b.TableManager.inst.startLoad("json/",function(){p.CelerSDK.inst.celerXReady(),o.gFactory.init(function(){this.nextStep(i.PREFABS)}.bind(e),e.Cube,e.CubeRoot)}),this.initEvent(),c.Game.bindGamePanel(this.GamePanel),this.Score.string="0",this.TimeLabel.string="3/00",this.DragPanel.removeAllChildren(),v.RandomFreeClearSignal.inst.addListener(function(){var e=c.Game.checkFruitColRow();if(!(e.length<=0)){var t=e[0],n=e[1];console.log("RandomFreeClearSignal:",e),f.disOrderArray(t),f.disOrderArray(n);var i=[],o=[];if(n.length<=0)for(;i.length<2&&t.length>0;)i.push(t.pop());else if(t.length<=0)for(;o.length<2&&n.length>0;)o.push(n.pop());else for(;o.length+i.length<2;)g.Random.getRandom()>.5?n.length>0?o.push(n.pop()):t.length>0&&i.push(t.pop()):t.length>0?i.push(t.pop()):n.length>0&&o.push(n.pop());c.Game.doClear([o,i])}},this),v.SetAllSunSignal.inst.addListener(function(){for(;e.DragPanel.childrenCount>0;){e.DragPanel.children[0].getComponent(h.default).removeSelf()}e.genNewDragShape([{shape:[0],shapeID:10032},{shape:[0],shapeID:10032},{shape:[0],shapeID:10032}]),setTimeout(function(){S.PlayTurnSunAnimationSignal.inst.dispatch()},100)},this)},t.prototype.nextPage=function(){var e=this;if(this.GuidePage.getCurrentPageIndex()>=this.GuidePage.content.childrenCount-1)this.GuidePage.node.runAction(cc.sequence(cc.scaleTo(.2,0),cc.callFunc(function(){e.GuidePage.scrollToPage(0,0),e.GuidePage.node.active=!1,e.ButtonNode.active=!1},this))),c.Game.isStart||this.nextStep(i.GUIDE);else{var t=(this.GuidePage.getCurrentPageIndex()+1)%this.GuidePage.content.childrenCount;this.GuidePage.setCurrentPageIndex(t),this.updateButton()}},t.prototype.forwardPage=function(){if(this.GuidePage.getCurrentPageIndex()<=0);else{var e=(this.GuidePage.getCurrentPageIndex()-1)%this.GuidePage.content.childrenCount;this.GuidePage.setCurrentPageIndex(e),this.updateButton()}},t.prototype.updateButton=function(){this.GuidePage.getCurrentPageIndex()>=this.GuidePage.content.childrenCount-1?this.Next.node.getChildByName("Background").getComponent(cc.Sprite).spriteFrame=this.Close:this.Next.node.getChildByName("Background").getComponent(cc.Sprite).spriteFrame=this.NextSprite,this.Forward.node.active=0!=this.GuidePage.getCurrentPageIndex()},t.prototype.celerStart=function(){var e=this;c.Game.MatchInfo&&c.Game.MatchInfo.sharedRandomSeed?g.Random.setRandomSeed(c.Game.MatchInfo.sharedRandomSeed):g.Random.setRandomSeed(Math.random()),console.error(" matchid:",c.Game.MatchInfo.matchId,", seed:",c.Game.MatchInfo.sharedRandomSeed),this.nextStep(i.CELER),c.Game.MatchInfo&&c.Game.MatchInfo.shouldLaunchTutorial?(this.GuidePage.node.active=!0,this.ButtonNode.active=!0):(this.GuidePage.node.active=!1,this.ButtonNode.active=!1,this.nextStep(i.GUIDE)),CELER_X?celerSDK.onPause(function(){0!=c.Game.isStart&&(e.adLayer.active||y.ShowPauseSignal.inst.dispatchOne(e.adLayer.active))}):cc.game.on(cc.game.EVENT_HIDE,function(){0!=c.Game.isStart&&(e.adLayer.active||y.ShowPauseSignal.inst.dispatchOne(e.adLayer.active))},this),CELER_X&&1!=celerSDK.hasMethod("showAd")&&(_.HideWildAdButtonSignal.inst.dispatch(),v.RemoveFlyCnicornSignal.inst.dispatch()),C.HideLoading.inst.dispatch()},t.prototype.nextStep=function(e){this._step|=e,console.log("CUR STEP:"+i[e]+", total: "+this._step),this._step>=i.DONE&&(console.log(" start game"),this.GamePanel.scale=1,c.Game.start(),a.gEventMgr.emit(r.GlobalEvent.PREPARE_CUBE_BG),setTimeout(function(){_.WildButtonReadySignal.inst.dispatch()},1e3*(64/60+.3)))},t.prototype.initGamePanel=function(){console.log("   gEventMgr.emit(GlobalEvent.PREPARE_CUBE_BG)  "),a.gEventMgr.emit(r.GlobalEvent.PREPARE_CUBE_BG)},t.prototype.initEvent=function(){a.gEventMgr.targetOff(this),a.gEventMgr.on(r.GlobalEvent.Cube_ADJUST_DONE,this.adjustDragPanel,this),a.gEventMgr.on(r.GlobalEvent.CUBE_BOX_DRAGING,this.onBoxDrag,this),a.gEventMgr.on(r.GlobalEvent.CUBE_BOX_SET_STATE_DONE,this.onCubePlaceDone,this),a.gEventMgr.on(r.GlobalEvent.UPDATE_SCORE,this.updateScore,this),a.gEventMgr.once(r.GlobalEvent.ON_KILL,this.onKill,this),a.gEventMgr.on(r.GlobalEvent.COL_EFFECT,this.colEffect,this),a.gEventMgr.on(r.GlobalEvent.ROW_EFFECT,this.rowEffect,this),a.gEventMgr.on(r.GlobalEvent.SHOW_TEXT,this.showText,this),a.gEventMgr.on(r.GlobalEvent.GAME_START,this.gameStart,this),a.gEventMgr.once(r.GlobalEvent.SHOW_OVER_LAYER,this.gameOver,this),a.gEventMgr.on(r.GlobalEvent.GAME_RESTART,this.initGamePanel,this),a.gEventMgr.on(r.GlobalEvent.PLAY_RAINBOW_EFFECT,function(e){},this),a.gEventMgr.on(r.GlobalEvent.UPDATE_RAINBOW_SCORE,function(e){},this),this.ShowText.on(cc.Animation.EventType.FINISHED,this.onShowTextFinish,this)},t.prototype.onShowTextFinish=function(e,t){t&&"letsgo"==t.name&&(c.Game.isStart=!0)},t.prototype.gameOver=function(){var e=this;this.FloatScore.string="",console.log(" start load over layer"),cc.loader.loadRes("prefabs/OverLayer",cc.Prefab,function(t,n){if(t)console.error(" load over layer failed:",t),p.CelerSDK.inst.submitScore(c.Game.getResultData().totalScore);else{if(e.Tip.node.active=!1,e.Tip.node.runAction(cc.repeatForever(cc.sequence(cc.fadeTo(.1,0),cc.fadeTo(.2,255)))),e.node.getChildByName("OverLayer"))return;e.node.addChild(cc.instantiate(n))}})},t.prototype.showText=function(e){console.log(" showText:",e),a.gEventMgr.emit(r.GlobalEvent.PLAY_TEXT,e),this.ShowText.play(e)},t.prototype.rowEffect=function(e){e.length>0&&a.gEventMgr.emit(r.GlobalEvent.PLAY_KILL_EFFECT)},t.prototype.colEffect=function(e){e.length>0&&a.gEventMgr.emit(r.GlobalEvent.PLAY_KILL_EFFECT)},t.prototype.onKill=function(){},t.prototype.onAnimationFinish=function(e,t){},t.prototype.updateScore=function(){this.canUpdateScore=!0},t.prototype.onBoxDrag=function(e,t,n,i,o){var s=t[0],l=t[1],u=e.add(cc.v2(-s.width/2+l.width/2,s.height/2-l.height/2));this.floatScorePos=cc.v2(e.x,e.y+80),c.Game.canPlace=this.checkCanPlace(e,u,n,i,o,!0),c.Game.canPlace?this.updateFloatScore():(this.FloatScore.string="",a.gEventMgr.emit(r.GlobalEvent.CUBE_BOX_DRAG_CANCEL))},t.prototype.updateFloatScore=function(){c.Game.getPreScore()<=0?this.FloatScore.string="":(this.FloatScore.node.scale=1,this.FloatScore.string=c.Game.getPreScore().toString(),this.FloatScore.node.opacity=255,this.FloatScore.node.stopAllActions())},t.prototype.checkCanPlace=function(e,t,n,i,o,s){void 0===s&&(s=!1);for(var h=i[0],p=i[1],g=i[2],m=null,y=null,_=0,v=this.GamePanel.children;_<v.length;_++){var S=v[_];m?f.Distance(m.position,t)>=f.Distance(S.position,t)&&(m=S):f.Distance(S.position,t)<=S.width/2*Math.SQRT2&&(m=S)}if(!m)return!1;var C=m.getComponent(l.default).getIndex(),E=C+(p-1)*u.Config.Grid.x+g;if(E%u.Config.Grid.x>=C%u.Config.Grid.x&&(y=this.GamePanel.children[E]),y){var D=m.getComponent(l.default);if(D){for(var T=[],F=0,A=n;F<A.length;F++){var M=A[F],P=D.getIndex()+M;P<0||P>63||T.push(P)}if(T.length>0&&n.length==T.length){for(var L=null,I=0,G=this.GamePanel.children;I<G.length;I++){if((S=G[I]).getComponent(l.default).getIndex()==T[T.length-1]&&(L=S),!S.getComponent(l.default).isAvailable()&&T.indexOf(S.getComponent(l.default).getIndex())>=0)return!1}if(L&&y.getComponent(l.default).getIndex()%u.Config.Grid.x-L.getComponent(l.default).getIndex()%u.Config.Grid.x==h){if(s){var R=b.TableManager.inst.getShape(o),B=[],O=[];if(R&&R.Type==d.Shape_Type.TeShuDaoJu){var x=T.length;if(R.RowKillNumber&&R.RowKillNumber>0)for(var w=0;w<x;w++){var N=T[w]-T[w]%8,U=N+7;O.indexOf(T[w])<0&&O.push(T[w]);for(var Z=N;Z<=U;Z++)T.indexOf(Z)<0&&T.push(Z)}if(R.ColKillNumber&&R.ColKillNumber>0)for(w=0;w<x;w++){for(var J=T[w]+8;J<=63;)T.indexOf(J)<0&&T.push(J),J+=8;for(var Y=T[w]-8;Y>=0;)T.indexOf(Y)<0&&T.push(Y),Y-=8}if(R.GridKill&&R.GridKill.length>0)for(var k=0,H=R.GridKill;k<H.length;k++){var K=H[k].split(","),W=parseInt(K[0]),V=parseInt(K[1]);for(w=0;w<x;w++){B.indexOf(T[w])<0&&B.push(T[w]),O.indexOf(T[w])<0&&O.push(T[w]),(M=T[w]+8*V+W)%8-T[w]%8==W&&(M>63||M<0||(T.indexOf(M)<0&&T.push(M),B.indexOf(M)<0&&B.push(M)))}}}c.Game.dragCount=T.length,a.gEventMgr.emit(r.GlobalEvent.CUBE_BOX_DRAG_INDEX,T,o,B,O),c.Game.canPlace=!0,c.Game.placePos=this.GamePanel.convertToWorldSpaceAR(m.position.sub(t).add(e))}return!0}return!1}return!1}return!1}return!1},t.prototype.adjustDragPanel=function(){if(this.adjustCount++,console.log(this.adjustCount),this.adjustCount>=3){this.adjustCount=0;var e=this.DragPanel.children[1],t=this.DragPanel.children[0],n=this.DragPanel.children[2];e.x=0;var i=this.DragPanel.width/2;t.x=.6*i,n.x=.6*-i,a.gEventMgr.emit(r.GlobalEvent.DRAG_ADJUST_DONE),this.checkIsGameOver()}},t.prototype.genNewDragShape=function(e){e.length<3&&console.error(" \u65b9\u5757\u751f\u6210\u4e2a\u6570\u4e0d\u8db3!!!!!!!!!!!!!!!!!!!");for(var t=0,n=e;t<n.length;t++){var i=n[t];console.log("genNewDragShape:",i),this.DragPanel.addChild(o.gFactory.getCubeRoot(i))}},t.prototype.onCubePlaceDone=function(){this.FloatScore.node.runAction(cc.sequence(cc.scaleTo(.1,1.5),cc.moveTo(.2,this.scorePos),cc.callFunc(this.startUpdateScore.bind(this),this))),c.Game.check(),this.DragPanel.childrenCount<=0?this.genNewDragShape(c.Game.getShapes()):this.checkIsGameOver()},t.prototype.checkIsGameOver=function(){for(var e=!0,t=0,n=this.DragPanel.children;t<n.length;t++)for(var i=n[t].getComponent(h.default),o=0,s=this.GamePanel.children;o<s.length;o++){var l=s[o];if(!e)break;if(this.checkCanPlace(l.position,l.position,i.getShape(),i.getInfo(),i.getShapeID())){e=!1;break}}e&&(c.Game.gameOver(c.OverType.NO_PLACE),a.gEventMgr.emit(r.GlobalEvent.PLAY_OVER_NO_PLACE))},t.prototype.gameStart=function(){this.ShowText.play("letsgo"),a.gEventMgr.emit(r.GlobalEvent.PLAY_LETSGO),this.onCubePlaceDone()},t.prototype.startUpdateScore=function(){this.canUpdateScore=!0,this.FloatScore.string="",this.FloatScore.node.scale=1,this.FloatScore.node.opacity=255,this.FloatScore.node.stopAllActions(),this.updateFloatScore()},t.prototype.startUpdatePauseScore=function(){this.FloatScore.node.x=197.548,this.FloatScore.node.y=194.94,this.canUpdateScore=!0,this.FloatScore.string="/500",this.FloatScore.node.scale=.8,this.FloatScore.node.opacity=255,this.FloatScore.node.runAction(cc.sequence(cc.delayTime(.5),cc.fadeOut(.3)))},t.prototype.update=function(e){if(this.ButtonNode.active&&(this.Forward.node.active=this.GuidePage.getCurrentPageIndex()>0,this.Next.node.children[0].getComponent(cc.Sprite).spriteFrame=this.GuidePage.getCurrentPageIndex()<this.GuidePage.content.childrenCount-1?this.NextSprite:this.Close),0==this.GuidePage.node.active&&0==this.PauseLayer.active&&0==this.adLayer.active&&(c.Game.update(e),this.updateTime()),this.floatScorePos&&this.FloatScore.node.getNumberOfRunningActions()<=0&&this.FloatScore.node.scale>=1){var t=this.floatScoreMoveSpeed*e;f.Distance(this.floatScorePos,this.FloatScore.node.position)>200&&(this.FloatScore.node.x=this.floatScorePos.x,this.FloatScore.node.y=this.floatScorePos.y),this.FloatScore.node.x>this.floatScorePos.x?this.FloatScore.node.x-=t:this.FloatScore.node.x<this.floatScorePos.x&&(this.FloatScore.node.x+=t),this.FloatScore.node.y>this.floatScorePos.y?this.FloatScore.node.y-=t:this.FloatScore.node.y<this.floatScorePos.y&&(this.FloatScore.node.y+=t),Math.abs(this.FloatScore.node.x-this.floatScorePos.x)<10&&(this.FloatScore.node.x=this.floatScorePos.x),Math.abs(this.FloatScore.node.y-this.floatScorePos.y)<10&&(this.FloatScore.node.y=this.floatScorePos.y)}this.canUpdateScore&&(this.score<c.Game.getScore()?this.score+=50:(this.canUpdateScore=!1,this.score=c.Game.getScore()),this.Score.string=this.score.toString())},t.prototype.updateTime=function(){this.TimeLabel.string=m.Time.timeFormat(c.Game.getTime()),this.TimeProgress.progress=c.Game.getTime()/u.Config.GameTime},t.UIAtlas=null,__decorate([T(cc.Node)],t.prototype,"GamePanel",void 0),__decorate([T(cc.Node)],t.prototype,"ScorePanel",void 0),__decorate([T(cc.Node)],t.prototype,"DragPanel",void 0),__decorate([T(cc.Label)],t.prototype,"Score",void 0),__decorate([T(cc.Node)],t.prototype,"adLayer",void 0),__decorate([T(cc.Label)],t.prototype,"TimeLabel",void 0),__decorate([T(cc.ProgressBar)],t.prototype,"TimeProgress",void 0),__decorate([T(cc.Animation)],t.prototype,"ShowText",void 0),__decorate([T(cc.Label)],t.prototype,"FloatScore",void 0),__decorate([T(cc.Prefab)],t.prototype,"Cube",void 0),__decorate([T(cc.Prefab)],t.prototype,"CubeRoot",void 0),__decorate([T(cc.Node)],t.prototype,"PauseLayer",void 0),__decorate([T(cc.PageView)],t.prototype,"GuidePage",void 0),__decorate([T(cc.Button)],t.prototype,"Forward",void 0),__decorate([T(cc.Button)],t.prototype,"Next",void 0),__decorate([T(cc.Node)],t.prototype,"ButtonNode",void 0),__decorate([T(cc.SpriteFrame)],t.prototype,"Close",void 0),__decorate([T(cc.SpriteFrame)],t.prototype,"NextSprite",void 0),__decorate([T(cc.SpriteAtlas)],t.prototype,"UI",void 0),__decorate([T(cc.Label)],t.prototype,"Tip",void 0),t=n=__decorate([D],t)}(cc.Component);n.default=F,cc._RF.pop()},{"../AdLayer":"AdLayer","../Config/Config":"Config","../Controller/AudioController":"AudioController","../Controller/EventManager":"EventManager","../Controller/EventName":"EventName","../Controller/GameFactory":"GameFactory","../LoadingImg":"LoadingImg","../TableManager":"TableManager","../Utils/Celer/CelerSDK":"CelerSDK","../Utils/Cocos":"Cocos","../Utils/Random":"Random","../Utils/Time":"Time","../View/PauseLayer":"PauseLayer","../WildAdButton":"WildAdButton","../table":"table","./Cube":"Cube","./CubeBg":"CubeBg","./CubeRoot":"CubeRoot","./GameMgr":"GameMgr"}],GlobalSingleTouchMediator:[function(e,t,n){"use strict";cc._RF.push(t,"50484YTu+lAFp2acGVLgU7t","GlobalSingleTouchMediator"),Object.defineProperty(n,"__esModule",{value:!0});var i=e("../SingleTouchMediator"),o=cc._decorator,a=o.ccclass,r=(o.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onRegister=function(){e.prototype.onRegister.call(this),this.node._touchListener.swallowTouches=!1},t.prototype.onTouchStart=function(e){},t.prototype.onTouchMove=function(e){},t.prototype.onTouchEnd=function(e){},t.prototype.onTouchCancel=function(e){},t=__decorate([a],t)}(i.default));n.default=r,cc._RF.pop()},{"../SingleTouchMediator":"SingleTouchMediator"}],GlobalSingleTouchView:[function(e,t,n){"use strict";cc._RF.push(t,"4cc97bBcEZPu7Haxk0HdV9+","GlobalSingleTouchView"),Object.defineProperty(n,"__esModule",{value:!0});var i=e("../BaseView"),o=e("./GlobalSingleTouchMediator"),a=cc._decorator,r=a.ccclass,s=(a.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onLoad=function(){this.BindMedaitor(o.default)},t.prototype.start=function(){},t=__decorate([r],t)}(i.default));n.default=s,cc._RF.pop()},{"../BaseView":"BaseView","./GlobalSingleTouchMediator":"GlobalSingleTouchMediator"}],HashMap:[function(e,t,n){"use strict";cc._RF.push(t,"4b0e7DzcRNJnZXTYCWgDaDU","HashMap"),Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(){this._list=new Array,this.clear()}return e.prototype.getIndexByKey=function(e){for(var t=this._list.length,n=0;n<t;n++){if(this._list[n].key==e)return n}return-1},e.prototype.keyOf=function(e){for(var t=this._list.length,n=0;n<t;n++){var i=this._list[n];if(i.value.hashKey&&e.hashKey&&i.value.hashKey===e.hashKey||i.value==e)return i.key}return null},Object.defineProperty(e.prototype,"keys",{get:function(){for(var e=new Array,t=0,n=this._list;t<n.length;t++){var i=n[t];i&&e.push(i.key)}return e},enumerable:!0,configurable:!0}),e.prototype.add=function(e,t){var n={key:e,value:t},i=this.getIndexByKey(e);-1!=i?this._list[i]=n:this._list.push(n)},Object.defineProperty(e.prototype,"values",{get:function(){return this._list},enumerable:!0,configurable:!0}),e.prototype.remove=function(e){var t=this.getIndexByKey(e);if(-1!=t){var n=this._list[t];return this._list.splice(t,1),n}return null},e.prototype.has=function(e){return-1!=this.getIndexByKey(e)},e.prototype.get=function(e){var t=this.getIndexByKey(e);return-1!=t?this._list[t].value:null},Object.defineProperty(e.prototype,"length",{get:function(){return this._list.length},enumerable:!0,configurable:!0}),e.prototype.sort=function(e){this._list.sort(e)},e.prototype.forEachKeyValue=function(e){for(var t=this._list.length,n=0;n<t;n++){e(this._list[n])}},e.prototype.forEach=function(e){for(var t=this._list.length,n=0;n<t;n++){var i=this._list[n];e(i.key,i.value)}},e.prototype.clear=function(){this._list=[]},e}();n.HashMap=i,cc._RF.pop()},{}],HelpTextView:[function(e,t,n){"use strict";cc._RF.push(t,"3a40dt4OHlAab0x0dujjPnD","HelpTextView"),Object.defineProperty(n,"__esModule",{value:!0});var i=e("./table"),o=cc._decorator,a=o.ccclass,r=(o.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),Object.defineProperty(t.prototype,"richText",{get:function(){return this.getComponent(cc.RichText)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"text",{get:function(){return this.getComponent(cc.Label)},enumerable:!0,configurable:!0}),t.prototype.onLoad=function(){this.renderText()},t.prototype.renderText=function(){this.text?(this.text.enableBold(!0),this.text.string=lan.t(i.En_View.BangZhuJieMian,i.En_ID.BangZhuYeMian1+parseInt(this.node.name))):this.richText&&(this.richText.string=lan.t(i.En_View.BangZhuJieMian,i.En_ID.BangZhuYeMian1+parseInt(this.node.name)))},t=__decorate([a],t)}(cc.Component));n.default=r,cc._RF.pop()},{"./table":"table"}],LoadingImg:[function(e,t,n){"use strict";cc._RF.push(t,"b1887NM0G5IKrKGBbfhRHa1","LoadingImg"),Object.defineProperty(n,"__esModule",{value:!0});var i=e("./Utils/Signal"),o=cc._decorator,a=o.ccclass,r=(o.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(i.BaseSignal));n.HideLoading=r;var s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onLoad=function(){var e=this;this.node.scale=1,r.inst.addListener(function(){e.node.runAction(cc.sequence(cc.delayTime(2),cc.fadeOut(.3))),setTimeout(function(){e.node.destroy()},2300)},this)},t=__decorate([a],t)}(cc.Component);n.default=s,cc._RF.pop()},{"./Utils/Signal":"Signal"}],LogHandler:[function(e,t,n){"use strict";cc._RF.push(t,"a4747QIvUBIo6Ktpx/xQwuB","LogHandler"),Object.defineProperty(n,"__esModule",{value:!0});var i=function(e){function t(){var n=e.call(this)||this;if(n.logFunc=console.log,n.logMsg=null,n.frameTimes=0,n.now=0,n.Frame=20,n.totalFrames=0,n.startTime=0,window.addEventListener)for(var i=0,o=t.LISTENNING_EVENTS;i<o.length;i++){var a=o[i],r="trigger"+a.charAt(0).toLocaleUpperCase()+a.substring(1);n[r]&&"function"==typeof n[r]&&window.addEventListener(a,n[r].bind(n))}return n}return __extends(t,e),t.prototype.dumpFrameInfo=function(){var e=(Date.now()-this.startTime)/1e3,t=e/this.totalFrames;this.log(" total frames:",this.totalFrames," ,total cost time:",e+"s"," , per frame cost time ave:"+t+"s")},t.prototype.log=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.addLog.apply(this,e),this.sendLog()},t.prototype.ready=function(){console.log(t.VERSION)},t.prototype.initLog=function(e){var n=this;cc.director.once(cc.Director.EVENT_AFTER_SCENE_LAUNCH,function(){n.frameTimes=0,n.now=Date.now(),n.startTime=Date.now()},this),cc.director.on(cc.Director.EVENT_AFTER_DRAW,function(){n.frameTimes++,n.totalFrames++,n.frameTimes>=n.Frame&&(n.frameTimes=0,n.now=Date.now())},this),this.logFunc=e,window.consoleError=console.error,window.consoleWarn=console.warn,window.consoleLog=console.log,window.consoleAssert=console.assert,console.error=function(){for(var e,n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];(e=t.inst).log.apply(e,["[ERROR]"].concat(n))},console.warn=function(){for(var e,n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];(e=t.inst).log.apply(e,["[WARN]"].concat(n))},console.log=function(){for(var e,n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];(e=t.inst).log.apply(e,["[INFO]"].concat(n))},console.assert=function(e){for(var n,i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];e||(n=t.inst).log.apply(n,["[ASSERT ERROR]"].concat(i))}},t.prototype.formatLogArguments=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n="",i=0;i<arguments.length;i++){var o=typeof arguments[i];"string"==o||"number"==o?n+=" "+arguments[i]:"object"==o?n+=" "+JSON.stringify(arguments[i]):"boolean"==o&&arguments[i].toString&&(n+=arguments[i].toString())}return n},t.prototype.addLog=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];null==this.logMsg&&(this.logMsg={});var i=this.formatLogArguments.apply(this,e),o=this.getFullTime(new Date);this.logMsg[o]=t.VERSION+i},t.prototype.getFullTime=function(e){var t="";t+=e.getFullYear();var n=e.getMonth()+1;t+="-"+(n>=10?n:"0"+n);var i=e.getDate();t+="-"+(i>=10?i:"0"+i);var o=e.getHours();t+="  "+(o>=10?o:"0"+o);var a=e.getMinutes();t+=":"+(a>=10?a:"0"+a);var r=e.getSeconds();return t+=":"+(r>=10?r:"0"+r)},t.prototype.sendLog=function(){this.logFunc&&null!=this.logMsg&&(this.logFunc(JSON.stringify(this.logMsg)),this.logMsg=null)},t.prototype.triggerClose=function(e){this.addLog("triggerClose"),this.sendLog()},t.prototype.triggerLoad=function(e){this.addLog("triggerLoad"),this.sendLog()},t.prototype.triggerUnload=function(e){this.addLog("triggerUnload"),this.sendLog()},t.prototype.triggerOnunload=function(e){this.addLog("triggerUnload"),this.sendLog()},t.prototype.triggerError=function(e){this.addLog("triggerError"),this.addLog(e.message),this.sendLog()},t.prototype.triggerFocus=function(e){this.addLog("triggerFocus"),this.sendLog()},t.prototype.triggerBlur=function(e){this.addLog("triggerBlur"),this.sendLog()},t.prototype.triggerAbort=function(e){this.addLog("triggerAbort"),this.sendLog()},t.prototype.triggerSuspend=function(e){this.addLog("triggerSuspend"),this.sendLog()},t.prototype.beforeunload=function(e){this.addLog("beforeunload"),this.sendLog()},t.VERSION=window.GAME_VERSION||" --- ",t.LISTENNING_EVENTS=["error"],t}(e("./ToSingleton").SingleTon());n.LogHandler=i,cc._RF.pop()},{"./ToSingleton":"ToSingleton"}],MenuButton:[function(e,t,n){"use strict";cc._RF.push(t,"8e30c99kDREPpBsFhV0nIx7","MenuButton"),Object.defineProperty(n,"__esModule",{value:!0});var i=e("./PauseLayer"),o=cc._decorator,a=o.ccclass,r=(o.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onLoad=function(){this.node.on(cc.Node.EventType.TOUCH_END,function(){i.ShowPauseSignal.inst.dispatch()},this)},t=__decorate([a],t)}(cc.Component));n.default=r,cc._RF.pop()},{"./PauseLayer":"PauseLayer"}],OverLayer:[function(e,t,n){"use strict";cc._RF.push(t,"8f707WQwS1B94AJLjJYdvIF","OverLayer"),Object.defineProperty(n,"__esModule",{value:!0});var i,o=e("./GameMgr"),a=e("../table"),r=e("../Controller/EventManager"),s=e("../Controller/EventName"),c=e("../Utils/Celer/CelerSDK"),l=e("./GameScene"),u=e("../TableManager"),h=cc._decorator,d=h.ccclass,p=h.property;(function(e){e[e.ready=0]="ready",e[e.total=2]="total",e[e.line=4]="line",e[e.combo=8]="combo",e[e.best=16]="best",e[e.wild=32]="wild",e[e.most=64]="most",e[e.done=124]="done",e[e.submit=126]="submit"})(i||(i={}));var g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.TotalScoreLabel=null,t.totalScore=0,t.showTotal=!1,t.LineScoreLabel=null,t.LineLabel=null,t.lineScore=0,t.showLine=!1,t.ComboScoreLabel=null,t.ComboLabel=null,t.comboScore=0,t.showCombo=!1,t.BestScoreLabel=null,t.BestLabel=null,t.bestScore=0,t.showBest=!1,t.WildScoreLabel=null,t.WildLabel=null,t.wildScore=0,t.showWild=!1,t.MostScoreLabel=null,t.MostLabel=null,t.mostScore=0,t.showMost=!1,t.BestIcon=null,t.Wild_A=null,t.Wild_B=null,t.MostIcon=null,t.Submit=null,t.step=i.ready,t.scoreAdd=10,t.alreadySumbit=!1,t}return __extends(t,e),Object.defineProperty(t.prototype,"FinalScore",{get:function(){return this.node.getChildByName("FinalScore").getComponent(cc.RichText)},enumerable:!0,configurable:!0}),t.prototype.onLoad=function(){var e=this;console.log(" over layer onload"),this.FinalScore.string=lan.t(a.En_View.JieSuanJieMian,a.En_ID.ZuiZhongDeFen),this.totalScore=0,this.TotalScoreLabel.string="0",this.lineScore=0,this.LineScoreLabel.string="0",this.LineLabel.string=lan.t(a.En_View.JieSuanJieMian,a.En_ID.XiaoChuDeHangShu),this.comboScore=0,this.ComboScoreLabel.string="0",this.ComboLabel.string=lan.t(a.En_View.JieSuanJieMian,a.En_ID.LianXiaoDeFen),this.wildScore=0,this.WildScoreLabel.string="0",this.WildLabel.string=lan.t(a.En_View.JieSuanJieMian,a.En_ID.DaoJuDeFen),this.bestScore=0,this.BestScoreLabel.string="0",this.BestLabel.string=lan.t(a.En_View.JieSuanJieMian,a.En_ID.ZuiHaoDeDeFen),this.mostScore=0,this.MostScoreLabel.string="0",this.MostLabel.string=lan.t(a.En_View.JieSuanJieMian,a.En_ID.ZuiYouChanChuDeFen),this.BestIcon.node.active=!1,this.Wild_A.node.active=!1,this.Wild_B.node.active=!1,this.MostIcon.node.active=!1,this.showBest=!1,this.showCombo=!1,this.showLine=!1,this.showMost=!1,this.showWild=!1,this.showTotal=!1,this.resultData=o.Game.getResultData(),this.scoreAdd=Math.max(10,Math.floor(this.resultData.totalScore/100)),this.Submit.node.scale=0,this.step=i.ready,this.Submit.node.on(cc.Node.EventType.TOUCH_END,function(){e.alreadySumbit||(e.alreadySumbit=!0,console.log(" submit score by click, matchid:",o.Game.MatchInfo.matchId,", seed:",o.Game.MatchInfo.sharedRandomSeed),c.CelerSDK.inst.submitScore(e.resultData.totalScore))},this),r.gEventMgr.emit(s.GlobalEvent.CLEAR_CUBE_ROOT),r.gEventMgr.emit(s.GlobalEvent.PLAY_OVER)},t.prototype.start=function(){},t.prototype.update=function(e){this.showLine&&(this.lineScore<this.resultData.killCol+this.resultData.killRow?this.lineScore+=this.scoreAdd:(this.lineScore=this.resultData.killCol+this.resultData.killRow,this.next(i.line),this.showLine=!1),this.LineScoreLabel.string=this.lineScore.toString()),this.showCombo&&(this.comboScore<this.resultData.comboScore?this.comboScore+=this.scoreAdd:(this.comboScore=this.resultData.comboScore,this.next(i.combo),this.showCombo=!1),this.ComboScoreLabel.string=this.comboScore.toString()),this.showBest&&(0!=this.resultData.bestFruitID&&this.resultData.fruitScore[this.resultData.bestFruitID]&&this.bestScore<this.resultData.fruitScore[this.resultData.bestFruitID]?this.bestScore+=this.scoreAdd:(this.bestScore=this.resultData.fruitScore[this.resultData.bestFruitID]||0,this.next(i.best),this.showBest=!1),this.BestScoreLabel.string=this.bestScore.toString()),this.showWild&&(this.wildScore<this.resultData.wildScore?this.wildScore+=this.scoreAdd:(this.wildScore=this.resultData.wildScore,this.next(i.wild),this.showWild=!1),this.WildScoreLabel.string=this.wildScore.toString()),this.showMost&&(0!=this.resultData.mostFruitID&&this.resultData.fruitScore[this.resultData.mostFruitID]&&this.mostScore<this.resultData.fruitScore[this.resultData.mostFruitID]?this.mostScore+=this.scoreAdd:(this.mostScore=this.resultData.fruitScore[this.resultData.mostFruitID]||0,this.next(i.most),this.showMost=!1),this.MostScoreLabel.string=this.mostScore.toString()),this.showTotal&&(this.totalScore<this.resultData.totalScore?this.totalScore+=this.scoreAdd:(this.totalScore=this.resultData.totalScore,this.next(i.total),this.showTotal=!1,r.gEventMgr.emit(s.GlobalEvent.PLAY_SCORE,!1)),this.TotalScoreLabel.string=this.totalScore.toString())},t.prototype.next=function(e){var t=this;this.step|=e,console.log("Step :",i[this.step]," Done:",i.done),this.step>=i.done&&this.step<i.submit&&(this.showTotal=!0,this.resultData.totalScore>0&&r.gEventMgr.emit(s.GlobalEvent.PLAY_SCORE,!0)),this.step>=i.submit&&(this.Submit.node.runAction(cc.sequence(cc.scaleTo(.1,1.2),cc.scaleTo(.1,1),cc.scaleTo(.1,1.1),cc.scaleTo(.1,1))),setTimeout(function(){t.alreadySumbit||(t.alreadySumbit=!0,console.log(" submit score by setTimeout, matchid:",o.Game.MatchInfo.matchId,", seed:",o.Game.MatchInfo.sharedRandomSeed),c.CelerSDK.inst.submitScore(t.resultData.totalScore))},3e3))},t.prototype.showLineScore=function(){this.showLine=!0},t.prototype.playOverTab=function(){r.gEventMgr.emit(s.GlobalEvent.PLAY_OVER_TAB)},t.prototype.showComboScore=function(){this.showCombo=!0},t.prototype.showBestScore=function(){var e;this.showBest=!0,0!=this.resultData.bestFruitID&&(e=u.TableManager.inst.getFruits(this.resultData.bestFruitID)),e&&(this.BestIcon.node.active=!0,this.BestIcon.spriteFrame=l.default.UIAtlas.getSpriteFrame(e.Icon))},t.prototype.showWildScore=function(){this.showWild=!0,this.Wild_A.node.active=this.resultData.Wild_A,this.Wild_B.node.active=this.resultData.Wild_B,this.Wild_A.node.active&&!this.Wild_B.node.active&&(this.Wild_A.node.x=this.Wild_B.node.x)},t.prototype.showMostScore=function(){if(this.showMost=!0,0!=this.resultData.mostFruitID){var e=u.TableManager.inst.getFruits(this.resultData.mostFruitID);e&&(this.MostIcon.node.active=!0,this.MostIcon.spriteFrame=l.default.UIAtlas.getSpriteFrame(e.Icon))}},__decorate([p(cc.Label)],t.prototype,"TotalScoreLabel",void 0),__decorate([p(cc.Label)],t.prototype,"LineScoreLabel",void 0),__decorate([p(cc.RichText)],t.prototype,"LineLabel",void 0),__decorate([p(cc.Label)],t.prototype,"ComboScoreLabel",void 0),__decorate([p(cc.RichText)],t.prototype,"ComboLabel",void 0),__decorate([p(cc.Label)],t.prototype,"BestScoreLabel",void 0),__decorate([p(cc.RichText)],t.prototype,"BestLabel",void 0),__decorate([p(cc.Label)],t.prototype,"WildScoreLabel",void 0),__decorate([p(cc.RichText)],t.prototype,"WildLabel",void 0),__decorate([p(cc.Label)],t.prototype,"MostScoreLabel",void 0),__decorate([p(cc.RichText)],t.prototype,"MostLabel",void 0),__decorate([p(cc.Sprite)],t.prototype,"BestIcon",void 0),__decorate([p(cc.Sprite)],t.prototype,"Wild_A",void 0),__decorate([p(cc.Sprite)],t.prototype,"Wild_B",void 0),__decorate([p(cc.Sprite)],t.prototype,"MostIcon",void 0),__decorate([p(cc.Button)],t.prototype,"Submit",void 0),t=__decorate([d],t)}(cc.Component);n.default=g,cc._RF.pop()},{"../Controller/EventManager":"EventManager","../Controller/EventName":"EventName","../TableManager":"TableManager","../Utils/Celer/CelerSDK":"CelerSDK","../table":"table","./GameMgr":"GameMgr","./GameScene":"GameScene"}],PauseLayer:[function(e,t,n){"use strict";cc._RF.push(t,"0ef4cby+PxEO7p+kagSCgOh","PauseLayer"),Object.defineProperty(n,"__esModule",{value:!0});var i=e("../AdLayer"),o=e("../Controller/EventManager"),a=e("../Controller/EventName"),r=e("../Game/GameMgr"),s=e("../Game/GameScene"),c=e("../table"),l=e("../Utils/Signal"),u=cc._decorator,h=u.ccclass,d=u.property,p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(l.BaseSignal);n.ShowPauseSignal=p;var g=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(l.BaseSignal);n.PauseScoreUpdate=g;var f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.pauseCount=3,t.EndNow=null,t.Help=null,t.Resume=null,t.Sound=null,t.GuidePage=null,t.ButtonNode=null,t.isFree=!1,t}return __extends(t,e),Object.defineProperty(t.prototype,"Content",{get:function(){return this.node.getChildByName("Content").getComponent(cc.RichText)},enumerable:!0,configurable:!0}),t.prototype.onLoad=function(){var e=this;this.node.active=!1,this.node.scale=0,p.inst.addListenerOne(this.Show,this),i.HideSubmitLayerSignal.inst.addListener(function(){e.close(!0)},this),this.Resume.on(cc.Node.EventType.TOUCH_END,function(){e.close(e.isFree)},this),this.EndNow.on(cc.Node.EventType.TOUCH_END,function(){console.log(" end now"),e.close(!0),r.Game.gameOver(r.OverType.NO_PLACE),o.gEventMgr.emit(a.GlobalEvent.PLAY_OVER_NO_PLACE)},this),this.Sound.on(cc.Node.EventType.TOUCH_END,function(){cc.audioEngine.getMusicVolume()>0?(cc.audioEngine.setMusicVolume(0),cc.audioEngine.setEffectsVolume(0)):(cc.audioEngine.setMusicVolume(1),cc.audioEngine.setEffectsVolume(1)),e.updateSound()},this),this.Help.on(cc.Node.EventType.TOUCH_END,function(){e.GuidePage.node.active=!0,e.ButtonNode.active=!0,e.GuidePage.setCurrentPageIndex(0),e.GuidePage.node.scale=.9},this)},t.prototype.Show=function(e){void 0===e&&(e=!1),this.node.active||(this.isFree=e,this.node.active=!0,this.node.scale=1,this.pauseCount>0?this.Content.string=lan.t(c.En_View.ZanTingJieMian,c.En_ID.MianFeiZanTing,[this.pauseCount.toString(),"500"]):this.Content.string=lan.t(c.En_View.ZanTingJieMian,c.En_ID.ZanTingKouFen,["500"]),this.updateSound())},t.prototype.updateSound=function(){cc.audioEngine.getMusicVolume()>0?this.Sound.getComponent(cc.Sprite).spriteFrame=s.default.UIAtlas.getSpriteFrame("btn_sound"):this.Sound.getComponent(cc.Sprite).spriteFrame=s.default.UIAtlas.getSpriteFrame("btn_soundno")},t.prototype.close=function(e){var t=this;void 0===e&&(e=!1),0!=this.node.active&&(console.log(" close :",e),1!=e&&(this.pauseCount--,this.pauseCount<0&&(r.Game.addScore(-500),g.inst.dispatch())),setTimeout(function(){t.node.active=!1},0))},__decorate([d(cc.Node)],t.prototype,"EndNow",void 0),__decorate([d(cc.Node)],t.prototype,"Help",void 0),__decorate([d(cc.Node)],t.prototype,"Resume",void 0),__decorate([d(cc.Node)],t.prototype,"Sound",void 0),__decorate([d(cc.PageView)],t.prototype,"GuidePage",void 0),__decorate([d(cc.Node)],t.prototype,"ButtonNode",void 0),t=__decorate([h],t)}(cc.Component);n.default=f,cc._RF.pop()},{"../AdLayer":"AdLayer","../Controller/EventManager":"EventManager","../Controller/EventName":"EventName","../Game/GameMgr":"GameMgr","../Game/GameScene":"GameScene","../Utils/Signal":"Signal","../table":"table"}],Random:[function(e,t,n){"use strict";cc._RF.push(t,"114f9Vox8JGQbohBr4HFlkf","Random"),Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(){}return e.seededRandom=function(e,t,n){return t+1e6*((1711*e+88888)%302654/302654+(1722*e+55555)%302665/302665+(1755*e+23333)%302766/302766)%1e6/1e6*(n-t)},e.getRandom=function(e,t){void 0===e&&(e=0),void 0===t&&(t=1);var n=this.randomSeed,i=this.seededRandom(n,e,t),o=Math.floor(this.seededRandom(n,1,302766));return this.randomSeed+=o,i},e.setRandomSeed=function(e){console.log(" set random seed:",e),this.randomSeed=e,this.sharedSeed=e},e.randomRoundToInt=function(e,t){return void 0===e&&(e=0),void 0===t&&(t=1),Math.round(this.getRandom(e,t))},e.randomFloorToInt=function(e,t){return void 0===e&&(e=0),void 0===t&&(t=1),Math.floor(this.getRandom(e,t))},e.randomCeilToInt=function(e,t){return void 0===e&&(e=0),void 0===t&&(t=1),Math.ceil(this.getRandom(e,t))},e.clamp=function(e,t,n){return Math.max(t,Math.min(e,n))},e.randomSeed=Math.random(),e.sharedSeed=Math.random(),e}();n.Random=i,cc._RF.pop()},{}],Signal:[function(e,t,n){"use strict";cc._RF.push(t,"5e03fyVNOZPs7lLvT6ttunM","Signal"),Object.defineProperty(n,"__esModule",{value:!0});var i=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.listenerMap=[],t.onceListenerMap=[],t}return __extends(t,e),t.prototype.doDispatch=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.excuteListener.apply(this,e),this.excuteOnce.apply(this,e)},t.prototype.excuteListener=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(this.listenerMap&&this.listenerMap.length>0)for(var n=0,i=this.listenerMap;n<i.length;n++){var o=i[n];o.callback.apply(o.target,e)}},t.prototype.excuteOnce=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(this.onceListenerMap&&this.onceListenerMap.length>0){for(var n=0,i=this.onceListenerMap;n<i.length;n++){var o=i[n];o.callback.apply(o.target,e)}this.onceListenerMap.length=0}},t.prototype.listen=function(e,t){this.listenerMap.push({callback:e,target:t})},t.prototype.listenOnce=function(e,t){this.onceListenerMap.push({callback:e,target:t})},t.prototype.removeListener=function(e,t){if(this.listenerMap&&this.listenerMap.length>0)for(var n=0;n<this.listenerMap.length;++n){var i=this.listenerMap[n];i.callback==e&&i.target==t&&(this.listenerMap.splice(n,1),--n)}},t.prototype.removeTarget=function(e){if(this.listenerMap&&this.listenerMap.length>0)for(var t=0;t<this.listenerMap.length;++t){this.listenerMap[t].target==e&&(this.listenerMap.splice(t,1),--t)}},t.prototype.dispatch=function(){this.doDispatch(null)},t.prototype.dispatchOne=function(e){this.doDispatch(e)},t.prototype.dispatchTwo=function(e,t){this.doDispatch(e,t)},t.prototype.dispatchThree=function(e,t,n){this.doDispatch(e,t,n)},t.prototype.dispatchFour=function(e,t,n,i){this.doDispatch(e,t,n,i)},t.prototype.dispatchFive=function(e,t,n,i,o){this.doDispatch(e,t,n,i,o)},t.prototype.addListener=function(e,t){this.listen(e,t)},t.prototype.addOnce=function(e,t){this.listenOnce(e,t)},t.prototype.addListenerOne=function(e,t){this.listen(e,t)},t.prototype.addListenerTwo=function(e,t){this.listen(e,t)},t.prototype.addListenerThree=function(e,t){this.listen(e,t)},t.prototype.addListenerFour=function(e,t){this.listen(e,t)},t.prototype.addListenerFive=function(e,t){this.listen(e,t)},t.prototype.addOnceOne=function(e,t){this.listenOnce(e,t)},t.prototype.addOnceTwo=function(e,t){this.listenOnce(e,t)},t.prototype.addOnceThree=function(e,t){this.listenOnce(e,t)},t.prototype.addOnceFour=function(e,t){this.listenOnce(e,t)},t.prototype.addOnceFive=function(e,t){this.listenOnce(e,t)},t}(e("./ToSingleton").SingleTon());n.BaseSignal=i,cc._RF.pop()},{"./ToSingleton":"ToSingleton"}],SingleTouchMediator:[function(e,t,n){"use strict";cc._RF.push(t,"6bb34/iv9VB57ldfuNfXqaH","SingleTouchMediator"),Object.defineProperty(n,"__esModule",{value:!0});var i=cc._decorator,o=i.ccclass,a=(i.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._touchid=null,t}return __extends(t,e),t.prototype.bind=function(e){this.view=e},Object.defineProperty(t.prototype,"View",{get:function(){return console.assert(null!=this.view," view is null"),this.view},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"touchid",{get:function(){return this._touchid},set:function(e){this._touchid=e,window.OpenTouchIDlog&&console.log(this.node.name," touchid :",this._touchid)},enumerable:!0,configurable:!0}),t.prototype.onRegister=function(){this.node.targetOff(this),this.node._onSetParent=this._onSetParent.bind(this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this.touchCancel,this),this.node.on(cc.Node.EventType.TOUCH_END,this.touchEnd,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this.touchMove,this),this.node.on(cc.Node.EventType.TOUCH_START,this.touchStart,this)},t.prototype.onUnregister=function(){this.node.targetOff(this)},t.prototype.touchStart=function(e){if(null!==this.touchid&&this.touchid!==e.getID())return console.log(this.node.name," touch start  touchid is different: ",this.touchid,e.getID()),void e.stopPropagation();this.touchid=e.getID(),this.onTouchStart(e)},t.prototype.touchMove=function(e){null===this.touchid||this.touchid===e.getID()?(this.touchid=e.getID(),this.onTouchMove(e)):e.stopPropagation()},t.prototype.touchEnd=function(e){if(null!==this.touchid&&this.touchid!==e.getID())return console.log(this.node.name," touch end  touchid is different: ",this.touchid,e.getID()),void e.stopPropagation();null!=this.touchid?(this.touchid=null,this.onTouchEnd(e),this.OnClick()):e.stopPropagation()},t.prototype.touchCancel=function(e){if(null!==this.touchid&&this.touchid!==e.getID())return console.log(this.node.name," touch cancel  touchid is different: ",this.touchid,e.getID()),void e.stopPropagation();null!=this.touchid?(this.touchid=null,this.onTouchCancel(e)):e.stopPropagation()},t.prototype.OnClick=function(){},t.prototype.onTouchStart=function(e){},t.prototype.onTouchMove=function(e){},t.prototype.onTouchEnd=function(e){},t.prototype.onTouchCancel=function(e){},t.prototype.onSetParent=function(e){},t.prototype._onSetParent=function(e){null==e&&(this.touchid=null),this.onSetParent(e)},t=__decorate([o],t)}(cc.Component));n.default=a,cc._RF.pop()},{}],SingleTouchView:[function(e,t,n){"use strict";cc._RF.push(t,"a25bc3NyYtIz4AXK6P5+frA","SingleTouchView"),Object.defineProperty(n,"__esModule",{value:!0});var i=e("./BaseView"),o=cc._decorator,a=o.ccclass,r=(o.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._touchid=null,t}return __extends(t,e),Object.defineProperty(t.prototype,"touchid",{get:function(){return this._touchid},set:function(e){this._touchid=e,window.OpenTouchIDlog&&console.log(this.node.name," touchid :",this._touchid)},enumerable:!0,configurable:!0}),t.prototype.onLoad=function(){this.node._onSetParent=this._onSetParent.bind(this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this.touchCancel,this),this.node.on(cc.Node.EventType.TOUCH_END,this.touchEnd,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this.touchMove,this),this.node.on(cc.Node.EventType.TOUCH_START,this.touchStart,this)},t.prototype.start=function(){},t.prototype.touchStart=function(e){null===this.touchid||this.touchid===e.getID()?(this.touchid=e.getID(),this.onTouchStart(e)):console.log(this.node.name," touch start  touchid is different! ")},t.prototype.touchMove=function(e){null!==this.touchid&&this.touchid!==e.getID()||(this.touchid=e.getID(),this.onTouchMove(e))},t.prototype.touchEnd=function(e){null===this.touchid||this.touchid===e.getID()?(this.touchid=null,this.onTouchEnd(e)):console.log(this.node.name," touch end  touchid is different! ")},t.prototype.touchCancel=function(e){null===this.touchid||this.touchid===e.getID()?(this.touchid=null,this.onTouchCancel(e)):console.log(this.node.name," touch cancel  touchid is different! ")},t.prototype.onTouchStart=function(e){},t.prototype.onTouchMove=function(e){},t.prototype.onTouchEnd=function(e){},t.prototype.onTouchCancel=function(e){},t.prototype.onSetParent=function(e){},t.prototype._onSetParent=function(e){null==e&&(this.touchid=null),this.onSetParent(e)},t=__decorate([a],t)}(i.default));n.default=r,cc._RF.pop()},{"./BaseView":"BaseView"}],TableManager:[function(e,t,n){"use strict";cc._RF.push(t,"a1c22H7/IZOeZUFxIW13vFm","TableManager"),Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(){this.load=e.JSON_URL&&""!=e.JSON_URL?cc.loader.load.bind(cc.loader):cc.loader.loadRes.bind(cc.loader),this.fileFormat=e.JSON_URL&&""!=e.JSON_URL?".json?time="+Date.now():"",this.total=0,this.complete=0,this.En={},this.Es={},this.Fil={},this.Fruits={},this.Id={},this.In={},this.Pt={},this.Shape={},this.ShapeWeight={},this.Tl={}}return Object.defineProperty(e,"inst",{get:function(){return this.ins?this.ins:this.ins=new e},enumerable:!0,configurable:!0}),e.prototype.startLoad=function(t,n,i){this.completeCallback=n,this.progressCallback=i;var o=this;console.log("Base URL:",e.JSON_URL),this.load(e.JSON_URL+t.trim().split("/").join("")+"/file_list"+this.fileFormat,function(e,n){if(e)console.error(e.errorMessage);else{var i="Array"==n.constructor.name?n:n.json;this.total=i.length;for(var a=0,r=i;a<r.length;a++){var s=r[a];o.loadJson(t.trim().split("/").join("")+"/"+s.replace(".json",""))}}}.bind(this))},e.prototype.loadJson=function(t){console.log("start load:"+t);var n=this,i=t.split("/")[1];i=i.charAt(0).toUpperCase()+i.slice(1,i.length),this.load(e.JSON_URL+t+this.fileFormat,function(e,t){if(e)console.error(e.errorMessage);else{for(var o=0,a="Array"==t.constructor.name?t:t.json;o<a.length;o++){var r=a[o];n[i][r.ID]=r}n.completeLoad()}}.bind(this))},e.prototype.completeLoad=function(){this.complete++,this.progressCallback&&this.progressCallback(this.complete/this.total),this.complete>=this.total&&this.completeCallback&&this.completeCallback()},e.prototype.getEn=function(e){return this.En[e]?this.En[e]:(console.error("En \u4e0d\u5b58key\uff1a"+e),null)},e.prototype.getAll_En_Data=function(){return this.En},e.prototype.getEs=function(e){return this.Es[e]?this.Es[e]:(console.error("Es \u4e0d\u5b58key\uff1a"+e),null)},e.prototype.getAll_Es_Data=function(){return this.Es},e.prototype.getFil=function(e){return this.Fil[e]?this.Fil[e]:(console.error("Fil \u4e0d\u5b58key\uff1a"+e),null)},e.prototype.getAll_Fil_Data=function(){return this.Fil},e.prototype.getFruits=function(e){return this.Fruits[e]?this.Fruits[e]:(console.error("Fruits \u4e0d\u5b58key\uff1a"+e),null)},e.prototype.getAll_Fruits_Data=function(){return this.Fruits},e.prototype.getId=function(e){return this.Id[e]?this.Id[e]:(console.error("Id \u4e0d\u5b58key\uff1a"+e),null)},e.prototype.getAll_Id_Data=function(){return this.Id},e.prototype.getIn=function(e){return this.In[e]?this.In[e]:(console.error("In \u4e0d\u5b58key\uff1a"+e),null)},e.prototype.getAll_In_Data=function(){return this.In},e.prototype.getPt=function(e){return this.Pt[e]?this.Pt[e]:(console.error("Pt \u4e0d\u5b58key\uff1a"+e),null)},e.prototype.getAll_Pt_Data=function(){return this.Pt},e.prototype.getShape=function(e){return this.Shape[e]?this.Shape[e]:(console.error("Shape \u4e0d\u5b58key\uff1a"+e),null)},e.prototype.getAll_Shape_Data=function(){return this.Shape},e.prototype.getShapeWeight=function(e){return this.ShapeWeight[e]?this.ShapeWeight[e]:(console.error("ShapeWeight \u4e0d\u5b58key\uff1a"+e),null)},e.prototype.getAll_ShapeWeight_Data=function(){return this.ShapeWeight},e.prototype.getTl=function(e){return this.Tl[e]?this.Tl[e]:(console.error("Tl \u4e0d\u5b58key\uff1a"+e),null)},e.prototype.getAll_Tl_Data=function(){return this.Tl},e.JSON_URL="",e}();n.TableManager=i,cc._RF.pop()},{}],Time:[function(e,t,n){"use strict";cc._RF.push(t,"87a24xcV95AoII6L5W1ABoI","Time"),Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(){}return e.timeFormat=function(e){var t=Math.floor(e/60),n=Math.floor(e%60),i=n.toString();return n<10&&(i="0"+n),t+"/"+i},e}();n.Time=i,cc._RF.pop()},{}],ToSingleton:[function(e,t,n){"use strict";cc._RF.push(t,"b07299nlSpOIIxOkIMBhUY9","ToSingleton"),Object.defineProperty(n,"__esModule",{value:!0}),n.SingleTon=function(){return function(){function e(){}return Object.defineProperty(e,"inst",{get:function(){return this.ins?this.ins:this.ins=new this},enumerable:!0,configurable:!0}),e}()},cc._RF.pop()},{}],TurnSunAnimation:[function(e,t,n){"use strict";cc._RF.push(t,"6afa1BM3CVApoIzdGFCgbUZ","TurnSunAnimation"),Object.defineProperty(n,"__esModule",{value:!0});var i=e("../Utils/FrameAniBase"),o=cc._decorator,a=o.ccclass,r=(o.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t=__decorate([a],t)}(i.default));n.default=r,cc._RF.pop()},{"../Utils/FrameAniBase":"FrameAniBase"}],WildAdAnimation:[function(e,t,n){"use strict";cc._RF.push(t,"6a980h9fT9DAIqE4lWKP4Fq","WildAdAnimation"),Object.defineProperty(n,"__esModule",{value:!0});var i=e("../Utils/FrameAniBase"),o=e("../Utils/Signal"),a=cc._decorator,r=a.ccclass,s=(a.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(o.BaseSignal));n.WildAdAnimationIsPlaySignal=s;var c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.isStart=!1,t}return __extends(t,e),t.prototype.onStartPlay=function(){var e=this;s.inst.dispatchOne(!0),0==this.isStart&&(this.isStart=!0,setTimeout(function(){e.isStart=!1,e.stop(),e.node.opacity=0,s.inst.dispatchOne(!1),setTimeout(function(){e.node.opacity=255,e.Loop=!0,e.play()},8e3)},2e3))},t.prototype.onComplete=function(){},t=__decorate([r],t)}(i.default);n.default=c,cc._RF.pop()},{"../Utils/FrameAniBase":"FrameAniBase","../Utils/Signal":"Signal"}],WildAdButton:[function(e,t,n){"use strict";cc._RF.push(t,"dcd75ORe3hJ3pjOGdtWlS5H","WildAdButton"),Object.defineProperty(n,"__esModule",{value:!0});var i=e("./Animation/WildAdAnimation"),o=e("./Utils/Signal"),a=cc._decorator,r=a.ccclass,s=(a.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(o.BaseSignal));n.HideWildAdButtonSignal=s;var c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(o.BaseSignal);n.WildAdButtonClick=c;var l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(o.BaseSignal);n.WildButtonReadySignal=l;var u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.defaultScale=1,t}return __extends(t,e),t.prototype.onLoad=function(){var e=this;this.node.active=cc.sys.isMobile&&cc.sys.isBrowser&&cc.sys.os==cc.sys.OS_ANDROID,this.node.scale=0,l.inst.addOnce(function(){console.log(" Wild button :",e.node.active),e.node.active&&(e.node.getComponent(cc.Button).transition=cc.Button.Transition.NONE,e.node.runAction(cc.sequence(cc.scaleTo(.1,e.defaultScale),cc.callFunc(function(){e.initial()}))))},this),s.inst.addListener(function(){e.node.active=!1},this)},t.prototype.initial=function(){var e=this;this.node.getComponent(cc.Button).transition=cc.Button.Transition.SCALE,this.node.on(cc.Node.EventType.TOUCH_END,function(){c.inst.dispatch()},this),i.WildAdAnimationIsPlaySignal.inst.addListenerOne(function(t){t?e.node.runAction(cc.repeatForever(cc.sequence(cc.scaleTo(.05*3,1.2),cc.scaleTo(.05*3,1)))):(e.node.stopAllActions(),e.node.scale=e.defaultScale)},this)},t=__decorate([r],t)}(cc.Component);n.default=u,cc._RF.pop()},{"./Animation/WildAdAnimation":"WildAdAnimation","./Utils/Signal":"Signal"}],table:[function(e,t,n){"use strict";cc._RF.push(t,"adcebipSrZMgb1UHOlwts9Z","table"),Object.defineProperty(n,"__esModule",{value:!0}),function(e){e[e.ZanTingMiaoShu=1]="ZanTingMiaoShu",e[e.MianFeiZanTing=2]="MianFeiZanTing",e[e.ZanTingKouFen=3]="ZanTingKouFen",e[e.MianFeiDaoJu=4]="MianFeiDaoJu",e[e.SuiJiQingChuJiangLi=5]="SuiJiQingChuJiangLi",e[e.KanGuangGaoShiBai=6]="KanGuangGaoShiBai",e[e.BangZhuYeMian1=7]="BangZhuYeMian1",e[e.BangZhuYeMian2=8]="BangZhuYeMian2",e[e.BangZhuYeMian3=9]="BangZhuYeMian3",e[e.BangZhuYeMian4=10]="BangZhuYeMian4",e[e.ZuiZhongDeFen=11]="ZuiZhongDeFen",e[e.XiaoChuDeHangShu=12]="XiaoChuDeHangShu",e[e.LianXiaoDeFen=13]="LianXiaoDeFen",e[e.ZuiHaoDeDeFen=14]="ZuiHaoDeDeFen",e[e.DaoJuDeFen=15]="DaoJuDeFen",e[e.ZuiYouChanChuDeFen=16]="ZuiYouChanChuDeFen"}(n.En_ID||(n.En_ID={})),function(e){e[e.ZanTingJieMian=100]="ZanTingJieMian",e[e.BangZhuJieMian=200]="BangZhuJieMian",e[e.GuangGaoJieMian=300]="GuangGaoJieMian",e[e.JieSuanJieMian=400]="JieSuanJieMian"}(n.En_View||(n.En_View={})),function(e){e[e.ZanTingMiaoShu=1]="ZanTingMiaoShu",e[e.MianFeiZanTing=2]="MianFeiZanTing",e[e.ZanTingKouFen=3]="ZanTingKouFen",e[e.MianFeiDaoJu=4]="MianFeiDaoJu",e[e.SuiJiQingChuJiangLi=5]="SuiJiQingChuJiangLi",e[e.KanGuangGaoShiBai=6]="KanGuangGaoShiBai",e[e.BangZhuYeMian1=7]="BangZhuYeMian1",e[e.BangZhuYeMian2=8]="BangZhuYeMian2",e[e.BangZhuYeMian3=9]="BangZhuYeMian3",e[e.BangZhuYeMian4=10]="BangZhuYeMian4",e[e.ZuiZhongDeFen=11]="ZuiZhongDeFen",e[e.XiaoChuDeHangShu=12]="XiaoChuDeHangShu",e[e.LianXiaoDeFen=13]="LianXiaoDeFen",e[e.ZuiHaoDeDeFen=14]="ZuiHaoDeDeFen",e[e.DaoJuDeFen=15]="DaoJuDeFen",e[e.ZuiYouChanChuDeFen=16]="ZuiYouChanChuDeFen"}(n.Es_ID||(n.Es_ID={})),function(e){e[e.ZanTingJieMian=100]="ZanTingJieMian",e[e.BangZhuJieMian=200]="BangZhuJieMian",e[e.GuangGaoJieMian=300]="GuangGaoJieMian",e[e.JieSuanJieMian=400]="JieSuanJieMian"}(n.Es_View||(n.Es_View={})),function(e){e[e.ZanTingMiaoShu=1]="ZanTingMiaoShu",e[e.MianFeiZanTing=2]="MianFeiZanTing",e[e.ZanTingKouFen=3]="ZanTingKouFen",e[e.MianFeiDaoJu=4]="MianFeiDaoJu",e[e.SuiJiQingChuJiangLi=5]="SuiJiQingChuJiangLi",e[e.KanGuangGaoShiBai=6]="KanGuangGaoShiBai",e[e.BangZhuYeMian1=7]="BangZhuYeMian1",e[e.BangZhuYeMian2=8]="BangZhuYeMian2",e[e.BangZhuYeMian3=9]="BangZhuYeMian3",e[e.BangZhuYeMian4=10]="BangZhuYeMian4",e[e.ZuiZhongDeFen=11]="ZuiZhongDeFen",e[e.XiaoChuDeHangShu=12]="XiaoChuDeHangShu",e[e.LianXiaoDeFen=13]="LianXiaoDeFen",e[e.ZuiHaoDeDeFen=14]="ZuiHaoDeDeFen",e[e.DaoJuDeFen=15]="DaoJuDeFen",e[e.ZuiYouChanChuDeFen=16]="ZuiYouChanChuDeFen"}(n.Fil_ID||(n.Fil_ID={})),function(e){e[e.ZanTingJieMian=100]="ZanTingJieMian",e[e.BangZhuJieMian=200]="BangZhuJieMian",e[e.GuangGaoJieMian=300]="GuangGaoJieMian",e[e.JieSuanJieMian=400]="JieSuanJieMian"}(n.Fil_View||(n.Fil_View={})),function(e){e[e.ShuiGuo=1]="ShuiGuo",e[e.DaoJu=2]="DaoJu"}(n.Fruits_Type||(n.Fruits_Type={})),function(e){e[e.ZanTingMiaoShu=1]="ZanTingMiaoShu",e[e.MianFeiZanTing=2]="MianFeiZanTing",e[e.ZanTingKouFen=3]="ZanTingKouFen",e[e.MianFeiDaoJu=4]="MianFeiDaoJu",e[e.SuiJiQingChuJiangLi=5]="SuiJiQingChuJiangLi",e[e.KanGuangGaoShiBai=6]="KanGuangGaoShiBai",e[e.BangZhuYeMian1=7]="BangZhuYeMian1",e[e.BangZhuYeMian2=8]="BangZhuYeMian2",e[e.BangZhuYeMian3=9]="BangZhuYeMian3",e[e.BangZhuYeMian4=10]="BangZhuYeMian4",e[e.ZuiZhongDeFen=11]="ZuiZhongDeFen",e[e.XiaoChuDeHangShu=12]="XiaoChuDeHangShu",e[e.LianXiaoDeFen=13]="LianXiaoDeFen",e[e.ZuiHaoDeDeFen=14]="ZuiHaoDeDeFen",e[e.DaoJuDeFen=15]="DaoJuDeFen",e[e.ZuiYouChanChuDeFen=16]="ZuiYouChanChuDeFen"}(n.Id_ID||(n.Id_ID={})),function(e){e[e.ZanTingJieMian=100]="ZanTingJieMian",e[e.BangZhuJieMian=200]="BangZhuJieMian",e[e.GuangGaoJieMian=300]="GuangGaoJieMian",e[e.JieSuanJieMian=400]="JieSuanJieMian"}(n.Id_View||(n.Id_View={})),function(e){e[e.ZanTingMiaoShu=1]="ZanTingMiaoShu",e[e.MianFeiZanTing=2]="MianFeiZanTing",e[e.ZanTingKouFen=3]="ZanTingKouFen",e[e.MianFeiDaoJu=4]="MianFeiDaoJu",e[e.SuiJiQingChuJiangLi=5]="SuiJiQingChuJiangLi",e[e.KanGuangGaoShiBai=6]="KanGuangGaoShiBai",e[e.BangZhuYeMian1=7]="BangZhuYeMian1",e[e.BangZhuYeMian2=8]="BangZhuYeMian2",e[e.BangZhuYeMian3=9]="BangZhuYeMian3",e[e.BangZhuYeMian4=10]="BangZhuYeMian4",e[e.ZuiZhongDeFen=11]="ZuiZhongDeFen",e[e.XiaoChuDeHangShu=12]="XiaoChuDeHangShu",e[e.LianXiaoDeFen=13]="LianXiaoDeFen",e[e.ZuiHaoDeDeFen=14]="ZuiHaoDeDeFen",e[e.DaoJuDeFen=15]="DaoJuDeFen",e[e.ZuiYouChanChuDeFen=16]="ZuiYouChanChuDeFen"}(n.In_ID||(n.In_ID={})),function(e){e[e.ZanTingJieMian=100]="ZanTingJieMian",e[e.BangZhuJieMian=200]="BangZhuJieMian",e[e.GuangGaoJieMian=300]="GuangGaoJieMian",e[e.JieSuanJieMian=400]="JieSuanJieMian"}(n.In_View||(n.In_View={})),function(e){e[e.ZanTingMiaoShu=1]="ZanTingMiaoShu",e[e.MianFeiZanTing=2]="MianFeiZanTing",e[e.ZanTingKouFen=3]="ZanTingKouFen",e[e.MianFeiDaoJu=4]="MianFeiDaoJu",e[e.SuiJiQingChuJiangLi=5]="SuiJiQingChuJiangLi",e[e.KanGuangGaoShiBai=6]="KanGuangGaoShiBai",e[e.BangZhuYeMian1=7]="BangZhuYeMian1",e[e.BangZhuYeMian2=8]="BangZhuYeMian2",e[e.BangZhuYeMian3=9]="BangZhuYeMian3",e[e.BangZhuYeMian4=10]="BangZhuYeMian4",e[e.ZuiZhongDeFen=11]="ZuiZhongDeFen",e[e.XiaoChuDeHangShu=12]="XiaoChuDeHangShu",e[e.LianXiaoDeFen=13]="LianXiaoDeFen",e[e.ZuiHaoDeDeFen=14]="ZuiHaoDeDeFen",e[e.DaoJuDeFen=15]="DaoJuDeFen",e[e.ZuiYouChanChuDeFen=16]="ZuiYouChanChuDeFen"}(n.Pt_ID||(n.Pt_ID={})),function(e){e[e.ZanTingJieMian=100]="ZanTingJieMian",e[e.BangZhuJieMian=200]="BangZhuJieMian",e[e.GuangGaoJieMian=300]="GuangGaoJieMian",e[e.JieSuanJieMian=400]="JieSuanJieMian"}(n.Pt_View||(n.Pt_View={})),function(e){e[e.PuTongFangKuai=1]="PuTongFangKuai",e[e.TeShuDaoJu=2]="TeShuDaoJu"}(n.Shape_Type||(n.Shape_Type={})),function(e){e[e.ZanTingMiaoShu=1]="ZanTingMiaoShu",e[e.MianFeiZanTing=2]="MianFeiZanTing",e[e.ZanTingKouFen=3]="ZanTingKouFen",e[e.MianFeiDaoJu=4]="MianFeiDaoJu",e[e.SuiJiQingChuJiangLi=5]="SuiJiQingChuJiangLi",e[e.KanGuangGaoShiBai=6]="KanGuangGaoShiBai",e[e.BangZhuYeMian1=7]="BangZhuYeMian1",e[e.BangZhuYeMian2=8]="BangZhuYeMian2",e[e.BangZhuYeMian3=9]="BangZhuYeMian3",e[e.BangZhuYeMian4=10]="BangZhuYeMian4",e[e.ZuiZhongDeFen=11]="ZuiZhongDeFen",e[e.XiaoChuDeHangShu=12]="XiaoChuDeHangShu",e[e.LianXiaoDeFen=13]="LianXiaoDeFen",e[e.ZuiHaoDeDeFen=14]="ZuiHaoDeDeFen",e[e.DaoJuDeFen=15]="DaoJuDeFen",e[e.ZuiYouChanChuDeFen=16]="ZuiYouChanChuDeFen"}(n.Tl_ID||(n.Tl_ID={})),function(e){e[e.ZanTingJieMian=100]="ZanTingJieMian",e[e.BangZhuJieMian=200]="BangZhuJieMian",e[e.GuangGaoJieMian=300]="GuangGaoJieMian",e[e.JieSuanJieMian=400]="JieSuanJieMian"}(n.Tl_View||(n.Tl_View={})),cc._RF.pop()},{}]},{},["AdLayer","FlyCnicornAd","FlyAdCnicornAniamtion","TurnSunAnimation","WildAdAnimation","Config","AdController","AudioController","EventManager","EventName","GameFactory","Cube","CubeBg","CubeRoot","GameMgr","GameScene","OverLayer","HelpTextView","LoadingImg","TableManager","CelerSDK","Cocos","FrameAniBase","HashMap","LogHandler","Random","Signal","Time","ToSingleton","BaseMediator","BaseView","GlobalSingleTouchMediator","GlobalSingleTouchView","MenuButton","PauseLayer","SingleTouchMediator","SingleTouchView","WildAdButton","table"]);