window.__require=function e(t,o,n){function i(a,c){if(!o[a]){if(!t[a]){var s=a.split("/");if(s=s[s.length-1],!t[s]){var l="function"==typeof __require&&__require;if(!c&&l)return l(s,!0);if(r)return r(s,!0);throw new Error("Cannot find module '"+a+"'")}}var d=o[a]={exports:{}};t[a][0].call(d.exports,function(e){return i(t[a][1][e]||e)},d,d.exports,e,t,o,n)}return o[a].exports}for(var r="function"==typeof __require&&__require,a=0;a<n.length;a++)i(n[a]);return i}({AudioController:[function(e,t,o){"use strict";cc._RF.push(t,"1d6d0OoirhGUovLXt4pSNNX","AudioController"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../utils/HashMap"),i=e("./EventManager"),r=e("./EventName"),a=e("./Game"),c="sounds/";window.oncanplay&&(window.oncanplay=function(){s.canPlay=!0});var s=function(){function e(){this.audioID={},this.clips=new n.HashMap}return Object.defineProperty(e,"inst",{get:function(){return this.ins?this.ins:this.ins=new e},enumerable:!0,configurable:!0}),e.prototype.init=function(e){console.warn(" start load AudioClip ");var t=this;cc.loader.loadResDir(c,cc.AudioClip,function(o,n,i){if(o)console.error("load bgm fail, err:",o);else{for(var r=0,a=n;r<a.length;r++){var c=a[r];"string"==typeof c._audio&&cc.loader._cache&&cc.loader._cache[c._audio]&&cc.loader._cache[c._audio].buffer&&(c._audio=cc.loader._cache[c._audio].buffer),t.clips.add(c.name,c)}t.initEvent(),e&&e()}})},e.prototype.initEvent=function(){var e=this;i.gEventMgr.targetOff(this),this.playMusic("bgm",!0),i.gEventMgr.on(r.GlobalEvent.PLAY_EFFECT,function(t){e.playEffect(t)},this),i.gEventMgr.on(r.GlobalEvent.PLAY_RECYCLE_POKERS,function(){e.playEffect("recyclePoker")},this),i.gEventMgr.on(r.GlobalEvent.DEV_POKERS,function(){e.playEffect("devPoker")},this),i.gEventMgr.on(r.GlobalEvent.PLAY_POKER_PLACE,function(){e.playEffect("pokerPlace")},this),i.gEventMgr.on(r.GlobalEvent.PLAY_RECYCLE,function(){e.playEffect("recycle"+a.Game.getCombo())},this),i.gEventMgr.on(r.GlobalEvent.PLAY_POKER_FLY,function(){e.playEffect("pokerFly")},this),i.gEventMgr.on(r.GlobalEvent.PLAY_OVER_1,function(){e.playEffect("result_flip")},this),i.gEventMgr.on(r.GlobalEvent.PLAY_OVER_2,function(){e.playEffect("result_dev")},this),i.gEventMgr.on(r.GlobalEvent.PLAY_PAUSE,function(){e.playEffect("pause")},this),i.gEventMgr.on(r.GlobalEvent.PLAY_SHAKE,function(){e.playEffect("shake")},this),i.gEventMgr.on(r.GlobalEvent.PLAY_START,function(){e.playEffect("start_count")},this)},e.prototype.playEffect=function(t,o){var n=this;if(void 0===o&&(o=!1),e.canPlay){if(!(cc.audioEngine.getEffectsVolume()<=.05)){var i=this.clips.get(t);i?this.audioID[t]=cc.audioEngine.playEffect(i,o):cc.loader.loadRes(c+t,cc.AudioClip,function(e,i){e?console.error(e):(n.clips.add(i.name,i),n.audioID[t]=cc.audioEngine.playEffect(i,o))})}}else this.bindTouch()},e.prototype.playMusic=function(t,o){var n=this;if(void 0===o&&(o=!0),!e.canPlay)return this.bindTouch(),void e.PlayedList.push({loop:!0,volume:1,clipName:t,supTime:Date.now(),skip:!1,isBgm:!0});var i=this.clips.get(t);i?cc.audioEngine.playMusic(i,o):cc.loader.loadRes(c+t,cc.AudioClip,function(e,t){e?console.error(e):("string"==typeof t._audio&&cc.loader._cache&&cc.loader._cache[t._audio]&&cc.loader._cache[t._audio].buffer&&(t._audio=cc.loader._cache[t._audio].buffer),n.clips.add(t.name,t),cc.audioEngine.playMusic(t,o))})},e.prototype.bindTouch=function(){if(!e.hasBindTouch){var t=this,o=function(){var n;for(cc.game.canvas.removeEventListener("touchstart",o),e.canPlay=!0;(n=e.PlayedList.pop())&&t.clips.get(n.clipName)&&!n.skip;)cc.audioEngine.playMusic(t.clips.get(n.clipName),n.loop)};e.hasBindTouch=!0,cc.game.canvas.addEventListener("touchstart",o)}},e.PlayedList=[],e.canPlay=!1,e.hasBindTouch=!1,e}();o.gAudio=s.inst,cc._RF.pop()},{"../utils/HashMap":"HashMap","./EventManager":"EventManager","./EventName":"EventName","./Game":"Game"}],EventManager:[function(e,t,o){"use strict";cc._RF.push(t,"15a47pj/bZLz4bw5c1lt4L9","EventManager"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function e(){this.eventTarget=new cc.EventTarget}return Object.defineProperty(e,"inst",{get:function(){return this.ins?this.ins:this.ins=new e},enumerable:!0,configurable:!0}),e.prototype.emit=function(e,t,o,n,i,r){this.eventTarget.emit(e.toString(),t,o,n,i,r)},e.prototype.on=function(e,t,o,n){return this.eventTarget.on(e.toString(),t,o,n)},e.prototype.once=function(e,t,o){this.eventTarget.once(e.toString(),t,o)},e.prototype.dispatchEvent=function(e){this.eventTarget.dispatchEvent(e)},e.prototype.off=function(e,t,o){this.eventTarget.off(e.toString(),t,o)},e.prototype.hasEventListener=function(e){return this.eventTarget.hasEventListener(e.toString())},e.prototype.targetOff=function(e){this.eventTarget.targetOff(e)},e}();o.gEventMgr=n.inst,cc._RF.pop()},{}],EventName:[function(e,t,o){"use strict";cc._RF.push(t,"bf67a7QRNNGpo1qJkcJdq4+","EventName"),Object.defineProperty(o,"__esModule",{value:!0}),function(e){e[e.UPDATE_DRAW_ICON=0]="UPDATE_DRAW_ICON",e[e.UPDATE_SCORE=1]="UPDATE_SCORE",e[e.UPDATE_BACK_BTN_ICON=2]="UPDATE_BACK_BTN_ICON",e[e.OPEN_RESULT=3]="OPEN_RESULT",e[e.RESTART=4]="RESTART",e[e.COMPLETE=5]="COMPLETE",e[e.AUTO_COMPLETE_DONE=6]="AUTO_COMPLETE_DONE",e[e.UPDATE_TIP_ANIMATION=7]="UPDATE_TIP_ANIMATION",e[e.POP_GUIDE_STEP=8]="POP_GUIDE_STEP",e[e.PLAY_RECYCLE_POKERS=9]="PLAY_RECYCLE_POKERS",e[e.DEV_POKERS=10]="DEV_POKERS",e[e.PLAY_POKER_PLACE=11]="PLAY_POKER_PLACE",e[e.PLAY_POKER_FLY=12]="PLAY_POKER_FLY",e[e.PLAY_OVER_1=13]="PLAY_OVER_1",e[e.PLAY_OVER_2=14]="PLAY_OVER_2",e[e.PLAY_PAUSE=15]="PLAY_PAUSE",e[e.PLAY_START=16]="PLAY_START",e[e.PLAY_SHAKE=17]="PLAY_SHAKE",e[e.SMALL_BGM=18]="SMALL_BGM",e[e.NORMAL_BGM=19]="NORMAL_BGM",e[e.PLAY_RECYCLE=20]="PLAY_RECYCLE",e[e.PLAY_EFFECT=21]="PLAY_EFFECT",e[e.ON_SHOW=22]="ON_SHOW",e[e.ON_HIDE=23]="ON_HIDE"}(o.GlobalEvent||(o.GlobalEvent={})),cc._RF.pop()},{}],GameFactory:[function(e,t,o){"use strict";cc._RF.push(t,"44968IEriNJurc3wbMrKqft","GameFactory"),Object.defineProperty(o,"__esModule",{value:!0});var n,i=e("../utils/HashMap"),r=function(){function e(e,t,o){this._pool=[],this.poolHandlerComps=[],this.poolHandlerComps=o,this.template=e,this.initPool(t)}return e.prototype.initPool=function(e){for(var t=0;t<e;++t){var o=cc.instantiate(this.template);this.put(o)}},e.prototype.size=function(){return this._pool.length},e.prototype.clear=function(){for(var e=this._pool.length,t=0;t<e;++t)this._pool[t].destroy&&this._pool[t].destroy();this._pool.length=0},e.prototype.put=function(e){if(e&&-1===this._pool.indexOf(e)){if(e.removeFromParent(!1),this.poolHandlerComps)for(var t=0,o=this.poolHandlerComps;t<o.length;t++){var n=o[t],i=e.getComponent(n);i&&i.unuse&&i.unuse.apply(i)}else for(var r=0,a=e.getComponents(cc.Component);r<a.length;r++){(n=a[r])&&n.unuse&&n.unuse.apply(n)}this._pool.push(e)}},e.prototype.get=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var o=this._pool.length-1;o<0&&(!CELER_X&&console.error(" last < 0 "),this.initPool(1)),o=this._pool.length-1;var n=this._pool[o];if(this._pool.length=o,this.poolHandlerComps)for(var i=0,r=this.poolHandlerComps;i<r.length;i++){var a=r[i],c=n.getComponent(a);c&&c.reuse&&c.reuse.apply(c,arguments)}else for(var s=0,l=n.getComponents(cc.Component);s<l.length;s++){(a=l[s])&&a.reuse&&a.reuse.apply(a,arguments)}return n},e}();(function(e){e[e.INIT=0]="INIT",e[e.POKER=4]="POKER",e[e.AddScore=8]="AddScore",e[e.SubScore=16]="SubScore",e[e.DONE=28]="DONE"})(n||(n={}));var a=function(){function e(){this.step=n.INIT,this.PokerPool=new i.HashMap,this.addScorePool=new i.HashMap,this.subScorePool=new i.HashMap}return Object.defineProperty(e,"inst",{get:function(){return this.ins?this.ins:this.ins=new e},enumerable:!0,configurable:!0}),e.prototype.init=function(e,t,o,n){var i=this;this.doneCallback=e,setTimeout(function(){i.initPoker(52,t)},0),setTimeout(function(){i.initAddScore(10,o)},10),setTimeout(function(){i.initSubScore(10,n)},20)},e.prototype.nextStep=function(e){this.step|=e,this.step>=n.DONE&&this.doneCallback&&this.doneCallback()},e.prototype.initPoker=function(e,t){var o=this;t?(o.PokerPool.add("Poker",new r(t,e)),o.nextStep(n.POKER)):cc.loader.loadRes("prefabs/poker",cc.Prefab,function(t,i){t?console.error("load poker prefab err:",t):(o.PokerPool.add("Poker",new r(i,e)),o.nextStep(n.POKER))})},e.prototype.getPoker=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return this.PokerPool.get("Poker").get(e)},e.prototype.putPoker=function(e){this.PokerPool.get("Poker").put(e)},e.prototype.getPokerPool=function(){return this.PokerPool},e.prototype.initAddScore=function(e,t){var o=this;t?(o.addScorePool.add("AddScore",new r(t,e)),o.nextStep(n.AddScore)):cc.loader.loadRes("prefabs/AddScoreLabel",cc.Prefab,function(t,i){t?console.error("load scoreLabel prefab err :",t):(o.addScorePool.add("AddScore",new r(i,e)),o.nextStep(n.AddScore))})},e.prototype.getAddScore=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return this.addScorePool.get("AddScore").get(e)},e.prototype.putAddScore=function(e){this.addScorePool.get("AddScore").put(e)},e.prototype.initSubScore=function(e,t){var o=this;t?(o.subScorePool.add("SubScore",new r(t,e)),o.nextStep(n.SubScore)):cc.loader.loadRes("prefabs/SubScoreLabel",cc.Prefab,function(t,i){t?console.error("load red scoreLabel err:",t):(o.subScorePool.add("SubScore",new r(i,e)),o.nextStep(n.SubScore))})},e.prototype.getSubScore=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return this.subScorePool.get("SubScore").get(e)},e.prototype.putSubScore=function(e){this.subScorePool.get("SubScore").put(e)},e}();o.gFactory=a.inst,cc._RF.pop()},{"../utils/HashMap":"HashMap"}],GameScene:[function(e,t,o){"use strict";cc._RF.push(t,"e1b90/rohdEk4SdmmEZANaD","GameScene"),Object.defineProperty(o,"__esModule",{value:!0});var n,i=e("./controller/GameFactory"),r=e("./controller/Game"),a=e("./Poker"),c=e("./Pokers"),s=e("./controller/EventManager"),l=e("./controller/EventName"),d=e("./Stop"),u=e("./controller/AudioController"),p=e("./Guide"),h=e("./utils/LogHandler"),g=cc._decorator,f=g.ccclass,m=g.property;(function(e){e[e.READY=0]="READY",e[e.PREFABS=2]="PREFABS",e[e.AUDIO=16]="AUDIO",e[e.CELER=32]="CELER",e[e.GUIDE=4]="GUIDE",e[e.CELER_READY=18]="CELER_READY",e[e.GUIDE_READY=50]="GUIDE_READY",e[e.DONE=54]="DONE"})(n=o.LOAD_STEP||(o.LOAD_STEP={}));var _=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.Poker=null,t.PokerClip=null,t.PlaceRoot=null,t.PokerDevl=null,t.GuideEmpty=null,t.RemoveNode=null,t.BackButton=null,t.PauseButton=null,t.CycleRoot=null,t.PokerFlipRoot=null,t.GuideEmpty2=null,t.BackButtonAtlas=null,t.DrawButtonAtlas=null,t.TimeLabel=null,t.Top=null,t.TimeIcon=null,t.TimeIconAtlas=null,t.ScoreLabel=null,t.SmallOrg=null,t.SmallGreen=null,t.SubScoreLabel=null,t.AddScoreLabel=null,t.TimeAnimation=null,t.LightAnimation=null,t.Stop=null,t.DrawCardAni=null,t.Guide=null,t.FlipAnimation=null,t.Complete=null,t.SubmitButton=null,t.CheatToggle=null,t.Tip=null,t.TipAtlas=null,t.SubmitTip=null,t.step=n.READY,t.canDispatchPoker=!1,t.dispatchCardCount=28,t.devTime=10,t.backTime=10,t.score=0,t.showScore=0,t.scoreStep=0,t.isStart=!1,t.tipIndex=1,t.isNewPlayer=!1,t.tipTimeout=-1,t.hasShowSubmitTip=!1,t.isCelerStart=!1,t.guideDone=!1,t.canFilp=!1,t.isEnd=!1,t}return __extends(t,e),t.prototype.init=function(){this.SubmitTip.node.active=!1,this.Stop.hide(),this.Complete.node.active=!1,this.TimeLabel.string=CMath.TimeFormat(r.Game.getGameTime()),this.ScoreLabel.string="0",this.TimeAnimation.node.active=!1,this.LightAnimation.node.active=!1,this.TimeIcon.spriteFrame=this.TimeIconAtlas.getSpriteFrame("icon_time"),r.Game.getCycledPokerRoot().clear(),r.Game.getPlacePokerRoot().clear();for(var e=0,t=this.PlaceRoot.children;e<t.length;e++){var o=t[e];r.Game.addPlacePokerRoot(parseInt(o.name),o)}for(var n=0,i=this.CycleRoot.children;n<i.length;n++){o=i[n];r.Game.addCycledPokerRoot(parseInt(o.name),o)}},t.prototype.registerGuide=function(){var e=this,t=r.Game.getPlacePokerRoot().get(0),o=r.Game.getPlacePokerRoot().get(3),n=r.Game.getPlacePokerRoot().get(2),i=this.PlaceRoot.children[0],c=this.PlaceRoot.children[4],s=r.Game.getPlacePokerRoot().get(4).parent,l=this.PlaceRoot.children[6],d=r.Game.getPlacePokerRoot().get(6),u=(d.parent,this.PokerDevl.children[this.PokerDevl.childrenCount-3]),p=r.Game.getPlacePokerRoot().get(1),h=this.PlaceRoot.children[1];this.Guide.register([{touches:[{node:this.Top,isButton:!1,callback:function(){},start:function(){},end:function(){}},{node:this.CycleRoot.children[0],isButton:!1,callback:function(){},start:function(){},end:function(){e.CycleRoot.children[0].group="default"},isAction:!0},{node:t,isButton:!1,callback:function(){},start:function(){t.getComponent(a.default)&&t.getComponent(a.default).setGuide(!0)},end:function(){},isAction:!0}]},{touches:[{node:t,isButton:!1,callback:function(){},start:function(){},end:function(){t.getComponent(a.default)&&t.getComponent(a.default).setGuide(!1),t.group="default"},isAction:!0},{node:o,isButton:!1,callback:function(){},start:function(){o.getComponent(a.default)&&o.getComponent(a.default).setGuide(!0)},end:function(){o.getComponent(a.default)&&o.getComponent(a.default).setGuide(!1),o.group="default"},isAction:!0}]},{touches:[{node:d,callback:function(){},start:function(){d.getComponent(a.default)&&d.getComponent(a.default).setGuide(!0)},end:function(){d.getComponent(a.default)&&d.getComponent(a.default).setGuide(!1),d.group="default"},isButton:!1,isAction:!0},{node:s,callback:function(){},start:function(){s.getComponent(a.default)&&s.getComponent(a.default).setGuide(!0)},end:function(){s.getComponent(a.default)&&s.getComponent(a.default).setGuide(!1),s.group="default"},isButton:!1},{node:this.GuideEmpty2,callback:function(){},start:function(){},end:function(){},isButton:!1,isAction:!0},{node:c,callback:function(){},start:function(){},end:function(){c.group="default"},isButton:!1},{node:l,callback:function(){},start:function(){},end:function(){l.group="default"},isButton:!1}]},{touches:[{node:i,callback:function(){},start:function(){},end:function(){i.group="default"},isButton:!1,isAction:!0},{node:n,callback:function(){},start:function(){n.getComponent(a.default)&&n.getComponent(a.default).setGuide(!0)},end:function(){n.getComponent(a.default)&&n.getComponent(a.default).setGuide(!1),n.group="default"},isButton:!1,isAction:!0}]},{touches:[{node:this.PokerDevl,callback:function(){},start:function(){},end:function(){e.PokerDevl.group="default"},isButton:!0},{node:this.DrawCardAni.node,callback:function(){},start:function(){e.DrawCardAni.node.active=!0,e.DrawCardAni.play()},end:function(){e.DrawCardAni.node.active=!1,e.DrawCardAni.node.group="default"},isButton:!0}]},{touches:[{node:this.PokerFlipRoot,callback:function(){},start:function(){},end:function(){e.PokerFlipRoot.group="default"},isButton:!0},{node:u,callback:function(){},start:function(){u.getComponent(a.default)&&u.getComponent(a.default).setGuide(!0)},end:function(){u.getComponent(a.default)&&u.getComponent(a.default).setGuide(!1),u.group="defautl"},isButton:!1},{node:p,callback:function(){},start:function(){p.getComponent(a.default)&&p.getComponent(a.default).setGuide(!0)},end:function(){p.getComponent(a.default)&&p.getComponent(a.default).setGuide(!1),p.group="default"},isButton:!1,isAction:!0},{node:this.GuideEmpty,callback:function(){},start:function(){},end:function(){e.GuideEmpty.group="default"},isButton:!0,isAction:!0},{node:h,callback:function(){},start:function(){},end:function(){h.group="default"},isButton:!0}]},{touches:[{node:this.SubmitButton.node,callback:function(){e.SubmitButton.node.group="default",e.SubmitTip.node.active=!1},start:function(){e.SubmitTip.node.active=!0},end:function(){},isButton:!0},{node:this.Stop.EndButton.node,callback:function(){e.Stop.EndButton.node.group="default",e.Guide.showEnd()},start:function(){},end:function(){},isButton:!0}]}])},t.prototype.onLoad=function(){var e=this;CELER_X&&h.LogHandler.inst.initLog(celerSDK.log),h.LogHandler.inst.log(" game scene onload"),this.DrawCardAni.node.active=!1,this.Guide.node.active=!1,r.Game.removeNode=this.RemoveNode,r.Game.pokerFlipRoot=this.PokerFlipRoot,r.Game.RecycleRoot=this.CycleRoot,this.Tip.active=!1,CMath.randomSeed=.09826511904798856;var t=this;CELER_X&&celerSDK.onStart(function(){t.celerStart()}.bind(this)),CELER_X&&celerSDK.provideScore(function(){return parseInt(r.Game.getScore().toString())}),this.CheatToggle.node.active=CHEAT_OPEN,this.CheatToggle.isChecked=!1,this.CheatToggle.node.on("toggle",function(){window.cheat=e.CheatToggle.isChecked},this),this.init(),cc.game.setFrameRate(60),setTimeout(function(){i.gFactory.init(function(){this.nextStep(n.PREFABS)}.bind(e),e.Poker,e.AddScoreLabel,e.SubScoreLabel)},0),setTimeout(function(){u.gAudio.init(function(){e.nextStep(n.AUDIO)})},10),setTimeout(function(){cc.loader.loadRes("prefabs/Result")},20),setTimeout(function(){cc.loader.loadResDir("sounds")},30),this.PauseButton.node.on(cc.Node.EventType.TOUCH_START,function(t){r.Game.isComplete()||(r.Game.setPause(!0),e.Stop.show(1))},this),this.PauseButton.node.on(cc.Node.EventType.TOUCH_END,function(e){},this),this.PauseButton.node.on(cc.Node.EventType.TOUCH_CANCEL,function(e){},this),this.SubmitButton.node.on(cc.Node.EventType.TOUCH_END,function(t){r.Game.resetFreeTime(),t.getUserData?(t.getUserData()(),e.Stop.show(-1,t.getUserData())):e.Stop.show(-1),r.Game.setPause(!0)},this),this.PokerFlipRoot.on(cc.Node.EventType.CHILD_ADDED,this.onPokerFlipAddChild,this),this.PokerDevl.on(cc.Node.EventType.CHILD_REMOVED,function(){!e.LightAnimation.node.active&&e.PokerDevl.childrenCount<=0&&(e.LightAnimation.node.active=!0,e.LightAnimation.play())},this),this.PokerDevl.on(cc.Node.EventType.CHILD_ADDED,function(e){var t=e.getComponent(a.default);t&&t.setRecycle(!1)},this),this.PokerFlipRoot.on(cc.Node.EventType.CHILD_REMOVED,this.onPokerFlipRemoveChild,this),this.PokerDevl.on(cc.Node.EventType.TOUCH_START,function(t){r.Game.isTimeOver()||r.Game.isComplete()||!e.canFilp||(r.Game.resetFreeTime(),e.devTime>=.3&&(e.devPoker(),e.devTime=0))},this),this.PokerDevl.on(cc.Node.EventType.TOUCH_END,function(e){},this),this.PokerDevl.on(cc.Node.EventType.TOUCH_CANCEL,function(e){},this),s.gEventMgr.on(l.GlobalEvent.COMPLETE,function(){e.Complete.node.active=!0,e.Complete.play()},this),this.BackButton.node.getChildByName("Background").getComponent(cc.Sprite).spriteFrame=this.BackButtonAtlas.getSpriteFrame("btn_backgray"),this.BackButton.interactable=!1,this.BackButton.node.on(cc.Node.EventType.TOUCH_START,function(t){r.Game.isTimeOver()||e.backTime<.5||r.Game.isComplete()||(e.backTime=0,r.Game.resetFreeTime(),r.Game.backStep())},r.Game),this.BackButton.node.on(cc.Node.EventType.TOUCH_CANCEL,function(e){},r.Game),this.BackButton.node.on(cc.Node.EventType.TOUCH_END,function(e){},r.Game),s.gEventMgr.on(l.GlobalEvent.UPDATE_BACK_BTN_ICON,function(){e.BackButton.interactable=r.Game.canBackStep(),e.BackButton.interactable?e.BackButton.node.getChildByName("Background").getComponent(cc.Sprite).spriteFrame=e.BackButtonAtlas.getSpriteFrame("btn_back"):e.BackButton.node.getChildByName("Background").getComponent(cc.Sprite).spriteFrame=e.BackButtonAtlas.getSpriteFrame("btn_backgray")},this),s.gEventMgr.on(l.GlobalEvent.UPDATE_DRAW_ICON,function(){switch(r.Game.getFreeDrawTimes()){case 1:e.PokerDevl.getComponent(cc.Sprite).spriteFrame=e.DrawButtonAtlas.getSpriteFrame("free_draw_1");break;case 2:e.PokerDevl.getComponent(cc.Sprite).spriteFrame=e.DrawButtonAtlas.getSpriteFrame("free_draw_2");break;case 3:e.PokerDevl.getComponent(cc.Sprite).spriteFrame=e.DrawButtonAtlas.getSpriteFrame("free_draw_3");break;default:e.PokerDevl.getComponent(cc.Sprite).spriteFrame=e.DrawButtonAtlas.getSpriteFrame("draw_20")}},this),s.gEventMgr.on(l.GlobalEvent.UPDATE_SCORE,function(t,o){e.scoreStep=Math.ceil(Math.max(t/20,e.scoreStep));var n=CMath.ConvertToNodeSpaceAR(e.ScoreLabel.node,e.RemoveNode);if(t>0){var a=i.gFactory.getAddScore("/"+t.toString());a.group=e.isStart?"top":"guide",a.setParent(e.RemoveNode),a.setPosition(o),a.runAction(cc.sequence(cc.scaleTo(0,0),cc.scaleTo(.15,1.5),cc.delayTime(.25),cc.scaleTo(.1,1),cc.moveTo(.25,n.x,n.y),cc.callFunc(function(){e.showScore=r.Game.getScore(),i.gFactory.putAddScore(a)})))}else{var c=i.gFactory.getSubScore("/"+Math.abs(t).toString());c.group=e.isStart?"top":"guide",c.setParent(e.RemoveNode),c.setPosition(o),c.runAction(cc.sequence(cc.scaleTo(0,0),cc.scaleTo(.15,1.5),cc.delayTime(.25),cc.scaleTo(.1,1),cc.moveTo(.25,n.x,n.y),cc.callFunc(function(){e.showScore=r.Game.getScore(),i.gFactory.putSubScore(c)})))}},this),s.gEventMgr.once(l.GlobalEvent.OPEN_RESULT,this.openResult,this)},t.prototype.openResult=function(e){var t=this;if(!this.isStart&&!e)return this.Guide.hide(),void this.nextStep(n.GUIDE);this.Stop.hide(!1),this.node.getChildByName("Result")||(console.log(" load result layer..."),cc.loader.loadRes("prefabs/Result",cc.Prefab,function(e,o){if(!t.node.getChildByName("Result"))if(e)console.error("sumbit score by load resultLayer error, matchid:",r.Game.MatchInfo.matchId,", seed:",r.Game.MatchInfo.sharedRandomSeed),CELER_X&&celerSDK.submitScore(r.Game.getScore());else{var n=cc.instantiate(o);n.name="Result",t.node.addChild(n)}}))},t.prototype.celerStart=function(){var e=CELER_X?celerSDK.getMatch():{matchId:"",sharedRandomSeed:Math.random(),shouldLaunchTutorial:!0,difficultyLevel:1};r.Game.MatchInfo=e,e&&e.sharedRandomSeed?(CMath.randomSeed=e.sharedRandomSeed,CMath.sharedSeed=e.sharedRandomSeed,console.log(" match id:",r.Game.MatchInfo.matchId,", seed:",r.Game.MatchInfo.sharedRandomSeed)):(console.error(" Match info invaild "),CMath.randomSeed=.3004413377150996,CMath.sharedSeed=.3004413377150996),h.LogHandler.inst.log(" celerx onStart:",r.Game.MatchInfo.matchId,", seed:",r.Game.MatchInfo.sharedRandomSeed),e&&e.shouldLaunchTutorial||!CELER_X?this.isNewPlayer=!0:(this.isNewPlayer=!1,this.Guide.hide(),this.nextStep(n.GUIDE)),this.nextStep(n.CELER)},t.prototype.nextStep=function(e){this.step|=e,console.log(" step:",n[this.step],",",this.step,", now:",n[e]),this.step>=n.DONE&&!this.isStart?(console.log("  startGame ---------------------- "),this.isStart=!0,this.Guide.hide(),this.startGame()):this.step>=n.GUIDE_READY&&this.isNewPlayer&&!this.guideDone?(console.log("  start guide ------------"),this.startGuide()):this.step>=n.CELER_READY&&!this.isCelerStart&&(h.LogHandler.inst.log("  celerx.ready ------------"),CELER_X&&celerSDK.ready(),this.isCelerStart=!0,!CELER_X&&this.celerStart())},t.prototype.startGuide=function(){var e=this;this.canFilp=!1,this.guideDone=!0;var t=c.GuidePokers.concat([]).reverse();for(r.Game.allPokers.length=0;t.length>0;){var o=t.length-1,s=i.gFactory.getPoker([t.pop()]);s.name=o.toString(),s.x=0,s.y=0,this.PokerDevl.addChild(s),r.Game.allPokers.push(s.getComponent(a.default))}this.Guide.showBlock(),this.startDevPoker([0,7,13,18,19,22,25,26,27],[22,27],function(){e.registerGuide(),e.Guide.startGuide(function(){e.nextStep(n.GUIDE)}),e.canFilp=!0})},t.prototype.prepareGame=function(){console.log("GameScene.prepareGame");for(var e=0,t=r.Game.allPokers;e<t.length;e++){var o=t[e];i.gFactory.putPoker(o.node)}r.Game.allPokers.length=0,this.Top.group="default",r.Game.resetscore(),this.showScore=0,this.TimeAnimation.node.active=!1,this.TimeLabel.font=this.SmallGreen,this.TimeIcon.spriteFrame=this.TimeIconAtlas.getSpriteFrame("icon_time");var n=r.Game.getGameTime();this.TimeLabel.string=CMath.TimeFormat(n),r.Game.getCycledPokerRoot().clear(),r.Game.getPlacePokerRoot().clear();for(var a=0,c=this.PlaceRoot.children;a<c.length;a++){var s=c[a];r.Game.addPlacePokerRoot(parseInt(s.name),s)}for(var l=0,d=this.CycleRoot.children;l<d.length;l++){s=d[l];r.Game.addCycledPokerRoot(parseInt(s.name),s)}},t.prototype.startGame=function(){var e=this;console.log(" GameScene.startGame"),CELER_X?(celerSDK.onPause(function(){e.isEnd||(console.log(" game on background"),e.Stop.show(0,!1,!1))}),celerSDK.onResume(function(){e.isEnd||(console.log(" game on forground"),s.gEventMgr.emit(l.GlobalEvent.ON_SHOW))})):(cc.game.on(cc.game.EVENT_HIDE,function(){e.isEnd||(console.log(" game on background"),e.Stop.show(0,!1,!1))},this),cc.game.on(cc.game.EVENT_SHOW,function(){e.isEnd||(console.log(" game on forground"),s.gEventMgr.emit(l.GlobalEvent.ON_SHOW))},this)),this.canFilp=!1,r.Game.initAllData(),this.prepareGame();for(var t=c.Pokers.concat([]);t.length>0;){var o=t.length-1,n=t.length,a=CMath.getRandom(0,1),d=Math.floor(a*n),u=t.splice(d,1),p=i.gFactory.getPoker(u);p||console.error(" poker node from factory is null "),p.name=o.toString(),p.x=0,p.y=0,this.PokerDevl.addChild(p)}this.startDevPoker([0,7,13,18,22,25,27],[],function(){e.canFilp=!0})},t.prototype.startDevPoker=function(e,t,o){var n=this;console.log(" GamsScene.startDevPoker ");var i=0,d=this.PokerDevl.childrenCount,u=[0,1,2,3,4,5,6,1,2,3,4,5,6,2,3,4,5,6,3,4,5,6,4,5,6,5,6,6],p=function(){if(i++>=n.dispatchCardCount)return n.canDispatchPoker=!0,n.LightAnimation.node.active=!0,n.LightAnimation.play(),console.log("func1 done ,invoke callback"),void(o&&o());var h=n.PokerDevl.getChildByName((d-i).toString());if(h){var g=r.Game.getPlacePokerRoot().get(u[i-1]);if(g){var f=CMath.ConvertToNodeSpaceAR(h,g),m=t.indexOf(i-1)>=0?c.OFFSET_Y:c.OFFSET_Y/3;g.getComponent(a.default)||(r.Game.addPlacePokerRoot(u[i-1],h),m=c.Empty_Offset),h.setParent(g);var _=h.getComponent(a.default);h.setPosition(f),h.group="top",e.indexOf(i-1)>=0&&(_.flipCard(.1),_.setNormal()),s.gEventMgr.emit(l.GlobalEvent.DEV_POKERS),h.runAction(cc.sequence(cc.moveTo(.05,0,m),cc.callFunc(function(){h.group="default",_.setDefaultPosition(),p()},n)))}else console.error(" no target on func1 dev poker")}else console.log(" poker node invaild on func1!")};p()},t.prototype.recyclePoker=function(){var e=this;if(!(this.PokerDevl.childrenCount>0||this.PokerFlipRoot.childrenCount<=0)){this.LightAnimation.node.active&&(this.LightAnimation.node.active=!1);var t=[],o=0,n=CMath.ConvertToNodeSpaceAR(this.PokerDevl,this.RemoveNode);r.Game.getFreeDrawTimes()>0?(r.Game.addFreeDrawTimes(-1),o=1):(r.Game.getScore()>=20?t.push(20):t.push(r.Game.getScore()),r.Game.addScore(-20,n,"DrawPoker"));var i=[],d=[],u=[],p=this.PokerFlipRoot.children.concat().reverse(),h=!1;this.PokerFlipRoot.childrenCount>=3?(this.FlipAnimation.play(),s.gEventMgr.emit(l.GlobalEvent.PLAY_RECYCLE_POKERS)):h=!0;for(var g=function(t){t.opacity=255;var o=CMath.ConvertToNodeSpaceAR(t,f.PokerDevl),n=t.getComponent(a.default);i.push(t),d.push(f.PokerFlipRoot),u.push(t.position.clone()),t.setParent(f.PokerDevl),t.setPosition(o),n.setDefaultPosition(cc.v2(0,0)),n.flipCard(0,!1),h?(t.group="top",f.scheduleOnce(function(){var o=cc.sequence(cc.moveTo(0,0,0),cc.callFunc(function(){t.group="default"},e));o.setTag(c.ACTION_TAG.RE_DEV_POKER),t.stopActionByTag(c.ACTION_TAG.FLIP_CARD_REPOS_ON_REMOVE),t.runAction(o)},.1)):(t.group="default",t.stopAllActions(),t.setPosition(0,0)),0},f=this,m=0,_=p;m<_.length;m++){g(_[m])}var v=this.PokerFlipRoot.children,y=function(){for(var e=Math.max(0,v.length-3),t=0;t<e;t++){var o=v[t];t<e-1&&(o.opacity=0)}};r.Game.addStep(i,d,u,[{callback:function(){r.Game.addFreeDrawTimes(o),setTimeout(y,200)},target:this,args:[]}],t,[n])}},t.prototype.devPoker=function(){var e=this;if(this.canDispatchPoker)if(this.PokerDevl.childrenCount<=0)this.recyclePoker();else{s.gEventMgr.emit(l.GlobalEvent.POP_GUIDE_STEP);for(var t=[],o=[],n=[],i=[],d=this.PokerFlipRoot.children.concat(),u=3,p=function(r){var d=h.PokerDevl.children[h.PokerDevl.childrenCount-1];if(!d)return"break";u--;var p=CMath.ConvertToNodeSpaceAR(d,h.PokerFlipRoot),g=d.getComponent(a.default);t.push(d),o.push(d.getParent()),n.push(d.position.clone()),i.push({callback:g.flipCard,args:[.1],target:g}),d.setParent(h.PokerFlipRoot),d.setPosition(p),d.group="top",h.scheduleOnce(function(){var t=g.getFlipPos(),o=cc.sequence(cc.delayTime(r/20),cc.callFunc(function(){s.gEventMgr.emit(l.GlobalEvent.DEV_POKERS)}),cc.moveTo(.1,t.x,t.y),cc.callFunc(function(){d.group="default"},e));o.setTag(c.ACTION_TAG.DEV_POKER),d.stopActionByTag(c.ACTION_TAG.FLIP_CARD_REPOS_ON_ADD),d.runAction(o)},0)},h=this,g=0;g<3;g++){if("break"===p(g))break}var f=Math.max(0,d.length-u);for(g=0;g<f;g++){var m=d[g];m.x=0,g<f-1&&(m.opacity=0),m.getNumberOfRunningActions()>0&&(m.group="default",m.stopAllActions())}r.Game.addStep(t,o,n,i)}},t.prototype.onPokerFlipAddChild=function(e){var t=this;this.LightAnimation.node.active&&(this.LightAnimation.node.active=!1),e.opacity=255;var o=this.PokerFlipRoot.children.indexOf(e),n=e.getComponent(a.default);n&&(n.isFront()||n.flipCard(.1,!1,function(){n.setCanMove(o+1==t.PokerFlipRoot.childrenCount)}),n.setRecycle(!1)),o>=1&&this.PokerFlipRoot.children[o-1].getComponent(a.default).setCanMove(!1),this.updateFlipPokerPosOnAdd()},t.prototype.onPokerFlipRemoveChild=function(e){e.opacity=255,this.PokerFlipRoot.childrenCount>0&&this.PokerFlipRoot.children[this.PokerFlipRoot.childrenCount-1].getComponent(a.default).setNormal(),this.updateFlipPokerPos()},t.prototype.updateFlipPokerPosOnAdd=function(){if(this.PokerFlipRoot.childrenCount>=3){var e=this.PokerFlipRoot.children[this.PokerFlipRoot.childrenCount-1];(r=cc.moveTo(.1,120,0)).setTag(c.ACTION_TAG.FLIP_CARD_REPOS_ON_ADD),e.stopActionByTag(c.ACTION_TAG.FLIP_CARD_REPOS_ON_REMOVE),e.stopActionByTag(c.ACTION_TAG.FLIP_CARD_REPOS_ON_ADD),e.runAction(r),e.getComponent(a.default).setFlipPos(cc.v2(120,0)),e.getComponent(a.default).setDefaultPosition(cc.v2(120,0)),e.group="default",e.stopActionByTag(c.ACTION_TAG.BACK_STEP),e.stopActionByTag(c.ACTION_TAG.SHAKE);var t=this.PokerFlipRoot.children[this.PokerFlipRoot.childrenCount-2];(i=cc.moveTo(.1,60,0)).setTag(c.ACTION_TAG.FLIP_CARD_REPOS_ON_ADD),t.stopActionByTag(c.ACTION_TAG.FLIP_CARD_REPOS_ON_ADD),t.stopActionByTag(c.ACTION_TAG.FLIP_CARD_REPOS_ON_REMOVE),t.runAction(i),t.getComponent(a.default).setFlipPos(cc.v2(60,0)),t.getComponent(a.default).setDefaultPosition(cc.v2(60,0)),t.group="default",t.stopActionByTag(c.ACTION_TAG.BACK_STEP),t.stopActionByTag(c.ACTION_TAG.SHAKE);var o=this.PokerFlipRoot.children[this.PokerFlipRoot.childrenCount-3],n=cc.moveTo(.1,0,0);n.setTag(c.ACTION_TAG.FLIP_CARD_REPOS_ON_ADD),o.stopActionByTag(c.ACTION_TAG.FLIP_CARD_REPOS_ON_ADD),o.stopActionByTag(c.ACTION_TAG.FLIP_CARD_REPOS_ON_REMOVE),o.runAction(n),o.getComponent(a.default).setFlipPos(cc.v2(0,0)),o.getComponent(a.default).setDefaultPosition(cc.v2(0,0)),o.group="default",o.stopActionByTag(c.ACTION_TAG.BACK_STEP),o.stopActionByTag(c.ACTION_TAG.SHAKE),e.opacity=255,t.opacity=255,o.opacity=255}else if(2==this.PokerFlipRoot.childrenCount){e=this.PokerFlipRoot.children[this.PokerFlipRoot.childrenCount-1];(r=cc.moveTo(.1,60,0)).setTag(c.ACTION_TAG.FLIP_CARD_REPOS_ON_ADD),e.stopActionByTag(c.ACTION_TAG.FLIP_CARD_REPOS_ON_REMOVE),e.stopActionByTag(c.ACTION_TAG.FLIP_CARD_REPOS_ON_ADD),e.runAction(r),e.getComponent(a.default).setFlipPos(cc.v2(60,0)),e.getComponent(a.default).setDefaultPosition(cc.v2(60,0)),e.group="default",e.stopActionByTag(c.ACTION_TAG.BACK_STEP),e.stopActionByTag(c.ACTION_TAG.SHAKE);var i;t=this.PokerFlipRoot.children[this.PokerFlipRoot.childrenCount-2];(i=cc.moveTo(.1,0,0)).setTag(c.ACTION_TAG.FLIP_CARD_REPOS_ON_ADD),t.stopActionByTag(c.ACTION_TAG.FLIP_CARD_REPOS_ON_ADD),t.stopActionByTag(c.ACTION_TAG.FLIP_CARD_REPOS_ON_REMOVE),t.runAction(i),t.getComponent(a.default).setFlipPos(cc.v2(0,0)),t.getComponent(a.default).setDefaultPosition(cc.v2(0,0)),t.group="default",t.stopActionByTag(c.ACTION_TAG.BACK_STEP),t.stopActionByTag(c.ACTION_TAG.SHAKE),e.opacity=255,t.opacity=255}else if(1==this.PokerFlipRoot.childrenCount){var r;e=this.PokerFlipRoot.children[this.PokerFlipRoot.childrenCount-1];(r=cc.moveTo(.1,0,0)).setTag(c.ACTION_TAG.FLIP_CARD_REPOS_ON_ADD),e.stopActionByTag(c.ACTION_TAG.FLIP_CARD_REPOS_ON_REMOVE),e.stopActionByTag(c.ACTION_TAG.FLIP_CARD_REPOS_ON_ADD),e.runAction(r),e.getComponent(a.default).setFlipPos(cc.v2(0,0)),e.getComponent(a.default).setDefaultPosition(cc.v2(0,0)),e.group="default",e.stopActionByTag(c.ACTION_TAG.BACK_STEP),e.stopActionByTag(c.ACTION_TAG.SHAKE),e.opacity=255}},t.prototype.updateFlipPokerPos=function(){if(this.PokerFlipRoot.childrenCount>=3){var e=this.PokerFlipRoot.children[this.PokerFlipRoot.childrenCount-1];(r=cc.moveTo(.1,120,0)).setTag(c.ACTION_TAG.FLIP_CARD_REPOS_ON_REMOVE),e.stopActionByTag(c.ACTION_TAG.FLIP_CARD_REPOS_ON_REMOVE),e.stopActionByTag(c.ACTION_TAG.FLIP_CARD_REPOS_ON_ADD),e.stopActionByTag(c.ACTION_TAG.SHAKE),e.runAction(r),e.getComponent(a.default).setFlipPos(cc.v2(120,0)),e.getComponent(a.default).setDefaultPosition(cc.v2(120,0));var t=this.PokerFlipRoot.children[this.PokerFlipRoot.childrenCount-2];(i=cc.moveTo(.1,60,0)).setTag(c.ACTION_TAG.FLIP_CARD_REPOS_ON_REMOVE),t.stopActionByTag(c.ACTION_TAG.FLIP_CARD_REPOS_ON_REMOVE),t.stopActionByTag(c.ACTION_TAG.FLIP_CARD_REPOS_ON_ADD),t.stopActionByTag(c.ACTION_TAG.SHAKE),t.runAction(i),t.getComponent(a.default).setFlipPos(cc.v2(60,0)),t.getComponent(a.default).setDefaultPosition(cc.v2(60,0));var o=this.PokerFlipRoot.children[this.PokerFlipRoot.childrenCount-3],n=cc.moveTo(.1,0,0);n.setTag(c.ACTION_TAG.FLIP_CARD_REPOS_ON_REMOVE),o.stopActionByTag(c.ACTION_TAG.FLIP_CARD_REPOS_ON_REMOVE),o.stopActionByTag(c.ACTION_TAG.FLIP_CARD_REPOS_ON_ADD),o.stopActionByTag(c.ACTION_TAG.SHAKE),o.runAction(n),o.getComponent(a.default).setFlipPos(cc.v2(0,0)),o.getComponent(a.default).setDefaultPosition(cc.v2(0,0)),e.opacity=255,t.opacity=255,o.opacity=255}else if(2==this.PokerFlipRoot.childrenCount){e=this.PokerFlipRoot.children[this.PokerFlipRoot.childrenCount-1];(r=cc.moveTo(.1,60,0)).setTag(c.ACTION_TAG.FLIP_CARD_REPOS_ON_REMOVE),e.stopActionByTag(c.ACTION_TAG.FLIP_CARD_REPOS_ON_REMOVE),e.stopActionByTag(c.ACTION_TAG.FLIP_CARD_REPOS_ON_ADD),e.stopActionByTag(c.ACTION_TAG.SHAKE),e.runAction(r),e.getComponent(a.default).setFlipPos(cc.v2(60,0)),e.getComponent(a.default).setDefaultPosition(cc.v2(60,0));var i;t=this.PokerFlipRoot.children[this.PokerFlipRoot.childrenCount-2];(i=cc.moveTo(.1,0,0)).setTag(c.ACTION_TAG.FLIP_CARD_REPOS_ON_REMOVE),t.stopActionByTag(c.ACTION_TAG.FLIP_CARD_REPOS_ON_REMOVE),t.stopActionByTag(c.ACTION_TAG.FLIP_CARD_REPOS_ON_ADD),t.stopActionByTag(c.ACTION_TAG.SHAKE),t.runAction(i),t.getComponent(a.default).setFlipPos(cc.v2(0,0)),t.getComponent(a.default).setDefaultPosition(cc.v2(0,0)),e.opacity=255,t.opacity=255}else if(1==this.PokerFlipRoot.childrenCount){var r;e=this.PokerFlipRoot.children[this.PokerFlipRoot.childrenCount-1];(r=cc.moveTo(.1,0,0)).setTag(c.ACTION_TAG.FLIP_CARD_REPOS_ON_REMOVE),e.stopActionByTag(c.ACTION_TAG.FLIP_CARD_REPOS_ON_REMOVE),e.stopActionByTag(c.ACTION_TAG.FLIP_CARD_REPOS_ON_ADD),e.stopActionByTag(c.ACTION_TAG.SHAKE),e.runAction(r),e.getComponent(a.default).setFlipPos(cc.v2(0,0)),e.getComponent(a.default).setDefaultPosition(cc.v2(0,0)),e.opacity=255}},t.prototype.start=function(){},t.prototype.update=function(e){if(this.devTime+=e,this.backTime+=e,r.Game.isGameStarted()){r.Game.addGameTime(-e),r.Game.addFreeTime(e);var t=r.Game.getGameTime();this.TimeLabel.string=CMath.TimeFormat(t),t<=60&&(this.TimeLabel.font=this.SmallOrg,this.TimeAnimation.node.active||(s.gEventMgr.emit(l.GlobalEvent.PLAY_SHAKE),this.TimeAnimation.node.active=!0,this.TimeAnimation.play(),this.TimeIcon.spriteFrame=this.TimeIconAtlas.getSpriteFrame("icon_time_2")))}this.score<this.showScore?(this.score+=this.scoreStep,this.score=Math.min(this.score,this.showScore),this.ScoreLabel.string=this.score.toString()):this.score>this.showScore&&(this.score-=this.scoreStep,this.score=Math.max(this.score,this.showScore),this.ScoreLabel.string=this.score.toString())},__decorate([m(cc.Prefab)],t.prototype,"Poker",void 0),__decorate([m(cc.Node)],t.prototype,"PokerClip",void 0),__decorate([m(cc.Node)],t.prototype,"PlaceRoot",void 0),__decorate([m(cc.Node)],t.prototype,"PokerDevl",void 0),__decorate([m(cc.Node)],t.prototype,"GuideEmpty",void 0),__decorate([m(cc.Node)],t.prototype,"RemoveNode",void 0),__decorate([m(cc.Button)],t.prototype,"BackButton",void 0),__decorate([m(cc.Button)],t.prototype,"PauseButton",void 0),__decorate([m(cc.Node)],t.prototype,"CycleRoot",void 0),__decorate([m(cc.Node)],t.prototype,"PokerFlipRoot",void 0),__decorate([m(cc.Node)],t.prototype,"GuideEmpty2",void 0),__decorate([m(cc.SpriteAtlas)],t.prototype,"BackButtonAtlas",void 0),__decorate([m(cc.SpriteAtlas)],t.prototype,"DrawButtonAtlas",void 0),__decorate([m(cc.Label)],t.prototype,"TimeLabel",void 0),__decorate([m(cc.Node)],t.prototype,"Top",void 0),__decorate([m(cc.Sprite)],t.prototype,"TimeIcon",void 0),__decorate([m(cc.SpriteAtlas)],t.prototype,"TimeIconAtlas",void 0),__decorate([m(cc.Label)],t.prototype,"ScoreLabel",void 0),__decorate([m(cc.Font)],t.prototype,"SmallOrg",void 0),__decorate([m(cc.Font)],t.prototype,"SmallGreen",void 0),__decorate([m(cc.Prefab)],t.prototype,"SubScoreLabel",void 0),__decorate([m(cc.Prefab)],t.prototype,"AddScoreLabel",void 0),__decorate([m(cc.Animation)],t.prototype,"TimeAnimation",void 0),__decorate([m(cc.Animation)],t.prototype,"LightAnimation",void 0),__decorate([m(d.default)],t.prototype,"Stop",void 0),__decorate([m(cc.Animation)],t.prototype,"DrawCardAni",void 0),__decorate([m(p.default)],t.prototype,"Guide",void 0),__decorate([m(cc.Animation)],t.prototype,"FlipAnimation",void 0),__decorate([m(cc.Animation)],t.prototype,"Complete",void 0),__decorate([m(cc.Button)],t.prototype,"SubmitButton",void 0),__decorate([m(cc.Toggle)],t.prototype,"CheatToggle",void 0),__decorate([m(cc.Node)],t.prototype,"Tip",void 0),__decorate([m(cc.SpriteAtlas)],t.prototype,"TipAtlas",void 0),__decorate([m(cc.Animation)],t.prototype,"SubmitTip",void 0),t=__decorate([f],t)}(cc.Component);o.default=_,cc._RF.pop()},{"./Guide":"Guide","./Poker":"Poker","./Pokers":"Pokers","./Stop":"Stop","./controller/AudioController":"AudioController","./controller/EventManager":"EventManager","./controller/EventName":"EventName","./controller/Game":"Game","./controller/GameFactory":"GameFactory","./utils/LogHandler":"LogHandler"}],Game:[function(e,t,o){"use strict";cc._RF.push(t,"40425qmjHtE2rUaEpFgHzOS","Game"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../utils/HashMap"),i=e("../Poker"),r=e("../Pokers"),a=e("./EventManager"),c=e("./EventName"),s=function(){function e(){this.placePokerRoot=new n.HashMap,this.cyclePokerRoot=new n.HashMap,this.stepInfoArray=[],this.score=0,this.timeBonus=0,this.freeDrawTimes=3,this.flipCounts=0,this.gameStart=!1,this.gameTime=CELER_X?300:3e3,this.removePokerCount=0,this.recycleCount=0,this.pokerFlipRoot=null,this.combo=-1,this.freeTime=0,this.allPokers=[],this.ScoreDetail={},this.pauseCount=0}return e.prototype.GameMgr=function(){},Object.defineProperty(e,"inst",{get:function(){return this._inst?this._inst:this._inst=new e},enumerable:!0,configurable:!0}),e.prototype.initAllData=function(){this.timeBonus=0,this.flipCounts=0,this.gameTime=300,this.removePokerCount=0,this.combo=-1,this.freeTime=0,this.freeDrawTimes=3,this.stepInfoArray.length=0,this.recycleCount=0},e.prototype.addFreeTime=function(e){this.freeTime+=e,this.freeTime>=r.FREE_TIME_LIMIT&&a.gEventMgr.emit(c.GlobalEvent.UPDATE_TIP_ANIMATION,!0)},e.prototype.resetFreeTime=function(){this.freeTime=0,a.gEventMgr.emit(c.GlobalEvent.UPDATE_TIP_ANIMATION,!1)},e.prototype.getCombo=function(){return this.combo},e.prototype.resetCombo=function(){this.combo=-1},e.prototype.addCombo=function(e){this.combo+=e,this.combo=Math.max(0,this.combo%8)},e.prototype.getGameTime=function(){return this.gameTime},e.prototype.addRecycleCount=function(e){this.recycleCount+=e,console.log(" ---------------------recycle count :",this.recycleCount),(this.recycleCount>52||this.recycleCount<0)&&(console.error(" recycle count error! ",this.recycleCount),this.recycleCount=CMath.Clamp(this.recycleCount,52,0))},e.prototype.addGameTime=function(e){o.Game.isComplete()||window.cheat||(this.gameTime+=e,this.gameTime=Math.max(this.gameTime,0),this.gameTime<=0&&(this.gameStart=!1,a.gEventMgr.emit(c.GlobalEvent.OPEN_RESULT)))},e.prototype.calTimeBonus=function(){this.gameTime>=300||this.gameTime<=0||this.flipCounts<=0||(this.timeBonus=(this.flipCounts/30*2.4+.3)*this.gameTime,this.timeBonus=Math.floor(this.timeBonus),this.gameTime=0,o.Game.addScore(this.timeBonus,null," timeBonus"))},e.prototype.getTimeBonus=function(){return this.timeBonus},e.prototype.isTimeOver=function(){return this.gameTime<=0},e.prototype.start=function(){this.gameStart=!0,a.gEventMgr.emit(c.GlobalEvent.PLAY_START)},e.prototype.isComplete=function(){return this.flipCounts>=45},e.prototype.checkIsRecycleComplete=function(){var e=0;return this.getCycledPokerRoot().forEach(function(t,o){var n=o.getComponent(i.default);n&&13==n.getValue()&&e++}),console.error(" isComplete :",e),e>=4&&(console.log(" isComplete isComplete "),a.gEventMgr.emit(c.GlobalEvent.AUTO_COMPLETE_DONE),setTimeout(function(){a.gEventMgr.emit(c.GlobalEvent.OPEN_RESULT),console.log(" open result from timeout")},5e3)),e>=4},e.prototype.restart=function(){this.gameTime=300,this.score=0,this.flipCounts=0,this.stepInfoArray=[],this.timeBonus=0,this.cyclePokerRoot.clear(),this.placePokerRoot.clear(),this.gameStart=!1,this.removePokerCount=0},e.prototype.addRemovePokerCount=function(e){this.removePokerCount+=e;for(var t="",o=0,n=this.RecycleRoot.children;o<n.length;o++){var i=n[o];t+=i.name+":"+i.childrenCount,i.childrenCount}console.log(" remove :",this.removePokerCount," count:",e,", recycle root:",t),this.removePokerCount>=50&&(a.gEventMgr.emit(c.GlobalEvent.OPEN_RESULT),console.log(" open result from action done"))},e.prototype.setPause=function(e){this.gameStart=!e},e.prototype.isGameStarted=function(){return this.gameStart},e.prototype.resetscore=function(){this.score=0},e.prototype.addScore=function(e,t,o){void 0===t&&(t=cc.v2(-200,700)),0!=e&&(null==t&&(t=cc.v2(-200,700)),e=Math.floor(e),this.score+=e,this.score=Math.max(this.score,0),this.ScoreDetail[o]||(this.ScoreDetail[o]=0),this.ScoreDetail[o]+=e,console.log("------------------- score:",this.score,e),a.gEventMgr.emit(c.GlobalEvent.UPDATE_SCORE,e,t))},e.prototype.getScore=function(){return this.score},e.prototype.addFreeDrawTimes=function(e){this.freeDrawTimes+=e,this.freeDrawTimes=Math.max(this.freeDrawTimes,0),a.gEventMgr.emit(c.GlobalEvent.UPDATE_DRAW_ICON)},e.prototype.getFreeDrawTimes=function(){return this.freeDrawTimes},e.prototype.addFlipCounts=function(e){this.isGameStarted()&&(this.flipCounts+=e,this.flipCounts=Math.max(this.flipCounts,0),console.log(" add FlipCounts:",this.flipCounts),this.isComplete()&&a.gEventMgr.emit(c.GlobalEvent.COMPLETE))},e.prototype.getFlipCounts=function(){return this.flipCounts},e.prototype.addStep=function(e,t,o,n,i,r){CELER_X&&(this.stepInfoArray.length=0),this.stepInfoArray.push({node:e,lastParent:t,lastPos:o,func:n,scores:i,scoresPos:r}),a.gEventMgr.emit(c.GlobalEvent.UPDATE_BACK_BTN_ICON)},e.prototype.getPlacePokerRoot=function(){return this.placePokerRoot},e.prototype.getCycledPokerRoot=function(){return this.cyclePokerRoot},e.prototype.addPlacePokerRoot=function(e,t){if(!this.isComplete()){if(e<0||e>6||null===e){var o=t.getComponent(i.default);return console.error(" add an error key:",e),void(o&&console.error(" error poker val:",o.getValue(),", type:",i.PokerType[o.getPokerType()]))}if(this.placePokerRoot.add(e,t),t.getComponent(i.default)&&t.getComponent(i.default).setRecycle(!1),this.placePokerRoot.length>7)console.error(" place Poker Root over size!!!!!:",this.placePokerRoot.length),console.error(this.placePokerRoot.keys)}},e.prototype.addCycledPokerRoot=function(e,t){if(e<0||e>3||null===e){var o=t.getComponent(i.default);return console.error(" add an error key to recycle:",e),void(o&&(console.error(" error poker val:",o.getValue(),", type:",i.PokerType[o.getKey()]),!CELER_X&&(o.frontCard.node.color=cc.Color.RED)))}(this.cyclePokerRoot.add(e,t),t.getComponent(i.default)&&t.getComponent(i.default).setRecycle(!0),this.cyclePokerRoot.length>4)&&(console.error(" cycled Poker root over size!!!!!:",this.cyclePokerRoot.length),console.error(this.cyclePokerRoot.keys))},e.prototype.clearStep=function(){this.stepInfoArray.length=0,a.gEventMgr.emit(c.GlobalEvent.UPDATE_BACK_BTN_ICON)},e.prototype.backStep=function(){if(this.stepInfoArray.length<=0)console.log(" no cache step!");else if(o.Game.isComplete())console.log(" game is complete ,cant go back");else{for(var e=this.stepInfoArray[this.stepInfoArray.length-1],t=!1,n=!0,s=0,l=e.node;s<l.length;s++){if((g=l[s]).getNumberOfRunningActions()>0){t=!0;break}if(g.getComponent(i.default)&&!g.getComponent(i.default).isMoveEnd&&["PokerDevl","PokerFlipRoot"].indexOf(g.parent.name)<0){0;break}}if(n)if(t)console.log(" click back step ! but has running action! ");else{for(var d=!1,u=!0,p=0,h=e.lastParent;p<h.length;p++){var g;if((g=h[p]).getNumberOfRunningActions()>0){d=!0;break}if(g.getComponent(i.default)&&!g.getComponent(i.default).isMoveEnd&&["PokerDevl","PokerFlipRoot"].indexOf(g.parent.name)<0){0;break}}if(u)if(d)console.log(" click back step ! parent but has running action! ");else{o.Game.resetCombo();var f=this.stepInfoArray.pop();a.gEventMgr.emit(c.GlobalEvent.UPDATE_BACK_BTN_ICON);for(var m=0,_=function(){m++;var e=f.node.pop(),t=f.lastParent.pop(),n=f.lastPos.pop(),s=f.func?f.func.pop():null,l=f.scores&&f.scores.length>0?f.scores.pop():0,d=f.scoresPos&&f.scoresPos.length>0?f.scoresPos.pop():null;d?o.Game.addScore(l,d,"back"):o.Game.addScore(l,null,"back");var u=e.getComponent(i.default);if("PokerClip"==t.name||"PokerFlipRoot"==t.name||u&&u.isCycled()){var p=CMath.ConvertToNodeSpaceAR(e,t);e.setPosition(p)}else e.setPosition(n);if(s&&s.callback&&s.target&&(console.log("call func !"),s.callback.apply(s.target,s.args)),e.setParent(t),("CycleRoot"==t.name||t.getComponent(i.default)&&t.getComponent(i.default).isCycled())&&u.setRecycle(!0),e.group="top",u){var h="PokerClip"==t.name?u.getLastPosition():"PokerFlipRoot"==t.name?u.getFlipPos():u.getDefaultPosition();t.getComponent(i.default)?t.getComponent(i.default).isCycled()?(h.x=0,h.y=0):s&&s.callback&&s.callback==t.getComponent(i.default).flipCard?h.y=r.OFFSET_Y/3:h.y=r.OFFSET_Y:"PokerFlipRoot"!=t.name&&(h.x=0,h.y="PokerDevl"!=t.name?r.Empty_Offset:0),t&&t.parent&&"CycleRoot"==t.parent.name&&(h.x=0,h.y=0);var g=cc.sequence(cc.delayTime(m/500),cc.callFunc(function(){a.gEventMgr.emit(c.GlobalEvent.DEV_POKERS),u.node.stopActionByTag(r.ACTION_TAG.FLIP_CARD_REPOS_ON_REMOVE),u.node.stopActionByTag(r.ACTION_TAG.FLIP_CARD_REPOS_ON_ADD),u.node.stopActionByTag(r.ACTION_TAG.SHAKE)},v),cc.moveTo(.1,h.x,h.y),cc.callFunc(function(){e.group="default",u.setDefaultPosition()},v));g.setTag(r.ACTION_TAG.BACK_STEP),u.node.runAction(g)}},v=this;f.node.length>0;)_()}else console.log(" poker parent is moving;")}else console.log(" poker is moving;")}},e.prototype.canBackStep=function(){return this.stepInfoArray.length>0},Object.defineProperty(e.prototype,"PauseCount",{get:function(){return this.pauseCount},set:function(e){this.pauseCount=e,this.pauseCount>2&&o.Game.addScore(-1e3,null,"pause")},enumerable:!0,configurable:!0}),e}();o.Game=s.inst,!CELER_X&&(window.Game=o.Game),cc._RF.pop()},{"../Poker":"Poker","../Pokers":"Pokers","../utils/HashMap":"HashMap","./EventManager":"EventManager","./EventName":"EventName"}],Guide:[function(e,t,o){"use strict";cc._RF.push(t,"b35055BqMpN/5j/PIM39A+p","Guide"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("./controller/EventManager"),i=e("./controller/EventName"),r=e("./Poker"),a=cc._decorator,c=a.ccclass,s=a.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.GuideAtlas=null,t.GuideHand=null,t.GuideEnd=null,t.Corn=null,t.ButtonAtlas=null,t.Next=null,t.OK=null,t.Forward=null,t.GuideView=null,t.Resume=null,t.Skip=null,t.Block=null,t.GuideBlock=null,t.callback=null,t.guideSteps=[],t.isGuide=!1,t.index=1,t.guideDefaultY=0,t}return __extends(t,e),t.prototype.onLoad=function(){var e=this;this.guideDefaultY=this.Corn.node.y,this.GuideHand.node.active=!1,this.Next.node.on(cc.Node.EventType.TOUCH_END,this.nextPage,this),this.Forward.node.on(cc.Node.EventType.TOUCH_END,this.forwardPage,this),this.Resume.node.on(cc.Node.EventType.TOUCH_END,function(){e.hide()},this),this.Skip.node.on(cc.Node.EventType.TOUCH_END,function(){e.Skip.node.scale<.9||e.hide()},this),this.OK.node.on(cc.Node.EventType.TOUCH_END,function(){e.OK.node.scale<.9||(e.nextGuide(),e.OK.node.active=!1,e.isGuide=!0)},this),n.gEventMgr.on(i.GlobalEvent.POP_GUIDE_STEP,function(){e.guideSteps.length<=0||!e.node.active||(e.popStep(),e.nextGuide())},this),this.Block.on(cc.Node.EventType.TOUCH_START,this.onBlockTouch,this),this.Block.on(cc.Node.EventType.TOUCH_CANCEL,this.onBlockTouchCancel,this),this.Block.on(cc.Node.EventType.TOUCH_END,this.onBlockTouchEnd,this),this.Block.on(cc.Node.EventType.TOUCH_MOVE,this.onBlockTouchMove,this)},t.prototype.onBlockTouch=function(e){if(!(this.guideSteps.length<=0)&&this.isGuide)for(var t=0,o=this.guideSteps[0].touches;t<o.length;t++){var n=o[t],i=null;if(n.node.getComponent(r.default)&&n.node.getComponent(r.default).getNext()&&(i=n.node.getComponent(r.default).getNext().node),CMath.GetBoxToWorld(n.node,i).contains(e.getLocation())){var a=new cc.Event.EventCustom(e.getType(),!1);a.setUserData(n.callback),a.getID=function(){return 0},n.node.dispatchEvent(a),n.touchStarted=!0}}},t.prototype.onBlockTouchCancel=function(e){if(!(this.guideSteps.length<=0)&&this.isGuide)for(var t=0,o=this.guideSteps[0].touches;t<o.length;t++){var n=o[t],i=null;if(n.node.getComponent(r.default)&&n.node.getComponent(r.default).getNext()&&(i=n.node.getComponent(r.default).getNext().node),CMath.GetBoxToWorld(n.node,i).contains(e.getLocation())&&n.touchStarted){var a=new cc.Event.EventCustom(e.getType(),!1);a.setUserData(n.callback),a.getID=function(){return 0},n.node.dispatchEvent(a),n.touchStarted=!1}}},t.prototype.onBlockTouchEnd=function(e){if(!(this.guideSteps.length<=0)&&this.isGuide)for(var t=0,o=this.guideSteps[0].touches;t<o.length;t++){var n=o[t];if(n.node.getComponent(r.default)&&n.node.getComponent(r.default).getNext()&&n.node.getComponent(r.default).getNext().node,n.touchStarted){var i=new cc.Event.EventCustom(e.getType(),!1);i.setUserData(n.callback),i.getID=function(){return 0},n.node.dispatchEvent(i),n.touchStarted=!1}}},t.prototype.popStep=function(){if(!(this.guideSteps.length<=0))for(var e=0,t=this.guideSteps.shift().touches;e<t.length;e++){var o=t[e];o.end&&o.end()}},t.prototype.clearStep=function(){if(!(this.guideSteps.length<=0)){for(var e=0,t=this.guideSteps;e<t.length;e++)for(var o=0,n=t[e].touches;o<n.length;o++){var i=n[o];i.end&&i.end()}this.guideSteps.length=0}},t.prototype.showEnd=function(){var e=this;this.Corn.node.active=!0,this.Corn.node.y=this.guideDefaultY,this.Corn.spriteFrame=this.GuideEnd,this.OK.node.active=!0,this.OK.node.targetOff(this),this.OK.node.on(cc.Node.EventType.TOUCH_END,function(){e.popStep(),e.nextGuide()},this)},t.prototype.onBlockTouchMove=function(e){if(!(this.guideSteps.length<=0)&&this.isGuide)for(var t=0,o=this.guideSteps[0].touches;t<o.length;t++){var n=o[t];!n.isButton&&n.touchStarted&&(e.bubbles=!1,n.node.dispatchEvent(e))}},t.prototype.register=function(e){this.guideSteps=e},t.prototype.startGuide=function(e){cc.Node.maxTouchNum=-1,this.OK.node.active=!0,this.node.active=!0,this.Next.node.active=!1,this.Forward.node.active=!1,this.GuideView.node.active=!1,this.Resume.node.active=!1,this.GuideBlock.active=!1,this.Skip.node.active=!0,this.callback=e,this.isGuide=!1},t.prototype.nextGuide=function(){if(this.guideSteps.length<=0)this.hide();else{this.Corn.spriteFrame=this.GuideAtlas.getSpriteFrame("guide"+this.index),this.Corn.node.y=-265,this.index++;for(var e=this.guideSteps[0],t=[],o=[],n=0,i=e.touches;n<i.length;n++){(s=i[n]).isAction&&o.push(s.node)}if(o.length>0){var r=void 0;r=e.touches.length>1?CMath.ConvertToNodeSpaceAR(o[1],this.GuideHand.node.parent):CMath.ConvertToNodeSpaceAR(o[0],this.GuideHand.node.parent),this.GuideHand.node.position=r}for(var a=0,c=e.touches;a<c.length;a++){var s;if((s=c[a]).node.group="guide",s.start(),s.isAction){r=CMath.ConvertToNodeSpaceAR(s.node,this.GuideHand.node.parent);var l=CMath.Distance(r,this.GuideHand.node.position),d=cc.moveTo(l/550,r);t.push(d),1==t.length&&(t.push(cc.fadeTo(.3,0)),t.push(cc.delayTime(.3)))}}2==t.length&&t.pop(),this.GuideHand.node.active=t.length>0,this.GuideHand.node.stopAllActions(),this.GuideHand.node.opacity=255,t.length>1&&(t.push(cc.fadeTo(.4,255)),this.GuideHand.node.runAction(cc.repeatForever(cc.sequence(t))))}},t.prototype.hide=function(){this.node.active&&(this.clearStep(),this.node.active=!1,this.callback&&this.callback(),this.callback=null,cc.Node.maxTouchNum=1,cc.Node.touchNum=0)},t.prototype.showBlock=function(){this.Block.active=!0,this.node.active=!0,this.Corn.node.active=!0,this.OK.node.active=!1,this.Skip.node.active=!1,this.isGuide=!1},t.prototype.show=function(e){this.OK.node.active=!1,this.Corn.node.active=!1,this.GuideHand.node.active=!1,this.isGuide=!1,this.Resume.node.active=!1,this.Next.node.active=!0,this.GuideView.node.active=!0,this.Skip.node.active=!1,this.Next.node.active=!0,this.Forward.node.active=!0,this.GuideBlock.active=!0,this.node.active=!0,this.callback=e,this.GuideView.scrollToPage(0,0),this.Forward.node.active=!1,this.Next.node.getChildByName("Background").getComponent(cc.Sprite).spriteFrame=this.ButtonAtlas.getSpriteFrame("btn_new")},t.prototype.nextPage=function(){if(this.GuideView.getCurrentPageIndex()>=this.GuideView.content.childrenCount-1)this.hide();else{var e=(this.GuideView.getCurrentPageIndex()+1)%this.GuideView.content.childrenCount;this.GuideView.setCurrentPageIndex(e),e>=this.GuideView.content.childrenCount-1&&(this.Next.node.getChildByName("Background").getComponent(cc.Sprite).spriteFrame=this.ButtonAtlas.getSpriteFrame("new_close")),this.Forward.node.active=0!=e}},t.prototype.forwardPage=function(){if(this.GuideView.getCurrentPageIndex()<=0);else{var e=(this.GuideView.getCurrentPageIndex()-1)%this.GuideView.content.childrenCount;this.GuideView.setCurrentPageIndex(e),this.Forward.node.active=0!=e,this.Next.node.getChildByName("Background").getComponent(cc.Sprite).spriteFrame=this.ButtonAtlas.getSpriteFrame("btn_new")}},__decorate([s(cc.SpriteAtlas)],t.prototype,"GuideAtlas",void 0),__decorate([s(cc.Animation)],t.prototype,"GuideHand",void 0),__decorate([s(cc.SpriteFrame)],t.prototype,"GuideEnd",void 0),__decorate([s(cc.Sprite)],t.prototype,"Corn",void 0),__decorate([s(cc.SpriteAtlas)],t.prototype,"ButtonAtlas",void 0),__decorate([s(cc.Button)],t.prototype,"Next",void 0),__decorate([s(cc.Button)],t.prototype,"OK",void 0),__decorate([s(cc.Button)],t.prototype,"Forward",void 0),__decorate([s(cc.PageView)],t.prototype,"GuideView",void 0),__decorate([s(cc.Button)],t.prototype,"Resume",void 0),__decorate([s(cc.Button)],t.prototype,"Skip",void 0),__decorate([s(cc.Node)],t.prototype,"Block",void 0),__decorate([s(cc.Node)],t.prototype,"GuideBlock",void 0),t=__decorate([c],t)}(cc.Component);o.default=l,cc._RF.pop()},{"./Poker":"Poker","./controller/EventManager":"EventManager","./controller/EventName":"EventName"}],HashMap:[function(e,t,o){"use strict";cc._RF.push(t,"07791aKdvNDo7wFtZ+VAQS2","HashMap"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function e(){this._list=new Array,this.clear()}return e.prototype.getIndexByKey=function(e){for(var t=this._list.length,o=0;o<t;o++){if(this._list[o].key==e)return o}return-1},e.prototype.keyOf=function(e){for(var t=this._list.length,o=0;o<t;o++){var n=this._list[o];if(n.value==e)return n.key}return null},Object.defineProperty(e.prototype,"keys",{get:function(){for(var e=new Array,t=0,o=this._list;t<o.length;t++){var n=o[t];n&&e.push(n.key)}return e},enumerable:!0,configurable:!0}),e.prototype.add=function(e,t){var o={key:e,value:t},n=this.getIndexByKey(e);-1!=n?this._list[n]=o:this._list.push(o)},Object.defineProperty(e.prototype,"values",{get:function(){return this._list},enumerable:!0,configurable:!0}),e.prototype.remove=function(e){var t=this.getIndexByKey(e);if(-1!=t){var o=this._list[t];return this._list.splice(t,1),o}return null},e.prototype.has=function(e){return-1!=this.getIndexByKey(e)},e.prototype.get=function(e){var t=this.getIndexByKey(e);return-1!=t?this._list[t].value:null},Object.defineProperty(e.prototype,"length",{get:function(){return this._list.length},enumerable:!0,configurable:!0}),e.prototype.sort=function(e){this._list.sort(e)},e.prototype.forEachKeyValue=function(e){for(var t=this._list.length,o=0;o<t;o++){e(this._list[o])}},e.prototype.forEach=function(e,t){var o=this._list.length;if(t)for(var n=o-1;n>=0;n--){e((i=this._list[n]).key,i.value)}else for(n=0;n<o;n++){var i;e((i=this._list[n]).key,i.value)}},e.prototype.clear=function(){this._list=[]},e}();o.HashMap=n,cc._RF.pop()},{}],LogHandler:[function(e,t,o){"use strict";cc._RF.push(t,"45299DlRNZPZres/N0gEeTm","LogHandler"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function e(){if(this.logMsg=null,this.frameTimes=0,this.now=0,this.Frame=20,this.totalFrames=0,this.startTime=0,window.addEventListener)for(var t=0,o=e.LISTENNING_EVENTS;t<o.length;t++){var n=o[t],i="trigger"+n.charAt(0).toLocaleUpperCase()+n.substring(1);this[i]&&"function"==typeof this[i]&&window.addEventListener(n,this[i].bind(this))}}return Object.defineProperty(e,"inst",{get:function(){return this.ins?this.ins:this.ins=new e},enumerable:!0,configurable:!0}),e.prototype.dumpFrameInfo=function(){var e=(Date.now()-this.startTime)/1e3,t=e/this.totalFrames;this.addLog(" total frames:",this.totalFrames," ,total cost time:",e+"s"," , per frame cost time ave:"+t+"s"),this.sendLog()},e.prototype.initLog=function(t){var o=this;cc.director.once(cc.Director.EVENT_AFTER_SCENE_LAUNCH,function(){o.frameTimes=0,o.now=Date.now(),o.startTime=Date.now()},this),cc.director.on(cc.Director.EVENT_AFTER_DRAW,function(){o.frameTimes++,o.totalFrames++,o.frameTimes>=o.Frame&&(o.frameTimes=0,o.now=Date.now())},this),this.logFunc=t,console.error=function(){for(var t,o=[],n=0;n<arguments.length;n++)o[n]=arguments[n];(t=e.inst).log.apply(t,["[ERROR]"].concat(o))},console.warn=function(){for(var t,o=[],n=0;n<arguments.length;n++)o[n]=arguments[n];(t=e.inst).log.apply(t,["[WARN]"].concat(o))},console.log=function(){for(var t,o=[],n=0;n<arguments.length;n++)o[n]=arguments[n];(t=e.inst).log.apply(t,["[INFO]"].concat(o))}},e.prototype.log=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.addLog.apply(this,e),this.sendLog()},e.prototype.formatLogArguments=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var o="",n=0;n<arguments.length;n++){var i=typeof arguments[n];"string"==i||"number"==i?o+=" "+arguments[n]:"object"==i?o+=" "+JSON.stringify(arguments[n]):"boolean"==i&&arguments[n].toString&&(o+=arguments[n].toString())}return o},e.prototype.addLog=function(){for(var t=[],o=0;o<arguments.length;o++)t[o]=arguments[o];null==this.logMsg&&(this.logMsg={});var n=this.formatLogArguments.apply(this,t),i=this.getFullTime(new Date);this.logMsg[i]=e.VERSION+n},e.prototype.getFullTime=function(e){var t="";t+=e.getFullYear();var o=e.getMonth();t+="-"+(o>=10?o:"0"+o);var n=e.getDate();t+="-"+(n>=10?n:"0"+n);var i=e.getHours();t+="  "+(i>=10?i:"0"+i);var r=e.getMinutes();t+=":"+(r>=10?r:"0"+r);var a=e.getSeconds();return t+=":"+(a>=10?a:"0"+a)},e.prototype.sendLog=function(){this.logFunc&&null!=this.logMsg&&(this.logFunc(JSON.stringify(this.logMsg)),this.logMsg=null)},e.prototype.triggerClose=function(e){this.addLog("triggerClose"),this.sendLog()},e.prototype.triggerLoad=function(e){this.addLog("triggerLoad"),this.sendLog()},e.prototype.triggerUnload=function(e){this.addLog("triggerUnload"),this.sendLog()},e.prototype.triggerOnunload=function(e){this.addLog("triggerUnload"),this.sendLog()},e.prototype.triggerError=function(e){this.addLog("triggerError"),this.addLog(e.message),this.sendLog()},e.prototype.triggerFocus=function(e){this.addLog("triggerFocus"),this.sendLog()},e.prototype.triggerBlur=function(e){this.addLog("triggerBlur"),this.sendLog()},e.prototype.triggerAbort=function(e){this.addLog("triggerAbort"),this.sendLog()},e.prototype.triggerSuspend=function(e){this.addLog("triggerSuspend"),this.sendLog()},e.prototype.beforeunload=function(e){this.addLog("beforeunload"),this.sendLog()},e.VERSION="Solitaire Win version 134 : ",e.LISTENNING_EVENTS=["error"],e}();o.LogHandler=n,cc._RF.pop()},{}],PokerRoot:[function(e,t,o){"use strict";cc._RF.push(t,"11cba6M6B9Awbm3ikseAzvv","PokerRoot"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("./controller/Game"),i=e("./Poker"),r=cc._decorator,a=r.ccclass,c=(r.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onLoad=function(){this.node.on(cc.Node.EventType.CHILD_ADDED,this.onAddChild,this),this.node.on(cc.Node.EventType.CHILD_REMOVED,this.onChildRemove,this)},t.prototype.start=function(){},t.prototype.onChildRemove=function(){n.Game.isGameStarted()&&n.Game.addPlacePokerRoot(parseInt(this.node.name),this.node)},t.prototype.onAddChild=function(e){var t=e.getComponent(i.default);t?(this.setNewRoot(t),this.next=t,t.setForward(null),t.setRecycle(!1)):console.error(" \u6ca1\u6709 Poker\u7c7b")},t.prototype.setNewRoot=function(e){e.getNext()?this.setNewRoot(e.getNext()):(n.Game.addPlacePokerRoot(parseInt(this.node.name),e.node),e.setNormal())},t.prototype.update=function(e){},t=__decorate([a],t)}(cc.Component));o.default=c,cc._RF.pop()},{"./Poker":"Poker","./controller/Game":"Game"}],Pokers:[function(e,t,o){"use strict";cc._RF.push(t,"d504dBfU4JI0K2nPtJ3w844","Pokers"),Object.defineProperty(o,"__esModule",{value:!0}),o.SpadeStartIndex=0,o.HeartStartIndex=1,o.ClubStartIndex=2,o.DiamondStartIndex=3,o.PokerTypes={spade_:3,club_:10,diamond_:5,heart_:12},o.Empty_Offset=-110,o.GuidePokers=["diamond_,1","spade_,1","heart_,1","club_,1","spade_,2","heart_,2","club_,2","club_,5","spade_,3","heart_,3","club_,3","diamond_,3","spade_,4","heart_,13","club_,4","diamond_,4","spade_,5","heart_,5","diamond_,2","spade_,6","club_,6","heart_,6","diamond_,5","diamond_,6","heart_,7","spade_,7","club_,8","diamond_,7","spade_,8","heart_,8","club_,7","diamond_,8","spade_,9","heart_,9","club_,9","diamond_,9","spade_,10","heart_,10","club_,10","diamond_,10","spade_,11","heart_,11","club_,11","diamond_,11","spade_,12","heart_,12","club_,12","diamond_,12","spade_,13","heart_,4","club_,13","diamond_,13"],o.Pokers=["spade_,1","heart_,1","club_,1","diamond_,1","spade_,2","heart_,2","club_,2","diamond_,2","spade_,3","heart_,3","club_,3","diamond_,3","spade_,4","heart_,4","club_,4","diamond_,4","spade_,5","heart_,5","club_,5","diamond_,5","spade_,6","heart_,6","club_,6","diamond_,6","spade_,7","heart_,7","club_,7","diamond_,7","spade_,8","heart_,8","club_,8","diamond_,8","spade_,9","heart_,9","club_,9","diamond_,9","spade_,10","heart_,10","club_,10","diamond_,10","spade_,11","heart_,11","club_,11","diamond_,11","spade_,12","heart_,12","club_,12","diamond_,12","spade_,13","heart_,13","club_,13","diamond_,13"],o.PokerIndex=[6,5,4,3,2,1,0,12,11,10,9,8,7,17,16,15,14,13,21,20,19,18,24,23,22,26,25,27,28,29,50,49,46,43,40,37,34,31,30,33,36,39,42,45,48,51],function(e){e[e.FLIP_CARD_REPOS_ON_ADD=0]="FLIP_CARD_REPOS_ON_ADD",e[e.FLIP_CARD_REPOS_ON_REMOVE=1]="FLIP_CARD_REPOS_ON_REMOVE",e[e.BACK_STEP=2]="BACK_STEP",e[e.DEV_POKER=3]="DEV_POKER",e[e.RE_DEV_POKER=4]="RE_DEV_POKER",e[e.SHAKE=5]="SHAKE",e[e.RECYCLE=6]="RECYCLE"}(o.ACTION_TAG||(o.ACTION_TAG={})),o.OFFSET_Y=-70,o.OFFSET_X=0,o.FREE_TIME_LIMIT=5,cc._RF.pop()},{}],Poker:[function(e,t,o){"use strict";cc._RF.push(t,"19c3a5acP5K/YiwGw559yBs","Poker"),Object.defineProperty(o,"__esModule",{value:!0});var n,i,r,a=e("./controller/Game"),c=e("./controller/GameFactory"),s=e("./Pokers"),l=e("./controller/EventManager"),d=e("./controller/EventName"),u=cc._decorator,p=u.ccclass,h=u.property;(function(e){e[e.Front=0]="Front",e[e.Back=1]="Back"})(n=o.CardState||(o.CardState={})),function(e){e[e.Red=0]="Red",e[e.Black=1]="Black"}(i=o.PokerColor||(o.PokerColor={})),function(e){e[e.Club=0]="Club",e[e.Spade=1]="Spade",e[e.Heart=2]="Heart",e[e.Diamond=3]="Diamond"}(r=o.PokerType||(o.PokerType={}));var g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.frontCard=null,t.backCard=null,t.pokerAtlas=null,t.RecycleAnimation=null,t.flips=[],t.value=0,t.canMove=!1,t.key=-1,t.next=null,t.forward=null,t.defualtChildCount=0,t.isCheck=!1,t.cycled=!1,t.placeLimit=cc.size(0,0),t.isReadyAutoComplete=!1,t.isguide=!1,t.recycleActionInfo={startTime:0,duration:0},t}var o;return __extends(t,e),o=t,t.prototype.reuse=function(){this.node._onSetParent=this.onSetParent.bind(this),this.RecycleAnimation.node.opacity=0,this.RecycleAnimation.node.active=!1,this.placeLimit.width=this.node.width/2,this.placeLimit.height=.75*this.node.height,this.node.getChildByName("Label").active=!1,this.defualtChildCount=this.node.childrenCount,this.isReadyAutoComplete=!1;var e=arguments[0][0][0];this.isguide=arguments[0][0][1],this.value=parseInt(e.split(",")[1]);var t=e.split(",")[0];switch(this.pokerColer="spade_"==t||"club_"==t?i.Black:i.Red,t){case"spade_":this.pokerType=r.Spade;break;case"club_":this.pokerType=r.Club;break;case"heart_":this.pokerType=r.Heart;break;case"diamond_":this.pokerType=r.Diamond}this.frontCard.spriteFrame=this.pokerAtlas.getSpriteFrame(e.split(",")[0]+this.value),this.frontCard.spriteFrame||console.error("poker card spriteFrame is null, err:",e.split(",")[0]+this.value),this.setCardState(n.Back),this.initEvent()},t.prototype.getPokerColor=function(){return this.pokerColer},t.prototype.getPokerType=function(){return this.pokerType},t.prototype.unuse=function(){this.node.stopAllActions(),this.frontCard.node.stopAllActions(),this.backCard.node.stopAllActions(),this.setCardState(n.Back),this.node.targetOff(this),l.gEventMgr.targetOff(this),this.cycled=!1,this.setForward(null),this.setNext(null),this.isguide=!1,this.node.group="default"},t.prototype.getNext=function(){return this.next},t.prototype.getForward=function(){return this.forward},t.prototype.setNext=function(e){this.next=e,this.node.getChildByName("Label").getComponent(cc.Label).string="forward:"+(this.forward?this.forward.getValue():"null")+"next:"+(this.next?this.next.getValue():"null")+", key:"+this.key},t.prototype.setForward=function(e){this.forward=e},t.prototype.setRecycle=function(e){this.isCycled()!=e&&(this.cycled=e||"CycleRoot"==this.node.parent.parent.name||this.forward&&this.forward.isCycled(),this.node.parent&&"PlaceRoot"==this.node.parent.parent.name&&(this.cycled=!1),this.cycled&&this.setKey(null),this.debugLabel.string+=" , cycle:"+this.isCycled())},Object.defineProperty(t.prototype,"debugLabel",{get:function(){return this.node.getChildByName("Label").getComponent(cc.Label)},enumerable:!0,configurable:!0}),t.prototype.getValue=function(){return this.value},t.prototype.getCardState=function(){return this.carState},t.prototype.initEvent=function(){this.node.on(cc.Node.EventType.CHILD_ADDED,this.onAddChild.bind(this),this),this.node.on(cc.Node.EventType.CHILD_REMOVED,this.onChildRemove.bind(this),this),this.node.on(cc.Node.EventType.TOUCH_START,this.onTouchStart,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this.onMove,this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this.onMoveEnd,this),this.node.on(cc.Node.EventType.TOUCH_END,this.onMoveEnd,this),this.node.on("check-done",this.onCheckDone,this),l.gEventMgr.once(d.GlobalEvent.COMPLETE,this.autoComplete,this),l.gEventMgr.once(d.GlobalEvent.AUTO_COMPLETE_DONE,this.autoCompleteDone,this)},t.prototype.autoCompleteDone=function(){var e=this,t=0;t=Math.max(0,this.recycleActionInfo.duration-(Date.now()-this.recycleActionInfo.startTime)),t+=500,this.scheduleOnce(function(){var t=CMath.ConvertToNodeSpaceAR(e.node,a.Game.removeNode);e.node.setParent(a.Game.removeNode),e.node.setPosition(t),e.node.zIndex=e.value},t/1e3),this.scheduleOnce(function(){var t=(e.value,1),o=CMath.getRandom(0,2);e.canMove=!1,e.node.runAction(cc.sequence(cc.delayTime((13-e.value)/10+CMath.getRandom(0,2)),cc.callFunc(function(){e.frontCard.node.opacity=255,e.node.group=e.isguide?"top-guide":"top",e.node.zIndex=e.value,l.gEventMgr.emit(d.GlobalEvent.PLAY_POKER_FLY)},e),cc.sequence(cc.repeat(cc.spawn(cc.moveBy(.01,1.5*t+o,25).easing(cc.easeQuinticActionOut()),cc.rotateBy(.01,20*t).easing(cc.easeQuadraticActionIn())),30),cc.repeat(cc.spawn(cc.moveBy(.01,2*t+o,-25).easing(cc.easeQuinticActionIn()),cc.rotateBy(.01,20*t).easing(cc.easeQuadraticActionIn())),180),cc.callFunc(function(){console.log("done!"),a.Game.addRemovePokerCount(e.node.childrenCount-e.defualtChildCount+1),c.gFactory.putPoker(e.node)},e))))},(13-this.value)/500+t/1e3+.05)},t.prototype.autoComplete=function(){!this.next&&"PokerFlipRoot"!=this.node.getParent().name||this.isCycled()?(this.isReadyAutoComplete=!0,console.log(" isAutoComplete:",this.isReadyAutoComplete)):this.isReadyAutoComplete=!1},t.prototype.onCheckDone=function(e){this.key==e&&this.isCheck},t.prototype.setDefaultPosition=function(e){this.defaultPos=e||this.node.position.clone()},t.prototype.setLastPosition=function(e){this.lastPos=e||this.node.position.clone()},t.prototype.setFlipPos=function(e){this.flipPos=e||this.node.position.clone()},t.prototype.getFlipPos=function(){return this.flipPos?this.flipPos.clone():this.node.position.clone()},t.prototype.getDefaultPosition=function(){return this.defaultPos?this.defaultPos.clone():this.node.position.clone()},t.prototype.getLastPosition=function(){return this.lastPos?this.lastPos.clone():this.node.position.clone()},t.prototype.setKey=function(e){this.key=e,e&&"NaN"==e.toString()?this.node.getChildByName("Label").getComponent(cc.Label).string+="value:"+this.value.toString():this.node.getChildByName("Label").getComponent(cc.Label).string="next:"+(this.next?this.next.getValue():"null")+", key:"+this.key,this.next&&this.next.getKey()!=this.key&&this.next.setKey(e)},t.prototype.getKey=function(){return this.key},t.prototype.onTouchStart=function(e){if(e.bubbles=!1,this.isguide,this.node.getNumberOfRunningActions()>0)console.log(" has running action, wait on touch start , val:",this.value,", key:",this.key);else if(this.isMoveEnd=!1,e.bubbles=!this.isNormal(),a.Game.resetFreeTime(),this.node.stopActionByTag(s.ACTION_TAG.SHAKE),!a.Game.isTimeOver()&&!a.Game.isComplete()){var t=this.node.getActionByTag(s.ACTION_TAG.BACK_STEP);t&&!t.isDone()||(a.Game.isGameStarted()||a.Game.start(),l.gEventMgr.emit(d.GlobalEvent.PLAY_POKER_PLACE))}},t.prototype.checkAutoRecycle=function(){var e=this;if(this.isCycled())return console.log(" poker is recycled !!! ",this.value,", type:",r[this.pokerType]),!1;var t=-1;if(a.Game.getCycledPokerRoot().forEach(function(n,i){var r=i.getComponent(o);r?o.checkRecycled(r,e)&&(t=n):1==e.value&&(t=n)},!0),this.node.childrenCount>this.defualtChildCount&&t>=0){console.log(" poker has next !!!, childcount:",this.node.childrenCount,", default:",this.defualtChildCount," recycle index:",t,",val: ",this.value,",type:",r[this.pokerType]);var n=this.node.children[this.node.childrenCount-1];return n&&n.getComponent(o)&&console.log(" key:",n.getComponent(o).key," ,val:",n.getComponent(o).value),!1}return t>=0&&t<=3&&null!==t&&(console.log(" recycle count auto place to recycled root:",t),this.placeToNewCycleNode(t)),t>=0&&t<=3&&null!==t},t.prototype.onMove=function(e){if(e.bubbles=!1,this.isguide,this.node.getNumberOfRunningActions()>0)console.log(" has running action, wait on touch move , val:",this.value,", key:",this.key);else if(this.isMoveEnd=!1,e.bubbles=!1,a.Game.resetFreeTime(),!a.Game.isTimeOver()&&!a.Game.isComplete()){var t=this.node.getActionByTag(s.ACTION_TAG.BACK_STEP);if(!t||t.isDone())if(this.canMove){if(!this.isCycled()||!this.next){var o=this.node.getActionByTag(s.ACTION_TAG.RECYCLE);if(!o||o.isDone()){this.node.group=this.isguide?"top-guide":"top";var n=e.getDelta();this.node.x+=n.x,this.node.y+=n.y}}}else console.log(" cant move ")}},t.prototype.setCanMove=function(e){this.canMove=e},t.prototype.onMoveEnd=function(e){var t=this;if(e.bubbles=!1,this.isMoveEnd=!0,this.isguide,this.node.getNumberOfRunningActions()>0)console.log(" has running action, wait on touch end , val:",this.value,", key:",this.key);else if(a.Game.resetFreeTime(),!a.Game.isTimeOver()&&!a.Game.isComplete()){var o=this.node.getActionByTag(s.ACTION_TAG.RECYCLE);if(!o||o.isDone()){var n=this.node.getActionByTag(s.ACTION_TAG.BACK_STEP);if((!n||n.isDone())&&this.defaultPos&&this.canMove){var i=this.checkCanPlace();if(i>=0&&i<=6)this.placeToNewRoot(i);else{var r=this.checkCanRecycled();if(r>=0&&r<=3&&null!==r){if(null===r);this.placeToNewCycleNode(r)}else this.checkAutoRecycle()||(CMath.Distance(this.node.position,this.defaultPos)<5?(this.node.group=this.isguide?"guide":"default",console.log(" return to default pos"),this.node.setPosition(this.defaultPos),this.next||this.shake()):(l.gEventMgr.emit(d.GlobalEvent.DEV_POKERS),this.node.runAction(cc.sequence(cc.moveTo(.1,this.defaultPos.x,this.defaultPos.y),cc.callFunc(function(){t.node.group=t.isguide?"guide":"default"},this)))))}}}}},t.prototype.checkCanPlace=function(){var e=this,t=-1;return a.Game.getPlacePokerRoot().forEach(function(n,i){var r=i.getComponent(o);if((e.node.name!=i.name||!r)&&(!r||r.getKey()!=e.getKey())&&(r&&o.checkBeNext(r,e)||!r&&13==e.value||window.cheat)){var a=CMath.ConvertToNodeSpaceAR(i,e.node.parent);Math.abs(a.x-e.node.position.x)<=e.placeLimit.width&&Math.abs(a.y-e.node.position.y)<=e.placeLimit.height&&(t=n)}}),t},t.prototype.checkCanRecycled=function(){var e=this,t=-1;return this.node.childrenCount>this.defualtChildCount?t:(a.Game.getCycledPokerRoot().forEach(function(n,i){var r=i.getComponent(o);if((e.node.name!=i.name||!r)&&(r&&o.checkRecycled(r,e)||!r&&1==e.value)){var a=CMath.ConvertToNodeSpaceAR(i,e.node.parent);Math.abs(a.x-e.node.x)<=e.placeLimit.width&&Math.abs(a.y-e.node.y)<=e.placeLimit.height&&(t=n)}}),t)},t.prototype.updateRootNode=function(e){if(!(this.isCycled()||null==this.key||null===e||e<0||e>6))if(this.node.childrenCount<=this.defualtChildCount)a.Game.addPlacePokerRoot(e,this.node);else{if(!this.next)return;this.next.updateRootNode.call(this.next,e)}},t.prototype.placeToNewRoot=function(e){var t=this,i=a.Game.getPlacePokerRoot().get(e),c=CMath.ConvertToNodeSpaceAR(this.node,i),u=0;this.isCycled()&&(u=10*-(13-this.value));var p=0,h="PokerFlipRoot"==this.node.getParent().name;h&&(p=20),a.Game.resetCombo();var g=CMath.ConvertToNodeSpaceAR(this.node,a.Game.removeNode);if(a.Game.addScore(u,g,"Recycle-"+r[this.pokerType]+"-"+this.value),a.Game.addScore(p,CMath.ConvertToNodeSpaceAR(this.node.getParent(),a.Game.removeNode),"flip-"+r[this.pokerType]+"-"+this.value),this.forward&&this.forward.carState==n.Back)a.Game.addStep([this.node],[this.forward.node],[this.node.position.clone()],[{callback:this.forward.flipCard,args:[.1,!1,function(){a.Game.addFlipCounts(-1)}],target:this.forward}],[-20-u-p],[g]);else{var f=[];h&&(f=[{callback:a.Game.addFlipCounts,args:[-1],target:a.Game}]),a.Game.addStep([this.node],[this.node.getParent()],[this.node.position.clone()],f,[-u-p],[g])}this.node.setParent(i),this.node.setPosition(c),l.gEventMgr.emit(d.GlobalEvent.PLAY_EFFECT,"lay_success");var m=s.Empty_Offset;i.getComponent(o)&&(m=s.OFFSET_Y),this.setDefaultPosition(cc.v2(0,m)),l.gEventMgr.emit(d.GlobalEvent.DEV_POKERS),l.gEventMgr.emit(d.GlobalEvent.POP_GUIDE_STEP),this.node.runAction(cc.sequence(cc.moveTo(.1,0,m),cc.callFunc(function(){h&&a.Game.addFlipCounts(1),t.node.group=t.isguide?"guide":"default"},this)))},t.prototype.isCycled=function(){return(this.node.parent&&this.node.parent.parent&&"CycleRoot"==this.node.parent.parent.name||this.forward&&this.forward.isCycled())&&(this.cycled=!0,this.setKey(null)),this.node.parent&&this.node.parent.parent&&"PlaceRoot"==this.node.parent.parent.name&&(this.cycled=!1),this.cycled},t.prototype.placeToNewCycleNode=function(e,t){var i=this;if(void 0===t&&(t=0),console.log(" guide;",this.isguide),null===e||e<0||e>3)console.log(" place to new cycle node error:"+e+", val:"+this.value+", type:"+r[this.pokerType]);else{var c=a.Game.getCycledPokerRoot().get(e),u=c.getComponent(o),p=this.node.getParent(),h=p.getComponent(o);if(p.parent.name===c.parent.name&&!u&&!h||u&&h&&u.value==h.value&&u.pokerType==h.pokerType)return console.log(" click too quick recycle count ,val:",this.value,", key:",this.key),void(0==this.node.x&&0==this.node.y||(console.log(" poker is recycle, but position in wrong"),this.node.x=0,this.node.y=0));if(!(this.node.getNumberOfRunningActions()>0)&&this.isMoveEnd||a.Game.isComplete()){var g=CMath.ConvertToNodeSpaceAR(this.node,c),f=10*(13-this.value),m=0,_="PokerFlipRoot"==this.node.getParent().name;_&&(m=20,a.Game.addFlipCounts(1)),this.isCycled()?(f=0,m=0):a.Game.addCombo(1);var v,y=CMath.ConvertToNodeSpaceAR(c,a.Game.removeNode);if(console.log(" add recycle score:",f,", score2:",m," val:",this.value,"type:",r[this.pokerType],"cycle:",this.isCycled()),this.setRecycle(!0),a.Game.addScore(f,y,"Recycle-"+r[this.pokerType]+"-"+this.value),a.Game.addScore(m,CMath.ConvertToNodeSpaceAR(this.node,a.Game.removeNode),"flip-"+r[this.pokerType]+"-"+this.value),this.forward&&this.forward.carState==n.Back)a.Game.addStep([this.node],[this.forward.node],[this.node.position.clone()],[{callback:this.forward.flipCard,args:[.1,!1,function(){a.Game.addFlipCounts(-1)}],target:this.forward}],[-20-f-m],[y]);else{var C=[];_&&(C=[{callback:a.Game.addFlipCounts,args:[-1],target:a.Game}]),a.Game.addStep([this.node],[this.node.getParent()],[this.node.position.clone()],C,[-f-m],[y])}a.Game.isComplete()&&this.forward&&(v=this.forward.autoComplete.bind(this.forward)),this.node.setParent(c),this.node.setPosition(g);var E=CMath.Distance(g,cc.v2(0,0))/2500;this.setKey(null),this.setNext(null),a.Game.addCycledPokerRoot(e,this.node),this.setDefaultPosition(cc.v2(0,0));var P=cc.sequence(cc.delayTime(t),cc.callFunc(function(){i.node.group=i.isguide?"top-guide":"top"}),cc.moveTo(E,0,0),cc.callFunc(function(){l.gEventMgr.emit(d.GlobalEvent.DEV_POKERS),l.gEventMgr.emit(d.GlobalEvent.PLAY_RECYCLE),l.gEventMgr.emit(d.GlobalEvent.POP_GUIDE_STEP)}),cc.delayTime(0),cc.callFunc(function(){i.node.group=i.isguide?"guide":"default",i.RecycleAnimation.node.active=!0,i.RecycleAnimation.play(),!a.Game.checkIsRecycleComplete()&&v&&setTimeout(v,e/5)},this));this.recycleActionInfo.duration=1e3*(t+E),this.recycleActionInfo.startTime=Date.now(),P.setTag(s.ACTION_TAG.RECYCLE),this.node.runAction(P)}else console.log(" poker is moving ,cant recycle now, val:",this.value," , key:",this.key)}},t.prototype.check=function(e){this.carState!=n.Back&&(this.value==e?(this.isCheck=!0,13==e?(this.emitCheckDone(),a.Game.clearStep()):this.forward&&this.forward.check.call(this.forward,e+1)):this.isCheck=!1)},t.prototype.shake=function(){if(!this.isCycled()&&!(a.Game.isComplete()||this.node.getNumberOfRunningActions()>0)){var e=this.node.getActionByTag(s.ACTION_TAG.BACK_STEP);if(!e||e.isDone()){this.node.group=this.isguide?"guide":"default";var t=this.getDefaultPosition(),o=cc.sequence(cc.repeat(cc.sequence(cc.moveTo(.02,t.x-10,t.y),cc.moveTo(.04,t.x+20,t.y),cc.moveTo(.02,t.x-10,t.y)),5),cc.moveTo(.01,t.x,t.y));o.setTag(s.ACTION_TAG.SHAKE),this.node.stopActionByTag(s.ACTION_TAG.SHAKE),this.node.runAction(o),l.gEventMgr.emit(d.GlobalEvent.PLAY_SHAKE)}}},t.prototype.emitCheckDone=function(){this.node.emit("check-done",this.key),this.next&&this.next.emitCheckDone.call(this.next)},t.prototype.onAddChild=function(e){var t=this,n=e.getComponent(o);if(n)if(this.setNext(n),this.isCycled()){n.setRecycle(!0);var i=-1;if(a.Game.getCycledPokerRoot().forEach(function(e,n){var r=n.getComponent(o);r&&r.getValue()==t.value&&r.getPokerType()==t.pokerType&&(i=e)}),i>=0&&i<=3&&null!==i&&a.Game.addCycledPokerRoot(i,e),this.forward&&this.forward.forward){var c=this.forward.forward;this.scheduleOnce(function(){c.frontCard.node.opacity=0},.1)}}else n.setRecycle(!1),o.checkBeNext(this,this.next)?this.setNormal():this.setAllGray(),n.setNormal(),this.key>=0&&this.key<=6&&null!==this.key?this.updateRootNode(this.key):console.log(" invaild key, and poker is not recycle, val:",this.value,", type:",r[this.pokerType]);else console.error(" \u6ca1\u6709 Poker\u7c7b")},t.checkBeNext=function(e,t){return!(!t||!e)&&(!!window.cheat||e.getValue()-t.getValue()==1&&e.getPokerColor()!=t.getPokerColor())},t.checkRecycled=function(e,t){return!(!t||!e)&&(e.getValue()-t.getValue()==-1&&e.getPokerType()==t.getPokerType())},t.prototype.onChildRemove=function(e){if(this.setNext(null),a.Game.isGameStarted()&&!a.Game.isComplete()){if(this.isCycled()){this.forward&&this.forward.forward&&(this.forward.forward.frontCard.node.opacity=255);var t=e.getComponent(o),i=null;return a.Game.getCycledPokerRoot().forEach(function(e,n){var r=n.getComponent(o);t&&r&&r.getValue()==t.getValue()&&r.getPokerType()==t.getPokerType()&&(i=e)}),null!==i&&i>=0&&i<=3?a.Game.addCycledPokerRoot(i,this.node):console.log(" index is null on  recyclePoker is RemoveChild, val:",this.value,", type:",r[this.pokerType]),void(t&&this.isCycled()&&t.setRecycle(!1))}if(this.node.childrenCount<=this.defualtChildCount)console.log("onChildRemove update poker root:",this.key,",value:",this.value),this.key>=0&&this.key<=6&&null!==this.key?a.Game.addPlacePokerRoot(this.key,this.node):console.error(" invaild key, onChildremove:",this.value,", type:",r[this.pokerType]),this.setNormal(),this.carState==n.Back?(this.flipCard(.1),a.Game.addFlipCounts(1),a.Game.addScore(20,CMath.ConvertToNodeSpaceAR(this.node,a.Game.removeNode),"flip-"+r[this.pokerType]+"-"+this.value)):this.forward&&this.forward.updateState.call(this.forward);else console.error("onChildRemove childrenCount >= defaultCount:",this.key,",value:",this.value)}},t.prototype.updateState=function(){this.next?(o.checkBeNext(this,this.next)&&this.next.isNormal()?this.setNormal():this.canMove=!1,this.forward&&this.forward.updateState.call(this.forward)):this.setNormal()},t.prototype.setAllGray=function(){this.node.parent&&(this.canMove=!1,this.forward&&this.forward.setAllGray.call(this.forward))},t.prototype.setNormal=function(){this.frontCard.node.color=cc.Color.WHITE,this.canMove=this.carState==n.Front},t.prototype.isGray=function(){return 0==this.canMove},t.prototype.setCardState=function(e,t){void 0===t&&(t=!0),this.carState=e,this.frontCard.node.scaleX=this.carState==n.Front?1:0,this.backCard.node.scaleX=this.carState==n.Back?1:0,this.canMove=this.carState==n.Front&&t,this.canMove&&this.next&&!o.checkBeNext(this,this.next)&&(this.canMove=!1),this.canMove?this.setDefaultPosition():this.forward},t.prototype.isNormal=function(){return this.carState==n.Front&&this.canMove},t.prototype.isFront=function(){return this.carState==n.Front},t.prototype.setGuide=function(e){this.isguide=e},t.prototype.flipCard=function(e,t,o){var i=this;if(void 0===e&&(e=1),void 0===t&&(t=!0),this.frontCard.node.getNumberOfRunningActions()>0||this.backCard.node.getNumberOfRunningActions()>0)return console.log("flip action not done!"),void this.flips.push(e);this.carState==n.Back?(this.frontCard.node.runAction(cc.sequence(cc.delayTime(e),cc.scaleTo(e,1,1),cc.callFunc(function(){i.setCardState(n.Front,t),o&&o(),i.flips.length>0&&(i.frontCard.node.stopAllActions(),i.backCard.node.stopAllActions(),i.flipCard.call(i,i.flips.pop()))},this))),this.backCard.node.runAction(cc.scaleTo(e,0,1))):(this.backCard.node.runAction(cc.sequence(cc.delayTime(e),cc.scaleTo(e,1,1),cc.callFunc(function(){i.setCardState(n.Back,!1),o&&o(),i.flips.length>0&&(i.backCard.node.stopAllActions(),i.frontCard.node.stopAllActions(),i.flipCard.call(i,i.flips.pop()))},this))),this.frontCard.node.runAction(cc.scaleTo(e,0,1)))},t.prototype.start=function(){},t.prototype.update=function(e){if(this.isCycled())this.node.parent&&this.node.parent.parent&&"CycleRoot"==this.node.parent.parent.name&&this.node.getNumberOfRunningActions()<=0&&this.isMoveEnd&&(this.node.y=0,this.node.x=0);else if(this.node.parent&&this.node.parent.parent&&"PlaceRoot"==this.node.parent.parent.name&&this.node.getNumberOfRunningActions()<=0&&this.isMoveEnd&&(this.node.y=s.Empty_Offset),this.isReadyAutoComplete){var t=!this.checkAutoRecycle();t!=this.isReadyAutoComplete&&console.log(" autoRecycle:",t),this.isReadyAutoComplete=t}},t.prototype.onSetParent=function(e){if(e){var t=e.getComponent(o);t?(this.setForward(t),this.setKey(t.getKey())):(this.setForward(null),this.setKey(parseInt(e.name))),t&&t.isCycled()||e&&e.parent&&"CycleRoot"==e.parent.name?(this.setKey(null),this.setRecycle(!0)):e&&"RemoveNode"!=e.name&&this.setRecycle(!1)}else this.setForward(null)},t.DebugRecycIndex=0,__decorate([h(cc.Sprite)],t.prototype,"frontCard",void 0),__decorate([h(cc.Sprite)],t.prototype,"backCard",void 0),__decorate([h(cc.SpriteAtlas)],t.prototype,"pokerAtlas",void 0),__decorate([h(cc.Animation)],t.prototype,"RecycleAnimation",void 0),t=o=__decorate([p],t)}(cc.Component);o.default=g,cc._RF.pop()},{"./Pokers":"Pokers","./controller/EventManager":"EventManager","./controller/EventName":"EventName","./controller/Game":"Game","./controller/GameFactory":"GameFactory"}],RecycleRoot:[function(e,t,o){"use strict";cc._RF.push(t,"bc8dfsy/SxCYZDWNhC7pOvt","RecycleRoot"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("./controller/Game"),i=e("./Poker"),r=cc._decorator,a=r.ccclass,c=(r.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onLoad=function(){this.node.on(cc.Node.EventType.CHILD_ADDED,this.onAddChild,this),this.node.on(cc.Node.EventType.CHILD_REMOVED,this.onChildRemove,this)},t.prototype.onAddChild=function(e){var t=e.getComponent(i.default);t&&(t.setNext(null),t.setRecycle(!0)),n.Game.addCycledPokerRoot(parseInt(this.node.name),e)},t.prototype.onChildRemove=function(e){n.Game.addCycledPokerRoot(parseInt(this.node.name),this.node)},t.prototype.start=function(){},t.prototype.update=function(e){},t=__decorate([a],t)}(cc.Component));o.default=c,cc._RF.pop()},{"./Poker":"Poker","./controller/Game":"Game"}],Result:[function(e,t,o){"use strict";cc._RF.push(t,"3d3e694EHtE55kWvZJIadml","Result"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("./controller/Game"),i=e("./controller/EventManager"),r=e("./controller/EventName"),a=cc._decorator,c=a.ccclass,s=a.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.Score=null,t.TimeBonus=null,t.FinalScore=null,t.ConfirmButton=null,t.Title=null,t.TitleAtlas=null,t.Result=null,t.Light=null,t.Stars=null,t.score=0,t.timeBonus=0,t.finalScore=0,t.scoreStep=0,t.timeBonusStep=0,t.finalScoreStep=0,t.showScore=0,t.scoreComplete=!1,t.timeBonusComplete=!1,t.finalScoreComplete=!1,t.sumbit=!1,t.alreadySubmit=!1,t}return __extends(t,e),t.prototype.onLoad=function(){var e=this;console.log(" result layer onload..."),n.Game.calTimeBonus(),console.log(" totalScore:",n.Game.getScore()),console.log(" score detail:",n.Game.ScoreDetail),i.gEventMgr.emit(r.GlobalEvent.SMALL_BGM);for(var t=function(e){var t=cc.repeatForever(cc.sequence(cc.fadeIn(CMath.getRandom(.5,1.5)).easing(cc.easeQuadraticActionInOut()),cc.fadeOut(CMath.getRandom(.4,.8)).easing(cc.easeQuadraticActionInOut())));e.opacity=0,setTimeout(function(){e.runAction(t)},1e3*CMath.getRandom(0,.5))},o=0,a=this.Stars.children;o<a.length;o++){t(a[o])}this.Light.active=!1,this.Score.string="0",this.TimeBonus.string="0",this.FinalScore.string="0",n.Game.getTimeBonus()>0?n.Game.isComplete()?this.Title.spriteFrame=this.TitleAtlas.getSpriteFrame("bg_complete"):this.Title.spriteFrame=this.TitleAtlas.getSpriteFrame("bg_font02"):n.Game.isComplete()?this.Title.spriteFrame=this.TitleAtlas.getSpriteFrame("bg_complete"):this.Title.spriteFrame=this.TitleAtlas.getSpriteFrame("bg_font03"),i.gEventMgr.emit(r.GlobalEvent.PLAY_OVER_1),this.Result.setEventListener(this.eventListener.bind(this)),this.showScore=Math.max(0,n.Game.getScore()-n.Game.getTimeBonus()),console.log(" result:",n.Game.getScore(),", timeBonus:",n.Game.getTimeBonus(),",showScore:",this.showScore),this.scoreStep=Math.ceil(this.showScore/30),this.timeBonusStep=Math.ceil(n.Game.getTimeBonus()/30),this.finalScoreStep=Math.ceil(n.Game.getScore()/30),this.ConfirmButton.node.on(cc.Node.EventType.TOUCH_END,function(){e.alreadySubmit||(console.log("sumbit score by click, matchid:",n.Game.MatchInfo.matchId,", seed:",n.Game.MatchInfo.sharedRandomSeed),CELER_X&&celerSDK.submitScore(n.Game.getScore()),e.alreadySubmit=!0)},this),i.gEventMgr.on(r.GlobalEvent.RESTART,function(){e.node.removeFromParent()},this)},t.prototype.eventListener=function(e,t){switch(t.stringValue){case"light":this.Light.active=!0,this.Light.runAction(cc.repeatForever(cc.rotateBy(5,360)));break;case"music1":break;case"music2":i.gEventMgr.emit(r.GlobalEvent.PLAY_OVER_2)}},t.prototype.start=function(){},t.prototype.check=function(){var e=this;this.sumbit||this.scoreComplete&&this.timeBonusComplete&&this.finalScoreComplete&&(this.sumbit=!0,console.log("submit"),this.scheduleOnce(function(){e.alreadySubmit||(console.log("sumbit score by scheduleOnce, matchid:",n.Game.MatchInfo.matchId,", seed:",n.Game.MatchInfo.sharedRandomSeed),CELER_X&&celerSDK.submitScore(n.Game.getScore()),e.alreadySubmit=!0)},2))},t.prototype.update=function(e){this.score<this.showScore?(this.score+=this.scoreStep,this.score=Math.min(this.score,this.showScore),this.Score.string=this.score.toString()):(this.scoreComplete=!0,this.check()),this.timeBonus<n.Game.getTimeBonus()?(this.timeBonus+=this.timeBonusStep,this.timeBonus=Math.min(this.timeBonus,n.Game.getTimeBonus()),this.TimeBonus.string=this.timeBonus.toString()):(this.timeBonusComplete=!0,this.check()),this.finalScore<n.Game.getScore()?(this.finalScore+=this.finalScoreStep,this.finalScore=Math.min(this.finalScore,n.Game.getScore()),this.FinalScore.string=this.finalScore.toString()):(this.finalScoreComplete=!0,this.check())},__decorate([s(cc.Label)],t.prototype,"Score",void 0),__decorate([s(cc.Label)],t.prototype,"TimeBonus",void 0),__decorate([s(cc.Label)],t.prototype,"FinalScore",void 0),__decorate([s(cc.Button)],t.prototype,"ConfirmButton",void 0),__decorate([s(cc.Sprite)],t.prototype,"Title",void 0),__decorate([s(cc.SpriteAtlas)],t.prototype,"TitleAtlas",void 0),__decorate([s(sp.Skeleton)],t.prototype,"Result",void 0),__decorate([s(cc.Node)],t.prototype,"Light",void 0),__decorate([s(cc.Node)],t.prototype,"Stars",void 0),t=__decorate([c],t)}(cc.Component);o.default=l,cc._RF.pop()},{"./controller/EventManager":"EventManager","./controller/EventName":"EventName","./controller/Game":"Game"}],ScoreLabel:[function(e,t,o){"use strict";cc._RF.push(t,"63782W3hqJOj5tpO+PG+bef","ScoreLabel"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,i=n.ccclass,r=n.property,a=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.Score=null,t}return __extends(t,e),t.prototype.reuse=function(){this.node.scale=0,console.log(arguments[0][0]),this.Score.string=arguments[0][0]},t.prototype.unuse=function(){this.node.group="top"},t.prototype.onLoad=function(){},t.prototype.start=function(){},__decorate([r(cc.Label)],t.prototype,"Score",void 0),t=__decorate([i],t)}(cc.Component);o.default=a,cc._RF.pop()},{}],Stop:[function(e,t,o){"use strict";cc._RF.push(t,"8765cbDuHdBm6FKOUQ5ug79","Stop"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("./controller/Game"),i=e("./controller/EventManager"),r=e("./controller/EventName"),a=e("./Guide"),c=cc._decorator,s=c.ccclass,l=c.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.EndButton=null,t.ResumeButton=null,t.Help=null,t.Content=null,t.TitleAtlas=null,t.Title=null,t.Guide=null,t.Block=null,t.DrawCardAni=null,t.Warning=null,t.effect=!1,t}return __extends(t,e),Object.defineProperty(t.prototype,"VolumeSlider",{get:function(){return this.node.getChildByName("VolumeSlider").getComponent(cc.Slider)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Mask",{get:function(){return this.VolumeSlider.node.getChildByName("Mask")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"WarningTitle",{get:function(){return this.node.getChildByName("bg_pause_font").getComponent(cc.Sprite)},enumerable:!0,configurable:!0}),t.prototype.onLoad=function(){this.EndButton.node.on(cc.Node.EventType.TOUCH_END,this.endNow,this),this.ResumeButton.node.on(cc.Node.EventType.TOUCH_END,this.Resume,this),this.Help.node.on(cc.Node.EventType.TOUCH_END,this.ShowHelp,this),this.VolumeSlider.node.on("slide",this.onSlider,this),this.Content._enableBold(!0)},t.prototype.onSlider=function(){cc.audioEngine.setEffectsVolume(this.VolumeSlider.progress),cc.audioEngine.setMusicVolume(this.VolumeSlider.progress),this.updateMask()},t.prototype.endNow=function(e){if(this.node.active)return e.getUserData&&"function"==typeof e.getUserData()?(e.getUserData()(),void this.hide(!1)):void i.gEventMgr.emit(r.GlobalEvent.OPEN_RESULT)},t.prototype.hide=function(e){void 0===e&&(e=!0),0!=this.node.active&&(this.node.active=!1,this.effect&&i.gEventMgr.emit(r.GlobalEvent.NORMAL_BGM),e&&n.Game.PauseCount++,n.Game.setPause(!1))},t.prototype.updateMask=function(){this.Mask.width=440*this.VolumeSlider.progress},t.prototype.show=function(e,t,o){if(void 0===o&&(o=!0),!this.node.active){switch(this.node.active=!0,n.Game.PauseCount){case 0:this.WarningTitle.spriteFrame=this.Warning.getSpriteFrame("bg_pause_font2");break;case 1:this.WarningTitle.spriteFrame=this.Warning.getSpriteFrame("bg_pause_font1");break;default:this.WarningTitle.spriteFrame=this.Warning.getSpriteFrame("bg_pause_fontnone")}this.effect=o,this.effect&&(i.gEventMgr.emit(r.GlobalEvent.PLAY_PAUSE),i.gEventMgr.emit(r.GlobalEvent.SMALL_BGM)),this.VolumeSlider.progress=cc.audioEngine.getEffectsVolume(),this.updateMask(),this.Block.active=!t,this.Guide.Corn.node.active=!1,this.DrawCardAni.node.active=t,this.DrawCardAni.play(),this.VolumeSlider.node.active=e>0,e>0?(this.Content.node.y=-33,this.EndButton.node.active=!1,this.ResumeButton.node.x=0,this.Content.string="The game has been paused, please resume.",this.Title.spriteFrame=this.TitleAtlas.getSpriteFrame("bg_font06")):(this.Content.node.y=37,this.EndButton.node.active=!0,this.ResumeButton.node.x=-215,this.Content.string="Do you want to stop now with the current score?",this.Title.spriteFrame=this.TitleAtlas.getSpriteFrame("bg_font01"))}},t.prototype.ShowHelp=function(){this.node.active&&this.Guide.show(function(){})},t.prototype.Resume=function(){this.node.active&&(this.hide(),n.Game.setPause(!1))},t.prototype.start=function(){},__decorate([l(cc.Button)],t.prototype,"EndButton",void 0),__decorate([l(cc.Button)],t.prototype,"ResumeButton",void 0),__decorate([l(cc.Button)],t.prototype,"Help",void 0),__decorate([l(cc.Label)],t.prototype,"Content",void 0),__decorate([l(cc.SpriteAtlas)],t.prototype,"TitleAtlas",void 0),__decorate([l(cc.Sprite)],t.prototype,"Title",void 0),__decorate([l(a.default)],t.prototype,"Guide",void 0),__decorate([l(cc.Node)],t.prototype,"Block",void 0),__decorate([l(cc.Animation)],t.prototype,"DrawCardAni",void 0),__decorate([l(cc.SpriteAtlas)],t.prototype,"Warning",void 0),t=__decorate([s],t)}(cc.Component);o.default=d,cc._RF.pop()},{"./Guide":"Guide","./controller/EventManager":"EventManager","./controller/EventName":"EventName","./controller/Game":"Game"}]},{},["GameScene","Guide","Poker","PokerRoot","Pokers","RecycleRoot","Result","ScoreLabel","Stop","AudioController","EventManager","EventName","Game","GameFactory","HashMap","LogHandler"]);