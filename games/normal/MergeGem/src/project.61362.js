window.__require=function e(t,o,n){function i(r,s){if(!o[r]){if(!t[r]){var l=r.split("/");if(l=l[l.length-1],!t[l]){var c="function"==typeof __require&&__require;if(!s&&c)return c(l,!0);if(a)return a(l,!0);throw new Error("Cannot find module '"+r+"'")}}var u=o[r]={exports:{}};t[r][0].call(u.exports,function(e){return i(t[r][1][e]||e)},u,u.exports,e,t,o,n)}return o[r].exports}for(var a="function"==typeof __require&&__require,r=0;r<n.length;r++)i(n[r]);return i}({AdController:[function(e,t,o){"use strict";cc._RF.push(t,"decf0mFgytIf5CT01/5Yzf2","AdController"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.hasBind=!1,t.finishCallback={},t.failedCallback={},t.adCount=0,t.msgMap={},t.volume=0,t}return __extends(t,e),t.prototype.showAd=function(e,t,o){var n=this;0==this.hasBind&&this.bindCallback();var i=e+this.adCount;if(this.msgMap[i]=e,null==this.finishCallback[i]&&(this.finishCallback[i]=[]),this.finishCallback[i].push(t),null==this.failedCallback[i]&&(this.failedCallback[i]=[]),this.failedCallback[i].push(o),CELER_X)celerSDK.showAd(i);else if(cc.director.getScene()&&cc.director.getScene().getChildByName("Canvas")){var a=cc.director.getScene().getChildByName("Canvas");if(a.getChildByName("adNode"))return;var r=new cc.Node("adNode"),s=r.addComponent(cc.VideoPlayer);s.remoteURL="https://vicat.wang/GameRes/catcatcat.mp4",a.width=1464,a.height=2400,a.addChild(r),r.setPosition(0,0),this.volume=cc.audioEngine.getMusicVolume(),cc.audioEngine.setMusicVolume(0),s.node.on("ready-to-play",function(){console.log("ready-to-play"),r.width=1080,r.height=1920,s.play()},this),s.node.on("meta-loaded",function(){console.log("meta-loaded")},this),s.node.on("clicked",function(){if(console.log("clicked"),r.pauseCount++,r.pauseCount>=5){for(var e=document.getElementsByClassName("cocosVideo"),t=0;t<e.length;t++){var o=e.item(t);o&&o.remove()}setTimeout(function(){r.removeFromParent(!0),r.destroy(),n.onAddFaild(i)},0)}},this),s.node.on("playing",function(){console.log("playing")},this),r.pauseCount=0,s.node.on("paused",function(){if(console.log("paused"),r.pauseCount++,r.pauseCount>=5){for(var e=document.getElementsByClassName("cocosVideo"),t=0;t<e.length;t++){var o=e.item(t);o&&o.remove()}setTimeout(function(){r.removeFromParent(!0),r.destroy(),n.onAddFaild(i)},0)}},this),s.node.on("stopped",function(){console.log("stopped")},this),s.node.on("completed",function(){console.log("completed"),s.stop();for(var e=document.getElementsByClassName("cocosVideo"),t=0;t<e.length;t++){var o=e.item(t);o&&o.remove()}setTimeout(function(){r.removeFromParent(!0),r.destroy(),n.onAdFinish(i)},0)},this)}this.adCount++,console.log(" request ad:",i)},t.prototype.bindCallback=function(){this.hasBind=!0,CELER_X&&(celerSDK.onAdPlayFailed(this.onAddFaild.bind(this)),celerSDK.onAdPlayFinished(this.onAdFinish.bind(this)))},t.prototype.onAdFinish=function(e){if(this.finishCallback[e]){for(var t=0,o=this.finishCallback[e];t<o.length;t++){(0,o[t])(this.msgMap[e])}this.finishCallback[e]=null,this.failedCallback[e]=null,this.msgMap[e]=null}CELER_X||cc.audioEngine.setMusicVolume(this.volume)},t.prototype.onAddFaild=function(e){if(this.failedCallback[e]){for(var t=0,o=this.failedCallback[e];t<o.length;t++){(0,o[t])(this.msgMap[e])}this.failedCallback[e]=null,this.finishCallback[e]=null,this.msgMap[e]=null}CELER_X||cc.audioEngine.setMusicVolume(this.volume)},t}(e("../utils/ToSingleton").SingleTon());o.AdController=n,cc._RF.pop()},{"../utils/ToSingleton":"ToSingleton"}],AdLayer:[function(e,t,o){"use strict";cc._RF.push(t,"67391QyhbBGnpPQUpvrThZw","AdLayer"),Object.defineProperty(o,"__esModule",{value:!0});var n,i=e("../Controller/AdController"),a=e("../Controller/GameStateController"),r=e("../table"),s=e("../Utils/Signal"),l=e("./FlyCnicornAd"),c=e("./WildAdButton"),u=cc._decorator,d=u.ccclass,p=u.property,h=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(s.BaseSignal);o.AdFinishSignal=h,function(e){e[e.Cnicorn=0]="Cnicorn",e[e.Sun=1]="Sun"}(n=o.AdType||(o.AdType={}));var m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.AdAtlas=null,t}return __extends(t,e),Object.defineProperty(t.prototype,"Panel",{get:function(){return this.node.getChildByName("NormalPanel")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"WatchAd",{get:function(){return this.Panel.getChildByName("btn_get")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"BackToGame",{get:function(){return this.Panel.getChildByName("btn_back")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Content",{get:function(){return this.Panel.getChildByName("Content").getComponent(cc.RichText)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Title",{get:function(){return this.Panel.getChildByName("bg_title_freeprop").getComponent(cc.Sprite)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"FailTip",{get:function(){return this.node.getChildByName("FailTip")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"FailLabel",{get:function(){return this.FailTip.getChildByName("Label").getComponent(cc.RichText)},enumerable:!0,configurable:!0}),t.prototype.onLoad=function(){var e=this;this.node.active=!1,this.node.scale=1,c.WildAdButtonClick.inst.addListener(function(){e.Show(n.Sun)},this),l.FlyCnicornClickSignal.inst.addListener(function(){e.Show(n.Cnicorn)},this),this.BackToGame.on(cc.Node.EventType.TOUCH_END,function(){setTimeout(function(){e.node.active=!1,a.GameStateController.inst.resume(),l.default.ShowTimeRest=10},0)},this)},t.prototype.onAdFinish=function(e){var t=this;h.inst.dispatchOne(e),e==n[n.Sun]?c.HideWildAdButtonSignal.inst.dispatch():l.RemoveFlyCnicornSignal.inst.dispatch(),setTimeout(function(){t.node.active=!1,a.GameStateController.inst.resume()},0)},t.prototype.onAdFailed=function(e){var t=this;this.FailTip.active=!0,this.Panel.active=!1,e==n[n.Cnicorn]&&l.CnicornWatchFailSignal.inst.dispatch(),setTimeout(function(){t.node.active=!1,a.GameStateController.inst.resume()},2e3)},t.prototype.Show=function(e){var t=this;1!=this.node.active&&(a.GameStateController.inst.pause(!0),this.FailLabel.string=lan.t(r.En_View.GuangGaoJieMian,r.En_ID.KanGuangGaoShiBai),this.node.active=!0,this.FailTip.active=!1,this.Panel.active=!0,this.WatchAd.active=!0,e==n.Sun?(this.Title.spriteFrame=this.AdAtlas.getSpriteFrame("bg_kill_font1"),this.Content.string=lan.t(r.En_View.GuangGaoJieMian,r.En_ID.ShaSiXiuXiu),this.WatchAd.getComponent(cc.Sprite).spriteFrame=this.AdAtlas.getSpriteFrame("btn_killit"),this.WatchAd.getComponent(cc.Button).normalSprite=this.AdAtlas.getSpriteFrame("btn_killit"),this.WatchAd.getComponent(cc.Button).pressedSprite=this.AdAtlas.getSpriteFrame("btn_killit_down")):(this.Content.node.y=161.776,this.Title.spriteFrame=this.AdAtlas.getSpriteFrame("bg_open_font1"),this.Content.string=lan.t(r.En_View.GuangGaoJieMian,r.En_ID.KaiQiXiangZi),this.WatchAd.getComponent(cc.Sprite).spriteFrame=this.AdAtlas.getSpriteFrame("btn_open"),this.WatchAd.getComponent(cc.Button).normalSprite=this.AdAtlas.getSpriteFrame("btn_open"),this.WatchAd.getComponent(cc.Button).pressedSprite=this.AdAtlas.getSpriteFrame("btn_open_down")),this.WatchAd.targetOff(this),this.WatchAd.once(cc.Node.EventType.TOUCH_END,function(){setTimeout(function(){t.WatchAd.active=!1},0),i.AdController.inst.showAd(n[e],function(e){console.log(" watch ad success:",e),t.onAdFinish(e)},function(e){console.log(" watch ad fail:",e),t.onAdFailed(e)})},this))},__decorate([p(cc.SpriteAtlas)],t.prototype,"AdAtlas",void 0),t=__decorate([d],t)}(cc.Component);o.default=m,cc._RF.pop()},{"../Controller/AdController":"AdController","../Controller/GameStateController":"GameStateController","../Utils/Signal":"Signal","../table":"table","./FlyCnicornAd":"FlyCnicornAd","./WildAdButton":"WildAdButton"}],App:[function(e,t,o){"use strict";cc._RF.push(t,"eaeeaWDD5pJfqkUameEwNsk","App"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../Controller/ResourceController"),i=e("../Initialization/Facade/InitialFacade"),a=e("../Model/PlayModelProxy"),r=cc._decorator,s=r.ccclass,l=r.property,c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.UI=null,t.Animation=null,t.Blue=null,t.Green=null,t.Orange=null,t.Red=null,t.Result=null,t.White=null,t.Page3Normal=null,t.Page3Tutorial=null,t.Get7AnimationRoot=null,t}var o;return __extends(t,e),o=t,t.prototype.onLoad=function(){console.log(" app onload "),n.ResourceController.inst.setAtlas(this.UI),n.ResourceController.inst.setAnimationAtlas(this.Animation),n.ResourceController.inst.setFont(n.Font.ResultScore,this.Result),n.ResourceController.inst.setFont(n.Font.AddScore,this.Green),n.ResourceController.inst.setFont(n.Font.SubScore,this.Red),n.ResourceController.inst.setFont(n.Font.ServenScore,this.Orange),n.ResourceController.inst.setFont(n.Font.ShowScore,this.Blue),n.ResourceController.inst.setFont(n.Font.TimeRed,this.Blue),n.ResourceController.inst.setFont(n.Font.TimeWhite,this.Blue),o.get7AnimationRoot=this.Get7AnimationRoot,o.PageNormal=this.Page3Normal,o.PageTutorial=this.Page3Tutorial},t.prototype.start=function(){i.InitialFacade.inst.start()},t.prototype.update=function(e){a.PlayModelProxy.inst.addGameTime(-e)},t.get7AnimationRoot=null,t.PageNormal=null,t.PageTutorial=null,__decorate([l(cc.SpriteAtlas)],t.prototype,"UI",void 0),__decorate([l(cc.SpriteAtlas)],t.prototype,"Animation",void 0),__decorate([l(cc.Font)],t.prototype,"Blue",void 0),__decorate([l(cc.Font)],t.prototype,"Green",void 0),__decorate([l(cc.Font)],t.prototype,"Orange",void 0),__decorate([l(cc.Font)],t.prototype,"Red",void 0),__decorate([l(cc.Font)],t.prototype,"Result",void 0),__decorate([l(cc.Font)],t.prototype,"White",void 0),__decorate([l(cc.SpriteFrame)],t.prototype,"Page3Normal",void 0),__decorate([l(cc.SpriteFrame)],t.prototype,"Page3Tutorial",void 0),__decorate([l(cc.Node)],t.prototype,"Get7AnimationRoot",void 0),t=o=__decorate([s],t)}(cc.Component);o.default=c,cc._RF.pop()},{"../Controller/ResourceController":"ResourceController","../Initialization/Facade/InitialFacade":"InitialFacade","../Model/PlayModelProxy":"PlayModelProxy"}],AttackAnimation:[function(e,t,o){"use strict";cc._RF.push(t,"314aaAGb5pHNomWeFvJYY87","AttackAnimation"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../../Utils/FrameAniBase"),i=e("../Game/Npc/XiuXiu"),a=cc._decorator,r=a.ccclass,s=(a.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onLoad=function(){var t=this;e.prototype.onLoad.call(this),this.node.opacity=0,i.XiuXiuHitSignal.inst.addListenerOne(function(e){e.toString()==t.node.parent.name&&(t.play(),t.node.opacity=255)},this)},t.prototype.onComplete=function(){this.node.runAction(cc.fadeOut(.1))},t=__decorate([r],t)}(n.default));o.default=s,cc._RF.pop()},{"../../../Utils/FrameAniBase":"FrameAniBase","../Game/Npc/XiuXiu":"XiuXiu"}],AudioManager:[function(e,t,o){"use strict";cc._RF.push(t,"88c70Ktw0pBKKUTDtyQ2NkZ","AudioManager"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../Utils/HashMap"),i=e("../Command/CommonSignal"),a=e("../Controller/GameStateController"),r=e("../Utils/ToSingleton"),s=e("../GamePlay/Model/GamePlayModel"),l=e("../GamePlay/View/Animation/WoodBoxOpenAnimation "),c=e("../GamePlay/View/Game/BoxView"),u=e("../GamePlay/View/Game/Diamonds/DiamondProductView"),d=e("../Utils/Random"),p=e("../GamePlay/Model/Tiled/TiledModel"),h=e("../Model/PlayModelProxy"),m=e("../GamePlay/View/Game/Npc/XiuXiu"),f=e("../GamePlay/Model/Diamonds/DiamondModel");window.oncanplay&&(window.oncanplay=function(){y.canPlay=!0});var g="sounds/",y=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.audioID={},t.clips=new n.HashMap,t.effectVolumeScale=1,t.musicVolumeScale=1,t}return __extends(t,e),t.prototype.init=function(e){var t=this;console.log(" start load AudioClip ");var o=this;cc.loader.loadRes(g+"bgm",cc.AudioClip,function(t,n){t?console.error(t):("string"==typeof n._audio&&cc.loader._cache&&cc.loader._cache[n._audio]&&cc.loader._cache[n._audio].buffer&&(n._audio=cc.loader._cache[n._audio].buffer),o.clips.add(n.name,n),e&&e(),o.playMusic("bgm",!0))}),cc.loader.loadRes(g+"bgm_30",function(e,t){e?console.error(e):o.clips.add(t.name,t)}),cc.loader.loadResDir(g,function(e,o,n){if(e)console.error(e);else for(var i=0,a=o;i<a.length;i++){var r=a[i];"string"==typeof r._audio&&cc.loader._cache&&cc.loader._cache[r._audio]&&cc.loader._cache[r._audio].buffer&&(r._audio=cc.loader._cache[r._audio].buffer),t.clips.has(r.name)||t.clips.add(r.name,r)}}),this.bindSignal()},t.prototype.setEffectVolume=function(e){this.effectVolumeScale=1,cc.audioEngine.setEffectsVolume(e*this.effectVolumeScale)},t.prototype.setMusicVolume=function(e){this.musicVolumeScale=1,cc.audioEngine.setMusicVolume(e*this.musicVolumeScale)},Object.defineProperty(t.prototype,"EffectVolume",{get:function(){return cc.audioEngine.getEffectsVolume()/this.effectVolumeScale},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"MusicVolume",{get:function(){return cc.audioEngine.getMusicVolume()/this.musicVolumeScale},enumerable:!0,configurable:!0}),t.prototype.bindSignal=function(){var e=this;this.setEffectVolume(1),this.setMusicVolume(1),i.UpdateTimeNumber.inst.addListenerOne(function(t){if(t>=30){if(cc.audioEngine.getState(e.audioID.bgm)==cc.audioEngine.AudioState.PLAYING)return;e.playMusic("bgm",!0)}else{if(cc.audioEngine.getState(e.audioID.bgm_30)==cc.audioEngine.AudioState.PLAYING)return;e.playMusic("bgm_30",!0)}},this),i.ScoreCountingSignal.inst.addListener(function(){e.audioID.scoreCount||e.playEffect("scoreCount",!1,function(){e.audioID.scoreCount=null})},this),i.ShowSubmitSignal.inst.addListener(function(){e.audioID.scoreCount&&cc.audioEngine.stopEffect(e.audioID.scoreCount),e.playEffect("showSubmit")},this),i.GameOverSignal.inst.addListenerOne(function(t){t==a.RoundEndType.TimeUp?e.playEffect("timeup"):t==a.RoundEndType.Complete?e.playEffect("complete"):e.playEffect("timeup")},this),i.PlayerScoreChanged.inst.addListenerThree(function(e,t,o){},this),i.GamePauseSignal.inst.addListener(function(){e.playEffect("pause")},this),i.ButtonClickSignal.inst.addListener(function(){e.playEffect("click")},this),i.CountDownSignal.inst.addListener(function(){e.playEffect("countDown")},this),s.Diamond7ScoreUpdateSignal.inst.addListener(function(){e.playEffect("get7")},this),l.WoodBoxOpenedSignal.inst.addListener(function(){e.playEffect("openBox")},this),l.WoodBoxOpenedSignal.inst.addListener(function(){e.playEffect("openBox")},this),c.BoxProgressUpdatedSignal.inst.addListenerThree(function(t,o,n){n<1||(t?e.playEffect("boxDrop2"):e.playEffect("boxDrop1"))},this),u.DiamondProductSignal.inst.addListener(function(){e.playEffect("diamondProduct"+d.Random.randomRoundToInt(1,2))},this),f.DiamondLevelUpdatedSignal.inst.addListenerThree(function(t,o,n){console.log(" merge:",o),o<7?e.playEffect("merge"+d.Random.randomRoundToInt(1,3)):e.playEffect("merge7")},this),s.OnDiamondReturnSignal.inst.addListener(function(){e.audioID.mergeFail||e.playEffect("mergeFail",!1,function(){e.audioID.mergeFail=null})},this),p.TiledLockStateChangedSignal.inst.addListenerTwo(function(t,o){0==o&&e.playEffect("openTiled")},this),h.OnXiuXiuDieSignal.inst.addListener(function(){e.playEffect("xiuxiuDie")},this),m.XiuXiuHitSignal.inst.addListener(function(){e.playEffect("xiuxiuHit")},this),m.XiuXiuBornSignal.inst.addListener(function(){e.playEffect("xiuxiuBorn")},this),m.XiuXiuStealSignal.inst.addListener(function(){e.playEffect("xiuxiuSteal")},this),i.OpenResultLayerSignal.inst.addListener(function(){e.playEffect("showResult")},this),c.SpeedUpBoxSignal.inst.addListener(function(){e.playEffect("speedUpBox")},this)},t.prototype.playEffect=function(e,o,n){var i=this;if(void 0===o&&(o=!1),t.canPlay){if(!(cc.audioEngine.getEffectsVolume()<=.05)){var a=this.clips.get(e);a?(this.audioID[e]=cc.audioEngine.playEffect(a,o),cc.audioEngine.setFinishCallback(this.audioID[e],function(){n&&n()})):cc.loader.loadRes(g+e,cc.AudioClip,function(t,a){t?console.error(t):("string"==typeof a._audio&&cc.loader._cache&&cc.loader._cache[a._audio]&&cc.loader._cache[a._audio].buffer&&(a._audio=cc.loader._cache[a._audio].buffer),i.clips.add(a.name,a),i.audioID[e]=cc.audioEngine.playEffect(a,o),cc.audioEngine.setFinishCallback(i.audioID[e],function(){n&&n()}))})}}else this.bindTouch()},t.prototype.playMusic=function(e,o){var n=this;if(void 0===o&&(o=!0),!t.canPlay)return this.bindTouch(),void t.PlayedList.push({loop:!0,volume:1,clipName:e,supTime:Date.now(),skip:!1,isBgm:!0});var i=this.clips.get(e);i?this.audioID[e]=cc.audioEngine.playMusic(i,o):cc.loader.loadRes(g+e,cc.AudioClip,function(t,i){t?console.error(t):("string"==typeof i._audio&&cc.loader._cache&&cc.loader._cache[i._audio]&&cc.loader._cache[i._audio].buffer&&(i._audio=cc.loader._cache[i._audio].buffer),n.clips.add(i.name,i),n.audioID[e]=cc.audioEngine.playMusic(i,o))})},t.prototype.bindTouch=function(){if(!t.hasBindTouch){var e=this,o=function(){var n;for(cc.game.canvas.removeEventListener("touchstart",o),t.canPlay=!0;(n=t.PlayedList.pop())&&e.clips.get(n.clipName)&&!n.skip;)cc.audioEngine.playMusic(e.clips.get(n.clipName),n.loop)};t.hasBindTouch=!0,cc.game.canvas.addEventListener("touchstart",o)}},t.PlayedList=[],t.canPlay=cc.sys.WIN32==cc.sys.platform,t.hasBindTouch=!1,t}(r.SingleTon());o.gAudio=y.inst,cc._RF.pop()},{"../Command/CommonSignal":"CommonSignal","../Controller/GameStateController":"GameStateController","../GamePlay/Model/Diamonds/DiamondModel":"DiamondModel","../GamePlay/Model/GamePlayModel":"GamePlayModel","../GamePlay/Model/Tiled/TiledModel":"TiledModel","../GamePlay/View/Animation/WoodBoxOpenAnimation ":"WoodBoxOpenAnimation ","../GamePlay/View/Game/BoxView":"BoxView","../GamePlay/View/Game/Diamonds/DiamondProductView":"DiamondProductView","../GamePlay/View/Game/Npc/XiuXiu":"XiuXiu","../Model/PlayModelProxy":"PlayModelProxy","../Utils/HashMap":"HashMap","../Utils/Random":"Random","../Utils/ToSingleton":"ToSingleton"}],BaseMediator:[function(e,t,o){"use strict";cc._RF.push(t,"a76c1ySm3tAQId4zbAsdr/d","BaseMediator"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,i=n.ccclass,a=(n.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.bind=function(e){this.view=e},Object.defineProperty(t.prototype,"View",{get:function(){return console.assert(null!=this.view," view is null"),this.view},enumerable:!0,configurable:!0}),t.prototype.onRegister=function(){console.error(" should override onRegister ")},t.prototype.onUnregister=function(){console.error(" should override onUnregister ")},t=__decorate([i],t)}(cc.Component));o.default=a,cc._RF.pop()},{}],BaseView:[function(e,t,o){"use strict";cc._RF.push(t,"6daedF7tVNJ3qN565kuohVZ","BaseView"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,i=n.ccclass,a=(n.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onLoad=function(){this.node.scale=0},t.prototype.Show=function(e){this.node.active=!0,this.node.runAction(cc.sequence(cc.callFunc(function(){}),cc.scaleTo(.1,1),cc.callFunc(function(){e&&e()})))},t.prototype.Hide=function(e){var t=this;this.node.runAction(cc.sequence(cc.scaleTo(.1,0),cc.callFunc(function(){t.node.active=!1,e&&e()})))},t.prototype.OnClick=function(){},t.prototype.BindMedaitor=function(e){if(!this.node.getComponent(e)){var t=this.node.addComponent(e);return t.bind&&t.bind(this),t.onRegister&&t.onRegister(),t}console.warn(" this node already has the same component..")},t.prototype.UnbindMedaitor=function(e){var t=this.node.getComponent(e);if(t)return t.onUnregister&&t.onUnregister(),t.bind&&t.bind(null),this.node.removeComponent(e),t;console.warn(" component already removed..")},t=__decorate([i],t)}(cc.Component));o.default=a,cc._RF.pop()},{}],BlackView:[function(e,t,o){"use strict";cc._RF.push(t,"f7137KIFk5HzYzsbeidU/gx","BlackView"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../../Command/CommonSignal"),i=e("../../../Controller/GameStateController"),a=cc._decorator,r=a.ccclass,s=(a.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onLoad=function(){var e=this;n.GameOverSignal.inst.addListenerOne(function(t){t!=i.RoundEndType.Complete&&(e.node.active=!0)},this),this.node.active=!1},t.prototype.start=function(){},t=__decorate([r],t)}(cc.Component));o.default=s,cc._RF.pop()},{"../../../Command/CommonSignal":"CommonSignal","../../../Controller/GameStateController":"GameStateController"}],BoxLabelView:[function(e,t,o){"use strict";cc._RF.push(t,"96549356LRProXGkJY/HWrw","BoxLabelView"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../../Utils/Celer/CelerSDK"),i=e("./BoxRoot"),a=e("./BoxView"),r=cc._decorator,s=r.ccclass,l=r.property,c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.ZeroPosition=null,t.WoodPosition=null,t.GoldPosition=null,t}return __extends(t,e),Object.defineProperty(t.prototype,"WoodNumberLabel",{get:function(){return this.node.getChildByName("WoodNumber").getComponent(cc.Label)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"GoldNumberLabel",{get:function(){return this.node.getChildByName("GoldNumber").getComponent(cc.Label)},enumerable:!0,configurable:!0}),t.prototype.onLoad=function(){var e=this;this.GoldNumberLabel.string="0",this.WoodNumberLabel.string="0",this.GoldNumberLabel.node.active=!1,this.WoodNumberLabel.node.setPosition(this.ZeroPosition.position),a.BoxProgressUpdatedSignal.inst.addListenerTwo(this.onBoxProgressUpdated,this),i.ShowGoldBoxSignal.inst.addListener(function(){n.CelerSDK.inst.isAndroidWeb?(e.GoldNumberLabel.node.active=!0,e.GoldNumberLabel.node.setPosition(e.ZeroPosition.position),e.WoodNumberLabel.node.active=!1):(e.GoldNumberLabel.node.active=!0,e.GoldNumberLabel.node.setPosition(e.GoldPosition.position),e.WoodNumberLabel.node.setPosition(e.WoodPosition.position))},this)},t.prototype.onBoxProgressUpdated=function(e,t){e?this.GoldNumberLabel.string=t.toString():this.WoodNumberLabel.string=t.toString()},__decorate([l(cc.Node)],t.prototype,"ZeroPosition",void 0),__decorate([l(cc.Node)],t.prototype,"WoodPosition",void 0),__decorate([l(cc.Node)],t.prototype,"GoldPosition",void 0),t=__decorate([s],t)}(cc.Component);o.default=c,cc._RF.pop()},{"../../../Utils/Celer/CelerSDK":"CelerSDK","./BoxRoot":"BoxRoot","./BoxView":"BoxView"}],BoxRoot:[function(e,t,o){"use strict";cc._RF.push(t,"9a6fbLVSXBDQoJsrAifLmv9","BoxRoot"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../../Command/CommonSignal"),i=e("../../../Controller/GameStateController"),a=e("../../../Global/GameRule"),r=e("../../../Model/PlayModelProxy"),s=e("../../../Utils/Celer/CelerSDK"),l=e("../../../Utils/Signal"),c=e("../../Model/GamePlayModel"),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(l.BaseSignal);o.ShowGoldBoxSignal=u;var d=cc._decorator,p=d.ccclass,h=d.property,m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.WoodPosition=null,t.GoldPosition=null,t}return __extends(t,e),Object.defineProperty(t.prototype,"WoodBox",{get:function(){return this.node.getChildByName("WoodBox")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"GoldBox",{get:function(){return this.node.getChildByName("GoldBox")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Hand",{get:function(){return this.node.getChildByName("Hand")},enumerable:!0,configurable:!0}),t.prototype.onLoad=function(){},t.prototype.start=function(){var e=this;this.GoldBox.active=!1,this.WoodBox.active=!0,this.WoodBox.x=0,this.Hand.active=!1,c.TiledMapStateChangedSignal.inst.addListenerOne(this.onTiledStatedChanged,this),n.UpdateTimeNumber.inst.addListenerOne(this.onTimeUpdate,this),r.TutorialStepSignal.inst.addListenerOne(function(t){switch(console.log(":TutorialStepSignal:",t),t){case 1:break;case 2:e.Hand.active=!0;break;case 3:e.Hand.active=!1}},this)},t.prototype.onTiledStatedChanged=function(e){r.PlayModelProxy.inst.IsOnTutorial||(e&&0==r.PlayModelProxy.inst.hasTouchBox&&0==this.GoldBox.active?this.Hand.active=!0:this.Hand.active=!1)},t.prototype.update=function(){i.GameStateController.inst.isPause()||0==i.GameStateController.inst.isRoundStart()||0!=this.Hand.active&&(0==r.PlayModelProxy.inst.hasTouchBox||(this.Hand.active=!1))},t.prototype.onTimeUpdate=function(e){e<=a.GetGoldBoxTime()&&0==this.GoldBox.active&&(s.CelerSDK.inst.isAndroidWeb?(this.GoldBox.active=!0,this.GoldBox.x=0,this.WoodBox.active=!1):(this.GoldBox.active=!0,this.GoldBox.setPosition(this.GoldPosition.position),this.WoodBox.setPosition(this.WoodPosition.position)),u.inst.dispatch())},__decorate([h(cc.Node)],t.prototype,"WoodPosition",void 0),__decorate([h(cc.Node)],t.prototype,"GoldPosition",void 0),t=__decorate([p],t)}(cc.Component);o.default=m,cc._RF.pop()},{"../../../Command/CommonSignal":"CommonSignal","../../../Controller/GameStateController":"GameStateController","../../../Global/GameRule":"GameRule","../../../Model/PlayModelProxy":"PlayModelProxy","../../../Utils/Celer/CelerSDK":"CelerSDK","../../../Utils/Signal":"Signal","../../Model/GamePlayModel":"GamePlayModel"}],BoxView:[function(e,t,o){"use strict";cc._RF.push(t,"c9845fbUN5MRYKUfk8b9LWb","BoxView"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../../Controller/GameStateController"),i=e("../../../Global/GameRule"),a=e("../../../Model/PlayModelProxy"),r=e("../../../Utils/Cocos"),s=e("../../../Utils/Signal"),l=e("../../Model/GamePlayModel"),c=cc._decorator,u=c.ccclass,d=c.property,p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(s.BaseSignal);o.BoxProgressUpdatedSignal=p;var h=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(s.BaseSignal);o.SpeedUpBoxSignal=h;var m=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(s.BaseSignal);o.AddProgressSignal=m;var f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.isGoldBox=!1,t.totalProgress=4,t.progress=0,t}return __extends(t,e),Object.defineProperty(t.prototype,"ProgressNode",{get:function(){return this.node.getChildByName("Progress")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Full",{get:function(){return this.node.getChildByName("Full")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Progress",{get:function(){return Math.ceil(this.progress)},set:function(e){this.progress=r.Clamp(e,this.totalProgress,0);for(var t=this.totalProgress-this.Progress,o=0,n=this.ProgressNode.children;o<n.length;o++){var i=n[o];i.active=parseInt(i.name)>=t}p.inst.dispatchThree(this.isGoldBox,this.Progress,this.Progress/this.totalProgress)},enumerable:!0,configurable:!0}),t.prototype.onLoad=function(){var e=this;this.Full.active=!1,this.Progress=0,l.TiledMapStateChangedSignal.inst.addListenerOne(this.onTiledStatedChanged,this),m.inst.addListenerOne(this.addProgress,this),this.node.on(cc.Node.EventType.TOUCH_START,function(){e.Full.active&&0==a.PlayModelProxy.inst.IsOnTutorial||(0!=n.GameStateController.inst.isRoundStart()&&!n.GameStateController.inst.isPause()||0!=a.PlayModelProxy.inst.IsOnTutorial)&&(a.PlayModelProxy.inst.IsOnTutorial&&2!=a.PlayModelProxy.inst.ToturialStep||(h.inst.dispatch(),e.addProgress(100),a.PlayModelProxy.inst.hasTouchBox=!0,e.node.stopAllActions(),e.node.runAction(cc.sequence(cc.scaleTo(.05,1.1),cc.scaleTo(.05,1)))))},this)},t.prototype.start=function(){},t.prototype.addProgress=function(e){var t=this;this.Progress>=this.totalProgress||0==this.node.active||this.Full.active||(this.Progress=this.progress+e,this.Progress>=this.totalProgress&&setTimeout(function(){t.Progress=0},200))},t.prototype.onTiledStatedChanged=function(e){this.Full.active=!e},t.prototype.update=function(e){this.node.active&&0==this.Full.active&&n.GameStateController.inst.isRoundStart()&&0==n.GameStateController.inst.isPause()&&(this.isGoldBox?this.addProgress(e*i.GetProgressScale()):this.addProgress(e))},__decorate([d],t.prototype,"isGoldBox",void 0),t=__decorate([u],t)}(cc.Component);o.default=f,cc._RF.pop()},{"../../../Controller/GameStateController":"GameStateController","../../../Global/GameRule":"GameRule","../../../Model/PlayModelProxy":"PlayModelProxy","../../../Utils/Cocos":"Cocos","../../../Utils/Signal":"Signal","../../Model/GamePlayModel":"GamePlayModel"}],CelerSDK:[function(e,t,o){"use strict";cc._RF.push(t,"34a72Ol/DRKJb0NyonTxi8g","CelerSDK"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../ToSingleton"),i=e("../LogHandler"),a=e("../Random"),r=e("../../Command/CommonSignal"),s=e("../../Model/PlayModelProxy"),l=e("../../Controller/GameStateController"),c=e("../../Ad/WildAdButton"),u=e("../../Ad/FlyCnicornAd"),d=e("../../TableManager"),p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.alreadySubmit=!1,t.isNewPlayer=!0,t.celerStartCallback=null,t}return __extends(t,e),Object.defineProperty(t.prototype,"MatchID",{get:function(){return this.match.matchId},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"MatchRandomSeed",{get:function(){return this.match.sharedRandomSeed},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"DifficultyLevel",{get:function(){return this.match.difficultyLevel},enumerable:!0,configurable:!0}),t.prototype.init=function(e){this.alreadySubmit=!1,CELER_X&&celerSDK.onStart(this.onCelerStart.bind(this)),CELER_X&&celerSDK.provideScore(function(){return s.PlayModelProxy.inst.getTotalScore()}),this.celerStartCallback=e,i.LogHandler.inst.ready(),CELER_X?i.LogHandler.inst.initLog(celerSDK.log):console.log("v 1.4")},t.prototype.celerXReady=function(){console.log(" invoke celerx.ready() "),CELER_X?celerSDK.ready():this.onCelerStart()},t.prototype.isNew=function(){return this.isNewPlayer},t.prototype.isOnCelerPlatform=function(){return CELER_X},t.prototype.defineLan=function(){this.match.locale=this.match.locale||"en_US",lan.set(this.match.locale);var e={},t={},o=null;o=d.TableManager.inst.getAll_En_Data();var n=this.match.locale.split("_")[0].charAt(0).toUpperCase()+this.match.locale.split("_")[0].substring(1);if(d.TableManager.inst["getAll_"+n+"_Data"]&&d.TableManager.inst["getAll_"+n+"_Data"]()&&(o=d.TableManager.inst["getAll_"+n+"_Data"]()),o){for(var i in o){var a=o[i];t[a.View]||(t[a.View]={}),t[a.View][a.ID]=a.Text,e[a.View]||(e[a.View]={}),e[a.View][a.ID]={FontSize:a.FontSize,MaxWidth:a.MaxWidth,HorizontalAlign:a.Horizontal,VerticalAlign:a.Vertical,LineHeight:a.LineHeight}}lan.define(this.match.locale,t),lan.defineStyle(this.match.locale,e)}},t.prototype.onCelerStart=function(){console.log(" celerx onStart call"),this.match=CELER_X?celerSDK.getMatch():{matchId:"error : can not get id",shouldLaunchTutorial:!0,sharedRandomSeed:Math.random(),difficultyLevel:0,locale:"en_US"},console.log("match id:",this.match.matchId,", seed:",this.match.sharedRandomSeed),this.defineLan(),a.Random.setRandomSeed(this.match.sharedRandomSeed),s.PlayModelProxy.inst.Level=this.match.difficultyLevel,this.match&&this.match.shouldLaunchTutorial?this.isNewPlayer=!0:this.isNewPlayer=!1,CELER_X&&(this.isNewPlayer||1!=celerSDK.hasMethod("showAd"))&&(c.HideWildAdButtonSignal.inst.dispatch(),u.RemoveFlyCnicornSignal.inst.dispatch()),CELER_X?(celerSDK.onPause(function(){l.GameStateController.inst.isGameOver()||l.GameStateController.inst.isPause()||(console.log(" on pause "),r.ShowPauseLayerSignal.inst.dispatch())}),celerSDK.onResume(function(){console.log(" on resume ")})):(cc.game.on(cc.game.EVENT_HIDE,function(){console.log(" on pause "),r.ShowPauseLayerSignal.inst.dispatch()}),cc.game.on(cc.game.EVENT_SHOW,function(){console.log(" on resume ")})),this.celerStartCallback&&(this.celerStartCallback(),this.celerStartCallback=null)},t.prototype.submitScore=function(e){this.alreadySubmit||(this.alreadySubmit=!0,console.log(" submit score:",e,", match id:",this.match.matchId),CELER_X?celerSDK.submitScore(e):window.location.reload())},Object.defineProperty(t.prototype,"isAndroidWeb",{get:function(){return cc.sys.isMobile&&cc.sys.isBrowser&&cc.sys.os==cc.sys.OS_ANDROID},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isIOSWeb",{get:function(){return cc.sys.isMobile&&cc.sys.isBrowser&&cc.sys.os==cc.sys.OS_IOS},enumerable:!0,configurable:!0}),t}(n.SingleTon());o.CelerSDK=p,cc._RF.pop()},{"../../Ad/FlyCnicornAd":"FlyCnicornAd","../../Ad/WildAdButton":"WildAdButton","../../Command/CommonSignal":"CommonSignal","../../Controller/GameStateController":"GameStateController","../../Model/PlayModelProxy":"PlayModelProxy","../../TableManager":"TableManager","../LogHandler":"LogHandler","../Random":"Random","../ToSingleton":"ToSingleton"}],Cocos:[function(e,t,o){"use strict";cc._RF.push(t,"d9795RGCWVCp5Zf4JNywPPb","Cocos"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("./Random");function i(e){return e&&e.getParent&&e.getParent()?e.getParent().convertToWorldSpaceAR(e.position):cc.v2(0,0)}o.GetWorldPosition=i,o.ConvertToNodeSpaceAR=function(e,t){if(!t)return cc.v2(0,0);var o=i(e);return t.convertToNodeSpaceAR(o)},o.Distance=function(e,t){return Math.sqrt((e.x-t.x)*(e.x-t.x)+(e.y-t.y)*(e.y-t.y))},o.AreaOf2CrossRect=function(e,t){var o=e.x,n=e.y,i=e.x+e.width,a=e.y+e.height,r=t.x,s=t.y,l=t.x+t.width,c=t.y+t.height;return Math.max(0,Math.min(i,l)-Math.max(o,r))*Math.max(0,Math.min(a,c)-Math.max(n,s))},o.disOrderArray=function(e){for(var t,o=0;o<e.length;++o){var i=n.Random.randomFloorToInt(0,e.length);t=[e[i],e[o]],e[o]=t[0],e[i]=t[1]}},o.Clamp=function(e,t,o){return Math.max(Math.min(e,t),o)},cc._RF.pop()},{"./Random":"Random"}],CommonSignal:[function(e,t,o){"use strict";cc._RF.push(t,"f95914FtRVEIaVFtfSVd+lO","CommonSignal"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../Utils/Signal"),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(n.BaseSignal);o.ShowPauseLayerSignal=i;var a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(n.BaseSignal);o.HidePauseLayerSignal=a;var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(n.BaseSignal);o.GameThemeInit=r;var s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(n.BaseSignal);o.ShowHelpLayerSignal=s;var l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(n.BaseSignal);o.HideHelpLayerSignal=l;var c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(n.BaseSignal);o.OpenResultLayerSignal=c;var u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(n.BaseSignal);o.ShowSubmitSignal=u;var d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(n.BaseSignal);o.ScoreCountingSignal=d;var p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(n.BaseSignal);o.ButtonClickSignal=p;var h=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(n.BaseSignal);o.TimeAnimationStateChanged=h;var m=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(n.BaseSignal);o.UpdateTimeNumber=m;var f=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(n.BaseSignal);o.GameReadySignal=f;var g=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(n.BaseSignal);o.ShowTutorialSignal=g;var y=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(n.BaseSignal);o.GameStartSignal=y;var S=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(n.BaseSignal);o.GameOverSignal=S;var _=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(n.BaseSignal);o.GamePauseSignal=_;var C=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(n.BaseSignal);o.PlayerScoreChanged=C;var v=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(n.BaseSignal);o.NoviceScoreChanged=v;var b=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(n.BaseSignal);o.CountDownSignal=b,cc._RF.pop()},{"../Utils/Signal":"Signal"}],CompleteFireAnimation:[function(e,t,o){"use strict";cc._RF.push(t,"9839bK1AmRGSYB+2zn6uObB","CompleteFireAnimation"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../../Utils/FrameAniBase"),i=cc._decorator,a=i.ccclass,r=(i.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.aniName="FireWork",t=__decorate([a],t)}(n.default));o.default=r,cc._RF.pop()},{"../../../Utils/FrameAniBase":"FrameAniBase"}],CompleteView:[function(e,t,o){"use strict";cc._RF.push(t,"b17e7BOZcZK5rCrQ86zJDA0","CompleteView"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../../Command/CommonSignal"),i=e("../../../Controller/GameStateController"),a=e("../../../Controller/ResourceController"),r=e("../Animation/CompleteFireAnimation"),s=cc._decorator,l=s.ccclass,c=(s.property,"font_over"),u="font_timeup",d="bg_complete",p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),Object.defineProperty(t.prototype,"FireWork",{get:function(){return this.node.getChildByName("FireWork")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"CompleteBanner",{get:function(){return this.node.getChildByName("CompleteTitle")},enumerable:!0,configurable:!0}),t.prototype.onLoad=function(){this.CompleteBanner.active=!1,n.GameOverSignal.inst.addListenerOne(this.onGameOver,this)},t.prototype.start=function(){this.FireWork.active=!1,this.node.active=!1},t.prototype.onGameOver=function(e){console.log("complete animation:",i.RoundEndType[e]),this.node.active=!0;var t=1500;switch(e){case i.RoundEndType.Complete:this.CompleteBanner.getComponent(cc.Sprite).spriteFrame=a.ResourceController.inst.getAnimationAtlas(d),this.FireWork.active=!0,this.FireWork.getComponent(r.default).play(),t=3e3;break;case i.RoundEndType.Over:this.CompleteBanner.getComponent(cc.Sprite).spriteFrame=a.ResourceController.inst.getAltas(c);break;case i.RoundEndType.TimeUp:this.CompleteBanner.getComponent(cc.Sprite).spriteFrame=a.ResourceController.inst.getAltas(u)}this.CompleteBanner.active=!0,this.CompleteBanner.scaleX=0,this.CompleteBanner.runAction(cc.scaleTo(.1,1,1)),setTimeout(function(){n.OpenResultLayerSignal.inst.dispatchOne(e)},t)},t=__decorate([l],t)}(cc.Component);o.default=p,cc._RF.pop()},{"../../../Command/CommonSignal":"CommonSignal","../../../Controller/GameStateController":"GameStateController","../../../Controller/ResourceController":"ResourceController","../Animation/CompleteFireAnimation":"CompleteFireAnimation"}],Diamond7CountView:[function(e,t,o){"use strict";cc._RF.push(t,"043e21ZDEJCtbboLJrv5saF","Diamond7CountView"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../../View/NumberChangedView"),i=e("../../Model/GamePlayModel"),a=cc._decorator,r=a.ccclass,s=(a.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onLoad=function(){var t=this;e.prototype.onLoad.call(this),i.Diamond7ScoreUpdateSignal.inst.addListenerTwo(function(e,o){t.onNumberChanged(e)},this)},t=__decorate([r],t)}(n.default));o.default=s,cc._RF.pop()},{"../../../View/NumberChangedView":"NumberChangedView","../../Model/GamePlayModel":"GamePlayModel"}],Diamond7ScoreView:[function(e,t,o){"use strict";cc._RF.push(t,"b977aUAdPFIeIRiTivRgBso","Diamond7ScoreView"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../../View/NumberChangedView"),i=e("../../Model/GamePlayModel"),a=cc._decorator,r=a.ccclass,s=(a.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onLoad=function(){var t=this;e.prototype.onLoad.call(this),i.Diamond7ScoreUpdateSignal.inst.addListenerTwo(function(e,o){t.onNumberChanged(o)},this)},t=__decorate([r],t)}(n.default));o.default=s,cc._RF.pop()},{"../../../View/NumberChangedView":"NumberChangedView","../../Model/GamePlayModel":"GamePlayModel"}],DiamondBaseView:[function(e,t,o){"use strict";cc._RF.push(t,"a78aeoqsPFBdbRknxzP6c5D","DiamondBaseView"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../../../Controller/ResourceController"),i=e("../../../../Utils/HashMap"),a=e("../../../Model/Diamonds/DiamondModel"),r=cc._decorator,s=r.ccclass,l=(r.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.model=null,t}var o;return __extends(t,e),o=t,t.getDiamondNodeByID=function(e){return 0==this.diamondMap.has(e)&&console.error(" diamond node not exit:",e),this.diamondMap.get(e)},t.prototype.onLoad=function(){a.DiamondRemovedSignal.inst.addListenerOne(this.onRemoved,this)},t.prototype.onRemoved=function(e){this.model&&this.model.ID==e&&n.ResourceController.inst.putDiamondNode(this.node)},t.prototype.reuse=function(e){this.model=e,o.diamondMap.add(this.model.ID,this.node),this.onReuse()},t.prototype.unuse=function(){this.node.group="default",this.model&&o.diamondMap.remove(this.model.ID),this.model=null,this.onUnuse()},t.prototype.onReuse=function(){console.warn(" should override onReuse.")},t.prototype.onUnuse=function(){console.warn(" should override onUnuse.")},t.diamondMap=new i.HashMap,t=o=__decorate([s],t)}(cc.Component));o.default=l,cc._RF.pop()},{"../../../../Controller/ResourceController":"ResourceController","../../../../Utils/HashMap":"HashMap","../../../Model/Diamonds/DiamondModel":"DiamondModel"}],DiamondLevelView:[function(e,t,o){"use strict";cc._RF.push(t,"f1ce5J56JJHtre2YmVWZPB+","DiamondLevelView"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../../../Controller/ResourceController"),i=e("../../../Model/Diamonds/DiamondModel"),a=e("./DiamondBaseView"),r=cc._decorator,s=r.ccclass,l=(r.property,{1:"icon_dim1",2:"icon_dim2",3:"icon_dim3",4:"icon_dim4",5:"icon_dim5",6:"icon_dim6",7:"icon_dim7"}),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),Object.defineProperty(t.prototype,"Sprite",{get:function(){return this.getComponent(cc.Sprite)},enumerable:!0,configurable:!0}),t.prototype.onLoad=function(){i.DiamondLevelUpdatedSignal.inst.addListenerThree(this.onLevelUpdate,this)},t.prototype.onLevelUpdate=function(e,t,o){this.model&&e==this.model.ID&&(this.Sprite.spriteFrame=n.ResourceController.inst.getAltas(l[t]))},t.prototype.onReuse=function(){this.Sprite.spriteFrame=n.ResourceController.inst.getAltas(l[this.model.Level])},t.prototype.onUnuse=function(){},t=__decorate([s],t)}(a.default);o.default=c,cc._RF.pop()},{"../../../../Controller/ResourceController":"ResourceController","../../../Model/Diamonds/DiamondModel":"DiamondModel","./DiamondBaseView":"DiamondBaseView"}],DiamondModel:[function(e,t,o){"use strict";cc._RF.push(t,"28051QuiGZI6q1t3CZAhVOI","DiamondModel"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../../Utils/HashMap"),i=e("../../../Utils/Signal"),a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(i.BaseSignal);o.DiamondLevelUpdatedSignal=a;var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(i.BaseSignal);o.DiamondMovedSignal=r;var s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(i.BaseSignal);o.DiamondCreatedSignal=s;var l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(i.BaseSignal);o.DiamondAfterCreatedSignal=l;var c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(i.BaseSignal);o.DiamondRemovedSignal=c;var u=function(){function e(t,o){this.tiledIndex=null,this.level=0,this.id="",this.tiledIndex=t,this.level=o,this.id=e.DiamondCount+++"-Diamond",s.inst.dispatchOne(this),l.inst.dispatchOne(this),e.diamondsMap.add(this.ID,this)}return e.getDiamondModelByID=function(e){return 0==this.diamondsMap.has(e)&&console.error(" Diamond model not exist:",e),this.diamondsMap.get(e)},e.removeDiamond=function(e){this.diamondsMap.remove(e),c.inst.dispatchOne(e)},Object.defineProperty(e.prototype,"ID",{get:function(){return this.id},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"TiledIndex",{get:function(){return this.tiledIndex},set:function(e){this.tiledIndex=e,r.inst.dispatchTwo(this.id,this.tiledIndex)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Level",{get:function(){return this.level},set:function(e){this.level=e,a.inst.dispatchThree(this.id,this.level,this.tiledIndex)},enumerable:!0,configurable:!0}),e.diamondsMap=new n.HashMap,e.DiamondCount=0,e}();o.DiamondModel=u,cc._RF.pop()},{"../../../Utils/HashMap":"HashMap","../../../Utils/Signal":"Signal"}],DiamondPosMediator:[function(e,t,o){"use strict";cc._RF.push(t,"57f58VYxIpGfalAKIbRfu1S","DiamondPosMediator"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../../../App/App"),i=e("../../../../Global/GameRule"),a=e("../../../../Utils/Cocos"),r=e("../../../../Utils/Signal"),s=e("../../../../View/BaseMediator"),l=e("../../../Model/Diamonds/DiamondModel"),c=e("../../../Model/GamePlayModel"),u=e("../../Animation/Merge7Aniamtion"),d=e("../../Interaction/DiamondTouchView"),p=cc._decorator,h=p.ccclass,m=(p.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(r.BaseSignal));o.OnGet7DoneSignal=m;var f=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onRegister=function(){d.DiamondOnMovedSignal.inst.addListenerTwo(this.onTouchMoved,this),c.OnDiamondReturnSignal.inst.addListenerOne(this.onReturn,this),l.DiamondAfterCreatedSignal.inst.addListenerOne(this.onDiamondCreate,this),u.Get7Signal.inst.addListenerTwo(this.onGet7,this)},t.prototype.onGet7=function(e,t){if(this.View.model&&e==this.View.model.ID){var o=a.ConvertToNodeSpaceAR(n.default.get7AnimationRoot,this.node.parent);this.View.onPositionChanged(o,.2,function(){m.inst.dispatchTwo(e,t)}),this.node.runAction(cc.sequence(cc.delayTime(.05),cc.fadeOut(.15)))}},t.prototype.onDiamondCreate=function(e){this.View.model&&e.ID==this.View.model.ID&&this.View.onPositionChanged(i.GetDiamondPosition(e.TiledIndex),0,function(){})},t.prototype.onReturn=function(e){var t=this;if(this.View.model&&this.View.model.ID==e){var o=i.GetDiamondPosition(this.View.model.TiledIndex);this.View.movedDetal=cc.v2(0,0),this.node.group="move",this.View.onPositionChanged(o,.1,function(){t.node.group="default"})}},t.prototype.onTouchMoved=function(e,t){if(this.View.model&&this.View.model.ID==e&&!(this.View.model.Level>=7)){this.node.group="move",this.View.movedDetal.addSelf(t);var o=i.GetDiamondPosition(this.View.model.TiledIndex).add(this.View.movedDetal);this.View.onPositionChanged(o,0,function(){})}},t=__decorate([h],t)}(s.default);o.default=f,cc._RF.pop()},{"../../../../App/App":"App","../../../../Global/GameRule":"GameRule","../../../../Utils/Cocos":"Cocos","../../../../Utils/Signal":"Signal","../../../../View/BaseMediator":"BaseMediator","../../../Model/Diamonds/DiamondModel":"DiamondModel","../../../Model/GamePlayModel":"GamePlayModel","../../Animation/Merge7Aniamtion":"Merge7Aniamtion","../../Interaction/DiamondTouchView":"DiamondTouchView"}],DiamondPosView:[function(e,t,o){"use strict";cc._RF.push(t,"11446wUV1RJp58jQVvGT2rv","DiamondPosView"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../../../View/Transform/PositionView"),i=e("./DiamondPosMediator"),a=cc._decorator,r=a.ccclass,s=(a.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.model=null,t.movedDetal=cc.v2(0,0),t}return __extends(t,e),t.prototype.onLoad=function(){e.prototype.onLoad.call(this),this.BindMedaitor(i.default)},t.prototype.reuse=function(e){this.model=e,this.onReuse()},t.prototype.unuse=function(){this.model=null,this.onUnuse()},t.prototype.onReuse=function(){},t.prototype.onUnuse=function(){this.movedDetal=cc.v2(0,0)},t=__decorate([r],t)}(n.default));o.default=s,cc._RF.pop()},{"../../../../View/Transform/PositionView":"PositionView","./DiamondPosMediator":"DiamondPosMediator"}],DiamondProductView:[function(e,t,o){"use strict";cc._RF.push(t,"736591sJPpHCKa50DEDKKiQ","DiamondProductView"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../../../Controller/GameStateController"),i=e("../../../../Global/GameRule"),a=e("../../../../Model/PlayModelProxy"),r=e("../../../../Utils/Signal"),s=e("./DiamondBaseView"),l=cc._decorator,c=l.ccclass,u=(l.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(r.BaseSignal));o.DiamondProductSignal=u;var d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.nextProductTime=0,t}return __extends(t,e),t.prototype.onReuse=function(){this.nextProductTime=i.DiamondProductTime},t.prototype.onUnuse=function(){},t.prototype.update=function(e){n.GameStateController.inst.isPause()||0==n.GameStateController.inst.isRoundStart()||this.nextProductTime<=0||!this.model||this.model.Level>=7||(this.nextProductTime-=e,this.nextProductTime<=0&&(this.nextProductTime=i.DiamondProductTime,u.inst.dispatch(),a.PlayModelProxy.inst.addDiamondProduct(i.DiamondProductScore[this.model.Level],this.node,this.model),this.node.runAction(cc.sequence(cc.scaleTo(.1,1.1,.8),cc.delayTime(.05),cc.scaleTo(.1,1,1)))))},t=__decorate([c],t)}(s.default);o.default=d,cc._RF.pop()},{"../../../../Controller/GameStateController":"GameStateController","../../../../Global/GameRule":"GameRule","../../../../Model/PlayModelProxy":"PlayModelProxy","../../../../Utils/Signal":"Signal","./DiamondBaseView":"DiamondBaseView"}],DiamondTouchView:[function(e,t,o){"use strict";cc._RF.push(t,"a66ba5mb6ROIaJkaTRHcfOC","DiamondTouchView"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../../Model/PlayModelProxy"),i=e("../../../Utils/Signal"),a=cc._decorator,r=a.ccclass,s=(a.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(i.BaseSignal));o.DiamondOnMovedSignal=s;var l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(i.BaseSignal);o.DiamondOnMovedEndSignal=l;var c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.model=null,t}return __extends(t,e),t.prototype.onLoad=function(){this.node.on(cc.Node.EventType.TOUCH_CANCEL,this.onTouchCancel,this),this.node.on(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove,this)},t.prototype.reuse=function(e){this.model=e,this.onReuse()},t.prototype.unuse=function(){this.model=null,this.onUnuse()},t.prototype.onReuse=function(){},t.prototype.onUnuse=function(){},t.prototype.onTouchCancel=function(e){this.onTouchEnd(e)},t.prototype.onTouchEnd=function(e){this.model&&13==this.model.TiledIndex&&n.PlayModelProxy.inst.IsOnTutorial||l.inst.dispatchOne(this.model.ID)},t.prototype.onTouchMove=function(e){this.model&&13==this.model.TiledIndex&&n.PlayModelProxy.inst.IsOnTutorial||s.inst.dispatchTwo(this.model.ID,e.getDelta())},t.prototype.onTouchStart=function(e){},t=__decorate([r],t)}(cc.Component);o.default=c,cc._RF.pop()},{"../../../Model/PlayModelProxy":"PlayModelProxy","../../../Utils/Signal":"Signal"}],DiamondsRootView:[function(e,t,o){"use strict";cc._RF.push(t,"d495ekdazBJQ7nn/k5Sp1dP","DiamondsRootView"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../../Controller/ResourceController"),i=e("../../../Global/GameRule"),a=e("../../Model/Diamonds/DiamondModel"),r=cc._decorator,s=r.ccclass,l=(r.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onLoad=function(){a.DiamondCreatedSignal.inst.addListenerOne(this.onDiamondCreated,this)},t.prototype.onDiamondCreated=function(e){var t=n.ResourceController.inst.getDiamondNode(e);t.opacity=0,t.runAction(cc.fadeIn(.2)),this.node.addChild(t),t.setPosition(i.GetDiamondPosition(e.TiledIndex)),t.zIndex=e.TiledIndex},t=__decorate([s],t)}(cc.Component));o.default=l,cc._RF.pop()},{"../../../Controller/ResourceController":"ResourceController","../../../Global/GameRule":"GameRule","../../Model/Diamonds/DiamondModel":"DiamondModel"}],DoubleScoreAnimation:[function(e,t,o){"use strict";cc._RF.push(t,"1f57ej0bUpKL4/fCxCnvWVi","DoubleScoreAnimation"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../../Utils/FrameAniBase"),i=cc._decorator,a=i.ccclass,r=(i.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t=__decorate([a],t)}(n.default));o.default=r,cc._RF.pop()},{"../../../Utils/FrameAniBase":"FrameAniBase"}],DoubleScoreTimeView:[function(e,t,o){"use strict";cc._RF.push(t,"74b2enqBS5PI7+AK7n9scOo","DoubleScoreTimeView"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../../View/NumberChangedView"),i=e("./DoubleScoreView"),a=cc._decorator,r=a.ccclass,s=(a.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onLoad=function(){this.node.active=!1,i.UpdateBornTimeCountSignal.inst.addListenerOne(this.onTimeUpdate,this)},t.prototype.onTimeUpdate=function(e){this.onNumberChanged(e),this.node.active=e>0},t=__decorate([r],t)}(n.default));o.default=s,cc._RF.pop()},{"../../../View/NumberChangedView":"NumberChangedView","./DoubleScoreView":"DoubleScoreView"}],DoubleScoreView:[function(e,t,o){"use strict";cc._RF.push(t,"c40e2XS+JtBPpq0Qeswqobz","DoubleScoreView"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../../Command/CommonSignal"),i=e("../../../Controller/GameStateController"),a=e("../../../Model/PlayModelProxy"),r=e("../../../Utils/Signal"),s=e("../Game/Npc/XiuXiu"),l=cc._decorator,c=l.ccclass,u=(l.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(r.BaseSignal));o.UpdateBornTimeCountSignal=u;var d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.bornTime=0,t}return __extends(t,e),t.prototype.onLoad=function(){var e=this;this.node.active=!1,s.OnXiuXiuBornTimeUpdatedSignal.inst.addListenerOne(this.onBornTimeUpdate,this),n.GameStartSignal.inst.addListener(function(){e.bornTime=0,e.node.active=!1},this)},t.prototype.onBornTimeUpdate=function(e){if(0==a.PlayModelProxy.inst.isDoubleScore)return this.bornTime=0,void(this.node.active=!1);this.bornTime=e,this.node.active=!0},t.prototype.update=function(e){i.GameStateController.inst.isPause()||0==i.GameStateController.inst.isRoundStart()||(this.bornTime-=e,u.inst.dispatchOne(Math.ceil(this.bornTime)),this.node.active=Math.ceil(this.bornTime)>0)},t=__decorate([c],t)}(cc.Component);o.default=d,cc._RF.pop()},{"../../../Command/CommonSignal":"CommonSignal","../../../Controller/GameStateController":"GameStateController","../../../Model/PlayModelProxy":"PlayModelProxy","../../../Utils/Signal":"Signal","../Game/Npc/XiuXiu":"XiuXiu"}],EaseBaseView:[function(e,t,o){"use strict";cc._RF.push(t,"fc226Q7q/NHwZUZiG7X+tIZ","EaseBaseView"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../BaseView"),i=cc._decorator,a=i.ccclass,r=(i.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.targetVal=new cc.Vec3(0,0,0),t.startTime=0,t.lastTime=0,t.completeCallback=null,t}return __extends(t,e),Object.defineProperty(t.prototype,"StartTime",{get:function(){return this.startTime},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"LastTime",{get:function(){return this.lastTime},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Target",{get:function(){return this.targetVal},enumerable:!0,configurable:!0}),t.prototype.onLoad=function(){},t.prototype.start=function(){},t.prototype.startUpdate=function(e,t,o,n){void 0===n&&(n=0),this.targetVal=e,this.startTime=Date.now()+1e3*n,this.lastTime=1e3*t,this.completeCallback=o},t.prototype.complete=function(){if(this.startTime=this.lastTime=0,this.completeCallback){var e=this.completeCallback;this.completeCallback=null,e()}},t.prototype.update=function(e){0!=this.startTime&&0!=this.canUpdate()&&(this.isComplete()?(this.onComplete(),this.complete()):this.canStart()&&this.onStep())},t.prototype.canStart=function(){return Date.now()>=this.startTime&&0!=this.startTime},t.prototype.isComplete=function(){return Date.now()>=this.startTime+this.lastTime},t.prototype.canUpdate=function(){return console.error("you should override this method."),!0},t.prototype.onStep=function(){},t.prototype.onComplete=function(){},t.prototype.ease=function(e,t){return this.lastTime<=0?t:(t-e)*(Date.now()-this.startTime)/this.lastTime+e},t=__decorate([a],t)}(n.default));o.default=r,cc._RF.pop()},{"../BaseView":"BaseView"}],FlyAdCnicornAniamtion:[function(e,t,o){"use strict";cc._RF.push(t,"df82bE3jcpP0bURZ5D33BYC","FlyAdCnicornAniamtion"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../Utils/FrameAniBase"),i=cc._decorator,a=i.ccclass,r=(i.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t=__decorate([a],t)}(n.default));o.default=r,cc._RF.pop()},{"../Utils/FrameAniBase":"FrameAniBase"}],FlyCnicornAd:[function(e,t,o){"use strict";cc._RF.push(t,"36cb0yApqROmqNTDmiukrBP","FlyCnicornAd"),Object.defineProperty(o,"__esModule",{value:!0});var n,i=e("../Utils/Celer/CelerSDK"),a=e("../Utils/Signal"),r=cc._decorator,s=r.ccclass;r.property;(function(e){e[e.Left=0]="Left",e[e.Right=1]="Right"})(n=o.FlyOrigin||(o.FlyOrigin={}));var l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(a.BaseSignal);o.CnicornWatchFailSignal=l;var c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(a.BaseSignal);o.RemoveFlyCnicornSignal=c;var u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(a.BaseSignal);o.FlyCnicornAdDispearSignal=u;var d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(a.BaseSignal);o.FlyCnicornClickSignal=d;var p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(a.BaseSignal);o.ShowFlyCnicornSignal=p;var h=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}var o;return __extends(t,e),o=t,Object.defineProperty(t.prototype,"Fly",{get:function(){return this.node.getChildByName("Fly")},enumerable:!0,configurable:!0}),t.prototype.reuse=function(e,t){console.log("ShowFlyCnicorn:",n[e]),this.node.opacity=255,this.Fly.opacity=255;var i=0;this.Fly.y=t,e=n.Right,this.Fly.scaleX=-1,this.Fly.x=940,i=-940,this.Fly.once(cc.Node.EventType.TOUCH_END,this.onAddTouch,this),this.Fly.runAction(cc.sequence(cc.moveTo(10,i,this.Fly.y),cc.spawn(cc.fadeOut(2),cc.moveBy(2,376*this.Fly.scaleX,0)),cc.callFunc(function(){u.inst.dispatch(),o.ShowTimeRest=10})))},t.prototype.unuse=function(){},t.prototype.onLoad=function(){var e=this;c.inst.addOnce(function(){p.inst.removeTarget(e),l.inst.removeTarget(e),e.node.removeFromParent(!0),e.node.destroy()},this),l.inst.addListener(function(){o.ShowTimeRest=10},this),o.ShowTimeRest=10,p.inst.addListenerTwo(function(t,o){console.log(" Show Cnicorn"),e.Fly.getNumberOfRunningActions()>0||e.reuse(n.Right,-527.994)},this),0==i.CelerSDK.inst.isAndroidWeb&&c.inst.dispatch()},t.prototype.onAddTouch=function(e){this.Fly.stopAllActions(),this.Fly.runAction(cc.fadeOut(.2)),d.inst.dispatch()},t.prototype.update=function(e){},t.ShowTimeRest=0,t=o=__decorate([s],t)}(cc.Component);o.default=h,cc._RF.pop()},{"../Utils/Celer/CelerSDK":"CelerSDK","../Utils/Signal":"Signal"}],FrameAniBase:[function(e,t,o){"use strict";cc._RF.push(t,"6298cJI+OZK9J9ZyfrpqPP2","FrameAniBase"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,i=n.ccclass,a=n.property,r=n.requireComponent,s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.Frames=null,t.PrefixName="",t.FrameCount=0,t.Interval=.05,t.Priority=0,t.Loop=!1,t.PlayOnLoad=!1,t.currentIndex=0,t.time=0,t.isPlay=!1,t.listener=[],t.complateEvent=[],t}var o;return __extends(t,e),o=t,Object.defineProperty(t.prototype,"Sprite",{get:function(){return this.node.getComponent(cc.Sprite)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Animation",{set:function(e){this.Frames=e},enumerable:!0,configurable:!0}),t.prototype.onFocusInEditor=function(){},t.prototype.onLostFocusInEditor=function(){clearInterval(o.intervalID)},t.prototype.onLoad=function(){this.time=this.Interval,this.isPlay=this.PlayOnLoad},t.prototype.play=function(){this.isPlay=!0,this.currentIndex=0,this.node.opacity=255,this.updateCurrentFrame(),0==this.isPlaying&&this.callEventComplete()},t.prototype.onStartPlay=function(){},t.prototype.playOnLoop=function(){this.Loop=!0,this.play()},t.prototype.playByStep=function(){this.isPlay=!0,this.nextFrame(),this.isPlay=!1},t.prototype.pause=function(){this.isPlay=!1},t.prototype.resume=function(){this.isPlay=!0},t.prototype.stop=function(){this.isPlay=!1,this.currentIndex=0,this.updateCurrentFrame(),this.Loop=!1},t.prototype.updateCurrentFrame=function(){""!=this.PrefixName?this.Sprite.spriteFrame=this.Frames.getSpriteFrame(this.PrefixName+(this.currentIndex+1)):this.Sprite.spriteFrame=this.Frames.getSpriteFrames()[this.currentIndex]},t.prototype.onKeyFrame=function(e){},t.prototype.addKeyEventListener=function(e,t){this.listener.push({callback:e,target:t})},Object.defineProperty(t.prototype,"ListenerCount",{get:function(){return this.listener.length},enumerable:!0,configurable:!0}),t.prototype.clearAllListener=function(){return this.listener.length=0,this},t.prototype.onComplete=function(){this.node.runAction(cc.fadeOut(.2))},t.prototype.callEventFrame=function(){this.onKeyFrame(this.currentIndex);for(var e=0,t=this.listener;e<t.length;e++){var o=t[e];o.callback.apply(o.target,[this.currentIndex,this.__classname__])}},t.prototype.callEventComplete=function(){this.isPlay=!1;for(var e=0,t=this.complateEvent;e<t.length;e++){var o=t[e];o.f.apply(o.target,[this.__classname__])}this.onComplete()},t.prototype.addCompleteEvent=function(e,t){this.complateEvent.push({f:e,target:t})},Object.defineProperty(t.prototype,"TotalFrameCount",{get:function(){return""!=this.PrefixName&&this.FrameCount>0?this.Loop?this.FrameCount:this.FrameCount+1:this.Frames&&this.Frames.getSpriteFrames?this.Frames.getSpriteFrames().length+1:0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"CompleteEventCount",{get:function(){return this.complateEvent.length},enumerable:!0,configurable:!0}),t.prototype.clearCompleteEvent=function(){return this.complateEvent.length=0,this},t.prototype.start=function(){},Object.defineProperty(t.prototype,"isPlaying",{get:function(){if(this.isPlay&&this.Frames&&this.Frames.getSpriteFrames&&this.Frames.getSpriteFrames().length>0){for(var e=0,t=this.getComponents(o);e<t.length;e++){var n=t[e];if(n.Priority>this.Priority&&n.isPlaying)return!1}return!0}return!1},enumerable:!0,configurable:!0}),t.prototype.nextFrame=function(){0!=this.isPlaying?this.Frames&&this.Frames.getSpriteFrames&&this.Frames.getSpriteFrames().length>0&&(0==this.currentIndex&&this.onStartPlay(),this.updateCurrentFrame(),this.callEventFrame(),this.currentIndex=(this.currentIndex+1)%this.TotalFrameCount,0==this.currentIndex&&0==this.Loop&&(this.isPlay=!1,this.callEventComplete())):this.time=this.Interval},t.prototype.update=function(e){this.time>=this.Interval&&(this.time=0,this.nextFrame()),this.time+=e},t.aniName="FrameAniBase",t.intervalID=-1,__decorate([a(cc.SpriteAtlas)],t.prototype,"Frames",void 0),__decorate([a],t.prototype,"PrefixName",void 0),__decorate([a],t.prototype,"FrameCount",void 0),__decorate([a],t.prototype,"Interval",void 0),__decorate([a],t.prototype,"Priority",void 0),__decorate([a],t.prototype,"Loop",void 0),__decorate([a],t.prototype,"PlayOnLoad",void 0),t=o=__decorate([i,r(cc.Sprite)],t)}(cc.Component);o.default=s,cc._RF.pop()},{}],FrontView:[function(e,t,o){"use strict";cc._RF.push(t,"a7fe8WWCZVPgYx/jpZQ6l8q","FrontView"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,i=n.ccclass,a=(n.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onLoad=function(){},t.prototype.start=function(){},t.prototype.update=function(e){this.node.parent.scaleX>=0?this.node.scaleX=1:this.node.scaleX=0,this.node.parent.scaleY<0?this.node.scaleY=1:this.node.scaleY=0},t=__decorate([i],t)}(cc.Component));o.default=a,cc._RF.pop()},{}],GameFactory:[function(e,t,o){"use strict";cc._RF.push(t,"93d23kfnY1A76OtZSkIyJ5r","GameFactory"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../Utils/HashMap"),i=function(){function e(e,t,o){this._pool=[],this.totalSize=0,this.initTime=[],this.completeHandler=o,this.template=e,this.totalSize=t,this.hashKey="ObjPool:"+this.template.name+" - "+this.totalSize,this.initPool(t)}return e.prototype.initPool=function(e,t){var o=this;if(void 0===t&&(t=!1),t)for(var n=0;n<e;++n){this.initTime.push(Date.now());var i=cc.instantiate(this.template);this.put(i)}else for(n=0;n<e;++n)this.initTime.push(Date.now()),setTimeout(function(){var e=cc.instantiate(o.template);o.put(e)},n)},e.prototype.size=function(){return this._pool.length},e.prototype.clear=function(){for(var e=this._pool.length,t=0;t<e;++t)this._pool[t].destroy&&this._pool[t].destroy();this._pool.length=0},e.prototype.put=function(e){if(e&&-1===this._pool.indexOf(e)){e.removeFromParent(!1);for(var t=0,o=e.getComponents(cc.Component);t<o.length;t++){var n=o[t];n&&n.unuse&&n.unuse.apply(n)}this._pool.push(e),this.completeHandler&&this.totalSize<=this._pool.length&&(this.completeHandler(),this.completeHandler=null)}},e.prototype.get=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var o=this._pool.length-1;o<0&&(console.warn(" last < 0 "),this.initPool(1,!0)),o=this._pool.length-1;var n=this._pool[o];this._pool.length=o;for(var i=0,a=n.getComponents(cc.Component);i<a.length;i++){var r=a[i];r&&r.reuse&&r.reuse.apply(r,arguments)}return n},e}(),a=function(){function e(){this.count=0,this.totalCount=0,this.objPool=new n.HashMap,this.startTime=0}return Object.defineProperty(e,"inst",{get:function(){return this.ins?this.ins:this.ins=new e},enumerable:!0,configurable:!0}),e.prototype.init=function(e){var t=this;this.doneCallback=e,this.startTime=Date.now(),cc.loader.loadResDir("prefabs/",cc.Prefab,function(e,o,n){if(e)console.error(" Game Factory init failed:",e);else{t.totalCount=o.length;for(var a=function(e){var n=o[e],a=n.name.split("."),r=a[0],s=a[1]?parseInt(a[1]):30;console.log(" init pool:",r,", count:",s),setTimeout(function(){var e=new i(n,s,t.addCount.bind(t));t.objPool.add(r,e)},10*e)},r=0;r<o.length;r++)a(r)}})},e.prototype.addCount=function(){this.count++,this.count>=this.totalCount&&(console.log(" factory cost time:",(Date.now()-this.startTime).toFixed(2)+"ms"),this.doneCallback&&(this.doneCallback(),this.doneCallback=null))},e.prototype.getObj=function(e){for(var t,o=[],n=1;n<arguments.length;n++)o[n-1]=arguments[n];return this.objPool.has(e)?(t=this.objPool.get(e)).get.apply(t,o):(console.error(" objPool dosen't exists this obj:",e),null)},e.prototype.putObj=function(e,t){if(this.objPool.has(e))return this.objPool.get(e).put(t);console.error(" objPool dosen't exists this obj:",e)},e}();o.gFactory=a.inst,cc._RF.pop()},{"../Utils/HashMap":"HashMap"}],GamePlayModel:[function(e,t,o){"use strict";cc._RF.push(t,"3a3dbMmjXZDlbutv0S4vxKQ","GamePlayModel"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../Global/Theme"),i=e("../../Global/GameRule"),a=e("../../Command/CommonSignal"),r=e("../../Global/Level"),s=e("../../Utils/Random"),l=e("./Tiled/TiledModel"),c=e("../../Utils/Signal"),u=e("../View/Animation/WoodBoxOpenAnimation "),d=e("../View/Animation/GoldBoxOpenAnimation"),p=e("./Diamonds/DiamondModel"),h=e("../View/Game/BoxView"),m=e("../View/Interaction/DiamondTouchView"),f=e("../View/Game/Diamonds/DiamondBaseView"),g=e("../View/Game/TiledView"),y=e("../../Utils/Cocos"),S=e("../View/Game/Diamonds/DiamondPosMediator"),_=e("../../Model/PlayModelProxy"),C=e("../../Controller/GameStateController"),v=e("../../Ad/FlyCnicornAd"),b=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(c.BaseSignal);o.AddWoodBoxSignal=b;var T=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(c.BaseSignal);o.AddGoldBoxSignal=T;var M=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(c.BaseSignal);o.TiledMapStateChangedSignal=M;var P=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(c.BaseSignal);o.OnMergeHappendSignal=P;var D=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(c.BaseSignal);o.OnDiamondReturnSignal=D;var F=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(c.BaseSignal);o.Diamond7ScoreUpdateSignal=F;var R,x=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(c.BaseSignal);o.OnGameTimeInitSignal=x,function(e){e[e.Combo=0]="Combo",e[e.Normal=1]="Normal",e[e.Product=2]="Product",e[e.TimeBonus=3]="TimeBonus"}(R=o.ScoreType||(o.ScoreType={}));var B=function(){function e(){this.level=0,this.playerScore=0,this.noviceScore=0,this.diamondScore=0,this.diamond7Count=0,this.gameTime=i.TotalTime,this.pauseCount=0,this.pauseScore=0,this.streak=0,this.totalStreak=0,this.maxSteak=0,this.scoreMap={},this.tileds=[],this.diamonds=[],this.init()}return Object.defineProperty(e.prototype,"Diamond7Score",{get:function(){return this.diamondScore},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Diamond7Count",{get:function(){return this.diamond7Count},enumerable:!0,configurable:!0}),e.prototype.onGameStart=function(){v.ShowFlyCnicornSignal.inst.dispatch(),this.scoreMap={},this.playerScore=0,this.gameTime=i.GetGameTime(),x.inst.dispatchOne(this.gameTime),this.pauseCount=0,this.pauseScore=0,this.streak=0,this.totalStreak=0,this.maxSteak=0;for(var e=0,t=this.diamonds;e<t.length;e++){var o=t[e];o&&this.removeDiamond(o.ID)}this.diamonds.length=0,this.diamond7Count=0,this.diamondScore=0;for(var n=0;n<25;++n){var a=this.tileds[n];i.OpenedTileds.indexOf(n)>=0&&(a.clearDiamond(),a.setLock(!1),a.setOccupy(!0),12!=n&&b.inst.dispatchOne(n))}this.checkHasFreeTiled()},e.prototype.init=function(){a.GameStartSignal.inst.addListener(this.onGameStart,this),u.WoodBoxOpenedSignal.inst.addListenerOne(this.onWoodBoxOpened,this),d.GoldBoxOpenedSignal.inst.addListenerOne(this.onGoldBoxOpened,this),h.BoxProgressUpdatedSignal.inst.addListenerThree(this.onBoxProgressUpdated,this),m.DiamondOnMovedEndSignal.inst.addListenerOne(this.onDiamondMoveEnded,this),S.OnGet7DoneSignal.inst.addListenerTwo(this.onGet7Diamond,this)},e.prototype.setTiledFree=function(){for(var e=0;e<25;++e){var t=this.tileds[e];i.OpenedTileds.indexOf(e)>=0&&(t.setLock(!1),8==e||13==e?t.setOccupy(!1):t.setOccupy(!0))}this.checkHasFreeTiled(),this.checkHasFreeTiled()},e.prototype.onGet7Diamond=function(e,t){console.log("get 7:",e,t),this.diamond7Count++,this.diamondScore+=i.DiamondProductScore.Diamond7Score*_.PlayModelProxy.inst.ScoreTimes,this.unlock(),this.removeDiamond(e),F.inst.dispatchTwo(this.diamond7Count,this.diamondScore),this.diamond7Count>=i.GetTargetDiamond7Count()&&(this.addRestDiamonds(),C.GameStateController.inst.roundEnd(C.RoundEndType.Complete))},e.prototype.unlock=function(){if(i.GetTiledUnlocks().length>0){for(var e=0,t=i.GetTiledUnlocks().shift();e<t.length;e++){var o=t[e],n=l.TiledModel.getTiledModelByIndex(o);n.isLocked&&(n.setLock(!1),n.setOccupy(!1))}this.checkHasFreeTiled()}},e.prototype.addRestDiamonds=function(){for(var e=[],t=0,o=this.diamonds;t<o.length;t++){var n=o[t];if(n){var a=f.default.getDiamondNodeByID(n.ID);a&&(this.addPlayerScore(i.DiamondGetScore[n.Level],R.Normal,1,a),e.push(n.ID))}}for(var r=0,s=e;r<s.length;r++){var l=s[r];this.removeDiamond(l)}},e.prototype.onDiamondMoveEnded=function(e){var t=f.default.getDiamondNodeByID(e),o=p.DiamondModel.getDiamondModelByID(e),n=t.getBoundingBox(),a=0,r=0;if(g.default.tiledViewMap.forEach(function(e,o){var i=l.TiledModel.getTiledModelByIndex(parseInt(e),!0);if(i&&0==i.isLocked&&12!=i.Index){var s=o.children[0],c=y.ConvertToNodeSpaceAR(s,t.parent),u=cc.rect(c.x-s.width/2,c.y-s.height/2,s.width,s.height),d=y.AreaOf2CrossRect(n,u);a<d&&(a=d,r=parseInt(e))}}),a/(n.width*n.height)>=i.MatchLimit){var s=l.TiledModel.getTiledModelByIndex(r);if(s)if(s.Index!=o.TiledIndex)if(1==s.hasOccupied)if(""==s.DiamondID)D.inst.dispatchOne(e);else{var c=p.DiamondModel.getDiamondModelByID(s.DiamondID);c.Level==o.Level?this.mergeToTargetTiled(o.ID,r):this.swapTwoDiamonds(o.ID,c.ID,o.TiledIndex,c.TiledIndex)}else this.moveToTargetTiled(e,s.Index);else D.inst.dispatchOne(e);else D.inst.dispatchOne(e)}else D.inst.dispatchOne(e)},e.prototype.moveToTargetTiled=function(e,t){console.log("move to target:",e,t);var o=p.DiamondModel.getDiamondModelByID(e),n=l.TiledModel.getTiledModelByIndex(o.TiledIndex);o.TiledIndex=t,n.clearDiamond(),n.setOccupy(!1);var i=l.TiledModel.getTiledModelByIndex(t);i.bindDiamond(e),i.setOccupy(!0),D.inst.dispatchOne(e)},e.prototype.mergeToTargetTiled=function(e,t){console.log("merge to:",e,t);var o=l.TiledModel.getTiledModelByIndex(t),n=p.DiamondModel.getDiamondModelByID(o.DiamondID);n.Level++,this.addPlayerScore(i.DiamondGetScore[n.Level]*_.PlayModelProxy.inst.ScoreTimes,R.Normal,1,f.default.getDiamondNodeByID(n.ID)),o.bindDiamond(n.ID),this.removeDiamond(e),P.inst.dispatchOne(t)},e.prototype.removeDiamond=function(e){console.log("remove:",e);for(var t=0;t<this.diamonds.length;t++)this.diamonds[t].ID==e&&(this.diamonds.splice(t,1),t--);var o=p.DiamondModel.getDiamondModelByID(e);l.TiledModel.getTiledModelByIndex(o.TiledIndex).clearDiamond(),p.DiamondModel.removeDiamond(e),this.checkHasFreeTiled()},e.prototype.swapTwoDiamonds=function(e,t,o,n){console.log("swap:",e,t);var i=p.DiamondModel.getDiamondModelByID(e),a=p.DiamondModel.getDiamondModelByID(t);i.TiledIndex=n,a.TiledIndex=o;var r=l.TiledModel.getTiledModelByIndex(o),s=l.TiledModel.getTiledModelByIndex(n);r.bindDiamond(t),s.bindDiamond(e),D.inst.dispatchOne(e),D.inst.dispatchOne(t)},e.prototype.onBoxProgressDone=function(e,t){void 0===t&&(t=-1);for(var o=[],n=0,i=this.tileds;n<i.length;n++){var a=i[n];0==a.hasOccupied&&0==a.isLocked&&o.push(a.Index)}if(o.length<=0)console.error("no free tiled.");else{var r=t>-1?t:o[s.Random.randomFloorToInt()*o.length];l.TiledModel.getTiledModelByIndex(r).setOccupy(!0),e?T.inst.dispatchOne(r):b.inst.dispatchOne(r),this.checkHasFreeTiled()}},e.prototype.checkHasFreeTiled=function(){for(var e=0,t=this.tileds;e<t.length;e++){var o=t[e];if(0==o.hasOccupied&&0==o.isLocked)return M.inst.dispatchOne(!0),!0}return M.inst.dispatchOne(!1),!1},e.prototype.onWoodBoxOpened=function(e){console.log(" wood box open:",e),this.diamonds.push(this.createDiamondModel(e,1)),this.checkHasFreeTiled()},e.prototype.createDiamondModel=function(e,t){var o=new p.DiamondModel(e,t);return l.TiledModel.getTiledModelByIndex(e).bindDiamond(o.ID),this.addPlayerScore(i.DiamondGetScore[t],R.Normal,1,f.default.getDiamondNodeByID(o.ID)),o},e.prototype.onGoldBoxOpened=function(e){console.log(" gold box open :",e);for(var t=[],o=0,n=0,i=0,a=0;t.length<100;)o++<40&&t.push(2),n++<30&&t.push(3),i++<20&&t.push(4),a++<10&&t.push(5);y.disOrderArray(t),console.log("levels:",t.length);var r=s.Random.randomFloorToInt()*t.length;this.diamonds.push(this.createDiamondModel(e,t[r])),this.checkHasFreeTiled(),this.checkHasFreeTiled()},e.prototype.onBoxProgressUpdated=function(e,t,o){o>=1&&this.onBoxProgressDone(e)},e.prototype.initData=function(){a.UpdateTimeNumber.inst.dispatchOne(this.Time),a.TimeAnimationStateChanged.inst.dispatchOne(this.Time<=30);for(var e=0;e<25;++e){var t=new l.TiledModel(e);this.tileds.push(t)}},Object.defineProperty(e.prototype,"Time",{get:function(){return this.gameTime},set:function(e){this.gameTime=e,this.gameTime=Math.max(0,this.gameTime)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Theme",{get:function(){return this.theme},set:function(e){console.log("set game theme:",n.Theme[e]),this.theme=e,a.GameThemeInit.inst.dispatchOne(this.theme)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Level",{get:function(){return this.level},set:function(e){console.log("set game Level:",e),this.level=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"TotalScore",{get:function(){return this.Timebonus+this.ScoreSpread+this.playerScore+this.Diamond7Score},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Timebonus",{get:function(){return Math.floor((this.Diamond7Count/i.GetTargetDiamond7Count()*8.5+.5)*this.gameTime)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ScoreSpread",{get:function(){return 0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"PlayerScore",{get:function(){return this.playerScore},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"PauseScore",{get:function(){return this.pauseScore},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"NoviceScore",{get:function(){return this.noviceScore},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"TotalCombo",{get:function(){return this.totalStreak},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"PauseCount",{get:function(){return this.pauseCount},enumerable:!0,configurable:!0}),e.prototype.initGametheme=function(){var e=r.Level.getThemeRandomPool(this.Level);this.Theme=e[Math.floor(s.Random.getRandom()*e.length)]},e.prototype.addPlayerScore=function(e,t,o,n){if(void 0===o&&(o=1),void 0===n&&(n=null),0!=e){null==this.scoreMap[t]&&(this.scoreMap[t]=0),this.scoreMap[t]+=e;var i=this.playerScore;return this.playerScore+=e,e>0||this.resetCombo(),this.playerScore=Math.max(this.playerScore,0),a.PlayerScoreChanged.inst.dispatchFive(this.playerScore,e,t,o,n),this.playerScore-i}},e.prototype.addNoviceScore=function(e,t){void 0===t&&(t=1),this.noviceScore+=e,this.noviceScore=Math.max(this.noviceScore,0),a.NoviceScoreChanged.inst.dispatchThree(this.noviceScore,e,t)},e.prototype.getScoreByType=function(e){return this.scoreMap[e]},e.prototype.addPauseCount=function(){this.pauseCount++,console.log("pause count:",this.pauseCount),this.pauseCount>i.FreePauseLimit&&this.addPlayerScore(-i.PauseScoreCost,R.Normal)},e.prototype.resetCombo=function(){this.streak=0},e.prototype.addStreak=function(){this.streak++,this.totalStreak++,this.maxSteak=Math.max(this.maxSteak,this.streak)},e.prototype.addDiamondProduct=function(e,t){this.addPlayerScore(e,R.Product,1,t)},e.prototype.dump=function(){},e}();o.GamePlayModel=B,cc._RF.pop()},{"../../Ad/FlyCnicornAd":"FlyCnicornAd","../../Command/CommonSignal":"CommonSignal","../../Controller/GameStateController":"GameStateController","../../Global/GameRule":"GameRule","../../Global/Level":"Level","../../Global/Theme":"Theme","../../Model/PlayModelProxy":"PlayModelProxy","../../Utils/Cocos":"Cocos","../../Utils/Random":"Random","../../Utils/Signal":"Signal","../View/Animation/GoldBoxOpenAnimation":"GoldBoxOpenAnimation","../View/Animation/WoodBoxOpenAnimation ":"WoodBoxOpenAnimation ","../View/Game/BoxView":"BoxView","../View/Game/Diamonds/DiamondBaseView":"DiamondBaseView","../View/Game/Diamonds/DiamondPosMediator":"DiamondPosMediator","../View/Game/TiledView":"TiledView","../View/Interaction/DiamondTouchView":"DiamondTouchView","./Diamonds/DiamondModel":"DiamondModel","./Tiled/TiledModel":"TiledModel"}],GamePlaySignal:[function(e,t,o){"use strict";cc._RF.push(t,"6a923XZO3BHe6UfcoANFeWX","GamePlaySignal"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(e("../../Utils/Signal").BaseSignal);o.SubmitButtonClickSignal=n,cc._RF.pop()},{"../../Utils/Signal":"Signal"}],GameRule:[function(e,t,o){"use strict";cc._RF.push(t,"58c53me7vtEdKVK7W6RnNQo","GameRule"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../Utils/Celer/CelerSDK");o.TotalTime=150,o.DrawDebug=!1,o.FreePauseLimit=3,o.PauseScoreCost=100,o.OpenedTileds=[6,7,8,11,12,13,16,17,18],o.AttackTileds=[7,17,11,13];var i=[[2,22,10,14],[1,5,9,21],[3,19,23,15],[0,20,24,4]],a=[[2,22,10,14,1,5,9,21,3,19,23,15,0,20,24,4]];o.GetTiledUnlocks=function(){return n.CelerSDK.inst.isAndroidWeb?a:i},o.TiledSize=cc.size(182,197),o.XiuXiuCost=50,o.XiuXiuBornDelay=5,o.XiuXiuHealth=5,o.MatchLimit=.35,o.XiuXiuDieScore=200,o.XiuXiuStealTime={min:2,max:4},o.DiamondProductTime=2,o.DiamondProductScore={1:1,2:2,3:3,4:5,5:8,6:12,7:0,Diamond7Score:1500},o.DiamondGetScore={1:10,2:20,3:40,4:80,5:160,6:320,7:1500},o.GetDiamondPosition=function(e){var t=Math.floor(e/5),n=e%5;return cc.v2(n*o.TiledSize.width+.5*o.TiledSize.width,-(t*o.TiledSize.height+.26*o.TiledSize.height)-86)},o.GetGameTime=function(){return n.CelerSDK.inst.isAndroidWeb?60:o.TotalTime},o.GetTargetDiamond7Count=function(){return n.CelerSDK.inst.isAndroidWeb?3:7},o.GetGoldBoxTime=function(){return n.CelerSDK.inst.isAndroidWeb?50:120},o.GetProgressScale=function(){return n.CelerSDK.inst.isAndroidWeb?2:1},cc._RF.pop()},{"../Utils/Celer/CelerSDK":"CelerSDK"}],GameStateController:[function(e,t,o){"use strict";cc._RF.push(t,"b768b1DCFpC4aef+tHUAH/Y","GameStateController"),Object.defineProperty(o,"__esModule",{value:!0});var n,i=e("../Utils/ToSingleton"),a=e("../Command/CommonSignal"),r=e("../Model/PlayModelProxy");(function(e){e[e.Complete=0]="Complete",e[e.Over=1]="Over",e[e.TimeUp=2]="TimeUp"})(n=o.RoundEndType||(o.RoundEndType={}));var s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.pauseCount=0,t.roundstart=!1,t.isReady=!1,t.isOver=!1,t.currentRound=0,t.onResumeCallbacks=[],t}return __extends(t,e),t.prototype.start=function(){this.pauseCount=0},t.prototype.canStart=function(){return this.isReady},t.prototype.roundStart=function(){this.isOver||(console.log(" round start:",++this.currentRound),this.roundstart=!0)},t.prototype.roundEnd=function(e){console.log("round end :",n[e]),this.isOver||(this.roundstart=!1,this.isOver=!0,a.GameOverSignal.inst.dispatchOne(e))},t.prototype.testEndComplete=function(){this.roundEnd(n.Complete)},t.prototype.testEndTimeUp=function(){this.roundEnd(n.TimeUp)},t.prototype.isRoundStart=function(){return this.roundstart},t.prototype.pause=function(e){void 0===e&&(e=!1),0==this.isPause()&&(this.onResumeCallbacks.length=0,a.GamePauseSignal.inst.dispatch(),e||this.onResumeCallbacks.push(function(){r.PlayModelProxy.inst.addPauseCount()})),this.pauseCount++},t.prototype.clearResumeCallback=function(){this.onResumeCallbacks.length=0},t.prototype.resume=function(){if(this.pauseCount--,console.assert(this.pauseCount>=0," pause count smaller than 0!!!"),this.pauseCount=Math.max(this.pauseCount,0),this.pauseCount<=0){for(var e=0,t=this.onResumeCallbacks;e<t.length;e++){(0,t[e])()}this.onResumeCallbacks.length=0}},t.prototype.isPause=function(){return this.pauseCount>0},t.prototype.addResumeCallback=function(e){this.onResumeCallbacks||(this.onResumeCallbacks=[]),this.onResumeCallbacks.push(e)},t.prototype.isGameOver=function(){return this.isOver},t}(i.SingleTon());o.GameStateController=s,!CELER_X&&(window.GameState=s.inst),cc._RF.pop()},{"../Command/CommonSignal":"CommonSignal","../Model/PlayModelProxy":"PlayModelProxy","../Utils/ToSingleton":"ToSingleton"}],GlobalSingleTouchMediator:[function(e,t,o){"use strict";cc._RF.push(t,"50484YTu+lAFp2acGVLgU7t","GlobalSingleTouchMediator"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../Controller/GameStateController"),i=e("../SingleTouchMediator"),a=cc._decorator,r=a.ccclass,s=(a.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onRegister=function(){e.prototype.onRegister.call(this),this.node._touchListener.swallowTouches=!1},t.prototype.onTouchStart=function(e){n.GameStateController.inst.canStart()&&0==n.GameStateController.inst.isRoundStart()&&n.GameStateController.inst.roundStart()},t.prototype.onTouchMove=function(e){},t.prototype.onTouchEnd=function(e){},t.prototype.onTouchCancel=function(e){},t=__decorate([r],t)}(i.default));o.default=s,cc._RF.pop()},{"../../Controller/GameStateController":"GameStateController","../SingleTouchMediator":"SingleTouchMediator"}],GlobalSingleTouchView:[function(e,t,o){"use strict";cc._RF.push(t,"4cc97bBcEZPu7Haxk0HdV9+","GlobalSingleTouchView"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../BaseView"),i=e("./GlobalSingleTouchMediator"),a=cc._decorator,r=a.ccclass,s=(a.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onLoad=function(){this.BindMedaitor(i.default)},t.prototype.start=function(){},t=__decorate([r],t)}(n.default));o.default=s,cc._RF.pop()},{"../BaseView":"BaseView","./GlobalSingleTouchMediator":"GlobalSingleTouchMediator"}],GoldBoxIdleAnimation:[function(e,t,o){"use strict";cc._RF.push(t,"08324PsDblEpbZ9lhxJFZyG","GoldBoxIdleAnimation"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../../Ad/AdLayer"),i=e("../../../Ad/WildAdButton"),a=e("../../../Controller/GameStateController"),r=e("../../../Controller/ResourceController"),s=e("../../../Utils/FrameAniBase"),l=e("../../../Utils/Signal"),c=e("../../Model/GamePlayModel"),u=cc._decorator,d=u.ccclass,p=(u.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(l.BaseSignal));o.OnGoldBoxClickSignal=p;var h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.initPosition=null,t.timeDelay=1,t.completeCount=0,t}var o;return __extends(t,e),o=t,Object.defineProperty(t,"BoxCount",{get:function(){return this.boxCount},set:function(e){this.boxCount=e,this.boxCount=Math.max(0,this.boxCount),i.BoxCountUpdateSignal.inst.dispatchOne(this.boxCount)},enumerable:!0,configurable:!0}),t.prototype.onLoad=function(){e.prototype.onLoad.call(this),this.initPosition=this.node.position.clone(),c.AddGoldBoxSignal.inst.addListenerOne(this.onBoxAdded,this)},t.prototype.setStartSprite=function(){this.Sprite.spriteFrame=r.ResourceController.inst.getAltas("bg_goldbox")},t.prototype.onBoxAdded=function(e){var t=this;e.toString()==this.node.parent.name&&(this.setStartSprite(),this.node.active=!0,this.node.opacity=255,this.Interval=.05,this.node.setPosition(this.initPosition.x,this.initPosition.y+200),this.node.runAction(cc.sequence(cc.moveTo(.1,this.initPosition),cc.moveBy(.1,0,20),cc.moveBy(.1,0,-20),cc.callFunc(function(){a.GameStateController.inst.isReady=!0,t.scheduleOnce(function(){t.play(),t.Loop=!0},t.timeDelay),o.BoxCount++,n.AdFinishSignal.inst.addOnceOne(function(o){o==n.AdType[n.AdType.Cnicorn]&&t.onOpen(e)},t),t.node.once(cc.Node.EventType.TOUCH_END,function(){t.onOpen(e)},t)}))))},t.prototype.onOpen=function(e){0!=this.node.active&&(this.node.targetOff(this),o.BoxCount--,this.node.active=!1,this.unscheduleAllCallbacks(),p.inst.dispatchOne(e))},t.prototype.onKeyFrame=function(e){var t=this;e==this.TotalFrameCount-1&&this.completeCount++>=2&&(this.stop(),this.completeCount=0,this.setStartSprite(),this.scheduleOnce(function(){t.play(),t.Loop=!0},this.timeDelay))},t.boxCount=0,t=o=__decorate([d],t)}(s.default);o.default=h,cc._RF.pop()},{"../../../Ad/AdLayer":"AdLayer","../../../Ad/WildAdButton":"WildAdButton","../../../Controller/GameStateController":"GameStateController","../../../Controller/ResourceController":"ResourceController","../../../Utils/FrameAniBase":"FrameAniBase","../../../Utils/Signal":"Signal","../../Model/GamePlayModel":"GamePlayModel"}],GoldBoxOpenAnimation:[function(e,t,o){"use strict";cc._RF.push(t,"0aee0xqS3lLhpz/GYzUQoAY","GoldBoxOpenAnimation"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../../Utils/FrameAniBase"),i=e("../../../Utils/Signal"),a=e("./GoldBoxIdleAnimation"),r=cc._decorator,s=r.ccclass,l=(r.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(i.BaseSignal));o.GoldBoxOpenedSignal=l;var c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onLoad=function(){var t=this;e.prototype.onLoad.call(this),a.OnGoldBoxClickSignal.inst.addListenerOne(function(e){e.toString()==t.node.parent.name&&(t.node.active=!0,t.node.opacity=255,t.Interval=.06,t.play())},this)},t.prototype.onComplete=function(){this.node.runAction(cc.fadeOut(.2))},t.prototype.onKeyFrame=function(e){2==e&&l.inst.dispatchOne(parseInt(this.node.parent.name))},t=__decorate([s],t)}(n.default);o.default=c,cc._RF.pop()},{"../../../Utils/FrameAniBase":"FrameAniBase","../../../Utils/Signal":"Signal","./GoldBoxIdleAnimation":"GoldBoxIdleAnimation"}],HandShake:[function(e,t,o){"use strict";cc._RF.push(t,"8463d+lu01Ir6GLsxgdJUnB","HandShake"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,i=n.ccclass,a=(n.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onLoad=function(){this.node.runAction(cc.repeatForever(cc.sequence(cc.rotateTo(.2,10),cc.rotateTo(.4,-10),cc.rotateTo(.2,0))))},t=__decorate([i],t)}(cc.Component));o.default=a,cc._RF.pop()},{}],HashMap:[function(e,t,o){"use strict";cc._RF.push(t,"4b0e7DzcRNJnZXTYCWgDaDU","HashMap"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function e(){this._list=new Array,this.clear()}return e.prototype.getIndexByKey=function(e){for(var t=this._list.length,o=0;o<t;o++){if(this._list[o].key==e)return o}return-1},e.prototype.keyOf=function(e){for(var t=this._list.length,o=0;o<t;o++){var n=this._list[o];if(n.value.hashKey&&e.hashKey&&n.value.hashKey===e.hashKey||n.value==e)return n.key}return null},Object.defineProperty(e.prototype,"keys",{get:function(){for(var e=new Array,t=0,o=this._list;t<o.length;t++){var n=o[t];n&&e.push(n.key)}return e},enumerable:!0,configurable:!0}),e.prototype.add=function(e,t){var o={key:e,value:t},n=this.getIndexByKey(e);-1!=n?this._list[n]=o:this._list.push(o)},Object.defineProperty(e.prototype,"values",{get:function(){return this._list},enumerable:!0,configurable:!0}),e.prototype.remove=function(e){var t=this.getIndexByKey(e);if(-1!=t){var o=this._list[t];return this._list.splice(t,1),o}return null},e.prototype.has=function(e){return-1!=this.getIndexByKey(e)},e.prototype.get=function(e){var t=this.getIndexByKey(e);return-1!=t?this._list[t].value:null},Object.defineProperty(e.prototype,"length",{get:function(){return this._list.length},enumerable:!0,configurable:!0}),e.prototype.sort=function(e){this._list.sort(e)},e.prototype.forEachKeyValue=function(e){for(var t=this._list.length,o=0;o<t;o++){e(this._list[o])}},e.prototype.forEach=function(e){for(var t=this._list.length,o=0;o<t;o++){var n=this._list[o];e(n.key,n.value)}},e.prototype.clear=function(){this._list=[]},e}();o.HashMap=n,cc._RF.pop()},{}],HelpButtonView:[function(e,t,o){"use strict";cc._RF.push(t,"55938+NxDZMXZHVR36gYzbo","HelpButtonView"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../../Command/CommonSignal"),i=e("../../../Controller/GameStateController"),a=e("../../../View/SingleTouchView"),r=cc._decorator,s=r.ccclass,l=(r.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onTouchEnd=function(){i.GameStateController.inst.isGameOver()||(n.ShowHelpLayerSignal.inst.dispatch(),n.ButtonClickSignal.inst.dispatch())},t=__decorate([s],t)}(a.default));o.default=l,cc._RF.pop()},{"../../../Command/CommonSignal":"CommonSignal","../../../Controller/GameStateController":"GameStateController","../../../View/SingleTouchView":"SingleTouchView"}],HelpLabelView:[function(e,t,o){"use strict";cc._RF.push(t,"a5000SznohFya3dcylBAzvn","HelpLabelView"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../../Command/CommonSignal"),i=e("../../../Global/GameRule"),a=e("../../../table"),r=cc._decorator,s=r.ccclass,l=(r.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onLoad=function(){n.ShowHelpLayerSignal.inst.addListener(this.renderHelpText,this),n.ShowTutorialSignal.inst.addListener(this.renderGuideText,this)},t.prototype.renderHelpText=function(){var e=parseInt(this.node.name),t=[];switch(e){case 0:case 1:case 2:break;case 3:t=[5,i.GetTargetDiamond7Count().toString()]}this.getComponent(cc.RichText).string=lan.t(a.En_View.BangZhuJieMian,a.En_ID.BangZhuYeMian1+e,t)},t.prototype.renderGuideText=function(){var e=parseInt(this.node.name),t=[];switch(e){case 0:case 1:break;case 2:t=[i.GetTargetDiamond7Count().toString()]}this.getComponent(cc.RichText).string=lan.t(a.En_View.XinShouYinDao,a.En_ID.YinDao1+e,t)},t=__decorate([s],t)}(cc.Component));o.default=l,cc._RF.pop()},{"../../../Command/CommonSignal":"CommonSignal","../../../Global/GameRule":"GameRule","../../../table":"table"}],HelpLayerMediator:[function(e,t,o){"use strict";cc._RF.push(t,"ab216iOmFFBBo7YhihjIFYL","HelpLayerMediator"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("./BaseMediator"),i=e("../Command/CommonSignal"),a=e("../Controller/GameStateController"),r=cc._decorator,s=r.ccclass,l=(r.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.closeCallback=null,t}return __extends(t,e),t.prototype.onRegister=function(){i.ShowHelpLayerSignal.inst.addListenerOne(this.showHelp,this),i.ShowTutorialSignal.inst.addListenerOne(this.showGuide,this),i.HideHelpLayerSignal.inst.addListenerOne(this.hideGuide,this)},t.prototype.showHelp=function(e){this.View.isShowed()||(a.GameStateController.inst.pause(),this.closeCallback=e,this.View.Show())},t.prototype.showGuide=function(e){this.View.isShowed()||(a.GameStateController.inst.pause(!0),this.closeCallback=e,this.View.Show())},t.prototype.hideGuide=function(){0!=this.View.isShowed()&&(a.GameStateController.inst.resume(),this.View.Hide(this.closeCallback),this.closeCallback=null)},t=__decorate([s],t)}(n.default));o.default=l,cc._RF.pop()},{"../Command/CommonSignal":"CommonSignal","../Controller/GameStateController":"GameStateController","./BaseMediator":"BaseMediator"}],HelpLayerView:[function(e,t,o){"use strict";cc._RF.push(t,"7de5dV5nLxKg6SXhg1Pqw8Z","HelpLayerView"),Object.defineProperty(o,"__esModule",{value:!0});var n,i=e("./BaseView"),a=e("./HelpLayerMediator"),r=e("../Command/CommonSignal"),s=e("../Model/PlayModelProxy"),l=e("../App/App"),c=cc._decorator,u=c.ccclass,d=c.property;(function(e){e[e.Show=0]="Show",e[e.Hide=1]="Hide"})(n||(n={}));var p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state=n.Hide,t.Next=null,t.Close=null,t.GuidePage=null,t.TotalPage=null,t.Page=null,t.normalSevenPos=cc.v2(-209.675,-466.253),t.tutorialSevenPos=cc.v2(170.226,-95.725),t}return __extends(t,e),t.prototype.onLoad=function(){this.BindMedaitor(a.default),this.state=n.Hide,this.node.scale=1,this.GuidePage.node.on("page-turning",this.onPageChanged,this),this.Close.on(cc.Node.EventType.TOUCH_END,this.close,this),this.Next.on(cc.Node.EventType.TOUCH_END,this.next,this)},t.prototype.start=function(){this.node.active=!1},t.prototype.close=function(){r.ButtonClickSignal.inst.dispatch(),r.HideHelpLayerSignal.inst.dispatch()},t.prototype.next=function(){r.ButtonClickSignal.inst.dispatch(),this.GuidePage.scrollToPage((this.GuidePage.getCurrentPageIndex()+1)%this.GuidePage.content.childrenCount,0),this.onPageChanged()},t.prototype.onPageChanged=function(){var e=this;this.TotalPage&&(this.TotalPage.string=this.GuidePage.content.childrenCount.toString()),this.Page&&(this.Page.string=(this.GuidePage.getCurrentPageIndex()+1).toString()),s.PlayModelProxy.inst.IsOnTutorial?this.GuidePage.getCurrentPageIndex()>=this.GuidePage.content.childrenCount-2?setTimeout(function(){e.Next.active=!1,e.Close.active=!0},0):setTimeout(function(){e.Next.active=!0,e.Close.active=!1},0):this.GuidePage.getCurrentPageIndex()>=this.GuidePage.content.childrenCount-1?setTimeout(function(){e.Next.active=!1,e.Close.active=!0},0):setTimeout(function(){e.Next.active=!0,e.Close.active=!1},0)},t.prototype.isShowed=function(){return this.state==n.Show},t.prototype.Show=function(e){this.isShowed()||(this.state=n.Show,this.node.active=!0,this.node.stopAllActions(),s.PlayModelProxy.inst.IsOnTutorial?this.GuidePage.content.getChildByName("Page3").getChildByName("bg_new1").getComponent(cc.Sprite).spriteFrame=l.default.PageTutorial:this.GuidePage.content.getChildByName("Page3").getChildByName("bg_new1").getComponent(cc.Sprite).spriteFrame=l.default.PageNormal,this.node.scale=0,this.node.runAction(cc.sequence(cc.callFunc(function(){}),cc.scaleTo(.1,1),cc.callFunc(function(){e&&e()}))),this.Next.active=!0,this.Close.active=!1,this.GuidePage.scrollToPage(0,0),this.onPageChanged())},t.prototype.Hide=function(e){var t=this;0!=this.isShowed()&&(this.state=n.Hide,this.node.stopAllActions(),this.node.runAction(cc.sequence(cc.scaleTo(.1,0),cc.callFunc(function(){t.node.scale=1,e&&e(),t.node.active=!1}))))},t.prototype.update=function(e){},__decorate([d(cc.Node)],t.prototype,"Next",void 0),__decorate([d(cc.Node)],t.prototype,"Close",void 0),__decorate([d(cc.PageView)],t.prototype,"GuidePage",void 0),__decorate([d(cc.Label)],t.prototype,"TotalPage",void 0),__decorate([d(cc.Label)],t.prototype,"Page",void 0),t=__decorate([u],t)}(i.default);o.default=p,cc._RF.pop()},{"../App/App":"App","../Command/CommonSignal":"CommonSignal","../Model/PlayModelProxy":"PlayModelProxy","./BaseView":"BaseView","./HelpLayerMediator":"HelpLayerMediator"}],InitialFacade:[function(e,t,o){"use strict";cc._RF.push(t,"cbbbcO7od5PrqaPNOs8dFh3","InitialFacade"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../Command/InititalCommand"),i=e("../Command/StartGameCommand"),a=e("../Command/LoadAudioCommand"),r=e("../Command/LoadPrefabCommand"),s=e("../../Utils/Celer/CelerSDK"),l=e("../../Manager/StepManager"),c=e("../Command/LoadJsonCommand"),u=function(){function e(e){this.stepMgr=new l.StepManager,this.facade=puremvc.Facade.getInstance(e)}return Object.defineProperty(e,"inst",{get:function(){return this.instance?this.instance:this.instance=new e(e.MULTITON_KEY)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Facade",{get:function(){return console.assert(null!==this.facade," facade is null"),this.facade},enumerable:!0,configurable:!0}),e.prototype.register=function(){var t=this;this.facade.registerCommand(e.INITIALIZATION,n.InitialCommand),this.facade.registerCommand(e.START_UP,i.StartGameCommand),s.CelerSDK.inst.init(function(){t.facade.sendNotification(e.START_UP,t)}),this.stepMgr.register(function(){s.CelerSDK.inst.celerXReady()},e.TOTAL_STEPS)},e.prototype.unregister=function(){this.facade.removeCommand(e.INITIALIZATION),this.facade.removeCommand(e.START_UP)},e.prototype.start=function(){this.register(),this.facade.sendNotification(e.INITIALIZATION,this)},e.prototype.step=function(e){console.log(" initialization step:",e),this.stepMgr.nextStep(e)},e.MULTITON_KEY="INITIAL_FCADE",e.INITIALIZATION="initialization",e.START_UP="startup",e.TOTAL_STEPS=[a.LoadAudioCommand.STEP,r.LoadPrefabCommand.STEP,c.LoadJsonCommand.STEP],e}();o.InitialFacade=u,cc._RF.pop()},{"../../Manager/StepManager":"StepManager","../../Utils/Celer/CelerSDK":"CelerSDK","../Command/InititalCommand":"InititalCommand","../Command/LoadAudioCommand":"LoadAudioCommand","../Command/LoadJsonCommand":"LoadJsonCommand","../Command/LoadPrefabCommand":"LoadPrefabCommand","../Command/StartGameCommand":"StartGameCommand"}],InititalCommand:[function(e,t,o){"use strict";cc._RF.push(t,"a28caT/H41F74cWxJYqN9pz","InititalCommand"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("./LoadPrefabCommand"),i=e("./LoadAudioCommand"),a=e("./LoadJsonCommand"),r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.initializeMacroCommand=function(){this.addSubCommand(n.LoadPrefabCommand),this.addSubCommand(i.LoadAudioCommand),this.addSubCommand(a.LoadJsonCommand)},t}(puremvc.MacroCommand);o.InitialCommand=r,cc._RF.pop()},{"./LoadAudioCommand":"LoadAudioCommand","./LoadJsonCommand":"LoadJsonCommand","./LoadPrefabCommand":"LoadPrefabCommand"}],Level:[function(e,t,o){"use strict";cc._RF.push(t,"3db54FVK6dM2Ik/+eMmSgop","Level"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../Utils/Random"),i=e("./Theme"),a=function(){function e(){}return e.getThemeRandomPool=function(e){for(var t=[],o=100;o-- >0;)n.Random.getRandom()>.5?t.push(i.Theme.Green):t.push(i.Theme.Red);return t},e}();o.Level=a,cc._RF.pop()},{"../Utils/Random":"Random","./Theme":"Theme"}],LoadAudioCommand:[function(e,t,o){"use strict";cc._RF.push(t,"d4f3eGYUlBES5d8aEvuPQna","LoadAudioCommand"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../Manager/AudioManager"),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.execute=function(e){if(e){var o=e.getBody();o&&o.step&&n.gAudio.init(function(){o.step(t.STEP)})}},t.STEP="LoadAudio",t}(puremvc.SimpleCommand);o.LoadAudioCommand=i,cc._RF.pop()},{"../../Manager/AudioManager":"AudioManager"}],LoadJsonCommand:[function(e,t,o){"use strict";cc._RF.push(t,"bc7fdSfdM9DF4VlgtZVQmd7","LoadJsonCommand"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../TableManager"),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.execute=function(e){if(e){var o=e.getBody();o&&o.step&&n.TableManager.inst.startLoad("/json",function(){o.step(t.STEP)})}},t.STEP="LoadJsonCommand",t}(puremvc.SimpleCommand);o.LoadJsonCommand=i,cc._RF.pop()},{"../../TableManager":"TableManager"}],LoadPrefabCommand:[function(e,t,o){"use strict";cc._RF.push(t,"8b33fPnvCZEJ7bc/zCVv9My","LoadPrefabCommand"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../Factory/GameFactory"),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.execute=function(e){n.gFactory.init(function(){if(e){var o=e.getBody();o&&o.step&&o.step(t.STEP)}})},t.STEP="LoadPrefab",t}(puremvc.SimpleCommand);o.LoadPrefabCommand=i,cc._RF.pop()},{"../../Factory/GameFactory":"GameFactory"}],LoadingPageMediator:[function(e,t,o){"use strict";cc._RF.push(t,"359acCsI6FNpLUAuWOw+Fv4","LoadingPageMediator"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../View/BaseMediator"),i=e("../../Utils/Celer/CelerSDK"),a=e("../../Command/CommonSignal"),r=e("../../Model/PlayModelProxy"),s=e("../../Utils/Signal"),l=cc._decorator,c=l.ccclass,u=(l.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(s.BaseSignal));o.ShowDynToturialSignal=u;var d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.time=3e3,t.startTime=0,t}return __extends(t,e),t.prototype.onRegister=function(){this.startTime=Date.now(),a.GameReadySignal.inst.addListener(this.onGameReady,this)},t.prototype.onGameReady=function(){var e=this,t=Date.now()-this.startTime;console.log(" -- game init done, hide loading page: ",t),t<=this.time?setTimeout(function(){e.View.Hide(function(){e.startGame()})},this.time-t):this.View.Hide(function(){e.startGame()})},t.prototype.startGame=function(){i.CelerSDK.inst.isNew()?(r.PlayModelProxy.inst.readyTutorial(),a.ShowTutorialSignal.inst.dispatchOne(function(){u.inst.dispatch(),r.PlayModelProxy.inst.startTutorial()})):a.GameStartSignal.inst.dispatch()},t.prototype.onDestroy=function(){},t=__decorate([c],t)}(n.default);o.default=d,cc._RF.pop()},{"../../Command/CommonSignal":"CommonSignal","../../Model/PlayModelProxy":"PlayModelProxy","../../Utils/Celer/CelerSDK":"CelerSDK","../../Utils/Signal":"Signal","../../View/BaseMediator":"BaseMediator"}],LoadingView:[function(e,t,o){"use strict";cc._RF.push(t,"dfec6LZreJCaa8QdaMxRAO/","LoadingView"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../View/BaseView"),i=e("./LoadingPageMediator"),a=cc._decorator,r=a.ccclass,s=(a.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onLoad=function(){this.node.scale=1,this.node.opacity=255,this.BindMedaitor(i.default)},t.prototype.start=function(){},t.prototype.Hide=function(e){var t=this;this.node.runAction(cc.sequence(cc.fadeOut(.5),cc.callFunc(function(){t.node.active=!1,e()})))},t=__decorate([r],t)}(n.default));o.default=s,cc._RF.pop()},{"../../View/BaseView":"BaseView","./LoadingPageMediator":"LoadingPageMediator"}],LogHandler:[function(e,t,o){"use strict";cc._RF.push(t,"a4747QIvUBIo6Ktpx/xQwuB","LogHandler"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(e){function t(){var o=e.call(this)||this;if(o.logFunc=console.log,o.logMsg=null,o.frameTimes=0,o.now=0,o.Frame=20,o.totalFrames=0,o.startTime=0,window.addEventListener)for(var n=0,i=t.LISTENNING_EVENTS;n<i.length;n++){var a=i[n],r="trigger"+a.charAt(0).toLocaleUpperCase()+a.substring(1);o[r]&&"function"==typeof o[r]&&window.addEventListener(a,o[r].bind(o))}return o}return __extends(t,e),t.prototype.dumpFrameInfo=function(){var e=(Date.now()-this.startTime)/1e3,t=e/this.totalFrames;this.log(" total frames:",this.totalFrames," ,total cost time:",e+"s"," , per frame cost time ave:"+t+"s")},t.prototype.log=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.addLog.apply(this,e),this.sendLog()},t.prototype.ready=function(){console.log(t.VERSION)},t.prototype.initLog=function(e){var o=this;cc.director.once(cc.Director.EVENT_AFTER_SCENE_LAUNCH,function(){o.frameTimes=0,o.now=Date.now(),o.startTime=Date.now()},this),cc.director.on(cc.Director.EVENT_AFTER_DRAW,function(){o.frameTimes++,o.totalFrames++,o.frameTimes>=o.Frame&&(o.frameTimes=0,o.now=Date.now())},this),this.logFunc=e,window.consoleError=console.error,window.consoleWarn=console.warn,window.consoleLog=console.log,window.consoleAssert=console.assert,console.error=function(){for(var e,o=[],n=0;n<arguments.length;n++)o[n]=arguments[n];(e=t.inst).log.apply(e,["[ERROR]"].concat(o))},console.warn=function(){for(var e,o=[],n=0;n<arguments.length;n++)o[n]=arguments[n];(e=t.inst).log.apply(e,["[WARN]"].concat(o))},console.log=function(){for(var e,o=[],n=0;n<arguments.length;n++)o[n]=arguments[n];(e=t.inst).log.apply(e,["[INFO]"].concat(o))},console.assert=function(e){for(var o,n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];e||(o=t.inst).log.apply(o,["[ASSERT ERROR]"].concat(n))}},t.prototype.formatLogArguments=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var o="",n=0;n<arguments.length;n++){var i=typeof arguments[n];"string"==i||"number"==i?o+=" "+arguments[n]:"object"==i?o+=" "+JSON.stringify(arguments[n]):"boolean"==i&&arguments[n].toString&&(o+=arguments[n].toString())}return o},t.prototype.addLog=function(){for(var e=[],o=0;o<arguments.length;o++)e[o]=arguments[o];null==this.logMsg&&(this.logMsg={});var n=this.formatLogArguments.apply(this,e),i=this.getFullTime(new Date);this.logMsg[i]=t.VERSION+n},t.prototype.getFullTime=function(e){var t="";t+=e.getFullYear();var o=e.getMonth()+1;t+="-"+(o>=10?o:"0"+o);var n=e.getDate();t+="-"+(n>=10?n:"0"+n);var i=e.getHours();t+="  "+(i>=10?i:"0"+i);var a=e.getMinutes();t+=":"+(a>=10?a:"0"+a);var r=e.getSeconds();return t+=":"+(r>=10?r:"0"+r)},t.prototype.sendLog=function(){this.logFunc&&null!=this.logMsg&&(this.logFunc(JSON.stringify(this.logMsg)),this.logMsg=null)},t.prototype.triggerClose=function(e){this.addLog("triggerClose"),this.sendLog()},t.prototype.triggerLoad=function(e){this.addLog("triggerLoad"),this.sendLog()},t.prototype.triggerUnload=function(e){this.addLog("triggerUnload"),this.sendLog()},t.prototype.triggerOnunload=function(e){this.addLog("triggerUnload"),this.sendLog()},t.prototype.triggerError=function(e){this.addLog("triggerError"),this.addLog(e.message),this.sendLog()},t.prototype.triggerFocus=function(e){this.addLog("triggerFocus"),this.sendLog()},t.prototype.triggerBlur=function(e){this.addLog("triggerBlur"),this.sendLog()},t.prototype.triggerAbort=function(e){this.addLog("triggerAbort"),this.sendLog()},t.prototype.triggerSuspend=function(e){this.addLog("triggerSuspend"),this.sendLog()},t.prototype.beforeunload=function(e){this.addLog("beforeunload"),this.sendLog()},t.VERSION=window.GAME_VERSION||" --- ",t.LISTENNING_EVENTS=["error"],t}(e("./ToSingleton").SingleTon());o.LogHandler=n,cc._RF.pop()},{"./ToSingleton":"ToSingleton"}],Merge7Aniamtion:[function(e,t,o){"use strict";cc._RF.push(t,"6e7b8bmijdNyoOUxuzavNo2","Merge7Aniamtion"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../../Utils/FrameAniBase"),i=e("../../../Utils/Signal"),a=e("../../Model/Diamonds/DiamondModel"),r=cc._decorator,s=r.ccclass,l=(r.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(i.BaseSignal));o.Get7Signal=l;var c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onLoad=function(){e.prototype.onLoad.call(this),this.Interval=.05,a.DiamondLevelUpdatedSignal.inst.addListenerThree(this.onLevelUpdate,this)},t.prototype.onLevelUpdate=function(e,t,o){var n=this;this.node.parent.name==o.toString()&&7==t&&(this.node.opacity=255,this.play(),this.onComplete=function(){n.node.runAction(cc.fadeOut(.2)),l.inst.dispatchTwo(e,o)})},t=__decorate([s],t)}(n.default);o.default=c,cc._RF.pop()},{"../../../Utils/FrameAniBase":"FrameAniBase","../../../Utils/Signal":"Signal","../../Model/Diamonds/DiamondModel":"DiamondModel"}],MergeAnimation:[function(e,t,o){"use strict";cc._RF.push(t,"92e588g1LdDDrRjTQlvqrl2","MergeAnimation"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../../Utils/FrameAniBase"),i=e("../../Model/Diamonds/DiamondModel"),a=cc._decorator,r=a.ccclass,s=(a.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onLoad=function(){e.prototype.onLoad.call(this),this.Interval=.05,i.DiamondLevelUpdatedSignal.inst.addListenerThree(this.onLevelUpdate,this)},t.prototype.onLevelUpdate=function(e,t,o){this.node.parent.name==o.toString()&&t<7&&(this.node.opacity=255,this.play())},t.prototype.onComplete=function(){this.node.runAction(cc.fadeOut(.2))},t=__decorate([r],t)}(n.default));o.default=s,cc._RF.pop()},{"../../../Utils/FrameAniBase":"FrameAniBase","../../Model/Diamonds/DiamondModel":"DiamondModel"}],NumberChangedView:[function(e,t,o){"use strict";cc._RF.push(t,"5f2acutWoZLka/VldveJWjk","NumberChangedView"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("./BaseView"),i=cc._decorator,a=i.ccclass,r=(i.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.num=0,t.showNum=0,t.step=0,t.label=null,t.action=!0,t.STEP=120,t.callback=null,t}return __extends(t,e),Object.defineProperty(t.prototype,"Label",{get:function(){return this.label?this.label:this.label=this.node.getComponent(cc.Label)},enumerable:!0,configurable:!0}),t.prototype.onLoad=function(){},t.prototype.start=function(){},t.prototype.onStep=function(e){},t.prototype.onNumberChanged=function(e,t){if(this.num=e,this.callback=t,this.num!=this.showNum){var o=this.num-this.showNum;this.step=o>0?Math.ceil(o/this.STEP):Math.floor(o/this.STEP),this.action&&this.node.runAction(cc.sequence(cc.scaleTo(.1,1.4),cc.delayTime(.2),cc.scaleTo(.1,1)))}else this.step=0},t.prototype.update=function(e){this.num!=this.showNum&&(this.showNum+=this.step,this.onStep(this.step),(this.showNum>this.num&&this.step>0||this.showNum<this.num&&this.step<0)&&(this.showNum=this.num,this.step=0)),Math.abs(this.num-this.showNum)<=Math.abs(this.step)&&this.callback&&"function"==typeof this.callback&&(this.callback(),this.callback=null),this.Label.string=this.showNum>=0?this.showNum.toString():"/"+Math.abs(this.showNum).toString()},t=__decorate([a],t)}(n.default));o.default=r,cc._RF.pop()},{"./BaseView":"BaseView"}],PlayModelProxy:[function(e,t,o){"use strict";cc._RF.push(t,"50835VU6k9M3pgXsJbG5zxG","PlayModelProxy"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../Utils/ToSingleton"),i=e("../Controller/GameStateController"),a=e("../GamePlay/Model/GamePlayModel"),r=e("../Command/CommonSignal"),s=e("../Global/GameRule"),l=e("../GamePlay/Model/Diamonds/DiamondModel"),c=e("../Utils/Signal"),u=e("../GamePlay/View/Animation/WoodBoxIdleAnimation"),d=e("../GamePlay/View/Game/Npc/XiuXiu"),p=e("../GamePlay/View/Game/BoxView"),h=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(c.BaseSignal);o.XiuXiuHealthUpdatedSignal=h;var m=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(c.BaseSignal);o.OnXiuXiuDieSignal=m;var f=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(c.BaseSignal);o.TutorialStepSignal=f;var g=function(e){function t(){var t=e.call(this)||this;return t.hasTouchBox=!1,t.isGameOver=!1,t.playerModel=null,t.xiuxiuHealth=s.XiuXiuHealth,t.isOnTutorial=!1,t.xiuxiuDieCount=0,t.tutorialStep=0,t.bindSignal(),t}return __extends(t,e),Object.defineProperty(t.prototype,"Model",{get:function(){return this.playerModel?this.playerModel:this.playerModel=new a.GamePlayModel},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"IsOnTutorial",{get:function(){return this.isOnTutorial},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isDoubleScore",{get:function(){return this.xiuxiuHealth<=0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"TargetScore",{get:function(){return this.Model.Diamond7Score},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"TargetCount",{get:function(){return this.Model.Diamond7Count},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ScoreTimes",{get:function(){return this.isDoubleScore?2:1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"TimeLeft",{get:function(){return this.Model.Time},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"PlayerScore",{get:function(){return this.Model.PlayerScore},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"NoviceScore",{get:function(){return this.Model.NoviceScore},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"PointSpread",{get:function(){return this.Model.ScoreSpread},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"TimeBonus",{get:function(){return this.Model.Timebonus},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Theme",{get:function(){return this.Model.Theme},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Level",{get:function(){return this.Model.Level},set:function(e){this.Model.Level=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"PauseScore",{get:function(){return this.Model.PauseScore},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"FreePauseCount",{get:function(){return Math.max(0,s.FreePauseLimit-this.Model.PauseCount)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"XiuXiuHealth",{get:function(){return this.xiuxiuHealth},set:function(e){this.xiuxiuHealth=e,h.inst.dispatchOne(this.xiuxiuHealth),this.xiuxiuHealth<=0&&(this.xiuxiuDieCount++,m.inst.dispatch())},enumerable:!0,configurable:!0}),t.prototype.bindSignal=function(){},Object.defineProperty(t.prototype,"ToturialStep",{get:function(){return this.tutorialStep},enumerable:!0,configurable:!0}),t.prototype.readyTutorial=function(){this.isOnTutorial=!0,this.tutorialStep=0},t.prototype.startTutorial=function(){var e=this;u.OnWoodBoxClickSignal.inst.addOnce(function(){e.nextGuideStep(),p.AddProgressSignal.inst.dispatchOne(1)},this),p.SpeedUpBoxSignal.inst.addOnce(function(){e.nextGuideStep(),u.OnWoodBoxClickSignal.inst.addOnce(function(){e.nextGuideStep()},e)},this),l.DiamondLevelUpdatedSignal.inst.addOnce(function(){e.nextGuideStep()},this),this.Model.setTiledFree(),a.AddWoodBoxSignal.inst.dispatchOne(13),d.XiuXiuBornInTutorialSignal.inst.dispatchOne(1),this.nextGuideStep()},t.prototype.endTutorial=function(){this.isOnTutorial=!1,t.inst.XiuXiuHealth=s.XiuXiuHealth,this.xiuxiuDieCount=0},t.prototype.nextGuideStep=function(){this.tutorialStep++,f.inst.dispatchOne(this.tutorialStep)},t.prototype.initGameData=function(){this.Model.initData()},t.prototype.addPlayerScore=function(e,t,o,n){this.Model.addPlayerScore(e,t,o,n)},t.prototype.initGameDataTest=function(){this.Model.initData()},t.prototype.initGametheme=function(){this.Model.initGametheme()},t.prototype.getTotalScore=function(){return this.Model.TotalScore},t.prototype.addPauseCount=function(){this.Model.addPauseCount()},t.prototype.addGameTime=function(e){i.GameStateController.inst.isPause()||0==i.GameStateController.inst.isRoundStart()||this.isGameOver||(this.Model.Time+=e,r.UpdateTimeNumber.inst.dispatchOne(this.Model.Time),r.TimeAnimationStateChanged.inst.dispatchOne(this.Model.Time<=30),this.Model.Time<=0&&i.GameStateController.inst.roundEnd(i.RoundEndType.TimeUp))},t.prototype.getScoreByType=function(e){return this.Model.getScoreByType(e)},t.prototype.dump=function(){this.Model.dump()},t.prototype.addDiamondProduct=function(e,t,o){this.Model.addDiamondProduct(e,t)},t.prototype.xiuxiuSteal=function(e,t){this.Model.addPlayerScore(e,a.ScoreType.Normal,1,t)},t}(n.SingleTon());o.PlayModelProxy=g,!CELER_X&&(window.Game=g.inst),cc._RF.pop()},{"../Command/CommonSignal":"CommonSignal","../Controller/GameStateController":"GameStateController","../GamePlay/Model/Diamonds/DiamondModel":"DiamondModel","../GamePlay/Model/GamePlayModel":"GamePlayModel","../GamePlay/View/Animation/WoodBoxIdleAnimation":"WoodBoxIdleAnimation","../GamePlay/View/Game/BoxView":"BoxView","../GamePlay/View/Game/Npc/XiuXiu":"XiuXiu","../Global/GameRule":"GameRule","../Utils/Signal":"Signal","../Utils/ToSingleton":"ToSingleton"}],PositionView:[function(e,t,o){"use strict";cc._RF.push(t,"416f296ZMZPEaWAE2E6IRlj","PositionView"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("./EaseBaseView"),i=cc._decorator,a=i.ccclass,r=(i.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.startPos=cc.Vec2.ZERO,t}return __extends(t,e),Object.defineProperty(t.prototype,"TargetPos",{get:function(){return cc.v2(this.Target.x,this.Target.y)},enumerable:!0,configurable:!0}),t.prototype.canUpdate=function(){return!0},t.prototype.onLoad=function(){0},t.prototype.start=function(){},t.prototype.onPositionChanged=function(e,t,o,n){void 0===n&&(n=0),this.startPos=this.node.position.clone(),this.startUpdate(new cc.Vec3(e.x,e.y,0),t,o,n)},t.prototype.onStep=function(){this.node.x=this.ease(this.startPos.x,this.Target.x),this.node.y=this.ease(this.startPos.y,this.Target.y)},t.prototype.onComplete=function(){this.node.setPosition(cc.v2(this.Target.x,this.Target.y))},t=__decorate([a],t)}(n.default));o.default=r,cc._RF.pop()},{"./EaseBaseView":"EaseBaseView"}],Random:[function(e,t,o){"use strict";cc._RF.push(t,"114f9Vox8JGQbohBr4HFlkf","Random"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function e(){}return e.seededRandom=function(e,t,o){return t+1e6*((1711*e+88888)%302654/302654+(1722*e+55555)%302665/302665+(1755*e+23333)%302766/302766)%1e6/1e6*(o-t)},e.getRandom=function(e,t){void 0===e&&(e=0),void 0===t&&(t=1);var o=this.randomSeed,n=this.seededRandom(o,e,t),i=Math.floor(this.seededRandom(o,1,302766));return this.randomSeed+=i,n},e.setRandomSeed=function(e){console.log(" set random seed:",e),this.randomSeed=e,this.sharedSeed=e},e.randomRoundToInt=function(e,t){return void 0===e&&(e=0),void 0===t&&(t=1),Math.round(this.getRandom(e,t))},e.randomFloorToInt=function(e,t){return void 0===e&&(e=0),void 0===t&&(t=1),Math.floor(this.getRandom(e,t))},e.randomCeilToInt=function(e,t){return void 0===e&&(e=0),void 0===t&&(t=1),Math.ceil(this.getRandom(e,t))},e.clamp=function(e,t,o){return Math.max(t,Math.min(e,o))},e.randomSeed=Math.random(),e.sharedSeed=Math.random(),e}();o.Random=n,cc._RF.pop()},{}],ResourceController:[function(e,t,o){"use strict";cc._RF.push(t,"d264b/eizRMLqzXH1k4Oll+","ResourceController"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../Utils/ToSingleton"),i=e("../Utils/HashMap"),a=e("../Factory/GameFactory");o.Title={Complete:"font_complete",TimeUp:"font_timeup",Over:"font_over"},o.PauseFont={HasFree:"bg_pausefont1",NoneFree:"bg_pausefont2"},o.Font={ServenScore:"totalScore",ResultScore:"resultScore",TimeWhite:"TimeWhite",TimeRed:"TimeRed",AddScore:"addScore",SubScore:"subScore",ShowScore:"showScore"};var r=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.fontMap=new i.HashMap,t.UIAtlas=null,t.Animation=null,t}return __extends(t,e),t.prototype.setFont=function(e,t){this.fontMap.add(e,t)},t.prototype.setAtlas=function(e){console.assert(null!=e,"game atlas is null!"),this.UIAtlas=e},t.prototype.setAnimationAtlas=function(e){console.assert(null!=e,"animation atlas is null!"),this.Animation=e},t.prototype.getAnimationAtlas=function(e){return this.Animation.getSpriteFrame(e)},t.prototype.getTitleSprite=function(e){return this.UIAtlas.getSpriteFrame(e)},t.prototype.getAltas=function(e){return this.UIAtlas.getSpriteFrame(e)},t.prototype.getAddScoreFont=function(){return this.fontMap.get(o.Font.AddScore)},t.prototype.getSubScoreFont=function(){return this.fontMap.get(o.Font.SubScore)},t.prototype.getSoundDisabled=function(){return this.UIAtlas.getSpriteFrame("btn_musicdown")},t.prototype.getSoundEnable=function(){return this.UIAtlas.getSpriteFrame("btn_music")},t.prototype.getPauseFont=function(e){return this.UIAtlas.getSpriteFrame(e)},t.prototype.getTimeRedFont=function(){return this.fontMap.get(o.Font.TimeRed)},t.prototype.getTimeWhiteFont=function(){return this.fontMap.get(o.Font.TimeWhite)},t.prototype.getDiamondNode=function(e){return a.gFactory.getObj("Diamond",e)},t.prototype.putDiamondNode=function(e){a.gFactory.putObj("Diamond",e)},t}(n.SingleTon());o.ResourceController=r,cc._RF.pop()},{"../Factory/GameFactory":"GameFactory","../Utils/HashMap":"HashMap","../Utils/ToSingleton":"ToSingleton"}],ResultLayerView:[function(e,t,o){"use strict";cc._RF.push(t,"ba2b7WYGTNEqazUlmB5rAul","ResultLayerView"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../../View/BaseView"),i=e("../../../View/NumberChangedView"),a=e("../../../Command/CommonSignal"),r=e("../../../Controller/GameStateController"),s=e("../../../Controller/ResourceController"),l=e("../../../Model/PlayModelProxy"),c=e("../../../Utils/Celer/CelerSDK"),u=e("../../../Global/GameRule"),d=e("../../../table"),p=cc._decorator,h=p.ccclass,m=(p.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.CountTotal=7,t.count=0,t}return __extends(t,e),Object.defineProperty(t.prototype,"Root",{get:function(){return this.node.getChildByName("Root")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Title",{get:function(){return this.Root.getChildByName("Title").getComponent(cc.Sprite)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"TotalScore",{get:function(){return this.Root.getChildByName("TotalScore").getComponent(i.default)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"TimeBonus",{get:function(){return this.Root.getChildByName("TimeBonus").getComponent(i.default)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Score",{get:function(){return this.Root.getChildByName("Score").getComponent(i.default)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"TargetCount",{get:function(){return this.Root.getChildByName("TargetCount").getComponent(i.default)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"TargetScore",{get:function(){return this.Root.getChildByName("TargetScore").getComponent(i.default)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"XiuXiuCount",{get:function(){return this.Root.getChildByName("XiuXiuCount").getComponent(i.default)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"XiuXiuScore",{get:function(){return this.Root.getChildByName("XiuXiuScore").getComponent(i.default)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Submit",{get:function(){return this.Root.getChildByName("Submit")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Content",{get:function(){return this.Root.getChildByName("Content").getComponent(cc.RichText)},enumerable:!0,configurable:!0}),t.prototype.onLoad=function(){this.node.active=!1,this.node.scale=1,a.OpenResultLayerSignal.inst.addListenerOne(this.onGameOver,this)},t.prototype.onGameOver=function(e){console.log("Open result:",r.RoundEndType[e]),this.Submit.scale=0,this.Content.string=lan.t(d.En_View.JieSuanJieMian,d.En_ID.ZongDeFen),e==r.RoundEndType.TimeUp?this.Title.spriteFrame=s.ResourceController.inst.getTitleSprite(s.Title.TimeUp):e==r.RoundEndType.Complete?this.Title.spriteFrame=s.ResourceController.inst.getTitleSprite(s.Title.Complete):this.Title.spriteFrame=s.ResourceController.inst.getTitleSprite(s.Title.Over),this.Root.scale=0,this.node.active=!0,this.Root.runAction(cc.sequence(cc.scaleTo(.1,.9,1.3),cc.scaleTo(.1,1.2,.9),cc.scaleTo(.1,1,1),cc.callFunc(this.showInfo.bind(this))))},Object.defineProperty(t.prototype,"Count",{get:function(){return this.count},set:function(e){var t=this;this.count!=e&&(this.count=e,console.log("count:",this.Count),this.Count>=this.CountTotal&&(a.ShowSubmitSignal.inst.dispatch(),this.Submit.runAction(cc.sequence(cc.scaleTo(.1,1.2),cc.scaleTo(.1,1),cc.callFunc(function(){t.Submit.once(cc.Node.EventType.TOUCH_END,function(){c.CelerSDK.inst.submitScore(l.PlayModelProxy.inst.getTotalScore())},t),CELER_X&&setTimeout(function(){c.CelerSDK.inst.submitScore(l.PlayModelProxy.inst.getTotalScore())},5e3)})))))},enumerable:!0,configurable:!0}),t.prototype.showInfo=function(){var e=this;this.Count=0,this.TotalScore.STEP=150,this.TimeBonus.STEP=150,this.Score.STEP=150,this.TargetScore.STEP=150,this.XiuXiuScore.STEP=20,this.XiuXiuCount.STEP=1,this.TargetCount.STEP=1;var t=function(){a.ScoreCountingSignal.inst.dispatch()};this.TimeBonus.onStep=t,this.TotalScore.onStep=t,this.Score.onStep=t,this.TargetScore.onStep=t,this.TargetCount.onStep=t,this.XiuXiuScore.onStep=t,this.XiuXiuCount.onStep=t;var o=l.PlayModelProxy.inst.xiuxiuDieCount*u.XiuXiuDieScore;this.TimeBonus.onNumberChanged(l.PlayModelProxy.inst.TimeBonus,function(){e.Count++,console.log("TimeBonus Done")}),this.TotalScore.onNumberChanged(l.PlayModelProxy.inst.getTotalScore(),function(){e.Count++,console.log("TotalScore Done")}),this.Score.onNumberChanged(l.PlayModelProxy.inst.PlayerScore-o,function(){e.Count++,console.log("Score Done")}),this.TargetScore.onNumberChanged(l.PlayModelProxy.inst.TargetScore,function(){e.Count++,console.log("TargetScore Done")}),this.TargetCount.onNumberChanged(l.PlayModelProxy.inst.TargetCount,function(){e.Count++,console.log("TargetCount Done")}),this.XiuXiuCount.onNumberChanged(l.PlayModelProxy.inst.xiuxiuDieCount,function(){e.Count++,console.log("XiuXiuCount Done")}),this.XiuXiuScore.onNumberChanged(o,function(){e.Count++,console.log("XiuXiuScore Done")})},t=__decorate([h],t)}(n.default));o.default=m,cc._RF.pop()},{"../../../Command/CommonSignal":"CommonSignal","../../../Controller/GameStateController":"GameStateController","../../../Controller/ResourceController":"ResourceController","../../../Global/GameRule":"GameRule","../../../Model/PlayModelProxy":"PlayModelProxy","../../../Utils/Celer/CelerSDK":"CelerSDK","../../../View/BaseView":"BaseView","../../../View/NumberChangedView":"NumberChangedView","../../../table":"table"}],RotationView:[function(e,t,o){"use strict";cc._RF.push(t,"f3329CeqRdN6ZoUyx7znT4N","RotationView"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("./EaseBaseView"),i=cc._decorator,a=i.ccclass,r=(i.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.startRotation=0,t}return __extends(t,e),t.prototype.onLoad=function(){0},t.prototype.canUpdate=function(){return!0},t.prototype.start=function(){},t.prototype.onRotationChanged=function(e,t,o,n){void 0===n&&(n=0),this.startRotation=this.node.rotation,this.startUpdate(new cc.Vec3(e,e,e),t,o,n)},t.prototype.onStep=function(){this.node.rotation=this.ease(this.startRotation,this.Target.x)},t.prototype.onComplete=function(){this.node.setRotation(this.Target.x)},t=__decorate([a],t)}(n.default));o.default=r,cc._RF.pop()},{"./EaseBaseView":"EaseBaseView"}],ScaleView:[function(e,t,o){"use strict";cc._RF.push(t,"b6981r0u55OyqSF4preRXtY","ScaleView"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("./EaseBaseView"),i=cc._decorator,a=i.ccclass,r=(i.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.startScale=cc.Vec2.ZERO,t}return __extends(t,e),t.prototype.onLoad=function(){0},t.prototype.canUpdate=function(){return!0},t.prototype.start=function(){},t.prototype.onScaleChanged=function(e,t,o,n){void 0===n&&(n=0),this.startScale=cc.v2(this.node.scaleX,this.node.scaleY),this.startUpdate(new cc.Vec3(e.x,e.y,0),t,o,n)},t.prototype.onStep=function(){this.node.scaleX=this.ease(this.startScale.x,this.Target.x),this.node.scaleY=this.ease(this.startScale.y,this.Target.y)},t.prototype.onComplete=function(){this.node.scaleX=this.Target.x,this.node.scaleY=this.Target.y},t=__decorate([a],t)}(n.default));o.default=r,cc._RF.pop()},{"./EaseBaseView":"EaseBaseView"}],ScoreLabelView:[function(e,t,o){"use strict";cc._RF.push(t,"5857dLL+ulDqKijkly4V/xN","ScoreLabelView"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../../Command/CommonSignal"),i=e("../../../Controller/ResourceController"),a=e("../../../Factory/GameFactory"),r=e("../../../Utils/Cocos"),s=e("../../../View/NumberChangedView"),l=e("../../Model/GamePlayModel"),c=cc._decorator,u=c.ccclass,d=c.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.ScoreFloatRoot=null,t}return __extends(t,e),t.prototype.onLoad=function(){var e=this;n.PlayerScoreChanged.inst.addListenerFive(this.onScoreChanged,this),n.GameStartSignal.inst.addListener(function(){e.onNumberChanged(0)},this)},t.prototype.onScoreChanged=function(e,t,o,n,s){var c=this,u=a.gFactory.getObj("AddScore"),d=u.getComponent(cc.Label);d.font=t>=0?i.ResourceController.inst.getAddScoreFont():i.ResourceController.inst.getSubScoreFont(),d.string="/"+Math.abs(t),this.ScoreFloatRoot.addChild(u);var p=cc.v2(0,0);s&&(p=r.ConvertToNodeSpaceAR(s,this.ScoreFloatRoot));var h=r.ConvertToNodeSpaceAR(this.node,this.ScoreFloatRoot);if(p.addSelf(cc.v2(0,150)),u.setPosition(p),u.opacity=255,u.scale=0,o==l.ScoreType.Product)u.runAction(cc.sequence(cc.scaleTo(0,0),cc.scaleTo(.1,1),cc.delayTime(.2),cc.spawn(cc.moveTo(.2,p.add(cc.v2(0,70))),cc.fadeOut(.2)),cc.callFunc(function(){a.gFactory.putObj("AddScore",u)}))),setTimeout(function(){c.onNumberChanged(e)},500);else{var m=r.Distance(p,h)/2e3;u.runAction(cc.sequence(cc.scaleTo(0,0),cc.scaleTo(.2,1.2),cc.scaleTo(.1,1),cc.moveTo(m,h),cc.callFunc(function(){a.gFactory.putObj("AddScore",u)}))),setTimeout(function(){c.onNumberChanged(e)},300+1e3*m)}},__decorate([d(cc.Node)],t.prototype,"ScoreFloatRoot",void 0),t=__decorate([u],t)}(s.default);o.default=p,cc._RF.pop()},{"../../../Command/CommonSignal":"CommonSignal","../../../Controller/ResourceController":"ResourceController","../../../Factory/GameFactory":"GameFactory","../../../Utils/Cocos":"Cocos","../../../View/NumberChangedView":"NumberChangedView","../../Model/GamePlayModel":"GamePlayModel"}],Signal:[function(e,t,o){"use strict";cc._RF.push(t,"5e03fyVNOZPs7lLvT6ttunM","Signal"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.listenerMap=[],t.onceListenerMap=[],t}return __extends(t,e),t.prototype.doDispatch=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.excuteListener.apply(this,e),this.excuteOnce.apply(this,e)},t.prototype.excuteListener=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(this.listenerMap&&this.listenerMap.length>0)for(var o=0,n=this.listenerMap;o<n.length;o++){var i=n[o];i.callback.apply(i.target,e)}},t.prototype.excuteOnce=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(this.onceListenerMap&&this.onceListenerMap.length>0){for(var o=0,n=this.onceListenerMap;o<n.length;o++){var i=n[o];i.callback.apply(i.target,e)}this.onceListenerMap.length=0}},t.prototype.listen=function(e,t){this.listenerMap.push({callback:e,target:t})},t.prototype.listenOnce=function(e,t){this.onceListenerMap.push({callback:e,target:t})},t.prototype.removeListener=function(e,t){if(this.listenerMap&&this.listenerMap.length>0)for(var o=0;o<this.listenerMap.length;++o){var n=this.listenerMap[o];n.callback==e&&n.target==t&&(this.listenerMap.splice(o,1),--o)}},t.prototype.removeTarget=function(e){if(this.listenerMap&&this.listenerMap.length>0)for(var t=0;t<this.listenerMap.length;++t){this.listenerMap[t].target==e&&(this.listenerMap.splice(t,1),--t)}},t.prototype.dispatch=function(){this.doDispatch(null)},t.prototype.dispatchOne=function(e){this.doDispatch(e)},t.prototype.dispatchTwo=function(e,t){this.doDispatch(e,t)},t.prototype.dispatchThree=function(e,t,o){this.doDispatch(e,t,o)},t.prototype.dispatchFour=function(e,t,o,n){this.doDispatch(e,t,o,n)},t.prototype.dispatchFive=function(e,t,o,n,i){this.doDispatch(e,t,o,n,i)},t.prototype.addListener=function(e,t){this.listen(e,t)},t.prototype.addOnce=function(e,t){this.listenOnce(e,t)},t.prototype.addListenerOne=function(e,t){this.listen(e,t)},t.prototype.addListenerTwo=function(e,t){this.listen(e,t)},t.prototype.addListenerThree=function(e,t){this.listen(e,t)},t.prototype.addListenerFour=function(e,t){this.listen(e,t)},t.prototype.addListenerFive=function(e,t){this.listen(e,t)},t.prototype.addOnceOne=function(e,t){this.listenOnce(e,t)},t.prototype.addOnceTwo=function(e,t){this.listenOnce(e,t)},t.prototype.addOnceThree=function(e,t){this.listenOnce(e,t)},t.prototype.addOnceFour=function(e,t){this.listenOnce(e,t)},t.prototype.addOnceFive=function(e,t){this.listenOnce(e,t)},t}(e("./ToSingleton").SingleTon());o.BaseSignal=n,cc._RF.pop()},{"./ToSingleton":"ToSingleton"}],SingleTouchMediator:[function(e,t,o){"use strict";cc._RF.push(t,"e1695pPIshGg5cBwRP4Oun7","SingleTouchMediator"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,i=n.ccclass,a=(n.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.touchid=null,t}return __extends(t,e),t.prototype.bind=function(e){this.view=e},Object.defineProperty(t.prototype,"View",{get:function(){return console.assert(null!=this.view," view is null"),this.view},enumerable:!0,configurable:!0}),t.prototype.onRegister=function(){this.node.targetOff(this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this.touchCancel,this),this.node.on(cc.Node.EventType.TOUCH_END,this.touchEnd,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this.touchMove,this),this.node.on(cc.Node.EventType.TOUCH_START,this.touchStart,this)},t.prototype.onUnregister=function(){this.node.targetOff(this)},t.prototype.touchStart=function(e){if(null!==this.touchid&&this.touchid!==e.getID())return console.log(this.node.name," touch start  touchid is different: ",this.touchid,e.getID()),void e.stopPropagation();this.touchid=e.getID(),this.onTouchStart(e)},t.prototype.touchMove=function(e){null===this.touchid||this.touchid===e.getID()?(this.touchid=e.getID(),this.onTouchMove(e)):e.stopPropagation()},t.prototype.touchEnd=function(e){if(null!==this.touchid&&this.touchid!==e.getID())return console.log(this.node.name," touch end  touchid is different: ",this.touchid,e.getID()),void e.stopPropagation();null!=this.touchid?(this.touchid=null,this.onTouchEnd(e),this.OnClick()):e.stopPropagation()},t.prototype.touchCancel=function(e){if(null!==this.touchid&&this.touchid!==e.getID())return console.log(this.node.name," touch cancel  touchid is different: ",this.touchid,e.getID()),void e.stopPropagation();null!=this.touchid?(this.touchid=null,this.onTouchCancel(e)):e.stopPropagation()},t.prototype.OnClick=function(){},t.prototype.onTouchStart=function(e){},t.prototype.onTouchMove=function(e){},t.prototype.onTouchEnd=function(e){},t.prototype.onTouchCancel=function(e){},t=__decorate([i],t)}(cc.Component));o.default=a,cc._RF.pop()},{}],SingleTouchView:[function(e,t,o){"use strict";cc._RF.push(t,"85688DQVyhPRqaAh/y2/Qug","SingleTouchView"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("./BaseView"),i=cc._decorator,a=i.ccclass,r=(i.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.touchid=null,t}return __extends(t,e),t.prototype.onLoad=function(){this.node.on(cc.Node.EventType.TOUCH_CANCEL,this.touchCancel,this),this.node.on(cc.Node.EventType.TOUCH_END,this.touchEnd,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this.touchMove,this),this.node.on(cc.Node.EventType.TOUCH_START,this.touchStart,this)},t.prototype.start=function(){},t.prototype.touchStart=function(e){null===this.touchid||this.touchid===e.getID()?(this.touchid=e.getID(),this.onTouchStart(e)):console.log(this.node.name," touch start  touchid is different! ")},t.prototype.touchMove=function(e){null!==this.touchid&&this.touchid!==e.getID()||(this.touchid=e.getID(),this.onTouchMove(e))},t.prototype.touchEnd=function(e){null===this.touchid||this.touchid===e.getID()?(this.touchid=null,this.onTouchEnd(e)):console.log(this.node.name," touch end  touchid is different! ")},t.prototype.touchCancel=function(e){null===this.touchid||this.touchid===e.getID()?(this.touchid=null,this.onTouchCancel(e)):console.log(this.node.name," touch cancel  touchid is different! ")},t.prototype.onTouchStart=function(e){},t.prototype.onTouchMove=function(e){},t.prototype.onTouchEnd=function(e){},t.prototype.onTouchCancel=function(e){},t=__decorate([a],t)}(n.default));o.default=r,cc._RF.pop()},{"./BaseView":"BaseView"}],SkewView:[function(e,t,o){"use strict";cc._RF.push(t,"dec79oJ2D1Ju7yCFAAR3rSI","SkewView"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("./EaseBaseView"),i=cc._decorator,a=i.ccclass,r=(i.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.startSkew=cc.Vec2.ZERO,t}return __extends(t,e),t.prototype.onLoad=function(){0},t.prototype.start=function(){},t.prototype.canUpdate=function(){return!0},t.prototype.onSkewChanged=function(e,t,o,n){void 0===n&&(n=0),this.startSkew=cc.v2(this.node.skewX,this.node.skewY),this.startUpdate(new cc.Vec3(e.x,e.y,0),t,o,n)},t.prototype.onStep=function(){this.node.skewX=this.ease(this.startSkew.x,this.Target.x),this.node.skewY=this.ease(this.startSkew.y,this.Target.y)},t.prototype.onComplete=function(){this.node.skewX=this.Target.x,this.node.skewY=this.Target.y},t=__decorate([a],t)}(n.default));o.default=r,cc._RF.pop()},{"./EaseBaseView":"EaseBaseView"}],SliderView:[function(e,t,o){"use strict";cc._RF.push(t,"2c746YFJCxKFJ34ypIaA1v3","SliderView"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../Utils/Random"),i=cc._decorator,a=i.ccclass,r=i.property,s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.Progress=null,t.Slider=null,t.totalLength=0,t}return __extends(t,e),Object.defineProperty(t.prototype,"Percent",{get:function(){return this.Slider.progress},set:function(e){this.Slider.progress=n.Random.clamp(e,0,1),this.Progress.width=this.node.width*this.Slider.progress},enumerable:!0,configurable:!0}),t.prototype.onLoad=function(){this.Slider.node.on("slide",this.onSlided,this),this.totalLength=this.Progress.width},t.prototype.onSlided=function(){this.Progress.width=this.totalLength*this.Slider.progress,this.onProgress&&this.onProgress(this.Slider.progress)},t.prototype.start=function(){},t.prototype.onProgress=function(e){},__decorate([r(cc.Node)],t.prototype,"Progress",void 0),__decorate([r(cc.Slider)],t.prototype,"Slider",void 0),t=__decorate([a],t)}(cc.Component);o.default=s,cc._RF.pop()},{"../Utils/Random":"Random"}],SoundButtonView:[function(e,t,o){"use strict";cc._RF.push(t,"6d699bXGkJBYb+wyjeQyALI","SoundButtonView"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../../Controller/ResourceController"),i=e("../../../Manager/AudioManager"),a=e("../../../View/SingleTouchView"),r=cc._decorator,s=r.ccclass,l=(r.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),Object.defineProperty(t.prototype,"Sprite",{get:function(){return this.getComponent(cc.Sprite)},enumerable:!0,configurable:!0}),t.prototype.onTouchEnd=function(){i.gAudio.MusicVolume>0?(i.gAudio.setEffectVolume(0),i.gAudio.setMusicVolume(0),this.Sprite.spriteFrame=n.ResourceController.inst.getSoundDisabled(),this.getComponent(cc.Button).interactable=!1):(i.gAudio.setEffectVolume(1),i.gAudio.setMusicVolume(1),this.Sprite.spriteFrame=n.ResourceController.inst.getSoundEnable(),this.getComponent(cc.Button).interactable=!0)},t=__decorate([s],t)}(a.default));o.default=l,cc._RF.pop()},{"../../../Controller/ResourceController":"ResourceController","../../../Manager/AudioManager":"AudioManager","../../../View/SingleTouchView":"SingleTouchView"}],StartGameCommand:[function(e,t,o){"use strict";cc._RF.push(t,"1db594KvoJIVbc+cwfogrGn","StartGameCommand"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../Command/CommonSignal"),i=e("../../Model/PlayModelProxy"),a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.execute=function(e){console.log("--------- excute StartGameCommand ---------"),this.normalInit(),n.GameReadySignal.inst.dispatch()},t.prototype.testInit=function(){i.PlayModelProxy.inst.initGameDataTest(),i.PlayModelProxy.inst.initGametheme()},t.prototype.normalInit=function(){i.PlayModelProxy.inst.initGameData(),i.PlayModelProxy.inst.initGametheme()},t}(puremvc.SimpleCommand);o.StartGameCommand=a,cc._RF.pop()},{"../../Command/CommonSignal":"CommonSignal","../../Model/PlayModelProxy":"PlayModelProxy"}],StepManager:[function(e,t,o){"use strict";cc._RF.push(t,"83709TvPtJOVayPDGaPh6Ov","StepManager"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function e(){this.totalStep=[],this.curStep=[],this.loadTime={}}return e.prototype.register=function(e,t){this.completeCallback=e,this.totalStep=t;for(var o=0,n=t;o<n.length;o++){var i=n[o];this.loadTime[i]=Date.now()}},e.prototype.nextStep=function(e){if(this.totalStep.indexOf(e)<0)console.error(" \u6ca1\u6709\u8fd9\u4e00\u6b65\uff1a",e);else if(this.curStep.indexOf(e)>=0)console.warn(" \u6b65\u9aa4\u5df2\u5b8c\u6210\uff1a",e);else{this.curStep.push(e),this.curStep.sort(function(e,t){return e>t?-1:1}),this.totalStep.sort(function(e,t){return e>t?-1:1});var t=this.curStep.join("-"),o=this.totalStep.join("-"),n=Date.now()-this.loadTime[e];console.log(" cur step:",t,", total step:",o,", cost time:",n," ms"),t==o&&(console.log(" step done"),this.totalStep.length=0,this.completeCallback(),this.completeCallback=null)}},e}();o.StepManager=n,cc._RF.pop()},{}],SubmitButtonView:[function(e,t,o){"use strict";cc._RF.push(t,"7d5e6ERlcdIapmrVvugM7L/","SubmitButtonView"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../../Controller/GameStateController"),i=e("../../../View/SingleTouchView"),a=e("../../Command/GamePlaySignal"),r=cc._decorator,s=r.ccclass,l=(r.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onTouchEnd=function(){n.GameStateController.inst.isGameOver()||0==n.GameStateController.inst.isRoundStart()||a.SubmitButtonClickSignal.inst.dispatchOne("Submit"==this.node.name)},t=__decorate([s],t)}(i.default));o.default=l,cc._RF.pop()},{"../../../Controller/GameStateController":"GameStateController","../../../View/SingleTouchView":"SingleTouchView","../../Command/GamePlaySignal":"GamePlaySignal"}],SubmitLayerView:[function(e,t,o){"use strict";cc._RF.push(t,"f65c05YNytD2Zq3Ran+pohk","SubmitLayerView"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../../Command/CommonSignal"),i=e("../../../Controller/GameStateController"),a=e("../../../Global/GameRule"),r=e("../../../Model/PlayModelProxy"),s=e("../../../table"),l=e("../../../View/BaseView"),c=e("../../Command/GamePlaySignal"),u=cc._decorator,d=u.ccclass,p=(u.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),Object.defineProperty(t.prototype,"EndButton",{get:function(){return this.node.getChildByName("btn_end")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ResumeButton",{get:function(){return this.node.getChildByName("btn_resume")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Content",{get:function(){return this.node.getChildByName("Content").getComponent(cc.RichText)},enumerable:!0,configurable:!0}),t.prototype.onLoad=function(){var e=this;setTimeout(function(){e.node.active=!1,e.node.scale=1},0),c.SubmitButtonClickSignal.inst.addListenerOne(this.onSubmit,this),n.ShowPauseLayerSignal.inst.addListener(function(){e.onSubmit(!1)},this),this.EndButton&&this.EndButton.on(cc.Node.EventType.TOUCH_END,this.endNow,this),this.ResumeButton&&this.ResumeButton.on(cc.Node.EventType.TOUCH_END,this.Resume,this)},t.prototype.endNow=function(){var e=this;i.GameStateController.inst.roundEnd(i.RoundEndType.Over),n.ButtonClickSignal.inst.dispatch(),setTimeout(function(){e.Hide()},0)},t.prototype.Resume=function(){var e=this;i.GameStateController.inst.resume(),n.ButtonClickSignal.inst.dispatch(),setTimeout(function(){e.Hide()},0)},t.prototype.onSubmit=function(e){this.node.active||(console.log("show submit layer:",e),r.PlayModelProxy.inst.FreePauseCount>0?this.Content.string=lan.t(s.En_View.ZanTingJieMian,s.En_ID.MianFeiZanTing,[r.PlayModelProxy.inst.FreePauseCount.toString(),"-"+a.PauseScoreCost]):this.Content.string=lan.t(s.En_View.ZanTingJieMian,s.En_ID.ZanTingKouFen,["-"+a.PauseScoreCost]),this.Show(),n.ButtonClickSignal.inst.dispatch(),i.GameStateController.inst.pause())},t=__decorate([d],t)}(l.default));o.default=p,cc._RF.pop()},{"../../../Command/CommonSignal":"CommonSignal","../../../Controller/GameStateController":"GameStateController","../../../Global/GameRule":"GameRule","../../../Model/PlayModelProxy":"PlayModelProxy","../../../View/BaseView":"BaseView","../../../table":"table","../../Command/GamePlaySignal":"GamePlaySignal"}],TableManager:[function(e,t,o){"use strict";cc._RF.push(t,"23163GZ3OZC04gK/mv1E9X5","TableManager"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function e(){this.load=e.JSON_URL&&""!=e.JSON_URL?cc.loader.load.bind(cc.loader):cc.loader.loadRes.bind(cc.loader),this.fileFormat=e.JSON_URL&&""!=e.JSON_URL?".json?time="+Date.now():"",this.total=0,this.complete=0,this.En={},this.Es={},this.Fil={},this.Id={},this.In={},this.Pt={},this.Tl={}}return Object.defineProperty(e,"inst",{get:function(){return this.ins?this.ins:this.ins=new e},enumerable:!0,configurable:!0}),e.prototype.startLoad=function(t,o,n){this.completeCallback=o,this.progressCallback=n;var i=this;console.log("Base URL:",e.JSON_URL),this.load(e.JSON_URL+t.trim().split("/").join("")+"/file_list"+this.fileFormat,function(e,o){if(e)console.error(e.errorMessage);else{var n="Array"==o.constructor.name?o:o.json;this.total=n.length;for(var a=0,r=n;a<r.length;a++){var s=r[a];i.loadJson(t.trim().split("/").join("")+"/"+s.replace(".json",""))}}}.bind(this))},e.prototype.loadJson=function(t){console.log("start load:"+t);var o=this,n=t.split("/")[1];n=n.charAt(0).toUpperCase()+n.slice(1,n.length),this.load(e.JSON_URL+t+this.fileFormat,function(e,t){if(e)console.error(e.errorMessage);else{for(var i=0,a="Array"==t.constructor.name?t:t.json;i<a.length;i++){var r=a[i];o[n][r.ID]=r}o.completeLoad()}}.bind(this))},e.prototype.completeLoad=function(){this.complete++,this.progressCallback&&this.progressCallback(this.complete/this.total),this.complete>=this.total&&this.completeCallback&&this.completeCallback()},e.prototype.getEn=function(e){return this.En[e]?this.En[e]:(console.error("En \u4e0d\u5b58key\uff1a"+e),null)},e.prototype.getAll_En_Data=function(){return this.En},e.prototype.getEs=function(e){return this.Es[e]?this.Es[e]:(console.error("Es \u4e0d\u5b58key\uff1a"+e),null)},e.prototype.getAll_Es_Data=function(){return this.Es},e.prototype.getFil=function(e){return this.Fil[e]?this.Fil[e]:(console.error("Fil \u4e0d\u5b58key\uff1a"+e),null)},e.prototype.getAll_Fil_Data=function(){return this.Fil},e.prototype.getId=function(e){return this.Id[e]?this.Id[e]:(console.error("Id \u4e0d\u5b58key\uff1a"+e),null)},e.prototype.getAll_Id_Data=function(){return this.Id},e.prototype.getIn=function(e){return this.In[e]?this.In[e]:(console.error("In \u4e0d\u5b58key\uff1a"+e),null)},e.prototype.getAll_In_Data=function(){return this.In},e.prototype.getPt=function(e){return this.Pt[e]?this.Pt[e]:(console.error("Pt \u4e0d\u5b58key\uff1a"+e),null)},e.prototype.getAll_Pt_Data=function(){return this.Pt},e.prototype.getTl=function(e){return this.Tl[e]?this.Tl[e]:(console.error("Tl \u4e0d\u5b58key\uff1a"+e),null)},e.prototype.getAll_Tl_Data=function(){return this.Tl},e.JSON_URL="",e}();o.TableManager=n,cc._RF.pop()},{}],TargetGetAnimation:[function(e,t,o){"use strict";cc._RF.push(t,"c49b6bwG3FD8aIzv4g+nRsN","TargetGetAnimation"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../../Utils/FrameAniBase"),i=e("../Game/Diamonds/DiamondPosMediator"),a=cc._decorator,r=a.ccclass,s=(a.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onLoad=function(){var t=this;e.prototype.onLoad.call(this),i.OnGet7DoneSignal.inst.addListener(function(){t.node.opacity=255,t.play()},this)},t.prototype.onComplete=function(){this.node.runAction(cc.fadeOut(.1))},t=__decorate([r],t)}(n.default));o.default=s,cc._RF.pop()},{"../../../Utils/FrameAniBase":"FrameAniBase","../Game/Diamonds/DiamondPosMediator":"DiamondPosMediator"}],Test:[function(e,t,o){"use strict";cc._RF.push(t,"df1af1sWs9HWZ8cYz9x0Gs9","Test"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,i=n.ccclass,a=(n.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onLoad=function(){this.node.active=!1},t.prototype.start=function(){},t=__decorate([i],t)}(cc.Component));o.default=a,cc._RF.pop()},{}],ThemeView:[function(e,t,o){"use strict";cc._RF.push(t,"2b2d1k5+RZFrKLwiNmu7pk+","ThemeView"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../View/BaseView"),i=e("../../Global/Theme"),a=e("../../Command/CommonSignal"),r=cc._decorator,s=r.ccclass,l=(r.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onLoad=function(){a.GameThemeInit.inst.addListenerOne(this.onThemeInit,this)},t.prototype.start=function(){},t.prototype.onThemeInit=function(e){this.node.active=this.node.name==i.Theme[e]},t=__decorate([s],t)}(n.default));o.default=l,cc._RF.pop()},{"../../Command/CommonSignal":"CommonSignal","../../Global/Theme":"Theme","../../View/BaseView":"BaseView"}],Theme:[function(e,t,o){"use strict";cc._RF.push(t,"5fef4dbBENAfYW6Tw8oUA62","Theme"),Object.defineProperty(o,"__esModule",{value:!0}),function(e){e[e.Green=0]="Green",e[e.Red=1]="Red"}(o.Theme||(o.Theme={})),cc._RF.pop()},{}],TiledModel:[function(e,t,o){"use strict";cc._RF.push(t,"f9165U5VmZLdYkCCllem5i9","TiledModel"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../../Utils/HashMap"),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(e("../../../Utils/Signal").BaseSignal);o.TiledLockStateChangedSignal=i;var a=function(){function e(t){this.index=0,this.locked=!0,this.isOccupied=!1,this.diamondID="",this.index=t,e.tiledMap.add(this.index,this)}return e.getTiledModelByIndex=function(e,t){return void 0===t&&(t=!1),this.tiledMap.has(e)||0!=t||console.error("tiled is null :",e),this.tiledMap.get(e)},Object.defineProperty(e.prototype,"Index",{get:function(){return this.index},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isLocked",{get:function(){return this.locked},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hasOccupied",{get:function(){return this.isOccupied},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"DiamondID",{get:function(){return this.diamondID},enumerable:!0,configurable:!0}),e.prototype.setLock=function(e){this.locked!=e&&(this.locked=e,i.inst.dispatchTwo(this.Index,this.isLocked))},e.prototype.setOccupy=function(e){this.isOccupied=e},e.prototype.bindDiamond=function(e){this.diamondID=e,this.setOccupy(!0)},e.prototype.clearDiamond=function(){this.diamondID="",12!=this.index&&this.setOccupy(!1)},e.tiledMap=new n.HashMap,e}();o.TiledModel=a,cc._RF.pop()},{"../../../Utils/HashMap":"HashMap","../../../Utils/Signal":"Signal"}],TiledOpenAnimation:[function(e,t,o){"use strict";cc._RF.push(t,"868060oxXhMO4awVj725Tr5","TiledOpenAnimation"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../../Utils/FrameAniBase"),i=e("../../../Utils/Signal"),a=e("../../Model/Tiled/TiledModel"),r=cc._decorator,s=r.ccclass,l=(r.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(i.BaseSignal));o.OnTiledOpendSignal=l;var c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onLoad=function(){e.prototype.onLoad.call(this),a.TiledLockStateChangedSignal.inst.addListenerTwo(this.onTiledStateChanged,this)},t.prototype.onTiledStateChanged=function(e,t){var o=this;e.toString()==this.node.parent.name&&0==t&&(this.onComplete=function(){o.node.runAction(cc.fadeOut(.2)),l.inst.dispatchTwo(e,t)},this.node.opacity=255,this.play())},t=__decorate([s],t)}(n.default);o.default=c,cc._RF.pop()},{"../../../Utils/FrameAniBase":"FrameAniBase","../../../Utils/Signal":"Signal","../../Model/Tiled/TiledModel":"TiledModel"}],TiledView:[function(e,t,o){"use strict";cc._RF.push(t,"dce72Bx1V1I4YbILuDSjHIT","TiledView"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../../Utils/HashMap"),i=e("../Animation/TiledOpenAnimation"),a=cc._decorator,r=a.ccclass,s=(a.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}var o;return __extends(t,e),o=t,t.getTiledByIndex=function(e){return 0==this.tiledViewMap.has(e.toString())&&console.error("tiled not exist:",e),this.tiledViewMap.get(e.toString())},t.prototype.onLoad=function(){i.OnTiledOpendSignal.inst.addListenerTwo(this.onTiledOpend,this),o.tiledViewMap.add(this.node.name,this.node)},t.prototype.onTiledOpend=function(e,t){this.node.name==e.toString()&&(this.node.active=!1)},t.tiledViewMap=new n.HashMap,t=o=__decorate([r],t)}(cc.Component));o.default=s,cc._RF.pop()},{"../../../Utils/HashMap":"HashMap","../Animation/TiledOpenAnimation":"TiledOpenAnimation"}],TimeEffectAnimation:[function(e,t,o){"use strict";cc._RF.push(t,"603e6ws6zRH9IcpX4uo/ZlK","TimeEffectAnimation"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../Utils/FrameAniBase"),i=e("../Command/CommonSignal"),a=cc._decorator,r=a.ccclass,s=(a.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onLoad=function(){e.prototype.onLoad.call(this),this.node.opacity=0,i.TimeAnimationStateChanged.inst.addListenerOne(this.onPlayStateChanged,this)},t.prototype.onPlayStateChanged=function(e){e?0==this.isPlaying&&this.play():this.stop()},t.prototype.start=function(){},t.prototype.play=function(){this.node.opacity=255,e.prototype.play.call(this)},t.prototype.stop=function(){this.node.opacity=0,e.prototype.stop.call(this)},t=__decorate([r],t)}(n.default));o.default=s,cc._RF.pop()},{"../Command/CommonSignal":"CommonSignal","../Utils/FrameAniBase":"FrameAniBase"}],TimeLabelView:[function(e,t,o){"use strict";cc._RF.push(t,"8e78fIPKARBx69B005nUUwo","TimeLabelView"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../../Command/CommonSignal"),i=e("../../../Controller/ResourceController"),a=e("../../../Utils/Time"),r=e("../../../View/BaseView"),s=e("../../Model/GamePlayModel"),l=cc._decorator,c=l.ccclass,u=(l.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.sec=0,t}return __extends(t,e),Object.defineProperty(t.prototype,"Label",{get:function(){return this.getComponent(cc.Label)},enumerable:!0,configurable:!0}),t.prototype.onLoad=function(){var e=this;n.UpdateTimeNumber.inst.addListenerOne(this.onTimeChanged,this),this.node.active=!1,s.OnGameTimeInitSignal.inst.addListenerOne(function(t){e.node.active=!0,e.onTimeChanged(t)},this)},t.prototype.onTimeChanged=function(e){var t=a.Time.timeFormat(e);"MinuteLabel"==this.node.name?this.Label.string=t.split("/")[0]:this.Label.string=t.split("/")[1],this.Label.font=e>30?i.ResourceController.inst.getTimeWhiteFont():i.ResourceController.inst.getTimeRedFont();var o=Math.floor(e);o!=this.sec&&"MinuteLabel"==this.node.name&&(this.sec=o,this.sec<=5&&n.CountDownSignal.inst.dispatch())},t.prototype.start=function(){},t=__decorate([c],t)}(r.default));o.default=u,cc._RF.pop()},{"../../../Command/CommonSignal":"CommonSignal","../../../Controller/ResourceController":"ResourceController","../../../Utils/Time":"Time","../../../View/BaseView":"BaseView","../../Model/GamePlayModel":"GamePlayModel"}],Time:[function(e,t,o){"use strict";cc._RF.push(t,"87a24xcV95AoII6L5W1ABoI","Time"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function e(){}return e.timeFormat=function(e){var t=Math.floor(e/60),o=Math.floor(e%60),n=o.toString();return o<10&&(n="0"+o),t+"/"+n},e}();o.Time=n,cc._RF.pop()},{}],ToSingleton:[function(e,t,o){"use strict";cc._RF.push(t,"b07299nlSpOIIxOkIMBhUY9","ToSingleton"),Object.defineProperty(o,"__esModule",{value:!0}),o.SingleTon=function(){return function(){function e(){}return Object.defineProperty(e,"inst",{get:function(){return this.ins?this.ins:this.ins=new this},enumerable:!0,configurable:!0}),e}()},cc._RF.pop()},{}],TotalTargetView:[function(e,t,o){"use strict";cc._RF.push(t,"b8443uhZ3dB/oRYc3xbVWGh","TotalTargetView"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../../Global/GameRule"),i=cc._decorator,a=i.ccclass,r=i.property,s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.label=null,t}return __extends(t,e),t.prototype.onLoad=function(){this.label.string=n.GetTargetDiamond7Count().toString()},t.prototype.start=function(){},__decorate([r(cc.Label)],t.prototype,"label",void 0),t=__decorate([a],t)}(cc.Component);o.default=s,cc._RF.pop()},{"../../../Global/GameRule":"GameRule"}],ToturialBoxView:[function(e,t,o){"use strict";cc._RF.push(t,"c4d80zPXHdFP5z0WwaKwS56","ToturialBoxView"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../../Command/CommonSignal"),i=e("../../../Initialization/View/LoadingPageMediator"),a=cc._decorator,r=a.ccclass,s=(a.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onLoad=function(){},t.prototype.start=function(){var e=this;this.node.active=!1,i.ShowDynToturialSignal.inst.addListener(function(){e.node.active=!0},this),n.GameStartSignal.inst.addListener(function(){e.node.active=!1},this)},t=__decorate([r],t)}(cc.Component));o.default=s,cc._RF.pop()},{"../../../Command/CommonSignal":"CommonSignal","../../../Initialization/View/LoadingPageMediator":"LoadingPageMediator"}],TutorialLayer:[function(e,t,o){"use strict";cc._RF.push(t,"d48dd/cbVdPvIcqFaRbGT5Z","TutorialLayer"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../../Command/CommonSignal"),i=e("../../../Initialization/View/LoadingPageMediator"),a=e("../../../Model/PlayModelProxy"),r=e("../../../table"),s=e("../../../View/BaseView"),l=cc._decorator,c=l.ccclass,u=(l.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),Object.defineProperty(t.prototype,"Content",{get:function(){return this.node.getChildByName("Content").getComponent(cc.Sprite)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Finger",{get:function(){return this.node.getChildByName("Finger")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Mask",{get:function(){return this.node.getChildByName("bg_black")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Start",{get:function(){return this.node.getChildByName("btn_start")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Label",{get:function(){return this.Content.node.getChildByName("Label").getComponent(cc.RichText)},enumerable:!0,configurable:!0}),t.prototype.onLoad=function(){var e=this;a.TutorialStepSignal.inst.addListenerOne(this.onGuideStep,this),i.ShowDynToturialSignal.inst.addListener(function(){e.node.active=!0},this),this.node.scale=1,this.node.active=!1,this.Finger.active=!1,this.Mask.active=!1,this.Start.active=!1},t.prototype.onGuideStep=function(e){var t=this;switch(e){case 1:this.Finger.active=!0,this.Finger.setPosition(308.331,-19.481),this.Finger.stopAllActions(),this.Finger.runAction(cc.repeatForever(cc.sequence(cc.rotateTo(.2,10),cc.rotateTo(.4,-10),cc.rotateTo(.2,0))));break;case 2:this.Finger.active=!1;break;case 3:this.Finger.active=!0,this.Finger.y=190,this.Mask.active=!0;break;case 4:this.Finger.stopAllActions(),this.Finger.runAction(cc.repeatForever(cc.sequence(cc.moveTo(.2,308.331,-19.481),cc.fadeOut(.3),cc.moveTo(0,308.331,190),cc.fadeIn(.2))));break;case 5:this.Finger.active=!1,this.Start.active=!0,this.Start.once(cc.Node.EventType.TOUCH_END,function(){a.PlayModelProxy.inst.endTutorial(),t.Hide(),n.GameStartSignal.inst.dispatch()},this)}this.Label.string=lan.t(r.En_View.XinShouYinDao,r.En_ID.YinDao4+e-1,[]),this.Label.lineHeight=lan.style(r.En_View.XinShouYinDao,r.En_ID.YinDao4+e-1).LineHeight||this.Label.lineHeight},t=__decorate([c],t)}(s.default));o.default=u,cc._RF.pop()},{"../../../Command/CommonSignal":"CommonSignal","../../../Initialization/View/LoadingPageMediator":"LoadingPageMediator","../../../Model/PlayModelProxy":"PlayModelProxy","../../../View/BaseView":"BaseView","../../../table":"table"}],UpdateController:[function(e,t,o){"use strict";cc._RF.push(t,"b3cadc9oLxMlaTWSqS0DgLW","UpdateController"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../Utils/ToSingleton"),i=cc._decorator,a=i.ccclass,r=(i.property,function(e){function t(){var t=e.call(this)||this;return t.assetsManager=null,t.STORAGE_PATH=(window.jsb&&jsb.fileUtils?jsb.fileUtils.getWritablePath():"/")+"hot-update",t.MANIFEST_PAth="",t.isUpdating=!1,t.manifest=null,t.completeCallback=[],t.startCallback=[],t.errorCallback=[],t.progressCallback=[],t.init(),t}return __extends(t,e),t.prototype.init=function(){window.jsb&&(this.assetsManager=new jsb.AssetsManager(this.MANIFEST_PAth,this.STORAGE_PATH,this.versionCompareHandle),this.assetsManager.setVerifyCallback(this.verifyCallback.bind(this)),cc.sys.os===cc.sys.OS_ANDROID&&this.assetsManager.setMaxConcurrentTask(2))},t.prototype.setManifest=function(e){this.manifest=e},t.prototype.getVersion=function(){return null==this.assetsManager?"":null==this.assetsManager.getLocalManifest()?"":this.assetsManager.getLocalManifest().getVersion()},t.prototype.addCompleteCallback=function(e,t){this.completeCallback.push({target:t,callback:e})},t.prototype.addErrorCallback=function(e,t){this.errorCallback.push({target:e,callback:t})},t.prototype.addStartCallback=function(e,t){this.startCallback.push({target:e,callback:t})},t.prototype.addProgressCallback=function(e,t){this.progressCallback.push({target:e,callback:t})},t.prototype.triggeError=function(e,t){void 0===t&&(t=!1),this.onError(e,t)},t.prototype.onError=function(e,t){void 0===t&&(t=!1),console.log(" this.errorCallback:",this.errorCallback.length,"error:",e);for(var o=0,n=this.errorCallback;o<n.length;o++){var i=n[o];i.callback.apply(i.target,[e,t])}},t.prototype.onComplete=function(e,t){void 0===t&&(t=!1),console.log(" on update complete:",this.getVersion()),console.log("storagePath:",this.getStoragePath()),console.log("search path:",this.getSearchPaths());for(var o=function(o){setTimeout(function(){o.callback.apply(o.target,[e,t])},0)},n=0,i=this.completeCallback;n<i.length;n++){o(i[n])}},t.prototype.getStoragePath=function(){return this.assetsManager?this.assetsManager.getStoragePath():""},t.prototype.getSearchPaths=function(){return window.jsb?jsb.fileUtils.getSearchPaths():""},t.prototype.onStart=function(e,t){void 0===t&&(t=!1),console.log(" this.startCallback:",this.startCallback.length);for(var o=0,n=this.startCallback;o<n.length;o++){var i=n[o];i.callback.apply(i.target,[e,t])}},t.prototype.onProgress=function(e,t){for(var o=0,n=this.progressCallback;o<n.length;o++){var i=n[o];i.callback.apply(i.target,[e,t])}},t.prototype.loadCustomManifest=function(e){if(null!=this.assetsManager&&this.assetsManager.getState()==jsb.AssetsManager.State.UNINITED){var t=new jsb.Manifest(e,this.STORAGE_PATH);this.assetsManager.loadLocalManifest(t,this.STORAGE_PATH)}},t.prototype.checkForUpdate=function(){if(null!=this.assetsManager){if(this.isUpdating)return"Version update is on process...";if(console.log(" start check for update ..."),this.assetsManager.getState()===jsb.AssetsManager.State.UNINITED){var e=this.manifest.nativeUrl;console.log(" native url:",e),cc.loader.md5Pipe&&(e=cc.loader.md5Pipe.transformURL(e)),this.assetsManager.loadLocalManifest(e)}if(!this.assetsManager.getLocalManifest()||!this.assetsManager.getLocalManifest().isLoaded())return this.onError("Failed to load local manifest ..."),"Failed to load local manifest ...";this.assetsManager.setEventCallback(this.checkUpdateCallback.bind(this)),this.assetsManager.checkUpdate(),this.isUpdating=!0}else this.onComplete("no need to update.")},t.prototype.checkUpdateCallback=function(e){switch(console.log("checkUpdateCallback Code: "+e.getEventCode()),e.getEventCode()){case jsb.EventAssetsManager.ERROR_NO_LOCAL_MANIFEST:this.onError("No local manifest file found, hot update skipped.");break;case jsb.EventAssetsManager.ERROR_DOWNLOAD_MANIFEST:case jsb.EventAssetsManager.ERROR_PARSE_MANIFEST:this.onError("Fail to download manifest file, hot update skipped.");break;case jsb.EventAssetsManager.ALREADY_UP_TO_DATE:var t=this.assetsManager.getRemoteManifest()?this.assetsManager.getRemoteManifest().getVersion():" null",o=this.assetsManager.getLocalManifest()?this.assetsManager.getLocalManifest().getVersion():"null";this.onComplete("Already up to date with the latest remote version :"+t+", local version :"+o);break;case jsb.EventAssetsManager.NEW_VERSION_FOUND:this.isUpdating=!1;var n=this.assetsManager.getLocalManifest()?this.assetsManager.getLocalManifest().getVersion():"null",i=this.assetsManager.getRemoteManifest()?this.assetsManager.getRemoteManifest().getVersion():"null";if(console.log("New version found, old:",n,", new: ",i),"null"==n||"null"==i);else{console.log("storage path:",this.assetsManager.getStoragePath());var a=n.split(".")[0];i.split(".")[0]>a?this.onStart("new version found, go to store to download new app.",!0):(this.onStart("new version found, update process start.",!1),this.updateVersion())}break;default:return}},t.prototype.getUpdateDescription=function(){return""},t.prototype.updateVersion=function(){if(null!=this.assetsManager&&!this.isUpdating)if([jsb.AssetsManager.State.UPDATING,jsb.AssetsManager.State.UNZIPPING,jsb.AssetsManager.State.UP_TO_DATE].indexOf(this.assetsManager.getState())>=0)this.onComplete("no need to update: "+this.assetsManager.getState(),!1);else{if(this.assetsManager.getState()===jsb.AssetsManager.State.UNINITED){var e=this.manifest.nativeUrl;cc.loader.md5Pipe&&(e=cc.loader.md5Pipe.transformURL(e)),this.assetsManager.loadLocalManifest(e)}this.assetsManager.setEventCallback(this.updateCallback.bind(this)),console.log(" start update ...:",this.assetsManager.getState()),this.assetsManager.update(),this.isUpdating=!0}},t.prototype.versionToInt=function(e){return parseInt(e.toString().split(".").join(""))},t.prototype.versionToString=function(e){return Math.floor(e/100)+"."+Math.floor(e/10)%10+"."+Math.floor(e)%10},t.prototype.updateCallback=function(e){var t=this,o=!1,n=!1,i=null;switch(console.log("update event code:",e.getEventCode()),e.getEventCode()){case jsb.EventAssetsManager.ERROR_NO_LOCAL_MANIFEST:this.onError("No local manifest file found, hot update skipped."),n=!0;break;case jsb.EventAssetsManager.UPDATE_PROGRESSION:var a=e.getPercent();NaN!=a&&"number"==typeof a||(a=0),this.onProgress(e.getMessage()?"Updated file:"+e.getMessage():"Updating:"+(100*a).toFixed(0)+"%",a);break;case jsb.EventAssetsManager.ERROR_DOWNLOAD_MANIFEST:case jsb.EventAssetsManager.ERROR_PARSE_MANIFEST:this.onError("Fail to download manifest file, hot update skipped."),n=!0;break;case jsb.EventAssetsManager.ALREADY_UP_TO_DATE:i=function(){var e=t.assetsManager.getRemoteManifest()?t.assetsManager.getRemoteManifest().getVersion():" null";t.onComplete("Already up to date with the latest remote version :"+e)},n=!0;break;case jsb.EventAssetsManager.UPDATE_FINISHED:i=function(){var o=t.assetsManager.getRemoteManifest()?t.assetsManager.getRemoteManifest().getVersion():" null";t.onComplete("Update finished. new : "+o+e.getMessage(),!0)},o=!0;break;case jsb.EventAssetsManager.UPDATE_FAILED:this.onError("Update failed. "+e.getMessage(),!0);break;case jsb.EventAssetsManager.ERROR_UPDATING:this.onError("Asset update error: "+e.getAssetId()+", "+e.getMessage());break;case jsb.EventAssetsManager.ERROR_DECOMPRESS:this.onError(e.getMessage())}if(n&&(this.assetsManager.setEventCallback(null),this.isUpdating=!1),o){this.assetsManager.setEventCallback(null);var r=jsb.fileUtils.getSearchPaths();console.log("old searchPaths:",r);var s=this.assetsManager.getLocalManifest().getSearchPaths();console.log("new path:",JSON.stringify(s));for(var l=0,c=s;l<c.length;l++){var u=c[l];r.indexOf(u)<0&&Array.prototype.unshift.apply(r,u)}cc.sys.localStorage.setItem("select-game",JSON.stringify(r)),jsb.fileUtils.setSearchPaths(r),console.log("new searchPaths:",JSON.stringify(r)),console.log(" paths storage:",cc.sys.localStorage.getItem("select-game"))}i&&i()},t.prototype.restart=function(){cc.audioEngine.stopAll(),cc.game.restart()},t.prototype.retry=function(){null!=this.assetsManager&&0==this.isUpdating&&this.assetsManager.downloadFailedAssets()},t.prototype.versionCompareHandle=function(e,t){cc.log("JS Custom Version Compare: version A is "+e+", version B is "+t);for(var o=e.split("."),n=t.split("."),i=0;i<o.length;++i){var a=parseInt(o[i]),r=parseInt(n[i]||"0");if(a!==r)return a-r}return n.length>o.length?-1:0},t.prototype.verifyCallback=function(e,t){var o=t.compressed,n=t.md5,i=t.path;t.size;return o?("Verification passed : "+i,!0):("Verification passed : "+i+" ("+n+")",!0)},t.prototype.destory=function(){this.assetsManager&&this.assetsManager.setEventCallback(null),this.startCallback=[],this.completeCallback=[],this.errorCallback=[],this.progressCallback=[]},t=__decorate([a],t)}(n.SingleTon()));o.default=r,cc._RF.pop()},{"../Utils/ToSingleton":"ToSingleton"}],WildAdAnimation:[function(e,t,o){"use strict";cc._RF.push(t,"a477475bJVCr55eJoQUua8c","WildAdAnimation"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../utils/FrameAniBase"),i=e("../Utils/Signal"),a=cc._decorator,r=a.ccclass,s=(a.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(i.BaseSignal));o.WildAdAnimationIsPlaySignal=s;var l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.isStart=!1,t}return __extends(t,e),t.prototype.onStartPlay=function(){var e=this;s.inst.dispatchOne(!0),0==this.isStart&&(this.isStart=!0,setTimeout(function(){e.isStart=!1,e.stop(),e.node.opacity=0,setTimeout(function(){e.node.opacity=255,e.Loop=!0,e.play()},8e3)},2e3))},t.prototype.onComplete=function(){s.inst.dispatchOne(!1)},t=__decorate([r],t)}(n.default);o.default=l,cc._RF.pop()},{"../Utils/Signal":"Signal","../utils/FrameAniBase":"FrameAniBase"}],WildAdButton:[function(e,t,o){"use strict";cc._RF.push(t,"465d6JCvm9NEa4D+PNSyYjD","WildAdButton"),Object.defineProperty(o,"__esModule",{value:!0});var n,i=e("../GamePlay/View/Game/Npc/XiuXiu"),a=e("../Utils/Signal"),r=e("./FlyCnicornAd"),s=cc._decorator,l=s.ccclass,c=s.property;(function(e){e[e.Kill=0]="Kill",e[e.Open=1]="Open"})(n||(n={}));var u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(a.BaseSignal);o.HideWildAdButtonSignal=u;var d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(a.BaseSignal);o.WildAdButtonClick=d;var p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(a.BaseSignal);o.BoxCountUpdateSignal=p;var h=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(a.BaseSignal);o.WildButtonReadySignal=h;var m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.adType=n.Kill,t}return __extends(t,e),t.prototype.onLoad=function(){var e=this;this.node.active=cc.sys.isMobile&&cc.sys.isBrowser&&cc.sys.os==cc.sys.OS_ANDROID,this.node.scale=0,this.adType==n.Kill?(h.inst.addOnce(function(){console.log(" Wild button :",e.node.active),e.node.active&&e.node.runAction(cc.sequence(cc.scaleTo(.1,1),cc.callFunc(function(){e.node.getComponent(cc.Button).transition=cc.Button.Transition.SPRITE,e.node.on(cc.Node.EventType.TOUCH_END,function(){0!=e.node.getComponent(cc.Button).interactable&&d.inst.dispatch()},e)})))},this),i.XiuXiuBornSignal.inst.addListener(function(){e.node.getComponent(cc.Button).interactable=!0,e.node.getChildByName("Animation").active=!0},this),i.XiuXiuDieSignal.inst.addListener(function(){e.node.getComponent(cc.Button).interactable=!1,e.node.getChildByName("Animation").active=!1},this),u.inst.addListener(function(){i.XiuXiuBornSignal.inst.removeTarget(e),i.XiuXiuDieSignal.inst.removeTarget(e),e.node.active=!1},this)):(r.ShowFlyCnicornSignal.inst.addOnce(function(){console.log(" Wild button :",e.node.active),e.node.active&&e.node.runAction(cc.sequence(cc.scaleTo(.1,1),cc.callFunc(function(){e.node.getComponent(cc.Button).transition=cc.Button.Transition.SPRITE,e.node.on(cc.Node.EventType.TOUCH_END,function(){0!=e.node.getComponent(cc.Button).interactable&&r.FlyCnicornClickSignal.inst.dispatch()},e)})))},this),p.inst.addListenerOne(function(t){e.node.getComponent(cc.Button).interactable=t>0,e.node.getChildByName("Animation").active=e.node.getComponent(cc.Button).interactable},this),r.RemoveFlyCnicornSignal.inst.addListener(function(){p.inst.removeTarget(e),e.node.active=!1},this))},__decorate([c({type:cc.Enum(n)})],t.prototype,"adType",void 0),t=__decorate([l],t)}(cc.Component);o.default=m,cc._RF.pop()},{"../GamePlay/View/Game/Npc/XiuXiu":"XiuXiu","../Utils/Signal":"Signal","./FlyCnicornAd":"FlyCnicornAd"}],WoodBoxIdleAnimation:[function(e,t,o){"use strict";cc._RF.push(t,"6c5aeg7jONM5a2ttdd3sILo","WoodBoxIdleAnimation"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../../Ad/AdLayer"),i=e("../../../Controller/GameStateController"),a=e("../../../Controller/ResourceController"),r=e("../../../Model/PlayModelProxy"),s=e("../../../Utils/FrameAniBase"),l=e("../../../Utils/Signal"),c=e("../../Model/GamePlayModel"),u=e("./GoldBoxIdleAnimation"),d=cc._decorator,p=d.ccclass,h=(d.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(l.BaseSignal));o.OnWoodBoxClickSignal=h;var m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.initPosition=null,t.timeDelay=1,t.completeCount=0,t}return __extends(t,e),t.prototype.onLoad=function(){e.prototype.onLoad.call(this),this.initPosition=this.node.position.clone(),c.AddWoodBoxSignal.inst.addListenerOne(this.onBoxAdded,this)},t.prototype.setStartSprite=function(){this.Sprite.spriteFrame=a.ResourceController.inst.getAltas("bg_woodbox")},t.prototype.onBoxAdded=function(e){var t=this;e.toString()==this.node.parent.name&&(this.setStartSprite(),this.node.active=!0,this.node.opacity=255,this.Interval=.05,this.node.setPosition(this.initPosition.x,this.initPosition.y+200),this.node.runAction(cc.sequence(cc.moveTo(.1,this.initPosition),cc.moveBy(.1,0,20),cc.moveBy(.1,0,-20),cc.callFunc(function(){0==r.PlayModelProxy.inst.IsOnTutorial&&(i.GameStateController.inst.isReady=!0),t.scheduleOnce(function(){t.play(),t.Loop=!0},t.timeDelay),u.default.BoxCount++,n.AdFinishSignal.inst.addOnceOne(function(o){o==n.AdType[n.AdType.Cnicorn]&&t.onOpen(e)},t),t.node.once(cc.Node.EventType.TOUCH_END,function(){t.onOpen(e)},t)}))))},t.prototype.onOpen=function(e){0!=this.node.active&&(this.node.targetOff(this),this.node.active=!1,u.default.BoxCount--,this.unscheduleAllCallbacks(),h.inst.dispatchOne(e))},t.prototype.onKeyFrame=function(e){var t=this;e==this.TotalFrameCount-1&&this.completeCount++>=2&&(this.stop(),this.completeCount=0,this.setStartSprite(),this.scheduleOnce(function(){t.play(),t.Loop=!0},this.timeDelay))},t=__decorate([p],t)}(s.default);o.default=m,cc._RF.pop()},{"../../../Ad/AdLayer":"AdLayer","../../../Controller/GameStateController":"GameStateController","../../../Controller/ResourceController":"ResourceController","../../../Model/PlayModelProxy":"PlayModelProxy","../../../Utils/FrameAniBase":"FrameAniBase","../../../Utils/Signal":"Signal","../../Model/GamePlayModel":"GamePlayModel","./GoldBoxIdleAnimation":"GoldBoxIdleAnimation"}],"WoodBoxOpenAnimation ":[function(e,t,o){"use strict";cc._RF.push(t,"af13cl9rOZB8Z6B+PgHJ2fV","WoodBoxOpenAnimation "),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../../Utils/FrameAniBase"),i=e("../../../Utils/Signal"),a=e("./WoodBoxIdleAnimation"),r=cc._decorator,s=r.ccclass,l=(r.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(i.BaseSignal));o.WoodBoxOpenedSignal=l;var c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onLoad=function(){var t=this;e.prototype.onLoad.call(this),a.OnWoodBoxClickSignal.inst.addListenerOne(function(e){e.toString()==t.node.parent.name&&(t.node.active=!0,t.node.opacity=255,t.Interval=.06,t.play())},this)},t.prototype.onKeyFrame=function(e){2==e&&l.inst.dispatchOne(parseInt(this.node.parent.name))},t.prototype.onComplete=function(){this.node.runAction(cc.fadeOut(.2))},t=__decorate([s],t)}(n.default);o.default=c,cc._RF.pop()},{"../../../Utils/FrameAniBase":"FrameAniBase","../../../Utils/Signal":"Signal","./WoodBoxIdleAnimation":"WoodBoxIdleAnimation"}],XiuXiuHealthView:[function(e,t,o){"use strict";cc._RF.push(t,"77a9eliMuBGJ6Epj/S0Sxvv","XiuXiuHealthView"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../../../Global/GameRule"),i=e("../../../../Model/PlayModelProxy"),a=cc._decorator,r=a.ccclass,s=(a.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),Object.defineProperty(t.prototype,"Progress",{get:function(){return this.node.getChildByName("Progress").getComponent(cc.ProgressBar)},enumerable:!0,configurable:!0}),t.prototype.onLoad=function(){this.Progress.progress=0,i.XiuXiuHealthUpdatedSignal.inst.addListenerOne(this.onXiuXiuLifeChanged,this)},t.prototype.onXiuXiuLifeChanged=function(e){console.log(" xiuxiu life:",e),this.Progress.progress=e/n.XiuXiuHealth},t=__decorate([r],t)}(cc.Component));o.default=s,cc._RF.pop()},{"../../../../Global/GameRule":"GameRule","../../../../Model/PlayModelProxy":"PlayModelProxy"}],XiuXiuLand:[function(e,t,o){"use strict";cc._RF.push(t,"8211bzkCzpCr4ut6A+p95wE","XiuXiuLand"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../../../Command/CommonSignal"),i=e("../../../../Model/PlayModelProxy"),a=e("../../Animation/TiledOpenAnimation"),r=e("./XiuXiu"),s=cc._decorator,l=s.ccclass,c=(s.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onLoad=function(){var e=this;a.OnTiledOpendSignal.inst.addListenerTwo(function(t,o){12!=t||o||e.show()},this),i.OnXiuXiuDieSignal.inst.addListener(function(){e.node.runAction(cc.sequence(cc.scaleTo(.1,0),cc.callFunc(function(){e.node.active=!1})))},this),r.XiuXiuBornSignal.inst.addListener(function(){e.node.active||e.show()},this),n.GameStartSignal.inst.addListener(function(){e.node.active||e.show()},this)},t.prototype.start=function(){this.node.active=!1},t.prototype.show=function(){this.node.scale=0,this.node.active=!0,this.node.runAction(cc.sequence(cc.scaleTo(.1,1.1,.9),cc.scaleTo(.1,.9,1.1),cc.scaleTo(.1,1,1)))},t=__decorate([l],t)}(cc.Component));o.default=c,cc._RF.pop()},{"../../../../Command/CommonSignal":"CommonSignal","../../../../Model/PlayModelProxy":"PlayModelProxy","../../Animation/TiledOpenAnimation":"TiledOpenAnimation","./XiuXiu":"XiuXiu"}],XiuXiuShadow:[function(e,t,o){"use strict";cc._RF.push(t,"6e54doSmTdKIY2C8WO4Qy7Z","XiuXiuShadow"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../../../Model/PlayModelProxy"),i=e("./XiuXiu"),a=cc._decorator,r=a.ccclass,s=(a.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onLoad=function(){var e=this;this.node.active=!1,i.XiuXiuBornSignal.inst.addListener(this.onXiuXiuBorn,this),n.OnXiuXiuDieSignal.inst.addListener(function(){e.node.active=!1},this)},t.prototype.onXiuXiuBorn=function(){this.node.scale=0,this.node.active=!0,this.node.runAction(cc.sequence(cc.scaleTo(.1,.5),cc.scaleTo(.2,1),cc.scaleTo(.15,.8),cc.scaleTo(.1,1)))},t=__decorate([r],t)}(cc.Component));o.default=s,cc._RF.pop()},{"../../../../Model/PlayModelProxy":"PlayModelProxy","./XiuXiu":"XiuXiu"}],XiuXiu:[function(e,t,o){"use strict";cc._RF.push(t,"5132btXbB5NULroVnJnP/6Q","XiuXiu"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../../../Ad/AdLayer"),i=e("../../../../Ad/WildAdButton"),a=e("../../../../Command/CommonSignal"),r=e("../../../../Controller/GameStateController"),s=e("../../../../Global/GameRule"),l=e("../../../../Model/PlayModelProxy"),c=e("../../../../Utils/Random"),u=e("../../../../Utils/Signal"),d=e("../../../Model/GamePlayModel"),p=e("../Diamonds/DiamondProductView"),h=cc._decorator,m=h.ccclass,f=(h.property,"idle"),g="hit",y="die",S="steal",_=[y,g,f,S],C=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(u.BaseSignal);o.XiuXiuBornSignal=C;var v=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(u.BaseSignal);o.OnXiuXiuBornTimeUpdatedSignal=v;var b=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(u.BaseSignal);o.XiuXiuHitSignal=b;var T=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(u.BaseSignal);o.XiuXiuDieSignal=T;var M=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(u.BaseSignal);o.XiuXiuBornInTutorialSignal=M;var P=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(u.BaseSignal);o.XiuXiuStealSignal=P;var D=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.position=null,t.scale=0,t.animationCallback={},t.nextAttackTime=s.XiuXiuStealTime.max,t.nextBornTime=0,t.hasShowButton=!1,t.isBorn=!1,t}return __extends(t,e),Object.defineProperty(t.prototype,"Spine",{get:function(){return this.getComponent(sp.Skeleton)},enumerable:!0,configurable:!0}),t.prototype.onLoad=function(){for(var e=this,t=0;t<_.length;++t)for(var o=t+1;o<_.length;++o)this.Spine.setMix(_[t],_[o],.05);this.position=this.node.position.clone(),this.node.active=!1,this.node.parent.scale=1,this.scale=this.node.scale,p.DiamondProductSignal.inst.addOnce(this.onDiamondProducted,this),d.OnMergeHappendSignal.inst.addListenerOne(this.onMergeHappend,this),l.OnXiuXiuDieSignal.inst.addListener(this.onDie,this),this.Spine.setEventListener(this.eventListener.bind(this)),this.Spine.setCompleteListener(this.onAnimationDone.bind(this)),M.inst.addOnceOne(this.born,this),a.GameStartSignal.inst.addListener(function(){e.nextBornTime=0,e.isBorn=!1},this),n.AdFinishSignal.inst.addListenerOne(function(e){e==n.AdType[n.AdType.Sun]&&(l.PlayModelProxy.inst.XiuXiuHealth=0)},this)},t.prototype.onDiamondProducted=function(){this.isBorn||(0==this.hasShowButton&&i.WildButtonReadySignal.inst.dispatch(),this.hasShowButton=!0,this.born())},t.prototype.onMergeHappend=function(e){var t=this;s.AttackTileds.indexOf(e)>=0&&l.PlayModelProxy.inst.XiuXiuHealth>0&&(this.newAttackTime(),this.playAnimation(g,!1,function(){t.idle()}),b.inst.dispatchOne(e),l.PlayModelProxy.inst.XiuXiuHealth--)},t.prototype.onDie=function(){var e=this;T.inst.dispatch(),this.nextAttackTime=0,l.PlayModelProxy.inst.addPlayerScore(s.XiuXiuDieScore,d.ScoreType.Normal,1,this.node),this.isBorn=!1,this.playAnimation(y,!1,function(){e.nextBornTime=s.XiuXiuBornDelay,v.inst.dispatchOne(e.nextBornTime),console.log(" xiuxiu next born time:",e.nextBornTime)})},t.prototype.newAttackTime=function(){this.nextAttackTime=c.Random.getRandom(s.XiuXiuStealTime.min,s.XiuXiuStealTime.max)},t.prototype.attack=function(){var e=this;l.PlayModelProxy.inst.XiuXiuHealth<=0||0==this.isBorn||(this.newAttackTime(),this.playAnimation(S,!1,function(){e.idle()}),setTimeout(function(){l.PlayModelProxy.inst.xiuxiuSteal(-s.XiuXiuCost,e.node)},500),P.inst.dispatch())},t.prototype.idle=function(){l.PlayModelProxy.inst.XiuXiuHealth<=0||this.playAnimation(f,!1)},t.prototype.born=function(e){var t=this;void 0===e&&(e=-1),l.PlayModelProxy.inst.XiuXiuHealth=e>0?e:s.XiuXiuHealth,this.node.setPosition(this.position.add(cc.v2(0,250))),this.node.scale=0,this.node.active=!0,this.isBorn=!0,this.newAttackTime(),this.playAnimation(f,!1),this.node.runAction(cc.sequence(cc.scaleTo(.1,this.scale),cc.moveTo(.2,this.position),cc.moveBy(.15,0,60),cc.moveBy(.1,0,-60),cc.callFunc(function(){t.newAttackTime()}))),C.inst.dispatch()},t.prototype.playAnimation=function(e,t,o){void 0===o&&(o=function(){}),this.Spine.animation=e,this.Spine.loop=t,this.animationCallback[e]=o},t.prototype.eventListener=function(){},t.prototype.onAnimationDone=function(e){e.animation.name==f&&this.Spine.animation==f&&this.playAnimation(f,!1),this.animationCallback[e.animation.name]&&(this.animationCallback[e.animation.name](),this.animationCallback[e.animation.name]=null)},t.prototype.update=function(e){r.GameStateController.inst.isPause()||0==r.GameStateController.inst.isRoundStart()||(l.PlayModelProxy.inst.XiuXiuHealth<=0&&this.nextBornTime>0?(this.nextBornTime-=e,this.nextBornTime<=0&&this.born()):(this.nextAttackTime-=e,this.nextAttackTime<=0&&this.attack()))},t=__decorate([m],t)}(cc.Component);o.default=D,cc._RF.pop()},{"../../../../Ad/AdLayer":"AdLayer","../../../../Ad/WildAdButton":"WildAdButton","../../../../Command/CommonSignal":"CommonSignal","../../../../Controller/GameStateController":"GameStateController","../../../../Global/GameRule":"GameRule","../../../../Model/PlayModelProxy":"PlayModelProxy","../../../../Utils/Random":"Random","../../../../Utils/Signal":"Signal","../../../Model/GamePlayModel":"GamePlayModel","../Diamonds/DiamondProductView":"DiamondProductView"}],table:[function(e,t,o){"use strict";cc._RF.push(t,"eb644QuXQtJUKm5R+IjFm1I","table"),Object.defineProperty(o,"__esModule",{value:!0}),function(e){e[e.BangZhuYeMian1=1]="BangZhuYeMian1",e[e.BangZhuYeMian2=2]="BangZhuYeMian2",e[e.BangZhuYeMian3=3]="BangZhuYeMian3",e[e.BangZhuYeMian4=4]="BangZhuYeMian4",e[e.YinDao1=5]="YinDao1",e[e.YinDao2=6]="YinDao2",e[e.YinDao3=7]="YinDao3",e[e.YinDao4=8]="YinDao4",e[e.YinDao5=9]="YinDao5",e[e.YinDao6=10]="YinDao6",e[e.YinDao7=11]="YinDao7",e[e.YinDao8=12]="YinDao8",e[e.MianFeiZanTing=13]="MianFeiZanTing",e[e.ZanTingKouFen=14]="ZanTingKouFen",e[e.KaiQiXiangZi=15]="KaiQiXiangZi",e[e.ShaSiXiuXiu=16]="ShaSiXiuXiu",e[e.ZongDeFen=17]="ZongDeFen",e[e.KanGuangGaoShiBai=18]="KanGuangGaoShiBai"}(o.En_ID||(o.En_ID={})),function(e){e[e.ZanTingJieMian=1]="ZanTingJieMian",e[e.BangZhuJieMian=2]="BangZhuJieMian",e[e.XinShouYinDao=3]="XinShouYinDao",e[e.GuangGaoJieMian=4]="GuangGaoJieMian",e[e.JieSuanJieMian=5]="JieSuanJieMian"}(o.En_View||(o.En_View={})),function(e){e[e.Zuo=0]="Zuo",e[e.JuZhong=1]="JuZhong",e[e.You=2]="You"}(o.En_Horizontal||(o.En_Horizontal={})),function(e){e[e.Shang=0]="Shang",e[e.JuZhong=1]="JuZhong",e[e.Xia=2]="Xia"}(o.En_Vertical||(o.En_Vertical={})),function(e){e[e.BangZhuYeMian1=1]="BangZhuYeMian1",e[e.BangZhuYeMian2=2]="BangZhuYeMian2",e[e.BangZhuYeMian3=3]="BangZhuYeMian3",e[e.BangZhuYeMian4=4]="BangZhuYeMian4",e[e.YinDao1=5]="YinDao1",e[e.YinDao2=6]="YinDao2",e[e.YinDao3=7]="YinDao3",e[e.YinDao4=8]="YinDao4",e[e.YinDao5=9]="YinDao5",e[e.YinDao6=10]="YinDao6",e[e.YinDao7=11]="YinDao7",e[e.YinDao8=12]="YinDao8",e[e.MianFeiZanTing=13]="MianFeiZanTing",e[e.ZanTingKouFen=14]="ZanTingKouFen",e[e.KaiQiXiangZi=15]="KaiQiXiangZi",e[e.ShaSiXiuXiu=16]="ShaSiXiuXiu",e[e.ZongDeFen=17]="ZongDeFen",e[e.KanGuangGaoShiBai=18]="KanGuangGaoShiBai"}(o.Es_ID||(o.Es_ID={})),function(e){e[e.ZanTingJieMian=1]="ZanTingJieMian",e[e.BangZhuJieMian=2]="BangZhuJieMian",e[e.XinShouYinDao=3]="XinShouYinDao",e[e.GuangGaoJieMian=4]="GuangGaoJieMian",e[e.JieSuanJieMian=5]="JieSuanJieMian"}(o.Es_View||(o.Es_View={})),function(e){e[e.Zuo=0]="Zuo",e[e.JuZhong=1]="JuZhong",e[e.You=2]="You"}(o.Es_Horizontal||(o.Es_Horizontal={})),function(e){e[e.Shang=0]="Shang",e[e.JuZhong=1]="JuZhong",e[e.Xia=2]="Xia"}(o.Es_Vertical||(o.Es_Vertical={})),function(e){e[e.BangZhuYeMian1=1]="BangZhuYeMian1",e[e.BangZhuYeMian2=2]="BangZhuYeMian2",e[e.BangZhuYeMian3=3]="BangZhuYeMian3",e[e.BangZhuYeMian4=4]="BangZhuYeMian4",e[e.YinDao1=5]="YinDao1",e[e.YinDao2=6]="YinDao2",e[e.YinDao3=7]="YinDao3",e[e.YinDao4=8]="YinDao4",e[e.YinDao5=9]="YinDao5",e[e.YinDao6=10]="YinDao6",e[e.YinDao7=11]="YinDao7",e[e.YinDao8=12]="YinDao8",e[e.MianFeiZanTing=13]="MianFeiZanTing",e[e.ZanTingKouFen=14]="ZanTingKouFen",e[e.KaiQiXiangZi=15]="KaiQiXiangZi",e[e.ShaSiXiuXiu=16]="ShaSiXiuXiu",e[e.ZongDeFen=17]="ZongDeFen",e[e.KanGuangGaoShiBai=18]="KanGuangGaoShiBai"}(o.Fil_ID||(o.Fil_ID={})),function(e){e[e.ZanTingJieMian=1]="ZanTingJieMian",e[e.BangZhuJieMian=2]="BangZhuJieMian",e[e.XinShouYinDao=3]="XinShouYinDao",e[e.GuangGaoJieMian=4]="GuangGaoJieMian",e[e.JieSuanJieMian=5]="JieSuanJieMian"}(o.Fil_View||(o.Fil_View={})),function(e){e[e.Zuo=0]="Zuo",e[e.JuZhong=1]="JuZhong",e[e.You=2]="You"}(o.Fil_Horizontal||(o.Fil_Horizontal={})),function(e){e[e.Shang=0]="Shang",e[e.JuZhong=1]="JuZhong",e[e.Xia=2]="Xia"}(o.Fil_Vertical||(o.Fil_Vertical={})),function(e){e[e.BangZhuYeMian1=1]="BangZhuYeMian1",e[e.BangZhuYeMian2=2]="BangZhuYeMian2",e[e.BangZhuYeMian3=3]="BangZhuYeMian3",e[e.BangZhuYeMian4=4]="BangZhuYeMian4",e[e.YinDao1=5]="YinDao1",e[e.YinDao2=6]="YinDao2",e[e.YinDao3=7]="YinDao3",e[e.YinDao4=8]="YinDao4",e[e.YinDao5=9]="YinDao5",e[e.YinDao6=10]="YinDao6",e[e.YinDao7=11]="YinDao7",e[e.YinDao8=12]="YinDao8",e[e.MianFeiZanTing=13]="MianFeiZanTing",e[e.ZanTingKouFen=14]="ZanTingKouFen",e[e.KaiQiXiangZi=15]="KaiQiXiangZi",e[e.ShaSiXiuXiu=16]="ShaSiXiuXiu",e[e.ZongDeFen=17]="ZongDeFen",e[e.KanGuangGaoShiBai=18]="KanGuangGaoShiBai"}(o.Id_ID||(o.Id_ID={})),function(e){e[e.ZanTingJieMian=1]="ZanTingJieMian",e[e.BangZhuJieMian=2]="BangZhuJieMian",e[e.XinShouYinDao=3]="XinShouYinDao",e[e.GuangGaoJieMian=4]="GuangGaoJieMian",e[e.JieSuanJieMian=5]="JieSuanJieMian"}(o.Id_View||(o.Id_View={})),function(e){e[e.Zuo=0]="Zuo",e[e.JuZhong=1]="JuZhong",e[e.You=2]="You"}(o.Id_Horizontal||(o.Id_Horizontal={})),function(e){e[e.Shang=0]="Shang",e[e.JuZhong=1]="JuZhong",e[e.Xia=2]="Xia"}(o.Id_Vertical||(o.Id_Vertical={})),function(e){e[e.BangZhuYeMian1=1]="BangZhuYeMian1",e[e.BangZhuYeMian2=2]="BangZhuYeMian2",e[e.BangZhuYeMian3=3]="BangZhuYeMian3",e[e.BangZhuYeMian4=4]="BangZhuYeMian4",e[e.YinDao1=5]="YinDao1",e[e.YinDao2=6]="YinDao2",e[e.YinDao3=7]="YinDao3",e[e.YinDao4=8]="YinDao4",e[e.YinDao5=9]="YinDao5",e[e.YinDao6=10]="YinDao6",e[e.YinDao7=11]="YinDao7",e[e.YinDao8=12]="YinDao8",e[e.MianFeiZanTing=13]="MianFeiZanTing",e[e.ZanTingKouFen=14]="ZanTingKouFen",e[e.KaiQiXiangZi=15]="KaiQiXiangZi",e[e.ShaSiXiuXiu=16]="ShaSiXiuXiu",e[e.ZongDeFen=17]="ZongDeFen",e[e.KanGuangGaoShiBai=18]="KanGuangGaoShiBai"}(o.In_ID||(o.In_ID={})),function(e){e[e.ZanTingJieMian=1]="ZanTingJieMian",e[e.BangZhuJieMian=2]="BangZhuJieMian",e[e.XinShouYinDao=3]="XinShouYinDao",e[e.GuangGaoJieMian=4]="GuangGaoJieMian",e[e.JieSuanJieMian=5]="JieSuanJieMian"}(o.In_View||(o.In_View={})),function(e){e[e.Zuo=0]="Zuo",e[e.JuZhong=1]="JuZhong",e[e.You=2]="You"}(o.In_Horizontal||(o.In_Horizontal={})),function(e){e[e.Shang=0]="Shang",e[e.JuZhong=1]="JuZhong",e[e.Xia=2]="Xia"}(o.In_Vertical||(o.In_Vertical={})),function(e){e[e.BangZhuYeMian1=1]="BangZhuYeMian1",e[e.BangZhuYeMian2=2]="BangZhuYeMian2",e[e.BangZhuYeMian3=3]="BangZhuYeMian3",e[e.BangZhuYeMian4=4]="BangZhuYeMian4",e[e.YinDao1=5]="YinDao1",e[e.YinDao2=6]="YinDao2",e[e.YinDao3=7]="YinDao3",e[e.YinDao4=8]="YinDao4",e[e.YinDao5=9]="YinDao5",e[e.YinDao6=10]="YinDao6",e[e.YinDao7=11]="YinDao7",e[e.YinDao8=12]="YinDao8",e[e.MianFeiZanTing=13]="MianFeiZanTing",e[e.ZanTingKouFen=14]="ZanTingKouFen",e[e.KaiQiXiangZi=15]="KaiQiXiangZi",e[e.ShaSiXiuXiu=16]="ShaSiXiuXiu",e[e.ZongDeFen=17]="ZongDeFen",e[e.KanGuangGaoShiBai=18]="KanGuangGaoShiBai"}(o.Pt_ID||(o.Pt_ID={})),function(e){e[e.ZanTingJieMian=1]="ZanTingJieMian",e[e.BangZhuJieMian=2]="BangZhuJieMian",e[e.XinShouYinDao=3]="XinShouYinDao",e[e.GuangGaoJieMian=4]="GuangGaoJieMian",e[e.JieSuanJieMian=5]="JieSuanJieMian"}(o.Pt_View||(o.Pt_View={})),function(e){e[e.Zuo=0]="Zuo",e[e.JuZhong=1]="JuZhong",e[e.You=2]="You"}(o.Pt_Horizontal||(o.Pt_Horizontal={})),function(e){e[e.Shang=0]="Shang",e[e.JuZhong=1]="JuZhong",e[e.Xia=2]="Xia"}(o.Pt_Vertical||(o.Pt_Vertical={})),function(e){e[e.BangZhuYeMian1=1]="BangZhuYeMian1",e[e.BangZhuYeMian2=2]="BangZhuYeMian2",e[e.BangZhuYeMian3=3]="BangZhuYeMian3",e[e.BangZhuYeMian4=4]="BangZhuYeMian4",e[e.YinDao1=5]="YinDao1",e[e.YinDao2=6]="YinDao2",e[e.YinDao3=7]="YinDao3",e[e.YinDao4=8]="YinDao4",e[e.YinDao5=9]="YinDao5",e[e.YinDao6=10]="YinDao6",e[e.YinDao7=11]="YinDao7",e[e.YinDao8=12]="YinDao8",e[e.MianFeiZanTing=13]="MianFeiZanTing",e[e.ZanTingKouFen=14]="ZanTingKouFen",e[e.KaiQiXiangZi=15]="KaiQiXiangZi",e[e.ShaSiXiuXiu=16]="ShaSiXiuXiu",e[e.ZongDeFen=17]="ZongDeFen",e[e.KanGuangGaoShiBai=18]="KanGuangGaoShiBai"}(o.Tl_ID||(o.Tl_ID={})),function(e){e[e.ZanTingJieMian=1]="ZanTingJieMian",e[e.BangZhuJieMian=2]="BangZhuJieMian",e[e.XinShouYinDao=3]="XinShouYinDao",e[e.GuangGaoJieMian=4]="GuangGaoJieMian",e[e.JieSuanJieMian=5]="JieSuanJieMian"}(o.Tl_View||(o.Tl_View={})),function(e){e[e.Zuo=0]="Zuo",e[e.JuZhong=1]="JuZhong",e[e.You=2]="You"}(o.Tl_Horizontal||(o.Tl_Horizontal={})),function(e){e[e.Shang=0]="Shang",e[e.JuZhong=1]="JuZhong",e[e.Xia=2]="Xia"}(o.Tl_Vertical||(o.Tl_Vertical={})),cc._RF.pop()},{}]},{},["AdLayer","FlyCnicornAd","WildAdButton","FlyAdCnicornAniamtion","WildAdAnimation","App","CommonSignal","AdController","GameStateController","ResourceController","GameFactory","GamePlaySignal","DiamondModel","GamePlayModel","TiledModel","AttackAnimation","CompleteFireAnimation","DoubleScoreAnimation","GoldBoxIdleAnimation","GoldBoxOpenAnimation","HandShake","Merge7Aniamtion","MergeAnimation","TargetGetAnimation","TiledOpenAnimation","WoodBoxIdleAnimation","WoodBoxOpenAnimation ","BoxLabelView","BoxRoot","BoxView","DiamondsRootView","DiamondBaseView","DiamondLevelView","DiamondPosMediator","DiamondPosView","DiamondProductView","XiuXiu","XiuXiuHealthView","XiuXiuLand","XiuXiuShadow","TiledView","DiamondTouchView","BlackView","CompleteView","Diamond7CountView","Diamond7ScoreView","DoubleScoreTimeView","DoubleScoreView","HelpButtonView","HelpLabelView","ResultLayerView","ScoreLabelView","SoundButtonView","SubmitButtonView","SubmitLayerView","TimeLabelView","TotalTargetView","ToturialBoxView","TutorialLayer","GameRule","Level","Theme","InititalCommand","LoadAudioCommand","LoadJsonCommand","LoadPrefabCommand","StartGameCommand","InitialFacade","LoadingPageMediator","LoadingView","ThemeView","AudioManager","StepManager","PlayModelProxy","TableManager","UpdateController","CelerSDK","Cocos","FrameAniBase","HashMap","LogHandler","Random","Signal","Time","ToSingleton","BaseMediator","BaseView","GlobalSingleTouchMediator","GlobalSingleTouchView","HelpLayerMediator","HelpLayerView","NumberChangedView","SingleTouchMediator","SingleTouchView","SliderView","Test","FrontView","TimeEffectAnimation","EaseBaseView","PositionView","RotationView","ScaleView","SkewView","table"]);