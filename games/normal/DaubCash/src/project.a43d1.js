window.__require=function e(t,o,n){function i(a,l){if(!o[a]){if(!t[a]){var s=a.split("/");if(s=s[s.length-1],!t[s]){var c="function"==typeof __require&&__require;if(!l&&c)return c(s,!0);if(r)return r(s,!0);throw new Error("Cannot find module '"+a+"'")}}var u=o[a]={exports:{}};t[a][0].call(u.exports,function(e){return i(t[a][1][e]||e)},u,u.exports,e,t,o,n)}return o[a].exports}for(var r="function"==typeof __require&&__require,a=0;a<n.length;a++)i(n[a]);return i}({AudioController:[function(e,t,o){"use strict";cc._RF.push(t,"9e9e7nIyP5BGquwjN7hFiaR","AudioController"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../Utils/HashMap"),i=e("./EventManager"),r=e("./EventName");window.oncanplay&&(window.oncanplay=function(){l.canPlay=!0});var a="sounds/",l=function(){function e(){this.audioID={},this.clips=new n.HashMap}return Object.defineProperty(e,"inst",{get:function(){return this.ins?this.ins:this.ins=new e},enumerable:!0,configurable:!0}),e.prototype.init=function(e){var t=this;console.warn(" start load AudioClip ");var o=this;cc.loader.loadRes(a+"bgm",cc.AudioClip,function(t,n){t?console.error(t):(o.clips.add(n.name,n),o.initEvent(),e&&e())}),cc.loader.loadRes(a+"mouse_bgm",function(e,t){e?console.error(e):o.clips.add(t.name,t)}),cc.loader.loadRes(a+"bgm_30",function(e,t){e?console.error(e):o.clips.add(t.name,t)}),cc.loader.loadResDir(a,function(e,o,n){if(e)console.error(e);else for(var i=0,r=o;i<r.length;i++){var a=r[i];t.clips.has(a.name)||t.clips.add(a.name,a)}})},e.prototype.initEvent=function(){var e=this;i.gEventMgr.targetOff(this),this.playMusic("bgm"),i.gEventMgr.on(r.GlobalEvent.CHANGE_BGM,function(t){e.playMusic(t)},this),i.gEventMgr.on(r.GlobalEvent.PLAY_EFFECT,function(t,o,n){e.playEffect(t,o,n)},this)},e.prototype.playEffect=function(t,o,n){var i=this;if(void 0===o&&(o=!1),e.canPlay){if(!(cc.audioEngine.getEffectsVolume()<=.05)){var r=this.clips.get(t);r?(this.audioID[t]=cc.audioEngine.playEffect(r,o),cc.audioEngine.setFinishCallback(this.audioID[t],function(){n&&n()})):cc.loader.loadRes(a+t,cc.AudioClip,function(e,r){e?console.error(e):(i.clips.add(r.name,r),i.audioID[t]=cc.audioEngine.playEffect(r,o),cc.audioEngine.setFinishCallback(i.audioID[t],function(){n&&n()}))})}}else this.bindTouch()},e.prototype.playMusic=function(t,o){var n=this;if(void 0===o&&(o=!0),!e.canPlay)return this.bindTouch(),void e.PlayedList.push({loop:!0,volume:1,clipName:t,supTime:Date.now(),skip:!1,isBgm:!0});var i=this.clips.get(t);i?cc.audioEngine.playMusic(i,o):cc.loader.loadRes(a+t,cc.AudioClip,function(e,t){e?console.error(e):("string"==typeof t._audio&&cc.loader._cache&&cc.loader._cache[t._audio]&&cc.loader._cache[t._audio].buffer&&(t._audio=cc.loader._cache[t._audio].buffer),n.clips.add(t.name,t),cc.audioEngine.playMusic(t,o))})},e.prototype.bindTouch=function(){if(!e.hasBindTouch){var t=this,o=function(){var n;for(cc.game.canvas.removeEventListener("touchstart",o),e.canPlay=!0;(n=e.PlayedList.pop())&&t.clips.get(n.clipName)&&!n.skip;)cc.audioEngine.playMusic(t.clips.get(n.clipName),n.loop)};e.hasBindTouch=!0,cc.game.canvas.addEventListener("touchstart",o)}},e.PlayedList=[],e.canPlay=!1,e.hasBindTouch=!1,e}();o.gAudio=l.inst,cc._RF.pop()},{"../Utils/HashMap":"HashMap","./EventManager":"EventManager","./EventName":"EventName"}],ButterFlySpring:[function(e,t,o){"use strict";cc._RF.push(t,"97a5dckn1RG8bbfjmAJlgQq","ButterFlySpring"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("./ShaderManager"),i=cc._decorator,r=i.ccclass,a=(i.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.material=new n.ButterflySpringMaterial,t.time=0,t}return __extends(t,e),t.prototype.onLoad=function(){var e=this.getComponent(cc.Sprite);e&&(e._spriteMaterial=this.material,e._activateMaterial())},t.prototype.start=function(){},t.prototype.update=function(e){this.time+=10*e},t=__decorate([r],t)}(cc.Component));o.default=a,cc._RF.pop()},{"./ShaderManager":"ShaderManager"}],Card:[function(e,t,o){"use strict";cc._RF.push(t,"abb83Mso7xFbKdwnWlntVp4","Card"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("./Controller/EventManager"),i=e("./Const"),r=e("./Controller/Game"),a=e("./Point"),l=e("./Controller/EventName"),s=cc._decorator,c=s.ccclass,u=(s.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.bingoTimes=0,t.nextTurnTime=0,t.mouseHideTime=0,t}return __extends(t,e),Object.defineProperty(t.prototype,"Wrong",{get:function(){return this.node.getChildByName("Wrong")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Word",{get:function(){return this.word},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Index",{get:function(){return this.index},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"BingoTimesLabel",{get:function(){return this.node.getChildByName("BingoTimes").getComponent(cc.Label)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Pos",{get:function(){return i.CardWord[this.word]+"."+this.index},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"StringValue",{get:function(){return this.word+"."+this.value},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Star",{get:function(){return this.node.getChildByName("Star")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"NumberLabel",{get:function(){return this.node.getChildByName("Number").getComponent(cc.Label)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Bingo",{get:function(){return this.node.getChildByName("Bingo").getChildByName(i.Theme[r.Game.Theme])},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Mouse",{get:function(){return this.node.getChildByName("Mouse")},enumerable:!0,configurable:!0}),t.prototype.setPageIndex=function(e){this.pageIndex=e},t.prototype.reuse=function(){this.setPageIndex(arguments[0][3]),this.setValue(arguments[0][2]),this.setIndex(arguments[0][1]),this.setWord(arguments[0][0]),this.bingoTimes=0,this.Wrong.active=!1,this.Mouse.active=!1;for(var e=0,t=this.Bingo.children;e<t.length;e++){(a=t[e]).active=!1}for(var o=0,n=this.Bingo.getParent().children;o<n.length;o++){var a;(a=n[o]).active=a.name==i.Theme[r.Game.Theme]}this.Star.active=!1,this.Bingo.getChildByName(this.bingoTimes.toString()).active=i.StarCard.indexOf(this.Pos)>=0,i.StarCard.indexOf(this.Pos)>=0&&(r.Game.delCurrentCardValue(this.pageIndex,this.value),r.Game.addHighLightCard(this.pageIndex)),this.initEvent(),console.log(" pos:",i.CardWord[this.word]+"."+this.index)},t.prototype.unuse=function(){n.gEventMgr.targetOff(this),this.node.targetOff(this)},t.prototype.initEvent=function(){this.node.on(cc.Node.EventType.TOUCH_START,this.onCardTouch,this),n.gEventMgr.on(l.GlobalEvent.CHANGE_GAME_MODE,this.onGameModeChange,this)},t.prototype.update=function(e){r.Game.getCurMode()==i.SkillType.Super&&this.nextTurnTime>0&&this.mouseHideTime>0&&r.Game.superHighLightCount<i.SuperTime.HighLightLimit&&(this.isLight()||(Date.now()>=this.nextTurnTime&&(this.Mouse.active=!0),Date.now()>=this.mouseHideTime&&(this.Mouse.active=!1,this.nextTurnTime=Date.now()+1e3*CMath.getRandom(i.SuperTime.RandomMin,i.SuperTime.RandomMax),this.mouseHideTime=this.nextTurnTime+1e3*CMath.getRandom(i.SuperTime.ShowTimeMin,i.SuperTime.ShowTimeMax))))},t.prototype.onGameModeChange=function(){r.Game.getCurMode()!=i.SkillType.Super?(this.Mouse.active=!1,this.nextTurnTime=0):(this.nextTurnTime=Date.now()+1e3*CMath.getRandom(i.SuperTime.RandomMin,i.SuperTime.RandomMax),this.mouseHideTime=this.nextTurnTime+1e3*CMath.getRandom(i.SuperTime.ShowTimeMin,i.SuperTime.ShowTimeMax))},t.prototype.isLight=function(){for(var e=0,t=this.Bingo.children;e<t.length;e++){if(t[e].active)return!0}return this.Star.active},t.prototype.isMouse=function(){return this.Mouse.active},t.prototype.onCardTouch=function(e){if(this.isLight())console.log(" card has already high light:",this.value);else if(r.Game.isOver)console.log(" game is over :",this.value);else if(r.Game.getCurMode()==i.SkillType.Super&&r.Game.superHighLightCount>=i.SuperTime.HighLightLimit)console.log(" in Super mode , highLight has 5 counts limit:",this.value);else{var t=0,o=i.ScoreType.Oops;if(r.Game.getCurMode()==i.SkillType.Normal){var s=r.Game.CurrentReward.children[0];if(s&&s.getComponent(a.default))if((h=s.getComponent(a.default)).TimeLeftPercent>0&&h.StringValue==this.StringValue){var c=1-h.TimeLeftPercent;c<=i.TimeScorePercent.Perfect?(t=i.Score.Normal+i.Score.Perfect,o=i.ScoreType.Perfect):c<=i.TimeScorePercent.Great?(t=i.Score.Normal+i.Score.Great*(i.TimeScorePercent.Great-c)/(i.TimeScorePercent.Great-i.TimeScorePercent.Perfect),o=i.ScoreType.Great):(t=i.Score.Normal+i.Score.Nice*(1-c)/i.TimeScorePercent.Great,o=i.ScoreType.Nice)}else h.addTime(-h.TotalTime/5),t=i.Score.Oops,o=i.ScoreType.Oops;for(var u=0,p=r.Game.RewardArray.children;u<p.length;u++){var h;(h=p[u].getComponent(a.default))&&h.StringValue==this.StringValue&&(t=i.Score.Normal,o=i.ScoreType.Normal)}t=Math.ceil(t)}else r.Game.getCurMode()==i.SkillType.Star?(t=i.Score.Normal+i.Score.Star,o=i.ScoreType.Star):r.Game.getCurMode()==i.SkillType.Gold?this.value==r.Game.goldSelectValue&&(t=i.Score.Normal+i.Score.Gold,o=i.ScoreType.Gold):r.Game.getCurMode()==i.SkillType.Super&&(this.isMouse()?(t=i.Score.Normal+i.Score.Mouse,o=i.ScoreType.Mouse,r.Game.superHighLightCount++,n.gEventMgr.emit(l.GlobalEvent.UPDATE_MOUSE_LIGHT)):(r.Game.superWrongCount++,r.Game.superWrongCount>i.SuperTime.WrongLimit&&(t=i.SuperTime.SubScore,o=i.ScoreType.Oops)));switch(t>0?(this.turnStar(),r.Game.addScore(o,t,1),n.gEventMgr.emit(l.GlobalEvent.CHECK_BINGO,this,i.RectCard.indexOf(this.Pos)>=0)):(r.Game.addScore(o,t,1),this.showWrong()),r.Game.getCurMode()){case i.SkillType.Star:n.gEventMgr.emit(l.GlobalEvent.SKILL_DONE);break;case i.SkillType.Gold:var d=(r.Game.cardIndex+1)%r.Game.getCardNumber(),g=r.Game.getCurrentPageValues(d);(r.Game.checkIsFull(d)||g.indexOf(r.Game.goldSelectValue)<0)&&n.gEventMgr.emit(l.GlobalEvent.SKILL_DONE);break;case i.SkillType.Super:(r.Game.checkIsFull(r.Game.cardIndex)||r.Game.superHighLightCount>=i.SuperTime.HighLightLimit)&&n.gEventMgr.emit(l.GlobalEvent.SUPER_END_COMPLETE)}}},t.prototype.showWrong=function(){var e=this;this.Wrong.active||this.Wrong.getNumberOfRunningActions()>0||(this.Wrong.opacity=0,this.Wrong.active=!0,this.Wrong.runAction(cc.sequence(cc.fadeIn(.1),cc.delayTime(.05),cc.fadeOut(.05),cc.callFunc(function(){e.Wrong.active=!1}))))},t.prototype.turnStar=function(){this.Star.active=!0,this.Mouse.stopAllActions(),this.Mouse.active=!1,r.Game.addHighLightCard(this.pageIndex),r.Game.delCurrentCardValue(this.pageIndex,this.value)},t.prototype.setValue=function(e){this.value=e,this.NumberLabel.string=this.value.toString()},t.prototype.setIndex=function(e){this.index=e},t.prototype.setWord=function(e){this.word=e},t.prototype.isBingo=function(){return this.bingoTimes>=1},t.prototype.bingo=function(){if(!this.isLight())return console.log(" this card can not bingo:",this.Pos),0;this.bingoTimes++;for(var e=0,t=this.Bingo.children;e<t.length;e++){var o=t[e];o.active=parseInt(o.name)<=this.bingoTimes}this.NumberLabel.node.active=!1;var n=0;this.bingoTimes>=2&&(r.Game.addOverBingoTimes(this.pageIndex),n=r.Game.getTotalBingoTimes()*i.Score.BingoStep);return n},t.prototype.start=function(){},t=__decorate([c],t)}(cc.Component));o.default=u,cc._RF.pop()},{"./Const":"Const","./Controller/EventManager":"EventManager","./Controller/EventName":"EventName","./Controller/Game":"Game","./Point":"Point"}],CelerSDK:[function(e,t,o){"use strict";cc._RF.push(t,"ed9c4kHhRZCyKBWDxdeArVs","CelerSDK"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("./Game"),i=e("./LogHandler"),r=e("../Utils/celerx"),a=function(){function e(){this.alreadySubmit=!1,this.isNewPlayer=!0,this.celerStartCallback=null,this.isInCeler=CELER_X,i.LogHandler.inst.initLog(r.log)}return Object.defineProperty(e,"inst",{get:function(){return this.ins?this.ins:this.ins=new e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"MatchID",{get:function(){return this.match.matchId},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"MatchRandomSeed",{get:function(){return this.match.sharedRandomSeed},enumerable:!0,configurable:!0}),e.prototype.init=function(e){this.alreadySubmit=!1,r.onStart(this.onCelerStart.bind(this)),r.provideScore(function(){return parseInt(n.Game.getScore().toString())}),this.celerStartCallback=e,i.LogHandler.inst.initLog(r.log),i.LogHandler.inst.log(" game scene on load")},e.prototype.celerXReady=function(){i.LogHandler.inst.log(" invoke celerx.ready() "),r.ready(),CELER_X||this.onCelerStart()},e.prototype.isNew=function(){return this.isNewPlayer},e.prototype.isOnCelerPlatform=function(){return this.isInCeler},e.prototype.onCelerStart=function(){this.match=r.getMatch()||{},i.LogHandler.inst.log(" celerx onStart call","match id:",this.match.matchId,", seed:",this.match.sharedRandomSeed),this.match&&this.match.sharedRandomSeed?(CMath.randomSeed=this.match.sharedRandomSeed,CMath.sharedSeed=this.match.sharedRandomSeed,this.isInCeler=!0):(this.isInCeler=!1,CMath.randomSeed=Math.random()),this.match&&this.match.shouldLaunchTutorial?this.isNewPlayer=!0:this.isNewPlayer=!1,this.celerStartCallback&&(this.celerStartCallback(),this.celerStartCallback=null)},e.prototype.submitScore=function(e){this.alreadySubmit||(this.alreadySubmit=!0,i.LogHandler.inst.log(" submit score:",e,", match id:",this.match.matchId),r.submitScore(e))},e}();o.CelerSDK=a,cc._RF.pop()},{"../Utils/celerx":"celerx","./Game":"Game","./LogHandler":"LogHandler"}],Const:[function(e,t,o){"use strict";var n;cc._RF.push(t,"6380cLWFRRCbqDZ1T+XmugM","Const"),Object.defineProperty(o,"__esModule",{value:!0}),o.GameTime=120,o.SkillTimeBouns=10,function(e){e[e.Time=0]="Time",e[e.Star=1]="Star",e[e.Gold=2]="Gold",e[e.Super=3]="Super",e[e.Normal=4]="Normal"}(o.SkillType||(o.SkillType={})),o.SuperAniName={Percent:"super_percent",Get:"super_get",Remind:"super"},o.MaxSkillEquipCount=3,function(e){e[e.Wheel=0]="Wheel",e[e.Carousel=1]="Carousel",e[e.Roller=2]="Roller"}(n=o.Theme||(o.Theme={})),o.ThemePool=[n.Carousel,n.Roller,n.Wheel],o.RewardTime={One:4,Two:3.2},o.TimeScorePercent={Perfect:.2,Great:.5},function(e){e[e.Perfect=0]="Perfect",e[e.Great=1]="Great",e[e.Nice=2]="Nice",e[e.Normal=3]="Normal",e[e.Oops=4]="Oops",e[e.Bingo=5]="Bingo",e[e.OverBingo=6]="OverBingo",e[e.AllBingo=7]="AllBingo",e[e.Star=8]="Star",e[e.Gold=9]="Gold",e[e.Mouse=10]="Mouse",e[e.SpeedScore=11]="SpeedScore",e[e.BingoScore=12]="BingoScore",e[e.CorrectScore=13]="CorrectScore",e[e.OverBingoScore=14]="OverBingoScore",e[e.AllBingoScore=15]="AllBingoScore",e[e.OopScore=16]="OopScore",e[e.TotalScore=17]="TotalScore"}(o.ScoreType||(o.ScoreType={})),function(e){e[e.SpeedBonusCount=0]="SpeedBonusCount",e[e.CorrectCount=1]="CorrectCount",e[e.OopCount=2]="OopCount",e[e.BingoCount=3]="BingoCount",e[e.OverBingoCount=4]="OverBingoCount",e[e.AllBingoCount=5]="AllBingoCount"}(o.ScoreCountType||(o.ScoreCountType={})),o.ToolPercent={Perfect:.8,Great:.5,Nice:.4,Normal:0,Oops:0,Bingo:0,OverBingo:0,AllBingo:0,Star:.8,Gold:.8,Mouse:0},o.ScoreText={Perfect:"font_perfect",Great:"font_great",Nice:"font_nice",Normal:"",Oops:"font_oops",Bingo:"",BingoFail:"font_oops",OverBingo:"",AllBingo:"",Star:"font_perfect",Gold:"font_perfect",Mouse:"font_awesome"},o.SuperLight={Gray:"bg_supergray",Light:"bg_superlight"},o.UI_Atlas={Bingo_Blue_Up:"btn_bingo_blue_up",Bingo_Blue_Down:"btn_bingo_blue_down",Bingo_Orange_Up:"btn_bingo_orange_up",Bingo_Orange_Down:"btn_bingo_orange_down",Skill_Full:"bg_skill_full",Skill_Normal:"bg_skill_get",Skill_Icon_Star:"bg_skill_1",Skill_Icon_Gold:"bg_skill_2",Skill_Icon_Time:"bg_skill_3",Super_Skill_Down:"btn_change_down",Super_Skill_Up:"btn_change_up",Super_Skill_Gray:"btn_change_gray"},o.Score={Perfect:50,Great:30,Nice:20,Normal:100,Oops:-25,MouseOops:-25,Bingo:1e3,BingoStep:100,BingoFail:-100,AllBingo:3e3,Star:50,Gold:50,Mouse:50},o.TimeLimit=91,o.RewardListLimit=4,o.CardNumber={Min:2,Max:3},function(e){e.Score="Score",e.Card="Card",e.Point="Point",e.Time="TimeBonus"}(o.PrefabName||(o.PrefabName={})),o.TargetRange={Start:1,End:75},o.CardStep=15,function(e){e[e.B=1]="B",e[e.I=2]="I",e[e.N=3]="N",e[e.G=4]="G",e[e.O=5]="O"}(o.CardWord||(o.CardWord={})),o.PointColor={0:cc.color(79,130,233),1:cc.color(229,103,236),2:cc.color(145,85,212),3:cc.color(42,197,183),4:cc.color(231,209,125)},o.StarCard=["N.3"],o.RectCard=["B.1","O.1","B.5","O.5"],function(e){e[e.TimeUp=0]="TimeUp",e[e.PoolClear=1]="PoolClear",e[e.CardClear=2]="CardClear",e[e.AllBingo=3]="AllBingo"}(o.OverType||(o.OverType={})),o.OverFont={TimeUp:"bg_result_font1",PoolClear:"bg_result_font2",CardClear:"bg_result_font2",AllBingo:"bg_result_font2"},o.TotalSkillCount=5,o.SkillPercentRange={Max:140,Min:11},o.GoldSkillTimeLimit={Select:7,Click:4},o.SuperTime={LastTime:10,RandomMin:1.5,RandomMax:7.5,ShowTimeMin:.3,ShowTimeMax:.7,WrongLimit:5,HighLightLimit:5,SubScore:-25},cc._RF.pop()},{}],EventManager:[function(e,t,o){"use strict";cc._RF.push(t,"abedd8TuIVPHo+8lpclbjlp","EventManager"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function e(){this.eventTarget=new cc.EventTarget}return Object.defineProperty(e,"inst",{get:function(){return this.ins?this.ins:this.ins=new e},enumerable:!0,configurable:!0}),e.prototype.emit=function(e,t,o,n,i,r){this.eventTarget.emit(e.toString(),t,o,n,i,r)},e.prototype.on=function(e,t,o,n){return this.eventTarget.on(e.toString(),t,o,n)},e.prototype.once=function(e,t,o){this.eventTarget.once(e.toString(),t,o)},e.prototype.dispatchEvent=function(e){this.eventTarget.dispatchEvent(e)},e.prototype.off=function(e,t,o){this.eventTarget.off(e.toString(),t,o)},e.prototype.hasEventListener=function(e){return this.eventTarget.hasEventListener(e.toString())},e.prototype.targetOff=function(e){this.eventTarget.targetOff(e)},e}();o.gEventMgr=n.inst,cc._RF.pop()},{}],EventName:[function(e,t,o){"use strict";cc._RF.push(t,"5e448W2wb5EB7XC2O5CyNch","EventName"),Object.defineProperty(o,"__esModule",{value:!0}),function(e){e[e.PLAY_EFFECT=0]="PLAY_EFFECT",e[e.CHANGE_BGM=1]="CHANGE_BGM",e[e.SMALL_BGM=2]="SMALL_BGM",e[e.NORMAL_BGM=3]="NORMAL_BGM",e[e.GAME_START=4]="GAME_START",e[e.ADD_SCORE=5]="ADD_SCORE",e[e.GAME_OVER=6]="GAME_OVER",e[e.ADD_2_NORMAL_REWARD=7]="ADD_2_NORMAL_REWARD",e[e.CHECK_BINGO=8]="CHECK_BINGO",e[e.UPDATE_TOOL_PERCENT=9]="UPDATE_TOOL_PERCENT",e[e.SKILL_DONE=10]="SKILL_DONE",e[e.SUPER_END_COMPLETE=11]="SUPER_END_COMPLETE",e[e.GOLD_POINT_SELECT_DONE=12]="GOLD_POINT_SELECT_DONE",e[e.CHANGE_GAME_MODE=13]="CHANGE_GAME_MODE",e[e.UPDATE_MOUSE_LIGHT=14]="UPDATE_MOUSE_LIGHT",e[e.SCROLL_CARD=15]="SCROLL_CARD",e[e.PXIEL_ENABLE=16]="PXIEL_ENABLE",e[e.SHOW_SKILL_GUIDE=17]="SHOW_SKILL_GUIDE"}(o.GlobalEvent||(o.GlobalEvent={})),cc._RF.pop()},{}],FrameAniBase:[function(e,t,o){"use strict";cc._RF.push(t,"40ac1Eu6RlIMb5+29+y7eVp","FrameAniBase"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,i=n.ccclass,r=n.property,a=n.executeInEditMode,l=n.requireComponent,s=n.playOnFocus,c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.Frames=null,t.Interval=.1,t.Priority=0,t.Loop=!1,t.PlayOnLoad=!1,t.currentIndex=0,t.time=0,t.isPlay=!1,t.listener=[],t.complateEvent=[],t}var o;return __extends(t,e),o=t,Object.defineProperty(t.prototype,"Sprite",{get:function(){return this.node.getComponent(cc.Sprite)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Animation",{set:function(e){this.Frames=e},enumerable:!0,configurable:!0}),t.prototype.onFocusInEditor=function(){this.time=this.Interval,o.intervalID=setInterval(this.update.bind(this),.016,.016)},t.prototype.onLostFocusInEditor=function(){clearInterval(o.intervalID)},t.prototype.onLoad=function(){this.time=this.Interval,this.isPlay=this.PlayOnLoad},t.prototype.play=function(){this.isPlay=!0,this.currentIndex=0,0==this.isPlaying&&this.callEventComplete()},t.prototype.playOnLoop=function(){this.Loop=!0,this.play()},t.prototype.playByStep=function(){this.isPlay=!0,this.nextFrame(),this.isPlay=!1},t.prototype.pause=function(){this.isPlay=!1},t.prototype.resume=function(){this.isPlay=!0},t.prototype.stop=function(){this.isPlay=!1,this.currentIndex=0,this.Loop=!1},t.prototype.onKeyFrame=function(e){},t.prototype.addKeyEventListener=function(e,t){this.listener.push({callback:e,target:t})},Object.defineProperty(t.prototype,"ListenerCount",{get:function(){return this.listener.length},enumerable:!0,configurable:!0}),t.prototype.clearAllListener=function(){return this.listener.length=0,this},t.prototype.onComplete=function(){},t.prototype.callEventFrame=function(){this.onKeyFrame(this.currentIndex);for(var e=0,t=this.listener;e<t.length;e++){var o=t[e];o.callback.apply(o.target,[this.currentIndex,this.__classname__])}},t.prototype.callEventComplete=function(){this.onComplete();for(var e=0,t=this.complateEvent;e<t.length;e++){var o=t[e];o.f.apply(o.target,[this.__classname__])}},t.prototype.addCompleteEvent=function(e,t){this.complateEvent.push({f:e,target:t})},Object.defineProperty(t.prototype,"TotalFrameCount",{get:function(){return this.Frames&&this.Frames.getSpriteFrames?this.Frames.getSpriteFrames().length:0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"CompleteEventCount",{get:function(){return this.complateEvent.length},enumerable:!0,configurable:!0}),t.prototype.clearCompleteEvent=function(){return this.complateEvent.length=0,this},t.prototype.start=function(){},Object.defineProperty(t.prototype,"isPlaying",{get:function(){if(this.isPlay&&this.Frames&&this.Frames.getSpriteFrames&&this.Frames.getSpriteFrames().length>0){for(var e=0,t=this.getComponents(o);e<t.length;e++){var n=t[e];if(n.Priority>this.Priority&&n.isPlaying)return!1}return!0}return!1},enumerable:!0,configurable:!0}),t.prototype.nextFrame=function(){0!=this.isPlaying?this.Frames&&this.Frames.getSpriteFrames&&this.Frames.getSpriteFrames().length>0&&(this.Sprite.spriteFrame=this.Frames.getSpriteFrames()[this.currentIndex],this.callEventFrame(),this.currentIndex=(this.currentIndex+1)%this.Frames.getSpriteFrames().length,0==this.currentIndex&&0==this.Loop&&(this.isPlay=!1,this.callEventComplete())):this.time=this.Interval},t.prototype.update=function(e){this.time>=this.Interval&&(this.time=0,this.nextFrame()),this.time+=e},t.aniName="FrameAniBase",t.intervalID=-1,__decorate([r(cc.SpriteAtlas)],t.prototype,"Frames",void 0),__decorate([r],t.prototype,"Interval",void 0),__decorate([r],t.prototype,"Priority",void 0),__decorate([r],t.prototype,"Loop",void 0),__decorate([r],t.prototype,"PlayOnLoad",void 0),t=o=__decorate([i,a,s,l(cc.Sprite)],t)}(cc.Component);o.default=c,cc._RF.pop()},{}],GameFactory:[function(e,t,o){"use strict";cc._RF.push(t,"4ba85CHTExANJR6/Hab8WvI","GameFactory"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../Utils/HashMap"),i=function(){function e(e,t,o){this._pool=[],this.poolHandlerComps=[],this.poolHandlerComps=o,this.template=e,this.initPool(t)}return e.prototype.initPool=function(e){for(var t=0;t<e;++t){var o=cc.instantiate(this.template);this.put(o)}},e.prototype.size=function(){return this._pool.length},e.prototype.clear=function(){for(var e=this._pool.length,t=0;t<e;++t)this._pool[t].destroy&&this._pool[t].destroy();this._pool.length=0},e.prototype.put=function(e){if(e&&-1===this._pool.indexOf(e)){if(e.removeFromParent(!1),this.poolHandlerComps)for(var t=0,o=this.poolHandlerComps;t<o.length;t++){var n=o[t],i=e.getComponent(n);i&&i.unuse&&i.unuse.apply(i)}else for(var r=0,a=e.getComponents(cc.Component);r<a.length;r++){(n=a[r])&&n.unuse&&n.unuse.apply(n)}this._pool.push(e)}},e.prototype.get=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var o=this._pool.length-1;o<0&&(console.warn(" last < 0 "),this.initPool(1)),o=this._pool.length-1;var n=this._pool[o];if(this._pool.length=o,this.poolHandlerComps)for(var i=0,r=this.poolHandlerComps;i<r.length;i++){var a=r[i],l=n.getComponent(a);l&&l.reuse&&l.reuse.apply(l,arguments)}else for(var s=0,c=n.getComponents(cc.Component);s<c.length;s++){(a=c[s])&&a.reuse&&a.reuse.apply(a,arguments)}return n},e}(),r=function(){function e(){this.objPool=new n.HashMap}return Object.defineProperty(e,"inst",{get:function(){return this.ins?this.ins:this.ins=new e},enumerable:!0,configurable:!0}),e.prototype.init=function(e){var t=this;this.doneCallback=e,cc.loader.loadResDir("prefabs/",cc.Prefab,function(e,o,n){if(e)console.error(" Game Factory init failed:",e);else{for(var r=0,a=o;r<a.length;r++){var l=a[r],s=l.name.split("."),c=s[0],u=s[1]?parseInt(s[1]):30;console.log(" init pool:",c,", count:",u);var p=new i(l,u);t.objPool.add(c,p)}t.doneCallback()}})},e.prototype.getObj=function(e){for(var t=[],o=1;o<arguments.length;o++)t[o-1]=arguments[o];return this.objPool.has(e)?this.objPool.get(e).get(t):(console.error(" objPool dosen't exists this obj:",e),null)},e.prototype.putObj=function(e,t){if(this.objPool.has(e))return this.objPool.get(e).put(t);console.error(" objPool dosen't exists this obj:",e)},e}();o.gFactory=r.inst,cc._RF.pop()},{"../Utils/HashMap":"HashMap"}],GameScene:[function(e,t,o){"use strict";cc._RF.push(t,"641d0IYt6xLgqqVz9F0bymV","GameScene"),Object.defineProperty(o,"__esModule",{value:!0});var n,i=e("./Controller/GameFactory"),r=e("./Controller/EventManager"),a=e("./Controller/StepController"),l=e("./Controller/AudioController"),s=e("./Controller/EventName"),c=e("./Controller/Game"),u=e("./Guide"),p=e("./Controller/CelerSDK"),h=e("./Const"),d=e("./UI/Pad"),g=e("./Card"),m=e("./GoldSkillLayer"),f=e("./SuperSkillLayer"),v=e("./ResultLayer"),y=e("./Shader/ShaderManager"),C=e("./LoadLayer"),S=e("./PauseLayer"),_=e("./Controller/LogHandler");(function(e){e.Prefab="Prefab",e.Audio="Audio"})(n||(n={}));var b=cc._decorator,T=b.ccclass,P=b.property,E=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.ResultAnimation=null,t.Background=null,t.TopNode=null,t.TimeLabel=null,t.ScoreLabel=null,t.PageTabButtonRoot=null,t.ResultTitle=null,t.CardPages=null,t.CurrentPoint=null,t.NextPoint=null,t.PointArray=null,t.RecycleArray=null,t.Help=null,t.Guide=null,t.TextAtlas=null,t.UIAtlas=null,t.ToolBar=null,t.BingoButton=null,t.SuperSkillButton=null,t.SkillRoot=null,t.SuperSkillBar=null,t.CurrentSkillProgressLabel=null,t.TotalSkillProgressLabel=null,t.StarSkillLayer=null,t.GoldSkillLayer=null,t.SuperSkillLayer=null,t.ResultLayer=null,t.LoadLayer=null,t.TimeFont=null,t.SuperAnimation=null,t.StartTimeCount=null,t.StartTimeCountLabel=null,t.StartTimeAtlas=null,t.PauseLayer=null,t.RemindNode=null,t.showScore=0,t.score=0,t.addScoreStep=0,t.completeCallback=null,t.scoreNodeCache=[],t.timeNodeCache=[],t.toolPercent=0,t.remindCDTime=0,t}return __extends(t,e),t.prototype.onLoad=function(){window.chichihaoshuaihahaha=!1,y.ShaderManager.inst,p.CelerSDK.inst.init(this.celerOnStart.bind(this)),cc.debug.setDisplayStats(!1),c.Game.TopNode=this.TopNode,c.Game.CurrentReward=this.CurrentPoint,c.Game.RewardArray=this.PointArray,this.PageTabButtonRoot.active=!1,this.ToolBar.progress=0,this.ResultAnimation.node.active=!1,this.StarSkillLayer.active=!1,this.GoldSkillLayer.hide(),this.SuperSkillLayer.hide(),this.ResultLayer.hide(),this.PauseLayer.hide(),this.LoadLayer.node.active=!0,this.TimeLabel.string=CMath.TimeFormat(h.GameTime),a.gStep.register(this.celerReady.bind(this),[n.Prefab,n.Audio]),l.gAudio.init(function(){a.gStep.nextStep(n.Audio)}),i.gFactory.init(function(){a.gStep.nextStep(n.Prefab)}),this.initEvent()},t.prototype.celerReady=function(){_.LogHandler.inst.log(" celer ready"),p.CelerSDK.inst.celerXReady()},t.prototype.celerOnStart=function(){c.Game.prepare();for(var e=0,t=this.Background.children;e<t.length;e++){var o=t[e];o.active=o.name==h.Theme[c.Game.Theme]}this.initGameScene(),this.LoadLayer.ready()},t.prototype.updateSuperSkillProgress=function(){this.TotalSkillProgressLabel.string=h.TotalSkillCount.toString(),this.CurrentSkillProgressLabel.string=c.Game.getCurrentSkillUseCount().toString();var e=c.Game.getSkillUsePercent();this.SuperSkillBar.active=e<1;var t=e*(h.SkillPercentRange.Max-h.SkillPercentRange.Min)+h.SkillPercentRange.Min;this.SuperSkillBar.height<t?e<1?(this.SuperAnimation.node.opacity=0,this.SuperAnimation.stop(h.SuperAniName.Remind),this.SuperAnimation.playAdditive(h.SuperAniName.Percent)):(this.SuperAnimation.playAdditive(h.SuperAniName.Get),this.SuperAnimation.playAdditive(h.SuperAniName.Remind),p.CelerSDK.inst.isNew()&&!c.Game.skillGuide[h.SkillType.Super]&&(c.Game.skillGuide[h.SkillType.Super]=!0,r.gEventMgr.emit(s.GlobalEvent.SHOW_SKILL_GUIDE,h.SkillType.Super,c.Game.resume))):e<1&&(this.SuperAnimation.node.opacity=0,this.SuperAnimation.stop(h.SuperAniName.Remind)),this.SuperSkillBar.height=t,this.SuperSkillButton.interactable=e>=1},t.prototype.updateButtonGroup=function(){for(var e=0,t=this.PageTabButtonRoot.children;e<t.length;e++){var o=t[e];o.getChildByName("Normal").active=o.getComponent(cc.Button).interactable,o.getChildByName("Press").active=!o.getChildByName("Normal").active,o.getComponent(cc.Button).interactable?o.getChildByName("Text").opacity=127.5:o.getChildByName("Text").opacity=255}},t.prototype.setButtonGroupDefault=function(){for(var e=0,t=this.PageTabButtonRoot.children;e<t.length;e++){var o=t[e];o.getChildByName("Press").group="default",o.getChildByName("Text").group="default"}},t.prototype.setButtonGroupUI=function(){for(var e=0,t=this.PageTabButtonRoot.children;e<t.length;e++){var o=t[e];o.getChildByName("Press").group="UI",o.getChildByName("Text").group="UI"}},t.prototype.initGameScene=function(){var e=c.Game.getCardNumber();this.PageTabButtonRoot.active=!(e<=1);for(var t=this.PageTabButtonRoot.childrenCount,o=1;o<=t;o++){(r=this.PageTabButtonRoot.getChildByName(o.toString()))&&o>e?r.removeFromParent(!0):(r.on(cc.Node.EventType.TOUCH_START,this.scrollCardPage,this),1==o&&(r.getComponent(cc.Button).interactable=!1))}this.updateButtonGroup(),console.log(" tab button count:",this.PageTabButtonRoot.childrenCount),this.PageTabButtonRoot.active=e>1;var n=this.CardPages.content.childrenCount;for(o=1;o<=n;o++){var r;(r=this.CardPages.content.getChildByName(o.toString()))&&o>e?this.CardPages.removePage(r):r.addComponent(d.default)}console.log(" pad count:",this.CardPages.content.childrenCount),this.CardPages.node.on("scroll-ended",this.onPageTurnDone,this),this.CardPages._unregisterEvent();for(var a=0,l=this.CardPages.content.children;a<l.length;a++){var s=l[a];for(o=h.CardWord.B;o<=h.CardWord.O;o++){for(var u=[],p=[],g=0;g<15;g++)p.push(g);u.length=p.length;for(g=(o-1)*h.CardStep+1;g<=o*h.CardStep;g++){var m=Math.floor(CMath.getRandom(0,p.length));u[p[m]]=g,p.splice(m,1)}console.log(" -------- randomPool ------------"),console.log(u);for(g=1;g<=5;g++){var f=u.pop(),v=parseInt(s.name)-1;c.Game.addCurrentCardValue(v,f);var y=i.gFactory.getObj("Card",o,g,f,v);s.addChild(y)}}}console.log(c.Game.getCurrentCardValue()),this.updateSuperSkillProgress(),this.updateToolPercent()},t.prototype.onPageTurnDone=function(){for(var e=0,t=this.PageTabButtonRoot.children;e<t.length;e++){var o=t[e];o.getComponent(cc.Button).interactable=o.name!=(this.CardPages.getCurrentPageIndex()+1).toString()}this.updateButtonGroup(),this.updateBingoButton()},t.prototype.scrollCardPage=function(e){if((c.Game.getCurMode()==h.SkillType.Normal||c.Game.getCurMode()==h.SkillType.Gold)&&e.target.getComponent(cc.Button).interactable){r.gEventMgr.emit(s.GlobalEvent.PLAY_EFFECT,"tab");for(var t=0,o=this.PageTabButtonRoot.children;t<o.length;t++){var n=o[t];e.target==n?n.getComponent(cc.Button).interactable=!1:n.getComponent(cc.Button).interactable=!0}this.updateButtonGroup(),this.CardPages.scrollToPage(parseInt(e.target.name)-1,0),this.updateBingoButton()}},t.prototype.initEvent=function(){var e=this;r.gEventMgr.targetOff(this),this.CurrentPoint.on(cc.Node.EventType.CHILD_REMOVED,this.onCurrentPointRemoveChild,this),this.TopNode.getChildByName("ScoreRoot").on(cc.Node.EventType.CHILD_REMOVED,this.onScoreRootRemoveChild,this),this.TopNode.getChildByName("TimeRoot").on(cc.Node.EventType.CHILD_REMOVED,this.onTimeRootRemoveChild,this),this.BingoButton.node.on(cc.Node.EventType.TOUCH_END,this.Bingo,this),this.SuperSkillButton.node.on(cc.Node.EventType.TOUCH_END,this.superSkill,this),this.Help.on(cc.Node.EventType.TOUCH_END,function(){c.Game.getCurMode()==h.SkillType.Normal?e.PauseLayer.show(function(){e.Guide.show(u.GuideType.Help,c.Game.pause.bind(c.Game))},c.Game.resume.bind(c.Game)):console.log(" only the normal mode can open help info")},this),this.SkillRoot.on(cc.Node.EventType.CHILD_ADDED,function(){console.log("\u83b7\u5f97\u9053\u5177\uff1a"+e.SkillRoot.childrenCount)},this),this.SkillRoot.on(cc.Node.EventType.CHILD_REMOVED,function(){console.log("\u5220\u9664\u9053\u5177\uff1a"+e.SkillRoot.childrenCount)},this),r.gEventMgr.on(s.GlobalEvent.ADD_2_NORMAL_REWARD,this.addNormalReward,this),r.gEventMgr.on(s.GlobalEvent.ADD_SCORE,this.addScore,this),r.gEventMgr.on(s.GlobalEvent.CHECK_BINGO,this.CheckBingo,this),r.gEventMgr.on(s.GlobalEvent.UPDATE_TOOL_PERCENT,this.updateToolPercent,this),r.gEventMgr.on(s.GlobalEvent.SKILL_DONE,this.skillDone,this),r.gEventMgr.once(s.GlobalEvent.GAME_OVER,this.onGameOver,this),r.gEventMgr.once(s.GlobalEvent.GAME_START,this.startGame,this),r.gEventMgr.on(s.GlobalEvent.SHOW_SKILL_GUIDE,this.showSkillGuide,this)},t.prototype.startGame=function(){var e=this;console.log(" start game time count..."),this.StartTimeCount.spriteFrame=this.StartTimeAtlas.getSpriteFrame("ae_start1");this.StartTimeCountLabel.string=3..toString();var t=1,o=[];this.LoadLayer.enableBlock(!1);for(var n=function(n){o.push(cc.repeat(cc.sequence(cc.delayTime(1/12),cc.callFunc(function(){t=Math.max(1,(t+1)%7),e.StartTimeCount.spriteFrame=e.StartTimeAtlas.getSpriteFrame("ae_start"+t)})),12),cc.callFunc(function(){n<=0?(e.StartTimeCountLabel.string="",e.StartTimeCount.node.scale=.8,e.StartTimeCount.spriteFrame=e.StartTimeAtlas.getSpriteFrame("ae_LETSGO")):(r.gEventMgr.emit(s.GlobalEvent.PLAY_EFFECT,"count"),e.StartTimeCountLabel.string=n.toString())}))},i=2;i>=0;i--)n(i);o.push(cc.callFunc(function(){r.gEventMgr.emit(s.GlobalEvent.PLAY_EFFECT,"letsgo")}),cc.scaleTo(.1,1.5),cc.delayTime(.5),cc.scaleTo(.1,1),cc.fadeOut(.5),cc.callFunc(function(){console.log(" Game.start() --"),e.onCurrentPointRemoveChild(null),c.Game.start()})),p.CelerSDK.inst.isNew()?this.Guide.show(u.GuideType.Guide,function(){r.gEventMgr.emit(s.GlobalEvent.PLAY_EFFECT,"count"),e.StartTimeCount.node.runAction(cc.sequence(o))}):(r.gEventMgr.emit(s.GlobalEvent.PLAY_EFFECT,"count"),this.StartTimeCount.node.runAction(cc.sequence(o)))},t.prototype.onGameOver=function(e){var t=this;console.log("OverType:",h.OverType[e]),this.skillDone(),c.Game.isOver=!0,this.scoreNodeCache.length=0,this.ResultAnimation.node.active=!0,this.ResultAnimation.once(cc.Animation.EventType.FINISHED,function(){setTimeout(function(){t.ResultLayer.show(e)},1e3)},this),e==h.OverType.TimeUp?(this.ResultAnimation.play("time_up"),r.gEventMgr.emit(s.GlobalEvent.SMALL_BGM),r.gEventMgr.emit(s.GlobalEvent.PLAY_EFFECT,"mouse_time_up")):(this.ResultAnimation.play("complete"),r.gEventMgr.emit(s.GlobalEvent.SMALL_BGM),r.gEventMgr.emit(s.GlobalEvent.PLAY_EFFECT,"mouse_complete"))},t.prototype.Bingo=function(){if(c.Game.canBingo(this.CardPages.getCurrentPageIndex())){var e=c.Game.popBingoCache(this.CardPages.getCurrentPageIndex());if(e){c.Game.addScore(h.ScoreType.Bingo,e.score,1);for(var t=0,o=0,n=e.cards;o<n.length;o++){t+=n[o].bingo()}t>0&&c.Game.addScore(h.ScoreType.OverBingo,t,1),r.gEventMgr.emit(s.GlobalEvent.PLAY_EFFECT,"bingo")}this.updateBingoButton(),c.Game.checkIsComplete()}else c.Game.addScore(h.ScoreType.Oops,h.Score.BingoFail,1)},t.prototype.updateBingoButton=function(){c.Game.cardIndex=this.CardPages.getCurrentPageIndex(),this.BingoButton.node.getChildByName("Ani").active=c.Game.canBingo(this.CardPages.getCurrentPageIndex()),c.Game.canBingo(this.CardPages.getCurrentPageIndex())?(this.BingoButton.normalSprite!=this.UIAtlas.getSpriteFrame(h.UI_Atlas.Bingo_Orange_Up)&&r.gEventMgr.emit(s.GlobalEvent.PLAY_EFFECT,"turn_bingo"),this.BingoButton.normalSprite=this.UIAtlas.getSpriteFrame(h.UI_Atlas.Bingo_Orange_Up),this.BingoButton.hoverSprite=this.UIAtlas.getSpriteFrame(h.UI_Atlas.Bingo_Orange_Up),this.BingoButton.pressedSprite=this.UIAtlas.getSpriteFrame(h.UI_Atlas.Bingo_Orange_Down)):(this.BingoButton.normalSprite=this.UIAtlas.getSpriteFrame(h.UI_Atlas.Bingo_Blue_Up),this.BingoButton.hoverSprite=this.UIAtlas.getSpriteFrame(h.UI_Atlas.Bingo_Blue_Up),this.BingoButton.pressedSprite=this.UIAtlas.getSpriteFrame(h.UI_Atlas.Bingo_Blue_Down))},t.prototype.CheckBingo=function(e,t){void 0===t&&(t=!1);var o=this.CardPages.getCurrentPageIndex()+1;console.log(" current page index:",o);for(var n=[],i=[],r=[],a=[],l=[],s=0,u=this.CardPages.content.getChildByName(o.toString()).children;s<u.length;s++){if(y=u[s].getComponent(g.default)){if(h.RectCard.indexOf(y.Pos)>=0&&t&&y.isLight()&&n.push(y),y.Index==y.Word&&e.Index==e.Word&&y.isLight()&&r.push(y),y.Index+y.Word==6&&e.Index+e.Word==6&&y.isLight()&&i.push(y),!y.isLight())continue;y.Index==e.Index&&a.push(y),y.Word==e.Word&&l.push(y)}}var p=[],d=0;if(n.length<4&&(n.length=0),n.length>0){console.log(" ------------- \u56db\u8fb9\u89d2 ------------"),p=p.concat(n),d+=h.Score.Bingo;for(var m=[],f=0,v=n;f<v.length;f++){var y=v[f];m.push(y.Pos)}console.log(m)}if(i.length<5&&(i.length=0),i.length>0){console.log(" -------- \u53cd\u5bf9\u89d2 ----------"),p=p.concat(i),d+=h.Score.Bingo;m=[];for(var C=0,S=i;C<S.length;C++){y=S[C];m.push(y.Pos)}console.log(m)}if(r.length<5&&(r.length=0),r.length>0){console.log(" ---------- \u6b63\u5bf9\u89d2 ------------"),p=p.concat(r),d+=h.Score.Bingo;m=[];for(var _=0,b=r;_<b.length;_++){y=b[_];m.push(y.Pos)}console.log(m)}if(a.length<5&&(a.length=0),a.length>0){console.log(" -------------  \u7ad6\u5411 ---------------"),p=p.concat(a),d+=h.Score.Bingo;m=[];for(var T=0,P=a;T<P.length;T++){y=P[T];m.push(y.Pos)}console.log(m)}if(l.length<5&&(l.length=0),l.length>0){console.log(" ----------------- \u6a2a\u5411 ---------------"),p=p.concat(l),d+=h.Score.Bingo;m=[];for(var E=0,M=l;E<M.length;E++){y=M[E];m.push(y.Pos)}console.log(m)}p.length>0&&c.Game.pushBingoCache(this.CardPages.getCurrentPageIndex(),{cards:p,score:d}),this.updateBingoButton()},t.prototype.onCurrentPointRemoveChild=function(e){var t=this;if(this.NextPoint.childrenCount<=0){var o=i.gFactory.getObj("Point",c.Game.getNextPoint());this.NextPoint.addChild(o),o.x=0,o.y=0,o.scale=0,o.runAction(cc.sequence(cc.scaleTo(.15,1),cc.callFunc(function(){o.setParent(t.CurrentPoint),o.x=0,o.y=0})))}},t.prototype.addNormalReward=function(e){var t=0;if(this.PointArray.childrenCount>=4){var o=this.PointArray.children[0];o.setPosition(CMath.ConvertToNodeSpaceAR(o,this.RecycleArray)),o.setParent(this.RecycleArray),t=.1,o.runAction(cc.sequence(cc.scaleTo(.1,.5),cc.moveTo(.15,0,0),cc.callFunc(function(){i.gFactory.putObj("Point",o)})))}for(var n=0,a=this.PointArray.children;n<a.length;n++){var l=a[n];l.runAction(cc.sequence(cc.delayTime(t),cc.moveBy(.15,-l.width-20,0)))}e.setPosition(CMath.ConvertToNodeSpaceAR(e,this.PointArray)),e.setParent(this.PointArray),e.runAction(cc.sequence(cc.delayTime(t),cc.callFunc(function(){}),cc.spawn(cc.moveTo(.15,0,0),cc.scaleTo(.15,.9)))),r.gEventMgr.emit(s.GlobalEvent.PLAY_EFFECT,"new_point")},t.prototype.addScore=function(e,t,o,n){var r=this;void 0===n&&(n=cc.v2(49,704));var a=c.Game.getScore(),l=i.gFactory.getObj(h.PrefabName.Score,t,o,this.ScoreLabel.node,function(){r.score=a,r.addScoreStep=(r.score-r.showScore)/20,i.gFactory.putObj(h.PrefabName.Score,l),console.log(" score:",r.score," , show:",r.showScore,", step:",r.addScoreStep)},this.TextAtlas.getSpriteFrame(h.ScoreText[h.ScoreType[e]]));l.setPosition(n),this.TopNode.getChildByName("ScoreRoot").childrenCount>0?(console.log(" font node cache!"),this.scoreNodeCache.push(l)):this.TopNode.getChildByName("ScoreRoot").addChild(l)},t.prototype.addTime=function(){r.gEventMgr.emit(s.GlobalEvent.PLAY_EFFECT,"add_time");var e=i.gFactory.getObj(h.PrefabName.Time,function(){i.gFactory.putObj(h.PrefabName.Time,e)},this.TimeLabel.node);e.setPosition(0,0),this.TopNode.getChildByName("TimeRoot").childrenCount>0?this.timeNodeCache.push(e):this.TopNode.getChildByName("TimeRoot").addChild(e)},t.prototype.onScoreRootRemoveChild=function(e){this.scoreNodeCache.length>0&&this.TopNode.getChildByName("ScoreRoot").addChild(this.scoreNodeCache.shift())},t.prototype.onTimeRootRemoveChild=function(e){this.timeNodeCache.length>0&&this.TopNode.getChildByName("TimeRoot").addChild(this.timeNodeCache.shift())},t.prototype.updateTimeCount=function(){var e=Math.floor(c.Game.getGameTime());if(!(e>5)){var t=this.TimeLabel.node.getChildByName("font").getComponent(cc.Sprite),o=this.TimeFont.getSpriteFrame("bg_time"+e);t.spriteFrame!=o&&(r.gEventMgr.emit(s.GlobalEvent.PLAY_EFFECT,"count"),t.spriteFrame=o,t.node.runAction(cc.sequence(cc.fadeTo(.2,255),cc.scaleTo(.1,1.2),cc.delayTime(.5),cc.scaleTo(.1,1),cc.fadeTo(.1,0))))}},t.prototype.updateToolPercent=function(){this.toolPercent=c.Game.getToolPercent(),this.toolPercent=CMath.Clamp(this.toolPercent,1,0)},t.prototype.showSkillGuide=function(e,t){console.log(" show skill guide:",h.SkillType[e]),this.Guide.showSkillGuide(e,t)},t.prototype.addSkill=function(){if(c.Game.getGameTime()<=0)console.log(" game time up");else if(!(this.SkillRoot.childrenCount>=h.MaxSkillEquipCount)){c.Game.addToolPercent(-1),this.ToolBar.progress-=.01;var e,t=c.Game.getSkill(),o="";switch(console.log(" \u83b7\u5f97\u6280\u80fd:",h.SkillType[t]),t){case h.SkillType.Gold:e=this.goldSkill.bind(this),o=h.UI_Atlas.Skill_Icon_Gold;break;case h.SkillType.Star:e=this.starSkill.bind(this),o=h.UI_Atlas.Skill_Icon_Star;break;case h.SkillType.Time:e=this.timeSkill.bind(this),o=h.UI_Atlas.Skill_Icon_Time}var n=i.gFactory.getObj("Skill",e,this.UIAtlas.getSpriteFrame(o),t,this.SkillRoot.childrenCount);r.gEventMgr.emit(s.GlobalEvent.PLAY_EFFECT,"get_skill"),this.SkillRoot.addChild(n),n.zIndex=this.SkillRoot.childrenCount}},t.prototype.starSkill=function(){c.Game.getGameTime()<=0?console.log(" game time up"):(console.log("  \u84dd\u8272\u9053\u5177"),c.Game.checkIsFull(this.CardPages.getCurrentPageIndex())?console.log(" \u6b64\u5361\u7247\u5df2\u7ecf\u5168\u90e8\u70b9\u6ee1"):c.Game.getCurMode()==h.SkillType.Normal?(c.Game.pause(),this.StarSkillLayer.active=!0,r.gEventMgr.emit(s.GlobalEvent.PLAY_EFFECT,"skill"),c.Game.setCurClickMode(h.SkillType.Star),this.setButtonGroupDefault()):console.log(" not normal mode!"))},t.prototype.skillDone=function(){c.Game.resume(),c.Game.setCurClickMode(h.SkillType.Normal),this.StarSkillLayer.active=!1,this.GoldSkillLayer.hide(),this.SuperSkillLayer.hide(),this.setButtonGroupUI(),this.updateSuperSkillProgress()},t.prototype.goldSkill=function(){c.Game.getGameTime()<=0?console.log(" game time up"):(console.log(" \u91d1\u8272\u9053\u5177"),c.Game.checkIsFull(this.CardPages.getCurrentPageIndex())?console.log(" \u6b64\u5361\u7247\u5df2\u7ecf\u5168\u90e8\u70b9\u6ee1"):c.Game.getCurMode()==h.SkillType.Normal?(c.Game.pause(),this.GoldSkillLayer.show(this.CardPages.getCurrentPageIndex()),c.Game.setCurClickMode(h.SkillType.Gold),this.setButtonGroupDefault()):console.log(" not normal mode!"))},t.prototype.timeSkill=function(){c.Game.getGameTime()<=0?console.log(" game time up"):(console.log(" \u65f6\u95f4\u9053\u5177"),c.Game.getCurMode()==h.SkillType.Normal?(c.Game.addGameTime(h.SkillTimeBouns),this.updateSuperSkillProgress(),this.addTime()):console.log(" not normal mode!"))},t.prototype.superSkill=function(){var e=this;c.Game.getGameTime()<=0?console.log(" game time up"):this.SuperSkillButton.interactable&&(console.log(" \u8d85\u7ea7\u9053\u5177"),c.Game.checkIsFull(this.CardPages.getCurrentPageIndex())?console.log(" \u6b64\u5361\u7247\u5df2\u7ecf\u5168\u90e8\u70b9\u6ee1"):c.Game.getCurMode()==h.SkillType.Normal?(c.Game.pause(),c.Game.clearSkillUseCount(),c.Game.setCurClickMode(h.SkillType.Super),this.setButtonGroupDefault(),r.gEventMgr.once(s.GlobalEvent.SCROLL_CARD,function(t){e.CardPages.scrollToPage(t,0);for(var o=0,n=e.PageTabButtonRoot.children;o<n.length;o++){var i=n[o];i.getComponent(cc.Button).interactable=(e.CardPages.getCurrentPageIndex()+1).toString()!=i.name}e.updateButtonGroup()},this),this.SuperSkillLayer.show()):console.log(" not normal mode!"))},t.prototype.update=function(e){if(c.Game.isStart){if(this.Guide.node.active||c.Game.isPause()||this.PauseLayer.node.active||(c.Game.addGameTime(-e),this.TimeLabel.string=CMath.TimeFormat(c.Game.getGameTime()),30==Math.floor(c.Game.getGameTime())&&this.TimeLabel.node.getChildByName("noTime")&&this.TimeLabel.node.getChildByName("noTime").opacity<=0&&(this.TimeLabel.getComponent(cc.Animation).play(),r.gEventMgr.emit(s.GlobalEvent.CHANGE_BGM,"bgm_30")),this.updateTimeCount()),this.ToolBar.progress!=this.toolPercent){var t=0==this.toolPercent?-.1:this.toolPercent>this.ToolBar.progress?.01:-.01;this.ToolBar.progress+=t,this.ToolBar.progress=CMath.Clamp(this.ToolBar.progress,1,0)}this.ToolBar.progress>=1&&this.addSkill(),c.Game.isToolFull=this.ToolBar.progress>=1&&this.SkillRoot.childrenCount>=h.MaxSkillEquipCount,c.Game.isToolFull?(this.remindCDTime+=e,this.remindCDTime>=5&&this.RemindNode.opacity<=0&&this.RemindNode.getNumberOfRunningActions()<=0&&(this.RemindNode.stopAllActions(),this.RemindNode.opacity=.1,this.RemindNode.runAction(cc.repeatForever(cc.sequence(cc.fadeIn(.1),cc.delayTime(2),cc.fadeOut(.15),cc.delayTime(5))))),this.ToolBar.barSprite.spriteFrame!=this.UIAtlas.getSpriteFrame(h.UI_Atlas.Skill_Full)&&r.gEventMgr.emit(s.GlobalEvent.PLAY_EFFECT,"get_horce"),this.ToolBar.barSprite.spriteFrame=this.UIAtlas.getSpriteFrame(h.UI_Atlas.Skill_Full)):(this.remindCDTime=0,this.RemindNode.stopAllActions(),this.RemindNode.opacity=0,this.ToolBar.barSprite.spriteFrame=this.UIAtlas.getSpriteFrame(h.UI_Atlas.Skill_Normal)),this.showScore!=this.score&&(this.showScore+=this.addScoreStep,(this.addScoreStep>0&&this.showScore>this.score||this.addScoreStep<0&&this.showScore<this.score)&&(this.showScore=this.score),this.ScoreLabel.string=Math.floor(this.showScore).toString())}c.Game.isOver&&this.score==this.showScore&&this.completeCallback&&(this.completeCallback(),this.completeCallback=null)},__decorate([P(cc.Animation)],t.prototype,"ResultAnimation",void 0),__decorate([P(cc.Node)],t.prototype,"Background",void 0),__decorate([P(cc.Node)],t.prototype,"TopNode",void 0),__decorate([P(cc.Label)],t.prototype,"TimeLabel",void 0),__decorate([P(cc.Label)],t.prototype,"ScoreLabel",void 0),__decorate([P(cc.Node)],t.prototype,"PageTabButtonRoot",void 0),__decorate([P(cc.SpriteAtlas)],t.prototype,"ResultTitle",void 0),__decorate([P(cc.PageView)],t.prototype,"CardPages",void 0),__decorate([P(cc.Node)],t.prototype,"CurrentPoint",void 0),__decorate([P(cc.Node)],t.prototype,"NextPoint",void 0),__decorate([P(cc.Node)],t.prototype,"PointArray",void 0),__decorate([P(cc.Node)],t.prototype,"RecycleArray",void 0),__decorate([P(cc.Node)],t.prototype,"Help",void 0),__decorate([P(u.default)],t.prototype,"Guide",void 0),__decorate([P(cc.SpriteAtlas)],t.prototype,"TextAtlas",void 0),__decorate([P(cc.SpriteAtlas)],t.prototype,"UIAtlas",void 0),__decorate([P(cc.ProgressBar)],t.prototype,"ToolBar",void 0),__decorate([P(cc.Button)],t.prototype,"BingoButton",void 0),__decorate([P(cc.Button)],t.prototype,"SuperSkillButton",void 0),__decorate([P(cc.Node)],t.prototype,"SkillRoot",void 0),__decorate([P(cc.Node)],t.prototype,"SuperSkillBar",void 0),__decorate([P(cc.Label)],t.prototype,"CurrentSkillProgressLabel",void 0),__decorate([P(cc.Label)],t.prototype,"TotalSkillProgressLabel",void 0),__decorate([P(cc.Node)],t.prototype,"StarSkillLayer",void 0),__decorate([P(m.default)],t.prototype,"GoldSkillLayer",void 0),__decorate([P(f.default)],t.prototype,"SuperSkillLayer",void 0),__decorate([P(v.default)],t.prototype,"ResultLayer",void 0),__decorate([P(C.default)],t.prototype,"LoadLayer",void 0),__decorate([P(cc.SpriteAtlas)],t.prototype,"TimeFont",void 0),__decorate([P(cc.Animation)],t.prototype,"SuperAnimation",void 0),__decorate([P(cc.Sprite)],t.prototype,"StartTimeCount",void 0),__decorate([P(cc.Label)],t.prototype,"StartTimeCountLabel",void 0),__decorate([P(cc.SpriteAtlas)],t.prototype,"StartTimeAtlas",void 0),__decorate([P(S.default)],t.prototype,"PauseLayer",void 0),__decorate([P(cc.Node)],t.prototype,"RemindNode",void 0),t=__decorate([T],t)}(cc.Component);o.default=E,cc._RF.pop()},{"./Card":"Card","./Const":"Const","./Controller/AudioController":"AudioController","./Controller/CelerSDK":"CelerSDK","./Controller/EventManager":"EventManager","./Controller/EventName":"EventName","./Controller/Game":"Game","./Controller/GameFactory":"GameFactory","./Controller/LogHandler":"LogHandler","./Controller/StepController":"StepController","./GoldSkillLayer":"GoldSkillLayer","./Guide":"Guide","./LoadLayer":"LoadLayer","./PauseLayer":"PauseLayer","./ResultLayer":"ResultLayer","./Shader/ShaderManager":"ShaderManager","./SuperSkillLayer":"SuperSkillLayer","./UI/Pad":"Pad"}],Game:[function(e,t,o){"use strict";cc._RF.push(t,"af369eKsM9Cn4vz3KUTDwcJ","Game"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("./EventManager"),i=e("./EventName"),r=e("../Const"),a=e("../Utils/HashMap"),l=function(){function e(){this.CurrentReward=null,this.RewardArray=null,this.TopNode=null,this.FontRoot=null,this.score=0,this.bingoScore={},this.overBingoTimes=new a.HashMap,this.numberRandomPool=[],this.currentCardPool=new a.HashMap,this.skillUseCount=0,this.streak=0,this.maxStreak=0,this.cardAllBingoCount=new a.HashMap,this.highLightCardCount=new a.HashMap,this.goldSelectValue=0,this.currentSkillPool=[],this.skillUsedRecord=[],this.totalOverBingoTimes=0,this.totalHighLightCount=0,this.cardIndex=0,this.skillGuide={},this.superWrongCount=0,this.superHighLightCount=0,this.bingoCache=new a.HashMap,this.toolPercent=0,this.gameTime=0,this.ispause=!1,this.cardNumber=0,this.isStart=!1,this.isOver=!1,this.isCheckScore=!1,this.isToolFull=!1}return Object.defineProperty(e,"inst",{get:function(){return this.ins?this.ins:this.ins=new e},enumerable:!0,configurable:!0}),e.prototype.start=function(){this.isStart=!0,this.isOver=!1,this.isCheckScore=!1},e.prototype.checkScore=function(){this.isCheckScore},e.prototype.superStart=function(){this.superHighLightCount=0,this.superWrongCount=0},e.prototype.pause=function(){console.log(" game --- pause "),this.ispause=!0},e.prototype.resume=function(){console.log(" game --- resume "),this.ispause=!1},e.prototype.getAllBingoCardCount=function(){return this.cardAllBingoCount.keys.length},e.prototype.addAllBingoCardCount=function(e){this.cardAllBingoCount.add(e,1),console.log(" card complete bingo:",this.cardAllBingoCount.keys.length," , extra score:",r.Score.AllBingo),this.addScore(r.ScoreType.AllBingo,r.Score.AllBingo,1)},e.prototype.getNextPoint=function(){return window.chichihaoshuaihahaha?this.getNextCurrentCardPoint(this.cardIndex,!1):this.numberRandomPool.length>0?this.numberRandomPool.pop():(console.log("  over type pool clear !!"),n.gEventMgr.emit(i.GlobalEvent.GAME_OVER,r.OverType.PoolClear),0)},e.prototype.setCurClickMode=function(e){this.curClickMode!=e&&(this.curClickMode=e,n.gEventMgr.emit(i.GlobalEvent.CHANGE_GAME_MODE))},e.prototype.getCurMode=function(){return this.curClickMode},e.prototype.getScore=function(){return this.score},e.prototype.addScore=function(e,t,o,r){if(t>0?this.addStreak():this.clearStreak(),this.score+t<0&&(t=-this.score),0==t)return console.log(" play effect oop"),void n.gEventMgr.emit(i.GlobalEvent.PLAY_EFFECT,"oop");t<0&&this.clearToolPercent(),this.score+=t,this.score=Math.max(0,this.score),this.addBingoScore(e,t),n.gEventMgr.emit(i.GlobalEvent.ADD_SCORE,e,t,o,r)},e.prototype.addStreak=function(){this.streak++,this.maxStreak++},e.prototype.clearStreak=function(){this.streak=0},e.prototype.getCardNumber=function(){return this.cardNumber},e.prototype.addToolPercent=function(e){"number"==typeof e?o.Game.isToolFull&&e>0?console.log(" tool full:",this.toolPercent,", add:",e):(this.toolPercent+=e,console.log(" tool percent:",this.toolPercent,", add:",e),n.gEventMgr.emit(i.GlobalEvent.UPDATE_TOOL_PERCENT)):console.error(" tool percent is not a number !")},e.prototype.clearToolPercent=function(){this.toolPercent=0,n.gEventMgr.emit(i.GlobalEvent.UPDATE_TOOL_PERCENT)},e.prototype.getToolPercent=function(){return this.toolPercent},e.prototype.pushBingoCache=function(e,t){this.bingoCache.has(e)?this.bingoCache.get(e).push(t):this.bingoCache.add(e,[t])},e.prototype.popBingoCache=function(e){if(this.bingoCache.has(e)){var t=this.bingoCache.get(e).pop();return this.bingoCache.get(e).length<=0&&this.bingoCache.remove(e),t}return null},e.prototype.canBingo=function(e){return this.bingoCache.has(e)&&this.bingoCache.get(e).length>0},e.prototype.addCurrentCardValue=function(e,t){this.currentCardPool.has(e)?this.currentCardPool.get(e).push(t):this.currentCardPool.add(e,[t])},e.prototype.getCurrentCardValue=function(){return this.currentCardPool},e.prototype.getCurrentPageValues=function(e){return this.currentCardPool.has(e)?this.currentCardPool.get(e).concat():[]},e.prototype.delCurrentCardValue=function(e,t){if(this.currentCardPool.has(e)){var o=this.currentCardPool.get(e).indexOf(t);console.log(" del current card :",e," , val:",t,", index:",o),o>=0&&(this.currentCardPool.get(e).splice(o,1),console.log(" del card val:",this.currentCardPool.get(e).length),this.currentCardPool.get(e).length<=0&&this.currentCardPool.remove(e))}},e.prototype.getNextCurrentCardPoint=function(e,t,o){if(void 0===t&&(t=!1),void 0===o&&(o=!0),!this.currentCardPool.has(e))return 0;if(this.currentCardPool.length>0){var n=0;if(t){var i=Math.floor(CMath.getRandom(0,this.currentCardPool.get(e).length));n=this.currentCardPool.get(e)[i],o&&this.currentCardPool.get(e).splice(i,1)}else if(o)n=this.currentCardPool.get(e).pop();else{var r=this.currentCardPool.get(e).length-1;n=this.currentCardPool.get(e)[r]}return this.currentCardPool.get(e).length<=0&&this.currentCardPool.remove(e),n}return 0},e.prototype.getOverBingoTimes=function(e){return this.overBingoTimes.get(e)},e.prototype.getTotalBingoTimes=function(){return this.totalOverBingoTimes},e.prototype.addHighLightCard=function(e){this.highLightCardCount.has(e)||this.highLightCardCount.add(e,0),this.highLightCardCount.add(e,this.highLightCardCount.get(e)+1),this.curClickMode==r.SkillType.Super&&this.highLightCardCount.get(e)>=25&&n.gEventMgr.emit(i.GlobalEvent.SUPER_END_COMPLETE),this.totalHighLightCount++,console.log("--------\u5361\u7247-",e,"- \u70b9\u4eae:",this.highLightCardCount.get(e)," \u5f20"," , \u603b\u5171\u70b9\u4eae:",this.totalHighLightCount)},e.prototype.addOverBingoTimes=function(e){this.overBingoTimes.has(e)||this.overBingoTimes.add(e,0),this.totalOverBingoTimes++,this.overBingoTimes.add(e,this.overBingoTimes.get(e)+1),console.log("--------\u5361\u7247-",e,"- \u53e0\u52a0bingo:",this.overBingoTimes.get(e)," \u6b21"," , \u603b\u5171\u53e0\u52a0bingo:",this.totalOverBingoTimes),this.overBingoTimes.get(e)>=39&&(console.error(" card:",e," has all bingo!!"),this.addAllBingoCardCount(e))},e.prototype.checkIsComplete=function(){this.cardAllBingoCount.keys.length>=this.cardNumber&&(console.log(this.cardNumber," all cards has all complete bingo! \u725b\u6279\u725b\u6279:",this.bingoScore[r.ScoreType[r.ScoreType.OverBingoScore]]),n.gEventMgr.emit(i.GlobalEvent.GAME_OVER,r.OverType.AllBingo))},e.prototype.checkIsFull=function(e){return this.highLightCardCount.get(e)&&this.highLightCardCount.get(e)>=25},e.prototype.clearSkillUseCount=function(){this.skillUseCount=0},e.prototype.getSkillUsePercent=function(){return this.skillUseCount/r.TotalSkillCount},e.prototype.getCurrentSkillUseCount=function(){return this.skillUseCount},e.prototype.initSkillPool=function(e){for(var t=[r.SkillType.Star,r.SkillType.Gold,r.SkillType.Time],o=0;o<e;o++){var n,i=t.concat();if((this.skillUsedRecord[this.skillUsedRecord.length-1]==r.SkillType.Time&&0==o||o>0&&this.currentSkillPool[o-1]==r.SkillType.Time)&&i.splice(2,1),this.skillUsedRecord.length>=2&&this.skillUsedRecord[this.skillUsedRecord.length-1]==this.skillUsedRecord[this.skillUsedRecord.length-2])(n=i.indexOf(this.skillUsedRecord[this.skillUsedRecord.length-1]))>=0&&i.splice(n,1);if(o>2)if(this.currentSkillPool[o-1]==this.currentSkillPool[o-2])(n=i.indexOf(this.currentSkillPool[o-1]))>=0&&i.splice(n,1);i.length<=0&&(console.warn(" random skill empty!!"),i=t.concat()),this.currentSkillPool.push(i[Math.floor(CMath.getRandom(0,i.length))])}for(var a=[],l=0,s=this.currentSkillPool;l<s.length;l++){var c=s[l];a.push(r.SkillType[c])}console.log(" --------------------------- skill pool init ------------------------"),console.log(a)},e.prototype.useSkill=function(e){this.skillUsedRecord.push(e),this.skillUseCount>=r.TotalSkillCount||(this.skillUseCount+=1)},e.prototype.getSkill=function(){return this.currentSkillPool.length<=0&&this.initSkillPool(10),this.currentSkillPool.pop()},e.prototype.prepare=function(){this.score=0,this.gameTime=r.GameTime,this.streak=0,this.maxStreak=0,this.curClickMode=r.SkillType.Normal,this.overBingoTimes.clear(),this.totalOverBingoTimes=0,this.totalHighLightCount=0,this.highLightCardCount.clear(),this.toolPercent=0,this.bingoScore={},this.bingoCache.clear(),this.currentCardPool.clear(),this.currentSkillPool=[],this.skillUsedRecord=[],this.skillUseCount=0,this.ispause=!1,this.isOver=!1,this.isCheckScore=!1,this.cardAllBingoCount.clear(),this.numberRandomPool.length=r.TargetRange.End-r.TargetRange.Start+1;for(var e=[],t=0;t<this.numberRandomPool.length;t++)e.push(t);for(t=r.TargetRange.Start;t<=r.TargetRange.End;t++){var o=Math.floor(CMath.getRandom(0,e.length));this.numberRandomPool[e[o]]=t,e.splice(o,1)}console.log(" ------------------ \u968f\u673a\u6c60 --------------------"),console.log(this.numberRandomPool),this.cardNumber=Math.floor(CMath.getRandom(r.CardNumber.Min,r.CardNumber.Max)),console.log(" \u5361\u7247\u6570\u91cf:",this.cardNumber);for(t=0;t<5;t++)this.Theme=r.ThemePool[Math.floor(CMath.getRandom(0,r.ThemePool.length))];console.log("\u6e38\u620f\u4e3b\u9898:",r.Theme[this.Theme]),this.initSkillPool(10)},e.prototype.addGameTime=function(e){this.gameTime+=e,this.gameTime<=0&&(this.gameTime=0,n.gEventMgr.emit(i.GlobalEvent.GAME_OVER,r.OverType.TimeUp))},e.prototype.getGameTime=function(){return this.gameTime},e.prototype.addBingoScore=function(e,t){var o=r.ScoreType[e];switch(this.bingoScore[o]||(this.bingoScore[o]=0),this.bingoScore[o]+=t,this.addToolPercent(r.ToolPercent[o]),this.bingoScore[r.ScoreType[r.ScoreType.TotalScore]]||(this.bingoScore[r.ScoreType[r.ScoreType.TotalScore]]=0),this.bingoScore[r.ScoreType[r.ScoreType.TotalScore]]+=t,e){case r.ScoreType.Gold:case r.ScoreType.Star:case r.ScoreType.Mouse:case r.ScoreType.Perfect:case r.ScoreType.Nice:case r.ScoreType.Great:var n=r.ScoreCountType[r.ScoreCountType.SpeedBonusCount],i=r.ScoreCountType[r.ScoreCountType.CorrectCount],a=r.ScoreType[r.ScoreType.CorrectScore],l=r.ScoreType[r.ScoreType.SpeedScore];this.bingoScore[i]||(this.bingoScore[i]=0),this.bingoScore[i]++,this.bingoScore[a]||(this.bingoScore[a]=0),this.bingoScore[a]+=r.Score.Normal;var s=t-r.Score.Normal;s>0?(this.bingoScore[n]||(this.bingoScore[n]=0),this.bingoScore[n]++,this.bingoScore[l]||(this.bingoScore[l]=0),this.bingoScore[l]+=s):console.log(" special should not smaller than normal score:",t,", type:",a);break;case r.ScoreType.Oops:var c=r.ScoreCountType[r.ScoreCountType.OopCount],u=r.ScoreType[r.ScoreType.OopScore];this.bingoScore[u]||(this.bingoScore[u]=0),this.bingoScore[u]+=t,this.bingoScore[c]||(this.bingoScore[c]=0),this.bingoScore[c]++;break;case r.ScoreType.Bingo:var p=r.ScoreType[r.ScoreType.BingoScore],h=r.ScoreCountType[r.ScoreCountType.BingoCount];this.bingoScore[p]||(this.bingoScore[p]=0),this.bingoScore[p]+=t,this.bingoScore[h]||(this.bingoScore[h]=0),this.bingoScore[h]++;break;case r.ScoreType.AllBingo:var d=r.ScoreType[r.ScoreType.AllBingoScore],g=r.ScoreCountType[r.ScoreCountType.AllBingoCount];this.bingoScore[d]||(this.bingoScore[d]=0),this.bingoScore[d]+=t,this.bingoScore[g]||(this.bingoScore[g]=0),this.bingoScore[g]++;break;case r.ScoreType.OverBingo:var m=r.ScoreType[r.ScoreType.OverBingoScore],f=r.ScoreCountType[r.ScoreCountType.OverBingoCount];this.bingoScore[m]||(this.bingoScore[m]=0),this.bingoScore[m]+=t,this.bingoScore[f]||(this.bingoScore[f]=0),this.bingoScore[f]++;break;case r.ScoreType.Normal:var v=r.ScoreType[r.ScoreType.CorrectScore],y=r.ScoreCountType[r.ScoreCountType.CorrectCount];this.bingoScore[v]||(this.bingoScore[v]=0),this.bingoScore[v]+=t,this.bingoScore[y]||(this.bingoScore[y]=0),this.bingoScore[y]++}},e.prototype.getBingoScore=function(){return this.bingoScore},e.prototype.isPause=function(){return this.ispause},e}();o.Game=l.inst,cc._RF.pop()},{"../Const":"Const","../Utils/HashMap":"HashMap","./EventManager":"EventManager","./EventName":"EventName"}],GoldSkillLayer:[function(e,t,o){"use strict";cc._RF.push(t,"5c379TpPltKe7icSxr7Juma","GoldSkillLayer"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("./Point"),i=e("./Controller/Game"),r=e("./Const"),a=e("./Controller/EventManager"),l=e("./Controller/EventName"),s=cc._decorator,c=s.ccclass,u=(s.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.selectTime=r.GoldSkillTimeLimit.Select,t.clickTime=r.GoldSkillTimeLimit.Click,t}return __extends(t,e),Object.defineProperty(t.prototype,"SelectLayer",{get:function(){return this.node.getChildByName("Select")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"SelectTimeBar",{get:function(){return this.SelectLayer.getChildByName("SelectTimeBar").getComponent(cc.ProgressBar)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"SelectTimeLabel",{get:function(){return this.SelectTimeBar.node.getChildByName("TimeLabel").getComponent(cc.Label)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ClickTimeLabel",{get:function(){return this.ClickTimeBar.node.getChildByName("TimeLabel").getComponent(cc.Label)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"SelectPointRoot",{get:function(){return this.SelectLayer.getChildByName("SelectRoot")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"CurrentPoint",{get:function(){return this.node.getChildByName("CurrentPoint").getComponent(n.default)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Desk",{get:function(){return this.node.getChildByName("Desk")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ClickTimeBar",{get:function(){return this.node.getChildByName("ClickTimeBar").getComponent(cc.ProgressBar)},enumerable:!0,configurable:!0}),t.prototype.onLoad=function(){a.gEventMgr.on(l.GlobalEvent.GOLD_POINT_SELECT_DONE,this.selectDone,this)},t.prototype.show=function(e){a.gEventMgr.emit(l.GlobalEvent.PLAY_EFFECT,"skill"),this.pageIndex=e,this.node.active=!0,this.Desk.active=!1,this.SelectLayer.active=!0,this.CurrentPoint.node.active=!1,this.selectTime=r.GoldSkillTimeLimit.Select,this.clickTime=r.GoldSkillTimeLimit.Click;var t=i.Game.getCurrentPageValues(0).concat(i.Game.getCurrentPageValues(1));if(this.SelectPointRoot.getComponent(cc.Layout).enabled=t.length>=4,t.length<4)switch(t.length){case 1:this.SelectPointRoot.x=231,this.SelectPointRoot.y=-75,this.SelectPointRoot.children[2].x=-235;break;case 2:this.SelectPointRoot.x=0,this.SelectPointRoot.y=-75,this.SelectPointRoot.children[2].x=-235;break;case 3:this.SelectPointRoot.x=0,this.SelectPointRoot.y=177,this.SelectPointRoot.children[2].x=0}else this.SelectPointRoot.x=0,this.SelectPointRoot.y=177,this.SelectPointRoot.children[2].x=-235;for(var o=0,s=this.SelectPointRoot.children;o<s.length;o++){var c=s[o],u=c.getComponent(n.default);if(u&&t.length>0){var p=Math.floor(CMath.getRandom(0,t.length));u.setValue(t[p]),t.splice(p,1),c.active=!0}else c.active=!1}this.SelectTimeBar.progress=1,this.SelectTimeLabel.string=Math.ceil(this.selectTime).toString()},t.prototype.selectDone=function(){if(i.Game.goldSelectValue<=0)return this.node.active=!1,void a.gEventMgr.emit(l.GlobalEvent.SKILL_DONE);this.Desk.active=!0,this.SelectLayer.active=!1,this.CurrentPoint.node.active=!0,this.CurrentPoint.setValue(i.Game.goldSelectValue),this.ClickTimeLabel.string=Math.ceil(this.selectTime).toString(),this.ClickTimeBar.progress=1},t.prototype.hide=function(){this.node.active=!1},t.prototype.update=function(e){this.node.active&&(this.SelectLayer.active?(this.selectTime-=e,this.SelectTimeBar.progress=this.selectTime/r.GoldSkillTimeLimit.Select,this.SelectTimeLabel.string=Math.ceil(this.selectTime).toString(),this.selectTime<=0&&(this.node.active=!1,a.gEventMgr.emit(l.GlobalEvent.SKILL_DONE))):(this.clickTime-=e,this.ClickTimeBar.progress=this.clickTime/r.GoldSkillTimeLimit.Click,this.ClickTimeLabel.string=Math.ceil(this.clickTime).toString(),this.clickTime<=0&&(this.node.active=!1,a.gEventMgr.emit(l.GlobalEvent.SKILL_DONE))))},t=__decorate([c],t)}(cc.Component));o.default=u,cc._RF.pop()},{"./Const":"Const","./Controller/EventManager":"EventManager","./Controller/EventName":"EventName","./Controller/Game":"Game","./Point":"Point"}],Guide:[function(e,t,o){"use strict";cc._RF.push(t,"51171YOST5DI7oenF2960D9","Guide"),Object.defineProperty(o,"__esModule",{value:!0});var n,i=e("./Controller/Game"),r=e("./Const"),a=cc._decorator,l=a.ccclass,s=a.property;(function(e){e[e.Guide=0]="Guide",e[e.Help=1]="Help"})(n=o.GuideType||(o.GuideType={}));var c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.ButtonAtlas=null,t.Next=null,t.Forward=null,t.GuideContent=null,t.HelpContent=null,t.GuideView=null,t.HelpView=null,t.callback=null,t}return __extends(t,e),Object.defineProperty(t.prototype,"SkillGuide",{get:function(){return this.node.getChildByName("SkillGuide")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Button",{get:function(){return this.node.getChildByName("Button")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"StarGuide",{get:function(){return this.SkillGuide.getChildByName("StarGuide")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"GoldGuide",{get:function(){return this.SkillGuide.getChildByName("GoldGuide")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"MouseGuide",{get:function(){return this.SkillGuide.getChildByName("MouseGuide")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"StarOJBK",{get:function(){return this.StarGuide.getChildByName("OJBK")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"GoldOJBK",{get:function(){return this.GoldGuide.getChildByName("OJBK")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"MouseOJBK",{get:function(){return this.MouseGuide.getChildByName("OJBK")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Block",{get:function(){return this.node.getChildByName("Block")},enumerable:!0,configurable:!0}),t.prototype.onLoad=function(){var e=this;this.Next.node.on(cc.Node.EventType.TOUCH_END,this.nextPage,this),this.Forward.node.on(cc.Node.EventType.TOUCH_END,this.forwardPage,this),this.GuideView.node.on("scroll-ended",this.updateButton,this),this.HelpView.node.on("scroll-ended",this.updateButton,this),this.StarOJBK.on(cc.Node.EventType.TOUCH_END,this.hide,this),this.GoldOJBK.on(cc.Node.EventType.TOUCH_END,this.hide,this),this.MouseOJBK.on(cc.Node.EventType.TOUCH_END,this.hide,this),this.Block.on(cc.Node.EventType.TOUCH_END,function(){e.HelpView.node.active&&e.hide()},this)},t.prototype.start=function(){},t.prototype.hide=function(){i.Game.getCurMode()==r.SkillType.Normal?i.Game.resume():console.error(" not in normal mode, dont resume"),this.node.active=!1,this.callback&&this.callback()},t.prototype.showStarGuide=function(e){this.node.active=!0,this.SkillGuide.active=!0,this.Button.active=!1,this.HelpView.node.active=!1,this.GuideView.node.active=!1,this.StarGuide.active=!0,this.GoldGuide.active=!1,this.MouseGuide.active=!1,this.callback=e},t.prototype.showGoldGuide=function(e){this.node.active=!0,this.SkillGuide.active=!0,this.Button.active=!1,this.HelpView.node.active=!1,this.GuideView.node.active=!1,this.StarGuide.active=!1,this.GoldGuide.active=!0,this.MouseGuide.active=!1,this.callback=e},t.prototype.showMouseGuide=function(e){this.node.active=!0,this.SkillGuide.active=!0,this.Button.active=!1,this.HelpView.node.active=!1,this.GuideView.node.active=!1,this.StarGuide.active=!1,this.GoldGuide.active=!1,this.MouseGuide.active=!0,this.callback=e},t.prototype.showSkillGuide=function(e,t){switch(e){case r.SkillType.Gold:i.Game.pause(),this.showGoldGuide(t);break;case r.SkillType.Star:i.Game.pause(),this.showStarGuide(t);break;case r.SkillType.Super:i.Game.pause(),this.showMouseGuide(t);break;default:t()}},t.prototype.show=function(e,t){i.Game.pause(),this.guideType=e,e==n.Guide?(this.GuideView.node.active=!0,this.HelpView.node.active=!1,this.curSelectView=this.GuideView):(this.GuideView.node.active=!1,this.HelpView.node.active=!0,this.curSelectView=this.HelpView),console.log(" show guide:",n[e]),this.SkillGuide.active=!1,this.Button.active=!0,this.curSelectView.scrollToPage(0,0),this.node.active=!0,this.callback=t,this.Forward.node.active=!1,this.Next.node.getChildByName("Background").getComponent(cc.Sprite).spriteFrame=this.ButtonAtlas.getSpriteFrame("btn_new"),this.curSelectView.node.setContentSize(this.curSelectView.content.children[this.curSelectView.getCurrentPageIndex()].getContentSize())},t.prototype.nextPage=function(){if(this.curSelectView.getCurrentPageIndex()>=this.curSelectView.content.childrenCount-1)this.hide();else{var e=(this.curSelectView.getCurrentPageIndex()+1)%this.curSelectView.content.childrenCount;this.curSelectView.setCurrentPageIndex(e),this.updateButton()}},t.prototype.forwardPage=function(){if(this.curSelectView.getCurrentPageIndex()<=0);else{var e=(this.curSelectView.getCurrentPageIndex()-1)%this.curSelectView.content.childrenCount;this.curSelectView.setCurrentPageIndex(e),this.updateButton()}},t.prototype.updateButton=function(){this.curSelectView.getCurrentPageIndex()>=this.curSelectView.content.childrenCount-1?this.Next.node.getChildByName("Background").getComponent(cc.Sprite).spriteFrame=this.ButtonAtlas.getSpriteFrame("new_close"):this.Next.node.getChildByName("Background").getComponent(cc.Sprite).spriteFrame=this.ButtonAtlas.getSpriteFrame("btn_new"),this.Forward.node.active=0!=this.curSelectView.getCurrentPageIndex(),this.curSelectView.node.setContentSize(this.curSelectView.content.children[this.curSelectView.getCurrentPageIndex()].getContentSize())},__decorate([s(cc.SpriteAtlas)],t.prototype,"ButtonAtlas",void 0),__decorate([s(cc.Button)],t.prototype,"Next",void 0),__decorate([s(cc.Button)],t.prototype,"Forward",void 0),__decorate([s(cc.Node)],t.prototype,"GuideContent",void 0),__decorate([s(cc.Node)],t.prototype,"HelpContent",void 0),__decorate([s(cc.PageView)],t.prototype,"GuideView",void 0),__decorate([s(cc.PageView)],t.prototype,"HelpView",void 0),t=__decorate([l],t)}(cc.Component);o.default=c,cc._RF.pop()},{"./Const":"Const","./Controller/Game":"Game"}],HashMap:[function(e,t,o){"use strict";cc._RF.push(t,"3fb89I0oSVCL4wes+uFEx94","HashMap"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function e(){this._list=new Array,this.clear()}return e.prototype.getIndexByKey=function(e){for(var t=this._list.length,o=0;o<t;o++){if(this._list[o].key==e)return o}return-1},e.prototype.keyOf=function(e){for(var t=this._list.length,o=0;o<t;o++){var n=this._list[o];if(n.value==e)return n.key}return null},Object.defineProperty(e.prototype,"keys",{get:function(){for(var e=new Array,t=0,o=this._list;t<o.length;t++){var n=o[t];n&&e.push(n.key)}return e},enumerable:!0,configurable:!0}),e.prototype.add=function(e,t){var o={key:e,value:t},n=this.getIndexByKey(e);-1!=n?this._list[n]=o:this._list.push(o)},Object.defineProperty(e.prototype,"values",{get:function(){return this._list},enumerable:!0,configurable:!0}),e.prototype.remove=function(e){var t=this.getIndexByKey(e);if(-1!=t){var o=this._list[t];return this._list.splice(t,1),o}return null},e.prototype.has=function(e){return-1!=this.getIndexByKey(e)},e.prototype.get=function(e){var t=this.getIndexByKey(e);return-1!=t?this._list[t].value:null},Object.defineProperty(e.prototype,"length",{get:function(){return this._list.length},enumerable:!0,configurable:!0}),e.prototype.sort=function(e){this._list.sort(e)},e.prototype.forEachKeyValue=function(e){for(var t=this._list.length,o=0;o<t;o++){e(this._list[o])}},e.prototype.forEach=function(e){for(var t=this._list.length,o=0;o<t;o++){var n=this._list[o];e(n.key,n.value)}},e.prototype.clear=function(){this._list=[]},e}();o.HashMap=n,cc._RF.pop()},{}],LoadLayer:[function(e,t,o){"use strict";cc._RF.push(t,"1bfe9wchfRNVK/geqXwo8+E","LoadLayer"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("./Shader/TransitionSprite"),i=e("./Controller/Game"),r=e("./Controller/EventManager"),a=e("./Controller/EventName"),l=e("./Const"),s=cc._decorator,c=s.ccclass,u=(s.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.time=5,t.isStart=!1,t.startTimer=!1,t}return __extends(t,e),Object.defineProperty(t.prototype,"StartButton",{get:function(){return this.node.getChildByName("BeginButton")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Background",{get:function(){return this.node.getChildByName("Background")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Position",{get:function(){return this.node.getChildByName("Position")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"StartProgress",{get:function(){return this.StartButton.getChildByName("ProgressBar")},enumerable:!0,configurable:!0}),t.prototype.onLoad=function(){this.StartButton.opacity=255,this.StartButton.scale=0},t.prototype.enableBlock=function(e){this.node.getComponent(cc.BlockInputEvents)&&(this.node.getComponent(cc.BlockInputEvents).enabled=e)},t.prototype.ready=function(){var e=this;console.log(" loading layer ready"),this.isStart=!1,this.startTimer=!1,this.enableBlock(!0),this.StartProgress.width=710,this.Position.active=!0;for(var t=0,o=this.Background.children;t<o.length;t++){(s=o[t]).active=s.name==l.Theme[i.Game.Theme],s.getComponent(n.default)&&(s.getComponent(n.default).enabled=s.active,s.active&&(this.transition=s.getComponent(n.default)))}for(var r=0,a=this.Position.children;r<a.length;r++){var s;(s=a[r]).active=s.name==l.Theme[i.Game.Theme]}this.StartButton.runAction(cc.sequence(cc.scaleTo(.15,1.2),cc.scaleTo(.1,1),cc.callFunc(function(){e.startTimer=!0,e.StartButton.on(cc.Node.EventType.TOUCH_START,function(){e.StartProgress.active=!1},e),e.StartButton.on(cc.Node.EventType.TOUCH_END,e.startGame,e)})))},t.prototype.startGame=function(){this.isStart||(this.isStart=!0,this.StartButton.targetOff(this),this.unscheduleAllCallbacks(),this.Position.active=!1,this.StartButton.runAction(cc.fadeOut(.2)),this.StartButton.active=!1,this.transition&&this.transition.enabled?this.transition.isStart=!0:(this.node.active=!1,r.gEventMgr.emit(a.GlobalEvent.GAME_START)))},t.prototype.update=function(e){this.startTimer&&(this.time-=e,this.time=Math.max(0,this.time),this.StartProgress.width=710*this.time/3,this.time<=0&&!this.isStart&&this.startGame())},t=__decorate([c],t)}(cc.Component));o.default=u,cc._RF.pop()},{"./Const":"Const","./Controller/EventManager":"EventManager","./Controller/EventName":"EventName","./Controller/Game":"Game","./Shader/TransitionSprite":"TransitionSprite"}],LogHandler:[function(e,t,o){"use strict";cc._RF.push(t,"8104dX5fRlIPb4q1d60qPIM","LogHandler"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function e(){if(this.logFunc=console.log,this.logMsg=null,this.frameTimes=0,this.now=0,this.Frame=20,this.totalFrames=0,this.startTime=0,window.addEventListener)for(var t=0,o=e.LISTENNING_EVENTS;t<o.length;t++){var n=o[t],i="trigger"+n.charAt(0).toLocaleUpperCase()+n.substring(1);this[i]&&"function"==typeof this[i]&&window.addEventListener(n,this[i].bind(this))}}return Object.defineProperty(e,"inst",{get:function(){return this.ins?this.ins:this.ins=new e},enumerable:!0,configurable:!0}),e.prototype.dumpFrameInfo=function(){var e=(Date.now()-this.startTime)/1e3,t=e/this.totalFrames;this.log(" total frames:",this.totalFrames," ,total cost time:",e+"s"," , per frame cost time ave:"+t+"s")},e.prototype.log=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.addLog.apply(this,e),this.sendLog()},e.prototype.initLog=function(t){var o=this;cc.director.once(cc.Director.EVENT_AFTER_SCENE_LAUNCH,function(){o.frameTimes=0,o.now=Date.now(),o.startTime=Date.now()},this),cc.director.on(cc.Director.EVENT_AFTER_DRAW,function(){o.frameTimes++,o.totalFrames++,o.frameTimes>=o.Frame&&(o.frameTimes=0,o.now=Date.now())},this),CELER_X?(this.logFunc=t,console.error=function(){for(var t=[],o=0;o<arguments.length;o++)t[o]=arguments[o];e.ins.log("[ERROR]",t)},console.warn=function(){for(var t,o=[],n=0;n<arguments.length;n++)o[n]=arguments[n];(t=e.ins).log.apply(t,["[WARN]"].concat(o))},console.log=function(){for(var t,o=[],n=0;n<arguments.length;n++)o[n]=arguments[n];(t=e.ins).log.apply(t,["[INFO]"].concat(o))}):this.logFunc=console.log},e.prototype.formatLogArguments=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var o="",n=0;n<arguments.length;n++){var i=typeof arguments[n];"string"==i||"number"==i?o+=" "+arguments[n]:"object"==i?o+=" "+JSON.stringify(arguments[n]):"boolean"==i&&arguments[n].toString&&(o+=arguments[n].toString())}return o},e.prototype.addLog=function(){for(var t=[],o=0;o<arguments.length;o++)t[o]=arguments[o];null==this.logMsg&&(this.logMsg={});var n=this.formatLogArguments.apply(this,t),i=this.getFullTime(new Date);this.logMsg[i]=e.VERSION+n},e.prototype.getFullTime=function(e){var t="";t+=e.getFullYear();var o=e.getMonth();t+="-"+(o>=10?o:"0"+o);var n=e.getDate();t+="-"+(n>=10?n:"0"+n);var i=e.getHours();t+="  "+(i>=10?i:"0"+i);var r=e.getMinutes();t+=":"+(r>=10?r:"0"+r);var a=e.getSeconds();return t+=":"+(a>=10?a:"0"+a)},e.prototype.sendLog=function(){this.logFunc&&null!=this.logMsg&&(this.logFunc(JSON.stringify(this.logMsg)),this.logMsg=null)},e.prototype.triggerClose=function(e){this.addLog("triggerClose"),this.sendLog()},e.prototype.triggerLoad=function(e){this.addLog("triggerLoad"),this.sendLog()},e.prototype.triggerUnload=function(e){this.addLog("triggerUnload"),this.sendLog()},e.prototype.triggerOnunload=function(e){this.addLog("triggerUnload"),this.sendLog()},e.prototype.triggerError=function(e){this.addLog("triggerError"),this.addLog(e.message),this.sendLog()},e.prototype.triggerFocus=function(e){this.addLog("triggerFocus"),this.sendLog()},e.prototype.triggerBlur=function(e){this.addLog("triggerBlur"),this.sendLog()},e.prototype.triggerAbort=function(e){this.addLog("triggerAbort"),this.sendLog()},e.prototype.triggerSuspend=function(e){this.addLog("triggerSuspend"),this.sendLog()},e.prototype.beforeunload=function(e){this.addLog("beforeunload"),this.sendLog()},e.VERSION="Daub Cash version 50  : ",e.LISTENNING_EVENTS=["error"],e}();o.LogHandler=n,cc._RF.pop()},{}],Pad:[function(e,t,o){"use strict";cc._RF.push(t,"482dbcxNt1HaKHvMljr3XXT","Pad"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,i=n.ccclass,r=(n.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onLoad=function(){},t.prototype.start=function(){},t=__decorate([i],t)}(cc.Component));o.default=r,cc._RF.pop()},{}],PauseLayer:[function(e,t,o){"use strict";cc._RF.push(t,"c98ebyBcvpGl54TB3ikQEWN","PauseLayer"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("./Controller/Game"),i=cc._decorator,r=i.ccclass,a=(i.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.closeCallback=null,t.openHelp=null,t.MaskWidth=440,t}return __extends(t,e),Object.defineProperty(t.prototype,"ResumeButton",{get:function(){return this.node.getChildByName("Resume")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"VolumeSlider",{get:function(){return this.node.getChildByName("VolumeSlider").getComponent(cc.Slider)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"HelpButton",{get:function(){return this.node.getChildByName("HelpButton")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Mask",{get:function(){return this.VolumeSlider.node.getChildByName("Mask")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"MaskEffect",{get:function(){return this.VolumeEffectSlider.node.getChildByName("Mask")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"VolumeEffectSlider",{get:function(){return this.node.getChildByName("VolumeEffectSlider").getComponent(cc.Slider)},enumerable:!0,configurable:!0}),t.prototype.onLoad=function(){var e=this;this.ResumeButton.on(cc.Node.EventType.TOUCH_END,function(){setTimeout(e.hide.bind(e),0)},this),this.HelpButton.on(cc.Node.EventType.TOUCH_END,function(){e.openHelp&&e.openHelp()},this),this.VolumeSlider.node.on("slide",this.onSlider,this),this.VolumeEffectSlider.node.on("slide",this.onEffectSlider,this)},t.prototype.onSlider=function(){cc.audioEngine.setMusicVolume(this.VolumeSlider.progress),this.Mask.width=this.VolumeSlider.progress*this.MaskWidth},t.prototype.onEffectSlider=function(){cc.audioEngine.setEffectsVolume(this.VolumeEffectSlider.progress),this.MaskEffect.width=this.VolumeEffectSlider.progress*this.MaskWidth},t.prototype.start=function(){},t.prototype.show=function(e,t){this.VolumeSlider.progress=cc.audioEngine.getMusicVolume(),this.VolumeEffectSlider.progress=cc.audioEngine.getEffectsVolume(),this.Mask.width=this.VolumeSlider.progress*this.MaskWidth,this.MaskEffect.width=this.VolumeEffectSlider.progress*this.MaskWidth,this.closeCallback=t,this.openHelp=e,this.node.active=!0,n.Game.pause()},t.prototype.hide=function(){this.node.active=!1,this.closeCallback&&(this.closeCallback(),this.closeCallback=null)},t=__decorate([r],t)}(cc.Component));o.default=a,cc._RF.pop()},{"./Controller/Game":"Game"}],PixelSprite:[function(e,t,o){"use strict";cc._RF.push(t,"8b899j0GphFWKCxXmly3G1I","PixelSprite"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("./ShaderManager"),i=e("../Controller/EventManager"),r=e("../Controller/EventName"),a=cc._decorator,l=a.ccclass,s=a.property,c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.material=new n.PixelStyleMaterial,t.spineMaterial=new n.PixelSpineMaterial,t.oldMaterial=null,t.oldSpineMaterial=null,t.sampleCount=800,t}return __extends(t,e),t.prototype.onLoad=function(){var e=this;i.gEventMgr.on(r.GlobalEvent.PXIEL_ENABLE,function(){PXIEL?e.init():e.reset()},this),PXIEL?this.init():this.reset()},t.prototype.init=function(){if(PXIEL){var e=this.getComponent(cc.Sprite),t=this.getComponent(sp.Skeleton),o=this.getComponent(cc.Label);this.material.setDefine("disableColor",!1),this.spineMaterial.setDefine("disableColor",!1),this.material.setProperty("sampleCount",this.sampleCount),this.spineMaterial.setProperty("sampleCount",this.sampleCount),e&&(this.oldMaterial=e._spriteMaterial,e._spriteMaterial=this.material,e._activateMaterial()),o&&(this.oldMaterial=o._material,o._frame&&o._frame._texture&&(this.material.texture=o._frame._texture),o._material=this.material,o._activateMaterial()),t&&(this.oldSpineMaterial=t._material,t._updateMaterial(this.spineMaterial))}},t.prototype.reset=function(){var e=this.getComponent(cc.Sprite),t=this.getComponent(sp.Skeleton),o=this.getComponent(cc.Label);e&&this.oldMaterial&&(e._spriteMaterial=this.oldMaterial,e._activateMaterial()),o&&this.oldMaterial&&(o._material=this.oldMaterial,o._activateMaterial()),t&&this.oldSpineMaterial&&t._updateMaterial(this.oldSpineMaterial)},__decorate([s(cc.Integer)],t.prototype,"sampleCount",void 0),t=__decorate([l],t)}(cc.Component);o.default=c,cc._RF.pop()},{"../Controller/EventManager":"EventManager","../Controller/EventName":"EventName","./ShaderManager":"ShaderManager"}],PointWave:[function(e,t,o){"use strict";cc._RF.push(t,"b9addOXGQ9FuICubyoJJwKl","PointWave"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("./ShaderManager"),i=cc._decorator,r=i.ccclass,a=(i.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.material=new n.PointWaveMaterial,t.time=0,t.waveRange=.01,t}return __extends(t,e),t.prototype.onLoad=function(){var e=this;console.log(this.node);var t=this.getComponent(cc.Sprite);t&&(t._spriteMaterial=this.material,t._activateMaterial(),this.material.setProperty("range",.01),this.node.on(cc.Node.EventType.TOUCH_END,function(t){var o=e.node.convertToNodeSpace(t.getLocation());o.x/=e.node.getContentSize().width,o.y/=e.node.getContentSize().height,o.y=1-o.y,e.time=0,e.waveRange=.01,e.material.setProperty("time",e.time),e.material.setProperty("range",e.waveRange),e.material.setProperty("point",o)},this))},t.prototype.start=function(){},t.prototype.update=function(e){this.material.setProperty("range",this.waveRange),this.material.setProperty("time",this.time),this.material.setProperty("deltaTime",e),this.time+=e/2,this.waveRange>.1&&(this.waveRange=.1)},t=__decorate([r],t)}(cc.Component));o.default=a,cc._RF.pop()},{"./ShaderManager":"ShaderManager"}],Point:[function(e,t,o){"use strict";cc._RF.push(t,"9e72aDeGvxJjI3bwYHxFww7","Point"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("./Controller/Game"),i=e("./Const"),r=e("./Controller/EventManager"),a=e("./Controller/EventName"),l=e("./Controller/CelerSDK"),s=cc._decorator,c=s.ccclass,u=(s.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.totalTime=0,t.currentTime=0,t.value=0,t}return __extends(t,e),Object.defineProperty(t.prototype,"TimeBar",{get:function(){return this.node.getChildByName("TimeBar").getComponent(cc.ProgressBar)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Icon",{get:function(){return this.node.getChildByName("Icon")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"NumberLabel",{get:function(){return this.node.getChildByName("Label").getChildByName("Number").getComponent(cc.Label)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"CurrentTime",{get:function(){return this.currentTime},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"TotalTime",{get:function(){return this.totalTime},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"StringValue",{get:function(){return this.word+"."+this.value},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"TimeLeftPercent",{get:function(){return this.totalTime<=0?0:this.currentTime/this.totalTime},enumerable:!0,configurable:!0}),t.prototype.onSetParent=function(e){var t=this;e&&(this.TimeBar.node.active="CurrentPoint"==e.name,this.TimeBar.node.active?(n.Game.getGameTime()>=i.TimeLimit?this.totalTime=(window.chichihaoshuaihahaha,i.RewardTime.One):this.totalTime=(window.chichihaoshuaihahaha,i.RewardTime.Two),this.currentTime=this.totalTime,r.gEventMgr.emit(a.GlobalEvent.PLAY_EFFECT,i.CardWord[this.word],!1,function(){r.gEventMgr.emit(a.GlobalEvent.PLAY_EFFECT,t.value)})):(this.totalTime=0,this.currentTime=0))},Object.defineProperty(t.prototype,"isGoldSelectMode",{get:function(){return"SelectRoot"==this.node.getParent().name},enumerable:!0,configurable:!0}),t.prototype.onLoad=function(){this.node.on(cc.Node.EventType.TOUCH_END,this.onTouch,this)},t.prototype.reuse=function(){this.node._onSetParent=this.onSetParent.bind(this),this.NumberLabel.node.active=!0,this.TimeBar.progress=1,this.TimeBar.node.active=!1,this.node.scale=1,this.node.active=!0,this.setValue(arguments[0][0])},t.prototype.onTouch=function(e){console.log(this.node.parent.name),this.isGoldSelectMode&&(n.Game.goldSelectValue=this.value,r.gEventMgr.emit(a.GlobalEvent.GOLD_POINT_SELECT_DONE))},t.prototype.setValue=function(e){this.value=e;for(var t=i.CardWord.B;t<=i.CardWord.O;t++)if(this.value>=(t-1)*i.CardStep+1&&this.value<=t*i.CardStep){this.word=t;break}this.NumberLabel.string=this.value.toString();for(var o=0,n=this.Icon.children;o<n.length;o++){var r=n[o];r.active=r.name==i.CardWord[this.word]}},t.prototype.unuse=function(){this.node.targetOff(this),this.NumberLabel.node.active=!1,this.node.active=!1},t.prototype.update=function(e){this.TimeBar.node.active&&this.totalTime>0&&!n.Game.isPause()&&n.Game.isStart&&(this.currentTime-=e,this.TimeBar.progress=this.currentTime/this.totalTime,this.TimeBar.node.active=this.currentTime>0,this.currentTime<=0&&this.goToRewardArray())},t.prototype.addTime=function(e){l.CelerSDK.inst.isOnCelerPlatform()||i.RewardTime.One<10&&!window.chichihaoshuaihahaha||(this.currentTime+=e,this.currentTime=Math.max(0,this.currentTime))},t.prototype.goToRewardArray=function(){this.TimeBar.node.active=!1,r.gEventMgr.emit(a.GlobalEvent.ADD_2_NORMAL_REWARD,this.node)},t=__decorate([c],t)}(cc.Component));o.default=u,cc._RF.pop()},{"./Const":"Const","./Controller/CelerSDK":"CelerSDK","./Controller/EventManager":"EventManager","./Controller/EventName":"EventName","./Controller/Game":"Game"}],ResultLayer:[function(e,t,o){"use strict";cc._RF.push(t,"37000IS74xCBIj2O3JKO3wm","ResultLayer"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("./Controller/Game"),i=e("./Controller/CelerSDK"),r=e("./Const"),a=e("./Controller/EventManager"),l=e("./Controller/EventName"),s=cc._decorator,c=s.ccclass,u=s.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.TitleAtlas=null,t.Hource=null,t.showLabel={},t.label={},t.step={},t.curDoneCount=0,t.startUpdate=!1,t}return __extends(t,e),Object.defineProperty(t.prototype,"FlowerAnimation",{get:function(){return this.node.getChildByName("FlowerAnimation").getComponent(cc.Animation)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"SubmitButton",{get:function(){return this.node.getChildByName("SubmitButton").getComponent(cc.Button)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"LabelRoot",{get:function(){return this.node.getChildByName("LabelRoot")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Title",{get:function(){return this.node.getChildByName("Title").getComponent(cc.Sprite)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Background",{get:function(){return this.node.getChildByName("Background")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ResultLight",{get:function(){return this.node.getChildByName("bg_resultlight")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Position",{get:function(){return this.node.getChildByName("Position")},enumerable:!0,configurable:!0}),t.prototype.onLoad=function(){this.SubmitButton.node.on(cc.Node.EventType.TOUCH_END,this.onSubmit,this),this.Hource.setEventListener(this.eventListener.bind(this))},t.prototype.eventListener=function(e,t){switch(t.stringValue){case"light":this.FlowerAnimation.play(),a.gEventMgr.emit(l.GlobalEvent.PLAY_EFFECT,"result_dev"),this.ResultLight.runAction(cc.repeatForever(cc.rotateBy(.01,.5)))}},t.prototype.onSubmit=function(){i.CelerSDK.inst.isOnCelerPlatform()?i.CelerSDK.inst.submitScore(n.Game.getScore()):window.location.reload()},t.prototype.initScoreLabel=function(){var e=n.Game.getBingoScore();e[r.ScoreCountType[r.ScoreCountType.BingoCount]]=e[r.ScoreType[r.ScoreType.BingoScore]]/r.Score.Bingo,e[r.ScoreCountType[r.ScoreCountType.OverBingoCount]]=n.Game.getTotalBingoTimes(),e[r.ScoreCountType[r.ScoreCountType.AllBingoCount]]=n.Game.getAllBingoCardCount(),console.log(" game score:",e),this.showLabel={},this.label={},this.curDoneCount=0,this.startUpdate=!1;for(var t=0,o=this.LabelRoot.children;t<o.length;t++){var i=o[t],a=i.getComponent(cc.Label);a?(i.active=!0,a.string="0",this.showLabel[i.name]=0,this.label[i.name]=e[i.name]||0,this.label[i.name]>0?this.step[i.name]=Math.max(1,Math.floor(this.label[i.name]/100)):this.label[i.name]<0?this.step[i.name]=Math.min(-1,Math.ceil(this.label[i.name]/100)):(this.step[i.name]=0,this.addDoneCount())):(console.error(i.name,"'s component  cc.Label is missiing!"),i.active=!1)}console.log(" init result label :",this.LabelRoot.childrenCount),console.log(this.label),console.log("====== step =========="),console.log(this.step),console.log(" show label"),console.log(this.showLabel),this.startUpdate=!0},t.prototype.show=function(e){if(!this.node.active){a.gEventMgr.emit(l.GlobalEvent.NORMAL_BGM),n.Game.getAllBingoCardCount()>=2?a.gEventMgr.emit(l.GlobalEvent.PLAY_EFFECT,"over_complete"):a.gEventMgr.emit(l.GlobalEvent.PLAY_EFFECT,"over_time_up");for(var t=0,o=this.Background.children;t<o.length;t++){(u=o[t]).active=u.name==r.Theme[n.Game.Theme]}for(var s=0,c=this.Position.children;s<c.length;s++){var u;(u=c[s]).active=u.name==r.Theme[n.Game.Theme]}console.error(" result layer show, matchid:",i.CelerSDK.inst.MatchID,", seed:",i.CelerSDK.inst.MatchRandomSeed),this.SubmitButton.node.scale=0,n.Game.pause(),this.initScoreLabel(),this.Title.spriteFrame=this.TitleAtlas.getSpriteFrame(r.OverFont[r.OverType[e]]),this.node.active=!0}},t.prototype.hide=function(){n.Game.resume(),this.node.active=!1},t.prototype.addDoneCount=function(){var e=this;this.curDoneCount++,console.error("curDone:",this.curDoneCount,", total:",this.LabelRoot.childrenCount),this.curDoneCount>=this.LabelRoot.childrenCount&&(this.startUpdate=!1,this.SubmitButton.node.runAction(cc.sequence(cc.scaleTo(.15,1.2),cc.scaleTo(.1,1),cc.callFunc(function(){e.scheduleOnce(function(){i.CelerSDK.inst.submitScore(n.Game.getScore())},2)}))))},t.prototype.update=function(){if(this.startUpdate)for(var e=0,t=this.LabelRoot.children;e<t.length;e++){var o=t[e],n=o.name;if(o.active&&this.showLabel[n]!=this.label[n]){var i=o.getComponent(cc.Label);i&&(this.label[n]!=this.showLabel[n]&&0!=this.step[n]&&(this.showLabel[n]+=this.step[n]),(this.step[n]>0&&this.showLabel[n]>this.label[n]||this.step[n]<0&&this.showLabel[n]<this.label[n])&&(this.showLabel[n]=this.label[n]),i.string=this.showLabel[n]>0?this.showLabel[n]:"/"+Math.abs(this.showLabel[n]),this.showLabel[n]==this.label[n]&&this.addDoneCount())}}},__decorate([u(cc.SpriteAtlas)],t.prototype,"TitleAtlas",void 0),__decorate([u(sp.Skeleton)],t.prototype,"Hource",void 0),t=__decorate([c],t)}(cc.Component);o.default=p,cc._RF.pop()},{"./Const":"Const","./Controller/CelerSDK":"CelerSDK","./Controller/EventManager":"EventManager","./Controller/EventName":"EventName","./Controller/Game":"Game"}],Score:[function(e,t,o){"use strict";cc._RF.push(t,"145bfRPC9pPLaM0crpB/9nD","Score"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("./Controller/EventManager"),i=e("./Controller/EventName"),r=e("./Const"),a=e("./Controller/Game"),l=cc._decorator,s=l.ccclass,c=(l.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.setParentCallback=null,t}return __extends(t,e),Object.defineProperty(t.prototype,"ScoreFail",{get:function(){return this.node.getChildByName("ScoreFail").getComponent(cc.Label)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ScoreSuccess",{get:function(){return this.node.getChildByName("Score").getComponent(cc.Label)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Text",{get:function(){return this.node.getChildByName("Text").getComponent(cc.Sprite)},enumerable:!0,configurable:!0}),t.prototype.onSetParent=function(e){e&&this.setParentCallback&&this.setParentCallback()},t.prototype.reuse=function(){var e=this;this.node._onSetParent=this.onSetParent.bind(this);var t=arguments[0][0],o=arguments[0][1],l=arguments[0][2],s=arguments[0][3],c=arguments[0][4];this.node.active=!0,this.ScoreFail.node.active=!0,this.ScoreSuccess.node.active=!0,0==t&&console.log(" score - reuse-----------------------------:",t),this.Text.node.active=null!=c,t>0?(this.ScoreSuccess.string="/"+t.toString(),this.ScoreFail.string=""):(this.ScoreFail.string="/"+Math.abs(t).toString(),this.ScoreSuccess.string="");var u=t>0?this.ScoreSuccess:this.ScoreFail;t>0?t>r.Score.Normal?a.Game.isOver||n.gEventMgr.emit(i.GlobalEvent.PLAY_EFFECT,"extra_score"):a.Game.isOver||n.gEventMgr.emit(i.GlobalEvent.PLAY_EFFECT,"score"):0==t||a.Game.isOver||n.gEventMgr.emit(i.GlobalEvent.PLAY_EFFECT,"oop_score"),this.Text.node.active?(this.Text.spriteFrame=c,u.node.x=0):u.node.x=-70*u.string.length/2,u.node.opacity=0!=t?255:0,0==t?(this.Text.node.x=0,this.Text.node.anchorX=.5):(this.Text.node.x=0,this.Text.node.anchorX=1),this.ScoreFail.node.scale=0,this.ScoreSuccess.node.scale=0,this.setParentCallback=function(){var r=CMath.Distance(l.position,e.node.position)/1950,a=CMath.ConvertToNodeSpaceAR(l,e.node),c=0,p=0;0==t&&(p=1);var h=[];e.Text.node.active&&(e.Text.node.scale=0,e.Text.node.opacity=255,e.Text.node.runAction(cc.sequence(cc.scaleTo(.1,1.2*o),cc.callFunc(function(){0==t&&n.gEventMgr.emit(i.GlobalEvent.PLAY_EFFECT,"timeup")}),cc.delayTime(.4),cc.scaleTo(.1,1*o),cc.delayTime(p),cc.spawn(cc.scaleTo(.3,0),cc.fadeOut(.1)),cc.callFunc(function(){0==t&&(console.log(" text action done!"),s&&s())}))),c=.2),u.node.opacity>10&&(h=[cc.delayTime(c),cc.scaleTo(.1,1.2*o),cc.delayTime(.2),cc.scaleTo(.1,1*o),cc.callFunc(function(){e.node.runAction(cc.sequence(cc.delayTime(r/2),cc.callFunc(function(){e.node.setParent(e.node.getParent().getParent())})))}),cc.spawn(cc.moveTo(r,a).easing(cc.easeInOut(1)),cc.fadeOut(r)),cc.scaleTo(.3,0),cc.callFunc(function(){s&&s()})],u.node.runAction(cc.sequence(h)))}},t.prototype.unuse=function(){console.log(" score - unuse-----------------------------"),this.Text.node.x=0,this.Text.node.y=0,this.Text.node.stopAllActions(),this.ScoreFail.node.x=0,this.ScoreFail.node.y=22,this.ScoreSuccess.node.x=0,this.ScoreSuccess.node.y=22,this.ScoreFail.node.stopAllActions(),this.ScoreFail.node.scale=1,this.ScoreFail.node.opacity=255,this.ScoreSuccess.node.stopAllActions(),this.ScoreSuccess.node.scale=1,this.ScoreSuccess.node.opacity=255,this.ScoreFail.node.active=!1,this.ScoreSuccess.node.active=!1,this.node.active=!1,this.node.stopAllActions(),this.setParentCallback=null},t=__decorate([s],t)}(cc.Component));o.default=c,cc._RF.pop()},{"./Const":"Const","./Controller/EventManager":"EventManager","./Controller/EventName":"EventName","./Controller/Game":"Game"}],ShaderManager:[function(e,t,o){"use strict";cc._RF.push(t,"95458eY4WhITJgW8y1arDdH","ShaderManager"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("./ShaderTemplate"),i=cc.renderer.renderEngine,r=i.Material,a=i.renderer,l=i.gfx,s=function(){function e(){var e=cc.renderer._forward._programLib;if(e)for(var t=0,o=n.templates;t<o.length;t++){var i=o[t];e._templates[i.name]||e.define(i.name,i.vert,i.frag,i.defines)}else console.error("programLib not exist!")}return Object.defineProperty(e,"inst",{get:function(){return this.ins?this.ins:this.ins=new e},enumerable:!0,configurable:!0}),e}();o.ShaderManager=s;var c=function(e){function t(){var t=e.call(this)||this;t.time=0,t.range=.1;var o=new a.Pass("transition_sprite");o.setDepth(!1,!1),o.setCullMode(l.CULL_NONE),o.setBlend(l.BLEND_FUNC_ADD,l.BLEND_SRC_ALPHA,l.BLEND_ONE_MINUS_SRC_ALPHA,l.BLEND_FUNC_ADD,l.BLEND_SRC_ALPHA,l.BLEND_ONE_MINUS_SRC_ALPHA);var n=new a.Technique(["transparent"],[{name:"texture",type:a.PARAM_TEXTURE_2D},{name:"color",type:a.PARAM_COLOR4},{name:"time",type:a.PARAM_FLOAT},{name:"range",type:a.PARAM_FLOAT}],[o]);return t._color={r:1,g:1,b:1,a:1},t._effect=new a.Effect([n],{color:t._color,time:t.time,range:t.range},[{name:"useTexture",value:!0},{name:"useModel",value:!1},{name:"useColor",value:!0}]),t._mainTech=n,t._texture=null,t}return __extends(t,e),Object.defineProperty(t.prototype,"effect",{get:function(){return this._effect},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"texture",{get:function(){return this._texture},set:function(e){this._texture!==e&&(this._texture=e,this._effect.setProperty("texture",e.getImpl()),this._texIds.texture=e.getId())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"useModel",{get:function(){return this._effect.getDefine("useModel")},set:function(e){this._effect.define("useModel",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"useTexture",{get:function(){return this._effect.getDefine("useTexture")},set:function(e){this._effect.define("useTexture",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"useColor",{get:function(){return this._effect.getDefine("useColor")},set:function(e){this._effect.define("useColor",e)},enumerable:!0,configurable:!0}),t.prototype.setProperty=function(e,t){this._effect.setProperty(e,t)},t.prototype.clone=function(){var e=new t;return e._mainTech.copy(this._mainTech),e.texture=this.texture,e.useTexture=this.useTexture,e.useModel=this.useModel,e.useColor=this.useColor,e.updateHash(),e},t}(r);o.TransitionMaterial=c;var u=function(e){function t(){var t=e.call(this)||this;t.time=0,t.range=2,t.deltaTime=0;var o=new a.Pass("wave_sprite");o.setDepth(!1,!1),o.setCullMode(l.CULL_NONE),o.setBlend(l.BLEND_FUNC_ADD,l.BLEND_SRC_ALPHA,l.BLEND_ONE_MINUS_SRC_ALPHA,l.BLEND_FUNC_ADD,l.BLEND_SRC_ALPHA,l.BLEND_ONE_MINUS_SRC_ALPHA);var n=new a.Technique(["transparent"],[{name:"texture",type:a.PARAM_TEXTURE_2D},{name:"color",type:a.PARAM_COLOR4},{name:"time",type:a.PARAM_FLOAT},{name:"deltaTime",type:a.PARAM_FLOAT},{name:"range",type:a.PARAM_FLOAT}],[o]);return t._color={r:1,g:1,b:1,a:1},t._effect=new a.Effect([n],{color:t._color,time:t.time,range:t.range,deltaTime:t.deltaTime},[{name:"useTexture",value:!0},{name:"useModel",value:!1},{name:"useColor",value:!0}]),t._mainTech=n,t._texture=null,t}return __extends(t,e),Object.defineProperty(t.prototype,"effect",{get:function(){return this._effect},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"texture",{get:function(){return this._texture},set:function(e){this._texture!==e&&(this._texture=e,this._effect.setProperty("texture",e.getImpl()),this._texIds.texture=e.getId())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"useModel",{get:function(){return this._effect.getDefine("useModel")},set:function(e){this._effect.define("useModel",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"useTexture",{get:function(){return this._effect.getDefine("useTexture")},set:function(e){this._effect.define("useTexture",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"useColor",{get:function(){return this._effect.getDefine("useColor")},set:function(e){this._effect.define("useColor",e)},enumerable:!0,configurable:!0}),t.prototype.setProperty=function(e,t){this._effect.setProperty(e,t)},t.prototype.clone=function(){var e=new c;return e._mainTech.copy(this._mainTech),e.texture=this.texture,e.useTexture=this.useTexture,e.useModel=this.useModel,e.useColor=this.useColor,e.updateHash(),e},t}(r);o.WaveMaterial=u;var p=function(e){function t(){var t=e.call(this)||this,o=new a.Pass("butterfly_spring");o.setDepth(!1,!1),o.setCullMode(l.CULL_NONE),o.setBlend(l.BLEND_FUNC_ADD,l.BLEND_SRC_ALPHA,l.BLEND_ONE_MINUS_SRC_ALPHA,l.BLEND_FUNC_ADD,l.BLEND_SRC_ALPHA,l.BLEND_ONE_MINUS_SRC_ALPHA);var n=new a.Technique(["transparent"],[{name:"texture",type:a.PARAM_TEXTURE_2D},{name:"color",type:a.PARAM_COLOR4}],[o]);return t._color={r:1,g:1,b:1,a:1},t._effect=new a.Effect([n],{color:t._color},[{name:"useTexture",value:!0},{name:"useModel",value:!1},{name:"useColor",value:!0}]),t._mainTech=n,t._texture=null,t}return __extends(t,e),Object.defineProperty(t.prototype,"effect",{get:function(){return this._effect},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"texture",{get:function(){return this._texture},set:function(e){this._texture!==e&&(this._texture=e,this._effect.setProperty("texture",e.getImpl()),this._texIds.texture=e.getId())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"useModel",{get:function(){return this._effect.getDefine("useModel")},set:function(e){this._effect.define("useModel",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"useTexture",{get:function(){return this._effect.getDefine("useTexture")},set:function(e){this._effect.define("useTexture",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"useColor",{get:function(){return this._effect.getDefine("useColor")},set:function(e){this._effect.define("useColor",e)},enumerable:!0,configurable:!0}),t.prototype.setProperty=function(e,t){this._effect.setProperty(e,t)},t.prototype.setDefine=function(e,t){this._effect.define(e,t)},t.prototype.clone=function(){var e=new c;return e._mainTech.copy(this._mainTech),e.texture=this.texture,e.useTexture=this.useTexture,e.useModel=this.useModel,e.useColor=this.useColor,e.updateHash(),e},t}(r);o.ButterflySpringMaterial=p;var h=function(e){function t(){var t=e.call(this)||this;t.time=0,t.range=2,t.deltaTime=0,t.point=cc.v2(0,0);var o=new a.Pass("point_wave");o.setDepth(!1,!1),o.setCullMode(l.CULL_NONE),o.setBlend(l.BLEND_FUNC_ADD,l.BLEND_SRC_ALPHA,l.BLEND_ONE_MINUS_SRC_ALPHA,l.BLEND_FUNC_ADD,l.BLEND_SRC_ALPHA,l.BLEND_ONE_MINUS_SRC_ALPHA);var n=new a.Technique(["transparent"],[{name:"texture",type:a.PARAM_TEXTURE_2D},{name:"color",type:a.PARAM_COLOR4},{name:"point",type:a.PARAM_FLOAT2},{name:"time",type:a.PARAM_FLOAT},{name:"deltaTime",type:a.PARAM_FLOAT},{name:"range",type:a.PARAM_FLOAT}],[o]);return t._color={r:1,g:1,b:1,a:1},t._effect=new a.Effect([n],{color:t._color,time:t.time,range:t.range,deltaTime:t.deltaTime,point:t.point},[{name:"useTexture",value:!0},{name:"useModel",value:!1},{name:"useColor",value:!0}]),t._mainTech=n,t._texture=null,t}return __extends(t,e),Object.defineProperty(t.prototype,"effect",{get:function(){return this._effect},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"texture",{get:function(){return this._texture},set:function(e){this._texture!==e&&(this._texture=e,this._effect.setProperty("texture",e.getImpl()),this._texIds.texture=e.getId())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"useModel",{get:function(){return this._effect.getDefine("useModel")},set:function(e){this._effect.define("useModel",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"useTexture",{get:function(){return this._effect.getDefine("useTexture")},set:function(e){this._effect.define("useTexture",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"useColor",{get:function(){return this._effect.getDefine("useColor")},set:function(e){this._effect.define("useColor",e)},enumerable:!0,configurable:!0}),t.prototype.setProperty=function(e,t){this._effect.setProperty(e,t)},t.prototype.setDefine=function(e,t){this._effect.define(e,t)},t.prototype.clone=function(){var e=new c;return e._mainTech.copy(this._mainTech),e.texture=this.texture,e.useTexture=this.useTexture,e.useModel=this.useModel,e.useColor=this.useColor,e.updateHash(),e},t}(r);o.PointWaveMaterial=h;var d=function(e){function t(){var t=e.call(this)||this,o=new a.Pass("pixel_style");o.setDepth(!1,!1),o.setCullMode(l.CULL_NONE),o.setBlend(l.BLEND_FUNC_ADD,l.BLEND_SRC_ALPHA,l.BLEND_ONE_MINUS_SRC_ALPHA,l.BLEND_FUNC_ADD,l.BLEND_SRC_ALPHA,l.BLEND_ONE_MINUS_SRC_ALPHA);var n=new a.Technique(["transparent"],[{name:"texture",type:a.PARAM_TEXTURE_2D},{name:"color",type:a.PARAM_COLOR4},{name:"sampleCount",type:a.PARAM_FLOAT}],[o]);return t._color={r:1,g:1,b:1,a:1},t._effect=new a.Effect([n],{color:t._color,sampleCount:100},[{name:"useTexture",value:!0},{name:"useModel",value:!1},{name:"disableColor",value:!1},{name:"useColor",value:!0}]),t._mainTech=n,t._texture=null,t}return __extends(t,e),Object.defineProperty(t.prototype,"effect",{get:function(){return this._effect},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"texture",{get:function(){return this._texture},set:function(e){this._texture!==e&&(this._texture=e,this._effect.setProperty("texture",e.getImpl()),this._texIds.texture=e.getId())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"useModel",{get:function(){return this._effect.getDefine("useModel")},set:function(e){this._effect.define("useModel",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"useTexture",{get:function(){return this._effect.getDefine("useTexture")},set:function(e){this._effect.define("useTexture",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"useColor",{get:function(){return this._effect.getDefine("useColor")},set:function(e){this._effect.define("useColor",e)},enumerable:!0,configurable:!0}),t.prototype.setProperty=function(e,t){this._effect.setProperty(e,t)},t.prototype.setDefine=function(e,t){this._effect.define(e,t)},t.prototype.clone=function(){var e=new c;return e._mainTech.copy(this._mainTech),e.texture=this.texture,e.useTexture=this.useTexture,e.useModel=this.useModel,e.useColor=this.useColor,e.updateHash(),e},t}(r);o.PixelStyleMaterial=d;var g=function(e){function t(){var t=e.call(this)||this,o=new a.Pass("spine_pxiel");o.setDepth(!1,!1),o.setCullMode(l.CULL_NONE),o.setBlend(l.BLEND_FUNC_ADD,l.BLEND_SRC_ALPHA,l.BLEND_ONE_MINUS_SRC_ALPHA,l.BLEND_FUNC_ADD,l.BLEND_SRC_ALPHA,l.BLEND_ONE_MINUS_SRC_ALPHA);var n=new a.Technique(["transparent"],[{name:"texture",type:a.PARAM_TEXTURE_2D},{name:"sampleCount",type:a.PARAM_FLOAT}],[o]);return t._effect=new a.Effect([n],{sampleCount:100},[{name:"useModel",value:!0},{name:"disableColor",value:!1},{name:"alphaTest",value:!1},{name:"use2DPos",value:!0},{name:"useTint",value:!1}]),t._mainTech=n,t._texture=null,t}return __extends(t,e),Object.defineProperty(t.prototype,"effect",{get:function(){return this._effect},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"texture",{get:function(){return this._texture},set:function(e){this._texture!==e&&(this._texture=e,this._effect.setProperty("texture",e.getImpl()),this._texIds.texture=e.getId())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"useModel",{get:function(){return this._effect.getDefine("useModel")},set:function(e){this._effect.define("useModel",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"use2DPos",{get:function(){return this._effect.getDefine("use2DPos")},set:function(e){this._effect.define("use2DPos",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"alphaTest",{get:function(){return this._effect.getDefine("alphaTest")},set:function(e){this._effect.define("alphaTest",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"useTint",{get:function(){return this._effect.getDefine("useTint")},set:function(e){this._effect.define("useTint",e)},enumerable:!0,configurable:!0}),t.prototype.setProperty=function(e,t){this._effect.setProperty(e,t)},t.prototype.setDefine=function(e,t){this._effect.define(e,t)},t.prototype.clone=function(){var e=new c;return e._mainTech.copy(this._mainTech),e.texture=this.texture,e.useTexture=this.useTexture,e.useModel=this.useModel,e.updateHash(),e},t}(r);o.PixelSpineMaterial=g,cc._RF.pop()},{"./ShaderTemplate":"ShaderTemplate"}],ShaderTemplate:[function(e,t,o){"use strict";cc._RF.push(t,"d01daVCtJtLz5bhMte3qIUW","ShaderTemplate"),Object.defineProperty(o,"__esModule",{value:!0}),o.templates=[{name:"transition_sprite",vert:"\n    uniform mat4 viewProj;\n    attribute vec3 a_position;\n    attribute lowp vec4 a_color;\n    varying mediump vec4 v_pos;\n    #ifdef useModel \n        uniform mat4 model;\n    #endif\n    #ifdef useTexture\n        attribute mediump vec2 a_uv0;  \n        varying mediump vec2 uv0;\n    #endif\n    #ifndef useColor \n        varying lowp vec4 v_fragmentColor;\n    #endif\n    void main () {\n        mat4 mvp;\n        #ifdef useModel\n             mvp = viewProj * model;\n        #else\n             mvp = viewProj;  \n        #endif  \n        vec4 pos = mvp * vec4(a_position, 1);\n        #ifndef useColor\n             v_fragmentColor = a_color;\n        #endif\n        #ifdef useTexture    \n             uv0 = a_uv0;  \n        #endif  \n        v_pos = pos;\n        gl_Position = pos;\n    }",frag:"\n    uniform float time;\n    uniform float range;\n    varying mediump vec4 v_pos;\n    #ifdef useTexture  \n        uniform sampler2D texture;  \n        varying mediump vec2 uv0;\n    #endif\n    #ifdef useColor\n        uniform lowp vec4 color;\n    #else  \n        varying lowp vec4 v_fragmentColor;\n    #endif\n    void main () {  \n        #ifdef useColor    \n             vec4 o = color;\n        #else\n             vec4 o = v_fragmentColor;  \n        #endif  \n        #ifdef useTexture    \n             o *= texture2D(texture, uv0); \n             if (uv0.y >= time) {\n                float factor = abs(uv0.y - time);\n                if (factor > range) o.w *= 0.0;\n                else o.w *= (1.0-factor/range);\n                \n            } else {\n                o.w *=  1.0;\n            }\n        #else\n            float px = v_pos.x + 1.0;\n            if (px <= time*2.0) {\n                float factor = time*2.0 - px;\n                if (factor > range) o.w *= 0.0;\n                else o.w *= (1.0-factor/range);\n            } else {\n                o.w *=  1.0;\n            }\n        #endif  \n        \n        gl_FragColor = o;\n    }",defines:[{name:"useModel"},{name:"useTexture"},{name:"useColor"}]},{name:"butterfly_spring",vert:"\n  \n    uniform mat4 viewProj;\n    attribute vec3 a_position;\n    attribute lowp vec4 a_color;\n    #ifdef useModel \n        uniform mat4 model;\n    #endif\n    #ifdef useTexture\n        attribute mediump vec2 a_uv0;  \n        varying mediump vec2 uv0;\n    #endif\n    #ifndef useColor \n        varying lowp vec4 v_fragmentColor;\n    #endif\n    void main () {\n        mat4 mvp;\n        #ifdef useModel\n             mvp = viewProj * model;\n        #else\n             mvp = viewProj;  \n        #endif  \n        vec4 pos = mvp * vec4(a_position, 1);\n        #ifndef useColor\n             v_fragmentColor = a_color;\n        #endif\n        #ifdef useTexture    \n             uv0 = a_uv0;  \n        #endif  \n    \n        gl_Position = pos;\n    }",frag:"\n    #ifdef useTexture  \n        uniform sampler2D texture;  \n        varying mediump vec2 uv0;\n    #endif\n    #ifdef useColor\n        uniform lowp vec4 color;\n    #else  \n        varying lowp vec4 v_fragmentColor;\n    #endif\n    void main () {  \n        #ifdef useColor    \n             vec4 o = color;\n        #else\n             vec4 o = v_fragmentColor;  \n        #endif  \n        #ifdef useTexture    \n             vec2 uv_temp = uv0;\n             float x = uv_temp.x;\n             float y = uv_temp.y;\n             float offset = uv0.x * 3.14 / 2.0;\n             o.r = offset;\n             o *= texture2D(texture, uv_temp); \n\n        #endif  \n        gl_FragColor = o;\n    }",defines:[{name:"useModel"},{name:"useTexture"},{name:"useColor"}]},{name:"wave_sprite",vert:"\n    uniform float time;\n    uniform float deltaTime;\n    varying float v_time;\n    varying float v_deltaTime;\n    uniform mat4 viewProj;\n    attribute vec3 a_position;\n    attribute lowp vec4 a_color;\n    #ifdef useModel \n        uniform mat4 model;\n    #endif\n    #ifdef useTexture\n        attribute mediump vec2 a_uv0;  \n        varying mediump vec2 uv0;\n    #endif\n    #ifndef useColor \n        varying lowp vec4 v_fragmentColor;\n    #endif\n    void main () {\n        mat4 mvp;\n        #ifdef useModel\n             mvp = viewProj * model;\n        #else\n             mvp = viewProj;  \n        #endif  \n        vec4 pos = mvp * vec4(a_position, 1);\n        #ifndef useColor\n             v_fragmentColor = a_color;\n        #endif\n        #ifdef useTexture    \n             uv0 = a_uv0;  \n        #endif  \n        v_time = time;\n        v_deltaTime = deltaTime;\n        gl_Position = pos;\n    }",frag:"\n    varying float v_time;\n    varying float v_deltaTime;\n    \n    uniform float range;\n    #ifdef useTexture  \n        uniform sampler2D texture;  \n        varying mediump vec2 uv0;\n    #endif\n    #ifdef useColor\n        uniform lowp vec4 color;\n    #else  \n        varying lowp vec4 v_fragmentColor;\n    #endif\n    void main () {  \n        #ifdef useColor    \n             vec4 o = color;\n        #else\n             vec4 o = v_fragmentColor;  \n        #endif  \n        #ifdef useTexture    \n             vec2 uv_temp = uv0;\n             float x = uv_temp.x;\n             float y = uv_temp.y;\n             uv_temp.x += range*(sin(v_deltaTime + v_time + y) - sin(v_time + y));\n             uv_temp.y += range*(sin(v_deltaTime + v_time + x) - sin(v_time + x));\n             \n             o *= texture2D(texture, uv_temp); \n            \n        #endif  \n        //if (abs(o.x - 1.0) < 0.05 && abs(o.y - 1.0) < 0.05 && abs(o.z - 1.0) < 0.05) o.w = 0.0;\n        gl_FragColor = o;\n    }",defines:[{name:"useModel"},{name:"useTexture"},{name:"useColor"}]},{name:"point_wave",vert:"\n    uniform float time;\n    uniform float deltaTime;\n    varying float v_time;\n    varying float v_deltaTime;\n    uniform mat4 viewProj;\n    attribute vec3 a_position;\n    attribute lowp vec4 a_color;\n    #ifdef useModel \n        uniform mat4 model;\n    #endif\n    #ifdef useTexture\n        attribute mediump vec2 a_uv0;  \n        varying mediump vec2 uv0;\n    #endif\n    #ifndef useColor \n        varying lowp vec4 v_fragmentColor;\n    #endif\n    void main () {\n        mat4 mvp;\n        #ifdef useModel\n             mvp = viewProj * model;\n        #else\n             mvp = viewProj;  \n        #endif  \n        vec4 pos = mvp * vec4(a_position, 1);\n        #ifndef useColor\n             v_fragmentColor = a_color;\n        #endif\n        #ifdef useTexture    \n             uv0 = a_uv0;  \n        #endif  \n        v_time = time;\n        v_deltaTime = deltaTime;\n        gl_Position = pos;\n    }",frag:"\n    varying float v_time;\n    varying float v_deltaTime;\n    uniform mediump vec2 point;  \n    uniform float range;\n    #ifdef useTexture  \n        uniform sampler2D texture;  \n        varying mediump vec2 uv0;\n    #endif\n    #ifdef useColor\n        uniform lowp vec4 color;\n    #else  \n        varying lowp vec4 v_fragmentColor;\n    #endif\n    void main () {  \n        #ifdef useColor    \n             vec4 o = color;\n        #else\n             vec4 o = v_fragmentColor;  \n        #endif  \n        #ifdef useTexture    \n             vec2 uv_temp = uv0;\n             float x = uv_temp.x;\n             float y = uv_temp.y;\n             float r = sqrt((x-point.x)*(x-point.x) + (y-point.y)*(y-point.y));\n             float f = abs(range - abs(r - v_time));\n             if (abs(r - v_time) < range) {\n                 if(x > point.x) {\n                    uv_temp.x -= 0.01;\n                 } else if (x < point.x) {\n                     uv_temp.x += 0.01;\n                 }\n               \n                 if(y > point.y) {\n                    uv_temp.y -= 0.01;\n                 } else if (y > point.y) {\n                     uv_temp.y += 0.01;\n                 }\n                 \n                o.r *= (1.0 + f);\n                o.b *= (1.0 + f);\n                o.g *= (1.0 + f);\n             \n             } else {\n                #ifdef useShadow\n                 if (f > 0.3) f = 0.3;\n                o.r *= (1.0 - f);\n                o.b *= (1.0 - f);\n                o.g *= (1.0 - f);\n                #endif \n\n             }\n             o *= texture2D(texture, uv_temp); \n            \n        #endif  \n        //if (abs(o.x - 1.0) < 0.05 && abs(o.y - 1.0) < 0.05 && abs(o.z - 1.0) < 0.05) o.w = 0.0;\n        gl_FragColor = o;\n    }",defines:[{name:"useModel"},{name:"useTexture"},{name:"useColor"}]},{name:"pixel_style",vert:"\n    uniform mat4 viewProj;\n    attribute vec3 a_position;\n    attribute lowp vec4 a_color;\n    #ifdef useModel \n        uniform mat4 model;\n    #endif\n    #ifdef useTexture\n        attribute mediump vec2 a_uv0;  \n        varying mediump vec2 uv0;\n    #endif\n    #ifndef useColor \n        varying lowp vec4 v_fragmentColor;\n    #endif\n    void main () {\n        mat4 mvp;\n        #ifdef useModel\n             mvp = viewProj * model;\n        #else\n             mvp = viewProj;  \n        #endif  \n        vec4 pos = mvp * vec4(a_position, 1);\n        #ifndef useColor\n             v_fragmentColor = a_color;\n        #endif\n        #ifdef useTexture    \n             uv0 = a_uv0;  \n        #endif  \n        gl_Position = pos;\n    }",frag:"\n    uniform float sampleCount;\n    #ifdef useTexture  \n        uniform sampler2D texture;  \n        varying mediump vec2 uv0;\n    #endif\n    #ifdef useColor\n        uniform lowp vec4 color;\n    #else  \n        varying lowp vec4 v_fragmentColor;\n    #endif\n    void main () {  \n        #ifdef useColor    \n             vec4 o = color;\n        #else\n             vec4 o = v_fragmentColor;  \n        #endif  \n        #ifdef useTexture    \n             vec2 uv_temp = uv0;\n             float count = 1.0 / sampleCount;\n\n             float i = floor(uv0.x / count);\n             float j = floor(uv0.y / count);\n             float startX = count * i;\n             float endX = startX + count;\n             float pointX = (startX + endX) / 2.0;\n             \n\n             float startY = count * j;\n             float endY= startY + count;\n             float pointY = (startY + endY) / 2.0;\n             \n             if (uv0.x > startX && uv0.x < endX && uv0.y > startY && uv0.y < endY) {\n                uv_temp.x = pointX;\n                uv_temp.y = pointY;\n            }\n             o *= texture2D(texture, uv_temp); \n             #ifdef disableColor  \n                 float av = (o.r+o.g+o.b) / 3.0;  \n                 o.r = av;\n                 o.g = av;\n                 o.b = av;\n            #endif  \n        #endif  \n        gl_FragColor = o;\n    }",defines:[{name:"useModel"},{name:"useTexture"},{name:"useColor"}]},{name:"spine_pxiel",vert:"\n    uniform mat4 viewProj;\n    #ifdef use2DPos\n      attribute vec2 a_position;\n    #else\n      attribute vec3 a_position;\n    #endif\n    attribute lowp vec4 a_color;\n    #ifdef useTint\n      attribute lowp vec4 a_color0;\n    #endif\n    #ifdef useModel  \n      uniform mat4 model;\n    #endif\n    attribute mediump vec2 a_uv0;\n    varying mediump vec2 uv0;\n    varying lowp vec4 v_light;\n    #ifdef useTint  \n      varying lowp vec4 v_dark;\n    #endif\n    void main () {\n        mat4 mvp;\n        #ifdef useModel    \n           mvp = viewProj * model;  \n        #else    \n           mvp = viewProj;  \n        #endif\n        #ifdef use2DPos  \n           vec4 pos = mvp * vec4(a_position, 0, 1);\n        #else  \n           vec4 pos = mvp * vec4(a_position, 1);  \n        #endif  \n        v_light = a_color;  \n        #ifdef useTint    \n           v_dark = a_color0;  \n        #endif  \n        uv0 = a_uv0;  \n        gl_Position = pos;\n    }",frag:"\n        uniform float sampleCount;\n        uniform sampler2D texture;\n        varying mediump vec2 uv0;\n        #ifdef alphaTest  \n           uniform lowp float alphaThreshold;\n        #endif\n        varying lowp vec4 v_light;\n        #ifdef useTint\n           varying lowp vec4 v_dark;\n        #endif\n        void main () {\n                vec2 uv_temp = uv0;\n                float count = 1.0 / sampleCount;\n\n                float i = floor(uv0.x / count);\n                float j = floor(uv0.y / count);\n                float startX = count * i;\n                float endX = startX + count;\n                float pointX = (startX + endX) / 2.0;\n             \n\n                float startY = count * j;\n                float endY= startY + count;\n                float pointY = (startY + endY) / 2.0;\n             \n                if (uv0.x > startX && uv0.x < endX && uv0.y > startY && uv0.y < endY) {\n                   uv_temp.x = pointX;\n                   uv_temp.y = pointY;\n                }\n\n                vec4 texColor = texture2D(texture, uv_temp);\n                vec4 finalColor;  \n                #ifdef useTint\n                    finalColor.a = v_light.a * texColor.a;    \n                    finalColor.rgb = ((texColor.a - 1.0) * v_dark.a + 1.0 - texColor.rgb) * v_dark.rgb + texColor.rgb * v_light.rgb;  \n                #else\n                    finalColor = texColor * v_light;\n                #endif  \n                #ifdef alphaTest    \n                    if (finalColor.a <= alphaThreshold)      \n                        discard;  \n                #endif  \n                #ifdef disableColor    \n                    float av = (finalColor.r+finalColor.g+finalColor.b) / 3.0;  \n                    finalColor.r = av;\n                    finalColor.g = av;\n                    finalColor.b = av;\n                #endif  \n                gl_FragColor = finalColor;\n        }",defines:[{name:"useModel"},{name:"alphaTest"},{name:"use2DPos"},{name:"useTint"}]}],cc._RF.pop()},{}],Skill:[function(e,t,o){"use strict";cc._RF.push(t,"02d8d4FjeFEz4GYY7djfM63","Skill"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("./Controller/GameFactory"),i=e("./Const"),r=e("./Controller/Game"),a=e("./Controller/CelerSDK"),l=e("./Controller/EventManager"),s=e("./Controller/EventName"),c=cc._decorator,u=c.ccclass,p=(c.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),Object.defineProperty(t.prototype,"Background",{get:function(){return this.node.getChildByName("Background").getComponent(cc.Sprite)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Animation",{get:function(){return this.node.getComponent(cc.Animation)},enumerable:!0,configurable:!0}),t.prototype.reuse=function(){var e=this;this.node.scale=0,this.pressCallback=arguments[0][0],this.Background.spriteFrame=arguments[0][1],this.skillType=arguments[0][2];var t=arguments[0][3];this.node.on(cc.Node.EventType.TOUCH_END,function(){if(!(e.node.zIndex!=e.node.getParent().childrenCount||e.node.scale<=.98||e.node.scale>=1.1))if(r.Game.getGameTime()<=0)console.log(" game time up");else if(r.Game.checkIsFull(r.Game.cardIndex)&&e.skillType!=i.SkillType.Time)console.log("this card is full:",r.Game.cardIndex);else if(r.Game.getCurMode()==i.SkillType.Normal){var t=function(){console.log(" use skill :",i.SkillType[e.skillType]),r.Game.useSkill(e.skillType),e.pressCallback&&(e.pressCallback(),e.pressCallback=null),n.gFactory.putObj("Skill",e.node)};a.CelerSDK.inst.isNew()&&!r.Game.skillGuide[e.skillType]?(r.Game.skillGuide[e.skillType]=!0,l.gEventMgr.emit(s.GlobalEvent.SHOW_SKILL_GUIDE,e.skillType,t)):t()}else console.error(" is using other skill now:",i.SkillType[r.Game.getCurMode()])},this),this.node.x=-120,this.node.runAction(cc.sequence(cc.spawn(cc.sequence(cc.moveTo(.1,-60,214),cc.moveTo(.1,0,67+5*t)),cc.sequence(cc.scaleTo(.1,1.2),cc.scaleTo(.1,.8))),cc.callFunc(function(){e.Animation.play()}),cc.scaleTo(.1,1),cc.callFunc(function(){})))},t.prototype.unuse=function(){this.node.targetOff(this),this.node.stopAllActions(),this.pressCallback=null},t=__decorate([u],t)}(cc.Component));o.default=p,cc._RF.pop()},{"./Const":"Const","./Controller/CelerSDK":"CelerSDK","./Controller/EventManager":"EventManager","./Controller/EventName":"EventName","./Controller/Game":"Game","./Controller/GameFactory":"GameFactory"}],StepController:[function(e,t,o){"use strict";cc._RF.push(t,"5e60515g5pBlJXudFf1Z4T3","StepController"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("./LogHandler"),i=function(){function e(){this.totalStep=[],this.curStep=[]}return Object.defineProperty(e,"inst",{get:function(){return this._ins?this._ins:this._ins=new e},enumerable:!0,configurable:!0}),e.prototype.register=function(e,t){this.completeCallback=e,this.totalStep=t},e.prototype.nextStep=function(e){this.totalStep.indexOf(e)<0?console.error(" \u6ca1\u6709\u8fd9\u4e00\u6b65\uff1a",e):this.curStep.indexOf(e)>=0?console.warn(" \u6b65\u9aa4\u5df2\u5b8c\u6210\uff1a",e):(this.curStep.push(e),this.curStep.sort(function(e,t){return e>t?-1:1}),this.totalStep.sort(function(e,t){return e>t?-1:1}),n.LogHandler.inst.log(" cur step:",this.curStep.join(",")),n.LogHandler.inst.log(" total step:",this.totalStep.join(",")),this.curStep.join(",")==this.totalStep.join(",")&&(n.LogHandler.inst.log(" step done"),this.totalStep.length=0,this.completeCallback(),this.completeCallback=null))},e}();o.gStep=i.inst,cc._RF.pop()},{"./LogHandler":"LogHandler"}],SuperSkillLayer:[function(e,t,o){"use strict";cc._RF.push(t,"d8917JXrNNKupwEf3iWB7n+","SuperSkillLayer"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("./Const"),i=e("./Controller/EventManager"),r=e("./Controller/EventName"),a=e("./Controller/Game"),l=cc._decorator,s=l.ccclass,c=l.property;(function(e){e[e.TimeUp=0]="TimeUp",e[e.Complete=1]="Complete"})(o.SuperEndType||(o.SuperEndType={}));var u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.SuperLightAtlas=null,t.time=0,t}return __extends(t,e),Object.defineProperty(t.prototype,"Background",{get:function(){return this.node.getChildByName("Background")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"TimeBar",{get:function(){return this.node.getChildByName("TimeBar").getComponent(cc.ProgressBar)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"TimeLabel",{get:function(){return this.TimeBar.node.getChildByName("TimeLabel").getComponent(cc.Label)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Light",{get:function(){return this.node.getChildByName("Light")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"SelectCard",{get:function(){return this.node.getChildByName("SelectCard")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Card1Btn",{get:function(){return this.SelectCard.getChildByName("Card1")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Card2Btn",{get:function(){return this.SelectCard.getChildByName("Card2")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ResultAnimation",{get:function(){return this.node.getChildByName("ResultAnimation").getComponent(cc.Animation)},enumerable:!0,configurable:!0}),t.prototype.onLoad=function(){var e=this;i.gEventMgr.on(r.GlobalEvent.UPDATE_MOUSE_LIGHT,this.updateLight,this),i.gEventMgr.on(r.GlobalEvent.SUPER_END_COMPLETE,this.endComplete,this),this.Card1Btn.on(cc.Node.EventType.TOUCH_END,function(){i.gEventMgr.emit(r.GlobalEvent.SCROLL_CARD,0),e.SelectCard.active=!1,e.TimeBar.node.active=!0},this),this.Card2Btn.on(cc.Node.EventType.TOUCH_END,function(){i.gEventMgr.emit(r.GlobalEvent.SCROLL_CARD,1),e.SelectCard.active=!1,e.TimeBar.node.active=!0},this)},t.prototype.show=function(){this.ResultAnimation.once(cc.Animation.EventType.FINISHED,function(){setTimeout(function(){i.gEventMgr.emit(r.GlobalEvent.SKILL_DONE)},1e3)},this);for(var e=0,t=this.Background.children;e<t.length;e++){var o=t[e];o.active=o.name==n.Theme[a.Game.Theme]}console.log(" \u5f00\u59cb\u6253\u5730\u9f20"),this.ResultAnimation.node.active=!1,this.Card1Btn.active=!a.Game.checkIsFull(0),this.Card2Btn.active=!a.Game.checkIsFull(1),this.SelectCard.active=!0,this.TimeBar.node.active=!1,this.time=(window.chichihaoshuaihahaha,n.SuperTime.LastTime),this.node.active=!0,this.TimeBar.progress=1,this.TimeLabel.string=Math.ceil(this.time).toString(),i.gEventMgr.emit(r.GlobalEvent.CHANGE_BGM,"mouse_bgm"),a.Game.superStart(),this.updateLight()},t.prototype.updateLight=function(){for(var e=function(e){parseInt(e.name)<=a.Game.superHighLightCount?e.getComponent(cc.Animation).getAnimationState("shink").isPlaying||(e.getComponent(cc.Animation).once(cc.Animation.EventType.FINISHED,function(){e.getComponent(cc.Animation).play("shink")},t),i.gEventMgr.emit(r.GlobalEvent.PLAY_EFFECT,"mouse_light_up"),e.getComponent(cc.Animation).play("turn")):(e.getComponent(cc.Animation).stop(),e.getComponent(cc.Sprite).spriteFrame=t.SuperLightAtlas.getSpriteFrame(n.SuperLight.Gray))},t=this,o=0,l=this.Light.children;o<l.length;o++){e(l[o])}},t.prototype.hide=function(){this.node.active&&(this.node.active=!1,Math.floor(a.Game.getGameTime())>30?i.gEventMgr.emit(r.GlobalEvent.CHANGE_BGM,"bgm"):i.gEventMgr.emit(r.GlobalEvent.CHANGE_BGM,"bgm_30"),i.gEventMgr.emit(r.GlobalEvent.NORMAL_BGM))},t.prototype.endTimeUp=function(){this.ResultAnimation.node.active||(this.TimeBar.node.active=!1,this.ResultAnimation.node.active=!0,this.ResultAnimation.play("time_up"),i.gEventMgr.emit(r.GlobalEvent.SMALL_BGM),i.gEventMgr.emit(r.GlobalEvent.PLAY_EFFECT,"mouse_time_up"))},t.prototype.endComplete=function(){this.ResultAnimation.node.active||(this.TimeBar.node.active=!1,this.ResultAnimation.node.active=!0,this.ResultAnimation.play("complete"),i.gEventMgr.emit(r.GlobalEvent.SMALL_BGM),i.gEventMgr.emit(r.GlobalEvent.PLAY_EFFECT,"mouse_complete"))},t.prototype.update=function(e){this.node.active&&!this.SelectCard.active&&this.time>0&&(this.time-=e,this.TimeLabel.string=Math.ceil(this.time).toString(),this.TimeBar.progress=this.time/n.SuperTime.LastTime,this.time<=0&&this.endTimeUp())},__decorate([c(cc.SpriteAtlas)],t.prototype,"SuperLightAtlas",void 0),t=__decorate([s],t)}(cc.Component);o.default=u,cc._RF.pop()},{"./Const":"Const","./Controller/EventManager":"EventManager","./Controller/EventName":"EventName","./Controller/Game":"Game"}],TimeBonus:[function(e,t,o){"use strict";cc._RF.push(t,"e173aWv7rdBm6Av7NvVi4Ci","TimeBonus"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,i=n.ccclass,r=(n.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.setParentCallback=null,t}return __extends(t,e),t.prototype.reuse=function(){var e=this;this.node._onSetParent=this.onSetParent.bind(this);var t=arguments[0][0],o=arguments[0][1];this.setParentCallback=function(){var n,i=CMath.Distance(o.position,e.node.position)/1950,r=CMath.ConvertToNodeSpaceAR(o,e.node);n=[cc.scaleTo(.1,1.2),cc.delayTime(.2),cc.scaleTo(.1,1),cc.spawn(cc.moveTo(i,r).easing(cc.easeInOut(1)),cc.fadeOut(i)),cc.scaleTo(.3,0),cc.callFunc(function(){t&&t()})],e.node.runAction(cc.sequence(n))}},t.prototype.unuse=function(){this.node.scale=1,this.node.opacity=255},t.prototype.onSetParent=function(e){e&&this.setParentCallback&&this.setParentCallback()},t=__decorate([i],t)}(cc.Component));o.default=r,cc._RF.pop()},{}],TransitionMask:[function(e,t,o){"use strict";cc._RF.push(t,"bc719XWLLZMWpq6bF6rOJX1","TransitionMask"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("./ShaderManager"),i=cc._decorator,r=i.ccclass,a=(i.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.transitionMaterial=new n.TransitionMaterial,t.startTrans=!1,t.time=0,t}return __extends(t,e),t.prototype.onLoad=function(){var e=this.getComponent(cc.Mask);e._material=this.transitionMaterial,e._activateMaterial(),this.transitionMaterial.setProperty("range",.1)},t.prototype.start=function(){},t.prototype.update=function(e){this.startTrans&&(this.time+=1.2*e,this.transitionMaterial.setProperty("time",this.time))},t=__decorate([r],t)}(cc.Component));o.default=a,cc._RF.pop()},{"./ShaderManager":"ShaderManager"}],TransitionSprite:[function(e,t,o){"use strict";cc._RF.push(t,"5cba704AVFGFZnPDW8Ox6DN","TransitionSprite"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("./ShaderManager"),i=e("../Controller/EventManager"),r=e("../Controller/EventName"),a=cc._decorator,l=a.ccclass,s=(a.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.transitionMaterial=new n.TransitionMaterial,t.isStart=!1,t.time=1,t}return __extends(t,e),t.prototype.onLoad=function(){var e=this.getComponent(cc.Sprite);e._spriteMaterial=this.transitionMaterial,e._activateMaterial(),this.transitionMaterial.setProperty("range",.2)},t.prototype.start=function(){},t.prototype.update=function(e){this.node.active&&this.isStart?(this.Time-=e,this.time<=0&&(this.Time=1,this.node.active=!1,i.gEventMgr.emit(r.GlobalEvent.GAME_START))):this.Time=1},Object.defineProperty(t.prototype,"Time",{get:function(){return this.time},set:function(e){this.time=e,this.transitionMaterial.setProperty("time",this.time)},enumerable:!0,configurable:!0}),t=__decorate([l],t)}(cc.Component));o.default=s,cc._RF.pop()},{"../Controller/EventManager":"EventManager","../Controller/EventName":"EventName","./ShaderManager":"ShaderManager"}],WaveSprite:[function(e,t,o){"use strict";cc._RF.push(t,"8999cssAlxJF5v8+8wMnCPE","WaveSprite"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("./ShaderManager"),i=cc._decorator,r=i.ccclass,a=(i.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.wave=new n.WaveMaterial,t.time=0,t}return __extends(t,e),t.prototype.onLoad=function(){var e=this.getComponent(cc.Sprite);e&&(e._spriteMaterial=this.wave,e._activateMaterial(),this.wave.setProperty("range",1))},t.prototype.start=function(){},t.prototype.update=function(e){this.time+=10*e,this.wave.setProperty("time",this.time),this.wave.setProperty("deltaTime",e)},t=__decorate([r],t)}(cc.Component));o.default=a,cc._RF.pop()},{"./ShaderManager":"ShaderManager"}],celerx:[function(e,t,o){"use strict";cc._RF.push(t,"10d05zhUHtDfJgPk46aOLCS","celerx");var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i={default:void 0,call:function(e,t,o){var n="";if("function"==typeof t&&(o=t,t={}),t={data:void 0===t?null:t},"function"==typeof o){var i="dscb"+window.dscb++;window[i]=o,t._dscbstub=i}return t=JSON.stringify(t),window._dsbridge?n=_dsbridge.call(e,t):(window._dswk||-1!=navigator.userAgent.indexOf("_dsbridge"))&&(n=prompt("_dsbridge="+e,t)),JSON.parse(n||"{}").data},register:function(e,t,o){o=o?window._dsaf:window._dsf,window._dsInit||(window._dsInit=!0,setTimeout(function(){i.call("_dsb.dsinit")},0)),"object"==(void 0===t?"undefined":n(t))?o._obs[e]=t:o[e]=t},registerAsyn:function(e,t){this.register(e,t,!0)},hasNativeMethod:function(e,t){return this.call("_dsb.hasNativeMethod",{name:e,type:t||"all"})},disableJavascriptDialogBlock:function(e){this.call("_dsb.disableJavascriptDialogBlock",{disable:!1!==e})}};!function(){if(!window._dsf){var e,t={_dsf:{_obs:{}},_dsaf:{_obs:{}},dscb:0,celerx:i,close:function(){i.call("_dsb.closePage")},_handleMessageFromNative:function(e){var t=JSON.parse(e.data),o={id:e.callbackId,complete:!0},n=this._dsf[e.method],r=this._dsaf[e.method],a=function(e,n){o.data=e.apply(n,t),i.call("_dsb.returnValue",o)},l=function(e,n){t.push(function(e,t){o.data=e,o.complete=!1!==t,i.call("_dsb.returnValue",o)}),e.apply(n,t)};if(n)a(n,this._dsf);else if(r)l(r,this._dsaf);else if(n=e.method.split("."),!(2>n.length)){e=n.pop();n=n.join(".");var s=(r=(r=this._dsf._obs)[n]||{})[e];s&&"function"==typeof s?a(s,r):(s=(r=(r=this._dsaf._obs)[n]||{})[e])&&"function"==typeof s&&l(s,r)}}};for(e in t)window[e]=t[e];i.register("_hasJavascriptMethod",function(e,t){return 2>(t=e.split(".")).length?!(!_dsf[t]&&!_dsaf[t]):(e=t.pop(),t=t.join("."),(t=_dsf._obs[t]||_dsaf._obs[t])&&!!t[e])})}}();var r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";function a(e){for(var t=new Uint8Array(e),o=new Array,n=0,i=0,a=new Array(3),l=new Array(4),s=t.length,c=0;s--;)if(a[n++]=t[c++],3==n){for(l[0]=(252&a[0])>>2,l[1]=((3&a[0])<<4)+((240&a[1])>>4),l[2]=((15&a[1])<<2)+((192&a[2])>>6),l[3]=63&a[2],n=0;n<4;n++)o+=r.charAt(l[n]);n=0}if(n){for(i=n;i<3;i++)a[i]=0;for(l[0]=(252&a[0])>>2,l[1]=((3&a[0])<<4)+((240&a[1])>>4),l[2]=((15&a[1])<<2)+((192&a[2])>>6),l[3]=63&a[2],i=0;i<n+1;i++)o+=r.charAt(l[i]);for(;n++<3;)o+="="}return o}var l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function s(e){var t,o,n,i,r,a,s=new Array,c=0;if(e!=(e=e.replace(/[^A-Za-z0-9\+\/\=]/g,""))&&alert("Warning! Characters outside Base64 range in input string ignored."),e.length%4)return alert("Error: Input length is not a multiple of 4 bytes."),"";for(var u=0;c<e.length;)t=l.indexOf(e.charAt(c++))<<2|(i=l.indexOf(e.charAt(c++)))>>4,o=(15&i)<<4|(r=l.indexOf(e.charAt(c++)))>>2,n=(3&r)<<6|(a=l.indexOf(e.charAt(c++))),s[u++]=t,64!=r&&(s[u++]=o),64!=a&&(s[u++]=n);return s}var c={callback:function(){return""}},u={callback:function(){return""}};i.register("provideScore",function(){return c.callback()}),i.register("provideCurrentFrameData",function(){return u.callback()}),t.exports=window.celerSDK={onStateReceived:function(e){return i.register("onStateReceived",function(t){var o=s(t);return e(new Uint8Array(o))})},onCourtModeStarted:function(e){return i.register("onCourtModeStarted",e)},getMatch:function(){var e=i.call("getMatch","123");try{e=JSON.parse(e)}catch(e){}return e},showCourtModeDialog:function(){return i.call("showCourtModeDialog")},start:function(){return i.call("start")},sendState:function(e){return i.call("sendState",a(e))},draw:function(e){return i.call("draw",a(e))},win:function(e){return i.call("win",a(e))},lose:function(e){return i.call("lose",a(e))},surrender:function(e){return i.call("surrender",a(e))},applyAction:function(e,t){return i.call("applyAction",a(e),t)},getOnChainState:function(e){return i.call("getOnChainState","123",function(t){var o=s(t);return e(new Uint8Array(o))})},getOnChainActionDeadline:function(e){return i.call("getOnChainActionDeadline","123",e)},getCurrentBlockNumber:function(){return i.call("getCurrentBlockNumber","123")},finalizeOnChainGame:function(e){return i.call("finalizeOnChainGame","123",e)},submitScore:function(e){return i.call("submitScore",e)},ready:function(){if(window.cc){var e=!1,t=document.getElementsByTagName("canvas")[0];cc.director.on(cc.Director.EVENT_AFTER_DRAW,function(){e&&(e=!1,celerSDK.didTakeSnapshot(t.toDataURL("image/jpeg",.1)))}),celerSDK.provideCurrentFrameData(function(){e=!0})}return i.call("ready")},onStart:function(e){return i.register("onStart",e)},provideScore:function(e){return c={callback:e}},provideCurrentFrameData:function(e){return u={callback:e}},didTakeSnapshot:function(e){if(!(window.webkit&&window.webkit.messageHandlers&&window.webkit.messageHandlers.celerSDK&&window.webkit.messageHandlers.celerSDK.postMessage))return i.call("didTakeSnapshot",e);window.webkit.messageHandlers.celerSDK.postMessage({method:"didTakeSnapshot",args:e})},log:function(e){if(!(window.webkit&&window.webkit.messageHandlers&&window.webkit.messageHandlers.celerSDK&&window.webkit.messageHandlers.celerSDK.postMessage))return i.call("log",e);window.webkit.messageHandlers.celerSDK.postMessage({method:"log",args:e})},getGameScore:function(){return c&&c.callback&&""!=c.callback()?c.callback():0},switchSnapShotFlag:function(){return u&&u.callback&&""!=u.callback()?u.callback():0}},cc._RF.pop()},{}]},{},["Card","Const","AudioController","CelerSDK","EventManager","EventName","Game","GameFactory","LogHandler","StepController","FrameAniBase","GameScene","GoldSkillLayer","Guide","LoadLayer","PauseLayer","Point","ResultLayer","Score","ButterFlySpring","PixelSprite","PointWave","ShaderManager","ShaderTemplate","TransitionMask","TransitionSprite","WaveSprite","Skill","SuperSkillLayer","TimeBonus","Pad","HashMap","celerx"]);