window.__require=function e(t,o,n){function i(a,s){if(!o[a]){if(!t[a]){var l=a.split("/");if(l=l[l.length-1],!t[l]){var c="function"==typeof __require&&__require;if(!s&&c)return c(l,!0);if(r)return r(l,!0);throw new Error("Cannot find module '"+a+"'")}}var u=o[a]={exports:{}};t[a][0].call(u.exports,function(e){return i(t[a][1][e]||e)},u,u.exports,e,t,o,n)}return o[a].exports}for(var r="function"==typeof __require&&__require,a=0;a<n.length;a++)i(n[a]);return i}({App:[function(e,t,o){"use strict";cc._RF.push(t,"eaeeaWDD5pJfqkUameEwNsk","App"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../Initialization/Facade/InitialFacade"),i=e("../Model/PlayModelProxy"),r=e("../Controller/ResourceController"),a=cc._decorator,s=a.ccclass,l=a.property,c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.TotalScoreFont=null,t.ResultScoreFont=null,t.TimeWhiteFont=null,t.TimeRedFont=null,t.AddScoreFont=null,t.SubScoreFont=null,t.UIAtlas=null,t.WaittingRoot=null,t}return __extends(t,e),t.prototype.onLoad=function(){console.log(" app onload "),r.ResourceController.inst.setAtlas(this.UIAtlas),r.ResourceController.inst.addFont(r.Font.AddScore,this.AddScoreFont),r.ResourceController.inst.addFont(r.Font.ResultScore,this.ResultScoreFont),r.ResourceController.inst.addFont(r.Font.ShowScore,this.TimeWhiteFont),r.ResourceController.inst.addFont(r.Font.SubScore,this.SubScoreFont),r.ResourceController.inst.addFont(r.Font.TimeRed,this.TimeRedFont),r.ResourceController.inst.addFont(r.Font.TimeWhite,this.TimeWhiteFont),r.ResourceController.inst.addFont(r.Font.TotalScore,this.TotalScoreFont),i.PlayModelProxy.inst.waittingRootNode=this.WaittingRoot},t.prototype.start=function(){n.InitialFacade.inst.start()},t.prototype.update=function(e){i.PlayModelProxy.inst.addGameTime(-e)},__decorate([l(cc.Font)],t.prototype,"TotalScoreFont",void 0),__decorate([l(cc.Font)],t.prototype,"ResultScoreFont",void 0),__decorate([l(cc.Font)],t.prototype,"TimeWhiteFont",void 0),__decorate([l(cc.Font)],t.prototype,"TimeRedFont",void 0),__decorate([l(cc.Font)],t.prototype,"AddScoreFont",void 0),__decorate([l(cc.Font)],t.prototype,"SubScoreFont",void 0),__decorate([l(cc.SpriteAtlas)],t.prototype,"UIAtlas",void 0),__decorate([l(cc.Node)],t.prototype,"WaittingRoot",void 0),t=__decorate([s],t)}(cc.Component);o.default=c,cc._RF.pop()},{"../Controller/ResourceController":"ResourceController","../Initialization/Facade/InitialFacade":"InitialFacade","../Model/PlayModelProxy":"PlayModelProxy"}],AudioManager:[function(e,t,o){"use strict";cc._RF.push(t,"88c70Ktw0pBKKUTDtyQ2NkZ","AudioManager"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../Utils/HashMap"),i=e("../Command/CommonSignal"),r=e("../Controller/GameStateController"),a=e("../Utils/ToSingleton"),s=e("../GamePlay/Command/GamePlaySignal");window.oncanplay&&(window.oncanplay=function(){c.canPlay=!0});var l="sounds/",c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.audioID={},t.clips=new n.HashMap,t.effectVolumeScale=1,t.musicVolumeScale=1,t}return __extends(t,e),t.prototype.init=function(e){var t=this;console.log(" start load AudioClip ");var o=this;cc.loader.loadRes(l+"bgm",cc.AudioClip,function(t,n){t?console.error(t):("string"==typeof n._audio&&cc.loader._cache&&cc.loader._cache[n._audio]&&cc.loader._cache[n._audio].buffer&&(n._audio=cc.loader._cache[n._audio].buffer),o.clips.add(n.name,n),e&&e(),o.playMusic("bgm",!0))}),cc.loader.loadResDir(l,function(e,o,n){if(e)console.error(e);else for(var i=0,r=o;i<r.length;i++){var a=r[i];"string"==typeof a._audio&&cc.loader._cache&&cc.loader._cache[a._audio]&&cc.loader._cache[a._audio].buffer&&(a._audio=cc.loader._cache[a._audio].buffer),t.clips.has(a.name)||t.clips.add(a.name,a)}}),this.bindSignal()},t.prototype.setEffectVolume=function(e){this.effectVolumeScale=1.8,cc.audioEngine.setEffectsVolume(e*this.effectVolumeScale)},t.prototype.setMusicVolume=function(e){this.musicVolumeScale=1,cc.audioEngine.setMusicVolume(e*this.musicVolumeScale)},Object.defineProperty(t.prototype,"EffectVolume",{get:function(){return cc.audioEngine.getEffectsVolume()/this.effectVolumeScale},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"MusicVolume",{get:function(){return cc.audioEngine.getMusicVolume()/this.musicVolumeScale},enumerable:!0,configurable:!0}),t.prototype.bindSignal=function(){var e=this;this.setEffectVolume(1),this.setMusicVolume(1),i.UpdateTimeNumber.inst.addListenerOne(function(e){},this),s.ComboUpdateSignal.inst.addListenerOne(function(t){t%=13,e.playEffect("recycle"+t)},this),s.ShakePokerSignal.inst.addListener(function(){e.playEffect("shake")},this),s.DispatchPokerSignal.inst.addListener(function(){e.playEffect("devPoker")},this),s.PokerFlySignal.inst.addListener(function(){e.playEffect("pokerFly")},this),s.RedrawSiganal.inst.addListener(function(){e.playEffect("recyclePoker")},this),i.ScoreCountingSignal.inst.addListener(function(){e.audioID.scoreCount||e.playEffect("scoreCount",!1,function(){e.audioID.scoreCount=null})},this),i.ShowSubmitSignal.inst.addListener(function(){e.audioID.scoreCount&&cc.audioEngine.stopEffect(e.audioID.scoreCount),e.playEffect("showSubmit")},this),i.OpenResultLayerSignal.inst.addListenerOne(function(t){t==r.RoundEndType.TimeUp?e.playEffect("timeup"):(r.RoundEndType.Complete,e.playEffect("complete"))},this),i.PlayerScoreChanged.inst.addListenerThree(function(e,t,o){},this),i.GamePauseSignal.inst.addListener(function(){e.playEffect("pause")},this),i.ButtonClickSignal.inst.addListener(function(){e.playEffect("click")},this),i.CountDownSignal.inst.addListener(function(){e.playEffect("countDown")},this)},t.prototype.playEffect=function(e,o,n){var i=this;if(void 0===o&&(o=!1),t.canPlay){if(!(cc.audioEngine.getEffectsVolume()<=.05)){var r=this.clips.get(e);r?(this.audioID[e]=cc.audioEngine.playEffect(r,o),cc.audioEngine.setFinishCallback(this.audioID[e],function(){n&&n()})):cc.loader.loadRes(l+e,cc.AudioClip,function(t,r){t?console.error(t):("string"==typeof r._audio&&cc.loader._cache&&cc.loader._cache[r._audio]&&cc.loader._cache[r._audio].buffer&&(r._audio=cc.loader._cache[r._audio].buffer),i.clips.add(r.name,r),i.audioID[e]=cc.audioEngine.playEffect(r,o),cc.audioEngine.setFinishCallback(i.audioID[e],function(){n&&n()}))})}}else this.bindTouch()},t.prototype.playMusic=function(e,o){var n=this;if(void 0===o&&(o=!0),!t.canPlay)return this.bindTouch(),void t.PlayedList.push({loop:!0,volume:1,clipName:e,supTime:Date.now(),skip:!1,isBgm:!0});var i=this.clips.get(e);i?this.audioID[e]=cc.audioEngine.playMusic(i,o):cc.loader.loadRes(l+e,cc.AudioClip,function(t,i){t?console.error(t):("string"==typeof i._audio&&cc.loader._cache&&cc.loader._cache[i._audio]&&cc.loader._cache[i._audio].buffer&&(i._audio=cc.loader._cache[i._audio].buffer),n.clips.add(i.name,i),n.audioID[e]=cc.audioEngine.playMusic(i,o))})},t.prototype.bindTouch=function(){if(!t.hasBindTouch){var e=this,o=function(){var n;for(cc.game.canvas.removeEventListener("touchstart",o),t.canPlay=!0;(n=t.PlayedList.pop())&&e.clips.get(n.clipName)&&!n.skip;)cc.audioEngine.playMusic(e.clips.get(n.clipName),n.loop)};t.hasBindTouch=!0,cc.game.canvas.addEventListener("touchstart",o)}},t.PlayedList=[],t.canPlay=cc.sys.WIN32==cc.sys.platform,t.hasBindTouch=!1,t}(a.SingleTon());o.gAudio=c.inst,cc._RF.pop()},{"../Command/CommonSignal":"CommonSignal","../Controller/GameStateController":"GameStateController","../GamePlay/Command/GamePlaySignal":"GamePlaySignal","../Utils/HashMap":"HashMap","../Utils/ToSingleton":"ToSingleton"}],BaseMediator:[function(e,t,o){"use strict";cc._RF.push(t,"a76c1ySm3tAQId4zbAsdr/d","BaseMediator"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,i=n.ccclass,r=(n.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.bind=function(e){this.view=e},Object.defineProperty(t.prototype,"View",{get:function(){return console.assert(null!=this.view," view is null"),this.view},enumerable:!0,configurable:!0}),t.prototype.onRegister=function(){console.error(" should override onRegister ")},t.prototype.onUnregister=function(){console.error(" should override onUnregister ")},t=__decorate([i],t)}(cc.Component));o.default=r,cc._RF.pop()},{}],BaseView:[function(e,t,o){"use strict";cc._RF.push(t,"6daedF7tVNJ3qN565kuohVZ","BaseView"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,i=n.ccclass,r=(n.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onLoad=function(){this.node.scale=0},t.prototype.Show=function(e){this.node.active=!0,this.node.runAction(cc.sequence(cc.callFunc(function(){}),cc.scaleTo(.1,1),cc.callFunc(function(){e&&e()})))},t.prototype.Hide=function(e){var t=this;this.node.runAction(cc.sequence(cc.scaleTo(.1,0),cc.callFunc(function(){t.node.active=!1,e&&e()})))},t.prototype.OnClick=function(){},t.prototype.BindMedaitor=function(e){if(!this.node.getComponent(e)){var t=this.node.addComponent(e);return t.bind&&t.bind(this),t.onRegister&&t.onRegister(),t}console.warn(" this node already has the same component..")},t.prototype.UnbindMedaitor=function(e){var t=this.node.getComponent(e);if(t)return t.onUnregister&&t.onUnregister(),t.bind&&t.bind(null),this.node.removeComponent(e),t;console.warn(" component already removed..")},t=__decorate([i],t)}(cc.Component));o.default=r,cc._RF.pop()},{}],BlackView:[function(e,t,o){"use strict";cc._RF.push(t,"19fcd0C7htAbIGt1LNpiSgv","BlackView"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../../Command/CommonSignal"),i=e("../../../Controller/GameStateController"),r=cc._decorator,a=r.ccclass,s=(r.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onLoad=function(){var e=this;this.node.scale=1,n.GameOverSignal.inst.addListenerOne(function(t){t!=i.RoundEndType.Complete&&(e.node.active=!0)},this),this.node.active=!1},t.prototype.start=function(){},t=__decorate([a],t)}(cc.Component));o.default=s,cc._RF.pop()},{"../../../Command/CommonSignal":"CommonSignal","../../../Controller/GameStateController":"GameStateController"}],CelerSDK:[function(e,t,o){"use strict";cc._RF.push(t,"34a72Ol/DRKJb0NyonTxi8g","CelerSDK"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../ToSingleton"),i=e("../LogHandler"),r=e("../Random"),a=e("../../Command/CommonSignal"),s=e("../../Model/PlayModelProxy"),l=e("../../TableManager"),c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.alreadySubmit=!1,t.isNewPlayer=!0,t.celerStartCallback=null,t}return __extends(t,e),Object.defineProperty(t.prototype,"MatchID",{get:function(){return this.match.matchId},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"MatchRandomSeed",{get:function(){return this.match.sharedRandomSeed},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"DifficultyLevel",{get:function(){return this.match.difficultyLevel},enumerable:!0,configurable:!0}),t.prototype.init=function(e){this.alreadySubmit=!1,CELER_X&&celerSDK.onStart(this.onCelerStart.bind(this)),CELER_X&&celerSDK.provideScore(function(){return s.PlayModelProxy.inst.getTotalScore()}),this.celerStartCallback=e,i.LogHandler.inst.ready(),CELER_X?i.LogHandler.inst.initLog(celerSDK.log):console.log("v 1.4")},t.prototype.celerXReady=function(){console.log(" invoke celerx.ready() "),CELER_X?celerSDK.ready():this.onCelerStart()},t.prototype.isNew=function(){return this.isNewPlayer},t.prototype.isOnCelerPlatform=function(){return CELER_X},t.prototype.onCelerStart=function(){console.log(" celerx onStart call"),this.match=CELER_X?celerSDK.getMatch():{matchId:"error : can not get id",shouldLaunchTutorial:!0,sharedRandomSeed:.37951436056806953,difficultyLevel:0,locale:"en_US"},console.log("match id:",this.match.matchId,", seed:",this.match.sharedRandomSeed),this.defineLan(),r.Random.setRandomSeed(this.match.sharedRandomSeed),s.PlayModelProxy.inst.Level=this.match.difficultyLevel,this.match&&this.match.shouldLaunchTutorial?this.isNewPlayer=!0:this.isNewPlayer=!1,CELER_X?(celerSDK.onPause(function(){console.log(" on pause "),a.ShowPauseLayerSignal.inst.dispatch()}),celerSDK.onResume(function(){console.log(" on resume ")})):(cc.game.on(cc.game.EVENT_HIDE,function(){console.log(" on pause "),a.ShowPauseLayerSignal.inst.dispatch()}),cc.game.on(cc.game.EVENT_SHOW,function(){console.log(" on resume ")})),this.celerStartCallback&&(this.celerStartCallback(),this.celerStartCallback=null)},t.prototype.defineLan=function(){this.match.locale=this.match.locale||"en_US",lan.set(this.match.locale);var e={},t=null;t=l.TableManager.inst.getAll_En_Data();var o=this.match.locale.split("_")[0].charAt(0).toUpperCase()+this.match.locale.split("_")[0].substring(1);if(l.TableManager.inst["getAll_"+o+"_Data"]&&l.TableManager.inst["getAll_"+o+"_Data"]()&&(t=l.TableManager.inst["getAll_"+o+"_Data"]()),t){for(var n in t){var i=t[n];e[i.View]||(e[i.View]={}),e[i.View][i.ID]=i.Text}lan.define(this.match.locale,e)}},t.prototype.submitScore=function(e){this.alreadySubmit||(this.alreadySubmit=!0,console.log(" submit score:",e,", match id:",this.match.matchId),CELER_X?celerSDK.submitScore(e):window.location.reload())},t}(n.SingleTon());o.CelerSDK=c,cc._RF.pop()},{"../../Command/CommonSignal":"CommonSignal","../../Model/PlayModelProxy":"PlayModelProxy","../../TableManager":"TableManager","../LogHandler":"LogHandler","../Random":"Random","../ToSingleton":"ToSingleton"}],Cocos:[function(e,t,o){"use strict";function n(e){return e&&e.getParent&&e.getParent()?e.getParent().convertToWorldSpaceAR(e.position):cc.v2(0,0)}cc._RF.push(t,"d9795RGCWVCp5Zf4JNywPPb","Cocos"),Object.defineProperty(o,"__esModule",{value:!0}),o.GetWorldPosition=n,o.ConvertToNodeSpaceAR=function(e,t){if(!t)return cc.v2(0,0);var o=n(e);return t.convertToNodeSpaceAR(o)},o.Distance=function(e,t){return Math.sqrt((e.x-t.x)*(e.x-t.x)+(e.y-t.y)*(e.y-t.y))},o.AreaOf2CrossRect=function(e,t){var o=e.x,n=e.y,i=e.x+e.width,r=e.y+e.height,a=t.x,s=t.y,l=t.x+t.width,c=t.y+t.height;return Math.max(0,Math.min(i,l)-Math.max(o,a))*Math.max(0,Math.min(r,c)-Math.max(n,s))},cc._RF.pop()},{}],ComboView:[function(e,t,o){"use strict";cc._RF.push(t,"f8ca2qumLRKqaZ/3KLHgHTF","ComboView"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../Command/GamePlaySignal"),i=cc._decorator,r=i.ccclass,a=(i.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onLoad=function(){this.node.active=!1,n.TrigerComboSignal.inst.addListener(this.onCombo,this)},t.prototype.onCombo=function(){var e=this;this.node.stopAllActions(),this.node.active=!0,this.node.scale=0,this.node.runAction(cc.sequence(cc.scaleTo(0,0),cc.scaleTo(.1,1.2),cc.delayTime(.3),cc.scaleTo(.1,0),cc.callFunc(function(){e.node.active=!1})))},t=__decorate([r],t)}(cc.Component));o.default=a,cc._RF.pop()},{"../../Command/GamePlaySignal":"GamePlaySignal"}],CommonSignal:[function(e,t,o){"use strict";cc._RF.push(t,"f95914FtRVEIaVFtfSVd+lO","CommonSignal"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../Utils/Signal"),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(n.BaseSignal);o.ShowPauseLayerSignal=i;var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(n.BaseSignal);o.HidePauseLayerSignal=r;var a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(n.BaseSignal);o.GameThemeInit=a;var s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(n.BaseSignal);o.ShowHelpLayerSignal=s;var l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(n.BaseSignal);o.HideHelpLayerSignal=l;var c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(n.BaseSignal);o.OpenResultLayerSignal=c;var u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(n.BaseSignal);o.ShowSubmitSignal=u;var d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(n.BaseSignal);o.ScoreCountingSignal=d;var p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(n.BaseSignal);o.ButtonClickSignal=p;var h=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(n.BaseSignal);o.TimeAnimationStateChanged=h;var f=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(n.BaseSignal);o.UpdateTimeNumber=f;var g=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(n.BaseSignal);o.GameReadySignal=g;var m=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(n.BaseSignal);o.ShowTutorialSignal=m;var y=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(n.BaseSignal);o.GameStartSignal=y;var P=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(n.BaseSignal);o.GameOverSignal=P;var S=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(n.BaseSignal);o.GamePauseSignal=S;var _=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(n.BaseSignal);o.PlayerScoreChanged=_;var M=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(n.BaseSignal);o.NoviceScoreChanged=M;var C=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(n.BaseSignal);o.CountDownSignal=C;var b=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(n.BaseSignal);o.PlayRedrawAniSignal=b,cc._RF.pop()},{"../Utils/Signal":"Signal"}],DeskModelBase:[function(e,t,o){"use strict";cc._RF.push(t,"95ae6myBYhM9ZnFbvXO6BHR","DeskModelBase"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function e(){this.pokers=[]}return e.prototype.remove=function(e){var t=this.pokers.indexOf(e);t>=0&&this.pokers.splice(t,1)},e.prototype.dump=function(e){void 0===e&&(e="");for(var t=[],o=0,n=this.pokers;o<n.length;o++){var i=n[o];t.push(i.ID)}console.log(e+" pokers:",t)},e}();o.DeskModelBase=n,cc._RF.pop()},{}],DrawDeskModel:[function(e,t,o){"use strict";cc._RF.push(t,"da935YGYtdNwLFMevsC8mkw","DrawDeskModel"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../../Utils/Signal"),i=e("./DeskModelBase"),r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(n.BaseSignal);o.PokerToDrawSignal=r;var a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.addPoker=function(e){e.addToDraw(),e.setBack(),e.setSelected(!1),this.pokers.push(e),r.inst.dispatchOne(e)},t}(i.DeskModelBase);o.DrawDeskModel=a,cc._RF.pop()},{"../../../Utils/Signal":"Signal","./DeskModelBase":"DeskModelBase"}],Draw:[function(e,t,o){"use strict";cc._RF.push(t,"1ebd6l2ri5BqpT6QpfRaJR/","Draw"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../../Command/CommonSignal"),i=e("../../../Controller/GameStateController"),r=e("../../../Controller/ResourceController"),a=e("../../../Model/PlayModelProxy"),s=e("../../../Utils/Cocos"),l=e("../../Model/Poker/PokerParentModel"),c=cc._decorator,u=c.ccclass,d=(c.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onLoad=function(){l.PokerParentChanged.inst.addListenerTwo(this.onPokerAdded,this),this.node.on(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this),this.node.on(cc.Node.EventType.CHILD_REMOVED,this.onChildChanged,this),this.node.on(cc.Node.EventType.CHILD_ADDED,this.onChildChanged,this)},t.prototype.onChildChanged=function(){n.PlayRedrawAniSignal.inst.dispatchOne(this.node.childrenCount<=0)},t.prototype.onPokerAdded=function(e,t){if(t==l.PokerParent.Draw){var o=r.ResourceController.inst.getPokerNodeByID(e);o&&(o.position=s.ConvertToNodeSpaceAR(o,this.node),o.setParent(this.node))}},t.prototype.onTouchEnd=function(e){i.GameStateController.inst.isRoundStart()&&this.node.childrenCount<=0&&(console.log(" Draw touch!"),a.PlayModelProxy.inst.drawPoker2Draw(this.node))},t=__decorate([u],t)}(cc.Component));o.default=d,cc._RF.pop()},{"../../../Command/CommonSignal":"CommonSignal","../../../Controller/GameStateController":"GameStateController","../../../Controller/ResourceController":"ResourceController","../../../Model/PlayModelProxy":"PlayModelProxy","../../../Utils/Cocos":"Cocos","../../Model/Poker/PokerParentModel":"PokerParentModel"}],EaseBaseView:[function(e,t,o){"use strict";cc._RF.push(t,"fc226Q7q/NHwZUZiG7X+tIZ","EaseBaseView"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../BaseView"),i=cc._decorator,r=i.ccclass,a=(i.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.targetVal=new cc.Vec3(0,0,0),t.startTime=0,t.lastTime=0,t.completeCallback=null,t}return __extends(t,e),Object.defineProperty(t.prototype,"StartTime",{get:function(){return this.startTime},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"LastTime",{get:function(){return this.lastTime},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Target",{get:function(){return this.targetVal},enumerable:!0,configurable:!0}),t.prototype.onLoad=function(){},t.prototype.start=function(){},t.prototype.startUpdate=function(e,t,o,n){void 0===n&&(n=0),this.targetVal=e,this.startTime=Date.now()+1e3*n,this.lastTime=1e3*t,this.completeCallback=o},t.prototype.complete=function(){if(this.startTime=this.lastTime=0,this.completeCallback){var e=this.completeCallback;this.completeCallback=null,e()}},t.prototype.update=function(e){0!=this.startTime&&0!=this.canUpdate()&&(this.isComplete()?(this.onComplete(),this.complete()):this.canStart()&&this.onStep())},t.prototype.canStart=function(){return Date.now()>=this.startTime&&0!=this.startTime},t.prototype.isComplete=function(){return Date.now()>=this.startTime+this.lastTime},t.prototype.canUpdate=function(){return console.error("you should override this method."),!0},t.prototype.onStep=function(){},t.prototype.onComplete=function(){},t.prototype.ease=function(e,t){return this.lastTime<=0?t:(t-e)*(Date.now()-this.startTime)/this.lastTime+e},t=__decorate([r],t)}(n.default));o.default=a,cc._RF.pop()},{"../BaseView":"BaseView"}],FrameAniBase:[function(e,t,o){"use strict";cc._RF.push(t,"6298cJI+OZK9J9ZyfrpqPP2","FrameAniBase"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,i=n.ccclass,r=n.property,a=(n.executeInEditMode,n.requireComponent),s=(n.playOnFocus,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.Frames=null,t.Interval=.1,t.Priority=0,t.Loop=!1,t.PlayOnLoad=!1,t.currentIndex=0,t.time=0,t.isPlay=!1,t.listener=[],t.complateEvent=[],t}var o;return __extends(t,e),o=t,Object.defineProperty(t.prototype,"Sprite",{get:function(){return this.node.getComponent(cc.Sprite)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Animation",{set:function(e){this.Frames=e},enumerable:!0,configurable:!0}),t.prototype.onFocusInEditor=function(){},t.prototype.onLostFocusInEditor=function(){clearInterval(o.intervalID)},t.prototype.onLoad=function(){this.time=this.Interval,this.isPlay=this.PlayOnLoad},t.prototype.play=function(){this.isPlay=!0,this.currentIndex=0,0==this.isPlaying&&this.callEventComplete()},t.prototype.playOnLoop=function(){this.Loop=!0,this.play()},t.prototype.playByStep=function(){this.isPlay=!0,this.nextFrame(),this.isPlay=!1},t.prototype.pause=function(){this.isPlay=!1},t.prototype.resume=function(){this.isPlay=!0},t.prototype.stop=function(){this.isPlay=!1,this.currentIndex=0,this.Sprite.spriteFrame=this.Frames.getSpriteFrames()[this.currentIndex],this.Loop=!1},t.prototype.onKeyFrame=function(e){},t.prototype.addKeyEventListener=function(e,t){this.listener.push({callback:e,target:t})},Object.defineProperty(t.prototype,"ListenerCount",{get:function(){return this.listener.length},enumerable:!0,configurable:!0}),t.prototype.clearAllListener=function(){return this.listener.length=0,this},t.prototype.onComplete=function(){},t.prototype.callEventFrame=function(){this.onKeyFrame(this.currentIndex);for(var e=0,t=this.listener;e<t.length;e++){var o=t[e];o.callback.apply(o.target,[this.currentIndex,this.__classname__])}},t.prototype.callEventComplete=function(){this.onComplete();for(var e=0,t=this.complateEvent;e<t.length;e++){var o=t[e];o.f.apply(o.target,[this.__classname__])}},t.prototype.addCompleteEvent=function(e,t){this.complateEvent.push({f:e,target:t})},Object.defineProperty(t.prototype,"TotalFrameCount",{get:function(){return this.Frames&&this.Frames.getSpriteFrames?this.Frames.getSpriteFrames().length:0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"CompleteEventCount",{get:function(){return this.complateEvent.length},enumerable:!0,configurable:!0}),t.prototype.clearCompleteEvent=function(){return this.complateEvent.length=0,this},t.prototype.start=function(){},Object.defineProperty(t.prototype,"isPlaying",{get:function(){if(this.isPlay&&this.Frames&&this.Frames.getSpriteFrames&&this.Frames.getSpriteFrames().length>0){for(var e=0,t=this.getComponents(o);e<t.length;e++){var n=t[e];if(n.Priority>this.Priority&&n.isPlaying)return!1}return!0}return!1},enumerable:!0,configurable:!0}),t.prototype.nextFrame=function(){0!=this.isPlaying?this.Frames&&this.Frames.getSpriteFrames&&this.Frames.getSpriteFrames().length>0&&(this.Sprite.spriteFrame=this.Frames.getSpriteFrames()[this.currentIndex],this.callEventFrame(),this.currentIndex=(this.currentIndex+1)%this.Frames.getSpriteFrames().length,0==this.currentIndex&&0==this.Loop&&(this.isPlay=!1,this.callEventComplete())):this.time=this.Interval},t.prototype.update=function(e){this.time>=this.Interval&&(this.time=0,this.nextFrame()),this.time+=e},t.aniName="FrameAniBase",t.intervalID=-1,__decorate([r(cc.SpriteAtlas)],t.prototype,"Frames",void 0),__decorate([r],t.prototype,"Interval",void 0),__decorate([r],t.prototype,"Priority",void 0),__decorate([r],t.prototype,"Loop",void 0),__decorate([r],t.prototype,"PlayOnLoad",void 0),t=o=__decorate([i,a(cc.Sprite)],t)}(cc.Component));o.default=s,cc._RF.pop()},{}],FrontView:[function(e,t,o){"use strict";cc._RF.push(t,"a7fe8WWCZVPgYx/jpZQ6l8q","FrontView"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,i=n.ccclass,r=(n.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onLoad=function(){},t.prototype.start=function(){},t.prototype.update=function(e){this.node.parent.scaleX>=0?this.node.scaleX=1:this.node.scaleX=0,this.node.parent.scaleY<0?this.node.scaleY=1:this.node.scaleY=0},t=__decorate([i],t)}(cc.Component));o.default=r,cc._RF.pop()},{}],GameFactory:[function(e,t,o){"use strict";cc._RF.push(t,"93d23kfnY1A76OtZSkIyJ5r","GameFactory"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../Utils/HashMap"),i=function(){function e(e,t,o){this._pool=[],this.totalSize=0,this.initTime=[],this.completeHandler=o,this.template=e,this.totalSize=t,this.hashKey="ObjPool:"+this.template.name+" - "+this.totalSize,this.initPool(t)}return e.prototype.initPool=function(e,t){var o=this;if(void 0===t&&(t=!1),t)for(var n=0;n<e;++n){this.initTime.push(Date.now());var i=cc.instantiate(this.template);this.put(i)}else for(n=0;n<e;++n)this.initTime.push(Date.now()),setTimeout(function(){var e=cc.instantiate(o.template);o.put(e)},n)},e.prototype.size=function(){return this._pool.length},e.prototype.clear=function(){for(var e=this._pool.length,t=0;t<e;++t)this._pool[t].destroy&&this._pool[t].destroy();this._pool.length=0},e.prototype.put=function(e){if(e&&-1===this._pool.indexOf(e)){e.removeFromParent(!1);for(var t=0,o=e.getComponents(cc.Component);t<o.length;t++){var n=o[t];n&&n.unuse&&n.unuse.apply(n)}this._pool.push(e),this.completeHandler&&this.totalSize<=this._pool.length&&(this.completeHandler(),this.completeHandler=null)}},e.prototype.get=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var o=this._pool.length-1;o<0&&(console.warn(" last < 0 "),this.initPool(1,!0)),o=this._pool.length-1;var n=this._pool[o];this._pool.length=o;for(var i=0,r=n.getComponents(cc.Component);i<r.length;i++){var a=r[i];a&&a.reuse&&a.reuse.apply(a,arguments)}return n},e}(),r=function(){function e(){this.count=0,this.totalCount=0,this.objPool=new n.HashMap,this.startTime=0}return Object.defineProperty(e,"inst",{get:function(){return this.ins?this.ins:this.ins=new e},enumerable:!0,configurable:!0}),e.prototype.init=function(e){var t=this;this.doneCallback=e,this.startTime=Date.now(),cc.loader.loadResDir("prefabs/",cc.Prefab,function(e,o,n){if(e)console.error(" Game Factory init failed:",e);else{t.totalCount=o.length;for(var r=function(e){var n=o[e],r=n.name.split("."),a=r[0],s=r[1]?parseInt(r[1]):30;console.log(" init pool:",a,", count:",s),setTimeout(function(){var e=new i(n,s,t.addCount.bind(t));t.objPool.add(a,e)},10*e)},a=0;a<o.length;a++)r(a)}})},e.prototype.addCount=function(){this.count++,this.count>=this.totalCount&&(console.log(" factory cost time:",(Date.now()-this.startTime).toFixed(2)+"ms"),this.doneCallback&&(this.doneCallback(),this.doneCallback=null))},e.prototype.getObj=function(e){for(var t,o=[],n=1;n<arguments.length;n++)o[n-1]=arguments[n];return this.objPool.has(e)?(t=this.objPool.get(e)).get.apply(t,o):(console.error(" objPool dosen't exists this obj:",e),null)},e.prototype.putObj=function(e,t){if(this.objPool.has(e))return this.objPool.get(e).put(t);console.error(" objPool dosen't exists this obj:",e)},e}();o.gFactory=r.inst,cc._RF.pop()},{"../Utils/HashMap":"HashMap"}],GamePlayModel:[function(e,t,o){"use strict";cc._RF.push(t,"3a3dbMmjXZDlbutv0S4vxKQ","GamePlayModel"),Object.defineProperty(o,"__esModule",{value:!0});var n,i=e("../../Global/Theme"),r=e("../../Global/GameRule"),a=e("../../Command/CommonSignal"),s=e("../../Global/Level"),l=e("../../Utils/Random"),c=e("./Desk/PyramidDeskModel"),u=e("./Desk/DrawDeskModel"),d=e("./Desk/SelectableDeskModel"),p=e("./Desk/WaittingDeskModel"),h=e("./Desk/RecycleDeskModel"),f=e("./Poker/PokerModel"),g=e("../../Controller/GameStateController"),m=e("../../Model/PlayModelProxy"),y=e("./Poker/PokerParentModel"),P=e("../../Controller/ResourceController"),S=e("../Command/GamePlaySignal");(function(e){e[e.Combo=0]="Combo",e[e.CardBonus=1]="CardBonus",e[e.TimeBonus=2]="TimeBonus",e[e.Normal=3]="Normal"})(n=o.ScoreType||(o.ScoreType={}));var _=function(){function e(){this.level=0,this.playerScore=0,this.noviceScore=0,this.streak=0,this.totalStreak=0,this.maxSteak=0,this.gameTime=r.TotalTime,this.pauseCount=0,this.pauseScore=0,this.scoreMap={},this.isDrawing=!1,this.pyramidDesk=new c.PyramidDeskModel,this.drawDesk=new u.DrawDeskModel,this.selectableDesk=new d.SelectableDeskModel,this.waittingDesk=new p.WaittingDeskModel,this.recycleDesk=new h.RecycleDeskModel,this.init()}return e.prototype.init=function(){this.scoreMap[n.CardBonus]=0,this.scoreMap[n.Combo]=0,this.scoreMap[n.Normal]=0,this.scoreMap[n.TimeBonus]=0,a.GameStartSignal.inst.addListener(this.startDev2Pyramid,this)},Object.defineProperty(e.prototype,"Time",{get:function(){return this.gameTime},set:function(e){this.gameTime=e,this.gameTime=Math.max(0,this.gameTime)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Theme",{get:function(){return this.theme},set:function(e){console.log("set game theme:",i.Theme[e]),this.theme=e,a.GameThemeInit.inst.dispatchOne(this.theme)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Level",{get:function(){return this.level},set:function(e){console.log("set game Level:",e),this.level=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"TotalScore",{get:function(){return this.Timebonus+this.ScoreSpread+this.playerScore},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"RecycledCount",{get:function(){return this.recycleDesk.pokers.length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Timebonus",{get:function(){return this.RecycledCount>0?Math.floor((this.RecycledCount/52*4.5+.5)*this.Time):0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"TotalCombo",{get:function(){return this.totalStreak},enumerable:!0,configurable:!0}),e.prototype.getScoreByType=function(e){return this.scoreMap[e]},Object.defineProperty(e.prototype,"ScoreSpread",{get:function(){return 0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"PlayerScore",{get:function(){return this.playerScore},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"PauseScore",{get:function(){return this.pauseScore},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"NoviceScore",{get:function(){return this.noviceScore},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"PauseCount",{get:function(){return this.pauseCount},enumerable:!0,configurable:!0}),e.prototype.initDrawCard=function(){for(var e,t=[r.Poker.$_A,r.Poker.$_2,r.Poker.$_3,r.Poker.$_4,r.Poker.$_5,r.Poker.$_6,r.Poker.$_7,r.Poker.$_8,r.Poker.$_9,r.Poker.$_10,r.Poker.$_J,r.Poker.$_Q,r.Poker.$_K],o=[r.PokerColor.Club,r.PokerColor.Diamond,r.PokerColor.Heart,r.PokerColor.Spade],n=[],i=0;i<o.length;++i)for(var a=0;a<t.length;++a)n.push({val:t[a],color:o[i]});for(i=0;i<n.length;++i){e=[n[s=l.Random.randomFloorToInt(0,n.length)],n[i]],n[i]=e[0],n[s]=e[1]}for(;n.length>0;){var s=l.Random.randomFloorToInt(0,n.length),c=n.splice(s,1)[0];this.drawDesk.addPoker(new f.PokerModel(c.val,c.color))}this.drawDesk.dump("[Draw] ")},e.prototype.startDev2Pyramid=function(){for(var e=this,t=0,o=0;o<=6;++o)for(var n=o+1;n-- >0;)setTimeout(function(t,o){S.DispatchPokerSignal.inst.dispatch();var n=e.drawDesk.pokers.pop();e.pyramidDesk.addPoker(n,t,o),o>=27&&(e.pyramidDesk.dump("[Pyramid]"),g.GameStateController.inst.isReady=!0)},60*t,o,t),t++},e.prototype.initGametheme=function(){var e=s.Level.getThemeRandomPool(this.Level);this.Theme=e[Math.floor(l.Random.getRandom()*e.length)]},e.prototype.addPlayerScore=function(e,t,o,n){if(void 0===o&&(o=1),void 0===n&&(n=null),0!=e){this.scoreMap[t]+=e;var i=this.playerScore;return this.playerScore+=e,e>0||this.resetCombo(),this.playerScore=Math.max(this.playerScore,0),a.PlayerScoreChanged.inst.dispatchFour(this.playerScore,e,o,n),this.playerScore-i}},e.prototype.resetCombo=function(){this.streak=0},e.prototype.addStreak=function(){return this.streak++,this.totalStreak++,this.maxSteak=Math.max(this.maxSteak,this.streak),S.ComboUpdateSignal.inst.dispatchOne(this.streak),this.streak>=r.Combo?(console.log(" Combo:",this.streak),this.addPlayerScore(r.ComboScore,n.Combo),S.TrigerComboSignal.inst.dispatchOne(this.streak),r.ComboScore):0},e.prototype.addNoviceScore=function(e,t){void 0===t&&(t=1),this.noviceScore+=e,this.noviceScore=Math.max(this.noviceScore,0),a.NoviceScoreChanged.inst.dispatchThree(this.noviceScore,e,t)},e.prototype.addPauseCount=function(){this.pauseCount++,console.log("pause count:",this.pauseCount),this.pauseCount>r.FreePauseLimit&&this.addPlayerScore(-r.PauseScoreCost,n.Normal)},e.prototype.drawPoker2Selectable=function(){var e=this;if(this.isDrawing)return[];this.isDrawing=!0;for(var t=0,o=Math.min(3,this.drawDesk.pokers.length),n=[],i=0;i<o;++i)n.push(this.drawDesk.pokers[this.drawDesk.pokers.length-i-1].ID);for(;t<o;)setTimeout(function(t){S.DispatchPokerSignal.inst.dispatch();var n=e.drawDesk.pokers.pop();e.selectableDesk.addPoker(n),e.updateSelectablePos(),(t>=o-1||e.drawDesk.pokers.length<=0)&&(e.isDrawing=!1,e.selectableDesk.dump("[Selectable] "))},50*t,t),t++;return n},e.prototype.drawPoker2Draw=function(){for(var e=[],t=0,o=this.selectableDesk.pokers;t<o.length;t++){var n=o[t];e.push(n.ID)}for(;this.selectableDesk.pokers.length>0;){var i=this.selectableDesk.pokers.pop();this.drawDesk.addPoker(i)}return e},e.prototype.checkCanMeet13=function(e,t){if(null==e&&null==t)return!1;if(null!=e&&null==t)return 13==f.PokerModel.getModelById(e).Value||!1;if(null==e&&null!=t)return 13==f.PokerModel.getModelById(t).Value||!1;var o=f.PokerModel.getModelById(e),n=f.PokerModel.getModelById(t);return o.Value+n.Value==13||!1},e.prototype.cleanPoker=function(e){switch(e.Parent.Type){case y.PokerParent.Draw:this.drawDesk.remove(e);break;case y.PokerParent.Pyramid:this.pyramidDesk.remove(e),this.pyramidDesk.pokers.length<=0&&this.completeGame();break;case y.PokerParent.Recycle:this.recycleDesk.remove(e);break;case y.PokerParent.Selectable:this.selectableDesk.remove(e),this.updateSelectablePos();break;case y.PokerParent.Waitting:this.waittingDesk.remove(e)}e.Parent.clean()},e.prototype.completeGame=function(){var e=this;g.GameStateController.inst.roundEnd(g.RoundEndType.Complete);var t=0;t+=this.drawDesk.pokers.length,t+=this.selectableDesk.pokers.length,t+=this.waittingDesk.pokers.length;for(var o=0,i=0,a=function(){var t=s.drawDesk.pokers[s.drawDesk.pokers.length-1];s.cleanPoker(t),setTimeout(function(){S.PokerFlySignal.inst.dispatch(),e.recycleDesk.addPoker(t),e.addPlayerScore(r.NonePyramid,n.CardBonus,1,P.ResourceController.inst.getPokerNodeByID(t.ID))},100*i),o+=100*i,i++},s=this;this.drawDesk.pokers.length>0;)a();for(var l=function(){var t=c.selectableDesk.pokers[c.selectableDesk.pokers.length-1];c.cleanPoker(t),setTimeout(function(){S.PokerFlySignal.inst.dispatch(),e.recycleDesk.addPoker(t),e.addPlayerScore(r.NonePyramid,n.CardBonus,1,P.ResourceController.inst.getPokerNodeByID(t.ID))},100*i),o+=100*i,i++},c=this;this.selectableDesk.pokers.length>0;)l();for(var u=function(){var t=d.waittingDesk.pokers[d.waittingDesk.pokers.length-1];d.cleanPoker(t),setTimeout(function(){S.PokerFlySignal.inst.dispatch(),e.recycleDesk.addPoker(t),e.addPlayerScore(r.NonePyramid,n.CardBonus,1,P.ResourceController.inst.getPokerNodeByID(t.ID))},100*i),o+=100*i,i++},d=this;this.waittingDesk.pokers.length>0;)u();console.log(" all comlepte:",t,i,o),S.AllPokersFlySignal.inst.dispatchOne(100*i+1500),this.dump()},e.prototype.matchSuccess=function(e){for(var t=[],o=0,i=e;o<i.length;o++){(u=i[o])&&t.push(u.ID)}console.log(" Match Success:",t.join(","));for(var a=!1,s=!1,l=0,c=e;l<c.length;l++){var u;(u=c[l])&&(u.isPyramidPoker()?a=!0:s=!0,this.cleanPoker(u),this.recycleDesk.addPoker(u))}var d=P.ResourceController.inst.getPokerNodeByID(e[0].ID);return a&&!s?this.addPlayerScore(r.Pyramid2PyramidScore,n.Normal,1,d)+this.addStreak():a&&s?this.addPlayerScore(r.Pyramid2Other,n.Normal,1,d)+this.addStreak():s?this.addPlayerScore(r.NonePyramid,n.Normal,1,d)+this.addStreak():void 0},e.prototype.addToSelectable=function(e){this.selectableDesk.addPoker(e),this.updateSelectablePos()},e.prototype.addToDraw=function(e){this.drawDesk.addPoker(e)},e.prototype.addToPyramid=function(e,t,o){"number"==typeof e&&"number"==typeof t||console.error("index or layer is nan!",o.ID),2==o.Value&&o.Color==r.PokerColor.Heart&&console.log(e,t,o.ID),this.pyramidDesk.addPoker(o,t,e)},e.prototype.addToWaitting=function(e){this.waittingDesk.addPoker(e)},e.prototype.dragToWaitting=function(e){var t=!1;if(e.Parent.isOnPyramid()||e.Parent.isOnSelectable()){if(e.Parent.isOnPyramid()){if(this.pyramidDesk.pokers.length>1){var o=this.pyramidDesk.pokers.indexOf(e);this.pyramidDesk.pokers.splice(o,1),t=!0}}else{o=this.selectableDesk.pokers.indexOf(e);this.selectableDesk.pokers.splice(o,1),this.updateSelectablePos(),t=!0}t&&(S.DispatchPokerSignal.inst.dispatch(),this.waittingDesk.addPoker(e))}else console.error(" poker :",e.ID+" is cant add to waitting.");return t},e.prototype.updateSelectablePos=function(){for(var e=0,t=this.selectableDesk.pokers;e<t.length;e++){t[e].Position.updatePosition()}},e.prototype.isTopOfSelectable=function(e){var t=f.PokerModel.getModelById(e),o=this.selectableDesk.pokers.indexOf(t);return o>=m.PlayModelProxy.inst.SelectableCount-3&&(1==m.PlayModelProxy.inst.SelectableCount||(2==m.PlayModelProxy.inst.SelectableCount?o==m.PlayModelProxy.inst.SelectableCount-1:o==m.PlayModelProxy.inst.SelectableCount-1||(m.PlayModelProxy.inst.SelectableCount,!1)))},e.prototype.getNeedCheckCrossPokers=function(){for(var e=[],t=0,o=this.pyramidDesk.pokers;t<o.length;t++){(r=o[t]).Pyramid.isLocked()||e.push(r)}for(var n=0,i=this.waittingDesk.pokers;n<i.length;n++){var r=i[n];e.push(r)}return e},e.prototype.indexOfSelectable=function(e){return this.selectableDesk.pokers.indexOf(e)},Object.defineProperty(e.prototype,"SelectableCount",{get:function(){return this.selectableDesk.pokers.length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"PyramidPokersCount",{get:function(){return this.pyramidDesk.pokers.length},enumerable:!0,configurable:!0}),e.prototype.dump=function(){this.drawDesk.dump("[Draw]"),this.pyramidDesk.dump("[Pyramid]"),this.selectableDesk.dump("[Selectable]"),this.waittingDesk.dump("[Waitting]")},e}();o.GamePlayModel=_,cc._RF.pop()},{"../../Command/CommonSignal":"CommonSignal","../../Controller/GameStateController":"GameStateController","../../Controller/ResourceController":"ResourceController","../../Global/GameRule":"GameRule","../../Global/Level":"Level","../../Global/Theme":"Theme","../../Model/PlayModelProxy":"PlayModelProxy","../../Utils/Random":"Random","../Command/GamePlaySignal":"GamePlaySignal","./Desk/DrawDeskModel":"DrawDeskModel","./Desk/PyramidDeskModel":"PyramidDeskModel","./Desk/RecycleDeskModel":"RecycleDeskModel","./Desk/SelectableDeskModel":"SelectableDeskModel","./Desk/WaittingDeskModel":"WaittingDeskModel","./Poker/PokerModel":"PokerModel","./Poker/PokerParentModel":"PokerParentModel"}],GamePlaySignal:[function(e,t,o){"use strict";cc._RF.push(t,"6a923XZO3BHe6UfcoANFeWX","GamePlaySignal"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../Utils/Signal"),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(n.BaseSignal);o.PokerModelCreatedSignal=i;var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(n.BaseSignal);o.ShakePokerSignal=r;var a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(n.BaseSignal);o.DrawTurnOverSignal=a;var s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(n.BaseSignal);o.UpdateCurrentPokerSignal=s;var l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(n.BaseSignal);o.SubmitButtonClickSignal=l;var c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(n.BaseSignal);o.UpdateRevertButtonSignal=c;var u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(n.BaseSignal);o.TrigerComboSignal=u;var d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(n.BaseSignal);o.ComboUpdateSignal=d;var p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(n.BaseSignal);o.AllPokersFlySignal=p;var h=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(n.BaseSignal);o.DispatchPokerSignal=h;var f=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(n.BaseSignal);o.RedrawSiganal=f;var g=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(n.BaseSignal);o.PokerFlySignal=g,cc._RF.pop()},{"../../Utils/Signal":"Signal"}],GameRule:[function(e,t,o){"use strict";var n,i;cc._RF.push(t,"58c53me7vtEdKVK7W6RnNQo","GameRule"),Object.defineProperty(o,"__esModule",{value:!0}),o.TotalTime=180,o.DrawDebug=!1,o.FreePauseLimit=3,o.PauseScoreCost=100,o.Pyramid2PyramidScore=150,o.Pyramid2Other=100,o.NonePyramid=50,o.RedrawCost=50,o.ComboScore=25,o.PyramidSize=cc.size(1080,1080),o.PokerSize=cc.size(156,212),o.PokerSpace=cc.size(-1,10),o.TargetPoint=13,function(e){e[e.$_A=1]="$_A",e[e.$_2=2]="$_2",e[e.$_3=3]="$_3",e[e.$_4=4]="$_4",e[e.$_5=5]="$_5",e[e.$_6=6]="$_6",e[e.$_7=7]="$_7",e[e.$_8=8]="$_8",e[e.$_9=9]="$_9",e[e.$_10=10]="$_10",e[e.$_J=11]="$_J",e[e.$_Q=12]="$_Q",e[e.$_K=13]="$_K"}(i=o.Poker||(o.Poker={})),function(e){e[e.Spade=0]="Spade",e[e.Club=1]="Club",e[e.Heart=2]="Heart",e[e.Diamond=3]="Diamond"}(o.PokerColor||(o.PokerColor={})),o.Pairs=((n={})[i.$_A]="Q+A",n[i.$_2]="J+2",n[i.$_3]="10+3",n[i.$_4]="9+4",n[i.$_5]="8+5",n[i.$_6]="7+6",n[i.$_7]="7+6",n[i.$_8]="8+5",n[i.$_9]="9+4",n[i.$_10]="10+3",n[i.$_J]="J+2",n[i.$_Q]="Q+A",n[i.$_K]="K",n),o.CardArea=3e4,o.WaittingRate=.2,o.MatchingRate=.4,o.Combo=3,cc._RF.pop()},{}],GameStateController:[function(e,t,o){"use strict";cc._RF.push(t,"b768b1DCFpC4aef+tHUAH/Y","GameStateController"),Object.defineProperty(o,"__esModule",{value:!0});var n,i=e("../Utils/ToSingleton"),r=e("../Command/CommonSignal"),a=e("../Model/PlayModelProxy");(function(e){e[e.Complete=0]="Complete",e[e.Over=1]="Over",e[e.TimeUp=2]="TimeUp"})(n=o.RoundEndType||(o.RoundEndType={}));var s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.pauseCount=0,t.roundstart=!1,t.isReady=!1,t.isOver=!1,t.currentRound=0,t.onResumeCallbacks=[],t}return __extends(t,e),t.prototype.start=function(){this.pauseCount=0},t.prototype.canStart=function(){return this.isReady},t.prototype.roundStart=function(){this.isOver||(console.log(" round start:",++this.currentRound),this.roundstart=!0)},t.prototype.roundEnd=function(e){console.log("round end :",n[e]),this.roundstart=!1,this.isOver=!0,r.GameOverSignal.inst.dispatchOne(e)},t.prototype.isRoundStart=function(){return this.roundstart},t.prototype.pause=function(e){void 0===e&&(e=!1),0==this.isPause()&&(this.onResumeCallbacks.length=0,r.GamePauseSignal.inst.dispatch(),e||this.onResumeCallbacks.push(function(){a.PlayModelProxy.inst.addPauseCount()})),this.pauseCount++},t.prototype.clearResumeCallback=function(){this.onResumeCallbacks.length=0},t.prototype.resume=function(){if(this.pauseCount--,console.assert(this.pauseCount>=0," pause count smaller than 0!!!"),this.pauseCount=Math.max(this.pauseCount,0),this.pauseCount<=0){for(var e=0,t=this.onResumeCallbacks;e<t.length;e++){(0,t[e])()}this.onResumeCallbacks.length=0}},t.prototype.isPause=function(){return this.pauseCount>0},t.prototype.addResumeCallback=function(e){this.onResumeCallbacks||(this.onResumeCallbacks=[]),this.onResumeCallbacks.push(e)},t.prototype.isGameOver=function(){return this.isOver},t}(i.SingleTon());o.GameStateController=s,cc._RF.pop()},{"../Command/CommonSignal":"CommonSignal","../Model/PlayModelProxy":"PlayModelProxy","../Utils/ToSingleton":"ToSingleton"}],GlobalSingleTouchMediator:[function(e,t,o){"use strict";cc._RF.push(t,"02116IZqj1EB5HTsmFmQouR","GlobalSingleTouchMediator"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../Controller/GameStateController"),i=e("../SingleTouchMediator"),r=cc._decorator,a=r.ccclass,s=(r.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onRegister=function(){e.prototype.onRegister.call(this),this.node._touchListener.swallowTouches=!1},t.prototype.onTouchStart=function(e){n.GameStateController.inst.canStart()&&0==n.GameStateController.inst.isRoundStart()&&n.GameStateController.inst.roundStart()},t.prototype.onTouchMove=function(e){},t.prototype.onTouchEnd=function(e){},t.prototype.onTouchCancel=function(e){},t=__decorate([a],t)}(i.default));o.default=s,cc._RF.pop()},{"../../Controller/GameStateController":"GameStateController","../SingleTouchMediator":"SingleTouchMediator"}],GlobalSingleTouchView:[function(e,t,o){"use strict";cc._RF.push(t,"47cdfTkIIlBopkvsd+NlL5V","GlobalSingleTouchView"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../BaseView"),i=e("./GlobalSingleTouchMediator"),r=cc._decorator,a=r.ccclass,s=(r.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onLoad=function(){this.BindMedaitor(i.default)},t.prototype.start=function(){},t=__decorate([a],t)}(n.default));o.default=s,cc._RF.pop()},{"../BaseView":"BaseView","./GlobalSingleTouchMediator":"GlobalSingleTouchMediator"}],HashMap:[function(e,t,o){"use strict";cc._RF.push(t,"4b0e7DzcRNJnZXTYCWgDaDU","HashMap"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function e(){this._list=new Array,this.clear()}return e.prototype.getIndexByKey=function(e){for(var t=this._list.length,o=0;o<t;o++){if(this._list[o].key==e)return o}return-1},e.prototype.keyOf=function(e){for(var t=this._list.length,o=0;o<t;o++){var n=this._list[o];if(n.value.hashKey&&e.hashKey&&n.value.hashKey===e.hashKey||n.value==e)return n.key}return null},Object.defineProperty(e.prototype,"keys",{get:function(){for(var e=new Array,t=0,o=this._list;t<o.length;t++){var n=o[t];n&&e.push(n.key)}return e},enumerable:!0,configurable:!0}),e.prototype.add=function(e,t){var o={key:e,value:t},n=this.getIndexByKey(e);-1!=n?this._list[n]=o:this._list.push(o)},Object.defineProperty(e.prototype,"values",{get:function(){return this._list},enumerable:!0,configurable:!0}),e.prototype.remove=function(e){var t=this.getIndexByKey(e);if(-1!=t){var o=this._list[t];return this._list.splice(t,1),o}return null},e.prototype.has=function(e){return-1!=this.getIndexByKey(e)},e.prototype.get=function(e){var t=this.getIndexByKey(e);return-1!=t?this._list[t].value:null},Object.defineProperty(e.prototype,"length",{get:function(){return this._list.length},enumerable:!0,configurable:!0}),e.prototype.sort=function(e){this._list.sort(e)},e.prototype.forEachKeyValue=function(e){for(var t=this._list.length,o=0;o<t;o++){e(this._list[o])}},e.prototype.forEach=function(e){for(var t=this._list.length,o=0;o<t;o++){var n=this._list[o];e(n.key,n.value)}},e.prototype.clear=function(){this._list=[]},e}();o.HashMap=n,cc._RF.pop()},{}],HelpButtonView:[function(e,t,o){"use strict";cc._RF.push(t,"03cbafaYj9A2a2nFx9nb7GU","HelpButtonView"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../../Command/CommonSignal"),i=e("../../../Controller/GameStateController"),r=e("../../../View/SingleTouchView"),a=cc._decorator,s=a.ccclass,l=(a.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onTouchEnd=function(){i.GameStateController.inst.isGameOver()||(n.ShowHelpLayerSignal.inst.dispatch(),n.ButtonClickSignal.inst.dispatch())},t=__decorate([s],t)}(r.default));o.default=l,cc._RF.pop()},{"../../../Command/CommonSignal":"CommonSignal","../../../Controller/GameStateController":"GameStateController","../../../View/SingleTouchView":"SingleTouchView"}],HelpLabelView:[function(e,t,o){"use strict";cc._RF.push(t,"a73b09hqglE97bWcyKHxW5U","HelpLabelView"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../../Command/CommonSignal"),i=e("../../../Global/GameRule"),r=e("../../../table"),a=cc._decorator,s=a.ccclass,l=(a.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onLoad=function(){n.ShowHelpLayerSignal.inst.addListener(this.renderText,this),n.ShowTutorialSignal.inst.addListener(this.renderText,this)},t.prototype.renderText=function(){var e=parseInt(this.node.name),t=[];switch(e){case 0:case 1:break;case 3:t=[i.TotalTime/60];break;case 5:t=[i.RedrawCost]}this.getComponent(cc.RichText).string=lan.t(r.En_View.BangZhuJieMian,r.En_ID.BangZhuYeMian1+e,t)},t=__decorate([s],t)}(cc.Component));o.default=l,cc._RF.pop()},{"../../../Command/CommonSignal":"CommonSignal","../../../Global/GameRule":"GameRule","../../../table":"table"}],HelpLayerMediator:[function(e,t,o){"use strict";cc._RF.push(t,"ab216iOmFFBBo7YhihjIFYL","HelpLayerMediator"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("./BaseMediator"),i=e("../Command/CommonSignal"),r=e("../Controller/GameStateController"),a=cc._decorator,s=a.ccclass,l=(a.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.closeCallback=null,t}return __extends(t,e),t.prototype.onRegister=function(){i.ShowHelpLayerSignal.inst.addListenerOne(this.showHelp,this),i.ShowTutorialSignal.inst.addListenerOne(this.showGuide,this),i.HideHelpLayerSignal.inst.addListenerOne(this.hideGuide,this)},t.prototype.showHelp=function(e){this.View.isShowed()||(r.GameStateController.inst.pause(),this.closeCallback=e,this.View.Show(function(){},!0))},t.prototype.showGuide=function(e){this.View.isShowed()||(r.GameStateController.inst.pause(!0),this.closeCallback=e,this.View.Show())},t.prototype.hideGuide=function(){0!=this.View.isShowed()&&(r.GameStateController.inst.resume(),this.View.Hide(this.closeCallback),this.closeCallback=null)},t=__decorate([s],t)}(n.default));o.default=l,cc._RF.pop()},{"../Command/CommonSignal":"CommonSignal","../Controller/GameStateController":"GameStateController","./BaseMediator":"BaseMediator"}],HelpLayerView:[function(e,t,o){"use strict";cc._RF.push(t,"7de5dV5nLxKg6SXhg1Pqw8Z","HelpLayerView"),Object.defineProperty(o,"__esModule",{value:!0});var n,i=e("./BaseView"),r=e("./HelpLayerMediator"),a=e("../Command/CommonSignal"),s=cc._decorator,l=s.ccclass,c=s.property;(function(e){e[e.Show=0]="Show",e[e.Hide=1]="Hide"})(n||(n={}));var u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state=n.Hide,t.Next=null,t.Close=null,t.GuidePage=null,t.TotalPage=null,t.Page=null,t.ExtraPages=null,t.extraPages=[],t}return __extends(t,e),t.prototype.onLoad=function(){this.BindMedaitor(r.default),this.state=n.Hide,this.node.scale=1,this.node.active=!1,this.GuidePage.node.on("page-turning",this.onPageChanged,this),this.Close.on(cc.Node.EventType.TOUCH_END,this.close,this),this.Next.on(cc.Node.EventType.TOUCH_END,this.next,this),this.ExtraPages.active=!1},t.prototype.start=function(){},t.prototype.close=function(){a.ButtonClickSignal.inst.dispatch(),a.HideHelpLayerSignal.inst.dispatch()},t.prototype.next=function(){a.ButtonClickSignal.inst.dispatch(),this.GuidePage.scrollToPage((this.GuidePage.getCurrentPageIndex()+1)%this.GuidePage.content.childrenCount,0),this.onPageChanged()},t.prototype.onPageChanged=function(){this.TotalPage&&(this.TotalPage.string=this.GuidePage.content.childrenCount.toString()),this.Page&&(this.Page.string=(this.GuidePage.getCurrentPageIndex()+1).toString()),this.GuidePage.getCurrentPageIndex()>=this.GuidePage.content.childrenCount-1?(this.Next.active=!1,this.Close.active=!0):(this.Next.active=!0,this.Close.active=!1)},t.prototype.isShowed=function(){return this.state==n.Show},t.prototype.Show=function(e,t){if(void 0===t&&(t=!1),!this.isShowed()&&(this.state=n.Show,this.node.active=!0,this.node.stopAllActions(),this.node.scale=0,this.node.runAction(cc.sequence(cc.callFunc(function(){}),cc.scaleTo(.1,1),cc.callFunc(function(){e&&e()}))),this.Next.active=!0,this.Close.active=!1,this.GuidePage.scrollToPage(0,0),this.onPageChanged(),console.log(" isfrom pause:",t),this.ExtraPages))if(t){if(this.GuidePage.content.childrenCount<6)for(var o=0,i=this.ExtraPages.children;o<i.length;o++){var r=i[o],a=cc.instantiate(r);a.active=!0,this.GuidePage.addPage(a),this.extraPages.push(a)}}else for(;this.extraPages.length>0;)this.GuidePage.removePage(this.extraPages.pop())},t.prototype.Hide=function(e){var t=this;0!=this.isShowed()&&(this.state=n.Hide,this.node.stopAllActions(),this.node.runAction(cc.sequence(cc.scaleTo(.1,0),cc.callFunc(function(){t.node.scale=1,e&&e(),t.node.active=!1}))))},__decorate([c(cc.Node)],t.prototype,"Next",void 0),__decorate([c(cc.Node)],t.prototype,"Close",void 0),__decorate([c(cc.PageView)],t.prototype,"GuidePage",void 0),__decorate([c(cc.Label)],t.prototype,"TotalPage",void 0),__decorate([c(cc.Label)],t.prototype,"Page",void 0),__decorate([c(cc.Node)],t.prototype,"ExtraPages",void 0),t=__decorate([l],t)}(i.default);o.default=u,cc._RF.pop()},{"../Command/CommonSignal":"CommonSignal","./BaseView":"BaseView","./HelpLayerMediator":"HelpLayerMediator"}],HitTest:[function(e,t,o){"use strict";cc._RF.push(t,"d44d2Ah+vNF4buI52GsLRYy","HitTest"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,i=n.ccclass,r=(n.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onLoad=function(){this.node.on(cc.Node.EventType.TOUCH_END,function(e){},this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,function(e){},this),this.node.on(cc.Node.EventType.TOUCH_START,function(e){},this),this.node.on(cc.Node.EventType.TOUCH_MOVE,function(e){},this),this.node._touchListener.swallowTouches=!1},t.prototype.start=function(){},t=__decorate([i],t)}(cc.Component));o.default=r,cc._RF.pop()},{}],InitialFacade:[function(e,t,o){"use strict";cc._RF.push(t,"cbbbcO7od5PrqaPNOs8dFh3","InitialFacade"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../Command/InititalCommand"),i=e("../Command/StartGameCommand"),r=e("../Command/LoadAudioCommand"),a=e("../Command/LoadPrefabCommand"),s=e("../../Utils/Celer/CelerSDK"),l=e("../../Manager/StepManager"),c=e("../Command/LoadJsonCommand"),u=function(){function e(e){this.stepMgr=new l.StepManager,this.facade=puremvc.Facade.getInstance(e)}return Object.defineProperty(e,"inst",{get:function(){return this.instance?this.instance:this.instance=new e(e.MULTITON_KEY)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Facade",{get:function(){return console.assert(null!==this.facade," facade is null"),this.facade},enumerable:!0,configurable:!0}),e.prototype.register=function(){var t=this;this.facade.registerCommand(e.INITIALIZATION,n.InitialCommand),this.facade.registerCommand(e.START_UP,i.StartGameCommand),s.CelerSDK.inst.init(function(){t.facade.sendNotification(e.START_UP,t)}),this.stepMgr.register(function(){s.CelerSDK.inst.celerXReady()},e.TOTAL_STEPS)},e.prototype.unregister=function(){this.facade.removeCommand(e.INITIALIZATION),this.facade.removeCommand(e.START_UP)},e.prototype.start=function(){this.register(),this.facade.sendNotification(e.INITIALIZATION,this)},e.prototype.step=function(e){console.log(" initialization step:",e),this.stepMgr.nextStep(e)},e.MULTITON_KEY="INITIAL_FCADE",e.INITIALIZATION="initialization",e.START_UP="startup",e.TOTAL_STEPS=[r.LoadAudioCommand.STEP,a.LoadPrefabCommand.STEP,c.LoadJsonCommand.STEP],e}();o.InitialFacade=u,cc._RF.pop()},{"../../Manager/StepManager":"StepManager","../../Utils/Celer/CelerSDK":"CelerSDK","../Command/InititalCommand":"InititalCommand","../Command/LoadAudioCommand":"LoadAudioCommand","../Command/LoadJsonCommand":"LoadJsonCommand","../Command/LoadPrefabCommand":"LoadPrefabCommand","../Command/StartGameCommand":"StartGameCommand"}],InititalCommand:[function(e,t,o){"use strict";cc._RF.push(t,"a28caT/H41F74cWxJYqN9pz","InititalCommand"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("./LoadPrefabCommand"),i=e("./LoadAudioCommand"),r=e("./LoadJsonCommand"),a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.initializeMacroCommand=function(){this.addSubCommand(n.LoadPrefabCommand),this.addSubCommand(i.LoadAudioCommand),this.addSubCommand(r.LoadJsonCommand)},t}(puremvc.MacroCommand);o.InitialCommand=a,cc._RF.pop()},{"./LoadAudioCommand":"LoadAudioCommand","./LoadJsonCommand":"LoadJsonCommand","./LoadPrefabCommand":"LoadPrefabCommand"}],Level:[function(e,t,o){"use strict";cc._RF.push(t,"3db54FVK6dM2Ik/+eMmSgop","Level"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("./Theme"),i=function(){function e(){}return e.getThemeRandomPool=function(e){return[n.Theme.Number,n.Theme.Sweet]},e}();o.Level=i,cc._RF.pop()},{"./Theme":"Theme"}],LoadAudioCommand:[function(e,t,o){"use strict";cc._RF.push(t,"d4f3eGYUlBES5d8aEvuPQna","LoadAudioCommand"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../Manager/AudioManager"),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.execute=function(e){if(e){var o=e.getBody();o&&o.step&&n.gAudio.init(function(){o.step(t.STEP)})}},t.STEP="LoadAudio",t}(puremvc.SimpleCommand);o.LoadAudioCommand=i,cc._RF.pop()},{"../../Manager/AudioManager":"AudioManager"}],LoadJsonCommand:[function(e,t,o){"use strict";cc._RF.push(t,"d573cvR0rBMFbwD6uHsKYw/","LoadJsonCommand"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../TableManager"),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.execute=function(e){if(e){var o=e.getBody();o&&o.step&&n.TableManager.inst.startLoad("/json",function(){o.step(t.STEP)})}},t.STEP="LoadJsonCommand",t}(puremvc.SimpleCommand);o.LoadJsonCommand=i,cc._RF.pop()},{"../../TableManager":"TableManager"}],LoadPrefabCommand:[function(e,t,o){"use strict";cc._RF.push(t,"8b33fPnvCZEJ7bc/zCVv9My","LoadPrefabCommand"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../Factory/GameFactory"),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.execute=function(e){n.gFactory.init(function(){if(e){var o=e.getBody();o&&o.step&&o.step(t.STEP)}})},t.STEP="LoadPrefab",t}(puremvc.SimpleCommand);o.LoadPrefabCommand=i,cc._RF.pop()},{"../../Factory/GameFactory":"GameFactory"}],LoadingPageMediator:[function(e,t,o){"use strict";cc._RF.push(t,"359acCsI6FNpLUAuWOw+Fv4","LoadingPageMediator"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../View/BaseMediator"),i=e("../../Utils/Celer/CelerSDK"),r=e("../../Command/CommonSignal"),a=cc._decorator,s=a.ccclass,l=(a.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.time=CELER_X?5e3:3e3,t.startTime=0,t}return __extends(t,e),t.prototype.onRegister=function(){this.startTime=Date.now(),r.GameReadySignal.inst.addListener(this.onGameReady,this)},t.prototype.onGameReady=function(){var e=this;r.ShowTutorialSignal.inst.dispatch(),r.HideHelpLayerSignal.inst.dispatch();var t=Date.now()-this.startTime;console.log(" -- game init done, hide loading page: ",t),t<=this.time?setTimeout(function(){e.View.Hide(function(){e.startGame()})},this.time-t):this.View.Hide(function(){e.startGame()})},t.prototype.startGame=function(){i.CelerSDK.inst.isNew()?r.ShowTutorialSignal.inst.dispatchOne(function(){r.GameStartSignal.inst.dispatch()}):r.GameStartSignal.inst.dispatch()},t.prototype.onDestroy=function(){},t=__decorate([s],t)}(n.default));o.default=l,cc._RF.pop()},{"../../Command/CommonSignal":"CommonSignal","../../Utils/Celer/CelerSDK":"CelerSDK","../../View/BaseMediator":"BaseMediator"}],LoadingView:[function(e,t,o){"use strict";cc._RF.push(t,"dfec6LZreJCaa8QdaMxRAO/","LoadingView"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../View/BaseView"),i=e("./LoadingPageMediator"),r=cc._decorator,a=r.ccclass,s=(r.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onLoad=function(){this.node.scale=1,this.node.opacity=255,this.BindMedaitor(i.default)},t.prototype.start=function(){},t.prototype.Hide=function(e){var t=this;this.node.runAction(cc.sequence(cc.fadeOut(.5),cc.callFunc(function(){t.node.active=!1,e()})))},t=__decorate([a],t)}(n.default));o.default=s,cc._RF.pop()},{"../../View/BaseView":"BaseView","./LoadingPageMediator":"LoadingPageMediator"}],LogHandler:[function(e,t,o){"use strict";cc._RF.push(t,"a4747QIvUBIo6Ktpx/xQwuB","LogHandler"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(e){function t(){var o=e.call(this)||this;if(o.logFunc=console.log,o.logMsg=null,o.frameTimes=0,o.now=0,o.Frame=20,o.totalFrames=0,o.startTime=0,window.addEventListener)for(var n=0,i=t.LISTENNING_EVENTS;n<i.length;n++){var r=i[n],a="trigger"+r.charAt(0).toLocaleUpperCase()+r.substring(1);o[a]&&"function"==typeof o[a]&&window.addEventListener(r,o[a].bind(o))}return o}return __extends(t,e),t.prototype.dumpFrameInfo=function(){var e=(Date.now()-this.startTime)/1e3,t=e/this.totalFrames;this.log(" total frames:",this.totalFrames," ,total cost time:",e+"s"," , per frame cost time ave:"+t+"s")},t.prototype.log=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.addLog.apply(this,e),this.sendLog()},t.prototype.ready=function(){console.log(t.VERSION)},t.prototype.initLog=function(e){var o=this;cc.director.once(cc.Director.EVENT_AFTER_SCENE_LAUNCH,function(){o.frameTimes=0,o.now=Date.now(),o.startTime=Date.now()},this),cc.director.on(cc.Director.EVENT_AFTER_DRAW,function(){o.frameTimes++,o.totalFrames++,o.frameTimes>=o.Frame&&(o.frameTimes=0,o.now=Date.now())},this),this.logFunc=e,window.consoleError=console.error,window.consoleWarn=console.warn,window.consoleLog=console.log,window.consoleAssert=console.assert,console.error=function(){for(var e,o=[],n=0;n<arguments.length;n++)o[n]=arguments[n];(e=t.inst).log.apply(e,["[ERROR]"].concat(o))},console.warn=function(){for(var e,o=[],n=0;n<arguments.length;n++)o[n]=arguments[n];(e=t.inst).log.apply(e,["[WARN]"].concat(o))},console.log=function(){for(var e,o=[],n=0;n<arguments.length;n++)o[n]=arguments[n];(e=t.inst).log.apply(e,["[INFO]"].concat(o))},console.assert=function(e){for(var o,n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];e||(o=t.inst).log.apply(o,["[ASSERT ERROR]"].concat(n))}},t.prototype.formatLogArguments=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var o="",n=0;n<arguments.length;n++){var i=typeof arguments[n];"string"==i||"number"==i?o+=" "+arguments[n]:"object"==i?o+=" "+JSON.stringify(arguments[n]):"boolean"==i&&arguments[n].toString&&(o+=arguments[n].toString())}return o},t.prototype.addLog=function(){for(var e=[],o=0;o<arguments.length;o++)e[o]=arguments[o];null==this.logMsg&&(this.logMsg={});var n=this.formatLogArguments.apply(this,e),i=this.getFullTime(new Date);this.logMsg[i]=t.VERSION+n},t.prototype.getFullTime=function(e){var t="";t+=e.getFullYear();var o=e.getMonth()+1;t+="-"+(o>=10?o:"0"+o);var n=e.getDate();t+="-"+(n>=10?n:"0"+n);var i=e.getHours();t+="  "+(i>=10?i:"0"+i);var r=e.getMinutes();t+=":"+(r>=10?r:"0"+r);var a=e.getSeconds();return t+=":"+(a>=10?a:"0"+a)},t.prototype.sendLog=function(){this.logFunc&&null!=this.logMsg&&(this.logFunc(JSON.stringify(this.logMsg)),this.logMsg=null)},t.prototype.triggerClose=function(e){this.addLog("triggerClose"),this.sendLog()},t.prototype.triggerLoad=function(e){this.addLog("triggerLoad"),this.sendLog()},t.prototype.triggerUnload=function(e){this.addLog("triggerUnload"),this.sendLog()},t.prototype.triggerOnunload=function(e){this.addLog("triggerUnload"),this.sendLog()},t.prototype.triggerError=function(e){this.addLog("triggerError"),this.addLog(e.message),this.sendLog()},t.prototype.triggerFocus=function(e){this.addLog("triggerFocus"),this.sendLog()},t.prototype.triggerBlur=function(e){this.addLog("triggerBlur"),this.sendLog()},t.prototype.triggerAbort=function(e){this.addLog("triggerAbort"),this.sendLog()},t.prototype.triggerSuspend=function(e){this.addLog("triggerSuspend"),this.sendLog()},t.prototype.beforeunload=function(e){this.addLog("beforeunload"),this.sendLog()},t.VERSION=window.GAME_VERSION||"DominoCash version 9 : ",t.LISTENNING_EVENTS=["error"],t}(e("./ToSingleton").SingleTon());o.LogHandler=n,cc._RF.pop()},{"./ToSingleton":"ToSingleton"}],NumberChangedView:[function(e,t,o){"use strict";cc._RF.push(t,"5f2acutWoZLka/VldveJWjk","NumberChangedView"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("./BaseView"),i=cc._decorator,r=i.ccclass,a=(i.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.num=0,t.showNum=0,t.step=0,t.label=null,t.action=!0,t.STEP=120,t.callback=null,t}return __extends(t,e),Object.defineProperty(t.prototype,"Label",{get:function(){return this.label?this.label:this.label=this.node.getComponent(cc.Label)},enumerable:!0,configurable:!0}),t.prototype.onLoad=function(){},t.prototype.start=function(){},t.prototype.onStep=function(e){},t.prototype.onNumberChanged=function(e,t){if(this.num=e,this.callback=t,this.num!=this.showNum){var o=this.num-this.showNum;this.step=o>0?Math.ceil(o/this.STEP):Math.floor(o/this.STEP),this.action&&this.node.runAction(cc.sequence(cc.scaleTo(.1,1.4),cc.delayTime(.2),cc.scaleTo(.1,1)))}else this.step=0},t.prototype.update=function(e){this.num!=this.showNum&&(this.showNum+=this.step,this.onStep(this.step),(this.showNum>this.num&&this.step>0||this.showNum<this.num&&this.step<0)&&(this.showNum=this.num,this.step=0)),Math.abs(this.num-this.showNum)<=Math.abs(this.step)&&this.callback&&"function"==typeof this.callback&&(this.callback(),this.callback=null),this.Label.string=this.showNum>=0?this.showNum.toString():"/"+Math.abs(this.showNum).toString()},t=__decorate([r],t)}(n.default));o.default=a,cc._RF.pop()},{"./BaseView":"BaseView"}],OverFontView:[function(e,t,o){"use strict";cc._RF.push(t,"e6fd6gGJZ5JFqKlSrbwhFli","OverFontView"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../../Command/CommonSignal"),i=e("../../../Controller/GameStateController"),r=e("../../../Controller/ResourceController"),a=e("../../Command/GamePlaySignal"),s=cc._decorator,l=s.ccclass,c=(s.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),Object.defineProperty(t.prototype,"Gold",{get:function(){return this.node.getChildByName("Gold")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Sprite",{get:function(){return this.getComponent(cc.Sprite)},enumerable:!0,configurable:!0}),t.prototype.onLoad=function(){this.node.active=!1,this.Gold.active=!1,n.GameOverSignal.inst.addListenerOne(this.onGameOver,this)},t.prototype.onGameOver=function(e){var t=this;console.log("OverFont:",i.RoundEndType[e],Date.now()),this.node.scaleX=0;var o=function(){n.OpenResultLayerSignal.inst.dispatchOne(e)};switch(e){case i.RoundEndType.Complete:this.Sprite.spriteFrame=r.ResourceController.inst.getTitleSprite(r.Title.CompleteBig),o=function(){},a.AllPokersFlySignal.inst.addOnceOne(function(t){console.log(" all Fly cost :",t," ms"),setTimeout(function(){n.OpenResultLayerSignal.inst.dispatchOne(e)},t)},this);break;case i.RoundEndType.Over:this.Sprite.spriteFrame=r.ResourceController.inst.getTitleSprite(r.Title.Over);break;case i.RoundEndType.TimeUp:this.Sprite.spriteFrame=r.ResourceController.inst.getTitleSprite(r.Title.TimeUp)}this.node.active=!0,this.node.runAction(cc.sequence(cc.scaleTo(.2,1.4,1),cc.scaleTo(.1,1.2,1.2),cc.callFunc(function(){e==i.RoundEndType.Complete&&(t.Gold.scaleX=0,t.Gold.active=!0,t.Gold.runAction(cc.sequence(cc.scaleTo(.2,1.3,1),cc.scaleTo(.1,1,1))))}),cc.delayTime(1),cc.callFunc(o)))},t=__decorate([l],t)}(cc.Component));o.default=c,cc._RF.pop()},{"../../../Command/CommonSignal":"CommonSignal","../../../Controller/GameStateController":"GameStateController","../../../Controller/ResourceController":"ResourceController","../../Command/GamePlaySignal":"GamePlaySignal"}],PairsLabel:[function(e,t,o){"use strict";cc._RF.push(t,"f39a1UA16NMr4DpAtmYkFQm","PairsLabel"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../../Command/CommonSignal"),i=e("../../../table"),r=cc._decorator,a=r.ccclass,s=(r.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onLoad=function(){n.GameStartSignal.inst.addListener(this.renderText,this)},t.prototype.renderText=function(){this.getComponent(cc.RichText).string=lan.t(i.En_View.ZhuJieMian,i.En_ID.PeiDui)},t=__decorate([a],t)}(cc.Component));o.default=s,cc._RF.pop()},{"../../../Command/CommonSignal":"CommonSignal","../../../table":"table"}],PairsView:[function(e,t,o){"use strict";cc._RF.push(t,"a3e5fFBnuxCT7xUOORIh0hu","PairsView"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../../Global/GameRule"),i=e("../../Command/GamePlaySignal"),r=cc._decorator,a=r.ccclass,s=(r.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),Object.defineProperty(t.prototype,"Normal",{get:function(){return this.node.getChildByName("Normal")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Light",{get:function(){return this.node.getChildByName("Light")},enumerable:!0,configurable:!0}),t.prototype.onLoad=function(){i.UpdateCurrentPokerSignal.inst.addListenerOne(this.onCurrentPokerUpdated,this)},t.prototype.start=function(){},t.prototype.onCurrentPokerUpdated=function(e){n.Pairs[e]==this.node.name?(this.Light.active=!0,this.Normal.active=!1):(this.Light.active=!1,this.Normal.active=!0)},t=__decorate([a],t)}(cc.Component));o.default=s,cc._RF.pop()},{"../../../Global/GameRule":"GameRule","../../Command/GamePlaySignal":"GamePlaySignal"}],PlayModelProxy:[function(e,t,o){"use strict";cc._RF.push(t,"50835VU6k9M3pgXsJbG5zxG","PlayModelProxy"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../Utils/ToSingleton"),i=e("../Controller/GameStateController"),r=e("../GamePlay/Model/GamePlayModel"),a=e("../Command/CommonSignal"),s=e("../Global/GameRule"),l=e("../GamePlay/Command/GamePlaySignal"),c=e("../GamePlay/Model/Poker/PokerModel"),u=e("../Controller/ResourceController"),d=e("../Utils/Cocos"),p=e("../GamePlay/Model/Poker/PokerParentModel"),h=e("../Utils/HashMap"),f=function(e){function t(){var t=e.call(this)||this;return t.waittingRootNode=null,t.isGameOver=!1,t.playerModel=null,t.selectedPokers=[],t.actionCache=[],t.actionLimit=0,t.bindSignal(),t}return __extends(t,e),Object.defineProperty(t.prototype,"Model",{get:function(){return this.playerModel?this.playerModel:this.playerModel=new r.GamePlayModel},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"SelectableCount",{get:function(){return this.Model.SelectableCount},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"TimeLeft",{get:function(){return this.Model.Time},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"PlayerScore",{get:function(){return this.Model.PlayerScore},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"NoviceScore",{get:function(){return this.Model.NoviceScore},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"PointSpread",{get:function(){return this.Model.ScoreSpread},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"TimeBonus",{get:function(){return this.Model.Timebonus},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Theme",{get:function(){return this.Model.Theme},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Level",{get:function(){return this.Model.Level},set:function(e){this.Model.Level=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"PauseScore",{get:function(){return this.Model.PauseScore},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"FreePauseCount",{get:function(){return Math.max(0,s.FreePauseLimit-this.Model.PauseCount)},enumerable:!0,configurable:!0}),t.prototype.bindSignal=function(){},t.prototype.initGametheme=function(){this.Model.initGametheme()},t.prototype.getTotalScore=function(){return this.Model.TotalScore},t.prototype.addPauseCount=function(){this.Model.addPauseCount()},t.prototype.addGameTime=function(e){i.GameStateController.inst.isPause()||0==i.GameStateController.inst.isRoundStart()||this.isGameOver||(this.Model.Time+=e,a.UpdateTimeNumber.inst.dispatchOne(this.Model.Time),a.TimeAnimationStateChanged.inst.dispatchOne(this.Model.Time<=30),this.Model.Time<=0&&i.GameStateController.inst.roundEnd(i.RoundEndType.TimeUp))},t.prototype.gameInit=function(){this.Model.initDrawCard(),this.initGametheme()},t.prototype.gameTestInit=function(){this.gameInit()},t.prototype.getScoreByType=function(e){return this.Model.getScoreByType(e)},t.prototype.drawPoker2Selectable=function(){this.clearSelected(),this.Model.resetCombo();var e=this.Model.drawPoker2Selectable();if(e.length>0){for(var t={pokerIDs:[],parents:new h.HashMap,addScore:0,scoreType:r.ScoreType.Normal,indexs:new h.HashMap,layers:new h.HashMap},o=0,n=e;o<n.length;o++){var i=n[o];t.pokerIDs.unshift(i),t.parents.add(i,p.PokerParent.Draw)}this.addActionCache(t)}},t.prototype.drawPoker2Draw=function(e){this.Model.resetCombo(),l.RedrawSiganal.inst.dispatch(),this.Model.SelectableCount>=5&&l.DrawTurnOverSignal.inst.dispatch();var t=this.Model.addPlayerScore(-s.RedrawCost,r.ScoreType.Normal,1,e),o=this.Model.drawPoker2Draw();if(o.length>0){for(var n={pokerIDs:[],parents:new h.HashMap,addScore:0!=t?-t:t,scoreType:r.ScoreType.Normal,indexs:new h.HashMap,layers:new h.HashMap},i=0,a=o;i<a.length;i++){var c=a[i];n.pokerIDs.push(c),n.parents.add(c,p.PokerParent.Selectable)}this.addActionCache(n)}},t.prototype.checkCanMeet13=function(e,t){console.log(" check can meet 13:",e,t);var o=e?c.PokerModel.getModelById(e):null,n=t?c.PokerModel.getModelById(t):null;if(this.Model.checkCanMeet13(e,t)){var i={pokerIDs:[],parents:new h.HashMap,addScore:0,scoreType:r.ScoreType.Normal,indexs:new h.HashMap,layers:new h.HashMap};return o&&(i.pokerIDs.push(e),i.parents.add(e,o.Parent.Type),o.Parent.Type==p.PokerParent.Pyramid&&(i.indexs.add(e,o.Pyramid.Index),i.layers.add(e,o.Pyramid.Layer))),n&&(i.pokerIDs.push(t),i.parents.add(t,n.Parent.Type),n.Parent.Type==p.PokerParent.Pyramid&&(i.indexs.add(t,n.Pyramid.Index),i.layers.add(t,n.Pyramid.Layer))),i.addScore=-this.Model.matchSuccess([o,n]),i.pokerIDs.length>0&&this.addActionCache(i),!0}return!1},t.prototype.isTopOfSelectable=function(e){return this.Model.isTopOfSelectable(e)},t.prototype.selectPoker=function(e){console.log("before selected:",this.selectedPokers);var t=c.PokerModel.getModelById(e);this.selectedPokers.length>0?(this.checkCanMeet13(e,this.selectedPokers[0])||(this.shake([e,this.selectedPokers[0]]),this.Model.resetCombo()),c.PokerModel.getModelById(this.selectedPokers[0]).setSelected(!1),this.clearSelected(),l.UpdateCurrentPokerSignal.inst.dispatchOne(0)):this.checkCanMeet13(e,null)||(this.selectedPokers.push(e),l.UpdateCurrentPokerSignal.inst.dispatchOne(t.Value),t.setSelected(!0)),console.log("after selected:",this.selectedPokers)},t.prototype.clearSelected=function(){for(var e=0,t=this.selectedPokers;e<t.length;e++){var o=t[e];c.PokerModel.getModelById(o).setSelected(!1)}this.selectedPokers=[],l.UpdateCurrentPokerSignal.inst.dispatchOne(0)},t.prototype.onMoved=function(e,t){var o=c.PokerModel.getModelById(e);if(o){this.clearSelected(),l.UpdateCurrentPokerSignal.inst.dispatchOne(o.Value),o.Position.onMoved(t);for(var n=0,i=this.Model.getNeedCheckCrossPokers();n<i.length;n++){i[n].setSelected(!1)}var r=this.getCrossPoker(e);r.area>=s.CardArea*s.MatchingRate&&r.model&&r.model.setSelected(!0)}},t.prototype.getCrossPoker=function(e){var t=c.PokerModel.getModelById(e),o=u.ResourceController.inst.getPokerNodeByID(e);if(t&&o){for(var n=0,i=null,r=0,a=this.Model.getNeedCheckCrossPokers();r<a.length;r++){var s=a[r];if(s.ID!=e){var l=u.ResourceController.inst.getPokerNodeByID(s.ID);if(l){var p=d.ConvertToNodeSpaceAR(o,l.parent),h=cc.rect(p.x-o.width/2,p.y-o.height/2,o.width,o.height),f=l.getBoundingBox(),g=d.AreaOf2CrossRect(h,f);g>n&&(n=g,i=s)}}}return{model:i,area:n}}return{model:null,area:0}},t.prototype.onCancel=function(e){var t=c.PokerModel.getModelById(e);t&&t.Position.onMovedEnd(!0)},t.prototype.onMovedEnd=function(e){l.UpdateCurrentPokerSignal.inst.dispatchOne(0);var t=c.PokerModel.getModelById(e),o=u.ResourceController.inst.getPokerNodeByID(e);if(t&&o){var n=this.getCrossPoker(e),i=n.area,a=n.model;console.log("pokerArea:",i,", cross ID:",a?a.ID:"null");var f=0;if(this.waittingRootNode.childrenCount<=0){var g=d.ConvertToNodeSpaceAR(o,this.waittingRootNode.parent),m=cc.rect(g.x-o.width/2,g.y-o.height/2,o.width,o.height),y=d.AreaOf2CrossRect(m,this.waittingRootNode.getBoundingBox());y>i&&(i=y,f=y,a=null)}if(console.log("waittingArea:",f),f<s.CardArea*s.WaittingRate&&i<s.CardArea*s.MatchingRate)t.Position.onMovedEnd(!0);else if(t.Position.onMovedEnd(!1),f>=s.CardArea*s.WaittingRate){var P={pokerIDs:[t.ID],parents:new h.HashMap,addScore:0,scoreType:r.ScoreType.Normal,indexs:new h.HashMap,layers:new h.HashMap};P.parents.add(t.ID,t.Parent.Type),t.Parent.Type==p.PokerParent.Pyramid&&(P.indexs.add(t.ID,t.Pyramid.Index),P.layers.add(t.ID,t.Pyramid.Layer)),this.Model.dragToWaitting(t)?(this.addActionCache(P),this.Model.resetCombo()):t.Position.onMovedEnd(!0)}else i>=s.CardArea*s.MatchingRate?(this.checkCanMeet13(a.ID,t.ID)?t.Position.onMovedEnd(!1):(this.Model.resetCombo(),t.Position.onMovedEnd(!0)),a.setSelected(!1)):t.Position.onMovedEnd(!0)}},t.prototype.shake=function(e){l.ShakePokerSignal.inst.dispatchOne(e)},t.prototype.indexOfSelectable=function(e){return this.Model.indexOfSelectable(e)},t.prototype.addActionCache=function(e){this.actionCache.push(e),CELER_X&&(this.actionLimit=this.actionCache.length-1),l.UpdateRevertButtonSignal.inst.dispatchOne(this.actionCache.length>this.actionLimit)},t.prototype.revert=function(e){if(!(this.actionCache.length<=0||this.actionCache.length<=this.actionLimit)&&i.GameStateController.inst.isRoundStart()){var t=this.actionCache.pop();this.Model.resetCombo(),this.clearSelected();for(var o=0;o<t.pokerIDs.length;++o){var n=t.pokerIDs[o],r=c.PokerModel.getModelById(n);switch(this.Model.cleanPoker(r),t.parents.get(n)){case p.PokerParent.Draw:this.Model.addToDraw(r);break;case p.PokerParent.Pyramid:this.Model.addToPyramid(t.indexs.get(n),t.layers.get(n),r);break;case p.PokerParent.Recycle:break;case p.PokerParent.Selectable:this.Model.addToSelectable(r);break;case p.PokerParent.Waitting:this.Model.addToWaitting(r)}l.DispatchPokerSignal.inst.dispatch()}this.Model.addPlayerScore(t.addScore,t.scoreType,1,e),l.UpdateRevertButtonSignal.inst.dispatchOne(this.actionCache.length>this.actionLimit)}},Object.defineProperty(t.prototype,"RecycleCount",{get:function(){return this.Model.RecycledCount},enumerable:!0,configurable:!0}),t.prototype.dump=function(){this.Model.dump()},t}(n.SingleTon());o.PlayModelProxy=f,!CELER_X&&(window.Game=f.inst),cc._RF.pop()},{"../Command/CommonSignal":"CommonSignal","../Controller/GameStateController":"GameStateController","../Controller/ResourceController":"ResourceController","../GamePlay/Command/GamePlaySignal":"GamePlaySignal","../GamePlay/Model/GamePlayModel":"GamePlayModel","../GamePlay/Model/Poker/PokerModel":"PokerModel","../GamePlay/Model/Poker/PokerParentModel":"PokerParentModel","../Global/GameRule":"GameRule","../Utils/Cocos":"Cocos","../Utils/HashMap":"HashMap","../Utils/ToSingleton":"ToSingleton"}],PokerFrontView:[function(e,t,o){"use strict";cc._RF.push(t,"40f80G9XzVKFZrzACiTqx8c","PokerFrontView"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../../Model/PlayModelProxy"),i=e("../../Model/Poker/PokerParentModel"),r=e("../../Model/Poker/PokerPosModel"),a=cc._decorator,s=a.ccclass,l=(a.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.model=null,t}return __extends(t,e),Object.defineProperty(t.prototype,"Front",{get:function(){return this.node.getChildByName("Front")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Model",{get:function(){return this.model},enumerable:!0,configurable:!0}),t.prototype.onLoad=function(){r.PokerPositionChanged.inst.addListenerOne(this.onParentChanged,this)},t.prototype.onParentChanged=function(e){if(this.model.ID==e){if(this.model.Parent.Type==i.PokerParent.Selectable){var t=n.PlayModelProxy.inst.indexOfSelectable(this.model);return t<0?void console.error(this.model.ID," is not selectable."):void(t>=n.PlayModelProxy.inst.SelectableCount-4?this.Front.active=!0:this.Front.active=!1)}this.Front.active=!0}},t.prototype.reuse=function(e){this.model=e},t.prototype.unuse=function(){this.model=null},t=__decorate([s],t)}(cc.Component));o.default=l,cc._RF.pop()},{"../../../Model/PlayModelProxy":"PlayModelProxy","../../Model/Poker/PokerParentModel":"PokerParentModel","../../Model/Poker/PokerPosModel":"PokerPosModel"}],PokerLockView:[function(e,t,o){"use strict";cc._RF.push(t,"171e2MiiSNGGZc7zn4bjrN4","PokerLockView"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../../View/BaseView"),i=e("../../Model/Poker/PyramidModel"),r=cc._decorator,a=r.ccclass,s=(r.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.model=null,t}return __extends(t,e),Object.defineProperty(t.prototype,"Model",{get:function(){return this.model},enumerable:!0,configurable:!0}),t.prototype.reuse=function(e){this.model=e,this.Lock.active=!1},t.prototype.unuse=function(){this.model=null},Object.defineProperty(t.prototype,"Lock",{get:function(){return this.node.getChildByName("Locked")},enumerable:!0,configurable:!0}),t.prototype.onLoad=function(){i.LockStateChanged.inst.addListenerTwo(this.onLockStateChanged,this)},t.prototype.start=function(){},t.prototype.onLockStateChanged=function(e,t){this.model&&this.model.ID==e&&(this.Lock.active=t)},t=__decorate([a],t)}(n.default));o.default=s,cc._RF.pop()},{"../../../View/BaseView":"BaseView","../../Model/Poker/PyramidModel":"PyramidModel"}],PokerModel:[function(e,t,o){"use strict";cc._RF.push(t,"5f9a5xlM7VJ/YU3swUKoL/7","PokerModel"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("./PokerStateModel"),i=e("./PyramidModel"),r=e("../../../Utils/HashMap"),a=e("./PokerParentModel"),s=e("./PokerPosModel"),l=e("../../../Utils/Signal"),c=e("../../Command/GamePlaySignal"),u=e("../../../Global/GameRule"),d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(l.BaseSignal);o.PokerSelectedSignal=d;var p=function(){function e(t,o){this.pokerState=null,this.pyramidModel=null,this.posistion=null,this.parent=null,this.value=0,this.selected=!1,this.id="",this.value=t,this.color=o,e.PokerCount++,this.id="poker:"+e.PokerCount+"-"+this.value+"-"+u.PokerColor[o],this.pokerState=new n.PokerStateModel(this),this.parent=new a.PokerParentModel(this),this.posistion=new s.PokerPosModel(this),e.pokerMap.add(this.id,this),c.PokerModelCreatedSignal.inst.dispatchOne(this)}return e.getModelById=function(e){return 0==this.pokerMap.has(e)&&console.error(e," poker model not existed!"),this.pokerMap.get(e)},Object.defineProperty(e.prototype,"ID",{get:function(){return this.id},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"State",{get:function(){return this.pokerState},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Position",{get:function(){return this.posistion},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Parent",{get:function(){return this.parent},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Value",{get:function(){return this.value},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Color",{get:function(){return this.color},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Pyramid",{get:function(){return this.pyramidModel},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isSelected",{get:function(){return this.selected},enumerable:!0,configurable:!0}),e.prototype.setSelected=function(e){this.selected!=e&&(this.selected=e,d.inst.dispatchTwo(this.ID,this.selected))},e.prototype.isPyramidPoker=function(){return null!=this.pyramidModel},e.prototype.setFront=function(){this.pokerState.setFront()},e.prototype.setBack=function(){this.pokerState.setBack()},e.prototype.removeFromPyramid=function(){this.isPyramidPoker()&&(this.pyramidModel.destory(),delete this.pyramidModel,this.pyramidModel=null)},e.prototype.addToPyramid=function(e,t){this.isPyramidPoker()?console.error("Poker:",this.ID," is already added to pyramid."):this.Parent.isOnWaitting()?console.error("Poker:",this.ID," cant change waiting to pyramid."):this.Parent.isOnSelectable()?console.error("Poker:",this.ID," cant change selectable to pyramid."):(this.setSelected(!1),this.pyramidModel=new i.PyramidModel(this,e,t),this.parent.toPyramid(),this.posistion.updatePosition(),this.pokerState.updateState(e))},e.prototype.addToRecycle=function(){this.setSelected(!1),this.removeFromPyramid(),this.parent.toRecycle(),this.posistion.updatePosition(),this.pokerState.updateState()},e.prototype.addToDraw=function(){this.isPyramidPoker()?console.error("poker on pyramid cant move to Draw:",this.ID):(this.setSelected(!1),this.parent.toDraw(),this.posistion.updatePosition(),this.pokerState.updateState())},e.prototype.addToSelectable=function(){this.isPyramidPoker()?console.error("poker on pyramid cant move to Selectable:",this.ID):(this.setSelected(!1),this.parent.toSelectable(),this.posistion.updatePosition(),this.pokerState.updateState())},e.prototype.addToWaitting=function(){this.removeFromPyramid(),this.setSelected(!1),this.parent.toWaitting(),this.posistion.updatePosition(),this.pokerState.updateState()},e.prototype.onClick=function(){},e.prototype.onDrag=function(e,t){},e.prototype.clean=function(){this.parent.clean()},e.PokerCount=0,e.pokerMap=new r.HashMap,e}();o.PokerModel=p,cc._RF.pop()},{"../../../Global/GameRule":"GameRule","../../../Utils/HashMap":"HashMap","../../../Utils/Signal":"Signal","../../Command/GamePlaySignal":"GamePlaySignal","./PokerParentModel":"PokerParentModel","./PokerPosModel":"PokerPosModel","./PokerStateModel":"PokerStateModel","./PyramidModel":"PyramidModel"}],PokerParentModel:[function(e,t,o){"use strict";cc._RF.push(t,"f945f8dbWlOUqBGFF9kH/ie","PokerParentModel"),Object.defineProperty(o,"__esModule",{value:!0});var n,i=e("../../../Utils/Signal");(function(e){e[e.Pyramid=0]="Pyramid",e[e.Draw=1]="Draw",e[e.Recycle=2]="Recycle",e[e.Selectable=3]="Selectable",e[e.Waitting=4]="Waitting"})(n=o.PokerParent||(o.PokerParent={}));var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(i.BaseSignal);o.PokerParentChanged=r;var a=function(){function e(e){this.model=null,this.type=null,this.model=e}return Object.defineProperty(e.prototype,"Type",{get:function(){return this.type},enumerable:!0,configurable:!0}),e.prototype.toPyramid=function(){this.type!=n.Pyramid&&(this.type=n.Pyramid,this.parentChanged())},e.prototype.toDraw=function(){this.type!=n.Draw&&(this.type=n.Draw,this.parentChanged())},e.prototype.toRecycle=function(){this.type!=n.Recycle&&(this.type=n.Recycle,this.parentChanged())},e.prototype.toWaitting=function(){this.type!=n.Waitting&&(this.type=n.Waitting,this.parentChanged())},e.prototype.toSelectable=function(){this.type!=n.Selectable&&(this.type=n.Selectable,this.parentChanged())},e.prototype.parentChanged=function(){r.inst.dispatchTwo(this.model.ID,this.type)},e.prototype.isOnPyramid=function(){return this.type==n.Pyramid},e.prototype.isOnRecycle=function(){return this.type==n.Recycle},e.prototype.isOnDraw=function(){return this.type==n.Draw},e.prototype.isOnSelectable=function(){return this.type==n.Selectable},e.prototype.isOnWaitting=function(){return this.type==n.Waitting},e.prototype.clean=function(){this.type=null},e}();o.PokerParentModel=a,cc._RF.pop()},{"../../../Utils/Signal":"Signal"}],PokerPosMediator:[function(e,t,o){"use strict";cc._RF.push(t,"e3faehhqwRA+KXQ+7ICVSwx","PokerPosMediator"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../../Command/CommonSignal"),i=e("../../../Utils/Cocos"),r=e("../../../Utils/Random"),a=e("../../../View/BaseMediator"),s=e("../../../View/Transform/RotationView"),l=e("../../Command/GamePlaySignal"),c=e("../../Model/Poker/PokerPosModel"),u=cc._decorator,d=u.ccclass,p=(u.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.isShaking=!1,t}return __extends(t,e),t.prototype.onRegister=function(){var e=this;c.PokerPositionChanged.inst.addListenerFour(this.onPositionChanged,this),l.ShakePokerSignal.inst.addListenerOne(this.shake,this),n.GamePauseSignal.inst.addListener(function(){e.node.group="default"},this),n.GameOverSignal.inst.addListener(function(){e.node.group="default"},this)},t.prototype.onPositionChanged=function(e,t,o,n){var a=this;if(void 0===n&&(n=c.MoveType.Normal),this.View.Model.ID==e){var l=.2,u=function(){};switch(n){case c.MoveType.Normal:u=function(){a.node.group="default"},l=.2;break;case c.MoveType.Drag:this.node.group="drag",l=0;break;case c.MoveType.Return:l=.1,this.node.group="drag",u=function(){a.node.group="default"}}if(this.View.Model.Parent.isOnRecycle()){var d=r.Random.getRandom(0,400)+200,p=Math.max(200,r.Random.getRandom(0,2900-this.node.y)),h=0,f=r.Random.getRandom(2,3.5);this.node.x>0?(h=this.node.x-f*d,d=this.node.x-d):(h=this.node.x+f*d,d=this.node.x+d),p=this.node.y+p;var g=i.Distance(this.node.position,cc.v2(d,p))/r.Random.getRandom(1500,2e3),m=i.Distance(cc.v2(d,p),cc.v2(h,0))/r.Random.getRandom(1800,2300);this.View.onPositionChanged(cc.v2(d,p),g,function(){a.View.onPositionChanged(cc.v2(h,0),m,function(){a.View.onPositionChanged(t,0,u,0)})}),this.getComponent(s.default).onRotationChanged(1800*(g+m),g+m,function(){a.getComponent(s.default).onRotationChanged(0,0,function(){})})}else this.getComponent(s.default).onRotationChanged(0,l,function(){}),this.View.onPositionChanged(t,l,u,0)}},t.prototype.shake=function(e){var t=this;if(!(e.indexOf(this.View.Model.ID)<0||this.isShaking)){this.isShaking=!0;var o=this.View.TargetPos.clone(),n=o.add(cc.v2(-10,0)),i=o.add(cc.v2(10,0));this.View.onPositionChanged(n,.025,function(){t.View.onPositionChanged(i,0,function(){t.View.onPositionChanged(n,.05,function(){t.View.onPositionChanged(i,.05,function(){t.View.onPositionChanged(n,.05,function(){t.View.onPositionChanged(i,.05,function(){t.View.onPositionChanged(o,.025,function(){t.isShaking=!1},0)},0)},0)},0)},0)},0)},0)}},t=__decorate([d],t)}(a.default));o.default=p,cc._RF.pop()},{"../../../Command/CommonSignal":"CommonSignal","../../../Utils/Cocos":"Cocos","../../../Utils/Random":"Random","../../../View/BaseMediator":"BaseMediator","../../../View/Transform/RotationView":"RotationView","../../Command/GamePlaySignal":"GamePlaySignal","../../Model/Poker/PokerPosModel":"PokerPosModel"}],PokerPosModel:[function(e,t,o){"use strict";cc._RF.push(t,"9c8e6UKTJZG364DgxJtoJyw","PokerPosModel"),Object.defineProperty(o,"__esModule",{value:!0});var n,i=e("../../../Utils/Signal"),r=e("../../../Global/GameRule"),a=e("../../../Model/PlayModelProxy"),s=e("../../Command/GamePlaySignal"),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(i.BaseSignal);o.PokerPositionChanged=l,function(e){e[e.Normal=0]="Normal",e[e.Drag=1]="Drag",e[e.Return=2]="Return",e[e.Recycle=3]="Recycle"}(n=o.MoveType||(o.MoveType={}));var c=function(){function e(e){this.model=null,this.position=cc.Vec2.ZERO,this.movedDelta=cc.Vec2.ZERO,this.model=e}return Object.defineProperty(e.prototype,"x",{get:function(){return this.position.x},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this.position.y},enumerable:!0,configurable:!0}),e.prototype.getPyramidPosition=function(){if(0==this.model.isPyramidPoker())return console.warn("Poker:",this.model.ID,"is not on pyramid."),cc.Vec2.ZERO;for(var e=0,t=this.model.Pyramid.Layer;t>0;)e+=t,t--;var o=.5*r.PyramidSize.width-.5*(r.PokerSize.width+r.PokerSpace.width)*this.model.Pyramid.Layer+(this.model.Pyramid.Index-e)*(r.PokerSize.width+r.PokerSpace.width),n=-this.model.Pyramid.Layer*(.5*r.PokerSize.height+r.PokerSpace.height);return 2==this.model.Value&&this.model.Color==r.PokerColor.Heart&&console.log(this.model.ID,o,n),cc.v2(o,n)},e.prototype.updatePosition=function(){if(this.model.Parent.isOnPyramid()){var e=this.getPyramidPosition();this.setPosition(e.x,e.y,this.model.Pyramid.Index)}else if(this.model.Parent.isOnDraw())this.setPosition(0,0);else if(this.model.Parent.isOnSelectable()){var t=a.PlayModelProxy.inst.indexOfSelectable(this.model);if(t<0)return void console.error(this.model.ID," is not selectable.");t>=a.PlayModelProxy.inst.SelectableCount-3?1==a.PlayModelProxy.inst.SelectableCount?this.setPosition(0,0):2==a.PlayModelProxy.inst.SelectableCount?t==a.PlayModelProxy.inst.SelectableCount-1?this.setPosition(r.PokerSize.width/2,0):this.setPosition(0,0):t==a.PlayModelProxy.inst.SelectableCount-1?this.setPosition(r.PokerSize.width,0):t==a.PlayModelProxy.inst.SelectableCount-2?this.setPosition(r.PokerSize.width/2,0):this.setPosition(0,0):this.setPosition(0,0)}else this.model.Parent.isOnWaitting()?this.setPosition(0,0):this.setPosition(0,0,0,n.Recycle)},e.prototype.setPosition=function(e,t,o,i){void 0===o&&(o=0),void 0===i&&(i=n.Normal),this.position.x=e,this.position.y=t,l.inst.dispatchFour(this.model.ID,this.position,o,i)},e.prototype.onMoved=function(e){this.movedDelta.addSelf(e),l.inst.dispatchFour(this.model.ID,this.position.add(this.movedDelta),0,n.Drag)},e.prototype.onMovedEnd=function(e){this.movedDelta.y=0,this.movedDelta.x=0,e&&(s.DispatchPokerSignal.inst.dispatch(),l.inst.dispatchFour(this.model.ID,this.position,0,n.Return))},e}();o.PokerPosModel=c,cc._RF.pop()},{"../../../Global/GameRule":"GameRule","../../../Model/PlayModelProxy":"PlayModelProxy","../../../Utils/Signal":"Signal","../../Command/GamePlaySignal":"GamePlaySignal"}],PokerPosView:[function(e,t,o){"use strict";cc._RF.push(t,"8aae64oE6FGwq9LprEz1mLJ","PokerPosView"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../../View/Transform/PositionView"),i=e("./PokerPosMediator"),r=cc._decorator,a=r.ccclass,s=(r.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.model=null,t}return __extends(t,e),Object.defineProperty(t.prototype,"Model",{get:function(){return this.model},enumerable:!0,configurable:!0}),t.prototype.onLoad=function(){this.BindMedaitor(i.default)},t.prototype.reuse=function(e){this.model=e,this.node._onSetParent=this.onParentChanged.bind(this)},t.prototype.unuse=function(){this.model=null},t.prototype.onParentChanged=function(e){},t=__decorate([a],t)}(n.default));o.default=s,cc._RF.pop()},{"../../../View/Transform/PositionView":"PositionView","./PokerPosMediator":"PokerPosMediator"}],PokerRotationView:[function(e,t,o){"use strict";cc._RF.push(t,"403a0lf61RP9ZFfxLRFEctf","PokerRotationView"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../../View/Transform/RotationView"),i=cc._decorator,r=i.ccclass,a=(i.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.model=null,t}return __extends(t,e),Object.defineProperty(t.prototype,"Model",{get:function(){return this.model},enumerable:!0,configurable:!0}),t.prototype.onLoad=function(){},t.prototype.reuse=function(e){this.model=e,this.node.rotation=0},t.prototype.unuse=function(){this.model=null},t=__decorate([r],t)}(n.default));o.default=a,cc._RF.pop()},{"../../../View/Transform/RotationView":"RotationView"}],PokerScale:[function(e,t,o){"use strict";cc._RF.push(t,"684da5bhGFPzq4M82IXYJWU","PokerScale"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../../View/Transform/ScaleView"),i=cc._decorator,r=i.ccclass,a=(i.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t=__decorate([r],t)}(n.default));o.default=a,cc._RF.pop()},{"../../../View/Transform/ScaleView":"ScaleView"}],PokerSelectedView:[function(e,t,o){"use strict";cc._RF.push(t,"a6566iLanpLd52wuvz0pZ3c","PokerSelectedView"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../../View/BaseView"),i=e("../../Model/Poker/PokerModel"),r=cc._decorator,a=r.ccclass,s=(r.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.model=null,t}return __extends(t,e),Object.defineProperty(t.prototype,"Model",{get:function(){return this.model},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Selected",{get:function(){return this.node.getChildByName("Selected")},enumerable:!0,configurable:!0}),t.prototype.onLoad=function(){i.PokerSelectedSignal.inst.addListenerTwo(this.onSelectedChanged,this)},t.prototype.start=function(){},t.prototype.onSelectedChanged=function(e,t){this.model&&this.model.ID==e&&(this.Selected.active=t)},t.prototype.reuse=function(e){this.model=e,this.Selected.active=!1},t.prototype.unuse=function(){this.model=null},t=__decorate([a],t)}(n.default));o.default=s,cc._RF.pop()},{"../../../View/BaseView":"BaseView","../../Model/Poker/PokerModel":"PokerModel"}],PokerSpriteView:[function(e,t,o){"use strict";cc._RF.push(t,"78eceeHGcxG94qsrVu+CmZI","PokerSpriteView"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../../Controller/ResourceController"),i=cc._decorator,r=i.ccclass,a=(i.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.model=null,t}return __extends(t,e),Object.defineProperty(t.prototype,"Front",{get:function(){return this.node.getChildByName("Front").getComponent(cc.Sprite)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Model",{get:function(){return this.model},enumerable:!0,configurable:!0}),t.prototype.reuse=function(e){this.model=e,this.Front.spriteFrame=n.ResourceController.inst.getPokerSprite(this.model.Value,this.model.Color)},t.prototype.unuse=function(){this.model=null},t=__decorate([r],t)}(cc.Component));o.default=a,cc._RF.pop()},{"../../../Controller/ResourceController":"ResourceController"}],PokerStateMediator:[function(e,t,o){"use strict";cc._RF.push(t,"0ff0ewlaGRN/q/555oWYIqH","PokerStateMediator"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../../View/BaseMediator"),i=e("../../Model/Poker/PokerStateModel"),r=cc._decorator,a=r.ccclass,s=(r.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onRegister=function(){i.PokerStateChanged.inst.addListenerThree(this.onPokerStateChanged,this)},t.prototype.onPokerStateChanged=function(e,t,o){if(this.View.Model&&this.View.Model.ID==e)if(t==i.PokerState.Back){if(0==this.View.Model.Parent.isOnDraw())return void console.error(" poker :",e," is not on draw, cant turn back.");this.View.turnBack(.1,function(){},0)}else{if(this.View.Model.Parent.isOnDraw())return void console.error(" poker :",e," is on draw, cant turn front.");this.View.turnFront(.1,function(){},0)}},t=__decorate([a],t)}(n.default));o.default=s,cc._RF.pop()},{"../../../View/BaseMediator":"BaseMediator","../../Model/Poker/PokerStateModel":"PokerStateModel"}],PokerStateModel:[function(e,t,o){"use strict";cc._RF.push(t,"a5987/JwOlLcKsd547mJiJl","PokerStateModel"),Object.defineProperty(o,"__esModule",{value:!0});var n,i=e("../../../Utils/Signal");(function(e){e[e.Front=0]="Front",e[e.Back=1]="Back"})(n=o.PokerState||(o.PokerState={}));var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(i.BaseSignal);o.PokerStateChanged=r;var a=function(){function e(e){this.model=null,this.state=null,this.model=e}return e.prototype.setState=function(e,t){void 0===t&&(t=0),this.state!=e&&(this.state=e,r.inst.dispatchThree(this.model.ID,this.state,t))},e.prototype.setFront=function(e){void 0===e&&(e=0),this.setState(n.Front,e)},e.prototype.setBack=function(e){void 0===e&&(e=0),this.setState(n.Back,e)},Object.defineProperty(e.prototype,"State",{get:function(){return this.state},enumerable:!0,configurable:!0}),e.prototype.isFront=function(){return this.state==n.Front},e.prototype.isBack=function(){return this.state==n.Back},e.prototype.updateState=function(e){void 0===e&&(e=0),this.model.Parent.isOnDraw()?this.setBack():this.setFront()},e}();o.PokerStateModel=a,cc._RF.pop()},{"../../../Utils/Signal":"Signal"}],PokerStateView:[function(e,t,o){"use strict";cc._RF.push(t,"9b39cUcHg5PzYB4I2K48UdN","PokerStateView"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("./PokerStateMediator"),i=e("../../../View/BaseView"),r=e("./PokerScale"),a=cc._decorator,s=a.ccclass,l=(a.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.model=null,t}return __extends(t,e),Object.defineProperty(t.prototype,"Front",{get:function(){return this.node.getChildByName("Front").getComponent(r.default)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Back",{get:function(){return this.node.getChildByName("Back").getComponent(r.default)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Model",{get:function(){return this.model},enumerable:!0,configurable:!0}),t.prototype.onLoad=function(){this.BindMedaitor(n.default)},t.prototype.start=function(){},t.prototype.reuse=function(e){this.model=e},t.prototype.unuse=function(){this.model=null},t.prototype.turnFront=function(e,t,o){var n=this;void 0===e&&(e=.2),void 0===t&&(t=function(){}),void 0===o&&(o=0),this.Back.onScaleChanged(cc.v2(0,1),e,function(){n.Front.onScaleChanged(cc.v2(1,1),e,t,o)},o)},t.prototype.turnBack=function(e,t,o){var n=this;void 0===e&&(e=.2),void 0===t&&(t=function(){}),void 0===o&&(o=0),this.Front.onScaleChanged(cc.v2(0,1),e,function(){n.Back.onScaleChanged(cc.v2(1,1),e,t,o)},o)},t.prototype.update=function(e){},t=__decorate([s],t)}(i.default));o.default=l,cc._RF.pop()},{"../../../View/BaseView":"BaseView","./PokerScale":"PokerScale","./PokerStateMediator":"PokerStateMediator"}],PokerToucherMediator:[function(e,t,o){"use strict";cc._RF.push(t,"50826cSsIhMXLwSjUewYslz","PokerToucherMediator"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../../Command/CommonSignal"),i=e("../../../Controller/GameStateController"),r=e("../../../Model/PlayModelProxy"),a=e("../../../View/SingleTouchMediator"),s=e("../../Model/Poker/PokerParentModel"),l=cc._decorator,c=l.ccclass,u=(l.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.hasMoved=!1,t.movedDetal=cc.v2(0,0),t}return __extends(t,e),t.prototype.onRegister=function(){var t=this;e.prototype.onRegister.call(this),n.GamePauseSignal.inst.addListener(function(){t.isMoved()&&r.PlayModelProxy.inst.onCancel(t.View.Model.ID)},this),n.GameOverSignal.inst.addListener(function(){t.isMoved()&&r.PlayModelProxy.inst.onCancel(t.View.Model.ID)},this)},t.prototype.onTouchCancel=function(e){this.onTouchEnd(e)},t.prototype.onTouchMove=function(e){0!=i.GameStateController.inst.isRoundStart()&&(this.hasMoved=!1,this.View.Model.Parent.isOnDraw()||this.View.Model.Parent.isOnRecycle()||this.View.Model.Parent.isOnPyramid()&&this.View.Model.Pyramid.isLocked()||this.View.Model.Parent.isOnSelectable()&&0==r.PlayModelProxy.inst.isTopOfSelectable(this.View.Model.ID)||(this.movedDetal.addSelf(e.getDelta()),this.hasMoved=!0,0!=this.isMoved()&&r.PlayModelProxy.inst.onMoved(this.View.Model.ID,e.getDelta())))},t.prototype.onTouchStart=function(e){},t.prototype.onTouchEnd=function(e){this.hasMoved&&r.PlayModelProxy.inst.onMovedEnd(this.View.Model.ID)},t.prototype.OnClick=function(){if(0!=i.GameStateController.inst.isRoundStart()){switch(console.log("on click :",this.View.Model.ID,s.PokerParent[this.View.Model.Parent.Type]),this.View.Model.Parent.Type){case s.PokerParent.Draw:r.PlayModelProxy.inst.drawPoker2Selectable();break;case s.PokerParent.Pyramid:0==this.View.Model.Pyramid.isLocked()&&0==this.isMoved()&&r.PlayModelProxy.inst.selectPoker(this.View.Model.ID);break;case s.PokerParent.Recycle:break;case s.PokerParent.Selectable:r.PlayModelProxy.inst.isTopOfSelectable(this.View.Model.ID)?0==this.isMoved()&&r.PlayModelProxy.inst.selectPoker(this.View.Model.ID):r.PlayModelProxy.inst.shake([this.View.Model.ID]);break;case s.PokerParent.Waitting:0==this.isMoved()&&r.PlayModelProxy.inst.selectPoker(this.View.Model.ID)}this.hasMoved=!1,this.movedDetal.x=0,this.movedDetal.y=0}},t.prototype.isMoved=function(){return this.movedDetal.mag()>=15},t=__decorate([c],t)}(a.default));o.default=u,cc._RF.pop()},{"../../../Command/CommonSignal":"CommonSignal","../../../Controller/GameStateController":"GameStateController","../../../Model/PlayModelProxy":"PlayModelProxy","../../../View/SingleTouchMediator":"SingleTouchMediator","../../Model/Poker/PokerParentModel":"PokerParentModel"}],PokerToucher:[function(e,t,o){"use strict";cc._RF.push(t,"b2c4aIzs9VOW7wo8kom78db","PokerToucher"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../../View/BaseView"),i=e("./PokerToucherMediator"),r=cc._decorator,a=r.ccclass,s=(r.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.model=null,t}return __extends(t,e),t.prototype.onLoad=function(){this.BindMedaitor(i.default)},Object.defineProperty(t.prototype,"Model",{get:function(){return this.model},enumerable:!0,configurable:!0}),t.prototype.reuse=function(e){this.model=e},t.prototype.unuse=function(){this.model=null},t=__decorate([a],t)}(n.default));o.default=s,cc._RF.pop()},{"../../../View/BaseView":"BaseView","./PokerToucherMediator":"PokerToucherMediator"}],PositionView:[function(e,t,o){"use strict";cc._RF.push(t,"416f296ZMZPEaWAE2E6IRlj","PositionView"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("./EaseBaseView"),i=cc._decorator,r=i.ccclass,a=(i.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.startPos=cc.Vec2.ZERO,t}return __extends(t,e),Object.defineProperty(t.prototype,"TargetPos",{get:function(){return cc.v2(this.Target.x,this.Target.y)},enumerable:!0,configurable:!0}),t.prototype.canUpdate=function(){return!0},t.prototype.onLoad=function(){0},t.prototype.start=function(){},t.prototype.onPositionChanged=function(e,t,o,n){void 0===n&&(n=0),this.startPos=this.node.position.clone(),this.startUpdate(new cc.Vec3(e.x,e.y,0),t,o,n)},t.prototype.onStep=function(){this.node.x=this.ease(this.startPos.x,this.Target.x),this.node.y=this.ease(this.startPos.y,this.Target.y)},t.prototype.onComplete=function(){this.node.setPosition(cc.v2(this.Target.x,this.Target.y))},t=__decorate([r],t)}(n.default));o.default=a,cc._RF.pop()},{"./EaseBaseView":"EaseBaseView"}],PyramidDeskModel:[function(e,t,o){"use strict";cc._RF.push(t,"bdbb8o6Nq1It4k1XFTH2Hqd","PyramidDeskModel"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../../Utils/Signal"),i=e("./DeskModelBase"),r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(n.BaseSignal);o.PokerToPyramidSignal=r;var a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.addPoker=function(e,t,o){e.addToPyramid(o,t),this.pokers.push(e),r.inst.dispatchOne(e)},t}(i.DeskModelBase);o.PyramidDeskModel=a,cc._RF.pop()},{"../../../Utils/Signal":"Signal","./DeskModelBase":"DeskModelBase"}],PyramidModel:[function(e,t,o){"use strict";cc._RF.push(t,"47e24LEHrhGA4dZ6vwifKVg","PyramidModel"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../../Utils/HashMap"),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(e("../../../Utils/Signal").BaseSignal);o.LockStateChanged=i;var r=function(){function e(t,o,n){this.index=-1,this.layer=-1,this.model=null,this.model=t,this.index=o,this.layer=n,e.addPyramid(this.index,this)}return e.addPyramid=function(t,o){var n=this,i=this.pyramidMap.get(t);i?i.ID==o.ID?console.warn("pyramid poker:",o.ID," already exist."):console.error("old pyramid:",i.ID,", new pyramid:",o.ID," has conflic!"):(this.pyramidMap.forEach(function(e,t){t.isLocked()?n.cacheOldLock[t.ID]=!0:n.cacheOldLock[t.ID]=!1}),e.pyramidMap.add(t,o),this.updateLock())},e.removePyramid=function(t){var o=this;this.pyramidMap.forEach(function(e,t){t.isLocked()?o.cacheOldLock[t.ID]=!0:o.cacheOldLock[t.ID]=!1}),e.pyramidMap.has(t)&&e.pyramidMap.remove(t),this.updateLock()},e.updateLock=function(){var e=this;this.pyramidMap.forEach(function(t,o){o.isLocked()?(0==e.cacheOldLock[o.ID]&&i.inst.dispatchTwo(o.ID,!0),e.cacheOldLock[o.ID]=!0):(1==e.cacheOldLock[o.ID]&&i.inst.dispatchTwo(o.ID,!1),e.cacheOldLock[o.ID]=!1)})},Object.defineProperty(e.prototype,"ID",{get:function(){return this.model.ID},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Layer",{get:function(){return this.layer},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Index",{get:function(){return this.index},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"LockedNumber",{get:function(){var t=0;return e.pyramidMap.has(this.index+this.layer+1)&&t++,e.pyramidMap.has(this.index+this.layer+2)&&t++,t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"LeftLockPoker",{get:function(){return this.isLeftLocked()?e.pyramidMap.get(this.index+this.layer+1).model:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"RightLockPoker",{get:function(){return this.isRightLocked()?e.pyramidMap.get(this.index+this.layer+2).model:null},enumerable:!0,configurable:!0}),e.prototype.isLeftLocked=function(){return e.pyramidMap.has(this.index+this.layer+1)},e.prototype.isRightLocked=function(){return e.pyramidMap.has(this.index+this.layer+2)},e.prototype.isLocked=function(){return this.isLeftLocked()||this.isRightLocked()},e.prototype.destory=function(){e.removePyramid(this.index)},e.pyramidMap=new n.HashMap,e.cacheOldLock={},e}();o.PyramidModel=r,cc._RF.pop()},{"../../../Utils/HashMap":"HashMap","../../../Utils/Signal":"Signal"}],Pyramid:[function(e,t,o){"use strict";cc._RF.push(t,"7b89bNV45VF+YVV2ou6RUhX","Pyramid"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../../Controller/ResourceController"),i=e("../../../Utils/Cocos"),r=e("../../Model/Poker/PokerParentModel"),a=cc._decorator,s=a.ccclass,l=(a.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onLoad=function(){r.PokerParentChanged.inst.addListenerTwo(this.onPokerAdded,this)},t.prototype.onPokerAdded=function(e,t){if(t==r.PokerParent.Pyramid){var o=n.ResourceController.inst.getPokerNodeByID(e);o&&(o.position=i.ConvertToNodeSpaceAR(o,this.node),o.setParent(this.node))}},t=__decorate([s],t)}(cc.Component));o.default=l,cc._RF.pop()},{"../../../Controller/ResourceController":"ResourceController","../../../Utils/Cocos":"Cocos","../../Model/Poker/PokerParentModel":"PokerParentModel"}],Random:[function(e,t,o){"use strict";cc._RF.push(t,"114f9Vox8JGQbohBr4HFlkf","Random"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function e(){}return e.seededRandom=function(e,t,o){return t+1e6*((1711*e+88888)%302654/302654+(1722*e+55555)%302665/302665+(1755*e+23333)%302766/302766)%1e6/1e6*(o-t)},e.getRandom=function(e,t){void 0===e&&(e=0),void 0===t&&(t=1);var o=this.randomSeed,n=this.seededRandom(o,e,t),i=Math.floor(this.seededRandom(o,1,302766));return this.randomSeed+=i,n},e.setRandomSeed=function(e){console.log(" set random seed:",e),this.randomSeed=e,this.sharedSeed=e},e.randomRoundToInt=function(e,t){return void 0===e&&(e=0),void 0===t&&(t=1),Math.round(this.getRandom(e,t))},e.randomFloorToInt=function(e,t){return void 0===e&&(e=0),void 0===t&&(t=1),Math.floor(this.getRandom(e,t))},e.randomCeilToInt=function(e,t){return void 0===e&&(e=0),void 0===t&&(t=1),Math.ceil(this.getRandom(e,t))},e.clamp=function(e,t,o){return Math.max(t,Math.min(e,o))},e.randomSeed=Math.random(),e.sharedSeed=Math.random(),e}();o.Random=n,cc._RF.pop()},{}],RecycleDeskModel:[function(e,t,o){"use strict";cc._RF.push(t,"b6bdatbwrFE/6KjJu30nDNw","RecycleDeskModel"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../../Utils/Signal"),i=e("./DeskModelBase"),r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(n.BaseSignal);o.PokerToRecycleSignal=r;var a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.addPoker=function(e){e.addToRecycle(),this.pokers.push(e),r.inst.dispatchOne(e)},t}(i.DeskModelBase);o.RecycleDeskModel=a,cc._RF.pop()},{"../../../Utils/Signal":"Signal","./DeskModelBase":"DeskModelBase"}],Recycle:[function(e,t,o){"use strict";cc._RF.push(t,"87d01JvlqxCapFKlCSKLTQQ","Recycle"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../../Controller/ResourceController"),i=e("../../../Utils/Cocos"),r=e("../../Model/Poker/PokerParentModel"),a=cc._decorator,s=a.ccclass,l=(a.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onLoad=function(){r.PokerParentChanged.inst.addListenerTwo(this.onPokerAdded,this)},t.prototype.onPokerAdded=function(e,t){if(t==r.PokerParent.Recycle){var o=n.ResourceController.inst.getPokerNodeByID(e);o&&(o.position=i.ConvertToNodeSpaceAR(o,this.node),o.setParent(this.node))}},t=__decorate([s],t)}(cc.Component));o.default=l,cc._RF.pop()},{"../../../Controller/ResourceController":"ResourceController","../../../Utils/Cocos":"Cocos","../../Model/Poker/PokerParentModel":"PokerParentModel"}],RedrawAnimation:[function(e,t,o){"use strict";cc._RF.push(t,"f81afhmVUJKuoaYayIvlYeY","RedrawAnimation"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../../Command/CommonSignal"),i=e("../../../Utils/FrameAniBase"),r=cc._decorator,a=r.ccclass,s=(r.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onLoad=function(){var t=this;e.prototype.onLoad.call(this),setTimeout(function(){t.node.active=!1},0),n.PlayRedrawAniSignal.inst.addListenerOne(function(e){t.node.active=e},this)},t.aniName="RedrawAnimation",t=__decorate([a],t)}(i.default));o.default=s,cc._RF.pop()},{"../../../Command/CommonSignal":"CommonSignal","../../../Utils/FrameAniBase":"FrameAniBase"}],ResourceController:[function(e,t,o){"use strict";var n,i;cc._RF.push(t,"d264b/eizRMLqzXH1k4Oll+","ResourceController"),Object.defineProperty(o,"__esModule",{value:!0});var r=e("../Utils/ToSingleton"),a=e("../Utils/HashMap"),s=e("../Global/GameRule"),l=e("../GamePlay/Command/GamePlaySignal"),c=e("../Factory/GameFactory");o.Title={Complete:"bg_font05",TimeUp:"bg_font03",Over:"bg_font02",CompleteBig:"font_gamecom"},o.PauseFont={HasFree:"bg_pause_font1",NoneFree:"bg_pause_font2"},o.Font={TotalScore:"totalScore",ResultScore:"resultScore",TimeWhite:"TimeWhite",TimeRed:"TimeRed",AddScore:"addScore",SubScore:"subScore",ShowScore:"showScore"},o.PokerSprite=((n={})[s.Poker.$_A]="bg_solitarie_[color]A",n[s.Poker.$_2]="bg_solitarie_[color]2",n[s.Poker.$_3]="bg_solitarie_[color]3",n[s.Poker.$_4]="bg_solitarie_[color]4",n[s.Poker.$_5]="bg_solitarie_[color]5",n[s.Poker.$_6]="bg_solitarie_[color]6",n[s.Poker.$_7]="bg_solitarie_[color]7",n[s.Poker.$_8]="bg_solitarie_[color]8",n[s.Poker.$_9]="bg_solitarie_[color]9",n[s.Poker.$_10]="bg_solitarie_[color]10",n[s.Poker.$_J]="bg_solitarie_[color]J",n[s.Poker.$_Q]="bg_solitarie_[color]Q",n[s.Poker.$_K]="bg_solitarie_[color]K",n),o.PokerColorType=((i={})[s.PokerColor.Club]="03",i[s.PokerColor.Diamond]="04",i[s.PokerColor.Heart]="02",i[s.PokerColor.Spade]="01",i);var u=function(e){function t(){var t=e.call(this)||this;return t.fontMap=new a.HashMap,t.UIAtlas=null,t.pokerNodePool=new a.HashMap,t.register(),t}return __extends(t,e),t.prototype.register=function(){l.PokerModelCreatedSignal.inst.addListenerOne(this.onPokerModelCreated,this)},t.prototype.onPokerModelCreated=function(e){if(!this.pokerNodePool.has(e.ID)){var t=c.gFactory.getObj("Poker",e);this.pokerNodePool.add(e.ID,t)}},t.prototype.getPokerNodeByID=function(e){return null==this.pokerNodePool.has(e)&&console.error("poker ",e," not existed."),this.pokerNodePool.get(e)},t.prototype.setAtlas=function(e){console.assert(null!=e,"game atlas is null!"),this.UIAtlas=e},t.prototype.getPauseFont=function(e){return this.UIAtlas.getSpriteFrame(e)},t.prototype.getTitleSprite=function(e){return this.UIAtlas.getSpriteFrame(e)},t.prototype.getAltas=function(e){return this.UIAtlas.getSpriteFrame(e)},t.prototype.addFont=function(e,t){this.fontMap.add(e,t)},t.prototype.getTotalScoreFont=function(){return this.fontMap.get(o.Font.TotalScore)},t.prototype.getAddScoreFont=function(){return this.fontMap.get(o.Font.AddScore)},t.prototype.getSubScoreFont=function(){return this.fontMap.get(o.Font.SubScore)},t.prototype.getResultScoreFont=function(){return this.fontMap.get(o.Font.ResultScore)},t.prototype.getTimeRedFont=function(){return this.fontMap.get(o.Font.TimeRed)},t.prototype.getTimeWhiteFont=function(){return this.fontMap.get(o.Font.TimeWhite)},t.prototype.getPokerSprite=function(e,t){var n=o.PokerSprite[e].replace("[color]",o.PokerColorType[t]);return this.UIAtlas.getSpriteFrame(n)},t.prototype.getRevertNormal=function(){return this.UIAtlas.getSpriteFrame("btn_back")},t.prototype.getRevertGray=function(){return this.UIAtlas.getSpriteFrame("btn_backgray")},t.prototype.getSoundEnable=function(){return this.UIAtlas.getSpriteFrame("btn_sound")},t.prototype.getSoundDisabled=function(){return this.UIAtlas.getSpriteFrame("btn_mute")},t}(r.SingleTon());o.ResourceController=u,cc._RF.pop()},{"../Factory/GameFactory":"GameFactory","../GamePlay/Command/GamePlaySignal":"GamePlaySignal","../Global/GameRule":"GameRule","../Utils/HashMap":"HashMap","../Utils/ToSingleton":"ToSingleton"}],ResultLayerView:[function(e,t,o){"use strict";cc._RF.push(t,"ba2b7WYGTNEqazUlmB5rAul","ResultLayerView"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../../View/BaseView"),i=e("../../../View/NumberChangedView"),r=e("../../../Command/CommonSignal"),a=e("../../../Controller/GameStateController"),s=e("../../../Controller/ResourceController"),l=e("../../../Utils/Time"),c=e("../../../Model/PlayModelProxy"),u=e("../../../Utils/Celer/CelerSDK"),d=e("../../Model/GamePlayModel"),p=e("../../../table"),h=cc._decorator,f=h.ccclass,g=(h.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.CountTotal=5,t.count=0,t}return __extends(t,e),Object.defineProperty(t.prototype,"Root",{get:function(){return this.node.getChildByName("Root")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Light",{get:function(){return this.Root.getChildByName("Light")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Title",{get:function(){return this.Root.getChildByName("Title").getComponent(cc.Sprite)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"TotalScore",{get:function(){return this.Root.getChildByName("TotalScore").getComponent(i.default)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"TimeBonus",{get:function(){return this.Root.getChildByName("TimeBonus").getComponent(i.default)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Score",{get:function(){return this.Root.getChildByName("Score").getComponent(i.default)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Combo",{get:function(){return this.Root.getChildByName("Combo").getComponent(i.default)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Cardbonus",{get:function(){return this.Root.getChildByName("Cardbonus").getComponent(i.default)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"SpineRoot",{get:function(){return this.Root.getChildByName("Spine")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Submit",{get:function(){return this.Root.getChildByName("Submit")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Content",{get:function(){return this.Root.getChildByName("Content").getComponent(cc.RichText)},enumerable:!0,configurable:!0}),t.prototype.onLoad=function(){this.node.active=!1,this.node.scale=1,r.OpenResultLayerSignal.inst.addListenerOne(this.onGameOver,this)},t.prototype.onGameOver=function(e){if(console.log("Open result:",a.RoundEndType[e],", recycle Count:",c.PlayModelProxy.inst.RecycleCount,Date.now()),this.Content.string=lan.t(p.En_View.JieSuanJieMian,p.En_ID.DeFen),this.Submit.scale=0,this.Light.scale=0,e==a.RoundEndType.TimeUp?this.Title.spriteFrame=s.ResourceController.inst.getTitleSprite(s.Title.TimeUp):e==a.RoundEndType.Complete?this.Title.spriteFrame=s.ResourceController.inst.getTitleSprite(s.Title.Complete):this.Title.spriteFrame=s.ResourceController.inst.getTitleSprite(s.Title.Over),this.SpineRoot)for(var t=0,o=this.SpineRoot.children;t<o.length;t++){var n=o[t];n.active&&(this.spine=n.getComponent(sp.Skeleton))}l.Time.timeFormat(c.PlayModelProxy.inst.TimeLeft);this.Root.scale=0,this.node.active=!0,this.Root.runAction(cc.sequence(cc.scaleTo(.1,.9,1.3),cc.scaleTo(.1,1.2,.9),cc.scaleTo(.1,1,1),cc.callFunc(this.showInfo.bind(this))))},Object.defineProperty(t.prototype,"Count",{get:function(){return this.count},set:function(e){var t=this;this.count!=e&&(this.count=e,console.log("count:",this.Count),this.Count>=this.CountTotal&&(r.ShowSubmitSignal.inst.dispatch(),this.Submit.runAction(cc.sequence(cc.scaleTo(.1,1.2),cc.scaleTo(.1,1),cc.callFunc(function(){t.Submit.once(cc.Node.EventType.TOUCH_END,function(){u.CelerSDK.inst.submitScore(c.PlayModelProxy.inst.getTotalScore())},t),CELER_X&&setTimeout(function(){u.CelerSDK.inst.submitScore(c.PlayModelProxy.inst.getTotalScore())},5e3)})))))},enumerable:!0,configurable:!0}),t.prototype.showInfo=function(){var e=this;this.Count=0,this.Light.runAction(cc.sequence(cc.scaleTo(.1,2),cc.callFunc(function(){e.Light.runAction(cc.repeatForever(cc.rotateBy(.1,1)))}))),this.spine&&(this.spine.animation="animation",this.spine.setEventListener(function(e,t){t.stringValue})),this.TotalScore.STEP=150,this.TimeBonus.STEP=150,this.Score.STEP=150,this.Cardbonus.STEP=150,this.Combo.STEP=20;var t=function(){r.ScoreCountingSignal.inst.dispatch()};this.TimeBonus.onStep=t,this.TotalScore.onStep=t,this.Score.onStep=t,this.Cardbonus.onStep=t,this.Combo.onStep=t,this.TimeBonus.onNumberChanged(c.PlayModelProxy.inst.TimeBonus,function(){e.Count++,console.log("TimeBonus Done")}),this.TotalScore.onNumberChanged(c.PlayModelProxy.inst.getTotalScore(),function(){e.Count++,console.log("TotalScore Done")}),this.Score.onNumberChanged(c.PlayModelProxy.inst.getScoreByType(d.ScoreType.Normal),function(){e.Count++,console.log("Score Done")}),this.Cardbonus.onNumberChanged(c.PlayModelProxy.inst.getScoreByType(d.ScoreType.CardBonus),function(){e.Count++,console.log("Cardbonus Done")}),this.Combo.onNumberChanged(c.PlayModelProxy.inst.getScoreByType(d.ScoreType.Combo),function(){e.Count++,console.log("Combo Done")})},t=__decorate([f],t)}(n.default));o.default=g,cc._RF.pop()},{"../../../Command/CommonSignal":"CommonSignal","../../../Controller/GameStateController":"GameStateController","../../../Controller/ResourceController":"ResourceController","../../../Model/PlayModelProxy":"PlayModelProxy","../../../Utils/Celer/CelerSDK":"CelerSDK","../../../Utils/Time":"Time","../../../View/BaseView":"BaseView","../../../View/NumberChangedView":"NumberChangedView","../../../table":"table","../../Model/GamePlayModel":"GamePlayModel"}],RevertButtonView:[function(e,t,o){"use strict";cc._RF.push(t,"ab112KPE3hMZrfA1EUtwrwd","RevertButtonView"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../../Controller/ResourceController"),i=e("../../../Model/PlayModelProxy"),r=e("../../../View/SingleTouchView"),a=e("../../Command/GamePlaySignal"),s=cc._decorator,l=s.ccclass,c=(s.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onLoad=function(){var t=this;e.prototype.onLoad.call(this),a.UpdateRevertButtonSignal.inst.addListenerOne(function(e){t.getComponent(cc.Button).interactable=e,t.getComponent(cc.Sprite).spriteFrame=e?n.ResourceController.inst.getRevertNormal():n.ResourceController.inst.getRevertGray()},this),this.getComponent(cc.Button).interactable=!1},t.prototype.onTouchEnd=function(){this.getComponent(cc.Button).interactable&&i.PlayModelProxy.inst.revert(this.node)},t=__decorate([l],t)}(r.default));o.default=c,cc._RF.pop()},{"../../../Controller/ResourceController":"ResourceController","../../../Model/PlayModelProxy":"PlayModelProxy","../../../View/SingleTouchView":"SingleTouchView","../../Command/GamePlaySignal":"GamePlaySignal"}],RotationView:[function(e,t,o){"use strict";cc._RF.push(t,"f3329CeqRdN6ZoUyx7znT4N","RotationView"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("./EaseBaseView"),i=cc._decorator,r=i.ccclass,a=(i.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.startRotation=0,t}return __extends(t,e),t.prototype.onLoad=function(){0},t.prototype.canUpdate=function(){return!0},t.prototype.start=function(){},t.prototype.onRotationChanged=function(e,t,o,n){void 0===n&&(n=0),this.startRotation=this.node.rotation,this.startUpdate(new cc.Vec3(e,e,e),t,o,n)},t.prototype.onStep=function(){this.node.rotation=this.ease(this.startRotation,this.Target.x)},t.prototype.onComplete=function(){this.node.setRotation(this.Target.x)},t=__decorate([r],t)}(n.default));o.default=a,cc._RF.pop()},{"./EaseBaseView":"EaseBaseView"}],ScaleView:[function(e,t,o){"use strict";cc._RF.push(t,"b6981r0u55OyqSF4preRXtY","ScaleView"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("./EaseBaseView"),i=cc._decorator,r=i.ccclass,a=(i.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.startScale=cc.Vec2.ZERO,t}return __extends(t,e),t.prototype.onLoad=function(){0},t.prototype.canUpdate=function(){return!0},t.prototype.start=function(){},t.prototype.onScaleChanged=function(e,t,o,n){void 0===n&&(n=0),this.startScale=cc.v2(this.node.scaleX,this.node.scaleY),this.startUpdate(new cc.Vec3(e.x,e.y,0),t,o,n)},t.prototype.onStep=function(){this.node.scaleX=this.ease(this.startScale.x,this.Target.x),this.node.scaleY=this.ease(this.startScale.y,this.Target.y)},t.prototype.onComplete=function(){this.node.scaleX=this.Target.x,this.node.scaleY=this.Target.y},t=__decorate([r],t)}(n.default));o.default=a,cc._RF.pop()},{"./EaseBaseView":"EaseBaseView"}],ScoreLabelView:[function(e,t,o){"use strict";cc._RF.push(t,"1f4d0BCoAZCx5f93osE59uU","ScoreLabelView"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../../Command/CommonSignal"),i=e("../../../Controller/ResourceController"),r=e("../../../Factory/GameFactory"),a=e("../../../Utils/Cocos"),s=e("../../../View/NumberChangedView"),l=cc._decorator,c=l.ccclass,u=l.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.ScoreFloatRoot=null,t}return __extends(t,e),t.prototype.onLoad=function(){n.PlayerScoreChanged.inst.addListenerFour(this.onScoreChanged,this)},t.prototype.onScoreChanged=function(e,t,o,n){var s=this,l=r.gFactory.getObj("AddScore"),c=l.getComponent(cc.Label);c.font=t>=0?i.ResourceController.inst.getAddScoreFont():i.ResourceController.inst.getSubScoreFont(),c.string="/"+Math.abs(t),this.ScoreFloatRoot.addChild(l);var u=cc.v2(0,0);n&&(u=a.ConvertToNodeSpaceAR(n,this.ScoreFloatRoot));var d=a.ConvertToNodeSpaceAR(this.node,this.ScoreFloatRoot);l.setPosition(u);var p=a.Distance(u,d)/2e3;l.runAction(cc.sequence(cc.scaleTo(0,0),cc.scaleTo(.2,1.2),cc.scaleTo(.1,1),cc.moveTo(p,d),cc.callFunc(function(){r.gFactory.putObj("AddScore",l)}))),setTimeout(function(){s.onNumberChanged(e)},300+1e3*p)},__decorate([u(cc.Node)],t.prototype,"ScoreFloatRoot",void 0),t=__decorate([c],t)}(s.default);o.default=d,cc._RF.pop()},{"../../../Command/CommonSignal":"CommonSignal","../../../Controller/ResourceController":"ResourceController","../../../Factory/GameFactory":"GameFactory","../../../Utils/Cocos":"Cocos","../../../View/NumberChangedView":"NumberChangedView"}],SelectableDeskModel:[function(e,t,o){"use strict";cc._RF.push(t,"d5297K587tKA5d5pC3rwtbL","SelectableDeskModel"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../../Utils/Signal"),i=e("./DeskModelBase"),r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(n.BaseSignal);o.PokerToSelectableSignal=r;var a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.addPoker=function(e){this.pokers.push(e),e.addToSelectable(),r.inst.dispatchOne(e)},t}(i.DeskModelBase);o.SelectableDeskModel=a,cc._RF.pop()},{"../../../Utils/Signal":"Signal","./DeskModelBase":"DeskModelBase"}],Selectable:[function(e,t,o){"use strict";cc._RF.push(t,"cda34wJSM5O+qCAC/g3UsuF","Selectable"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../../Controller/ResourceController"),i=e("../../../Utils/Cocos"),r=e("../../Model/Poker/PokerParentModel"),a=cc._decorator,s=a.ccclass,l=(a.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onLoad=function(){r.PokerParentChanged.inst.addListenerTwo(this.onPokerAdded,this)},t.prototype.onPokerAdded=function(e,t){if(t==r.PokerParent.Selectable){var o=n.ResourceController.inst.getPokerNodeByID(e);o&&(o.position=i.ConvertToNodeSpaceAR(o,this.node),o.setParent(this.node))}},t=__decorate([s],t)}(cc.Component));o.default=l,cc._RF.pop()},{"../../../Controller/ResourceController":"ResourceController","../../../Utils/Cocos":"Cocos","../../Model/Poker/PokerParentModel":"PokerParentModel"}],Signal:[function(e,t,o){"use strict";cc._RF.push(t,"5e03fyVNOZPs7lLvT6ttunM","Signal"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.listenerMap=[],t.onceListenerMap=[],t}return __extends(t,e),t.prototype.doDispatch=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.excuteListener.apply(this,e),this.excuteOnce.apply(this,e)},t.prototype.excuteListener=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(this.listenerMap&&this.listenerMap.length>0)for(var o=0,n=this.listenerMap;o<n.length;o++){var i=n[o];i.callback.apply(i.target,e)}},t.prototype.excuteOnce=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(this.onceListenerMap&&this.onceListenerMap.length>0){for(var o=0,n=this.onceListenerMap;o<n.length;o++){var i=n[o];i.callback.apply(i.target,e)}this.onceListenerMap.length=0}},t.prototype.listen=function(e,t){this.listenerMap.push({callback:e,target:t})},t.prototype.listenOnce=function(e,t){this.onceListenerMap.push({callback:e,target:t})},t.prototype.removeListener=function(e,t){if(this.listenerMap&&this.listenerMap.length>0)for(var o=0;o<this.listenerMap.length;++o){var n=this.listenerMap[o];n.callback==e&&n.target==t&&(this.listenerMap.splice(o,1),--o)}},t.prototype.removeTarget=function(e){if(this.listenerMap&&this.listenerMap.length>0)for(var t=0;t<this.listenerMap.length;++t){this.listenerMap[t].target==e&&(this.listenerMap.splice(t,1),--t)}},t.prototype.dispatch=function(){this.doDispatch(null)},t.prototype.dispatchOne=function(e){this.doDispatch(e)},t.prototype.dispatchTwo=function(e,t){this.doDispatch(e,t)},t.prototype.dispatchThree=function(e,t,o){this.doDispatch(e,t,o)},t.prototype.dispatchFour=function(e,t,o,n){this.doDispatch(e,t,o,n)},t.prototype.dispatchFive=function(e,t,o,n,i){this.doDispatch(e,t,o,n,i)},t.prototype.addListener=function(e,t){this.listen(e,t)},t.prototype.addOnce=function(e,t){this.listenOnce(e,t)},t.prototype.addListenerOne=function(e,t){this.listen(e,t)},t.prototype.addListenerTwo=function(e,t){this.listen(e,t)},t.prototype.addListenerThree=function(e,t){this.listen(e,t)},t.prototype.addListenerFour=function(e,t){this.listen(e,t)},t.prototype.addListenerFive=function(e,t){this.listen(e,t)},t.prototype.addOnceOne=function(e,t){this.listenOnce(e,t)},t.prototype.addOnceTwo=function(e,t){this.listenOnce(e,t)},t.prototype.addOnceThree=function(e,t){this.listenOnce(e,t)},t.prototype.addOnceFour=function(e,t){this.listenOnce(e,t)},t.prototype.addOnceFive=function(e,t){this.listenOnce(e,t)},t}(e("./ToSingleton").SingleTon());o.BaseSignal=n,cc._RF.pop()},{"./ToSingleton":"ToSingleton"}],SingleTouchMediator:[function(e,t,o){"use strict";cc._RF.push(t,"e1695pPIshGg5cBwRP4Oun7","SingleTouchMediator"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,i=n.ccclass,r=(n.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.touchid=null,t}return __extends(t,e),t.prototype.bind=function(e){this.view=e},Object.defineProperty(t.prototype,"View",{get:function(){return console.assert(null!=this.view," view is null"),this.view},enumerable:!0,configurable:!0}),t.prototype.onRegister=function(){this.node.targetOff(this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this.touchCancel,this),this.node.on(cc.Node.EventType.TOUCH_END,this.touchEnd,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this.touchMove,this),this.node.on(cc.Node.EventType.TOUCH_START,this.touchStart,this)},t.prototype.onUnregister=function(){this.node.targetOff(this)},t.prototype.touchStart=function(e){if(null!==this.touchid&&this.touchid!==e.getID())return console.log(this.node.name," touch start  touchid is different: ",this.touchid,e.getID()),void e.stopPropagation();this.touchid=e.getID(),this.onTouchStart(e)},t.prototype.touchMove=function(e){null===this.touchid||this.touchid===e.getID()?(this.touchid=e.getID(),this.onTouchMove(e)):e.stopPropagation()},t.prototype.touchEnd=function(e){if(null!==this.touchid&&this.touchid!==e.getID())return console.log(this.node.name," touch end  touchid is different: ",this.touchid,e.getID()),void e.stopPropagation();null!=this.touchid?(this.touchid=null,this.onTouchEnd(e),this.OnClick()):e.stopPropagation()},t.prototype.touchCancel=function(e){if(null!==this.touchid&&this.touchid!==e.getID())return console.log(this.node.name," touch cancel  touchid is different: ",this.touchid,e.getID()),void e.stopPropagation();null!=this.touchid?(this.touchid=null,this.onTouchCancel(e)):e.stopPropagation()},t.prototype.OnClick=function(){},t.prototype.onTouchStart=function(e){},t.prototype.onTouchMove=function(e){},t.prototype.onTouchEnd=function(e){},t.prototype.onTouchCancel=function(e){},t=__decorate([i],t)}(cc.Component));o.default=r,cc._RF.pop()},{}],SingleTouchView:[function(e,t,o){"use strict";cc._RF.push(t,"85688DQVyhPRqaAh/y2/Qug","SingleTouchView"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("./BaseView"),i=cc._decorator,r=i.ccclass,a=(i.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.touchid=null,t}return __extends(t,e),t.prototype.onLoad=function(){this.node.on(cc.Node.EventType.TOUCH_CANCEL,this.touchCancel,this),this.node.on(cc.Node.EventType.TOUCH_END,this.touchEnd,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this.touchMove,this),this.node.on(cc.Node.EventType.TOUCH_START,this.touchStart,this)},t.prototype.start=function(){},t.prototype.touchStart=function(e){null===this.touchid||this.touchid===e.getID()?(this.touchid=e.getID(),this.onTouchStart(e)):console.log(this.node.name," touch start  touchid is different! ")},t.prototype.touchMove=function(e){null!==this.touchid&&this.touchid!==e.getID()||(this.touchid=e.getID(),this.onTouchMove(e))},t.prototype.touchEnd=function(e){null===this.touchid||this.touchid===e.getID()?(this.touchid=null,this.onTouchEnd(e)):console.log(this.node.name," touch end  touchid is different! ")},t.prototype.touchCancel=function(e){null===this.touchid||this.touchid===e.getID()?(this.touchid=null,this.onTouchCancel(e)):console.log(this.node.name," touch cancel  touchid is different! ")},t.prototype.onTouchStart=function(e){},t.prototype.onTouchMove=function(e){},t.prototype.onTouchEnd=function(e){},t.prototype.onTouchCancel=function(e){},t=__decorate([r],t)}(n.default));o.default=a,cc._RF.pop()},{"./BaseView":"BaseView"}],SkewView:[function(e,t,o){"use strict";cc._RF.push(t,"dec79oJ2D1Ju7yCFAAR3rSI","SkewView"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("./EaseBaseView"),i=cc._decorator,r=i.ccclass,a=(i.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.startSkew=cc.Vec2.ZERO,t}return __extends(t,e),t.prototype.onLoad=function(){0},t.prototype.start=function(){},t.prototype.canUpdate=function(){return!0},t.prototype.onSkewChanged=function(e,t,o,n){void 0===n&&(n=0),this.startSkew=cc.v2(this.node.skewX,this.node.skewY),this.startUpdate(new cc.Vec3(e.x,e.y,0),t,o,n)},t.prototype.onStep=function(){this.node.skewX=this.ease(this.startSkew.x,this.Target.x),this.node.skewY=this.ease(this.startSkew.y,this.Target.y)},t.prototype.onComplete=function(){this.node.skewX=this.Target.x,this.node.skewY=this.Target.y},t=__decorate([r],t)}(n.default));o.default=a,cc._RF.pop()},{"./EaseBaseView":"EaseBaseView"}],SliderView:[function(e,t,o){"use strict";cc._RF.push(t,"2c746YFJCxKFJ34ypIaA1v3","SliderView"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../Utils/Random"),i=cc._decorator,r=i.ccclass,a=i.property,s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.Progress=null,t.Slider=null,t.totalLength=0,t}return __extends(t,e),Object.defineProperty(t.prototype,"Percent",{get:function(){return this.Slider.progress},set:function(e){this.Slider.progress=n.Random.clamp(e,0,1),this.Progress.width=this.node.width*this.Slider.progress},enumerable:!0,configurable:!0}),t.prototype.onLoad=function(){this.Slider.node.on("slide",this.onSlided,this),this.totalLength=this.Progress.width},t.prototype.onSlided=function(){this.Progress.width=this.totalLength*this.Slider.progress,this.onProgress&&this.onProgress(this.Slider.progress)},t.prototype.start=function(){},t.prototype.onProgress=function(e){},__decorate([a(cc.Node)],t.prototype,"Progress",void 0),__decorate([a(cc.Slider)],t.prototype,"Slider",void 0),t=__decorate([r],t)}(cc.Component);o.default=s,cc._RF.pop()},{"../Utils/Random":"Random"}],SoundButtonView:[function(e,t,o){"use strict";cc._RF.push(t,"d8de4GxrChNE4TcCbHUquia","SoundButtonView"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../../Controller/ResourceController"),i=e("../../../Manager/AudioManager"),r=e("../../../View/SingleTouchView"),a=cc._decorator,s=a.ccclass,l=(a.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),Object.defineProperty(t.prototype,"Sprite",{get:function(){return this.getComponent(cc.Sprite)},enumerable:!0,configurable:!0}),t.prototype.onTouchEnd=function(){i.gAudio.MusicVolume>0?(i.gAudio.setEffectVolume(0),i.gAudio.setMusicVolume(0),this.Sprite.spriteFrame=n.ResourceController.inst.getSoundDisabled()):(i.gAudio.setEffectVolume(1),i.gAudio.setMusicVolume(1),this.Sprite.spriteFrame=n.ResourceController.inst.getSoundEnable())},t=__decorate([s],t)}(r.default));o.default=l,cc._RF.pop()},{"../../../Controller/ResourceController":"ResourceController","../../../Manager/AudioManager":"AudioManager","../../../View/SingleTouchView":"SingleTouchView"}],StartGameCommand:[function(e,t,o){"use strict";cc._RF.push(t,"1db594KvoJIVbc+cwfogrGn","StartGameCommand"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../Command/CommonSignal"),i=e("../../Model/PlayModelProxy"),r=!CELER_X,a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.execute=function(e){console.log("--------- excute StartGameCommand ---------"),r?this.testInit():this.normalInit(),n.GameReadySignal.inst.dispatch()},t.prototype.testInit=function(){i.PlayModelProxy.inst.gameTestInit()},t.prototype.normalInit=function(){i.PlayModelProxy.inst.gameInit()},t}(puremvc.SimpleCommand);o.StartGameCommand=a,cc._RF.pop()},{"../../Command/CommonSignal":"CommonSignal","../../Model/PlayModelProxy":"PlayModelProxy"}],StepManager:[function(e,t,o){"use strict";cc._RF.push(t,"83709TvPtJOVayPDGaPh6Ov","StepManager"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function e(){this.totalStep=[],this.curStep=[],this.loadTime={}}return e.prototype.register=function(e,t){this.completeCallback=e,this.totalStep=t;for(var o=0,n=t;o<n.length;o++){var i=n[o];this.loadTime[i]=Date.now()}},e.prototype.nextStep=function(e){if(this.totalStep.indexOf(e)<0)console.error(" \u6ca1\u6709\u8fd9\u4e00\u6b65\uff1a",e);else if(this.curStep.indexOf(e)>=0)console.warn(" \u6b65\u9aa4\u5df2\u5b8c\u6210\uff1a",e);else{this.curStep.push(e),this.curStep.sort(function(e,t){return e>t?-1:1}),this.totalStep.sort(function(e,t){return e>t?-1:1});var t=this.curStep.join("-"),o=this.totalStep.join("-"),n=Date.now()-this.loadTime[e];console.log(" cur step:",t,", total step:",o,", cost time:",n," ms"),t==o&&(console.log(" step done"),this.totalStep.length=0,this.completeCallback(),this.completeCallback=null)}},e}();o.StepManager=n,cc._RF.pop()},{}],SubmitButtonView:[function(e,t,o){"use strict";cc._RF.push(t,"689e7Ng31xI0qNvZtxfqczl","SubmitButtonView"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../../Controller/GameStateController"),i=e("../../../View/SingleTouchView"),r=e("../../Command/GamePlaySignal"),a=cc._decorator,s=a.ccclass,l=(a.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onTouchEnd=function(){n.GameStateController.inst.isGameOver()||0==n.GameStateController.inst.isRoundStart()||r.SubmitButtonClickSignal.inst.dispatchOne("Submit"==this.node.name)},t=__decorate([s],t)}(i.default));o.default=l,cc._RF.pop()},{"../../../Controller/GameStateController":"GameStateController","../../../View/SingleTouchView":"SingleTouchView","../../Command/GamePlaySignal":"GamePlaySignal"}],SubmitLayerView:[function(e,t,o){"use strict";cc._RF.push(t,"0faaf3nIXZGbZSp/08kE/R9","SubmitLayerView"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../../Command/CommonSignal"),i=e("../../../Controller/GameStateController"),r=e("../../../Controller/ResourceController"),a=e("../../../Global/GameRule"),s=e("../../../Manager/AudioManager"),l=e("../../../Model/PlayModelProxy"),c=e("../../../table"),u=e("../../../View/BaseView"),d=e("../../../View/SliderView"),p=e("../../Command/GamePlaySignal"),h=cc._decorator,f=h.ccclass,g=h.property,m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.SubmitBg=null,t}return __extends(t,e),Object.defineProperty(t.prototype,"EndButton",{get:function(){return this.node.getChildByName("btn_end")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ResumeButton",{get:function(){return this.node.getChildByName("btn_resume")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Volume",{get:function(){return this.node.getChildByName("Volume").getComponent(d.default)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Bg",{get:function(){return this.node.getChildByName("bg_submit985").getComponent(cc.Sprite)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Content",{get:function(){return this.node.getChildByName("Content").getComponent(cc.RichText)},enumerable:!0,configurable:!0}),t.prototype.onLoad=function(){var e=this;setTimeout(function(){e.node.active=!1,e.node.scale=1},0),p.SubmitButtonClickSignal.inst.addListenerOne(this.onSubmit,this),n.ShowPauseLayerSignal.inst.addListener(function(){e.onSubmit(!1)},this),this.EndButton.on(cc.Node.EventType.TOUCH_END,this.endNow,this),this.ResumeButton.on(cc.Node.EventType.TOUCH_END,this.Resume,this),this.Volume.onProgress=function(e){s.gAudio.setEffectVolume(e),s.gAudio.setMusicVolume(e)},setTimeout(function(){e.Volume.Percent=s.gAudio.EffectVolume},0)},t.prototype.endNow=function(){var e=this;i.GameStateController.inst.roundEnd(i.RoundEndType.Over),n.ButtonClickSignal.inst.dispatch(),setTimeout(function(){e.Hide()},0)},t.prototype.Resume=function(){var e=this;i.GameStateController.inst.resume(),n.ButtonClickSignal.inst.dispatch(),setTimeout(function(){e.Hide()},0)},t.prototype.onSubmit=function(e){this.node.active||(l.PlayModelProxy.inst.FreePauseCount>0?this.Content.string=e?lan.t(c.En_View.TiJiaoJieMian,c.En_ID.TiJiaoFenShuMianFeiZanTing,[l.PlayModelProxy.inst.FreePauseCount.toString(),"-"+a.PauseScoreCost]):lan.t(c.En_View.ZanTingJieMian,c.En_ID.MianFeiZanTing,[l.PlayModelProxy.inst.FreePauseCount.toString(),"-"+a.PauseScoreCost]):this.Content.string=e?lan.t(c.En_View.TiJiaoJieMian,c.En_ID.TiJiaoFenShuKouFenZanTing,["-"+a.PauseScoreCost]):lan.t(c.En_View.ZanTingJieMian,c.En_ID.ZanTingKouFen,["-"+a.PauseScoreCost]),this.Show(),n.ButtonClickSignal.inst.dispatch(),i.GameStateController.inst.pause(),e?(this.Volume.node.active=!1,this.Bg.spriteFrame=this.SubmitBg):(this.Volume.node.active=!0,this.Bg.spriteFrame=r.ResourceController.inst.getAltas("bg_pause")))},__decorate([g(cc.SpriteFrame)],t.prototype,"SubmitBg",void 0),t=__decorate([f],t)}(u.default);o.default=m,cc._RF.pop()},{"../../../Command/CommonSignal":"CommonSignal","../../../Controller/GameStateController":"GameStateController","../../../Controller/ResourceController":"ResourceController","../../../Global/GameRule":"GameRule","../../../Manager/AudioManager":"AudioManager","../../../Model/PlayModelProxy":"PlayModelProxy","../../../View/BaseView":"BaseView","../../../View/SliderView":"SliderView","../../../table":"table","../../Command/GamePlaySignal":"GamePlaySignal"}],TableManager:[function(e,t,o){"use strict";cc._RF.push(t,"44481nueMdB9Ye8NRIWr/0f","TableManager"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function e(){this.load=e.JSON_URL&&""!=e.JSON_URL?cc.loader.load.bind(cc.loader):cc.loader.loadRes.bind(cc.loader),this.fileFormat=e.JSON_URL&&""!=e.JSON_URL?".json?time="+Date.now():"",this.total=0,this.complete=0,this.En={},this.Es={},this.Fil={},this.Id={},this.In={},this.Pt={},this.Tl={}}return Object.defineProperty(e,"inst",{get:function(){return this.ins?this.ins:this.ins=new e},enumerable:!0,configurable:!0}),e.prototype.startLoad=function(t,o,n){this.completeCallback=o,this.progressCallback=n;var i=this;console.log("Base URL:",e.JSON_URL),this.load(e.JSON_URL+t.trim().split("/").join("")+"/file_list"+this.fileFormat,function(e,o){if(e)console.error(e.errorMessage);else{var n="Array"==o.constructor.name?o:o.json;this.total=n.length;for(var r=0,a=n;r<a.length;r++){var s=a[r];i.loadJson(t.trim().split("/").join("")+"/"+s.replace(".json",""))}}}.bind(this))},e.prototype.loadJson=function(t){console.log("start load:"+t);var o=this,n=t.split("/")[1];n=n.charAt(0).toUpperCase()+n.slice(1,n.length),this.load(e.JSON_URL+t+this.fileFormat,function(e,t){if(e)console.error(e.errorMessage);else{for(var i=0,r="Array"==t.constructor.name?t:t.json;i<r.length;i++){var a=r[i];o[n][a.ID]=a}o.completeLoad()}}.bind(this))},e.prototype.completeLoad=function(){this.complete++,this.progressCallback&&this.progressCallback(this.complete/this.total),this.complete>=this.total&&this.completeCallback&&this.completeCallback()},e.prototype.getEn=function(e){return this.En[e]?this.En[e]:(console.error("En \u4e0d\u5b58key\uff1a"+e),null)},e.prototype.getAll_En_Data=function(){return this.En},e.prototype.getEs=function(e){return this.Es[e]?this.Es[e]:(console.error("Es \u4e0d\u5b58key\uff1a"+e),null)},e.prototype.getAll_Es_Data=function(){return this.Es},e.prototype.getFil=function(e){return this.Fil[e]?this.Fil[e]:(console.error("Fil \u4e0d\u5b58key\uff1a"+e),null)},e.prototype.getAll_Fil_Data=function(){return this.Fil},e.prototype.getId=function(e){return this.Id[e]?this.Id[e]:(console.error("Id \u4e0d\u5b58key\uff1a"+e),null)},e.prototype.getAll_Id_Data=function(){return this.Id},e.prototype.getIn=function(e){return this.In[e]?this.In[e]:(console.error("In \u4e0d\u5b58key\uff1a"+e),null)},e.prototype.getAll_In_Data=function(){return this.In},e.prototype.getPt=function(e){return this.Pt[e]?this.Pt[e]:(console.error("Pt \u4e0d\u5b58key\uff1a"+e),null)},e.prototype.getAll_Pt_Data=function(){return this.Pt},e.prototype.getTl=function(e){return this.Tl[e]?this.Tl[e]:(console.error("Tl \u4e0d\u5b58key\uff1a"+e),null)},e.prototype.getAll_Tl_Data=function(){return this.Tl},e.JSON_URL="",e}();o.TableManager=n,cc._RF.pop()},{}],Test:[function(e,t,o){"use strict";cc._RF.push(t,"df1af1sWs9HWZ8cYz9x0Gs9","Test"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,i=n.ccclass,r=(n.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onLoad=function(){this.node.active=!1},t.prototype.start=function(){},t=__decorate([i],t)}(cc.Component));o.default=r,cc._RF.pop()},{}],ThemeView:[function(e,t,o){"use strict";cc._RF.push(t,"2b2d1k5+RZFrKLwiNmu7pk+","ThemeView"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../View/BaseView"),i=e("../../Global/Theme"),r=e("../../Command/CommonSignal"),a=cc._decorator,s=a.ccclass,l=(a.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onLoad=function(){r.GameThemeInit.inst.addListenerOne(this.onThemeInit,this)},t.prototype.start=function(){},t.prototype.onThemeInit=function(e){this.node.active=this.node.name==i.Theme[e]},t=__decorate([s],t)}(n.default));o.default=l,cc._RF.pop()},{"../../Command/CommonSignal":"CommonSignal","../../Global/Theme":"Theme","../../View/BaseView":"BaseView"}],Theme:[function(e,t,o){"use strict";cc._RF.push(t,"5fef4dbBENAfYW6Tw8oUA62","Theme"),Object.defineProperty(o,"__esModule",{value:!0}),function(e){e[e.Number=0]="Number",e[e.Sweet=1]="Sweet"}(o.Theme||(o.Theme={})),cc._RF.pop()},{}],TimeEffectAnimation:[function(e,t,o){"use strict";cc._RF.push(t,"603e6ws6zRH9IcpX4uo/ZlK","TimeEffectAnimation"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../Utils/FrameAniBase"),i=e("../Command/CommonSignal"),r=cc._decorator,a=r.ccclass,s=(r.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onLoad=function(){e.prototype.onLoad.call(this),this.node.opacity=0,i.TimeAnimationStateChanged.inst.addListenerOne(this.onPlayStateChanged,this)},t.prototype.onPlayStateChanged=function(e){e?0==this.isPlaying&&this.play():this.stop()},t.prototype.start=function(){},t.prototype.play=function(){this.node.opacity=255,e.prototype.play.call(this)},t.prototype.stop=function(){this.node.opacity=0,e.prototype.stop.call(this)},t=__decorate([a],t)}(n.default));o.default=s,cc._RF.pop()},{"../Command/CommonSignal":"CommonSignal","../Utils/FrameAniBase":"FrameAniBase"}],TimeLabelView:[function(e,t,o){"use strict";cc._RF.push(t,"7ed43mr7hdGgpPizoi+8zFf","TimeLabelView"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../../Command/CommonSignal"),i=e("../../../Controller/ResourceController"),r=e("../../../Utils/Time"),a=e("../../../View/BaseView"),s=cc._decorator,l=s.ccclass,c=(s.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.sec=0,t}return __extends(t,e),Object.defineProperty(t.prototype,"Label",{get:function(){return this.getComponent(cc.Label)},enumerable:!0,configurable:!0}),t.prototype.onLoad=function(){n.UpdateTimeNumber.inst.addListenerOne(this.onTimeChanged,this)},t.prototype.onTimeChanged=function(e){this.Label.string=r.Time.timeFormat(e),this.Label.font=e>30?i.ResourceController.inst.getTimeWhiteFont():i.ResourceController.inst.getTimeRedFont();var t=Math.floor(e);t!=this.sec&&(this.sec=t,this.sec<=5&&n.CountDownSignal.inst.dispatch())},t.prototype.start=function(){},t=__decorate([l],t)}(a.default));o.default=c,cc._RF.pop()},{"../../../Command/CommonSignal":"CommonSignal","../../../Controller/ResourceController":"ResourceController","../../../Utils/Time":"Time","../../../View/BaseView":"BaseView"}],Time:[function(e,t,o){"use strict";cc._RF.push(t,"87a24xcV95AoII6L5W1ABoI","Time"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function e(){}return e.timeFormat=function(e){var t=Math.floor(e/60),o=Math.floor(e%60),n=o.toString();return o<10&&(n="0"+o),t+"/"+n},e}();o.Time=n,cc._RF.pop()},{}],ToSingleton:[function(e,t,o){"use strict";cc._RF.push(t,"b07299nlSpOIIxOkIMBhUY9","ToSingleton"),Object.defineProperty(o,"__esModule",{value:!0}),o.SingleTon=function(){return function(){function e(){}return Object.defineProperty(e,"inst",{get:function(){return this.ins?this.ins:this.ins=new this},enumerable:!0,configurable:!0}),e}()},cc._RF.pop()},{}],TurnOverAnimation:[function(e,t,o){"use strict";cc._RF.push(t,"e6878SaHDZLJKbfQ6xmCeRn","TurnOverAnimation"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../../Utils/FrameAniBase"),i=e("../../Command/GamePlaySignal"),r=cc._decorator,a=r.ccclass,s=(r.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onLoad=function(){var t=this;e.prototype.onLoad.call(this),i.DrawTurnOverSignal.inst.addListener(function(){t.node.opacity=255,t.node.active=!0,t.play()},this),this.node.active=!0,this.node.opacity=0},t.prototype.onComplete=function(){this.node.active=!1},t.aniName="TurnOverAnimation",t=__decorate([a],t)}(n.default));o.default=s,cc._RF.pop()},{"../../../Utils/FrameAniBase":"FrameAniBase","../../Command/GamePlaySignal":"GamePlaySignal"}],UpdateController:[function(e,t,o){"use strict";cc._RF.push(t,"b3cadc9oLxMlaTWSqS0DgLW","UpdateController"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../Utils/ToSingleton"),i=cc._decorator,r=i.ccclass,a=(i.property,function(e){function t(){var t=e.call(this)||this;return t.assetsManager=null,t.STORAGE_PATH=(window.jsb&&jsb.fileUtils?jsb.fileUtils.getWritablePath():"/")+"hot-update",t.MANIFEST_PAth="",t.isUpdating=!1,t.manifest=null,t.completeCallback=[],t.startCallback=[],t.errorCallback=[],t.progressCallback=[],t.init(),t}return __extends(t,e),t.prototype.init=function(){window.jsb&&(this.assetsManager=new jsb.AssetsManager(this.MANIFEST_PAth,this.STORAGE_PATH,this.versionCompareHandle),this.assetsManager.setVerifyCallback(this.verifyCallback.bind(this)),cc.sys.os===cc.sys.OS_ANDROID&&this.assetsManager.setMaxConcurrentTask(2))},t.prototype.setManifest=function(e){this.manifest=e},t.prototype.getVersion=function(){return null==this.assetsManager?"":null==this.assetsManager.getLocalManifest()?"":this.assetsManager.getLocalManifest().getVersion()},t.prototype.addCompleteCallback=function(e,t){this.completeCallback.push({target:t,callback:e})},t.prototype.addErrorCallback=function(e,t){this.errorCallback.push({target:e,callback:t})},t.prototype.addStartCallback=function(e,t){this.startCallback.push({target:e,callback:t})},t.prototype.addProgressCallback=function(e,t){this.progressCallback.push({target:e,callback:t})},t.prototype.triggeError=function(e,t){void 0===t&&(t=!1),this.onError(e,t)},t.prototype.onError=function(e,t){void 0===t&&(t=!1),console.log(" this.errorCallback:",this.errorCallback.length,"error:",e);for(var o=0,n=this.errorCallback;o<n.length;o++){var i=n[o];i.callback.apply(i.target,[e,t])}},t.prototype.onComplete=function(e,t){void 0===t&&(t=!1),console.log(" on update complete:",this.getVersion()),console.log("storagePath:",this.getStoragePath()),console.log("search path:",this.getSearchPaths());for(var o=function(o){setTimeout(function(){o.callback.apply(o.target,[e,t])},0)},n=0,i=this.completeCallback;n<i.length;n++){o(i[n])}},t.prototype.getStoragePath=function(){return this.assetsManager?this.assetsManager.getStoragePath():""},t.prototype.getSearchPaths=function(){return window.jsb?jsb.fileUtils.getSearchPaths():""},t.prototype.onStart=function(e,t){void 0===t&&(t=!1),console.log(" this.startCallback:",this.startCallback.length);for(var o=0,n=this.startCallback;o<n.length;o++){var i=n[o];i.callback.apply(i.target,[e,t])}},t.prototype.onProgress=function(e,t){for(var o=0,n=this.progressCallback;o<n.length;o++){var i=n[o];i.callback.apply(i.target,[e,t])}},t.prototype.loadCustomManifest=function(e){if(null!=this.assetsManager&&this.assetsManager.getState()==jsb.AssetsManager.State.UNINITED){var t=new jsb.Manifest(e,this.STORAGE_PATH);this.assetsManager.loadLocalManifest(t,this.STORAGE_PATH)}},t.prototype.checkForUpdate=function(){if(null!=this.assetsManager){if(this.isUpdating)return"Version update is on process...";if(console.log(" start check for update ..."),this.assetsManager.getState()===jsb.AssetsManager.State.UNINITED){var e=this.manifest.nativeUrl;console.log(" native url:",e),cc.loader.md5Pipe&&(e=cc.loader.md5Pipe.transformURL(e)),this.assetsManager.loadLocalManifest(e)}if(!this.assetsManager.getLocalManifest()||!this.assetsManager.getLocalManifest().isLoaded())return this.onError("Failed to load local manifest ..."),"Failed to load local manifest ...";this.assetsManager.setEventCallback(this.checkUpdateCallback.bind(this)),this.assetsManager.checkUpdate(),this.isUpdating=!0}else this.onComplete("no need to update.")},t.prototype.checkUpdateCallback=function(e){switch(console.log("checkUpdateCallback Code: "+e.getEventCode()),e.getEventCode()){case jsb.EventAssetsManager.ERROR_NO_LOCAL_MANIFEST:this.onError("No local manifest file found, hot update skipped.");break;case jsb.EventAssetsManager.ERROR_DOWNLOAD_MANIFEST:case jsb.EventAssetsManager.ERROR_PARSE_MANIFEST:this.onError("Fail to download manifest file, hot update skipped.");break;case jsb.EventAssetsManager.ALREADY_UP_TO_DATE:var t=this.assetsManager.getRemoteManifest()?this.assetsManager.getRemoteManifest().getVersion():" null",o=this.assetsManager.getLocalManifest()?this.assetsManager.getLocalManifest().getVersion():"null";this.onComplete("Already up to date with the latest remote version :"+t+", local version :"+o);break;case jsb.EventAssetsManager.NEW_VERSION_FOUND:this.isUpdating=!1;var n=this.assetsManager.getLocalManifest()?this.assetsManager.getLocalManifest().getVersion():"null",i=this.assetsManager.getRemoteManifest()?this.assetsManager.getRemoteManifest().getVersion():"null";if(console.log("New version found, old:",n,", new: ",i),"null"==n||"null"==i);else{console.log("storage path:",this.assetsManager.getStoragePath());var r=n.split(".")[0];i.split(".")[0]>r?this.onStart("new version found, go to store to download new app.",!0):(this.onStart("new version found, update process start.",!1),this.updateVersion())}break;default:return}},t.prototype.getUpdateDescription=function(){return""},t.prototype.updateVersion=function(){if(null!=this.assetsManager&&!this.isUpdating)if([jsb.AssetsManager.State.UPDATING,jsb.AssetsManager.State.UNZIPPING,jsb.AssetsManager.State.UP_TO_DATE].indexOf(this.assetsManager.getState())>=0)this.onComplete("no need to update: "+this.assetsManager.getState(),!1);else{if(this.assetsManager.getState()===jsb.AssetsManager.State.UNINITED){var e=this.manifest.nativeUrl;cc.loader.md5Pipe&&(e=cc.loader.md5Pipe.transformURL(e)),this.assetsManager.loadLocalManifest(e)}this.assetsManager.setEventCallback(this.updateCallback.bind(this)),console.log(" start update ...:",this.assetsManager.getState()),this.assetsManager.update(),this.isUpdating=!0}},t.prototype.versionToInt=function(e){return parseInt(e.toString().split(".").join(""))},t.prototype.versionToString=function(e){return Math.floor(e/100)+"."+Math.floor(e/10)%10+"."+Math.floor(e)%10},t.prototype.updateCallback=function(e){var t=this,o=!1,n=!1,i=null;switch(console.log("update event code:",e.getEventCode()),e.getEventCode()){case jsb.EventAssetsManager.ERROR_NO_LOCAL_MANIFEST:this.onError("No local manifest file found, hot update skipped."),n=!0;break;case jsb.EventAssetsManager.UPDATE_PROGRESSION:var r=e.getPercent();NaN!=r&&"number"==typeof r||(r=0),this.onProgress(e.getMessage()?"Updated file:"+e.getMessage():"Updating:"+(100*r).toFixed(0)+"%",r);break;case jsb.EventAssetsManager.ERROR_DOWNLOAD_MANIFEST:case jsb.EventAssetsManager.ERROR_PARSE_MANIFEST:this.onError("Fail to download manifest file, hot update skipped."),n=!0;break;case jsb.EventAssetsManager.ALREADY_UP_TO_DATE:i=function(){var e=t.assetsManager.getRemoteManifest()?t.assetsManager.getRemoteManifest().getVersion():" null";t.onComplete("Already up to date with the latest remote version :"+e)},n=!0;break;case jsb.EventAssetsManager.UPDATE_FINISHED:i=function(){var o=t.assetsManager.getRemoteManifest()?t.assetsManager.getRemoteManifest().getVersion():" null";t.onComplete("Update finished. new : "+o+e.getMessage(),!0)},o=!0;break;case jsb.EventAssetsManager.UPDATE_FAILED:this.onError("Update failed. "+e.getMessage(),!0);break;case jsb.EventAssetsManager.ERROR_UPDATING:this.onError("Asset update error: "+e.getAssetId()+", "+e.getMessage());break;case jsb.EventAssetsManager.ERROR_DECOMPRESS:this.onError(e.getMessage())}if(n&&(this.assetsManager.setEventCallback(null),this.isUpdating=!1),o){this.assetsManager.setEventCallback(null);var a=jsb.fileUtils.getSearchPaths();console.log("old searchPaths:",a);var s=this.assetsManager.getLocalManifest().getSearchPaths();console.log("new path:",JSON.stringify(s));for(var l=0,c=s;l<c.length;l++){var u=c[l];a.indexOf(u)<0&&Array.prototype.unshift.apply(a,u)}cc.sys.localStorage.setItem("select-game",JSON.stringify(a)),jsb.fileUtils.setSearchPaths(a),console.log("new searchPaths:",JSON.stringify(a)),console.log(" paths storage:",cc.sys.localStorage.getItem("select-game"))}i&&i()},t.prototype.restart=function(){cc.audioEngine.stopAll(),cc.game.restart()},t.prototype.retry=function(){null!=this.assetsManager&&0==this.isUpdating&&this.assetsManager.downloadFailedAssets()},t.prototype.versionCompareHandle=function(e,t){cc.log("JS Custom Version Compare: version A is "+e+", version B is "+t);for(var o=e.split("."),n=t.split("."),i=0;i<o.length;++i){var r=parseInt(o[i]),a=parseInt(n[i]||"0");if(r!==a)return r-a}return n.length>o.length?-1:0},t.prototype.verifyCallback=function(e,t){var o=t.compressed,n=t.md5,i=t.path;t.size;return o?("Verification passed : "+i,!0):("Verification passed : "+i+" ("+n+")",!0)},t.prototype.destory=function(){this.assetsManager&&this.assetsManager.setEventCallback(null),this.startCallback=[],this.completeCallback=[],this.errorCallback=[],this.progressCallback=[]},t=__decorate([r],t)}(n.SingleTon()));o.default=a,cc._RF.pop()},{"../Utils/ToSingleton":"ToSingleton"}],WaittingDeskModel:[function(e,t,o){"use strict";cc._RF.push(t,"f5b10m8BzdAG5o8yeR0UaJS","WaittingDeskModel"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../../Utils/Signal"),i=e("./DeskModelBase"),r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(n.BaseSignal);o.PokerToWaittingSignal=r;var a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.addPoker=function(e){this.pokers.length>0||(e.addToWaitting(),this.pokers.push(e),r.inst.dispatchOne(e))},t}(i.DeskModelBase);o.WaittingDeskModel=a,cc._RF.pop()},{"../../../Utils/Signal":"Signal","./DeskModelBase":"DeskModelBase"}],Waitting:[function(e,t,o){"use strict";cc._RF.push(t,"c6ec5sz8VBDRruquxFkOl3Q","Waitting"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../../Controller/ResourceController"),i=e("../../../Utils/Cocos"),r=e("../../Model/Poker/PokerParentModel"),a=cc._decorator,s=a.ccclass,l=(a.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onLoad=function(){r.PokerParentChanged.inst.addListenerTwo(this.onPokerAdded,this)},t.prototype.onPokerAdded=function(e,t){if(t==r.PokerParent.Waitting){var o=n.ResourceController.inst.getPokerNodeByID(e);o&&(o.position=i.ConvertToNodeSpaceAR(o,this.node),o.setParent(this.node))}},t=__decorate([s],t)}(cc.Component));o.default=l,cc._RF.pop()},{"../../../Controller/ResourceController":"ResourceController","../../../Utils/Cocos":"Cocos","../../Model/Poker/PokerParentModel":"PokerParentModel"}],table:[function(e,t,o){"use strict";cc._RF.push(t,"30411ikQatCBJxdR4MhuoJs","table"),Object.defineProperty(o,"__esModule",{value:!0}),function(e){e[e.BangZhuYeMian1=1]="BangZhuYeMian1",e[e.BangZhuYeMian2=2]="BangZhuYeMian2",e[e.BangZhuYeMian3=3]="BangZhuYeMian3",e[e.BangZhuYeMian4=4]="BangZhuYeMian4",e[e.BangZhuYeMian5=5]="BangZhuYeMian5",e[e.BangZhuYeMian6=6]="BangZhuYeMian6",e[e.MianFeiZanTing=7]="MianFeiZanTing",e[e.ZanTingKouFen=8]="ZanTingKouFen",e[e.TiJiaoFenShuMianFeiZanTing=9]="TiJiaoFenShuMianFeiZanTing",e[e.TiJiaoFenShuKouFenZanTing=10]="TiJiaoFenShuKouFenZanTing",e[e.TiJiaoTiShi=11]="TiJiaoTiShi",e[e.DeFen=12]="DeFen",e[e.PeiDui=13]="PeiDui"}(o.En_ID||(o.En_ID={})),function(e){e[e.BangZhuJieMian=1]="BangZhuJieMian",e[e.ZanTingJieMian=2]="ZanTingJieMian",e[e.TiJiaoJieMian=3]="TiJiaoJieMian",e[e.TiShiTiao=4]="TiShiTiao",e[e.JieSuanJieMian=5]="JieSuanJieMian",e[e.ZhuJieMian=6]="ZhuJieMian"}(o.En_View||(o.En_View={})),function(e){e[e.BangZhuYeMian1=1]="BangZhuYeMian1",e[e.BangZhuYeMian2=2]="BangZhuYeMian2",e[e.BangZhuYeMian3=3]="BangZhuYeMian3",e[e.BangZhuYeMian4=4]="BangZhuYeMian4",e[e.BangZhuYeMian5=5]="BangZhuYeMian5",e[e.BangZhuYeMian6=6]="BangZhuYeMian6",e[e.MianFeiZanTing=7]="MianFeiZanTing",e[e.ZanTingKouFen=8]="ZanTingKouFen",e[e.TiJiaoFenShuMianFeiZanTing=9]="TiJiaoFenShuMianFeiZanTing",e[e.TiJiaoFenShuKouFenZanTing=10]="TiJiaoFenShuKouFenZanTing",e[e.TiJiaoTiShi=11]="TiJiaoTiShi",e[e.DeFen=12]="DeFen",e[e.PeiDui=13]="PeiDui"}(o.Es_ID||(o.Es_ID={})),function(e){e[e.BangZhuJieMian=1]="BangZhuJieMian",e[e.ZanTingJieMian=2]="ZanTingJieMian",e[e.TiJiaoJieMian=3]="TiJiaoJieMian",e[e.TiShiTiao=4]="TiShiTiao",e[e.JieSuanJieMian=5]="JieSuanJieMian",e[e.ZhuJieMian=6]="ZhuJieMian"}(o.Es_View||(o.Es_View={})),function(e){e[e.BangZhuYeMian1=1]="BangZhuYeMian1",e[e.BangZhuYeMian2=2]="BangZhuYeMian2",e[e.BangZhuYeMian3=3]="BangZhuYeMian3",e[e.BangZhuYeMian4=4]="BangZhuYeMian4",e[e.BangZhuYeMian5=5]="BangZhuYeMian5",e[e.BangZhuYeMian6=6]="BangZhuYeMian6",e[e.MianFeiZanTing=7]="MianFeiZanTing",e[e.ZanTingKouFen=8]="ZanTingKouFen",e[e.TiJiaoFenShuMianFeiZanTing=9]="TiJiaoFenShuMianFeiZanTing",e[e.TiJiaoFenShuKouFenZanTing=10]="TiJiaoFenShuKouFenZanTing",e[e.TiJiaoTiShi=11]="TiJiaoTiShi",e[e.DeFen=12]="DeFen",e[e.PeiDui=13]="PeiDui"}(o.Fil_ID||(o.Fil_ID={})),function(e){e[e.BangZhuJieMian=1]="BangZhuJieMian",e[e.ZanTingJieMian=2]="ZanTingJieMian",e[e.TiJiaoJieMian=3]="TiJiaoJieMian",e[e.TiShiTiao=4]="TiShiTiao",e[e.JieSuanJieMian=5]="JieSuanJieMian",e[e.ZhuJieMian=6]="ZhuJieMian"}(o.Fil_View||(o.Fil_View={})),function(e){e[e.BangZhuYeMian1=1]="BangZhuYeMian1",e[e.BangZhuYeMian2=2]="BangZhuYeMian2",e[e.BangZhuYeMian3=3]="BangZhuYeMian3",e[e.BangZhuYeMian4=4]="BangZhuYeMian4",e[e.BangZhuYeMian5=5]="BangZhuYeMian5",e[e.BangZhuYeMian6=6]="BangZhuYeMian6",e[e.MianFeiZanTing=7]="MianFeiZanTing",e[e.ZanTingKouFen=8]="ZanTingKouFen",e[e.TiJiaoFenShuMianFeiZanTing=9]="TiJiaoFenShuMianFeiZanTing",e[e.TiJiaoFenShuKouFenZanTing=10]="TiJiaoFenShuKouFenZanTing",e[e.TiJiaoTiShi=11]="TiJiaoTiShi",e[e.DeFen=12]="DeFen",e[e.PeiDui=13]="PeiDui"}(o.Id_ID||(o.Id_ID={})),function(e){e[e.BangZhuJieMian=1]="BangZhuJieMian",e[e.ZanTingJieMian=2]="ZanTingJieMian",e[e.TiJiaoJieMian=3]="TiJiaoJieMian",e[e.TiShiTiao=4]="TiShiTiao",e[e.JieSuanJieMian=5]="JieSuanJieMian",e[e.ZhuJieMian=6]="ZhuJieMian"}(o.Id_View||(o.Id_View={})),function(e){e[e.BangZhuYeMian1=1]="BangZhuYeMian1",e[e.BangZhuYeMian2=2]="BangZhuYeMian2",e[e.BangZhuYeMian3=3]="BangZhuYeMian3",e[e.BangZhuYeMian4=4]="BangZhuYeMian4",e[e.BangZhuYeMian5=5]="BangZhuYeMian5",e[e.BangZhuYeMian6=6]="BangZhuYeMian6",e[e.MianFeiZanTing=7]="MianFeiZanTing",e[e.ZanTingKouFen=8]="ZanTingKouFen",e[e.TiJiaoFenShuMianFeiZanTing=9]="TiJiaoFenShuMianFeiZanTing",e[e.TiJiaoFenShuKouFenZanTing=10]="TiJiaoFenShuKouFenZanTing",e[e.TiJiaoTiShi=11]="TiJiaoTiShi",e[e.DeFen=12]="DeFen",e[e.PeiDui=13]="PeiDui"}(o.In_ID||(o.In_ID={})),function(e){e[e.BangZhuJieMian=1]="BangZhuJieMian",e[e.ZanTingJieMian=2]="ZanTingJieMian",e[e.TiJiaoJieMian=3]="TiJiaoJieMian",e[e.TiShiTiao=4]="TiShiTiao",e[e.JieSuanJieMian=5]="JieSuanJieMian",e[e.ZhuJieMian=6]="ZhuJieMian"}(o.In_View||(o.In_View={})),function(e){e[e.BangZhuYeMian1=1]="BangZhuYeMian1",e[e.BangZhuYeMian2=2]="BangZhuYeMian2",e[e.BangZhuYeMian3=3]="BangZhuYeMian3",e[e.BangZhuYeMian4=4]="BangZhuYeMian4",e[e.BangZhuYeMian5=5]="BangZhuYeMian5",e[e.BangZhuYeMian6=6]="BangZhuYeMian6",e[e.MianFeiZanTing=7]="MianFeiZanTing",e[e.ZanTingKouFen=8]="ZanTingKouFen",e[e.TiJiaoFenShuMianFeiZanTing=9]="TiJiaoFenShuMianFeiZanTing",e[e.TiJiaoFenShuKouFenZanTing=10]="TiJiaoFenShuKouFenZanTing",e[e.TiJiaoTiShi=11]="TiJiaoTiShi",e[e.DeFen=12]="DeFen",e[e.PeiDui=13]="PeiDui"}(o.Pt_ID||(o.Pt_ID={})),function(e){e[e.BangZhuJieMian=1]="BangZhuJieMian",e[e.ZanTingJieMian=2]="ZanTingJieMian",e[e.TiJiaoJieMian=3]="TiJiaoJieMian",e[e.TiShiTiao=4]="TiShiTiao",e[e.JieSuanJieMian=5]="JieSuanJieMian",e[e.ZhuJieMian=6]="ZhuJieMian"}(o.Pt_View||(o.Pt_View={})),function(e){e[e.BangZhuYeMian1=1]="BangZhuYeMian1",e[e.BangZhuYeMian2=2]="BangZhuYeMian2",e[e.BangZhuYeMian3=3]="BangZhuYeMian3",e[e.BangZhuYeMian4=4]="BangZhuYeMian4",e[e.BangZhuYeMian5=5]="BangZhuYeMian5",e[e.BangZhuYeMian6=6]="BangZhuYeMian6",e[e.MianFeiZanTing=7]="MianFeiZanTing",e[e.ZanTingKouFen=8]="ZanTingKouFen",e[e.TiJiaoFenShuMianFeiZanTing=9]="TiJiaoFenShuMianFeiZanTing",e[e.TiJiaoFenShuKouFenZanTing=10]="TiJiaoFenShuKouFenZanTing",e[e.TiJiaoTiShi=11]="TiJiaoTiShi",e[e.DeFen=12]="DeFen",e[e.PeiDui=13]="PeiDui"}(o.Tl_ID||(o.Tl_ID={})),function(e){e[e.BangZhuJieMian=1]="BangZhuJieMian",e[e.ZanTingJieMian=2]="ZanTingJieMian",e[e.TiJiaoJieMian=3]="TiJiaoJieMian",e[e.TiShiTiao=4]="TiShiTiao",e[e.JieSuanJieMian=5]="JieSuanJieMian",e[e.ZhuJieMian=6]="ZhuJieMian"}(o.Tl_View||(o.Tl_View={})),cc._RF.pop()},{}]},{},["App","CommonSignal","GameStateController","ResourceController","GameFactory","GamePlaySignal","DeskModelBase","DrawDeskModel","PyramidDeskModel","RecycleDeskModel","SelectableDeskModel","WaittingDeskModel","GamePlayModel","PokerModel","PokerParentModel","PokerPosModel","PokerStateModel","PyramidModel","RedrawAnimation","TurnOverAnimation","PokerToucher","PokerToucherMediator","Draw","Pyramid","Recycle","Selectable","Waitting","PokerFrontView","PokerLockView","PokerPosMediator","PokerPosView","PokerRotationView","PokerScale","PokerSelectedView","PokerSpriteView","PokerStateMediator","PokerStateView","BlackView","ComboView","HelpButtonView","HelpLabelView","OverFontView","PairsLabel","PairsView","ResultLayerView","RevertButtonView","ScoreLabelView","SoundButtonView","SubmitButtonView","SubmitLayerView","TimeLabelView","GameRule","Level","Theme","InititalCommand","LoadAudioCommand","LoadJsonCommand","LoadPrefabCommand","StartGameCommand","InitialFacade","LoadingPageMediator","LoadingView","ThemeView","AudioManager","StepManager","PlayModelProxy","TableManager","UpdateController","CelerSDK","Cocos","FrameAniBase","HashMap","LogHandler","Random","Signal","Time","ToSingleton","BaseMediator","BaseView","GlobalSingleTouchMediator","GlobalSingleTouchView","HelpLayerMediator","HelpLayerView","NumberChangedView","SingleTouchMediator","SingleTouchView","SliderView","Test","FrontView","HitTest","TimeEffectAnimation","EaseBaseView","PositionView","RotationView","ScaleView","SkewView","table"]);