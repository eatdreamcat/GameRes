window.__require=function e(t,o,n){function i(r,s){if(!o[r]){if(!t[r]){var c=r.split("/");if(c=c[c.length-1],!t[c]){var l="function"==typeof __require&&__require;if(!s&&l)return l(c,!0);if(a)return a(c,!0);throw new Error("Cannot find module '"+r+"'")}}var u=o[r]={exports:{}};t[r][0].call(u.exports,function(e){return i(t[r][1][e]||e)},u,u.exports,e,t,o,n)}return o[r].exports}for(var a="function"==typeof __require&&__require,r=0;r<n.length;r++)i(n[r]);return i}({AICardRootMediator:[function(e,t,o){"use strict";cc._RF.push(t,"c4ada55MoZOXLMlauB7AaZA","AICardRootMediator"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../../View/BaseMediator"),i=e("../../Command/GamePlaySignal"),a=cc._decorator,r=a.ccclass,s=(a.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onRegister=function(){i.DispatchAIDomino.inst.addListenerThree(this.onDispatchDomino,this)},t.prototype.onDispatchDomino=function(e,t,o){this.View.addDomino(e,t,o)},t.prototype.onUnregister=function(){},t=__decorate([r],t)}(n.default));o.default=s,cc._RF.pop()},{"../../../View/BaseMediator":"BaseMediator","../../Command/GamePlaySignal":"GamePlaySignal"}],AICardRootView:[function(e,t,o){"use strict";cc._RF.push(t,"2cb3dA6rJhNvJZr2QVIvF+K","AICardRootView"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../../View/BaseView"),i=e("../../../Utils/Cocos"),a=e("./AICardRootMediator"),r=e("../../Command/GamePlaySignal"),s=cc._decorator,c=s.ccclass,l=(s.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.childOffset=cc.v2(17,0),t}return __extends(t,e),t.prototype.onLoad=function(){this.node.scale=.7,this.BindMedaitor(a.default)},t.prototype.start=function(){},t.prototype.addDomino=function(e,t,o){var n=this,a=cc.v2(0,0);e.getParent()&&(a=i.ConvertToNodeSpaceAR(this.node,e.getParent()),o<=7?(a.addSelf(this.childOffset.mul(o)),a.addSelf(cc.v2(e.width,0).mul(o).add(cc.v2(.75*e.width,0)))):(a.addSelf(this.childOffset.mul(o-6).add(cc.v2(15,e.height/3))),a.addSelf(cc.v2(e.width,0).mul(o%7).add(cc.v2(.75*e.width,0))))),e.runAction(cc.sequence(cc.delayTime(.1*o),cc.spawn(cc.moveTo(.2,a),cc.scaleTo(.2,.7)),cc.callFunc(function(){e.scale=1;var t=cc.v2(0,0);n.node.childrenCount<7?(t.addSelf(n.childOffset.mul(n.node.childrenCount+1)),t.addSelf(cc.v2(e.width,0).mul(n.node.childrenCount).add(cc.v2(.75*e.width,0)))):(t.addSelf(n.childOffset.mul(n.node.childrenCount-6).add(cc.v2(15,e.height/3))),t.addSelf(cc.v2(e.width,0).mul(n.node.childrenCount%7).add(cc.v2(.75*e.width,0)))),e.setParent(n.node),e.zIndex=100-n.node.childrenCount,e.setPosition(t),r.DispatchDoneSignal.inst.dispatch()})))},t=__decorate([c],t)}(n.default));o.default=l,cc._RF.pop()},{"../../../Utils/Cocos":"Cocos","../../../View/BaseView":"BaseView","../../Command/GamePlaySignal":"GamePlaySignal","./AICardRootMediator":"AICardRootMediator"}],App:[function(e,t,o){"use strict";cc._RF.push(t,"eaeeaWDD5pJfqkUameEwNsk","App"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../Initialization/Facade/InitialFacade"),i=e("../GamePlay/Controller/ResourceController"),a=cc._decorator,r=a.ccclass,s=a.property,c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.GameUIAtlas=null,t}return __extends(t,e),t.prototype.onLoad=function(){console.log(" app onload "),i.ResourceController.inst.setAtlas(this.GameUIAtlas)},t.prototype.start=function(){n.InitialFacade.inst.start()},__decorate([s(cc.SpriteAtlas)],t.prototype,"GameUIAtlas",void 0),t=__decorate([r],t)}(cc.Component);o.default=c,cc._RF.pop()},{"../GamePlay/Controller/ResourceController":"ResourceController","../Initialization/Facade/InitialFacade":"InitialFacade"}],AudioManager:[function(e,t,o){"use strict";cc._RF.push(t,"88c70Ktw0pBKKUTDtyQ2NkZ","AudioManager"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../Utils/HashMap");window.oncanplay&&(window.oncanplay=function(){a.canPlay=!0});var i="sounds/",a=function(){function e(){this.audioID={},this.clips=new n.HashMap}return Object.defineProperty(e,"inst",{get:function(){return this.ins?this.ins:this.ins=new e},enumerable:!0,configurable:!0}),e.prototype.init=function(e){var t=this;console.warn(" start load AudioClip ");var o=this;cc.loader.loadRes(i+"bgm",cc.AudioClip,function(t,n){t?console.error(t):(o.clips.add(n.name,n),e&&e())}),cc.loader.loadRes(i+"mouse_bgm",function(e,t){e?console.error(e):o.clips.add(t.name,t)}),cc.loader.loadRes(i+"bgm_30",function(e,t){e?console.error(e):o.clips.add(t.name,t)}),cc.loader.loadResDir(i,function(e,o,n){if(e)console.error(e);else for(var i=0,a=o;i<a.length;i++){var r=a[i];t.clips.has(r.name)||t.clips.add(r.name,r)}})},e.prototype.playEffect=function(t,o,n){var a=this;if(void 0===o&&(o=!1),e.canPlay){if(!(cc.audioEngine.getEffectsVolume()<=.05)){var r=this.clips.get(t);r?(this.audioID[t]=cc.audioEngine.playEffect(r,o),cc.audioEngine.setFinishCallback(this.audioID[t],function(){n&&n()})):cc.loader.loadRes(i+t,cc.AudioClip,function(e,i){e?console.error(e):(a.clips.add(i.name,i),a.audioID[t]=cc.audioEngine.playEffect(i,o),cc.audioEngine.setFinishCallback(a.audioID[t],function(){n&&n()}))})}}else this.bindTouch()},e.prototype.playMusic=function(t,o){var n=this;if(void 0===o&&(o=!0),!e.canPlay)return this.bindTouch(),void e.PlayedList.push({loop:!0,volume:1,clipName:t,supTime:Date.now(),skip:!1,isBgm:!0});var a=this.clips.get(t);a?cc.audioEngine.playMusic(a,o):cc.loader.loadRes(i+t,cc.AudioClip,function(e,t){e?console.error(e):("string"==typeof t._audio&&cc.loader._cache&&cc.loader._cache[t._audio]&&cc.loader._cache[t._audio].buffer&&(t._audio=cc.loader._cache[t._audio].buffer),n.clips.add(t.name,t),cc.audioEngine.playMusic(t,o))})},e.prototype.bindTouch=function(){if(!e.hasBindTouch){var t=this,o=function(){var n;for(cc.game.canvas.removeEventListener("touchstart",o),e.canPlay=!0;(n=e.PlayedList.pop())&&t.clips.get(n.clipName)&&!n.skip;)cc.audioEngine.playMusic(t.clips.get(n.clipName),n.loop)};e.hasBindTouch=!0,cc.game.canvas.addEventListener("touchstart",o)}},e.PlayedList=[],e.canPlay=!1,e.hasBindTouch=!1,e}();o.gAudio=a.inst,cc._RF.pop()},{"../Utils/HashMap":"HashMap"}],BaseMediator:[function(e,t,o){"use strict";cc._RF.push(t,"a76c1ySm3tAQId4zbAsdr/d","BaseMediator"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("./BaseView"),i=cc._decorator,a=i.ccclass,r=(i.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),Object.defineProperty(t.prototype,"View",{get:function(){return null==this.view&&(this.view=this.getComponent(n.default)),this.view},enumerable:!0,configurable:!0}),t.prototype.onRegister=function(){console.error(" should override onRegister ")},t.prototype.onUnregister=function(){console.error(" should override onUnregister ")},t=__decorate([a],t)}(cc.Component));o.default=r,cc._RF.pop()},{"./BaseView":"BaseView"}],BaseView:[function(e,t,o){"use strict";cc._RF.push(t,"6daedF7tVNJ3qN565kuohVZ","BaseView"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,i=n.ccclass,a=(n.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onLoad=function(){this.node.scale=0},t.prototype.Show=function(e){this.node.active=!0,this.node.runAction(cc.sequence(cc.callFunc(function(){}),cc.scaleTo(.1,1),cc.callFunc(function(){e&&e()})))},t.prototype.Hide=function(e){var t=this;this.node.runAction(cc.sequence(cc.scaleTo(.1,0),cc.callFunc(function(){t.node.active=!1,e&&e()})))},t.prototype.OnClick=function(){},t.prototype.BindMedaitor=function(e){if(!this.node.getComponent(e)){var t=this.node.addComponent(e);return t.onRegister&&t.onRegister(),t}console.warn(" this node already has the same component..")},t.prototype.UnbindMedaitor=function(e){var t=this.node.getComponent(e);if(t)return t.onUnregister&&t.onUnregister(),this.node.removeComponent(e),t;console.warn(" component already removed..")},t=__decorate([i],t)}(cc.Component));o.default=a,cc._RF.pop()},{}],BoneyardView:[function(e,t,o){"use strict";cc._RF.push(t,"b154euTdL5OGYwXKvvOY1je","BoneyardView"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("./NumberChangedView"),i=e("../../Command/GamePlaySignal"),a=cc._decorator,r=a.ccclass,s=(a.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onLoad=function(){i.BoneyardCountChanged.inst.addListenerOne(this.onNumberChanged,this)},t.prototype.start=function(){},t=__decorate([r],t)}(n.default));o.default=s,cc._RF.pop()},{"../../Command/GamePlaySignal":"GamePlaySignal","./NumberChangedView":"NumberChangedView"}],CardBagView:[function(e,t,o){"use strict";cc._RF.push(t,"88a63Q6wgZO+oBZDp1W3w5V","CardBagView"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../../View/BaseView"),i=e("../../Command/GamePlaySignal"),a=cc._decorator,r=a.ccclass,s=(a.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onLoad=function(){var e=this;this.node.scale=1,i.BoneyardCountChanged.inst.addListenerOne(function(){e.node.stopAllActions(),e.node.runAction(cc.sequence(cc.scaleTo(.05,1.2),cc.scaleTo(.05,1)))},this)},t.prototype.start=function(){},t=__decorate([r],t)}(n.default));o.default=s,cc._RF.pop()},{"../../../View/BaseView":"BaseView","../../Command/GamePlaySignal":"GamePlaySignal"}],CardDrawRootMediator:[function(e,t,o){"use strict";cc._RF.push(t,"fad0fFFWGBMpYnfZ9Ni9q3J","CardDrawRootMediator"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../../View/BaseMediator"),i=e("../../Command/GamePlaySignal"),a=cc._decorator,r=a.ccclass,s=(a.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onRegister=function(){i.DispatchStackDomino.inst.addListenerThree(this.onAddDomino,this)},t.prototype.onAddDomino=function(e,t,o){this.View.addDomino(e,t,o)},t.prototype.onUnregister=function(){},t=__decorate([r],t)}(n.default));o.default=s,cc._RF.pop()},{"../../../View/BaseMediator":"BaseMediator","../../Command/GamePlaySignal":"GamePlaySignal"}],CardDrawRootView:[function(e,t,o){"use strict";cc._RF.push(t,"03d56Urg/VFFrfQp6Xd0sWN","CardDrawRootView"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../../View/BaseView"),i=e("./CardDrawRootMediator"),a=e("../../../Utils/Cocos"),r=e("../../Command/GamePlaySignal"),s=cc._decorator,c=s.ccclass,l=(s.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.childOffset=cc.v2(-20,0),t}return __extends(t,e),t.prototype.onLoad=function(){this.node.scale=0,this.BindMedaitor(i.default)},t.prototype.start=function(){},t.prototype.addDomino=function(e,t,o){var n=this,i=cc.v2(0,0);e.getParent()&&(i=a.ConvertToNodeSpaceAR(this.node,e.getParent()));var s=cc.v2(-this.node.width/2,0);s.addSelf(this.childOffset.mul((o-1)%7+1)),s.addSelf(cc.v2(e.width,0).mul((o-1)%7).add(cc.v2(.75*e.width,0))),o-1>=7&&s.addSelf(cc.v2(0,.6*e.height+20)),s.addSelf(cc.v2(15,-55)),e.runAction(cc.sequence(cc.delayTime(.1*o),cc.spawn(cc.moveTo(.2,i),cc.scaleTo(.2,.6)),cc.callFunc(function(){e.setParent(n.node),e.setPosition(s),r.BoneyardCountChanged.inst.dispatchOne(o),r.DispatchDoneSignal.inst.dispatch()})))},t=__decorate([c],t)}(n.default));o.default=l,cc._RF.pop()},{"../../../Utils/Cocos":"Cocos","../../../View/BaseView":"BaseView","../../Command/GamePlaySignal":"GamePlaySignal","./CardDrawRootMediator":"CardDrawRootMediator"}],CelerSDK:[function(e,t,o){"use strict";cc._RF.push(t,"34a72Ol/DRKJb0NyonTxi8g","CelerSDK"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../ToSingleton"),i=e("../LogHandler"),a=e("../Random"),r=e("../../GamePlay/Model/GamePlayModel"),s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.alreadySubmit=!1,t.isNewPlayer=!0,t.celerStartCallback=null,t}return __extends(t,e),Object.defineProperty(t.prototype,"MatchID",{get:function(){return this.match.matchId},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"MatchRandomSeed",{get:function(){return this.match.sharedRandomSeed},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"DifficultyLevel",{get:function(){return this.match.difficultyLevel},enumerable:!0,configurable:!0}),t.prototype.init=function(e){this.alreadySubmit=!1,CELER_X&&celerSDK.onStart(this.onCelerStart.bind(this)),CELER_X&&celerSDK.provideScore(function(){return 0}),this.celerStartCallback=e,CELER_X&&i.LogHandler.inst.initLog(celerSDK.log)},t.prototype.celerXReady=function(){console.log(" invoke celerx.ready() "),CELER_X?celerSDK.ready():this.onCelerStart()},t.prototype.isNew=function(){return this.isNewPlayer},t.prototype.isOnCelerPlatform=function(){return CELER_X},t.prototype.onCelerStart=function(){console.log(" celerx onStart call"),this.match=CELER_X?celerSDK.getMatch():{matchId:"error : can not get id",shouldLaunchTutorial:Math.random()>.5,sharedRandomSeed:Math.random(),difficultyLevel:0},console.log("match id:",this.match.matchId,", seed:",this.match.sharedRandomSeed),a.Random.setRandomSeed(this.match.sharedRandomSeed),r.default.inst.Level=this.match.difficultyLevel,this.match&&this.match.shouldLaunchTutorial?this.isNewPlayer=!0:this.isNewPlayer=!1,this.celerStartCallback&&(this.celerStartCallback(),this.celerStartCallback=null)},t.prototype.submitScore=function(e){this.alreadySubmit||(this.alreadySubmit=!0,console.log(" submit score:",e,", match id:",this.match.matchId),CELER_X&&celerSDK.submitScore(e))},t}(n.SingleTon());o.CelerSDK=s,cc._RF.pop()},{"../../GamePlay/Model/GamePlayModel":"GamePlayModel","../LogHandler":"LogHandler","../Random":"Random","../ToSingleton":"ToSingleton"}],Cocos:[function(e,t,o){"use strict";function n(e){return e&&e.getParent&&e.getParent()?e.getParent().convertToWorldSpaceAR(e.position):cc.v2(0,0)}cc._RF.push(t,"31c37gkdPVLCIrqcCKdauwi","Cocos"),Object.defineProperty(o,"__esModule",{value:!0}),o.GetWorldPosition=n,o.ConvertToNodeSpaceAR=function(e,t){if(!t)return cc.v2(0,0);var o=n(e);return t.convertToNodeSpaceAR(o)},cc._RF.pop()},{}],DeskNodeModel:[function(e,t,o){"use strict";cc._RF.push(t,"61a5efXiGdK9IQmU0SeqVCq","DeskNodeModel"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(){return function(){this.parentID="",this.leftChildID="",this.rightChildID="",this.topChildID="",this.bottomChildID=""}}();o.DeskNodeModel=n,cc._RF.pop()},{}],DominoModel:[function(e,t,o){"use strict";cc._RF.push(t,"d3e67EqEe5AErIO2Y9YhnVa","DominoModel"),Object.defineProperty(o,"__esModule",{value:!0});var n,i=e("../../Utils/HashMap"),a=e("../Command/GamePlaySignal");(function(e){e[e.Back=0]="Back",e[e.Front=1]="Front"})(n=o.DominoState||(o.DominoState={}));var r=function(){function e(t,o,i){this.points=[],this.currentPoints=[],this.state=null,this.id="",this.points=[t,o],this.currentPoints=[t,o],this.id=++e.DominoID+"-round:"+i+"-top:"+t+"-bot:"+o,this.setState(n.Back),e.DominoMap.add(this.id,this)}return e.getDominoByID=function(e){return this.DominoMap.get(e)},e.prototype.getCurrentPoints=function(){return this.currentPoints},Object.defineProperty(e.prototype,"TopPoint",{get:function(){return this.currentPoints[0]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"BotPoint",{get:function(){return this.currentPoints[1]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"State",{get:function(){return this.state},enumerable:!0,configurable:!0}),e.prototype.setState=function(e){this.state!=e&&(this.state=e,a.DominoStateChanged.inst.dispatchTwo(this.state,this.id))},Object.defineProperty(e.prototype,"ID",{get:function(){return this.id},enumerable:!0,configurable:!0}),e.DominoID=0,e.DominoMap=new i.HashMap,e}();o.DominoModel=r,cc._RF.pop()},{"../../Utils/HashMap":"HashMap","../Command/GamePlaySignal":"GamePlaySignal"}],DominoRootMediator:[function(e,t,o){"use strict";cc._RF.push(t,"77577mHRqJLJqmARaKDq06g","DominoRootMediator"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../../View/BaseMediator"),i=e("../../Command/GamePlaySignal"),a=e("../../Facade/PlayerModelProxy"),r=e("../../Controller/ResourceController"),s=e("../../Model/DominoModel"),c=cc._decorator,l=c.ccclass,u=(c.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onRegister=function(){i.ReadyDispatchDominoSignal.inst.addListener(this.onReadyDispatch,this)},t.prototype.onReadyDispatch=function(){for(var e=0,t=a.PlayerModelProxy.inst.getOriginDominoOnNewRound();e<t.length;e++){var o=t[e];(y=r.ResourceController.inst.getDomino(o.TopPoint,o.BotPoint,o.ID,o.State)).name=o.ID,this.View.addDomino(y)}for(var n=a.PlayerModelProxy.inst.getPlayerDominos(),c=a.PlayerModelProxy.inst.getAIDominos(),l=a.PlayerModelProxy.inst.getStackDominos(),u=0,d=n;u<d.length;u++){o=d[u];(y=this.View.getDominoNodeByID(o.ID))&&(i.DispatchPlayerDomino.inst.dispatchTwo(y,o.ID),o.setState(s.DominoState.Front))}for(var p=0,h=0,f=c;h<f.length;h++){o=f[h];(y=this.View.getDominoNodeByID(o.ID))&&(i.DispatchAIDomino.inst.dispatchThree(y,o.ID,++p),o.setState(s.DominoState.Back))}p=0;for(var m=0,g=l;m<g.length;m++){var y;o=g[m];(y=this.View.getDominoNodeByID(o.ID))&&(i.DispatchStackDomino.inst.dispatchThree(y,o.ID,++p),o.setState(s.DominoState.Back))}},t.prototype.onUnregister=function(){i.ReadyDispatchDominoSignal.inst.removeTarget(this)},t=__decorate([l],t)}(n.default));o.default=u,cc._RF.pop()},{"../../../View/BaseMediator":"BaseMediator","../../Command/GamePlaySignal":"GamePlaySignal","../../Controller/ResourceController":"ResourceController","../../Facade/PlayerModelProxy":"PlayerModelProxy","../../Model/DominoModel":"DominoModel"}],DominoRootView:[function(e,t,o){"use strict";cc._RF.push(t,"e23b8FPPtNLrodbpiII6hKL","DominoRootView"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../../View/BaseView"),i=e("./DominoRootMediator"),a=cc._decorator,r=a.ccclass,s=(a.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.dispatchRoot=null,t}return __extends(t,e),Object.defineProperty(t.prototype,"DispatchRoot",{get:function(){return this.dispatchRoot?this.dispatchRoot:this.dispatchRoot=this.node.getChildByName("DispatchCardRoot")},enumerable:!0,configurable:!0}),t.prototype.onLoad=function(){this.node.scale=1,this.BindMedaitor(i.default)},t.prototype.start=function(){},t.prototype.addDomino=function(e){e.setPosition(0,0),this.DispatchRoot.addChild(e)},t.prototype.getDominoNodeByID=function(e){for(var t=0,o=this.DispatchRoot.children;t<o.length;t++){var n=o[t];if(n.name==e)return n}return console.error(" dispatch root has no this domino:",e),null},t=__decorate([r],t)}(n.default));o.default=s,cc._RF.pop()},{"../../../View/BaseView":"BaseView","./DominoRootMediator":"DominoRootMediator"}],DominoStateMediator:[function(e,t,o){"use strict";cc._RF.push(t,"2328d0bmRxO/Lx2flEDW3B5","DominoStateMediator"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../../View/BaseMediator"),i=e("../../Model/DominoModel"),a=e("../../Command/GamePlaySignal"),r=e("../../Controller/ResourceController"),s=cc._decorator,c=s.ccclass,l=(s.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onRegister=function(){a.DominoStateChanged.inst.addListenerTwo(this.onStateChanged,this),a.BeforeNextRoundSignal.inst.addListener(this.onNextRound,this)},t.prototype.onUnregister=function(){a.DominoStateChanged.inst.removeTarget(this)},t.prototype.onNextRound=function(){console.log(" on next round"),r.ResourceController.inst.putDomino(this.node)},t.prototype.onStateChanged=function(e,t){this.View.ID==t&&(console.log(" domino:",t," state changed:",i.DominoState[e]),this.View.updateState(e))},t=__decorate([c],t)}(n.default));o.default=l,cc._RF.pop()},{"../../../View/BaseMediator":"BaseMediator","../../Command/GamePlaySignal":"GamePlaySignal","../../Controller/ResourceController":"ResourceController","../../Model/DominoModel":"DominoModel"}],DominoStateView:[function(e,t,o){"use strict";cc._RF.push(t,"87114OMoWlLsoDhH6WqkdyW","DominoStateView"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../../View/BaseView"),i=e("./DominoStateMediator"),a=e("../../Model/DominoModel"),r=e("../../Controller/ResourceController"),s=e("../../Facade/PlayerModelProxy"),c=cc._decorator,l=c.ccclass,u=(c.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.backNode=null,t.frontNode=null,t.pointRoot=null,t.topPointSp=null,t.bottomPointSp=null,t.dominoId="",t}return __extends(t,e),Object.defineProperty(t.prototype,"Back",{get:function(){return this.backNode?this.backNode:this.backNode=this.node.getChildByName("Back")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Front",{get:function(){return this.frontNode?this.frontNode:this.frontNode=this.node.getChildByName("Front")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"PointRoot",{get:function(){return this.pointRoot?this.pointRoot:this.pointRoot=this.Front.getChildByName("Point")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"TopPointSprite",{get:function(){return this.topPointSp?this.topPointSp:this.PointRoot.getChildByName("Top").getComponent(cc.Sprite)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"BottomPointSprite",{get:function(){return this.bottomPointSp?this.bottomPointSp:this.PointRoot.getChildByName("Bottom").getComponent(cc.Sprite)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ID",{get:function(){return this.dominoId},enumerable:!0,configurable:!0}),t.prototype.onLoad=function(){this.node.scale=1,this.BindMedaitor(i.default)},t.prototype.start=function(){},t.prototype.reuse=function(e,t,o,n){this.dominoId=n,this.TopPointSprite.spriteFrame=r.ResourceController.inst.getPointSprite(s.PlayerModelProxy.inst.Theme,e),this.BottomPointSprite.spriteFrame=r.ResourceController.inst.getPointSprite(s.PlayerModelProxy.inst.Theme,t),this.updateState(o)},t.prototype.unuse=function(){this.node.scale=1},t.prototype.updateState=function(e){e==a.DominoState.Back?this.turnBack():this.turnFront()},t.prototype.turnBack=function(){this.Back.active=!0,this.Front.active=!1},t.prototype.turnFront=function(){this.Back.active=!1,this.Front.active=!0},t=__decorate([l],t)}(n.default));o.default=u,cc._RF.pop()},{"../../../View/BaseView":"BaseView","../../Controller/ResourceController":"ResourceController","../../Facade/PlayerModelProxy":"PlayerModelProxy","../../Model/DominoModel":"DominoModel","./DominoStateMediator":"DominoStateMediator"}],FacadeGlobal:[function(e,t,o){"use strict";cc._RF.push(t,"c46cfDkM7pInYAeGAk610m1","FacadeGlobal"),cc._RF.pop()},{}],FrameAniBase:[function(e,t,o){"use strict";cc._RF.push(t,"6298cJI+OZK9J9ZyfrpqPP2","FrameAniBase"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,i=n.ccclass,a=n.property,r=n.executeInEditMode,s=n.requireComponent,c=n.playOnFocus,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.Frames=null,t.Interval=.1,t.Priority=0,t.Loop=!1,t.PlayOnLoad=!1,t.currentIndex=0,t.time=0,t.isPlay=!1,t.listener=[],t.complateEvent=[],t}var o;return __extends(t,e),o=t,Object.defineProperty(t.prototype,"Sprite",{get:function(){return this.node.getComponent(cc.Sprite)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Animation",{set:function(e){this.Frames=e},enumerable:!0,configurable:!0}),t.prototype.onFocusInEditor=function(){this.time=this.Interval,o.intervalID=setInterval(this.update.bind(this),.016,.016)},t.prototype.onLostFocusInEditor=function(){clearInterval(o.intervalID)},t.prototype.onLoad=function(){this.time=this.Interval,this.isPlay=this.PlayOnLoad},t.prototype.play=function(){this.isPlay=!0,this.currentIndex=0,0==this.isPlaying&&this.callEventComplete()},t.prototype.playOnLoop=function(){this.Loop=!0,this.play()},t.prototype.playByStep=function(){this.isPlay=!0,this.nextFrame(),this.isPlay=!1},t.prototype.pause=function(){this.isPlay=!1},t.prototype.resume=function(){this.isPlay=!0},t.prototype.stop=function(){this.isPlay=!1,this.currentIndex=0,this.Loop=!1},t.prototype.onKeyFrame=function(e){},t.prototype.addKeyEventListener=function(e,t){this.listener.push({callback:e,target:t})},Object.defineProperty(t.prototype,"ListenerCount",{get:function(){return this.listener.length},enumerable:!0,configurable:!0}),t.prototype.clearAllListener=function(){return this.listener.length=0,this},t.prototype.onComplete=function(){},t.prototype.callEventFrame=function(){this.onKeyFrame(this.currentIndex);for(var e=0,t=this.listener;e<t.length;e++){var o=t[e];o.callback.apply(o.target,[this.currentIndex,this.__classname__])}},t.prototype.callEventComplete=function(){this.onComplete();for(var e=0,t=this.complateEvent;e<t.length;e++){var o=t[e];o.f.apply(o.target,[this.__classname__])}},t.prototype.addCompleteEvent=function(e,t){this.complateEvent.push({f:e,target:t})},Object.defineProperty(t.prototype,"TotalFrameCount",{get:function(){return this.Frames&&this.Frames.getSpriteFrames?this.Frames.getSpriteFrames().length:0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"CompleteEventCount",{get:function(){return this.complateEvent.length},enumerable:!0,configurable:!0}),t.prototype.clearCompleteEvent=function(){return this.complateEvent.length=0,this},t.prototype.start=function(){},Object.defineProperty(t.prototype,"isPlaying",{get:function(){if(this.isPlay&&this.Frames&&this.Frames.getSpriteFrames&&this.Frames.getSpriteFrames().length>0){for(var e=0,t=this.getComponents(o);e<t.length;e++){var n=t[e];if(n.Priority>this.Priority&&n.isPlaying)return!1}return!0}return!1},enumerable:!0,configurable:!0}),t.prototype.nextFrame=function(){0!=this.isPlaying?this.Frames&&this.Frames.getSpriteFrames&&this.Frames.getSpriteFrames().length>0&&(this.Sprite.spriteFrame=this.Frames.getSpriteFrames()[this.currentIndex],this.callEventFrame(),this.currentIndex=(this.currentIndex+1)%this.Frames.getSpriteFrames().length,0==this.currentIndex&&0==this.Loop&&(this.isPlay=!1,this.callEventComplete())):this.time=this.Interval},t.prototype.update=function(e){this.time>=this.Interval&&(this.time=0,this.nextFrame()),this.time+=e},t.aniName="FrameAniBase",t.intervalID=-1,__decorate([a(cc.SpriteAtlas)],t.prototype,"Frames",void 0),__decorate([a],t.prototype,"Interval",void 0),__decorate([a],t.prototype,"Priority",void 0),__decorate([a],t.prototype,"Loop",void 0),__decorate([a],t.prototype,"PlayOnLoad",void 0),t=o=__decorate([i,r,c,s(cc.Sprite)],t)}(cc.Component);o.default=l,cc._RF.pop()},{}],GameFactory:[function(e,t,o){"use strict";cc._RF.push(t,"93d23kfnY1A76OtZSkIyJ5r","GameFactory"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../Utils/HashMap"),i=function(){function e(e,t,o){this._pool=[],this.totalSize=0,this.initTime=[],this.completeHandler=o,this.template=e,this.totalSize=t,this.hashKey="ObjPool:"+this.template.name+" - "+this.totalSize,this.initPool(t)}return e.prototype.initPool=function(e,t){var o=this;if(void 0===t&&(t=!1),t)for(var n=0;n<e;++n){this.initTime.push(Date.now());var i=cc.instantiate(this.template);this.put(i)}else for(n=0;n<e;++n)this.initTime.push(Date.now()),setTimeout(function(){var e=cc.instantiate(o.template);o.put(e)},n)},e.prototype.size=function(){return this._pool.length},e.prototype.clear=function(){for(var e=this._pool.length,t=0;t<e;++t)this._pool[t].destroy&&this._pool[t].destroy();this._pool.length=0},e.prototype.put=function(e){if(e&&-1===this._pool.indexOf(e)){e.removeFromParent(!1);for(var t=0,o=e.getComponents(cc.Component);t<o.length;t++){var n=o[t];n&&n.unuse&&n.unuse.apply(n)}this._pool.push(e),this.completeHandler&&this.totalSize<=this._pool.length&&(this.completeHandler(),this.completeHandler=null)}},e.prototype.get=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var o=this._pool.length-1;o<0&&(console.warn(" last < 0 "),this.initPool(1,!0)),o=this._pool.length-1;var n=this._pool[o];this._pool.length=o;for(var i=0,a=n.getComponents(cc.Component);i<a.length;i++){var r=a[i];r&&r.reuse&&r.reuse.apply(r,arguments)}return n},e}(),a=function(){function e(){this.count=0,this.totalCount=0,this.objPool=new n.HashMap,this.startTime=0}return Object.defineProperty(e,"inst",{get:function(){return this.ins?this.ins:this.ins=new e},enumerable:!0,configurable:!0}),e.prototype.init=function(e){var t=this;this.doneCallback=e,this.startTime=Date.now(),cc.loader.loadResDir("prefabs/",cc.Prefab,function(e,o,n){if(e)console.error(" Game Factory init failed:",e);else{t.totalCount=o.length;for(var a=function(e){var n=o[e],a=n.name.split("."),r=a[0],s=a[1]?parseInt(a[1]):30;console.log(" init pool:",r,", count:",s),setTimeout(function(){var e=new i(n,s,t.addCount.bind(t));t.objPool.add(r,e)},10*e)},r=0;r<o.length;r++)a(r)}})},e.prototype.addCount=function(){this.count++,this.count>=this.totalCount&&(console.log(" factory cost time:",(Date.now()-this.startTime).toFixed(2)+"ms"),this.doneCallback&&(this.doneCallback(),this.doneCallback=null))},e.prototype.getObj=function(e){for(var t,o=[],n=1;n<arguments.length;n++)o[n-1]=arguments[n];return this.objPool.has(e)?(t=this.objPool.get(e)).get.apply(t,o):(console.error(" objPool dosen't exists this obj:",e),null)},e.prototype.putObj=function(e,t){if(this.objPool.has(e))return this.objPool.get(e).put(t);console.error(" objPool dosen't exists this obj:",e)},e}();o.gFactory=a.inst,cc._RF.pop()},{"../Utils/HashMap":"HashMap"}],GamePlayModel:[function(e,t,o){"use strict";cc._RF.push(t,"44c14BLbudFBKuHzjUsVsV9","GamePlayModel"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../Global/Theme"),i=e("../../Global/Level"),a=e("../../Utils/Random"),r=e("../../Initialization/Command/InitSignal"),s=e("./GameRule"),c=e("../../Utils/HashMap"),l=e("./RoundModel"),u=e("./DominoModel"),d=e("../Command/GamePlaySignal"),p=function(){function e(){this.round=0,this.roundCreated=0,this.level=0,this.playerScore=0,this.noviceScore=0,this.gameTime=0,this.roundCache=new c.HashMap,this.currentRound=null,this.init()}return e.prototype.init=function(){},Object.defineProperty(e.prototype,"Theme",{get:function(){return this.theme},set:function(e){console.log("set game theme:",n.Theme[e]),this.theme=e,r.GameThemeInit.inst.dispatchOne(this.theme)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Level",{get:function(){return this.level},set:function(e){console.log("set game Level:",e),this.level=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Round",{get:function(){return this.round},enumerable:!0,configurable:!0}),e.prototype.initGametheme=function(){var e=i.Level.getThemeRandomPool(this.Level);this.Theme=e[Math.floor(a.Random.getRandom()*e.length)]},e.prototype.createRoundData=function(e){void 0===e&&(e=6),console.log(" -- initRoundData : ",e);for(var t=i.Level.getDominoCountInRound(this.level),o=i.Level.getDominoCountInHand(this.level),n=i.Level.getTopPointRandomPool(this.level),r=i.Level.getBottomPointRandomPool(this.level),s=0;s<e;++s){this.roundCreated++;for(var c=[],d=[],p=[],h=0;h<t;h++){var f=n[Math.floor(a.Random.getRandom()*n.length)],m=r[Math.floor(a.Random.getRandom()*r.length)];c.length<o?c.push(new u.DominoModel(f,m,this.roundCreated)):d.length<o?d.push(new u.DominoModel(f,m,this.roundCreated)):p.push(new u.DominoModel(f,m,this.roundCreated))}this.roundCache.add(this.roundCreated,new l.RoundModel(d,c,p))}console.log(this.roundCache.values),console.log(" -- has create ",this.roundCreated," data.")},e.prototype.nextRound=function(){this.round++,this.turn=this.round%2?s.Turn.Player:s.Turn.AI,this.currentRound=this.roundCache.get(this.round),console.assert(null!=this.currentRound," round data is null"),console.log(" \u7b2c",this.round+" \u56de\u5408, \u8d77\u624b:",s.Turn[this.turn]),d.RoundNumberChanged.inst.dispatchOne(this.round)},e.prototype.getTotalDominosInRound=function(){return this.currentRound.getTotalDominos()},e.prototype.getPlayerDominosInRound=function(){return this.currentRound.getPlayerDominos()},e.prototype.getAIDominosInRound=function(){return this.currentRound.getAIDominos()},e.prototype.getDeskDominosInRound=function(){return this.currentRound.getDeskDominos()},e.prototype.getStackDominosInRound=function(){return this.currentRound.getStackDominos()},e.prototype.addPlayerScore=function(e){this.playerScore+=e,this.playerScore=Math.max(this.playerScore,0),d.PlayerScoreChanged.inst.dispatchOne(this.playerScore)},e.prototype.addNoviceScore=function(e){this.noviceScore+=e,this.noviceScore=Math.max(this.noviceScore,0),d.NoviceScoreChanged.inst.dispatchOne(this.noviceScore)},e}();o.GamePlayModel=p,cc._RF.pop()},{"../../Global/Level":"Level","../../Global/Theme":"Theme","../../Initialization/Command/InitSignal":"InitSignal","../../Utils/HashMap":"HashMap","../../Utils/Random":"Random","../Command/GamePlaySignal":"GamePlaySignal","./DominoModel":"DominoModel","./GameRule":"GameRule","./RoundModel":"RoundModel"}],GamePlaySignal:[function(e,t,o){"use strict";cc._RF.push(t,"f546cQa6nNAALT4Y03Ql6vU","GamePlaySignal"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../Utils/Signal"),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(n.BaseSignal);o.BeforeNextRoundSignal=i;var a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(n.BaseSignal);o.NextRoundSignal=a;var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(n.BaseSignal);o.ReadyDispatchDominoSignal=r;var s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(n.BaseSignal);o.DispatchPlayerDomino=s;var c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(n.BaseSignal);o.DispatchAIDomino=c;var l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(n.BaseSignal);o.DispatchStackDomino=l;var u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(n.BaseSignal);o.DispatchDoneSignal=u;var d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(n.BaseSignal);o.RoundNumberChanged=d;var p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(n.BaseSignal);o.NoviceScoreChanged=p;var h=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(n.BaseSignal);o.PlayerScoreChanged=h;var f=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(n.BaseSignal);o.BoneyardCountChanged=f;var m=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(n.BaseSignal);o.DominoStateChanged=m,cc._RF.pop()},{"../../Utils/Signal":"Signal"}],GameRule:[function(e,t,o){"use strict";cc._RF.push(t,"e188bsLeINMX7IBIdB98Lvl","GameRule"),Object.defineProperty(o,"__esModule",{value:!0}),function(e){e[e.Zero=0]="Zero",e[e.One=1]="One",e[e.Two=2]="Two",e[e.Three=3]="Three",e[e.Four=4]="Four",e[e.Five=5]="Five",e[e.Six=6]="Six",e[e.Seven=7]="Seven"}(o.DominoPoint||(o.DominoPoint={})),function(e){e[e.AI=0]="AI",e[e.Player=1]="Player"}(o.Turn||(o.Turn={})),cc._RF.pop()},{}],GameStateController:[function(e,t,o){"use strict";cc._RF.push(t,"8e9767SqtRH2bxBloI/ZSqE","GameStateController"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.pauseCount=0,t.roundstart=!1,t}return __extends(t,e),t.prototype.start=function(){this.pauseCount=0},t.prototype.roundStart=function(){console.log(" round start"),this.roundstart=!0},t.prototype.roundEnd=function(){console.log("round end "),this.roundstart=!1},t.prototype.isRoundStart=function(){return this.roundstart},t.prototype.pause=function(){this.pauseCount++},t.prototype.resume=function(){this.pauseCount--,console.assert(this.pauseCount>=0," pause count smaller than 0!!!"),this.pauseCount=Math.max(this.pauseCount,0)},t.prototype.isPause=function(){return this.pauseCount>0},t}(e("../../Utils/ToSingleton").SingleTon());o.GameStateController=n,cc._RF.pop()},{"../../Utils/ToSingleton":"ToSingleton"}],HashMap:[function(e,t,o){"use strict";cc._RF.push(t,"4b0e7DzcRNJnZXTYCWgDaDU","HashMap"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function e(){this._list=new Array,this.clear()}return e.prototype.getIndexByKey=function(e){for(var t=this._list.length,o=0;o<t;o++){if(this._list[o].key==e)return o}return-1},e.prototype.keyOf=function(e){for(var t=this._list.length,o=0;o<t;o++){var n=this._list[o];if(n.value.hashKey&&e.hashKey&&n.value.hashKey===e.hashKey||n.value==e)return n.key}return null},Object.defineProperty(e.prototype,"keys",{get:function(){for(var e=new Array,t=0,o=this._list;t<o.length;t++){var n=o[t];n&&e.push(n.key)}return e},enumerable:!0,configurable:!0}),e.prototype.add=function(e,t){var o={key:e,value:t},n=this.getIndexByKey(e);-1!=n?this._list[n]=o:this._list.push(o)},Object.defineProperty(e.prototype,"values",{get:function(){return this._list},enumerable:!0,configurable:!0}),e.prototype.remove=function(e){var t=this.getIndexByKey(e);if(-1!=t){var o=this._list[t];return this._list.splice(t,1),o}return null},e.prototype.has=function(e){return-1!=this.getIndexByKey(e)},e.prototype.get=function(e){var t=this.getIndexByKey(e);return-1!=t?this._list[t].value:null},Object.defineProperty(e.prototype,"length",{get:function(){return this._list.length},enumerable:!0,configurable:!0}),e.prototype.sort=function(e){this._list.sort(e)},e.prototype.forEachKeyValue=function(e){for(var t=this._list.length,o=0;o<t;o++){e(this._list[o])}},e.prototype.forEach=function(e){for(var t=this._list.length,o=0;o<t;o++){var n=this._list[o];e(n.key,n.value)}},e.prototype.clear=function(){this._list=[]},e}();o.HashMap=n,cc._RF.pop()},{}],InitSceneView:[function(e,t,o){"use strict";cc._RF.push(t,"bcc37nuyBhJzL2qRh1HJa3o","InitSceneView"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../View/BaseView"),i=e("./LoadingPageMediator"),a=cc._decorator,r=a.ccclass,s=(a.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onLoad=function(){this.node.scale=1,this.BindMedaitor(i.default)},t.prototype.start=function(){},t=__decorate([r],t)}(n.default));o.default=s,cc._RF.pop()},{"../../View/BaseView":"BaseView","./LoadingPageMediator":"LoadingPageMediator"}],InitSignal:[function(e,t,o){"use strict";cc._RF.push(t,"646a9Tm+5pCK5Z4d5Nzebhw","InitSignal"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../Utils/Signal"),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(n.BaseSignal);o.GameThemeInit=i;var a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(n.BaseSignal);o.GameReadySignal=a,cc._RF.pop()},{"../../Utils/Signal":"Signal"}],InitialFacade:[function(e,t,o){"use strict";cc._RF.push(t,"cbbbcO7od5PrqaPNOs8dFh3","InitialFacade"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../Command/InititalCommond"),i=e("../Command/StartGameCommond"),a=e("../Command/LoadAudioCommond"),r=e("../Command/LoadPrefabCommond"),s=e("../../Utils/Celer/CelerSDK"),c=function(){function e(e){this.loadTime={},this.steps=[],this.facade=puremvc.Facade.getInstance(e)}return Object.defineProperty(e,"inst",{get:function(){return this.instance?this.instance:this.instance=new e(e.MULTITON_KEY)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Facade",{get:function(){return console.assert(null!==this.facade," facade is null"),this.facade},enumerable:!0,configurable:!0}),e.prototype.register=function(){var t=this;this.facade.registerCommand(e.INITIALIZATION,n.InitialCommond),this.facade.registerCommand(e.START_UP,i.StartGameCommond),s.CelerSDK.inst.init(function(){t.facade.sendNotification(e.START_UP,t)})},e.prototype.unregister=function(){this.facade.removeCommand(e.INITIALIZATION),this.facade.removeCommand(e.START_UP)},e.prototype.start=function(){this.register();for(var t=0,o=e.TOTAL_STEPS;t<o.length;t++){var n=o[t];this.loadTime[n]=Date.now()}this.facade.sendNotification(e.INITIALIZATION,this)},e.prototype.step=function(t){if(console.log(" initialization step:",t),this.steps.indexOf(t)<0){this.steps.push(t),this.steps.sort(),e.TOTAL_STEPS.sort();var o=this.steps.join("-"),n=e.TOTAL_STEPS.join("-");console.log(" cur-steps\uff1a",o,", total:",n,", ",t," cost:",(Date.now()-this.loadTime[t]).toFixed(2),"ms"),n===o&&(s.CelerSDK.inst.isOnCelerPlatform()?s.CelerSDK.inst.celerXReady():this.facade.sendNotification(e.START_UP,this))}},e.MULTITON_KEY="INITIAL_FCADE",e.INITIALIZATION="initialization",e.START_UP="startup",e.TOTAL_STEPS=[a.LoadAudioCommond.STEP,r.LoadPrefabCommond.STEP],e}();o.InitialFacade=c,cc._RF.pop()},{"../../Utils/Celer/CelerSDK":"CelerSDK","../Command/InititalCommond":"InititalCommond","../Command/LoadAudioCommond":"LoadAudioCommond","../Command/LoadPrefabCommond":"LoadPrefabCommond","../Command/StartGameCommond":"StartGameCommond"}],InititalCommond:[function(e,t,o){"use strict";cc._RF.push(t,"a28caT/H41F74cWxJYqN9pz","InititalCommond"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("./LoadPrefabCommond"),i=e("./LoadAudioCommond"),a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.initializeMacroCommand=function(){this.addSubCommand(n.LoadPrefabCommond),this.addSubCommand(i.LoadAudioCommond)},t}(puremvc.MacroCommand);o.InitialCommond=a,cc._RF.pop()},{"./LoadAudioCommond":"LoadAudioCommond","./LoadPrefabCommond":"LoadPrefabCommond"}],Level:[function(e,t,o){"use strict";cc._RF.push(t,"3ebc53AC99D9oQzOQ3jCSgn","Level"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("./Theme"),i=e("../GamePlay/Model/GameRule"),a=function(){function e(){}return e.getThemeRandomPool=function(e){return[n.Theme.Number,n.Theme.Sweet]},e.getDominoCountInRound=function(e){return 28},e.getDominoCountInHand=function(e){return 7},e.getTopPointRandomPool=function(e){return[i.DominoPoint.Zero,i.DominoPoint.One,i.DominoPoint.Two,i.DominoPoint.Three,i.DominoPoint.Four,i.DominoPoint.Five,i.DominoPoint.Six,i.DominoPoint.Seven]},e.getBottomPointRandomPool=function(e){return[i.DominoPoint.Zero,i.DominoPoint.One,i.DominoPoint.Two,i.DominoPoint.Three,i.DominoPoint.Four,i.DominoPoint.Five,i.DominoPoint.Six,i.DominoPoint.Seven]},e}();o.Level=a,cc._RF.pop()},{"../GamePlay/Model/GameRule":"GameRule","./Theme":"Theme"}],LoadAudioCommond:[function(e,t,o){"use strict";cc._RF.push(t,"d4f3eGYUlBES5d8aEvuPQna","LoadAudioCommond"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.execute=function(e){if(e){var o=e.getBody();o&&o.step&&o.step(t.STEP)}},t.STEP="LoadAudio",t}(puremvc.SimpleCommand);o.LoadAudioCommond=n,cc._RF.pop()},{}],LoadPrefabCommond:[function(e,t,o){"use strict";cc._RF.push(t,"8b33fPnvCZEJ7bc/zCVv9My","LoadPrefabCommond"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../Factory/GameFactory"),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.execute=function(e){n.gFactory.init(function(){if(e){var o=e.getBody();o&&o.step&&o.step(t.STEP)}})},t.STEP="LoadPrefab",t}(puremvc.SimpleCommand);o.LoadPrefabCommond=i,cc._RF.pop()},{"../../Factory/GameFactory":"GameFactory"}],LoadingPageMediator:[function(e,t,o){"use strict";cc._RF.push(t,"890a7spQqhPvr2Up1cp0iGl","LoadingPageMediator"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../View/BaseMediator"),i=e("../Command/InitSignal"),a=e("../../GamePlay/Command/GamePlaySignal"),r=cc._decorator,s=r.ccclass,c=(r.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onRegister=function(){i.GameReadySignal.inst.addListener(this.onGameReady,this)},t.prototype.onGameReady=function(){console.log(" -- game init done, hide loading page "),this.View.Hide(function(){a.NextRoundSignal.inst.dispatch()})},t.prototype.onDestroy=function(){},t=__decorate([s],t)}(n.default));o.default=c,cc._RF.pop()},{"../../GamePlay/Command/GamePlaySignal":"GamePlaySignal","../../View/BaseMediator":"BaseMediator","../Command/InitSignal":"InitSignal"}],LoadingView:[function(e,t,o){"use strict";cc._RF.push(t,"5bb03yEifFAc6rRMybrkHat","LoadingView"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../View/BaseView"),i=e("./LoadingPageMediator"),a=cc._decorator,r=a.ccclass,s=(a.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onLoad=function(){this.node.scale=1,this.node.opacity=255,this.BindMedaitor(i.default)},t.prototype.start=function(){},t.prototype.Hide=function(e){var t=this;this.node.runAction(cc.sequence(cc.fadeOut(.5),cc.callFunc(function(){t.node.active=!1,e()})))},t=__decorate([r],t)}(n.default));o.default=s,cc._RF.pop()},{"../../View/BaseView":"BaseView","./LoadingPageMediator":"LoadingPageMediator"}],LogHandler:[function(e,t,o){"use strict";cc._RF.push(t,"a4747QIvUBIo6Ktpx/xQwuB","LogHandler"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(e){function t(){var o=e.call(this)||this;if(o.logFunc=console.log,o.logMsg=null,o.frameTimes=0,o.now=0,o.Frame=20,o.totalFrames=0,o.startTime=0,window.addEventListener)for(var n=0,i=t.LISTENNING_EVENTS;n<i.length;n++){var a=i[n],r="trigger"+a.charAt(0).toLocaleUpperCase()+a.substring(1);o[r]&&"function"==typeof o[r]&&window.addEventListener(a,o[r].bind(o))}return o}return __extends(t,e),t.prototype.dumpFrameInfo=function(){var e=(Date.now()-this.startTime)/1e3,t=e/this.totalFrames;this.log(" total frames:",this.totalFrames," ,total cost time:",e+"s"," , per frame cost time ave:"+t+"s")},t.prototype.log=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.addLog.apply(this,e),this.sendLog()},t.prototype.initLog=function(e){var o=this;cc.director.once(cc.Director.EVENT_AFTER_SCENE_LAUNCH,function(){o.frameTimes=0,o.now=Date.now(),o.startTime=Date.now()},this),cc.director.on(cc.Director.EVENT_AFTER_DRAW,function(){o.frameTimes++,o.totalFrames++,o.frameTimes>=o.Frame&&(o.frameTimes=0,o.now=Date.now())},this),this.logFunc=e,console.error=function(){for(var e,o=[],n=0;n<arguments.length;n++)o[n]=arguments[n];(e=t.inst).log.apply(e,["[ERROR]"].concat(o))},console.warn=function(){for(var e,o=[],n=0;n<arguments.length;n++)o[n]=arguments[n];(e=t.inst).log.apply(e,["[WARN]"].concat(o))},console.log=function(){for(var e,o=[],n=0;n<arguments.length;n++)o[n]=arguments[n];(e=t.inst).log.apply(e,["[INFO]"].concat(o))}},t.prototype.formatLogArguments=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var o="",n=0;n<arguments.length;n++){var i=typeof arguments[n];"string"==i||"number"==i?o+=" "+arguments[n]:"object"==i?o+=" "+JSON.stringify(arguments[n]):"boolean"==i&&arguments[n].toString&&(o+=arguments[n].toString())}return o},t.prototype.addLog=function(){for(var e=[],o=0;o<arguments.length;o++)e[o]=arguments[o];null==this.logMsg&&(this.logMsg={});var n=this.formatLogArguments.apply(this,e),i=this.getFullTime(new Date);this.logMsg[i]=t.VERSION+n},t.prototype.getFullTime=function(e){var t="";t+=e.getFullYear();var o=e.getMonth()+1;t+="-"+(o>=10?o:"0"+o);var n=e.getDate();t+="-"+(n>=10?n:"0"+n);var i=e.getHours();t+="  "+(i>=10?i:"0"+i);var a=e.getMinutes();t+=":"+(a>=10?a:"0"+a);var r=e.getSeconds();return t+=":"+(r>=10?r:"0"+r)},t.prototype.sendLog=function(){this.logFunc&&null!=this.logMsg&&(this.logFunc(JSON.stringify(this.logMsg)),this.logMsg=null)},t.prototype.triggerClose=function(e){this.addLog("triggerClose"),this.sendLog()},t.prototype.triggerLoad=function(e){this.addLog("triggerLoad"),this.sendLog()},t.prototype.triggerUnload=function(e){this.addLog("triggerUnload"),this.sendLog()},t.prototype.triggerOnunload=function(e){this.addLog("triggerUnload"),this.sendLog()},t.prototype.triggerError=function(e){this.addLog("triggerError"),this.addLog(e.message),this.sendLog()},t.prototype.triggerFocus=function(e){this.addLog("triggerFocus"),this.sendLog()},t.prototype.triggerBlur=function(e){this.addLog("triggerBlur"),this.sendLog()},t.prototype.triggerAbort=function(e){this.addLog("triggerAbort"),this.sendLog()},t.prototype.triggerSuspend=function(e){this.addLog("triggerSuspend"),this.sendLog()},t.prototype.beforeunload=function(e){this.addLog("beforeunload"),this.sendLog()},t.VERSION="DominoCash version 1 : ",t.LISTENNING_EVENTS=["error"],t}(e("./ToSingleton").SingleTon());o.LogHandler=n,cc._RF.pop()},{"./ToSingleton":"ToSingleton"}],NoviceScoreView:[function(e,t,o){"use strict";cc._RF.push(t,"4f218LIe2pG+4ykKpmPlGiu","NoviceScoreView"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("./NumberChangedView"),i=e("../../Command/GamePlaySignal"),a=cc._decorator,r=a.ccclass,s=(a.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onLoad=function(){i.NoviceScoreChanged.inst.addListenerOne(this.onNumberChanged,this)},t.prototype.start=function(){},t=__decorate([r],t)}(n.default));o.default=s,cc._RF.pop()},{"../../Command/GamePlaySignal":"GamePlaySignal","./NumberChangedView":"NumberChangedView"}],NumberChangedView:[function(e,t,o){"use strict";cc._RF.push(t,"2b373cJGixKrYQE7awOvUKY","NumberChangedView"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../../View/BaseView"),i=cc._decorator,a=i.ccclass,r=(i.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.num=0,t.showNum=0,t.step=0,t.label=null,t}return __extends(t,e),Object.defineProperty(t.prototype,"Label",{get:function(){return this.label?this.label:this.label=this.node.getComponent(cc.Label)},enumerable:!0,configurable:!0}),t.prototype.onLoad=function(){},t.prototype.start=function(){},t.prototype.onNumberChanged=function(e){this.num=e,this.num!=this.showNum?this.step=Math.ceil((this.num-this.showNum)/120):this.step=0},t.prototype.update=function(e){this.num!=this.showNum&&(this.showNum+=this.step,(this.showNum>this.num&&this.step>0||this.showNum<this.num&&this.step<0)&&(this.showNum=this.num,this.step=0)),this.Label.string=this.showNum.toString()},t=__decorate([a],t)}(n.default));o.default=r,cc._RF.pop()},{"../../../View/BaseView":"BaseView"}],PlayerCardRootMediator:[function(e,t,o){"use strict";cc._RF.push(t,"4eb14w4LJlCa7KntGVst6EG","PlayerCardRootMediator"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../../View/BaseMediator"),i=e("../../Command/GamePlaySignal"),a=cc._decorator,r=a.ccclass,s=(a.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onRegister=function(){i.DispatchPlayerDomino.inst.addListenerTwo(this.onAddDomino,this)},t.prototype.onAddDomino=function(e,t){this.View.addDomino(e,t)},t.prototype.onUnregister=function(){},t=__decorate([r],t)}(n.default));o.default=s,cc._RF.pop()},{"../../../View/BaseMediator":"BaseMediator","../../Command/GamePlaySignal":"GamePlaySignal"}],PlayerCardRootView:[function(e,t,o){"use strict";cc._RF.push(t,"73787HzHthJ1LZA7f0ObcSf","PlayerCardRootView"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../../View/BaseView"),i=e("./PlayerCardRootMediator"),a=e("../../../Utils/Cocos"),r=e("../../Command/GamePlaySignal"),s=cc._decorator,c=s.ccclass,l=(s.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.childOffset=cc.v2(14,0),t}return __extends(t,e),t.prototype.onLoad=function(){this.node.scale=.7,this.BindMedaitor(i.default)},t.prototype.start=function(){},t.prototype.addDomino=function(e,t){e.getParent()&&e.setPosition(a.ConvertToNodeSpaceAR(e,this.node));var o=cc.v2(0,0);o.addSelf(this.childOffset.mul(this.node.childrenCount+1)),o.addSelf(cc.v2(e.width,0).mul(this.node.childrenCount).add(cc.v2(.75*e.width,0))),e.setParent(this.node),e.scale=1/this.node.scale,e.runAction(cc.sequence(cc.delayTime(.1*this.node.childrenCount),cc.spawn(cc.moveTo(.2,o),cc.scaleTo(.2,1)),cc.callFunc(function(){r.DispatchDoneSignal.inst.dispatch()})))},t=__decorate([c],t)}(n.default));o.default=l,cc._RF.pop()},{"../../../Utils/Cocos":"Cocos","../../../View/BaseView":"BaseView","../../Command/GamePlaySignal":"GamePlaySignal","./PlayerCardRootMediator":"PlayerCardRootMediator"}],PlayerModelProxy:[function(e,t,o){"use strict";cc._RF.push(t,"05371njh5dFV5jUHKKdb8d5","PlayerModelProxy"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../Utils/ToSingleton"),i=e("../Model/GamePlayModel"),a=e("../Command/GamePlaySignal"),r=e("../../Global/Level"),s=e("../Controller/GameStateController"),c=function(e){function t(){var t=e.call(this)||this;return t.playerModel=null,t.roundDispatchCount=0,t.bindSignal(),t}return __extends(t,e),Object.defineProperty(t.prototype,"Model",{get:function(){return this.playerModel?this.playerModel:this.playerModel=new i.GamePlayModel},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Theme",{get:function(){return this.Model.Theme},enumerable:!0,configurable:!0}),t.prototype.bindSignal=function(){a.NextRoundSignal.inst.addListener(this.nextRound,this),a.DispatchDoneSignal.inst.addListener(this.onDispatchDominoDone,this)},t.prototype.onDispatchDominoDone=function(){this.roundDispatchCount++,this.roundDispatchCount>=r.Level.getDominoCountInRound(this.Model.Level)&&s.GameStateController.inst.roundStart()},t.prototype.createRoundData=function(){this.Model.createRoundData()},t.prototype.initGametheme=function(){this.Model.initGametheme()},t.prototype.nextRound=function(){this.roundDispatchCount=0,s.GameStateController.inst.roundEnd(),a.BeforeNextRoundSignal.inst.dispatch(),this.Model.nextRound(),a.ReadyDispatchDominoSignal.inst.dispatch()},t.prototype.getOriginDominoOnNewRound=function(){return this.Model.getTotalDominosInRound()},t.prototype.getPlayerDominos=function(){return this.Model.getPlayerDominosInRound()},t.prototype.getAIDominos=function(){return this.Model.getAIDominosInRound()},t.prototype.getStackDominos=function(){return this.Model.getStackDominosInRound()},t}(n.SingleTon());o.PlayerModelProxy=c,cc._RF.pop()},{"../../Global/Level":"Level","../../Utils/ToSingleton":"ToSingleton","../Command/GamePlaySignal":"GamePlaySignal","../Controller/GameStateController":"GameStateController","../Model/GamePlayModel":"GamePlayModel"}],PlayerScoreView:[function(e,t,o){"use strict";cc._RF.push(t,"e8edbOBuLtMSqa2yMYDJxJP","PlayerScoreView"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("./NumberChangedView"),i=e("../../Command/GamePlaySignal"),a=cc._decorator,r=a.ccclass,s=(a.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onLoad=function(){i.PlayerScoreChanged.inst.addListenerOne(this.onNumberChanged,this)},t.prototype.start=function(){},t=__decorate([r],t)}(n.default));o.default=s,cc._RF.pop()},{"../../Command/GamePlaySignal":"GamePlaySignal","./NumberChangedView":"NumberChangedView"}],Random:[function(e,t,o){"use strict";cc._RF.push(t,"114f9Vox8JGQbohBr4HFlkf","Random"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function e(){}return e.seededRandom=function(e,t,o){return t+1e6*((1711*e+88888)%302654/302654+(1722*e+55555)%302665/302665+(1755*e+23333)%302766/302766)%1e6/1e6*(o-t)},e.getRandom=function(e,t){void 0===e&&(e=0),void 0===t&&(t=1);var o=this.randomSeed,n=this.seededRandom(o,e,t),i=Math.floor(this.seededRandom(o,1,302766));return this.randomSeed+=i,n},e.setRandomSeed=function(e){console.log(" set random seed:",e),this.randomSeed=e,this.sharedSeed=e},e.randomRoundToInt=function(e,t){return void 0===e&&(e=0),void 0===t&&(t=1),Math.round(this.getRandom(e,t))},e.randomSeed=Math.random(),e.sharedSeed=Math.random(),e}();o.Random=n,cc._RF.pop()},{}],ResourceController:[function(e,t,o){"use strict";cc._RF.push(t,"101438Z+apHT6Ap+WQKfVd2","ResourceController"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../Utils/ToSingleton"),i=e("../../Global/Theme"),a=e("../../Factory/GameFactory"),r={Number:{0:"",1:"bg_point1",2:"bg_point2",3:"bg_point3",4:"bg_point4",5:"bg_point5",6:"bg_point6",7:"bg_point7"},Sweet:{0:"",1:"bg_point1circle",2:"bg_point2circlesquare",3:"bg_point3circletriangle",4:"bg_point4circleheart",5:"bg_point5circlestar",6:"bg_point6circlerainbow",7:"bg_point7circledonut"}},s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.UIAtlas=null,t}return __extends(t,e),t.prototype.setAtlas=function(e){console.assert(null!=e,"game atlas is null!"),this.UIAtlas=e},t.prototype.getPointSprite=function(e,t){var o=r[i.Theme[e]][t];return o&&""!=o?this.UIAtlas.getSpriteFrame(o):null},t.prototype.getDomino=function(e,t,o,n){return a.gFactory.getObj("Domino",e,t,n,o)},t.prototype.putDomino=function(e){a.gFactory.putObj("Domino",e)},t}(n.SingleTon());o.ResourceController=s,cc._RF.pop()},{"../../Factory/GameFactory":"GameFactory","../../Global/Theme":"Theme","../../Utils/ToSingleton":"ToSingleton"}],RoundModel:[function(e,t,o){"use strict";cc._RF.push(t,"bf5bdkSPH5MipC9sR1nqP0P","RoundModel"),Object.defineProperty(o,"__esModule",{value:!0});var n,i=e("../Command/GamePlaySignal");(function(e){e[e.AI=0]="AI",e[e.Player=1]="Player"})(n=o.DrawTarget||(o.DrawTarget={}));var a=function(){function e(e,t,o){this.playerDominos=[],this.AIDominos=[],this.DominoStack=[],this.DeskDominos=[],this.deskHeadDomino=null,this.playerDominos=e,this.AIDominos=t,this.DominoStack=o}return e.prototype.setDeskHeadDomino=function(e){this.deskHeadDomino=e},e.prototype.getDeskHeadDomino=function(){return this.deskHeadDomino},e.prototype.getTotalDominos=function(){return[].concat(this.AIDominos).concat(this.playerDominos).concat(this.DeskDominos).concat(this.DominoStack)},e.prototype.addPlayerDomino=function(e){this.playerDominos.push(e)},e.prototype.addAIDomino=function(e){this.AIDominos.push(e)},e.prototype.getPlayerDominos=function(){return this.playerDominos},e.prototype.getAIDominos=function(){return this.AIDominos},e.prototype.getStackDominos=function(){return this.DominoStack},e.prototype.getDeskDominos=function(){return this.DeskDominos},e.prototype.drawDomino=function(e,t){for(var o=0;o<this.DominoStack.length;++o)if(this.DominoStack[o].ID==e){console.log(n[t]," \u62bd\u724c:",e);var a=this.DominoStack.splice(o,1)[0];t==n.AI?this.addAIDomino(a):this.addPlayerDomino(a),i.BoneyardCountChanged.inst.dispatchOne(this.DominoStack.length);break}console.error(" Domino Stack has no this domino card:",e,", target:",n[t])},e}();o.RoundModel=a,cc._RF.pop()},{"../Command/GamePlaySignal":"GamePlaySignal"}],RoundNumberView:[function(e,t,o){"use strict";cc._RF.push(t,"f1e3cYK7O5CubEBkE1PRV8Q","RoundNumberView"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../../View/BaseView"),i=e("../../Command/GamePlaySignal"),a=cc._decorator,r=a.ccclass,s=(a.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onLoad=function(){i.RoundNumberChanged.inst.addListenerOne(this.onRoundChanged,this)},t.prototype.onRoundChanged=function(e){this.node.getComponent(cc.Label).string=e.toString()},t.prototype.start=function(){},t=__decorate([r],t)}(n.default));o.default=s,cc._RF.pop()},{"../../../View/BaseView":"BaseView","../../Command/GamePlaySignal":"GamePlaySignal"}],Signal:[function(e,t,o){"use strict";cc._RF.push(t,"5e03fyVNOZPs7lLvT6ttunM","Signal"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.listenerMap=[],t.onceListenerMap=[],t}return __extends(t,e),t.prototype.doDispatch=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.excuteListener.apply(this,e),this.excuteOnce.apply(this,e)},t.prototype.excuteListener=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(this.listenerMap&&this.listenerMap.length>0)for(var o=0,n=this.listenerMap;o<n.length;o++){var i=n[o];i.callback.apply(i.target,e)}},t.prototype.excuteOnce=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(this.onceListenerMap&&this.onceListenerMap.length>0){for(var o=0,n=this.onceListenerMap;o<n.length;o++){var i=n[o];i.callback.apply(i.target,e)}this.onceListenerMap.length=0}},t.prototype.listen=function(e,t){this.listenerMap.push({callback:e,target:t})},t.prototype.listenOnce=function(e,t){this.onceListenerMap.push({callback:e,target:t})},t.prototype.removeListener=function(e,t){if(this.listenerMap&&this.listenerMap.length>0)for(var o=0;o<this.listenerMap.length;++o){var n=this.listenerMap[o];n.callback==e&&n.target==t&&(this.listenerMap.splice(o,1),--o)}},t.prototype.removeTarget=function(e){if(this.listenerMap&&this.listenerMap.length>0)for(var t=0;t<this.listenerMap.length;++t){this.listenerMap[t].target==e&&(this.listenerMap.splice(t,1),--t)}},t.prototype.dispatch=function(){this.doDispatch(null)},t.prototype.dispatchOne=function(e){this.doDispatch(e)},t.prototype.dispatchTwo=function(e,t){this.doDispatch(e,t)},t.prototype.dispatchThree=function(e,t,o){this.doDispatch(e,t,o)},t.prototype.dispatchFour=function(e,t,o,n){this.doDispatch(e,t,o,n)},t.prototype.dispatchFive=function(e,t,o,n,i){this.doDispatch(e,t,o,n,i)},t.prototype.addListener=function(e,t){this.listen(e,t)},t.prototype.addOnce=function(e,t){this.listenOnce(e,t)},t.prototype.addListenerOne=function(e,t){this.listen(e,t)},t.prototype.addListenerTwo=function(e,t){this.listen(e,t)},t.prototype.addListenerThree=function(e,t){this.listen(e,t)},t.prototype.addListenerFour=function(e,t){this.listen(e,t)},t.prototype.addListenerFive=function(e,t){this.listen(e,t)},t.prototype.addOnceOne=function(e,t){this.listenOnce(e,t)},t.prototype.addOnceTwo=function(e,t){this.listenOnce(e,t)},t.prototype.addOnceThree=function(e,t){this.listenOnce(e,t)},t.prototype.addOnceFour=function(e,t){this.listenOnce(e,t)},t.prototype.addOnceFive=function(e,t){this.listenOnce(e,t)},t}(e("./ToSingleton").SingleTon());o.BaseSignal=n,cc._RF.pop()},{"./ToSingleton":"ToSingleton"}],SingleTouchView:[function(e,t,o){"use strict";cc._RF.push(t,"85688DQVyhPRqaAh/y2/Qug","SingleTouchView"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("./BaseView"),i=cc._decorator,a=i.ccclass,r=(i.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.touchid=null,t}return __extends(t,e),t.prototype.onLoad=function(){this.node.on(cc.Node.EventType.TOUCH_CANCEL,this.touchCancel,this),this.node.on(cc.Node.EventType.TOUCH_END,this.touchEnd,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this.touchMove,this),this.node.on(cc.Node.EventType.TOUCH_START,this.touchStart,this)},t.prototype.start=function(){},t.prototype.touchStart=function(e){null===this.touchid||this.touchid===e.getID()?(this.touchid=e.getID(),this.onTouchStart(e)):console.log(this.node.name," touch start  touchid is different! ")},t.prototype.touchMove=function(e){null!==this.touchid&&this.touchid!==e.getID()||(this.touchid=e.getID(),this.onTouchMove(e))},t.prototype.touchEnd=function(e){null===this.touchid||this.touchid===e.getID()?(this.touchid=null,this.onTouchEnd(e)):console.log(this.node.name," touch end  touchid is different! ")},t.prototype.touchCancel=function(e){null===this.touchid||this.touchid===e.getID()?(this.touchid=null,this.onTouchCancel(e)):console.log(this.node.name," touch cancel  touchid is different! ")},t.prototype.onTouchStart=function(e){},t.prototype.onTouchMove=function(e){},t.prototype.onTouchEnd=function(e){},t.prototype.onTouchCancel=function(e){},t=__decorate([a],t)}(n.default));o.default=r,cc._RF.pop()},{"./BaseView":"BaseView"}],StartGameCommond:[function(e,t,o){"use strict";cc._RF.push(t,"1db594KvoJIVbc+cwfogrGn","StartGameCommond"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("./InitSignal"),i=e("../../GamePlay/Facade/PlayerModelProxy"),a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.execute=function(e){console.log("--------- excute StartGameCommond ---------"),i.PlayerModelProxy.inst.createRoundData(),i.PlayerModelProxy.inst.initGametheme(),n.GameReadySignal.inst.dispatch()},t}(puremvc.SimpleCommand);o.StartGameCommond=a,cc._RF.pop()},{"../../GamePlay/Facade/PlayerModelProxy":"PlayerModelProxy","./InitSignal":"InitSignal"}],StepManager:[function(e,t,o){"use strict";cc._RF.push(t,"83709TvPtJOVayPDGaPh6Ov","StepManager");(function(){function e(){this.totalStep=[],this.curStep=[]}e.prototype.register=function(e,t){this.completeCallback=e,this.totalStep=t},e.prototype.nextStep=function(e){this.totalStep.indexOf(e)<0?console.error(" \u6ca1\u6709\u8fd9\u4e00\u6b65\uff1a",e):this.curStep.indexOf(e)>=0?console.warn(" \u6b65\u9aa4\u5df2\u5b8c\u6210\uff1a",e):(this.curStep.push(e),this.curStep.sort(function(e,t){return e>t?-1:1}),this.totalStep.sort(function(e,t){return e>t?-1:1}),console.log(" cur step:",this.curStep.join(",")),console.log(" total step:",this.totalStep.join(",")),this.curStep.join(",")==this.totalStep.join(",")&&(console.log(" step done"),this.totalStep.length=0,this.completeCallback(),this.completeCallback=null))}})();cc._RF.pop()},{}],ThemeView:[function(e,t,o){"use strict";cc._RF.push(t,"aefb6btN6dDsLbrbCsSRBfb","ThemeView"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../View/BaseView"),i=e("../Command/InitSignal"),a=e("../../Global/Theme"),r=cc._decorator,s=r.ccclass,c=(r.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onLoad=function(){i.GameThemeInit.inst.addListenerOne(this.onThemeInit,this)},t.prototype.start=function(){},t.prototype.onThemeInit=function(e){for(var t=0,o=this.node.children;t<o.length;t++){var n=o[t];n.active=n.name==a.Theme[e]}},t=__decorate([s],t)}(n.default));o.default=c,cc._RF.pop()},{"../../Global/Theme":"Theme","../../View/BaseView":"BaseView","../Command/InitSignal":"InitSignal"}],Theme:[function(e,t,o){"use strict";cc._RF.push(t,"1eeb2LaYMZEfb4+fEga+UZy","Theme"),Object.defineProperty(o,"__esModule",{value:!0}),function(e){e[e.Number=0]="Number",e[e.Sweet=1]="Sweet"}(o.Theme||(o.Theme={})),cc._RF.pop()},{}],Time:[function(e,t,o){"use strict";cc._RF.push(t,"87a24xcV95AoII6L5W1ABoI","Time"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function e(){}return e.timeFormat=function(e){var t=Math.floor(e/60),o=Math.floor(e%60),n="00";return o<10&&(n="0"+o),t+"/"+n},e}();o.Time=n,cc._RF.pop()},{}],ToSingleton:[function(e,t,o){"use strict";cc._RF.push(t,"b07299nlSpOIIxOkIMBhUY9","ToSingleton"),Object.defineProperty(o,"__esModule",{value:!0}),o.SingleTon=function(){return function(){function e(){}return Object.defineProperty(e,"inst",{get:function(){return this.ins?this.ins:this.ins=new this},enumerable:!0,configurable:!0}),e}()},cc._RF.pop()},{}],UpThemeView:[function(e,t,o){"use strict";cc._RF.push(t,"be1349NGflO6aWLqhbWgiHy","UpThemeView"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../View/BaseView"),i=e("../Command/InitSignal"),a=e("../../Global/Theme"),r=cc._decorator,s=r.ccclass,c=(r.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onLoad=function(){i.GameThemeInit.inst.addListenerOne(this.onThemeInit,this)},t.prototype.start=function(){},t.prototype.onThemeInit=function(e){for(var t=0,o=this.node.children;t<o.length;t++){var n=o[t];n.active=n.name==a.Theme[e]}},t=__decorate([s],t)}(n.default));o.default=c,cc._RF.pop()},{"../../Global/Theme":"Theme","../../View/BaseView":"BaseView","../Command/InitSignal":"InitSignal"}],UpdateController:[function(e,t,o){"use strict";cc._RF.push(t,"b3cadc9oLxMlaTWSqS0DgLW","UpdateController"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../Utils/ToSingleton"),i=cc._decorator,a=i.ccclass,r=(i.property,function(e){function t(){var t=e.call(this)||this;return t.assetsManager=null,t.STORAGE_PATH=(window.jsb&&jsb.fileUtils?jsb.fileUtils.getWritablePath():"/")+"hot-update",t.MANIFEST_PAth="",t.isUpdating=!1,t.manifest=null,t.completeCallback=[],t.startCallback=[],t.errorCallback=[],t.progressCallback=[],t.init(),t}return __extends(t,e),t.prototype.init=function(){window.jsb&&(this.assetsManager=new jsb.AssetsManager(this.MANIFEST_PAth,this.STORAGE_PATH,this.versionCompareHandle),this.assetsManager.setVerifyCallback(this.verifyCallback.bind(this)),cc.sys.os===cc.sys.OS_ANDROID&&this.assetsManager.setMaxConcurrentTask(2))},t.prototype.setManifest=function(e){this.manifest=e},t.prototype.getVersion=function(){return null==this.assetsManager?"":null==this.assetsManager.getLocalManifest()?"":this.assetsManager.getLocalManifest().getVersion()},t.prototype.addCompleteCallback=function(e,t){this.completeCallback.push({target:t,callback:e})},t.prototype.addErrorCallback=function(e,t){this.errorCallback.push({target:e,callback:t})},t.prototype.addStartCallback=function(e,t){this.startCallback.push({target:e,callback:t})},t.prototype.addProgressCallback=function(e,t){this.progressCallback.push({target:e,callback:t})},t.prototype.triggeError=function(e,t){void 0===t&&(t=!1),this.onError(e,t)},t.prototype.onError=function(e,t){void 0===t&&(t=!1),console.log(" this.errorCallback:",this.errorCallback.length,"error:",e);for(var o=0,n=this.errorCallback;o<n.length;o++){var i=n[o];i.callback.apply(i.target,[e,t])}},t.prototype.onComplete=function(e,t){void 0===t&&(t=!1),console.log(" on update complete:",this.getVersion()),console.log("storagePath:",this.getStoragePath()),console.log("search path:",this.getSearchPaths());for(var o=function(o){setTimeout(function(){o.callback.apply(o.target,[e,t])},0)},n=0,i=this.completeCallback;n<i.length;n++){o(i[n])}},t.prototype.getStoragePath=function(){return this.assetsManager?this.assetsManager.getStoragePath():""},t.prototype.getSearchPaths=function(){return window.jsb?jsb.fileUtils.getSearchPaths():""},t.prototype.onStart=function(e,t){void 0===t&&(t=!1),console.log(" this.startCallback:",this.startCallback.length);for(var o=0,n=this.startCallback;o<n.length;o++){var i=n[o];i.callback.apply(i.target,[e,t])}},t.prototype.onProgress=function(e,t){for(var o=0,n=this.progressCallback;o<n.length;o++){var i=n[o];i.callback.apply(i.target,[e,t])}},t.prototype.loadCustomManifest=function(e){if(null!=this.assetsManager&&this.assetsManager.getState()==jsb.AssetsManager.State.UNINITED){var t=new jsb.Manifest(e,this.STORAGE_PATH);this.assetsManager.loadLocalManifest(t,this.STORAGE_PATH)}},t.prototype.checkForUpdate=function(){if(null!=this.assetsManager){if(this.isUpdating)return"Version update is on process...";if(console.log(" start check for update ..."),this.assetsManager.getState()===jsb.AssetsManager.State.UNINITED){var e=this.manifest.nativeUrl;console.log(" native url:",e),cc.loader.md5Pipe&&(e=cc.loader.md5Pipe.transformURL(e)),this.assetsManager.loadLocalManifest(e)}if(!this.assetsManager.getLocalManifest()||!this.assetsManager.getLocalManifest().isLoaded())return this.onError("Failed to load local manifest ..."),"Failed to load local manifest ...";this.assetsManager.setEventCallback(this.checkUpdateCallback.bind(this)),this.assetsManager.checkUpdate(),this.isUpdating=!0}else this.onComplete("no need to update.")},t.prototype.checkUpdateCallback=function(e){switch(console.log("checkUpdateCallback Code: "+e.getEventCode()),e.getEventCode()){case jsb.EventAssetsManager.ERROR_NO_LOCAL_MANIFEST:this.onError("No local manifest file found, hot update skipped.");break;case jsb.EventAssetsManager.ERROR_DOWNLOAD_MANIFEST:case jsb.EventAssetsManager.ERROR_PARSE_MANIFEST:this.onError("Fail to download manifest file, hot update skipped.");break;case jsb.EventAssetsManager.ALREADY_UP_TO_DATE:var t=this.assetsManager.getRemoteManifest()?this.assetsManager.getRemoteManifest().getVersion():" null",o=this.assetsManager.getLocalManifest()?this.assetsManager.getLocalManifest().getVersion():"null";this.onComplete("Already up to date with the latest remote version :"+t+", local version :"+o);break;case jsb.EventAssetsManager.NEW_VERSION_FOUND:this.isUpdating=!1;var n=this.assetsManager.getLocalManifest()?this.assetsManager.getLocalManifest().getVersion():"null",i=this.assetsManager.getRemoteManifest()?this.assetsManager.getRemoteManifest().getVersion():"null";if(console.log("New version found, old:",n,", new: ",i),"null"==n||"null"==i);else{console.log("storage path:",this.assetsManager.getStoragePath());var a=n.split(".")[0];i.split(".")[0]>a?this.onStart("new version found, go to store to download new app.",!0):(this.onStart("new version found, update process start.",!1),this.updateVersion())}break;default:return}},t.prototype.getUpdateDescription=function(){return""},t.prototype.updateVersion=function(){if(null!=this.assetsManager&&!this.isUpdating)if([jsb.AssetsManager.State.UPDATING,jsb.AssetsManager.State.UNZIPPING,jsb.AssetsManager.State.UP_TO_DATE].indexOf(this.assetsManager.getState())>=0)this.onComplete("no need to update: "+this.assetsManager.getState(),!1);else{if(this.assetsManager.getState()===jsb.AssetsManager.State.UNINITED){var e=this.manifest.nativeUrl;cc.loader.md5Pipe&&(e=cc.loader.md5Pipe.transformURL(e)),this.assetsManager.loadLocalManifest(e)}this.assetsManager.setEventCallback(this.updateCallback.bind(this)),console.log(" start update ...:",this.assetsManager.getState()),this.assetsManager.update(),this.isUpdating=!0}},t.prototype.versionToInt=function(e){return parseInt(e.toString().split(".").join(""))},t.prototype.versionToString=function(e){return Math.floor(e/100)+"."+Math.floor(e/10)%10+"."+Math.floor(e)%10},t.prototype.updateCallback=function(e){var t=this,o=!1,n=!1,i=null;switch(console.log("update event code:",e.getEventCode()),e.getEventCode()){case jsb.EventAssetsManager.ERROR_NO_LOCAL_MANIFEST:this.onError("No local manifest file found, hot update skipped."),n=!0;break;case jsb.EventAssetsManager.UPDATE_PROGRESSION:var a=e.getPercent();NaN!=a&&"number"==typeof a||(a=0),this.onProgress(e.getMessage()?"Updated file:"+e.getMessage():"Updating:"+(100*a).toFixed(0)+"%",a);break;case jsb.EventAssetsManager.ERROR_DOWNLOAD_MANIFEST:case jsb.EventAssetsManager.ERROR_PARSE_MANIFEST:this.onError("Fail to download manifest file, hot update skipped."),n=!0;break;case jsb.EventAssetsManager.ALREADY_UP_TO_DATE:i=function(){var e=t.assetsManager.getRemoteManifest()?t.assetsManager.getRemoteManifest().getVersion():" null";t.onComplete("Already up to date with the latest remote version :"+e)},n=!0;break;case jsb.EventAssetsManager.UPDATE_FINISHED:i=function(){var o=t.assetsManager.getRemoteManifest()?t.assetsManager.getRemoteManifest().getVersion():" null";t.onComplete("Update finished. new : "+o+e.getMessage(),!0)},o=!0;break;case jsb.EventAssetsManager.UPDATE_FAILED:this.onError("Update failed. "+e.getMessage(),!0);break;case jsb.EventAssetsManager.ERROR_UPDATING:this.onError("Asset update error: "+e.getAssetId()+", "+e.getMessage());break;case jsb.EventAssetsManager.ERROR_DECOMPRESS:this.onError(e.getMessage())}if(n&&(this.assetsManager.setEventCallback(null),this.isUpdating=!1),o){this.assetsManager.setEventCallback(null);var r=jsb.fileUtils.getSearchPaths();console.log("old searchPaths:",r);var s=this.assetsManager.getLocalManifest().getSearchPaths();console.log("new path:",JSON.stringify(s));for(var c=0,l=s;c<l.length;c++){var u=l[c];r.indexOf(u)<0&&Array.prototype.unshift.apply(r,u)}cc.sys.localStorage.setItem("select-game",JSON.stringify(r)),jsb.fileUtils.setSearchPaths(r),console.log("new searchPaths:",JSON.stringify(r)),console.log(" paths storage:",cc.sys.localStorage.getItem("select-game"))}i&&i()},t.prototype.restart=function(){cc.audioEngine.stopAll(),cc.game.restart()},t.prototype.retry=function(){null!=this.assetsManager&&0==this.isUpdating&&this.assetsManager.downloadFailedAssets()},t.prototype.versionCompareHandle=function(e,t){cc.log("JS Custom Version Compare: version A is "+e+", version B is "+t);for(var o=e.split("."),n=t.split("."),i=0;i<o.length;++i){var a=parseInt(o[i]),r=parseInt(n[i]||"0");if(a!==r)return a-r}return n.length>o.length?-1:0},t.prototype.verifyCallback=function(e,t){var o=t.compressed,n=t.md5,i=t.path;t.size;return o?("Verification passed : "+i,!0):("Verification passed : "+i+" ("+n+")",!0)},t.prototype.destory=function(){this.assetsManager&&this.assetsManager.setEventCallback(null),this.startCallback=[],this.completeCallback=[],this.errorCallback=[],this.progressCallback=[]},t=__decorate([a],t)}(n.SingleTon()));o.default=r,cc._RF.pop()},{"../Utils/ToSingleton":"ToSingleton"}]},{},["App","GameFactory","GamePlaySignal","GameStateController","ResourceController","PlayerModelProxy","DeskNodeModel","DominoModel","GamePlayModel","GameRule","RoundModel","AICardRootMediator","AICardRootView","CardDrawRootMediator","CardDrawRootView","DominoRootMediator","DominoRootView","DominoStateMediator","DominoStateView","PlayerCardRootMediator","PlayerCardRootView","BoneyardView","CardBagView","NoviceScoreView","NumberChangedView","PlayerScoreView","RoundNumberView","FacadeGlobal","Level","Theme","InitSignal","InititalCommond","LoadAudioCommond","LoadPrefabCommond","StartGameCommond","InitialFacade","InitSceneView","LoadingPageMediator","LoadingView","ThemeView","UpThemeView","AudioManager","StepManager","UpdateController","CelerSDK","Cocos","FrameAniBase","HashMap","LogHandler","Random","Signal","Time","ToSingleton","BaseMediator","BaseView","SingleTouchView"]);